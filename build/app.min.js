!function(i){"use strict";var a=["ui.bootstrap","leaflet-directive","ngAnimate","templateCache","civic-graph.api"];i.module("civic-graph.api",[]),i.module("civic-graph",a)}(angular);
!function(t){"use strict";function a(){return{templateUrl:"js/analytic/analytics.html",restrict:"E",scope:{},controller:"analyticsCtrl"}}var c=[a];t.module("civic-graph").directive("analytics",c)}(angular);
!function(n){"use strict";function e(n){return!("undefined"==typeof n||null===n)}function t(n){var t=e(n)?n:{};return function(n,r){var i=e(r)?r:null;return e(t[n])?t[n]:i}}function r(n){var e=t(n);this.id=e("id"),this.name=e("name"),this.enabled=e("enable",!0)}function i(n){function e(n){return new r(n)}function t(){return n.get("/categories")}return{getCategoryModel:e,getAll:t}}i.$inject=["cgApiCaller"],n.module("civic-graph.api").factory("categoryService",i)}(angular);
!function(n){"use strict";function t(n){return!("undefined"==typeof n||null===n)}function i(){return{Funding:!0,Data:!0,Employment:!0,Collaboration:!0}}function e(n){var i=t(n)?n:{};return function(n,e){var o=t(e)?e:null;return t(i[n])?i[n]:o}}function o(n){var t=e(n);this.id=t("id"),this.name=t("name"),this.details=t("details"),this.entity=t("entity"),this.entity_id=t("entity_id")}function r(n){return new o(n)}function u(n){function t(){return n.get(c)}return{getAll:t,getConnectionTypes:i,getConnectionModel:r}}var c="/connections";u.$inject=["cgApiCaller"],n.module("civic-graph.api").factory("connectionService",u)}(angular);
!function(n){"use strict";function t(n){return!("undefined"==typeof n||null===n)}function i(n){var i=t(n)?n:{};return function(n,r){var u=t(r)?r:null;return t(i[n])?i[n]:u}}function r(n){var t=i(n);this.id=t("id"),this.year=t("year"),this.amount=t("amount",0)}function u(n){return new r(n)}function e(){return{getFinanceModel:u}}n.module("civic-graph.api").factory("financeService",e)}(angular);
!function(n){"use strict";function t(n){return!("undefined"==typeof n||null===n)}function i(n){var i=t(n)?n:{};return function(n,u){var e=t(u)?u:null;return t(i[n])?i[n]:e}}function u(n){var t=i(n);this.id=t("id"),this.year=t("year"),this.amount=t("amount"),this.entity=t("entity","")}function e(n){return new u(n)}function r(){return{getFundingConnectionModel:e}}n.module("civic-graph.api").factory("fundingConnectionService",r)}(angular);
!function(o){"use strict";function r(){return{templateUrl:"js/control/controls.html",restrict:"E",scope:{toggleNetwork:"="},controller:"controlCtrl",controllerAs:"control",bindToController:{minConnections:"="}}}var t=[r];o.module("civic-graph").directive("control",t)}(angular);
!function(t){"use strict";function e(t){return!("undefined"==typeof t||null===t)}function n(n,i,o,c,r,a,d){function s(){var t,e,i,o;for(e in n.categories)if(n.categories.hasOwnProperty(e)){t=n.categories[e];for(i in n.editEntity.categories)n.editEntity.categories.hasOwnProperty(i)&&(o=n.editEntity.categories[i],t.id===o.id&&(t.enabled=o.enabled))}}n.isEditing=!1,n.editEntity=r.getEntityModel(n.entity),n.entityTypes=r.getEntityTypes(),n.influenceTypes=r.getInfluenceTypes();var u;n.categories=[],n.addressSearch=function(t){return i.jsonp("https://dev.virtualearth.net/REST/v1/Locations",{params:{query:t,key:"Ai58581yC-Sr7mcFbYTtUkS3ixE7f6ZuJnbFJCVI4hAtW1XoDEeZyidQz2gLCCyD",jsonp:"JSON_CALLBACK",include:"ciso2"}}).then(function(t){if(e(t.data.resourceSets)&&t.data.resourceSets.length>0)return t.data.resourceSets[0].resources})},n.toggleCategory=function(t){if(0===n.editEntity.categories.length)n.editEntity.categories.push(t);else{var e=!1;for(var i in n.editEntity.categories)if(n.editEntity.categories.hasOwnProperty(i)){var o=n.editEntity.categories[i];if(o.id===t.id){e=!0,o.enabled=t.enabled;break}}e||n.editEntity.categories.push(t)}},n.setLocation=function(t,i){n.addressSearch(t.formattedAddress).then(function(o){if(e(o[0])){var c=o[0],r=c.address,a=c.point;n.addLocation(i),t.address_line=e(r.addressLine)?r.addressLine:"",t.locality=e(r.locality)?r.locality:"",t.district=e(r.adminDistrict)?r.adminDistrict:"",t.country=e(r.countryRegion)?r.countryRegion:null,t.country_code=e(r.countryRegionIso2)?r.countryRegionIso2:"",t.coordinates=e(a.coordinates)?a.coordinates:null,t.postal_code=e(r.postalCode)?r.postalCode:null}})},n.addLocation=function(t){t&&n.editEntity.locations.push(d.getLocationModel())},n.addKeyPerson=function(){c.some(n.editEntity.key_people,{name:"",id:null})||n.editEntity.key_people.push({name:"",id:null})},n.setFundingConnection=function(t,e){e.entity_id=t.id},n.addFundingConnection=function(t){c.some(t,{entity:""})||t.push({entity:"",amount:null,year:null,id:null})},n.setConnection=function(t,e){e.entity_id=t.id},n.addConnection=function(t){c.some(t,{entity:"",id:null})||t.push({entity:"",id:null,details:null})},n.addFinance=function(t){c.every(t,function(t){return t.amount>0&&t.year>1750})&&t.push({amount:null,year:null,id:null})},n.save=function(){function t(t){n.isSaving=!1,n.$emit("editEntitySuccess",t),n.cancelEdit()}function e(){n.isError=!0,o(function(){n.isError=!1},2e3)}n.isSaving=!0,r.saveEntity(n.editEntity.generateDBModel()).then(t,e)},n.cancelEdit=function(){n.isOpen=!1},n.$watch("entity",function(i,o){t.equals(i,o)||(n.editEntity=r.getEntityModel(i),n.categories=t.copy(u),s(),n.isEditing=e(n.editEntity.id))}),a.getAll().then(function(e){u=e.categories,n.categories=t.copy(u)})}n.$inject=["$scope","$http","$timeout","_","entityService","categoryService","locationService"],t.module("civic-graph").controller("editCtrl",n)}(angular);
!function(t){"use strict";function e(){return{templateUrl:"js/edit-entity/edit.html",restrict:"E",scope:{entity:"=",entities:"=",isOpen:"="},controller:"editCtrl"}}var i=[e];t.module("civic-graph").directive("editEntity",i)}(angular);
!function(i,t){"use strict";function s(i){function s(){var i=t(this);i.css("height","55vh")}function c(){var i=t(this);window.innerHeight/3>parseInt(i.css("height"))?i.css("height","55vh"):i.css("height","30vh")}var e;i.mobile&&(e=t("#details-panel"),e.css("height","30vh"),e.scrollTop(0),e.scroll(s),e.click(c))}function c(){return{restrict:"A",link:s}}i.module("civic-graph").directive("addMobileEvents",[c])}(angular,$);
!function(o){"use strict";function c(o,c){o.closeWindow=function(){c.close()}}o.module("civic-graph").controller("modalCtrl",["$scope","$modalInstance",c])}(angular);
!function(o){"use strict";o.module("civic-graph").constant("_",window._).config(["$locationProvider","$compileProvider",function(o,n){o.html5Mode(!0),n.debugInfoEnabled(!0)}]).filter("thousandSuffix",function(){return function(o,n){var t,i=["k","M","G","T","P","E"];return window.isNaN(o)?null:o<1e3?o:(t=Math.floor(Math.log(o)/Math.log(1e3)),(o/Math.pow(1e3,t)).toFixed(n)+i[t-1])}})}(angular);
!function(t){"use strict";function i(t,i,e,n,o){t.entities=[],t.searchItems=null,t.categories=[],t.currentLocation=null,t.clickedLocation={},t.clickedLocation.location=null,t.clickedEntity={},t.clickedEntity.entity=null,t.editing=!1,t.actions={interacted:!1},t.showsearchMB=!1,t.showAnalytics=!1,t.entityTypes=n.getEntityTypes(),t.connectionTypes=o.getConnectionTypes(),t.status={isNetworkShown:!0,license:!0,networkLoading:!0},t.toggleAnalytics=function(){t.showAnalytics=!t.showAnalytics},this.minConnections=t.minConnections=2;var a=this;t.$watch("minConnections",function(){t.$broadcast("triggerNetworkDraw")}),t.connectionChange=function(){console.log(a.minConnections),t.minConnections=a.minConnections,t.$broadcast("triggerNetworkDraw")},t.hydePartials=function(i){"search"===i?(t.editing=!1,t.settingsEnabled=!1):"settings"===i?(t.editing=!1,t.showsearchMB=!1):"edit"===i?(t.settingsEnabled=!1,t.showsearchMB=!1):(t.editing=!1,t.settingsEnabled=!1,t.showsearchMB=!1)},t.showSearch=function(){t.hydePartials("search"),t.showsearchMB=!t.showsearchMB,t.status.license=!1},t.toggleSettings=function(){t.hydePartials("settings"),t.settingsEnabled=!t.settingsEnabled},t.startEdit=function(i){t.currentEntity=i,t.mobile&&t.hydePartials("edit"),t.editing=!0},t.switchView=function(){t.status.isNetworkShown=!t.status.isNetworkShown,t.status.isNetworkShown&&t.$broadcast("triggerNetworkDraw")},window.mobilecheck=function(){var t=!1,i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,e=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i;return function(n){(i.test(n)||e.test(n.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},t.mobile=window.mobilecheck(),t.settingsEnabled=!t.mobile,i(function(){n.getAll().then(function(i){t.entities=i.nodes;var n=e.uniq(e.pluck(e.flatten(e.pluck(t.entities,"locations")),"locality")),o=e.map(n,function(i){var n=e.filter(t.entities,e.flow(e.property("locations"),e.partialRight(e.any,{locality:i})));return{name:i,type:"location",entities:n,dict:e.zipObject(e.pluck(n,"name"),e.pluck(n,"index"))}});t.searchItems=o.concat(t.entities),t.overviewUrl="js/overview/overview.html",t.$broadcast("triggerNetworkDraw")})},100),t.overviewUrl=null,t.setEntity=function(i){t.currentLocation=null,t.currentEntity=i,t.editing&&t.stopEdit(),t.$broadcast("entityChange")},t.setEntityID=function(i){t.setEntity(e.find(t.entities,{id:i}))},t.setLocation=function(i){t.currentLocation=i,t.editing&&t.stopEdit(),t.$broadcast("itemChange")},t.selectItem=function(i){"location"===i.type?t.setLocation(i):t[i%1===0?"setEntityID":"setEntity"](i),t.$broadcast("selectItem",i)},t.$on("setCurrentEntity",function(i,e){t.currentEntity=e.value}),t.$on("setCurrentLocation",function(i,e){t.currentLocation=e.value}),t.setEntities=function(i){t.entities=i},t.stopEdit=function(){t.editing=!1},t.$on("editEntitySuccess",function(i){t.setEntities(i.nodes),t.$broadcast("triggerNetworkDraw")}),t.animationsEnabled=!0}var e=["$scope","$timeout","_","entityService","connectionService",i];t.module("civic-graph").controller("homeCtrl",e)}(angular);
!function(i){"use strict";var a=[];i.module("civic-graph").directive("map",a)}(angular);
!function(e){"use strict";function t(e,t){e.categorizedEntities={},t.forEach(t.keys(e.entityTypes),function(i){e.categorizedEntities[i]=t.filter(e.entities,{type:i})})}e.module("civic-graph").controller("overviewCtrl",["$scope","_",t])}(angular);
!function(n){"use strict";function t(n){return!("undefined"==typeof n||null===n)}function e(n,e,i,c){function o(){function o(c){var o=e("filter")(n.entities,function(t){return t.collaborations.length>=n.minConnections}),a={};i.forEach(i.keys(c.connections),function(n){a[n]=[]}),i.forEach(c.connections,function(n,e){i.forEach(n,function(n){var c=i.find(o,{id:n.source}),r=i.find(o,{id:n.target});t(c)&&t(r)&&a[e].push({source:c,target:r})})}),i.forEach(i.keys(n.entityTypes),function(t){var e=i.takeRight(i.sortBy(i.filter(n.entities,{type:t}),"collaborations.length"),5);i.forEach(e,function(n){n.wellconnected=!0})}),o=i.sortBy(o,function(n){return n.wellconnected?1:0}),r(o,a)}c.getAll().then(o)}n.isLoading=!0,n.connections={},o(),n.safeApply=function(n){var t=this.$root.$$phase;"$apply"===t||"$digest"===t?n&&"function"==typeof n&&n():this.$apply(n)},n.$on("triggerNetworkDraw",o),n.$on("viewChange",function(n){console.log(n)});var r=function(e,c){n.isLoading=!1;var o=d3.select("#network");o.selectAll("*").remove();var r=o.node().getBoundingClientRect(),a=r.height,l=r.width,s=6,u=7,d={Individual:{x:1,y:1},"For-Profit":{x:1,y:-1},"Non-Profit":{x:-1,y:1},Government:{x:-1,y:-1}},f=10,y=50,p=d3.max(e,function(n){return parseInt(n.employees)}),k=d3.max(e,function(n){return parseInt(n.followers)}),g={employees:d3.scale.sqrt().domain([10,p]).range([f,y]),followers:d3.scale.sqrt().domain([10,k]).range([f,y])},m={},h=d3.layout.force().size([l,a]).nodes(e).links(i.flatten(i.values(c))).charge(function(n){return n.employees?-2*g.employees(n.employees):-20}).linkStrength(0).linkDistance(50);i.forEach(c,function(n,e){m[e]=o.selectAll(".link ."+e+"-link").data(n).enter().append("line").attr("class",function(n){return t(n.source)&&t(n.target)?(n.type=e,"link "+e+"-link "+n.source.type+"-link "+n.target.type+"-link"):""})});var x=o.selectAll(".node").data(e).enter().append("g").attr("class",function(n){return"node "+n.type+"-node"}).call(h.drag);x.append("circle").attr("r",function(n){return n.employees?g.employees(n.employees):u}),x.append("text").text(function(n){return n.nickname?n.nickname:n.name}).attr("dx",function(){return-.065*this.getComputedTextLength()/2+"em"}).attr("dy",function(){return.08*this.parentNode.getBBox().height/2+.5+"em"}),h.on("tick",function(n){var t=s*n.alpha;i.forEach(e,function(n){n.x&&d[n.type]&&(n.x+=d[n.type].x*t,n.y+=d[n.type].y*t,n.x=Math.max(y,Math.min(l-y,n.x)),n.y=Math.max(y,Math.min(a-y,n.y)))}),i.forEach(m,function(n){n.attr("x1",function(n){return n.source.x}).attr("y1",function(n){return n.source.y}).attr("x2",function(n){return n.target.x}).attr("y2",function(n){return n.target.y})}),x.attr("transform",function(n){return"translate("+n.x+","+n.y+")"})});var E=function(n){requestAnimationFrame(function t(){for(var e=0;e<n;e++)h.tick();h.alpha()>0&&requestAnimationFrame(t)})};n.mobile||E(7),h.start();var v={};i.forEach(m,function(n){i.forEach(n[0],function(n){var t=n.__data__.source,e=n.__data__.target;v[t.index+","+e.index]=!0,v[e.index+","+t.index]=!0})});var L,A=function(n,t){return v[n.index+","+t.index]||n.index===t.index},T=function(n){x.classed("focused",function(t){return A(n,t)}).classed("unfocused",function(t){return!A(n,t)}),i.forEach(m,function(t){t.classed("focused",function(t){return n.index===t.source.index||n.index===t.target.index}).classed("unfocused",function(t){return!(n.index===t.source.index||n.index===t.target.index)})})},w=function(t){n.currentEntity!==t&&n.setEntity(t),n.safeApply(),T(t)},$=function(t){x.classed("focused",!1).classed("unfocused",!1),i.forEach(m,function(n){n.classed("focused",!1).classed("unfocused",!1)}),t.fixed=!1,n.clickedEntity.entity&&h.resume()},b=function(t){n.clickedEntity.entity||n.editing||n.currentLocation||(L=setTimeout(function(){w(t)},500)),n.actions.interacted=!0,n.safeApply()},_=function(t){n.clickedEntity.entity||n.currentLocation||($(t),clearTimeout(L)),n.actions.interacted=!0,n.safeApply()},B=function(t){n.safeApply(),x.classed("focused",function(n){return n.name in t.dict}).classed("unfocused",function(n){return!(n.name in t.dict)}),i.forEach(m,function(n){n.classed("focused",function(n){return n.source.name in t.dict&&n.target.name in t.dict}).classed("unfocused",function(n){return!(n.source.name in t.dict&&n.target.name in t.dict)})})},P=function(){x.classed("focused",!1).classed("unfocused",!1),i.forEach(m,function(n){n.classed("focused",!1).classed("unfocused",!1)}),n.clickedLocation.location&&h.resume()},C=function(t){n.showLicense=!1,n.clickedEntity.entity&&($(n.clickedEntity.entity),n.clickedEntity.entity=null),n.clickedLocation.location!==t&&(P(n.clickedLocation.location),n.clickedLocation.location=t,B(t)),d3.event&&d3.event.stopPropagation(),n.actions.interacted=!0,n.safeApply()},q=function(e){n.showLicense=!1,t(n.clickedLocation)&&(t(n.clickedLocation.location)&&(P(n.clickedLocation.entity),n.clickedLocation.location=null),n.clickedEntity.entity===e?n.clickedEntity.entity=null:(n.clickedEntity.entity&&$(n.clickedEntity.entity),n.clickedEntity.entity=e,w(e))),d3.event&&d3.event.stopPropagation(),n.actions.interacted=!0,n.safeApply()},I=function(){t(n.clickedLocation)&&(t(n.clickedLocation.location)&&($(n.clickedLocation.location),n.clickedLocation.location=null),t(n.clickedEntity.entity)&&($(n.clickedEntity.entity),n.clickedEntity.entity=null)),n.safeApply()},M=function(t){t.fixed?$(t):(t.x=l/2,t.y=a/2,t.px=l/2,t.py=a/2,t.fixed=!0,n.clickedEntity.entity=t),n.actions.interacted=!0,n.safeApply()};x.on("mouseover",b),x.on("mouseout",_),x.on("click",q),x.on("dblclick",M),o.on("click",I),x.classed("wellconnected",function(n){return n.hasOwnProperty("wellconnected")}),n.$on("changeSizeBy",function(n,t){o.selectAll("circle").transition().duration(250).attr("r",function(n){return n[t]?g[t](n[t]):u})}),n.$on("toggleLink",function(t,e){i.map(n.entityTypes,function(t,e){o.selectAll("."+e+"-link").classed({visible:function(t){return!n.connectionTypes[t.type]||n.entityTypes[t.source.type]&&n.entityTypes[t.target.type]},hidden:function(t){return!n.connectionTypes[t.type]||!n.entityTypes[t.source.type]||!n.entityTypes[t.target.type]}})})}),n.$on("toggleNode",function(t,e){o.selectAll("."+e.name+"-node").classed({visible:e.enabled,hidden:!e.enabled}),o.selectAll("."+e.name+"-link").classed({visible:function(t){return n.connectionTypes[t.type]&&n.entityTypes[t.source.type]&&n.entityTypes[t.target.type]},hidden:function(t){return!n.connectionTypes[t.type]||!n.entityTypes[t.source.type]||!n.entityTypes[t.target.type]}})}),n.$on("selectItem",function(t,e){"location"===e.type?C(n.currentLocation):q(n.currentEntity)})}}e.$inject=["$scope","$filter","_","connectionService"],n.module("civic-graph").controller("networkCtrl",e)}(angular,RTP);
!function(r){"use strict";function t(){return{restrict:"E",templateUrl:"js/network/network.html",controller:"networkCtrl"}}var e=[t];r.module("civic-graph").directive("network",e)}(angular);
!function(e){"use strict";e.module("civic-graph").directive("input",function(){return{restict:"E",require:"?ngModel",link:function(e,r,t,i){"type"in t&&"range"===t.type.toLowerCase()&&i.$parsers.push(parseFloat)}}})}(angular);
!function(c){"use strict";function n(c){}c.module("civic-graph").controller("analyticsCtrl",["$scope",n])}(angular);
!function(t){"use strict";function e(t){t.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}e.$inject=["$httpProvider"],t.module("civic-graph.api").config(e)}(angular);
!function(t){"use strict";function e(t,e){function a(t){return console.error("Recieved an error from API with this message: %O",t.data),e.reject(t)}function i(t){return t.data}function c(e,c){return t.get(r+e,{params:c,headers:n}).then(i,a)}function o(e,c){return t.post(r+e,c,{headers:n}).then(i,a)}return{get:c,post:o}}var r="/api",n={};e.$inject=["$http","$q"],t.module("civic-graph.api").factory("cgApiCaller",e)}(angular);
!function(t){"use strict";function o(t){return!("undefined"==typeof t||null===t)}function n(t){var n=o(t)?t:{};return function(t,r){var c=o(r)?r:null;return o(n[t])?n[t]:c}}function r(t){function r(){var n=o(t)?t:{},r=o(n.address_line)?n.address_line+" ":"",c=o(n.locality)?n.locality+", ":"",e=o(n.country_code)?n.country_code+" ":"",i=o(n.postal_code)?n.postal_code:"";return(r+c+e+i).trim()}var c=this,e=n(t);c.id=e("id"),c.address_line=e("address_line"),c.locality=e("locality"),c.district=e("district"),c.postal_code=e("postal_code"),c.country=e("country"),c.country_code=e("country_code"),c.coordinates=e("coordinates"),c.formattedAddress=r()}function c(){function t(t){return new r(t)}return{getLocationModel:t}}t.module("civic-graph.api").factory("locationService",c)}(angular);
!function(e){"use strict";function n(e){return!("undefined"==typeof e||null===e)}function t(e){return n(e)&&!Array.isArray(e)&&"object"==typeof e}function o(e){var t=n(e)?e:{};return function(e,o){var i=n(o)?o:null;return n(t[e])?t[e]:i}}function i(){return{Government:!0,"For-Profit":!0,"Non-Profit":!0,Individual:!0}}function r(){return["Local","National","Global"]}function a(e,n){var o=Array.isArray(e)?e.filter(t).map(n):[];return o.concat([n()])}function p(e,t,i,r,c,s){function l(){var e=new p(d);return e.locations.pop(),e.locations.pop(),e.grants_received.pop(),e.grants_received.pop(),e.grants_given.pop(),e.grants_given.pop(),e.investments_received.pop(),e.investments_received.pop(),e.investments_made.pop(),e.investments_made.pop(),e.data_given.pop(),e.data_given.pop(),e.data_received.pop(),e.data_received.pop(),e.collaborations.pop(),e.collaborations.pop(),e.key_people.pop(),e.key_people.pop(),e.employments.pop(),e.employments.pop(),e.revenues.pop(),e.revenues.pop(),e.expenses.pop(),e.expenses.pop(),e.categories.pop(),e.categories.pop(),e.description="",e}var d=this,g=n(e)?e:{},v=o(e);d.id=v("id"),d.name=v("name"),d.influence=v("influence"),d.type=v("type"),d.nickname=v("nickname"),d.url=v("url"),d.twitter_handle=v("twitter_handle"),d.employees=v("employees"),d.locations=a(g.locations,c.getLocationModel),d.grants_received=a(g.grants_received,t.getFundingConnectionModel),d.investments_received=a(g.investments_received,t.getFundingConnectionModel),d.grants_given=a(g.grants_given,t.getFundingConnectionModel),d.investments_made=a(g.investments_made,t.getFundingConnectionModel),d.data_given=a(g.data_given,i.getConnectionModel),d.data_received=a(g.data_received,i.getConnectionModel),d.collaborations=a(g.collaborations,i.getConnectionModel),d.key_people=a(g.key_people,i.getConnectionModel),d.employments=a(g.employments,i.getConnectionModel),d.revenues=a(g.revenues,r.getFinanceModel),d.expenses=a(g.expenses,r.getFinanceModel),d.categories=a(g.categories,s.getCategoryModel),d.generateDBModel=l}function c(e,n,t,o,a,c){function s(e){return new p(e,n,t,o,a,c)}function l(){return e.get("/entities")}function d(n){return e.post("/save",{entity:n})}return{getEntityModel:s,getEntityTypes:i,getInfluenceTypes:r,getAll:l,saveEntity:d}}c.$inject=["cgApiCaller","fundingConnectionService","connectionService","financeService","locationService","categoryService"],e.module("civic-graph.api").factory("entityService",c)}(angular);
!function(e){"use strict";function o(e,o,n,t,i){function c(){a.changeView(a.toggleNetwork?"Network":"Map")}var a=this;a.entityTypes=e.getEntityTypes(),a.connectionTypes=o.getConnectionTypes(),a.sizeByList=[{name:"Employees",value:"employees"},{name:"Twitter Followers",value:"followers"}],a.sizeBy="employees",a.showView={Network:!0,Map:!1},a.switchView=c,a.changeView=function(e){t.forEach(t.keys(a.showView),function(o){a.showView[o]=e===o}),n.$broadcast("viewChange",a.showView)},a.showAbout=function(){i.open({animation:!1,templateUrl:"control/about.html",controller:"modalCtrl"})},a.toggleNode=function(e){n.$broadcast("toggleNode",{name:e,enabled:a.entityTypes[e]})},a.toggleLink=function(e){n.$broadcast("toggleLink",{name:e,enabled:a.connectionTypes[e]})},a.changeSizeBy=function(){n.$broadcast("changeSizeBy",a.sizeBy)},a.changeSizeBy()}var n=["entityService","connectionService","$rootScope","_","$modal",o];e.module("civic-graph").controller("controlCtrl",n)}(angular);
!function(e){"use strict";function n(e,n){e.itemsShownDefault={key_people:3,grants_given:3,grants_received:3,investments_made:3,investments_received:3,collaborations:3,employments:3,relations:3,data_given:3,data_received:3,revenues:3,expenses:3},e.itemsShown=n.clone(e.itemsShownDefault),e.$on("entityChange",function(){e.itemsShown=n.clone(e.itemsShownDefault)}),e.showMore=function(n){e.itemsShown[n]=e.currentEntity[n].length},e.showLess=function(n){e.itemsShown[n]=e.itemsShownDefault[n]}}e.module("civic-graph").controller("detailsCtrl",["$scope","_",n])}(angular);
!function(t,e,n){"use strict";function i(t,i,o,r,a){t.options={center:{lat:20,lng:-40,zoom:3},defaults:{tileLayer:"https://api.tiles.mapbox.com/v4/mapbox.light/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZGF2aWRscm50IiwiYSI6IjA0M2RkNzMzZWJmNzEzNGYzMTdhYTExYzAyZmU4ZTE1In0.TNYlFta2VItrkn4L0Z9BJQ",tileLayerOptions:{detectRetina:!0,reuseTiles:!1},zoomControl:!1,attributionControl:!1}},i(function(){var i=function(t){var n=t.data,i=e.layout.pie().sort(null).value(function(t){return t.value}),o=e.svg.arc().outerRadius(t.r).innerRadius(t.r-10),r=t.r+t.strokeWidth,a=2*r,c=a,l=document.createElementNS(e.ns.prefix.svg,"svg"),s=e.select(l).data(n).attr("class","piechart").attr("width",a).attr("height",c),d=s.selectAll(".arc").data(i(n)).enter().append("g").attr("class","arc").attr("transform","translate("+r+","+r+")");return d.append("path").attr("d",o).attr("class",function(t){return t.data.type+"-arc"}),d.append("svg:text").text(function(e,n){if(0===n)return t.count}).attr("x",-4*t.count.toString().length).attr("dy",5).attr("class","arcText"),window.XMLSerializer?(new window.XMLSerializer).serializeToString(l):l.xml?l.xml:""};o.getMap().then(function(e){function o(t){var e=t.getAllChildMarkers(),o=e.length,a=r.pluck(e,"options"),c=r.map(r.countBy(a,"type"),function(t,e){return{type:e,value:t}}),l=28,s=1,d=2*(l+s),u=i({data:c,r:l,strokeWidth:s,count:o});return new n.DivIcon({html:u,className:"marker-cluster",iconSize:new n.point(d,d)})}function a(t){function e(e){if(r.every(e.coordinates)){"40.78200"===e.coordinates[0].toFixed(5)&&"-73.83170"===e.coordinates[1].toFixed(5)&&(e.coordinates[0]=40.77065,e.coordinates[1]=-73.97406);var i=n.marker(e.coordinates,{icon:s[t.type],title:t.name,entity_id:t.id,message:t.name,type:t.type});d.addLayer(i)}}r.forEach(t.locations,e)}function c(t){console.error(t.message+"  %O",t)}var l=t.entities;e.invalidateSize(),new n.Control.Zoom({position:"topright"}).addTo(e),n.control.locate({position:"topright",showPopup:!1,icon:"fa fa-location-arrow"}).addTo(e);var s={"Non-Profit":n.icon({iconUrl:"img/marker-nonprof.svg",iconSize:[60,60]}),"For-Profit":n.icon({iconUrl:"img/marker-prof.svg",iconSize:[60,60]}),Individual:n.icon({iconUrl:"img/marker-ind.svg",iconSize:[60,60]}),Government:n.icon({iconUrl:"img/marker-gov.svg",iconSize:[60,60]})},d=n.markerClusterGroup({spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,iconCreateFunction:o,maxClusterRadius:30,spiderfyDistanceMultiplier:1.3});console.log("Original: %O",t.entities),console.log("Filtered: %O",l),r.forEach(l,a),e.addLayer(d),e.on("locationerror",c),d.on("click",function(e){t.setEntityID(e.layer.options.entity_id),t.clickedEntity.entity=t.currentEntity,t.actions.interacted=!0,t.settingsEnabled&&t.mobile&&t.toggleSettings(),t.safeApply()}),e.on("click",function(){t.clickedEntity.entity=null,t.actions.interacted=!0,t.safeApply()}),t.$on("selectItem",function(){var n=t.currentEntity.locations.length>0?r.pluck(t.currentEntity.locations,"coordinates"):null;n.length>0&&e.setView(n[0],11),t.actions.interacted=!0,t.safeApply()})})})}var o=["$scope","$timeout","leafletData","_","$filter",i];t.module("civic-graph").controller("mapCtrl",o)}(angular,d3,L);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNpdmljLWdyYXBoLm1vZHVsZS5qcyIsImFuYWx5dGljL2FuYWx5dGljc0RpcmVjdGl2ZS5qcyIsImFwaS9jYXRlZ29yeS5zZXJ2aWNlLmpzIiwiYXBpL2Nvbm5lY3Rpb24uc2VydmljZS5qcyIsImFwaS9maW5hbmNlLnNlcnZpY2UuanMiLCJhcGkvZnVuZGluZ0Nvbm5lY3Rpb24uc2VydmljZS5qcyIsImNvbnRyb2wvY29udHJvbERpcmVjdGl2ZS5qcyIsImVkaXQtZW50aXR5L2VkaXRDdHJsLmpzIiwiZWRpdC1lbnRpdHkvZWRpdEVudGl0eURpcmVjdGl2ZS5qcyIsImV4dHJhL2FkZE1vYmlsZUV2ZW50cy5qcyIsImV4dHJhL21vZGFsQ3RybC5qcyIsIm1haW4vYXBwLmpzIiwibWFpbi9ob21lQ3RybC5qcyIsIm1hcC9tYXBEaXJlY3RpdmUuanMiLCJvdmVydmlldy9vdmVydmlld0N0cmwuanMiLCJuZXR3b3JrL25ldHdvcmtDdHJsLmpzIiwibmV0d29yay9uZXR3b3JrRGlyZWN0aXZlLmpzIiwibmV0d29yay9zbGlkZXJCYXIuanMiLCJhbmFseXRpYy9jb250cm9sbGVyL2FuYWx5dGljc0N0cmwuanMiLCJhcGkvYXBpQ2FsbGVyL2NvbmZpZy5qcyIsImFwaS9hcGlDYWxsZXIvc2VydmljZS5qcyIsImFwaS9lbnRpdHkvbG9jYXRpb24uc2VydmljZS5qcyIsImFwaS9lbnRpdHkvc2VydmljZS5qcyIsImNvbnRyb2wvY29udHJvbGxlci9jb250cm9sQ3RybC5qcyIsImRldGFpbC9jb250cm9sbGVyL2RldGFpbHNDdHJsLmpzIiwibWFwL2NvbnRyb2xsZXIvbWFwQ3RybC5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibWFpbkRlcGVuZGVuY2llcyIsIm1vZHVsZSIsImFuYWx5dGljc0RpcmVjdGl2ZSIsInRlbXBsYXRlVXJsIiwicmVzdHJpY3QiLCJzY29wZSIsImNvbnRyb2xsZXIiLCJhbmFseXRpY3NEZXBlbmRlbmNpZXMiLCJkaXJlY3RpdmUiLCJpc0RlZmluZWQiLCJvIiwiZ2V0UHJvcGVydHlGcm9tT2JqIiwib2JqIiwiZGVmT2JqIiwicHJvcGVydHkiLCJkZWZhdWx0VmFsdWUiLCJ2YWx1ZSIsIkNhdGVnb3J5IiwiZ2V0UHJvcGVydHkiLCJ0aGlzIiwiaWQiLCJuYW1lIiwiZW5hYmxlZCIsIlNlcnZpY2UiLCJhcGlDYWxsZXIiLCJnZXRDYXRlZ29yeU1vZGVsIiwiZ2V0QWxsIiwiZ2V0IiwiJGluamVjdCIsImZhY3RvcnkiLCJnZXRDb25uZWN0aW9uVHlwZXMiLCJGdW5kaW5nIiwiRGF0YSIsIkVtcGxveW1lbnQiLCJDb2xsYWJvcmF0aW9uIiwiQ29ubmVjdGlvbiIsImRldGFpbHMiLCJlbnRpdHkiLCJlbnRpdHlfaWQiLCJnZXRDb25uZWN0aW9uTW9kZWwiLCJ1cmwiLCJGaW5hbmNlIiwieWVhciIsImFtb3VudCIsImdldEZpbmFuY2VNb2RlbCIsIkZ1bmRpbmdDb25uZWN0aW9uIiwiZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbCIsImNvbnRyb2xEaXJlY3RpdmUiLCJ0b2dnbGVOZXR3b3JrIiwiY29udHJvbGxlckFzIiwiYmluZFRvQ29udHJvbGxlciIsIm1pbkNvbm5lY3Rpb25zIiwiY29udHJvbERlcGVuZGVuY2llcyIsIkNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkaHR0cCIsIiR0aW1lb3V0IiwiXyIsImVudGl0eVNlcnZpY2UiLCJjYXRlZ29yeVNlcnZpY2UiLCJsb2NhdGlvblNlcnZpY2UiLCJpbml0Q2F0ZWdvcnlBcnJheSIsImNhdGVnb3J5IiwiY2F0ZWdvcnlJbmRleCIsImVudGl0eUNhdGVnb3J5SW5kZXgiLCJlbnRpdHlDYXRlZ29yeSIsImNhdGVnb3JpZXMiLCJoYXNPd25Qcm9wZXJ0eSIsImVkaXRFbnRpdHkiLCJpc0VkaXRpbmciLCJnZXRFbnRpdHlNb2RlbCIsImVudGl0eVR5cGVzIiwiZ2V0RW50aXR5VHlwZXMiLCJpbmZsdWVuY2VUeXBlcyIsImdldEluZmx1ZW5jZVR5cGVzIiwiY2F0ZWdvcnlCYWNrdXAiLCJhZGRyZXNzU2VhcmNoIiwic2VhcmNoIiwianNvbnAiLCJwYXJhbXMiLCJxdWVyeSIsImtleSIsImluY2x1ZGUiLCJ0aGVuIiwicmVzcG9uc2UiLCJkYXRhIiwicmVzb3VyY2VTZXRzIiwibGVuZ3RoIiwicmVzb3VyY2VzIiwidG9nZ2xlQ2F0ZWdvcnkiLCJwdXNoIiwiZm91bmQiLCJzZXRMb2NhdGlvbiIsImxvY2F0aW9uIiwiaXNMYXN0IiwiZm9ybWF0dGVkQWRkcmVzcyIsImFwaUNhbGxSZXN1bHQiLCJyZXN1bHQiLCJhZGRyZXNzIiwicG9pbnQiLCJhZGRMb2NhdGlvbiIsImFkZHJlc3NfbGluZSIsImFkZHJlc3NMaW5lIiwibG9jYWxpdHkiLCJkaXN0cmljdCIsImFkbWluRGlzdHJpY3QiLCJjb3VudHJ5IiwiY291bnRyeVJlZ2lvbiIsImNvdW50cnlfY29kZSIsImNvdW50cnlSZWdpb25Jc28yIiwiY29vcmRpbmF0ZXMiLCJwb3N0YWxfY29kZSIsInBvc3RhbENvZGUiLCJsb2NhdGlvbnMiLCJnZXRMb2NhdGlvbk1vZGVsIiwiYWRkS2V5UGVyc29uIiwic29tZSIsImtleV9wZW9wbGUiLCJzZXRGdW5kaW5nQ29ubmVjdGlvbiIsImZ1bmRpbmciLCJhZGRGdW5kaW5nQ29ubmVjdGlvbiIsInNldENvbm5lY3Rpb24iLCJjb25uZWN0aW9uIiwiYWRkQ29ubmVjdGlvbiIsImNvbm5lY3Rpb25zIiwiYWRkRmluYW5jZSIsInJlY29yZHMiLCJldmVyeSIsInIiLCJzYXZlIiwic3VjY2VzcyIsImlzU2F2aW5nIiwiJGVtaXQiLCJjYW5jZWxFZGl0IiwiZXJyb3IiLCJpc0Vycm9yIiwic2F2ZUVudGl0eSIsImdlbmVyYXRlREJNb2RlbCIsImlzT3BlbiIsIiR3YXRjaCIsIm5ld1ZhbCIsIm9sZFZhbCIsImVxdWFscyIsImNvcHkiLCJlZGl0RW50aXR5RGlyZWN0aXZlIiwiZW50aXRpZXMiLCJlZGl0RW50aXR5RGVwZW5kZW5jaWVzIiwiJCIsImxpbmtGdW5jdGlvbiIsInNjcm9sbCIsInNlbGYiLCJjc3MiLCJjbGljayIsIndpbmRvdyIsImlubmVySGVpZ2h0IiwicGFyc2VJbnQiLCJkZXRhaWxzUGFuZWwiLCJtb2JpbGUiLCJzY3JvbGxUb3AiLCJhZGRNb2JpbGVFdmVudHMiLCJsaW5rIiwibW9kYWxDdHJsIiwiJG1vZGFsSW5zdGFuY2UiLCJjbG9zZVdpbmRvdyIsImNsb3NlIiwiY29uc3RhbnQiLCJjb25maWciLCIkbG9jYXRpb25Qcm92aWRlciIsIiRjb21waWxlUHJvdmlkZXIiLCJodG1sNU1vZGUiLCJkZWJ1Z0luZm9FbmFibGVkIiwiZmlsdGVyIiwiaW5wdXQiLCJkZWNpbWFscyIsImV4cCIsInN1ZmZpeGVzIiwiaXNOYU4iLCJNYXRoIiwiZmxvb3IiLCJsb2ciLCJwb3ciLCJ0b0ZpeGVkIiwiaG9tZUN0cmwiLCJjb25uZWN0aW9uU2VydmljZSIsInNlYXJjaEl0ZW1zIiwiY3VycmVudExvY2F0aW9uIiwiY2xpY2tlZExvY2F0aW9uIiwiY2xpY2tlZEVudGl0eSIsImVkaXRpbmciLCJhY3Rpb25zIiwiaW50ZXJhY3RlZCIsInNob3dzZWFyY2hNQiIsInNob3dBbmFseXRpY3MiLCJjb25uZWN0aW9uVHlwZXMiLCJzdGF0dXMiLCJpc05ldHdvcmtTaG93biIsImxpY2Vuc2UiLCJuZXR3b3JrTG9hZGluZyIsInRvZ2dsZUFuYWx5dGljcyIsIiRicm9hZGNhc3QiLCJjb25uZWN0aW9uQ2hhbmdlIiwiY29uc29sZSIsImh5ZGVQYXJ0aWFscyIsImV4Y2VwdCIsInNldHRpbmdzRW5hYmxlZCIsInNob3dTZWFyY2giLCJ0b2dnbGVTZXR0aW5ncyIsInN0YXJ0RWRpdCIsImN1cnJlbnRFbnRpdHkiLCJzd2l0Y2hWaWV3IiwibW9iaWxlY2hlY2siLCJjaGVjayIsInJlZ2V4IiwicmVnZXgyIiwiYSIsInRlc3QiLCJzdWJzdHIiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ2ZW5kb3IiLCJvcGVyYSIsIm5vZGVzIiwidW5pcSIsInBsdWNrIiwiZmxhdHRlbiIsImVudGl0aWVzQnlMb2NhdGlvbiIsIm1hcCIsImxvYyIsImZpbmRpbmdzIiwiZmxvdyIsInBhcnRpYWxSaWdodCIsImFueSIsInR5cGUiLCJkaWN0IiwiemlwT2JqZWN0IiwiY29uY2F0Iiwib3ZlcnZpZXdVcmwiLCJzZXRFbnRpdHkiLCJzdG9wRWRpdCIsInNldEVudGl0eUlEIiwiZmluZCIsInNlbGVjdEl0ZW0iLCJpdGVtIiwiJG9uIiwiZXZlbnQiLCJhcmdzIiwic2V0RW50aXRpZXMiLCJhbmltYXRpb25zRW5hYmxlZCIsImhvbWVEZXBlbmRlbmNpZXMiLCJkZXBlbmRlbmNpZXMiLCJvdmVydmlld0N0cmwiLCJjYXRlZ29yaXplZEVudGl0aWVzIiwiZm9yRWFjaCIsImtleXMiLCIkZmlsdGVyIiwic3RhcnRMb2FkIiwiZmlsdGVyZWRFbnRpdGllcyIsImNvbGxhYm9yYXRpb25zIiwiZmlsdGVyZWRDb25uZWN0aW9ucyIsInNvdXJjZU5vZGUiLCJzb3VyY2UiLCJ0YXJnZXROb2RlIiwidGFyZ2V0IiwidG9wNSIsInRha2VSaWdodCIsInNvcnRCeSIsIndlbGxjb25uZWN0ZWQiLCJlIiwiZHJhd05ldHdvcmsiLCJpc0xvYWRpbmciLCJzYWZlQXBwbHkiLCJmbiIsInBoYXNlIiwiJHJvb3QiLCIkJHBoYXNlIiwiJGFwcGx5Iiwidmlld09iaiIsImVudGl0eUFycmF5IiwiY29ubmVjdGlvbkFycmF5Iiwic3ZnIiwiZDMiLCJzZWxlY3QiLCJzZWxlY3RBbGwiLCJyZW1vdmUiLCJib3VuZHMiLCJub2RlIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiaGVpZ2h0Iiwid2lkdGgiLCJvZmZzZXRTY2FsZSIsImRlZmF1bHROb2RlU2l6ZSIsIm9mZnNldHMiLCJJbmRpdmlkdWFsIiwieCIsInkiLCJGb3ItUHJvZml0IiwiTm9uLVByb2ZpdCIsIkdvdmVybm1lbnQiLCJsb3dlckJvdW5kUmFkaXVzIiwidXBwZXJCb3VuZFJhZGl1cyIsIm1heEVtcGxveWVlcyIsIm1heCIsImVsIiwiZW1wbG95ZWVzIiwibWF4Rm9sbG93ZXJzIiwiZm9sbG93ZXJzIiwic2NhbGUiLCJzcXJ0IiwiZG9tYWluIiwicmFuZ2UiLCJsaW5rcyIsImZvcmNlIiwibGF5b3V0Iiwic2l6ZSIsInZhbHVlcyIsImNoYXJnZSIsImQiLCJsaW5rU3RyZW5ndGgiLCJsaW5rRGlzdGFuY2UiLCJlbnRlciIsImFwcGVuZCIsImF0dHIiLCJjYWxsIiwiZHJhZyIsInRleHQiLCJuaWNrbmFtZSIsImdldENvbXB1dGVkVGV4dExlbmd0aCIsInBhcmVudE5vZGUiLCJnZXRCQm94Iiwib24iLCJrIiwiYWxwaGEiLCJtaW4iLCJzcGVlZEFuaW1hdGUiLCJ0aWNrcyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInJlbmRlciIsImkiLCJ0aWNrIiwic3RhcnQiLCJsaW5rZWRCeUluZGV4IiwibCIsIl9fZGF0YV9fIiwiaW5kZXgiLCJob3ZlclRpbWVyIiwibmVpZ2hib3JpbmciLCJiIiwiZm9jdXNuZWlnaGJvcnMiLCJjbGFzc2VkIiwibiIsImZvY3VzIiwidW5mb2N1cyIsImZpeGVkIiwicmVzdW1lIiwiaG92ZXIiLCJzZXRUaW1lb3V0IiwidW5ob3ZlciIsImNsZWFyVGltZW91dCIsImZvY3VzTG9jYXRpb24iLCJ1bmZvY3VzTG9jYXRpb24iLCJoaWdobGlnaHRMb2NhdGlvbiIsInNob3dMaWNlbnNlIiwic3RvcFByb3BhZ2F0aW9uIiwiYmFja2dyb3VuZGNsaWNrIiwiZGJsY2xpY2siLCJweCIsInB5Iiwic2l6ZUJ5IiwidHJhbnNpdGlvbiIsImR1cmF0aW9uIiwidmFsIiwidmlzaWJsZSIsImhpZGRlbiIsIlJUUCIsInJlc3RpY3QiLCJyZXF1aXJlIiwiZWxlbWVudCIsImF0dHJzIiwibmdNb2RlbCIsInRvTG93ZXJDYXNlIiwiJHBhcnNlcnMiLCJwYXJzZUZsb2F0IiwiYW5hbHl0aWNzQ3RybCIsIkNvbmZpZyIsIiRodHRwUHJvdmlkZXIiLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iLCIkcSIsImxvZ0FwaUVycm9yIiwiZXJyIiwicmVqZWN0IiwidW53cmFwQW5ndWxhckh0dHAiLCJhcGlVcmwiLCJkZWZhdWx0SGVhZGVyIiwicG9zdCIsIkxvY2F0aW9uIiwiYnVpbGRGb3JtYXR0ZWRBZGRyZXNzIiwiY291bnRyeUNvZGUiLCJ0cmltIiwiaXNPYmplY3QiLCJBcnJheSIsImlzQXJyYXkiLCJsb29wQW5kSW5pdCIsIm1vZGVsQXJyYXkiLCJpbml0TW9kZWxGdW5jdGlvbiIsIm5ld0FycmF5IiwiRW50aXR5IiwiZnVuQ29ublNlcnZpY2UiLCJjb25uU2VydmljZSIsImZpbmFuY2VTZXJ2aWNlIiwiZGJNb2RlbCIsInBvcCIsImdyYW50c19yZWNlaXZlZCIsImdyYW50c19naXZlbiIsImludmVzdG1lbnRzX3JlY2VpdmVkIiwiaW52ZXN0bWVudHNfbWFkZSIsImRhdGFfZ2l2ZW4iLCJkYXRhX3JlY2VpdmVkIiwiZW1wbG95bWVudHMiLCJyZXZlbnVlcyIsImV4cGVuc2VzIiwiZGVzY3JpcHRpb24iLCJpbmZsdWVuY2UiLCJ0d2l0dGVyX2hhbmRsZSIsImNvbnRyb2xDdHJsIiwiJHJvb3RTY29wZSIsIiRtb2RhbCIsInZtIiwiY2hhbmdlVmlldyIsInNpemVCeUxpc3QiLCJzaG93VmlldyIsIk5ldHdvcmsiLCJNYXAiLCJ2aWV3Iiwic2hvd0Fib3V0Iiwib3BlbiIsImFuaW1hdGlvbiIsInRvZ2dsZU5vZGUiLCJ0b2dnbGVMaW5rIiwiY2hhbmdlU2l6ZUJ5IiwiY29udHJvbERlcHMiLCJkZXRhaWxzQ3RybCIsIml0ZW1zU2hvd25EZWZhdWx0IiwicmVsYXRpb25zIiwiaXRlbXNTaG93biIsImNsb25lIiwic2hvd01vcmUiLCJzaG93TGVzcyIsIkwiLCJtYXBDdHJsIiwibGVhZmxldERhdGEiLCJvcHRpb25zIiwiY2VudGVyIiwibGF0IiwibG5nIiwiem9vbSIsInRpbGVMYXllciIsInRpbGVMYXllck9wdGlvbnMiLCJkZXRlY3RSZXRpbmEiLCJyZXVzZVRpbGVzIiwiem9vbUNvbnRyb2wiLCJhdHRyaWJ1dGlvbkNvbnRyb2wiLCJjcmVhdGVQaWVDaGFydCIsInBpZSIsInNvcnQiLCJhcmMiLCJvdXRlclJhZGl1cyIsImlubmVyUmFkaXVzIiwic3Ryb2tlV2lkdGgiLCJ3IiwiaCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwibnMiLCJwcmVmaXgiLCJ2aXMiLCJhcmNzIiwiY291bnQiLCJ0b1N0cmluZyIsIlhNTFNlcmlhbGl6ZXIiLCJzZXJpYWxpemVUb1N0cmluZyIsInhtbCIsImdldE1hcCIsImNsdXN0ZXJJY29uIiwiY2x1c3RlciIsImNoaWxkcmVuIiwiZ2V0QWxsQ2hpbGRNYXJrZXJzIiwidG90YWwiLCJjbHVzdGVyTWFya2VycyIsImNvdW50cyIsImNvdW50QnkiLCJpY29uRGltIiwiaHRtbCIsIkRpdkljb24iLCJjbGFzc05hbWUiLCJpY29uU2l6ZSIsIm91dGVyTG9vcCIsImlubmVyTG9vcCIsIm0iLCJtYXJrZXIiLCJpY29uIiwibWFya2VySWNvbiIsInRpdGxlIiwibWVzc2FnZSIsIm1hcmtlcnMiLCJhZGRMYXllciIsIm9uTG9jYXRpb25FcnJvciIsImxlYWZsZXRFcnJvciIsImludmFsaWRhdGVTaXplIiwiQ29udHJvbCIsIlpvb20iLCJwb3NpdGlvbiIsImFkZFRvIiwiY29udHJvbCIsImxvY2F0ZSIsInNob3dQb3B1cCIsImljb25VcmwiLCJtYXJrZXJDbHVzdGVyR3JvdXAiLCJzcGlkZXJmeU9uTWF4Wm9vbSIsInNob3dDb3ZlcmFnZU9uSG92ZXIiLCJpY29uQ3JlYXRlRnVuY3Rpb24iLCJtYXhDbHVzdGVyUmFkaXVzIiwic3BpZGVyZnlEaXN0YW5jZU11bHRpcGxpZXIiLCJsYXllciIsInNldFZpZXciXSwibWFwcGluZ3MiOiJDQUFBLFNBQVVBLEdBRU4sWUFFQSxJQUFJQyxJQUNBLGVBQ0Esb0JBQ0EsWUFDQSxnQkFDQSxrQkFHSkQsR0FBUUUsT0FBTyxzQkFDZkYsRUFBUUUsT0FBTyxjQUFlRCxJQUUvQkQ7Q0NWSCxTQUFXQSxHQUVQLFlBSUEsU0FBU0csS0FDTCxPQUNJQyxZQUFhLDZCQUNiQyxTQUFhLElBQ2JDLFNBQ0FDLFdBQWUsaUJBUHZCLEdBQUlDLElBQXlCTCxFQVc3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RW1NLFFBQVFJLEVBQWtCaVAsR0FDNUIvUSxFQUFJd1IsU0FBU0QsR0FNYnZSLEVBQUl1RyxHQUFHLGdCQUFpQmtMLEdBRXhCRixFQUFRaEwsR0FBRyxRQUFTLFNBQVUySyxHQUMxQjliLEVBQU95TCxZQUFZcVEsRUFBT3dCLE1BQU14RSxRQUFROVosV0FDeENnQixFQUFPcUksY0FBY3RKLE9BQVNpQixFQUFPMEosY0FDckMxSixFQUFPdUksUUFBUUMsWUFBZSxFQUMxQnhJLEVBQU9zSixpQkFBbUJ0SixFQUFPdUcsUUFDakN2RyxFQUFPd0osaUJBRVh4SixFQUFPd04sY0FHWDVDLEVBQUl1RyxHQUFHLFFBQVMsV0FDWm5SLEVBQU9xSSxjQUFjdEosT0FBUyxLQUM5QmlCLEVBQU91SSxRQUFRQyxZQUFlLEVBQzlCeEksRUFBT3dOLGNBRVh4TixFQUFPNkwsSUFBSSxhQUFjLFdBQ3JCLEdBQUlySSxHQUFjeEQsRUFBTzBKLGNBQWMvRixVQUFVMUIsT0FBUyxFQUFJOUIsRUFBRXNLLE1BQzVEekssRUFBTzBKLGNBQWMvRixVQUFXLGVBQWlCLElBQ2pESCxHQUFZdkIsT0FBUyxHQUNyQjJJLEVBQUkyUyxRQUFRL1osRUFBWSxHQUFJLElBRWhDeEQsRUFBT3VJLFFBQVFDLFlBQWEsRUFDNUJ4SSxFQUFPd04sa0JBN0x2QixHQUFJckIsSUFDQSxTQUNBLFdBQ0EsY0FDQSxJQUNBLFVBQ0F5TSxFQTZMSm5jLEdBQVFFLE9BQU8sZUFFVkssV0FBVyxVQUFXbVAsSUFDNUIxUCxRQUFTeVIsR0FBSXlLIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIG1haW5EZXBlbmRlbmNpZXMgPSBbXG4gICAgICAgICd1aS5ib290c3RyYXAnLFxuICAgICAgICAnbGVhZmxldC1kaXJlY3RpdmUnLFxuICAgICAgICAnbmdBbmltYXRlJyxcbiAgICAgICAgJ3RlbXBsYXRlQ2FjaGUnLFxuICAgICAgICAnY2l2aWMtZ3JhcGguYXBpJ1xuICAgIF07XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGguYXBpJywgW10pO1xuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcsIG1haW5EZXBlbmRlbmNpZXMpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNy8xLzE2LlxuICovXG5cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgYW5hbHl0aWNzRGVwZW5kZW5jaWVzID0gW2FuYWx5dGljc0RpcmVjdGl2ZV07XG5cbiAgICBmdW5jdGlvbiBhbmFseXRpY3NEaXJlY3RpdmUoKXtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnanMvYW5hbHl0aWMvYW5hbHl0aWNzLmh0bWwnLFxuICAgICAgICAgICAgcmVzdHJpY3QgICA6ICdFJyxcbiAgICAgICAgICAgIHNjb3BlICAgICAgOiB7fSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgICA6ICdhbmFseXRpY3NDdHJsJ1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2FuYWx5dGljcycsIGFuYWx5dGljc0RlcGVuZGVuY2llcyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI4LzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBpc0RlZmluZWQobykge1xuICAgICAgICByZXR1cm4gISh0eXBlb2YgbyA9PT0gXCJ1bmRlZmluZWRcIiB8fCBvID09PSBudWxsKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRQcm9wZXJ0eUZyb21PYmoob2JqKSB7XG4gICAgICAgIHZhciBkZWZPYmogPSBpc0RlZmluZWQob2JqKSA/IG9iaiA6IHt9O1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAocHJvcGVydHksIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gaXNEZWZpbmVkKGRlZmF1bHRWYWx1ZSkgPyBkZWZhdWx0VmFsdWUgOiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIGlzRGVmaW5lZChkZWZPYmpbcHJvcGVydHldKVxuICAgICAgICAgICAgICAgID8gZGVmT2JqW3Byb3BlcnR5XVxuICAgICAgICAgICAgICAgIDogdmFsdWU7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gQ2F0ZWdvcnkob2JqKSB7XG4gICAgICAgIHZhciBnZXRQcm9wZXJ0eSA9IGdldFByb3BlcnR5RnJvbU9iaihvYmopO1xuXG4gICAgICAgIHRoaXMuaWQgPSBnZXRQcm9wZXJ0eShcImlkXCIpO1xuICAgICAgICB0aGlzLm5hbWUgPSBnZXRQcm9wZXJ0eShcIm5hbWVcIik7XG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IGdldFByb3BlcnR5KFwiZW5hYmxlXCIsIHRydWUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFNlcnZpY2UoYXBpQ2FsbGVyKSB7XG4gICAgICAgIGZ1bmN0aW9uIGdldENhdGVnb3J5TW9kZWwob2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IENhdGVnb3J5KG9iaik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRBbGwoKSB7XG4gICAgICAgICAgICByZXR1cm4gYXBpQ2FsbGVyLmdldChcIi9jYXRlZ29yaWVzXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiZ2V0Q2F0ZWdvcnlNb2RlbFwiOiBnZXRDYXRlZ29yeU1vZGVsLFxuICAgICAgICAgICAgXCJnZXRBbGxcIjogZ2V0QWxsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgU2VydmljZS4kaW5qZWN0ID0gW1wiY2dBcGlDYWxsZXJcIl07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIilcbiAgICAgICAgLmZhY3RvcnkoXCJjYXRlZ29yeVNlcnZpY2VcIiwgU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNy8xNi5cbiAqL1xuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciB1cmwgPSBcIi9jb25uZWN0aW9uc1wiO1xuXG4gICAgZnVuY3Rpb24gaXNEZWZpbmVkKG8pIHtcbiAgICAgICAgcmV0dXJuICEodHlwZW9mIG8gPT09IFwidW5kZWZpbmVkXCIgfHwgbyA9PT0gbnVsbCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Q29ubmVjdGlvblR5cGVzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJGdW5kaW5nXCI6IHRydWUsXG4gICAgICAgICAgICBcIkRhdGFcIjogdHJ1ZSxcbiAgICAgICAgICAgIFwiRW1wbG95bWVudFwiOiB0cnVlLFxuICAgICAgICAgICAgXCJDb2xsYWJvcmF0aW9uXCI6IHRydWVcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRQcm9wZXJ0eUZyb21PYmoob2JqKSB7XG4gICAgICAgIHZhciBkZWZPYmogPSBpc0RlZmluZWQob2JqKSA/IG9iaiA6IHt9O1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAocHJvcGVydHksIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gaXNEZWZpbmVkKGRlZmF1bHRWYWx1ZSkgPyBkZWZhdWx0VmFsdWUgOiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIGlzRGVmaW5lZChkZWZPYmpbcHJvcGVydHldKVxuICAgICAgICAgICAgICAgID8gZGVmT2JqW3Byb3BlcnR5XVxuICAgICAgICAgICAgICAgIDogdmFsdWU7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gQ29ubmVjdGlvbihvYmopIHtcbiAgICAgICAgdmFyIGdldFByb3BlcnR5ID0gZ2V0UHJvcGVydHlGcm9tT2JqKG9iaik7XG5cbiAgICAgICAgdGhpcy5pZCA9IGdldFByb3BlcnR5KFwiaWRcIik7XG4gICAgICAgIHRoaXMubmFtZSA9IGdldFByb3BlcnR5KFwibmFtZVwiKTtcbiAgICAgICAgdGhpcy5kZXRhaWxzID0gZ2V0UHJvcGVydHkoXCJkZXRhaWxzXCIpO1xuICAgICAgICB0aGlzLmVudGl0eSA9IGdldFByb3BlcnR5KFwiZW50aXR5XCIpO1xuICAgICAgICB0aGlzLmVudGl0eV9pZCA9IGdldFByb3BlcnR5KFwiZW50aXR5X2lkXCIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldENvbm5lY3Rpb25Nb2RlbChvYmopIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb25uZWN0aW9uKG9iaik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gU2VydmljZShhcGlDYWxsZXIpIHtcbiAgICAgICAgZnVuY3Rpb24gZ2V0QWxsKCkge1xuICAgICAgICAgICAgcmV0dXJuIGFwaUNhbGxlci5nZXQodXJsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcImdldEFsbFwiOiBnZXRBbGwsXG4gICAgICAgICAgICBcImdldENvbm5lY3Rpb25UeXBlc1wiOiBnZXRDb25uZWN0aW9uVHlwZXMsXG4gICAgICAgICAgICBcImdldENvbm5lY3Rpb25Nb2RlbFwiOiBnZXRDb25uZWN0aW9uTW9kZWxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBTZXJ2aWNlLiRpbmplY3QgPSBbXCJjZ0FwaUNhbGxlclwiXTtcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKVxuICAgICAgICAuZmFjdG9yeShcImNvbm5lY3Rpb25TZXJ2aWNlXCIsIFNlcnZpY2UpO1xuXG59KShhbmd1bGFyKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjcvMTYuXG4gKi9cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBpc0RlZmluZWQobykge1xuICAgICAgICByZXR1cm4gISh0eXBlb2YgbyA9PT0gXCJ1bmRlZmluZWRcIiB8fCBvID09PSBudWxsKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRQcm9wZXJ0eUZyb21PYmoob2JqKSB7XG4gICAgICAgIHZhciBkZWZPYmogPSBpc0RlZmluZWQob2JqKSA/IG9iaiA6IHt9O1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAocHJvcGVydHksIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gaXNEZWZpbmVkKGRlZmF1bHRWYWx1ZSkgPyBkZWZhdWx0VmFsdWUgOiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIGlzRGVmaW5lZChkZWZPYmpbcHJvcGVydHldKVxuICAgICAgICAgICAgICAgID8gZGVmT2JqW3Byb3BlcnR5XVxuICAgICAgICAgICAgICAgIDogdmFsdWU7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gRmluYW5jZShvYmopIHtcbiAgICAgICAgdmFyIGdldFByb3BlcnR5ID0gZ2V0UHJvcGVydHlGcm9tT2JqKG9iaik7XG5cbiAgICAgICAgdGhpcy5pZCA9IGdldFByb3BlcnR5KFwiaWRcIik7XG4gICAgICAgIHRoaXMueWVhciA9IGdldFByb3BlcnR5KFwieWVhclwiKTtcbiAgICAgICAgdGhpcy5hbW91bnQgPSBnZXRQcm9wZXJ0eShcImFtb3VudFwiLCAwKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRGaW5hbmNlTW9kZWwob2JqKSB7XG4gICAgICAgIHJldHVybiBuZXcgRmluYW5jZShvYmopO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFNlcnZpY2UoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcImdldEZpbmFuY2VNb2RlbFwiOiBnZXRGaW5hbmNlTW9kZWxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIilcbiAgICAgICAgLmZhY3RvcnkoXCJmaW5hbmNlU2VydmljZVwiLCBTZXJ2aWNlKTtcblxufSkoYW5ndWxhcik7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxuICovXG4oZnVuY3Rpb24oYW5ndWxhcil7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIGlzRGVmaW5lZChvKSB7XG4gICAgICAgIHJldHVybiAhKHR5cGVvZiBvID09PSBcInVuZGVmaW5lZFwiIHx8IG8gPT09IG51bGwpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFByb3BlcnR5RnJvbU9iaihvYmopIHtcbiAgICAgICAgdmFyIGRlZk9iaiA9IGlzRGVmaW5lZChvYmopID8gb2JqIDoge307XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChwcm9wZXJ0eSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBpc0RlZmluZWQoZGVmYXVsdFZhbHVlKSA/IGRlZmF1bHRWYWx1ZSA6IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gaXNEZWZpbmVkKGRlZk9ialtwcm9wZXJ0eV0pXG4gICAgICAgICAgICAgICAgPyBkZWZPYmpbcHJvcGVydHldXG4gICAgICAgICAgICAgICAgOiB2YWx1ZTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBGdW5kaW5nQ29ubmVjdGlvbihvYmopIHtcbiAgICAgICAgdmFyIGdldFByb3BlcnR5ID0gZ2V0UHJvcGVydHlGcm9tT2JqKG9iaik7XG5cbiAgICAgICAgdGhpcy5pZCA9IGdldFByb3BlcnR5KFwiaWRcIik7XG4gICAgICAgIHRoaXMueWVhciA9IGdldFByb3BlcnR5KFwieWVhclwiKTtcbiAgICAgICAgdGhpcy5hbW91bnQgPSBnZXRQcm9wZXJ0eShcImFtb3VudFwiKTtcbiAgICAgICAgdGhpcy5lbnRpdHkgPSBnZXRQcm9wZXJ0eShcImVudGl0eVwiLCBcIlwiKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsKG9iail7XG4gICAgICAgIHJldHVybiBuZXcgRnVuZGluZ0Nvbm5lY3Rpb24ob2JqKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBTZXJ2aWNlKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJnZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsXCI6IGdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIilcbiAgICAgICAgLmZhY3RvcnkoXCJmdW5kaW5nQ29ubmVjdGlvblNlcnZpY2VcIiwgU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA3LzEwLzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGNvbnRyb2xEZXBlbmRlbmNpZXMgPSBbY29udHJvbERpcmVjdGl2ZV07XG5cbiAgICBmdW5jdGlvbiBjb250cm9sRGlyZWN0aXZlKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdqcy9jb250cm9sL2NvbnRyb2xzLmh0bWwnLFxuICAgICAgICAgICAgcmVzdHJpY3QgICA6ICdFJyxcbiAgICAgICAgICAgIHNjb3BlICAgICAgOiB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlTmV0d29yayA6ICc9JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb250cm9sbGVyICAgOiAnY29udHJvbEN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzIDogJ2NvbnRyb2wnLFxuICAgICAgICAgICAgYmluZFRvQ29udHJvbGxlciA6IHtcbiAgICAgICAgICAgICAgICBtaW5Db25uZWN0aW9ucyA6IFwiPVwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnY29udHJvbCcsIGNvbnRyb2xEZXBlbmRlbmNpZXMpO1xuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gaXNEZWZpbmVkKG8pIHtcbiAgICAgICAgcmV0dXJuICEodHlwZW9mIG8gPT09IFwidW5kZWZpbmVkXCIgfHwgbyA9PT0gbnVsbCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gQ29udHJvbGxlcigkc2NvcGUsICRodHRwLCAkdGltZW91dCwgXywgZW50aXR5U2VydmljZSwgY2F0ZWdvcnlTZXJ2aWNlLCBsb2NhdGlvblNlcnZpY2UpIHtcbiAgICAgICAgJHNjb3BlLmlzRWRpdGluZyA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUuZWRpdEVudGl0eSA9IGVudGl0eVNlcnZpY2UuZ2V0RW50aXR5TW9kZWwoJHNjb3BlLmVudGl0eSk7XG4gICAgICAgICRzY29wZS5lbnRpdHlUeXBlcyA9IGVudGl0eVNlcnZpY2UuZ2V0RW50aXR5VHlwZXMoKTtcbiAgICAgICAgJHNjb3BlLmluZmx1ZW5jZVR5cGVzID0gZW50aXR5U2VydmljZS5nZXRJbmZsdWVuY2VUeXBlcygpO1xuXG4gICAgICAgIHZhciBjYXRlZ29yeUJhY2t1cDtcblxuICAgICAgICAkc2NvcGUuY2F0ZWdvcmllcyA9IFtdO1xuXG4gICAgICAgICRzY29wZS5hZGRyZXNzU2VhcmNoID0gZnVuY3Rpb24gKHNlYXJjaCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmpzb25wKCdodHRwczovL2Rldi52aXJ0dWFsZWFydGgubmV0L1JFU1QvdjEvTG9jYXRpb25zJywge1xuICAgICAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICBxdWVyeTogc2VhcmNoLFxuICAgICAgICAgICAgICAgICAgICBrZXk6ICdBaTU4NTgxeUMtU3I3bWNGYllUdFVrUzNpeEU3ZjZadUpuYkZKQ1ZJNGhBdFcxWG9ERWVaeWlkUXoyZ0xDQ3lEJyxcbiAgICAgICAgICAgICAgICAgICAgJ2pzb25wJzogJ0pTT05fQ0FMTEJBQ0snLFxuICAgICAgICAgICAgICAgICAgICAnaW5jbHVkZSc6ICdjaXNvMidcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNEZWZpbmVkKHJlc3BvbnNlLmRhdGEucmVzb3VyY2VTZXRzKSAmJiByZXNwb25zZS5kYXRhLnJlc291cmNlU2V0cy5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEucmVzb3VyY2VTZXRzWzBdLnJlc291cmNlcztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS50b2dnbGVDYXRlZ29yeSA9IGZ1bmN0aW9uIChjYXRlZ29yeSkge1xuICAgICAgICAgICAgaWYgKCRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcy5wdXNoKGNhdGVnb3J5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgY2F0ZWdvcnlJbmRleCBpbiAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcy5oYXNPd25Qcm9wZXJ0eShjYXRlZ29yeUluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGVudGl0eUNhdGVnb3J5ID0gJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllc1tjYXRlZ29yeUluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVudGl0eUNhdGVnb3J5LmlkID09PSBjYXRlZ29yeS5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5Q2F0ZWdvcnkuZW5hYmxlZCA9IGNhdGVnb3J5LmVuYWJsZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMucHVzaChjYXRlZ29yeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZXRMb2NhdGlvbiA9IGZ1bmN0aW9uIChsb2NhdGlvbiwgaXNMYXN0KSB7XG4gICAgICAgICAgICAkc2NvcGUuYWRkcmVzc1NlYXJjaChsb2NhdGlvbi5mb3JtYXR0ZWRBZGRyZXNzKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChhcGlDYWxsUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKCFpc0RlZmluZWQoYXBpQ2FsbFJlc3VsdFswXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gYXBpQ2FsbFJlc3VsdFswXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgPSByZXN1bHQuYWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50ID0gcmVzdWx0LnBvaW50O1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkTG9jYXRpb24oaXNMYXN0KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBQYXJzZXMgQVBJIGNhbGwgcmVzdWx0XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmFkZHJlc3NfbGluZSA9IGlzRGVmaW5lZChhZGRyZXNzLmFkZHJlc3NMaW5lKSA/IGFkZHJlc3MuYWRkcmVzc0xpbmUgOiAnJztcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ubG9jYWxpdHkgPSBpc0RlZmluZWQoYWRkcmVzcy5sb2NhbGl0eSkgPyBhZGRyZXNzLmxvY2FsaXR5IDogJyc7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmRpc3RyaWN0ID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRGVmaW5lZChhZGRyZXNzLmFkbWluRGlzdHJpY3QpID8gYWRkcmVzcy5hZG1pbkRpc3RyaWN0IDogJyc7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmNvdW50cnkgPVxuICAgICAgICAgICAgICAgICAgICAgICAgaXNEZWZpbmVkKGFkZHJlc3MuY291bnRyeVJlZ2lvbikgPyBhZGRyZXNzLmNvdW50cnlSZWdpb24gOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5jb3VudHJ5X2NvZGUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgaXNEZWZpbmVkKGFkZHJlc3MuY291bnRyeVJlZ2lvbklzbzIpID8gYWRkcmVzcy5jb3VudHJ5UmVnaW9uSXNvMiA6ICcnO1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5jb29yZGluYXRlcyA9IGlzRGVmaW5lZChwb2ludC5jb29yZGluYXRlcykgPyBwb2ludC5jb29yZGluYXRlcyA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnBvc3RhbF9jb2RlID0gaXNEZWZpbmVkKGFkZHJlc3MucG9zdGFsQ29kZSkgPyBhZGRyZXNzLnBvc3RhbENvZGUgOiBudWxsO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5hZGRMb2NhdGlvbiA9IGZ1bmN0aW9uIChpc0xhc3QpIHtcbiAgICAgICAgICAgIGlmIChpc0xhc3QpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdEVudGl0eS5sb2NhdGlvbnMucHVzaChsb2NhdGlvblNlcnZpY2UuZ2V0TG9jYXRpb25Nb2RlbCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuYWRkS2V5UGVyc29uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gQWRkIGJsYW5rIGZpZWxkIHRvIGVkaXQgaWYgdGhlcmUgYXJlIG5vbmUuXG4gICAgICAgICAgICAvLyBXQVRDSCBPVVQhIFRPRE86IElmIHNvbWVvbmUgZGVsZXRlcyBhbiBvbGQgcGVyc29uLCBkZWxldGUgdGhlaXIgaWQgdG9vLlxuICAgICAgICAgICAgLy8gaS5lLiBtYWtlIHN1cmUgb2xkL2NsZWFyZWQgZm9ybSBmaWVsZHMgYXJlbid0IGJlaW5nIGVkaXRlZCBpbnRvIG5ldyBwZW9wbGUuXG4gICAgICAgICAgICBpZiAoIShfLnNvbWUoJHNjb3BlLmVkaXRFbnRpdHkua2V5X3Blb3BsZSwgeyduYW1lJzogJycsICdpZCc6IG51bGx9KSkpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdEVudGl0eS5rZXlfcGVvcGxlLnB1c2goeyduYW1lJzogJycsICdpZCc6IG51bGx9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2V0RnVuZGluZ0Nvbm5lY3Rpb24gPSBmdW5jdGlvbiAoZW50aXR5LCBmdW5kaW5nKSB7XG4gICAgICAgICAgICAvLyBBZGQgb3RoZXIgZW50aXR5J3MgaWQgdG8gdGhpcyBmaW5hbmNlIGNvbm5lY3Rpb24uXG4gICAgICAgICAgICBmdW5kaW5nLmVudGl0eV9pZCA9IGVudGl0eS5pZDtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuYWRkRnVuZGluZ0Nvbm5lY3Rpb24gPSBmdW5jdGlvbiAoZnVuZGluZykge1xuICAgICAgICAgICAgaWYgKCFfLnNvbWUoZnVuZGluZywgeydlbnRpdHknOiAnJ30pKSB7XG4gICAgICAgICAgICAgICAgLy8gTWF5YmUgc2V0IGFtb3VudCB0byAwIGluc3RlYWQgb2YgbnVsbD9cbiAgICAgICAgICAgICAgICBmdW5kaW5nLnB1c2goeydlbnRpdHknOiAnJywgJ2Ftb3VudCc6IG51bGwsICd5ZWFyJzogbnVsbCwgJ2lkJzogbnVsbH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZXRDb25uZWN0aW9uID0gZnVuY3Rpb24gKGVudGl0eSwgY29ubmVjdGlvbikge1xuICAgICAgICAgICAgY29ubmVjdGlvbi5lbnRpdHlfaWQgPSBlbnRpdHkuaWQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmFkZENvbm5lY3Rpb24gPSBmdW5jdGlvbiAoY29ubmVjdGlvbnMpIHtcbiAgICAgICAgICAgIC8vIEFkZCBhbiBlbXB0eSBjb25uZWN0aW9uIHRvIGVkaXQgaWYgbm9uZSBleGlzdC5cbiAgICAgICAgICAgIGlmICghXy5zb21lKGNvbm5lY3Rpb25zLCB7J2VudGl0eSc6ICcnLCAnaWQnOiBudWxsfSkpIHtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9ucy5wdXNoKHsnZW50aXR5JzogJycsICdpZCc6IG51bGwsICdkZXRhaWxzJzogbnVsbH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5hZGRGaW5hbmNlID0gZnVuY3Rpb24gKHJlY29yZHMpIHtcbiAgICAgICAgICAgIC8vIEFkZCBuZXcgZmluYW5jZSBmaWVsZCBpZiBhbGwgY3VycmVudCBmaWVsZHMgYXJlIHZhbGlkLlxuICAgICAgICAgICAgaWYgKF8uZXZlcnkocmVjb3JkcywgZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIuYW1vdW50ID4gMCAmJiByLnllYXIgPiAxNzUwO1xuICAgICAgICAgICAgICAgIH0pKSB7XG4gICAgICAgICAgICAgICAgcmVjb3Jkcy5wdXNoKHsnYW1vdW50JzogbnVsbCwgJ3llYXInOiBudWxsLCAnaWQnOiBudWxsfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2NvcGUuaXNTYXZpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmlzU2F2aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLiRlbWl0KFwiZWRpdEVudGl0eVN1Y2Nlc3NcIiwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIC8vIENhbGwgdG8gaG9tZUN0cmwncyBwYXJlbnQgc3RvcEVkaXQoKSB0byBjaGFuZ2UgdmlldyBiYWNrIGFuZCBhbnkgb3RoZXJcbiAgICAgICAgICAgICAgICAvLyBoaWdoLWxldmVsIGNoYW5nZXMuXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNhbmNlbEVkaXQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmlzRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmlzRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZW50aXR5U2VydmljZVxuICAgICAgICAgICAgICAgIC5zYXZlRW50aXR5KCRzY29wZS5lZGl0RW50aXR5LmdlbmVyYXRlREJNb2RlbCgpKVxuICAgICAgICAgICAgICAgIC50aGVuKHN1Y2Nlc3MsIGVycm9yKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuY2FuY2VsRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuJHdhdGNoKCdlbnRpdHknLCBmdW5jdGlvbiAobmV3VmFsLCBvbGRWYWwpIHtcbiAgICAgICAgICAgIGlmIChhbmd1bGFyLmVxdWFscyhuZXdWYWwsIG9sZFZhbCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5lZGl0RW50aXR5ID0gZW50aXR5U2VydmljZS5nZXRFbnRpdHlNb2RlbChuZXdWYWwpO1xuICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3JpZXMgPSBhbmd1bGFyLmNvcHkoY2F0ZWdvcnlCYWNrdXApO1xuXG4gICAgICAgICAgICBpbml0Q2F0ZWdvcnlBcnJheSgpO1xuXG4gICAgICAgICAgICAkc2NvcGUuaXNFZGl0aW5nID0gaXNEZWZpbmVkKCRzY29wZS5lZGl0RW50aXR5LmlkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXRpYWxpemVzIGNhdGVnb3J5IGZpZWxkcyB3aXRoIGVudGl0eSB2YWx1ZXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIExvb3BzIHRocm91Z2ggY2F0ZWdvcnkgaW4gY2F0ZWdvcmllcyBhbmQgbG9vcHMgdGhyb3VnaCBjYXRlZ29yeSBpbiBlbnRpdHkuIElkZW50aWZpZXNcbiAgICAgICAgICogY2F0ZWdvcmllcyBlbmFibGVkIGluIHRoZSBlbnRpdHkgYW5kIHNldHMgbG9jYWwgZGlzcGxheSBkYXRhLiBUaGlzIGlzIGJlY2F1c2Ugd2UgY3JlYXRlZFxuICAgICAgICAgKiBhIGJhY2t1cCBvZiBlbnRpdHkgZGF0YSBzbyB0aGF0IHRoZSBhcGkgZGF0YSBpcyBub3QgdGFtcGVyZWQgd2l0aCBkaXJlY3RseS5cbiAgICAgICAgICpcbiAgICAgICAgICogVE9ETzogcmVwbGFjZSB3aXRoIGJldHRlciBkYXRhIHN0cnVjdHVyZSBmb3IgY2F0ZWdvcmllcy5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGluaXRDYXRlZ29yeUFycmF5KCkge1xuICAgICAgICAgICAgdmFyIGNhdGVnb3J5LFxuICAgICAgICAgICAgICAgIGNhdGVnb3J5SW5kZXgsXG4gICAgICAgICAgICAgICAgZW50aXR5Q2F0ZWdvcnlJbmRleCxcbiAgICAgICAgICAgICAgICBlbnRpdHlDYXRlZ29yeTtcblxuICAgICAgICAgICAgZm9yIChjYXRlZ29yeUluZGV4IGluICRzY29wZS5jYXRlZ29yaWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuY2F0ZWdvcmllcy5oYXNPd25Qcm9wZXJ0eShjYXRlZ29yeUluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0ZWdvcnkgPSAkc2NvcGUuY2F0ZWdvcmllc1tjYXRlZ29yeUluZGV4XTtcbiAgICAgICAgICAgICAgICBmb3IgKGVudGl0eUNhdGVnb3J5SW5kZXggaW4gJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMuaGFzT3duUHJvcGVydHkoZW50aXR5Q2F0ZWdvcnlJbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eUNhdGVnb3J5ID0gJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllc1tlbnRpdHlDYXRlZ29yeUluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhdGVnb3J5LmlkID09PSBlbnRpdHlDYXRlZ29yeS5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnkuZW5hYmxlZCA9IGVudGl0eUNhdGVnb3J5LmVuYWJsZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXRyaWV2ZSBDYXRlZ29yaWVzIGZyb20gREJcbiAgICAgICAgY2F0ZWdvcnlTZXJ2aWNlXG4gICAgICAgICAgICAuZ2V0QWxsKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgY2F0ZWdvcnlCYWNrdXAgPSBkYXRhLmNhdGVnb3JpZXM7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlcyBiYWNrdXAgb2YgZGF0YSB1c2luZyBBbmd1bGFyIHRvIHByZXZlbnQgYXBpIGRhdGEgZnJvbSBiZWluZyB0YW1wZXJlZFxuICAgICAgICAgICAgICAgIC8vIGRpcmVjdGx5XG4gICAgICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3JpZXMgPSBhbmd1bGFyLmNvcHkoY2F0ZWdvcnlCYWNrdXApO1xuICAgICAgICAgICAgICAgIC8vICRzY29wZS5jYXRlZ29yaWVzID0gZGF0YS5jYXRlZ29yaWVzO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgQ29udHJvbGxlci4kaW5qZWN0ID0gW1xuICAgICAgICAnJHNjb3BlJyxcbiAgICAgICAgJyRodHRwJyxcbiAgICAgICAgJyR0aW1lb3V0JyxcbiAgICAgICAgJ18nLFxuICAgICAgICAnZW50aXR5U2VydmljZScsXG4gICAgICAgICdjYXRlZ29yeVNlcnZpY2UnLFxuICAgICAgICAnbG9jYXRpb25TZXJ2aWNlJ1xuICAgIF07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ2VkaXRDdHJsJywgQ29udHJvbGxlcik7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNy8xNi5cbiAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBlZGl0RW50aXR5RGVwZW5kZW5jaWVzID0gW2VkaXRFbnRpdHlEaXJlY3RpdmVdO1xuXG4gICAgZnVuY3Rpb24gZWRpdEVudGl0eURpcmVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnanMvZWRpdC1lbnRpdHkvZWRpdC5odG1sJyxcbiAgICAgICAgICAgIHJlc3RyaWN0ICAgOiAnRScsXG4gICAgICAgICAgICBzY29wZSAgICAgIDoge1xuICAgICAgICAgICAgICAgICdlbnRpdHknICA6IFwiPVwiLFxuICAgICAgICAgICAgICAgICdlbnRpdGllcyc6IFwiPVwiLFxuICAgICAgICAgICAgICAgICdpc09wZW4nICA6IFwiPVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29udHJvbGxlciA6ICdlZGl0Q3RybCdcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuZGlyZWN0aXZlKCdlZGl0RW50aXR5JywgZWRpdEVudGl0eURlcGVuZGVuY2llcyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyLCAkKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBsaW5rRnVuY3Rpb24oc2NvcGUpIHtcblxuICAgICAgICBmdW5jdGlvbiBzY3JvbGwoKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9ICQodGhpcyk7XG4gICAgICAgICAgICBzZWxmLmNzcygnaGVpZ2h0JywgJzU1dmgnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrKCkge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSAkKHRoaXMpO1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5pbm5lckhlaWdodCAvIDMgPiBwYXJzZUludChzZWxmLmNzcygnaGVpZ2h0JykpKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jc3MoJ2hlaWdodCcsICc1NXZoJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGYuY3NzKCdoZWlnaHQnLCAnMzB2aCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRldGFpbHNQYW5lbDtcbiAgICAgICAgaWYgKHNjb3BlLm1vYmlsZSkge1xuICAgICAgICAgICAgZGV0YWlsc1BhbmVsID0gJChcIiNkZXRhaWxzLXBhbmVsXCIpO1xuICAgICAgICAgICAgZGV0YWlsc1BhbmVsLmNzcyhcImhlaWdodFwiLCBcIjMwdmhcIik7XG4gICAgICAgICAgICBkZXRhaWxzUGFuZWwuc2Nyb2xsVG9wKDApO1xuICAgICAgICAgICAgZGV0YWlsc1BhbmVsLnNjcm9sbChzY3JvbGwpO1xuICAgICAgICAgICAgZGV0YWlsc1BhbmVsLmNsaWNrKGNsaWNrKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZE1vYmlsZUV2ZW50cygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgICAgICBsaW5rOiBsaW5rRnVuY3Rpb25cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuZGlyZWN0aXZlKCdhZGRNb2JpbGVFdmVudHMnLCBbYWRkTW9iaWxlRXZlbnRzXSk7XG59KShhbmd1bGFyLCAkKTtcbiIsIihmdW5jdGlvbihhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBtb2RhbEN0cmwoJHNjb3BlLCAkbW9kYWxJbnN0YW5jZSkge1xuICAgICAgICAkc2NvcGUuY2xvc2VXaW5kb3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5jbG9zZSgpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdtb2RhbEN0cmwnLCBbJyRzY29wZScsICckbW9kYWxJbnN0YW5jZScsIG1vZGFsQ3RybF0pO1xuXG59KShhbmd1bGFyKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb25zdGFudCgnXycsIHdpbmRvdy5fKVxuICAgICAgICAuY29uZmlnKFsnJGxvY2F0aW9uUHJvdmlkZXInLCAnJGNvbXBpbGVQcm92aWRlcicsXG4gICAgICAgICAgICBmdW5jdGlvbiAoJGxvY2F0aW9uUHJvdmlkZXIsICRjb21waWxlUHJvdmlkZXIpIHtcbiAgICAgICAgICAgICAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgJGNvbXBpbGVQcm92aWRlci5kZWJ1Z0luZm9FbmFibGVkKHRydWUpO1xuICAgICAgICAgICAgfV0pXG4gICAgICAgIC5maWx0ZXIoJ3Rob3VzYW5kU3VmZml4JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChpbnB1dCwgZGVjaW1hbHMpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXhwLFxuICAgICAgICAgICAgICAgICAgICBzdWZmaXhlcyA9IFsnaycsICdNJywgJ0cnLCAnVCcsICdQJywgJ0UnXTtcblxuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuaXNOYU4oaW5wdXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChpbnB1dCA8IDEwMDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGV4cCA9IE1hdGguZmxvb3IoTWF0aC5sb2coaW5wdXQpIC8gTWF0aC5sb2coMTAwMCkpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIChpbnB1dCAvIE1hdGgucG93KDEwMDAsIGV4cCkpLnRvRml4ZWQoZGVjaW1hbHMpICsgc3VmZml4ZXNbZXhwIC0gMV07XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBob21lRGVwZW5kZW5jaWVzID0gW1xuICAgICAgICAnJHNjb3BlJyxcbiAgICAgICAgJyR0aW1lb3V0JyxcbiAgICAgICAgJ18nLFxuICAgICAgICAnZW50aXR5U2VydmljZScsXG4gICAgICAgICdjb25uZWN0aW9uU2VydmljZScsXG4gICAgICAgIGhvbWVDdHJsXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIGhvbWVDdHJsKCRzY29wZSwgJHRpbWVvdXQsIF8sIGVudGl0eVNlcnZpY2UsIGNvbm5lY3Rpb25TZXJ2aWNlKSB7XG4gICAgICAgICRzY29wZS5lbnRpdGllcyAgICAgICAgICAgICAgICAgPSBbXTtcbiAgICAgICAgJHNjb3BlLnNlYXJjaEl0ZW1zICAgICAgICAgICAgICA9IG51bGw7XG4gICAgICAgICRzY29wZS5jYXRlZ29yaWVzICAgICAgICAgICAgICAgPSBbXTtcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRMb2NhdGlvbiAgICAgICAgICA9IG51bGw7XG4gICAgICAgICRzY29wZS5jbGlja2VkTG9jYXRpb24gICAgICAgICAgPSB7fTtcbiAgICAgICAgJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiA9IG51bGw7XG4gICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5ICAgICAgICAgICAgPSB7fTtcbiAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ICAgICA9IG51bGw7XG4gICAgICAgICRzY29wZS5lZGl0aW5nICAgICAgICAgICAgICAgICAgPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLmFjdGlvbnMgICAgICAgICAgICAgICAgICA9IHsnaW50ZXJhY3RlZCc6IGZhbHNlfTtcbiAgICAgICAgJHNjb3BlLnNob3dzZWFyY2hNQiAgICAgICAgICAgICA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUuc2hvd0FuYWx5dGljcyAgICAgICAgICAgID0gZmFsc2U7XG4gICAgICAgICRzY29wZS5lbnRpdHlUeXBlcyAgICAgICAgICAgICAgPSBlbnRpdHlTZXJ2aWNlLmdldEVudGl0eVR5cGVzKCk7XG4gICAgICAgICRzY29wZS5jb25uZWN0aW9uVHlwZXMgICAgICAgICAgPSBjb25uZWN0aW9uU2VydmljZS5nZXRDb25uZWN0aW9uVHlwZXMoKTtcbiAgICAgICAgJHNjb3BlLnN0YXR1cyAgICAgICAgICAgICAgICAgICA9IHtcbiAgICAgICAgICAgIFwiaXNOZXR3b3JrU2hvd25cIjogdHJ1ZSxcbiAgICAgICAgICAgIFwibGljZW5zZVwiICAgICAgIDogdHJ1ZSxcbiAgICAgICAgICAgIFwibmV0d29ya0xvYWRpbmdcIjogdHJ1ZVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS50b2dnbGVBbmFseXRpY3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2NvcGUuc2hvd0FuYWx5dGljcyA9ICEkc2NvcGUuc2hvd0FuYWx5dGljcztcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm1pbkNvbm5lY3Rpb25zID0gJHNjb3BlLm1pbkNvbm5lY3Rpb25zID0gMjtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICRzY29wZS4kd2F0Y2goJ21pbkNvbm5lY3Rpb25zJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgndHJpZ2dlck5ldHdvcmtEcmF3Jyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRzY29wZS5jb25uZWN0aW9uQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coc2VsZi5taW5Db25uZWN0aW9ucyk7XG4gICAgICAgICAgICAkc2NvcGUubWluQ29ubmVjdGlvbnMgPSBzZWxmLm1pbkNvbm5lY3Rpb25zO1xuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3RyaWdnZXJOZXR3b3JrRHJhdycpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5oeWRlUGFydGlhbHMgPSBmdW5jdGlvbiAoZXhjZXB0KSB7XG4gICAgICAgICAgICBpZiAoZXhjZXB0ID09PSBcInNlYXJjaFwiKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRpbmcgICAgICAgICA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zZXR0aW5nc0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXhjZXB0ID09PSBcInNldHRpbmdzXCIpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdGluZyAgICAgID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3dzZWFyY2hNQiA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChleGNlcHQgPT09IFwiZWRpdFwiKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNldHRpbmdzRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zaG93c2VhcmNoTUIgICAgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRpbmcgICAgICAgICA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zZXR0aW5nc0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd3NlYXJjaE1CICAgID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2hvd1NlYXJjaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5oeWRlUGFydGlhbHMoXCJzZWFyY2hcIik7XG4gICAgICAgICAgICAkc2NvcGUuc2hvd3NlYXJjaE1CICAgPSAhJHNjb3BlLnNob3dzZWFyY2hNQjtcbiAgICAgICAgICAgIC8vICRzY29wZS4kYnJvYWRjYXN0KCdoaWRlTGljZW5zZScpO1xuICAgICAgICAgICAgJHNjb3BlLnN0YXR1cy5saWNlbnNlID0gZmFsc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnRvZ2dsZVNldHRpbmdzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLmh5ZGVQYXJ0aWFscyhcInNldHRpbmdzXCIpO1xuICAgICAgICAgICAgJHNjb3BlLnNldHRpbmdzRW5hYmxlZCA9ICEkc2NvcGUuc2V0dGluZ3NFbmFibGVkO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zdGFydEVkaXQgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudEVudGl0eSA9IGVudGl0eTtcbiAgICAgICAgICAgIGlmICgkc2NvcGUubW9iaWxlKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmh5ZGVQYXJ0aWFscyhcImVkaXRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc2NvcGUuZWRpdGluZyA9IHRydWU7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnN3aXRjaFZpZXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyAkc2NvcGUuJGJyb2FkY2FzdCgndmlld0NoYW5nZScsICEkc2NvcGUuc3RhdHVzLmlzTmV0d29ya1Nob3duID8gJ01hcCcgOiAnTmV0d29yaycpO1xuICAgICAgICAgICAgLy8gJHNjb3BlLmNoYW5nZVZpZXcoISRzY29wZS5zdGF0dXMuaXNOZXR3b3JrU2hvd24gPyAnTWFwJyA6ICdOZXR3b3JrJyk7XG4gICAgICAgICAgICAkc2NvcGUuc3RhdHVzLmlzTmV0d29ya1Nob3duID0gISRzY29wZS5zdGF0dXMuaXNOZXR3b3JrU2hvd247XG4gICAgICAgICAgICBpZiAoJHNjb3BlLnN0YXR1cy5pc05ldHdvcmtTaG93bikge1xuICAgICAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCd0cmlnZ2VyTmV0d29ya0RyYXcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB3aW5kb3cubW9iaWxlY2hlY2sgICAgID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNoZWNrICA9IGZhbHNlLFxuICAgICAgICAgICAgICAgIHJlZ2V4ICA9IC8oYW5kcm9pZHxiYlxcZCt8bWVlZ28pLittb2JpbGV8YXZhbnRnb3xiYWRhXFwvfGJsYWNrYmVycnl8YmxhemVyfGNvbXBhbHxlbGFpbmV8ZmVubmVjfGhpcHRvcHxpZW1vYmlsZXxpcChob25lfG9kKXxpcmlzfGtpbmRsZXxsZ2UgfG1hZW1vfG1pZHB8bW1wfG1vYmlsZS4rZmlyZWZveHxuZXRmcm9udHxvcGVyYSBtKG9ifGluKWl8cGFsbSggb3MpP3xwaG9uZXxwKGl4aXxyZSlcXC98cGx1Y2tlcnxwb2NrZXR8cHNwfHNlcmllcyg0fDYpMHxzeW1iaWFufHRyZW98dXBcXC4oYnJvd3NlcnxsaW5rKXx2b2RhZm9uZXx3YXB8d2luZG93cyBjZXx4ZGF8eGlpbm8vaSxcbiAgICAgICAgICAgICAgICByZWdleDIgPSAvMTIwN3w2MzEwfDY1OTB8M2dzb3w0dGhwfDUwWzEtNl1pfDc3MHN8ODAyc3xhIHdhfGFiYWN8YWMoZXJ8b298c1xcLSl8YWkoa298cm4pfGFsKGF2fGNhfGNvKXxhbW9pfGFuKGV4fG55fHl3KXxhcHR1fGFyKGNofGdvKXxhcyh0ZXx1cyl8YXR0d3xhdShkaXxcXC1tfHIgfHMgKXxhdmFufGJlKGNrfGxsfG5xKXxiaShsYnxyZCl8YmwoYWN8YXopfGJyKGV8dil3fGJ1bWJ8YndcXC0obnx1KXxjNTVcXC98Y2FwaXxjY3dhfGNkbVxcLXxjZWxsfGNodG18Y2xkY3xjbWRcXC18Y28obXB8bmQpfGNyYXd8ZGEoaXR8bGx8bmcpfGRidGV8ZGNcXC1zfGRldml8ZGljYXxkbW9ifGRvKGN8cClvfGRzKDEyfFxcLWQpfGVsKDQ5fGFpKXxlbShsMnx1bCl8ZXIoaWN8azApfGVzbDh8ZXooWzQtN10wfG9zfHdhfHplKXxmZXRjfGZseShcXC18Xyl8ZzEgdXxnNTYwfGdlbmV8Z2ZcXC01fGdcXC1tb3xnbyhcXC53fG9kKXxncihhZHx1bil8aGFpZXxoY2l0fGhkXFwtKG18cHx0KXxoZWlcXC18aGkocHR8dGEpfGhwKCBpfGlwKXxoc1xcLWN8aHQoYyhcXC18IHxffGF8Z3xwfHN8dCl8dHApfGh1KGF3fHRjKXxpXFwtKDIwfGdvfG1hKXxpMjMwfGlhYyggfFxcLXxcXC8pfGlicm98aWRlYXxpZzAxfGlrb218aW0xa3xpbm5vfGlwYXF8aXJpc3xqYSh0fHYpYXxqYnJvfGplbXV8amlnc3xrZGRpfGtlaml8a2d0KCB8XFwvKXxrbG9ufGtwdCB8a3djXFwtfGt5byhjfGspfGxlKG5vfHhpKXxsZyggZ3xcXC8oa3xsfHUpfDUwfDU0fFxcLVthLXddKXxsaWJ3fGx5bnh8bTFcXC13fG0zZ2F8bTUwXFwvfG1hKHRlfHVpfHhvKXxtYygwMXwyMXxjYSl8bVxcLWNyfG1lKHJjfHJpKXxtaShvOHxvYXx0cyl8bW1lZnxtbygwMXwwMnxiaXxkZXxkb3x0KFxcLXwgfG98dil8enopfG10KDUwfHAxfHYgKXxtd2JwfG15d2F8bjEwWzAtMl18bjIwWzItM118bjMwKDB8Mil8bjUwKDB8Mnw1KXxuNygwKDB8MSl8MTApfG5lKChjfG0pXFwtfG9ufHRmfHdmfHdnfHd0KXxub2soNnxpKXxuenBofG8yaW18b3AodGl8d3YpfG9yYW58b3dnMXxwODAwfHBhbihhfGR8dCl8cGR4Z3xwZygxM3xcXC0oWzEtOF18YykpfHBoaWx8cGlyZXxwbChheXx1Yyl8cG5cXC0yfHBvKGNrfHJ0fHNlKXxwcm94fHBzaW98cHRcXC1nfHFhXFwtYXxxYygwN3wxMnwyMXwzMnw2MHxcXC1bMi03XXxpXFwtKXxxdGVrfHIzODB8cjYwMHxyYWtzfHJpbTl8cm8odmV8em8pfHM1NVxcL3xzYShnZXxtYXxtbXxtc3xueXx2YSl8c2MoMDF8aFxcLXxvb3xwXFwtKXxzZGtcXC98c2UoYyhcXC18MHwxKXw0N3xtY3xuZHxyaSl8c2doXFwtfHNoYXJ8c2llKFxcLXxtKXxza1xcLTB8c2woNDV8aWQpfHNtKGFsfGFyfGIzfGl0fHQ1KXxzbyhmdHxueSl8c3AoMDF8aFxcLXx2XFwtfHYgKXxzeSgwMXxtYil8dDIoMTh8NTApfHQ2KDAwfDEwfDE4KXx0YShndHxsayl8dGNsXFwtfHRkZ1xcLXx0ZWwoaXxtKXx0aW1cXC18dFxcLW1vfHRvKHBsfHNoKXx0cyg3MHxtXFwtfG0zfG01KXx0eFxcLTl8dXAoXFwuYnxnMXxzaSl8dXRzdHx2NDAwfHY3NTB8dmVyaXx2aShyZ3x0ZSl8dmsoNDB8NVswLTNdfFxcLXYpfHZtNDB8dm9kYXx2dWxjfHZ4KDUyfDUzfDYwfDYxfDcwfDgwfDgxfDgzfDg1fDk4KXx3M2MoXFwtfCApfHdlYmN8d2hpdHx3aShnIHxuY3xudyl8d21sYnx3b251fHg3MDB8eWFzXFwtfHlvdXJ8emV0b3x6dGVcXC0vaTtcbiAgICAgICAgICAgIChmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgICAgIGlmIChyZWdleC50ZXN0KGEpIHx8IHJlZ2V4Mi50ZXN0KGEuc3Vic3RyKDAsIDQpKSkge1xuICAgICAgICAgICAgICAgICAgICBjaGVjayA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkobmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBuYXZpZ2F0b3IudmVuZG9yIHx8IHdpbmRvdy5vcGVyYSk7XG4gICAgICAgICAgICByZXR1cm4gY2hlY2s7XG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS5tb2JpbGUgICAgICAgICAgPSB3aW5kb3cubW9iaWxlY2hlY2soKTtcbiAgICAgICAgJHNjb3BlLnNldHRpbmdzRW5hYmxlZCA9ICEkc2NvcGUubW9iaWxlO1xuXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVudGl0eVNlcnZpY2VcbiAgICAgICAgICAgICAgICAuZ2V0QWxsKClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZW50aXRpZXMgPSBkYXRhLm5vZGVzO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYXRpb25zICAgPSBfLnVuaXEoXG4gICAgICAgICAgICAgICAgICAgICAgICBfLnBsdWNrKF8uZmxhdHRlbihfLnBsdWNrKCRzY29wZS5lbnRpdGllcywgJ2xvY2F0aW9ucycpKSwgJ2xvY2FsaXR5JykpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbnRpdGllc0J5TG9jYXRpb24gPSBfLm1hcChsb2NhdGlvbnMsIGZ1bmN0aW9uIChsb2MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaW5kaW5ncyA9IF8uZmlsdGVyKCRzY29wZS5lbnRpdGllcywgXy5mbG93KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8ucHJvcGVydHkoJ2xvY2F0aW9ucycpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8ucGFydGlhbFJpZ2h0KF8uYW55LCB7bG9jYWxpdHk6IGxvY30pXG4gICAgICAgICAgICAgICAgICAgICAgICApKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lICAgIDogbG9jLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgICAgOiAnbG9jYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0aWVzOiBmaW5kaW5ncyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWN0ICAgIDogXy56aXBPYmplY3QoXy5wbHVjayhmaW5kaW5ncywgJ25hbWUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5wbHVjayhmaW5kaW5ncywgJ2luZGV4JykpXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VhcmNoSXRlbXMgPSBlbnRpdGllc0J5TG9jYXRpb24uY29uY2F0KCRzY29wZS5lbnRpdGllcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgKCRzY29wZS5nZXRVUkxJRCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAvLyBTZXQgdGhlIGVudGl0eSB0byB0aGUgSUQgaW4gdGhlIFVSTCBpZiBpdCBleGlzdHMuXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAkc2NvcGUuc2V0RW50aXR5SUQoJHNjb3BlLmdldFVSTElEKCkpO1xuICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5vdmVydmlld1VybCA9ICdqcy9vdmVydmlldy9vdmVydmlldy5odG1sJztcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3RyaWdnZXJOZXR3b3JrRHJhdycpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCAxMDApO1xuXG4gICAgICAgICRzY29wZS5vdmVydmlld1VybCA9IG51bGw7XG5cbiAgICAgICAgJHNjb3BlLnNldEVudGl0eSAgID0gZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRMb2NhdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudEVudGl0eSAgID0gZW50aXR5O1xuICAgICAgICAgICAgaWYgKCRzY29wZS5lZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnN0b3BFZGl0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnZW50aXR5Q2hhbmdlJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNldEVudGl0eUlEID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICAkc2NvcGUuc2V0RW50aXR5KF8uZmluZCgkc2NvcGUuZW50aXRpZXMsIHsnaWQnOiBpZH0pKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2V0TG9jYXRpb24gPSBmdW5jdGlvbiAobG9jYXRpb24pIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50TG9jYXRpb24gPSBsb2NhdGlvbjtcbiAgICAgICAgICAgIGlmICgkc2NvcGUuZWRpdGluZykge1xuICAgICAgICAgICAgICAgICRzY29wZS5zdG9wRWRpdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ2l0ZW1DaGFuZ2UnKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2VsZWN0SXRlbSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnbG9jYXRpb24nKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNldExvY2F0aW9uKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlW2l0ZW0gJSAxID09PSAwID8gJ3NldEVudGl0eUlEJyA6ICdzZXRFbnRpdHknXShpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzZWxlY3RJdGVtJywgaXRlbSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLiRvbignc2V0Q3VycmVudEVudGl0eScsIGZ1bmN0aW9uIChldmVudCwgYXJncykge1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRFbnRpdHkgPSBhcmdzLnZhbHVlO1xuICAgICAgICB9KTtcblxuICAgICAgICAkc2NvcGUuJG9uKCdzZXRDdXJyZW50TG9jYXRpb24nLCBmdW5jdGlvbiAoZXZlbnQsIGFyZ3MpIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50TG9jYXRpb24gPSBhcmdzLnZhbHVlO1xuICAgICAgICB9KTtcblxuICAgICAgICAkc2NvcGUuc2V0RW50aXRpZXMgPSBmdW5jdGlvbiAoZW50aXRpZXMpIHtcbiAgICAgICAgICAgICRzY29wZS5lbnRpdGllcyA9IGVudGl0aWVzO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zdG9wRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5lZGl0aW5nID0gZmFsc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLiRvbihcImVkaXRFbnRpdHlTdWNjZXNzXCIsIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgJHNjb3BlLnNldEVudGl0aWVzKHJlc3BvbnNlLm5vZGVzKTtcbiAgICAgICAgICAgIC8vICRzY29wZS5zZXRFbnRpdHlJRCgkc2NvcGUuY3VycmVudEVudGl0eS5pZCk7XG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgndHJpZ2dlck5ldHdvcmtEcmF3Jyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRzY29wZS5hbmltYXRpb25zRW5hYmxlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ2hvbWVDdHJsJywgaG9tZURlcGVuZGVuY2llcyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA3LzE0LzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGRlcGVuZGVuY2llcyA9IFtdO1xuXG4gICAgZnVuY3Rpb24gZGlyZWN0aXZlKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJyZXN0cmljdFwiOiBcIkVcIixcbiAgICAgICAgICAgIFwidGVtcGxhdGVVcmxcIjogXCIvbWFwL21hcC5odG1sXCIsXG4gICAgICAgICAgICBcImNvbnRyb2xsZXJcIjogXCJtYXBDdHJsXCJcbiAgICAgICAgfTtcbiAgICB9XG4gICAgICAgIGFuZ3VsYXIubW9kdWxlKFwiY2l2aWMtZ3JhcGhcIilcbiAgICAgICAgICAgIC5kaXJlY3RpdmUoXCJtYXBcIiwgZGVwZW5kZW5jaWVzKTtcblxufSkoYW5ndWxhcik7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBvdmVydmlld0N0cmwoJHNjb3BlLCBfKSB7XG4gICAgICAgICRzY29wZS5jYXRlZ29yaXplZEVudGl0aWVzID0ge307XG4gICAgICAgIF8uZm9yRWFjaChfLmtleXMoJHNjb3BlLmVudGl0eVR5cGVzKSwgZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICRzY29wZS5jYXRlZ29yaXplZEVudGl0aWVzW3R5cGVdID0gXy5maWx0ZXIoJHNjb3BlLmVudGl0aWVzLCB7J3R5cGUnOiB0eXBlfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdvdmVydmlld0N0cmwnLCBbJyRzY29wZScsICdfJywgb3ZlcnZpZXdDdHJsXSk7XG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBpc0RlZmluZWQobykge1xuICAgICAgICByZXR1cm4gISh0eXBlb2YgbyA9PT0gXCJ1bmRlZmluZWRcIiB8fCBvID09PSBudWxsKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBDb250cm9sbGVyKCRzY29wZSwgJGZpbHRlciwgXywgY29ubmVjdGlvblNlcnZpY2UpIHtcbiAgICAgICAgLy8gVE9ETzogTWFrZSBhIGhhc2htYXAgb24gdGhlIGJhY2tlbmQgb2YgaWQgLT4gcG9zaXRpb24sIHRoZW4gdXNlIHNvdXJjZTpcbiAgICAgICAgLy8gZW50aXRpZXNbbWFwW3NvdXJjZWlkXV0gdG8gZ2V0IG5vZGVzLiBTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3EvMTY4MjQzMDhcbiAgICAgICAgJHNjb3BlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgICRzY29wZS5jb25uZWN0aW9ucyA9IHt9O1xuICAgICAgICBzdGFydExvYWQoKTtcblxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9jb2RlcndhbGwuY29tL3Avbmdpc21hL3NhZmUtYXBwbHktaW4tYW5ndWxhci1qc1xuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5ID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICB2YXIgcGhhc2UgPSB0aGlzLiRyb290LiQkcGhhc2U7XG4gICAgICAgICAgICBpZiAocGhhc2UgPT09ICckYXBwbHknIHx8IHBoYXNlID09PSAnJGRpZ2VzdCcpIHtcbiAgICAgICAgICAgICAgICBpZiAoZm4gJiYgKHR5cGVvZihmbikgPT09ICdmdW5jdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRhcHBseShmbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLiRvbigndHJpZ2dlck5ldHdvcmtEcmF3Jywgc3RhcnRMb2FkKTtcblxuICAgICAgICAkc2NvcGUuJG9uKCd2aWV3Q2hhbmdlJywgZnVuY3Rpb24gKHZpZXdPYmopIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZpZXdPYmopO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgZHJhd05ldHdvcmsgPSBmdW5jdGlvbiAoZW50aXR5QXJyYXksIGNvbm5lY3Rpb25BcnJheSkge1xuICAgICAgICAgICAgJHNjb3BlLmlzTG9hZGluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICB2YXIgc3ZnID0gZDMuc2VsZWN0KCcjbmV0d29yaycpO1xuICAgICAgICAgICAgc3ZnLnNlbGVjdEFsbChcIipcIikucmVtb3ZlKCk7XG4gICAgICAgICAgICB2YXIgYm91bmRzID0gc3ZnLm5vZGUoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSBib3VuZHMuaGVpZ2h0O1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gYm91bmRzLndpZHRoO1xuICAgICAgICAgICAgdmFyIG9mZnNldFNjYWxlID0gNjtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0Tm9kZVNpemUgPSA3O1xuICAgICAgICAgICAgdmFyIG9mZnNldHMgPSB7XG4gICAgICAgICAgICAgICAgJ0luZGl2aWR1YWwnOiB7ICd4JzogMSwgJ3knOiAxIH0sXG4gICAgICAgICAgICAgICAgJ0Zvci1Qcm9maXQnOiB7ICd4JzogMSwgJ3knOiAtMSB9LFxuICAgICAgICAgICAgICAgICdOb24tUHJvZml0JzogeyAneCc6IC0xLCAneSc6IDEgfSxcbiAgICAgICAgICAgICAgICAnR292ZXJubWVudCc6IHsgJ3gnOiAtMSwgJ3knOiAtMSB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGxvd2VyQm91bmRSYWRpdXMgPSAxMDtcbiAgICAgICAgICAgIHZhciB1cHBlckJvdW5kUmFkaXVzID0gNTA7XG4gICAgICAgICAgICB2YXIgbWF4RW1wbG95ZWVzID0gZDMubWF4KGVudGl0eUFycmF5LCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoZWwuZW1wbG95ZWVzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIG1heEZvbGxvd2VycyA9IGQzLm1heChlbnRpdHlBcnJheSwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KGVsLmZvbGxvd2Vycyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBzY2FsZSA9IHtcbiAgICAgICAgICAgICAgICAnZW1wbG95ZWVzJzogZDMuc2NhbGUuc3FydCgpLmRvbWFpbihbMTAsIG1heEVtcGxveWVlc10pXG4gICAgICAgICAgICAgICAgICAgIC5yYW5nZShbbG93ZXJCb3VuZFJhZGl1cywgdXBwZXJCb3VuZFJhZGl1c10pLFxuICAgICAgICAgICAgICAgICdmb2xsb3dlcnMnOiBkMy5zY2FsZS5zcXJ0KCkuZG9tYWluKFsxMCwgbWF4Rm9sbG93ZXJzXSlcbiAgICAgICAgICAgICAgICAgICAgLnJhbmdlKFtsb3dlckJvdW5kUmFkaXVzLCB1cHBlckJvdW5kUmFkaXVzXSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgbGlua3MgPSB7fTtcbiAgICAgICAgICAgIHZhciBmb3JjZSA9IGQzLmxheW91dC5mb3JjZSgpXG4gICAgICAgICAgICAgICAgLnNpemUoW3dpZHRoLCBoZWlnaHRdKVxuICAgICAgICAgICAgICAgIC5ub2RlcyhlbnRpdHlBcnJheSlcbiAgICAgICAgICAgICAgICAubGlua3MoXy5mbGF0dGVuKF8udmFsdWVzKGNvbm5lY3Rpb25BcnJheSkpKVxuICAgICAgICAgICAgICAgIC5jaGFyZ2UoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuZW1wbG95ZWVzID8gLTIgKiBzY2FsZS5lbXBsb3llZXMoZC5lbXBsb3llZXMpIDogLTIwO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmxpbmtTdHJlbmd0aCgwKVxuICAgICAgICAgICAgICAgIC5saW5rRGlzdGFuY2UoNTApO1xuXG4gICAgICAgICAgICBfLmZvckVhY2goY29ubmVjdGlvbkFycmF5LCBmdW5jdGlvbiAoY29ubmVjdGlvbnMsIHR5cGUpIHtcbiAgICAgICAgICAgICAgICBsaW5rc1t0eXBlXSA9IHN2Zy5zZWxlY3RBbGwoJy5saW5rIC4nICsgdHlwZSArICctbGluaycpXG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKGNvbm5lY3Rpb25zKVxuICAgICAgICAgICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ2xpbmUnKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0RlZmluZWQoZC5zb3VyY2UpIHx8ICFpc0RlZmluZWQoZC50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkLnR5cGUgPSB0eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdsaW5rICcgKyB0eXBlICsgJy1saW5rICcgKyBkLnNvdXJjZS50eXBlICsgJy1saW5rICcgKyBkLnRhcmdldC50eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAnLWxpbmsnO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgbm9kZSA9IHN2Zy5zZWxlY3RBbGwoJy5ub2RlJylcbiAgICAgICAgICAgICAgICAuZGF0YShlbnRpdHlBcnJheSlcbiAgICAgICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnbm9kZSAnICsgZC50eXBlICsgJy1ub2RlJztcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYWxsKGZvcmNlLmRyYWcpO1xuXG4gICAgICAgICAgICBub2RlLmFwcGVuZCgnY2lyY2xlJylcbiAgICAgICAgICAgICAgICAuYXR0cigncicsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmVtcGxveWVlcyA/IHNjYWxlWydlbXBsb3llZXMnXShkLmVtcGxveWVlcykgOiBkZWZhdWx0Tm9kZVNpemU7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG5vZGUuYXBwZW5kKCd0ZXh0JylcbiAgICAgICAgICAgICAgICAudGV4dChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5uaWNrbmFtZSA/IGQubmlja25hbWUgOiBkLm5hbWU7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYXR0cignZHgnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoLTAuMDY1ICogdGhpcy5nZXRDb21wdXRlZFRleHRMZW5ndGgoKSAvIDIpICsgJ2VtJztcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5hdHRyKCdkeScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgwLjA4ICogdGhpcy5wYXJlbnROb2RlLmdldEJCb3goKS5oZWlnaHQgLyAyICsgMC41KSArICdlbSc7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZvcmNlLm9uKCd0aWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBDbHVzdGVyIGluIGZvdXIgY29ybmVycyBiYXNlZCBvbiBvZmZzZXQuXG4gICAgICAgICAgICAgICAgdmFyIGsgPSBvZmZzZXRTY2FsZSAqIGUuYWxwaGE7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZS5hbHBoYSlcbiAgICAgICAgICAgICAgICBfLmZvckVhY2goZW50aXR5QXJyYXksIGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVudGl0eS54ICYmIG9mZnNldHNbZW50aXR5LnR5cGVdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHkueCArPSBvZmZzZXRzW2VudGl0eS50eXBlXS54ICogaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eS55ICs9IG9mZnNldHNbZW50aXR5LnR5cGVdLnkgKiBrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5LnggPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KHVwcGVyQm91bmRSYWRpdXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKHdpZHRoIC0gdXBwZXJCb3VuZFJhZGl1cywgZW50aXR5LngpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eS55ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heCh1cHBlckJvdW5kUmFkaXVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1pbihoZWlnaHQgLSB1cHBlckJvdW5kUmFkaXVzLCBlbnRpdHkueSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBfLmZvckVhY2gobGlua3MsIGZ1bmN0aW9uIChsaW5rKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MScsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuc291cmNlLng7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kxJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5zb3VyY2UueTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDInLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnRhcmdldC54O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5MicsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQudGFyZ2V0Lnk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBub2RlLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBkLnggKyAnLCcgKyBkLnkgKyAnKSc7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBzcGVlZEFuaW1hdGUgPSBmdW5jdGlvbiAodGlja3MpIHtcbiAgICAgICAgICAgICAgICAvLyBTcGVlZCB1cCB0aGUgaW5pdGlhbCBhbmltYXRpb24uXG4gICAgICAgICAgICAgICAgLy8gU2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2MTg5MTEwXG4gICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aWNrczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JjZS50aWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvcmNlLmFscGhhKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVuZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICghJHNjb3BlLm1vYmlsZSkge1xuICAgICAgICAgICAgICAgIHNwZWVkQW5pbWF0ZSg3KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvcmNlLnN0YXJ0KCk7XG5cbiAgICAgICAgICAgIC8vIEhhc2ggbGlua2VkIG5laWdoYm9ycyBmb3IgZWFzeSBob3ZlcmluZyBlZmZlY3RzLlxuICAgICAgICAgICAgLy8gU2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzg3ODAyNzdcbiAgICAgICAgICAgIHZhciBsaW5rZWRCeUluZGV4ID0ge307XG4gICAgICAgICAgICBfLmZvckVhY2gobGlua3MsIGZ1bmN0aW9uIChsKSB7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGxbMF0sIGZ1bmN0aW9uIChjb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSBjb25uZWN0aW9uLl9fZGF0YV9fLnNvdXJjZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGNvbm5lY3Rpb24uX19kYXRhX18udGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICBsaW5rZWRCeUluZGV4W3NvdXJjZS5pbmRleCArICcsJyArIHRhcmdldC5pbmRleF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBsaW5rZWRCeUluZGV4W3RhcmdldC5pbmRleCArICcsJyArIHNvdXJjZS5pbmRleF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBuZWlnaGJvcmluZyA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpbmtlZEJ5SW5kZXhbYS5pbmRleCArICcsJyArIGIuaW5kZXhdIHx8IGEuaW5kZXggPT09IGIuaW5kZXg7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgZm9jdXNuZWlnaGJvcnMgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgLy8gQXBwbHkgJ3VuZm9jdXNlZCcgY2xhc3MgdG8gYWxsIG5vbi1uZWlnaGJvcnMuXG4gICAgICAgICAgICAgICAgLy8gQXBwbHkgJ2ZvY3VzZWQnIGNsYXNzIHRvIGFsbCBuZWlnaGJvcnMuXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogU2VlIGlmIGl0IGNhbiBiZSBkb25lIHdpdGgganVzdCBvbmUgY2xhc3MgYW5kIDpub3QoLmZvY3VzZWQpIENTUyBzZWxlY3RvcnMuXG4gICAgICAgICAgICAgICAgbm9kZVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmVpZ2hib3JpbmcoZW50aXR5LCBuKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIW5laWdoYm9yaW5nKGVudGl0eSwgbik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGxpbmtzLCBmdW5jdGlvbiAobGluaykge1xuICAgICAgICAgICAgICAgICAgICBsaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVudGl0eS5pbmRleCA9PT0gby5zb3VyY2UuaW5kZXggfHwgZW50aXR5LmluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID09PSBvLnRhcmdldC5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShlbnRpdHkuaW5kZXggPT09IG8uc291cmNlLmluZGV4IHx8IGVudGl0eS5pbmRleFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID09PSBvLnRhcmdldC5pbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBmb2N1cyA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmN1cnJlbnRFbnRpdHkgIT09IGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2V0RW50aXR5KGVudGl0eSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgICAgICBmb2N1c25laWdoYm9ycyhlbnRpdHkpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIHVuZm9jdXMgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgLy92YXIgdHJhbnNpdGlvbmRlbGF5ID0gNzU7XG4gICAgICAgICAgICAgICAgbm9kZVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChsaW5rcywgZnVuY3Rpb24gKGxpbmspIHtcbiAgICAgICAgICAgICAgICAgICAgbGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZW50aXR5LmZpeGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgLy8gUmVzdGFydCBkMyBhbmltYXRpb25zLlxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yY2UucmVzdW1lKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vVE9ETzogU2hvdyBnZW5lcmljIGRldGFpbHMgYW5kIG5vdCBpbmRpdmlkdWFsIGVudGl0eSBkZXRhaWxzP1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBob3ZlclRpbWVyO1xuICAgICAgICAgICAgdmFyIGhvdmVyID0gZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ICYmICEkc2NvcGUuZWRpdGluZyAmJiAhJHNjb3BlLmN1cnJlbnRMb2NhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBob3ZlclRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb2N1cyhlbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbnRlcmFjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIHVuaG92ZXIgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgJiYgISRzY29wZS5jdXJyZW50TG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdW5mb2N1cyhlbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaG92ZXJUaW1lcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgZm9jdXNMb2NhdGlvbiA9IGZ1bmN0aW9uIChsb2NhdGlvbikge1xuICAgICAgICAgICAgICAgIC8vICBJZiB0aGUgY3VycmVudCBlbnRpdHkgaXMgc2hvd24gYW5kIGl0IGRvZXNuJ3QgbWF0Y2ggdGhlIGNsaWNrZWQgbm9kZSwgdGhlbiBzZXRcbiAgICAgICAgICAgICAgICAvLyB0aGUgbmV3IG5vZGUgdG8gY2xpY2tlZC5cbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG5cbiAgICAgICAgICAgICAgICBub2RlLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5uYW1lIGluIGxvY2F0aW9uLmRpY3Q7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShuLm5hbWUgaW4gbG9jYXRpb24uZGljdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGxpbmtzLCBmdW5jdGlvbiAobGluaykge1xuICAgICAgICAgICAgICAgICAgICBsaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChvLnNvdXJjZS5uYW1lIGluIGxvY2F0aW9uLmRpY3QgJiYgby50YXJnZXQubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluIGxvY2F0aW9uLmRpY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmdW5jdGlvbiAobykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhKG8uc291cmNlLm5hbWUgaW4gbG9jYXRpb24uZGljdCkgfHwgIShvLnRhcmdldC5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluIGxvY2F0aW9uLmRpY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgdW5mb2N1c0xvY2F0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIG5vZGVcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBfLmZvckVhY2gobGlua3MsIGZ1bmN0aW9uIChsaW5rKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yY2UucmVzdW1lKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGhpZ2hsaWdodExvY2F0aW9uID0gZnVuY3Rpb24gKGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3dMaWNlbnNlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICB1bmZvY3VzKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uICE9PSBsb2NhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB1bmZvY3VzTG9jYXRpb24oJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24gPSBsb2NhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgZm9jdXNMb2NhdGlvbihsb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkMy5ldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBkMy5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBjbGljayA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd0xpY2Vuc2UgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIGlmIChpc0RlZmluZWQoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRGVmaW5lZCgkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5mb2N1c0xvY2F0aW9uKCRzY29wZS5jbGlja2VkTG9jYXRpb24uZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vICBJZiB0aGUgcHJldmlvdXMgbm9kZSBpcyBlcXVhbCB0byB0aGUgbmV3IG5vZGUsIGRvIG5vdGhpbmcuXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPT09IGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICBVbmZvY3VzIG9uIHByZXZpb3VzIG5vZGUgYW5kIGZvY3VzIG9uIG5ldyBub2RlLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZm9jdXMoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9IGVudGl0eTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTdG9wIGV2ZW50IHNvIHdlIGRvbid0IGRldGVjdCBhIGNsaWNrIG9uIHRoZSBiYWNrZ3JvdW5kLlxuICAgICAgICAgICAgICAgIC8vIFNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcS8yMjk0MTc5NlxuICAgICAgICAgICAgICAgIGlmIChkMy5ldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBkMy5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGJhY2tncm91bmRjbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNEZWZpbmVkKCRzY29wZS5jbGlja2VkTG9jYXRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0RlZmluZWQoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuZm9jdXMoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNEZWZpbmVkKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuZm9jdXMoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgICAgIC8vVE9ETzogU2hvdyBnZW5lcmljIGRldGFpbHMgYW5kIG5vdCBpbmRpdmlkdWFsIGVudGl0eSBkZXRhaWxzLlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBkYmxjbGljayA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVudGl0eS5maXhlZCkge1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHkueCA9IHdpZHRoIC8gMjtcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LnkgPSBoZWlnaHQgLyAyO1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHkucHggPSB3aWR0aCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5weSA9IGhlaWdodCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5maXhlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9IGVudGl0eTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB1bmZvY3VzKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIG5vZGUub24oJ21vdXNlb3ZlcicsIGhvdmVyKTtcbiAgICAgICAgICAgIG5vZGUub24oJ21vdXNlb3V0JywgdW5ob3Zlcik7XG4gICAgICAgICAgICBub2RlLm9uKCdjbGljaycsIGNsaWNrKTtcbiAgICAgICAgICAgIG5vZGUub24oJ2RibGNsaWNrJywgZGJsY2xpY2spO1xuICAgICAgICAgICAgc3ZnLm9uKCdjbGljaycsIGJhY2tncm91bmRjbGljayk7XG5cbiAgICAgICAgICAgIG5vZGVcbiAgICAgICAgICAgICAgICAuY2xhc3NlZCgnd2VsbGNvbm5lY3RlZCcsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmhhc093blByb3BlcnR5KCd3ZWxsY29ubmVjdGVkJyk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICRzY29wZS4kb24oJ2NoYW5nZVNpemVCeScsIGZ1bmN0aW9uIChldmVudCwgc2l6ZUJ5KSB7XG4gICAgICAgICAgICAgICAgc3ZnLnNlbGVjdEFsbCgnY2lyY2xlJylcbiAgICAgICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oMjUwKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cigncicsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZFtzaXplQnldID8gc2NhbGVbc2l6ZUJ5XShkW3NpemVCeV0pIDogZGVmYXVsdE5vZGVTaXplO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJHNjb3BlLiRvbigndG9nZ2xlTGluaycsIGZ1bmN0aW9uIChldmVudCwgbGluaykge1xuICAgICAgICAgICAgICAgIC8vIGxpbmtzW2xpbmsubmFtZV1cbiAgICAgICAgICAgICAgICAvLyAuY2xhc3NlZCh7J3Zpc2libGUnOiBsaW5rLmVuYWJsZWQsICdoaWRkZW4nOiAhbGluay5lbmFibGVkfSk7XG4gICAgICAgICAgICAgICAgXy5tYXAoJHNjb3BlLmVudGl0eVR5cGVzLCBmdW5jdGlvbiAodmFsLCBrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgc3ZnXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCcuJyArIGtleSArICctbGluaycpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Zpc2libGUnOiBmdW5jdGlvbiAobCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb25uZWN0aW9uVHlwZSBlbmFibGVkLCBjb25uZWN0aW9uIHNvdXJjZSBlbnRpdHkgdHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpcyBlbmFibGVkLCBjb25uZWN0aW9uIHRhcmdldCBlbnRpdHkgdHlwZSBpcyBlbmFibGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gISRzY29wZS5jb25uZWN0aW9uVHlwZXNbbC50eXBlXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgKCRzY29wZS5lbnRpdHlUeXBlc1tsLnNvdXJjZS50eXBlXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgJHNjb3BlLmVudGl0eVR5cGVzW2wudGFyZ2V0LnR5cGVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoaWRkZW4nOiBmdW5jdGlvbiAobCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBhbnkgb2YgQ29ubmVjdGlvblR5cGUsIHNvdXJjZSBlbnRpdHkgdHlwZSwgb3IgdGFyZ2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVudGl0eSB0eXBlIGFyZSBkaXNhYmxlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEkc2NvcGUuY29ubmVjdGlvblR5cGVzW2wudHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8ICghJHNjb3BlLmVudGl0eVR5cGVzW2wuc291cmNlLnR5cGVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCAhJHNjb3BlLmVudGl0eVR5cGVzW2wudGFyZ2V0LnR5cGVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkc2NvcGUuJG9uKCd0b2dnbGVOb2RlJywgZnVuY3Rpb24gKGV2ZW50LCB0eXBlKSB7XG4gICAgICAgICAgICAgICAgc3ZnXG4gICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJy4nICsgdHlwZS5uYW1lICsgJy1ub2RlJylcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoeyAndmlzaWJsZSc6IHR5cGUuZW5hYmxlZCwgJ2hpZGRlbic6ICF0eXBlLmVuYWJsZWQgfSk7XG5cbiAgICAgICAgICAgICAgICBzdmdcbiAgICAgICAgICAgICAgICAgICAgLnNlbGVjdEFsbCgnLicgKyB0eXBlLm5hbWUgKyAnLWxpbmsnKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAndmlzaWJsZSc6IGZ1bmN0aW9uIChsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ubmVjdGlvblR5cGUgZW5hYmxlZCwgY29ubmVjdGlvbiBzb3VyY2UgZW50aXR5IHR5cGUgaXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbmFibGVkLCBjb25uZWN0aW9uIHRhcmdldCBlbnRpdHkgdHlwZSBpcyBlbmFibGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUuY29ubmVjdGlvblR5cGVzW2wudHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgKCRzY29wZS5lbnRpdHlUeXBlc1tsLnNvdXJjZS50eXBlXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiAkc2NvcGUuZW50aXR5VHlwZXNbbC50YXJnZXQudHlwZV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdoaWRkZW4nOiBmdW5jdGlvbiAobCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGFueSBvZiBDb25uZWN0aW9uVHlwZSwgc291cmNlIGVudGl0eSB0eXBlLCBvciB0YXJnZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbnRpdHkgdHlwZSBhcmUgZGlzYWJsZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEkc2NvcGUuY29ubmVjdGlvblR5cGVzW2wudHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgKCEkc2NvcGUuZW50aXR5VHlwZXNbbC5zb3VyY2UudHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgISRzY29wZS5lbnRpdHlUeXBlc1tsLnRhcmdldC50eXBlXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJHNjb3BlLiRvbignc2VsZWN0SXRlbScsIGZ1bmN0aW9uIChldmVudCwgaXRlbSkge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdsb2NhdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0TG9jYXRpb24oJHNjb3BlLmN1cnJlbnRMb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjbGljaygkc2NvcGUuY3VycmVudEVudGl0eSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gc3RhcnRMb2FkKCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gc3VjY2VzcyhkYXRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkRW50aXRpZXMgPSAkZmlsdGVyKCdmaWx0ZXInKSgkc2NvcGUuZW50aXRpZXMsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRpdHkuY29sbGFib3JhdGlvbnMubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPj0gJHNjb3BlLm1pbkNvbm5lY3Rpb25zO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWRDb25uZWN0aW9ucyA9IHt9O1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChfLmtleXMoZGF0YS5jb25uZWN0aW9ucyksIGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICRzY29wZS5jb25uZWN0aW9uc1t0eXBlXSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZENvbm5lY3Rpb25zW3R5cGVdID0gW107XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGRhdGEuY29ubmVjdGlvbnMsIGZ1bmN0aW9uIChjb25uZWN0aW9ucywgdHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBfLmZvckVhY2goY29ubmVjdGlvbnMsIGZ1bmN0aW9uIChjb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlTm9kZSA9IF8uZmluZChmaWx0ZXJlZEVudGl0aWVzLCB7ICdpZCc6IGNvbm5lY3Rpb24uc291cmNlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldE5vZGUgPSBfLmZpbmQoZmlsdGVyZWRFbnRpdGllcywgeyAnaWQnOiBjb25uZWN0aW9uLnRhcmdldCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKCBpc0RlZmluZWQoc291cmNlTm9kZSkgJiYgaXNEZWZpbmVkKHRhcmdldE5vZGUpICkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkQ29ubmVjdGlvbnNbdHlwZV0ucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ICdzb3VyY2UnOiBzb3VyY2VOb2RlLCAndGFyZ2V0JzogdGFyZ2V0Tm9kZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICRzY29wZS5jb25uZWN0aW9uc1t0eXBlXS5wdXNoKHsnc291cmNlJzogc291cmNlTm9kZSwgJ3RhcmdldCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0YXJnZXROb2RlfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgc2hvdyBsYWJlbHMgb24gdG9wIDUgbW9zdCBjb25uZWN0ZWQgZW50aXRpZXMgaW5pdGlhbGx5LlxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChfLmtleXMoJHNjb3BlLmVudGl0eVR5cGVzKSwgZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgdG9wIDUgbW9zdC1jb25uZWN0ZWQgZW50aXRpZXMuXG4gICAgICAgICAgICAgICAgICAgIHZhciB0b3A1ID0gXy50YWtlUmlnaHQoXy5zb3J0QnkoXy5maWx0ZXIoJHNjb3BlLmVudGl0aWVzLCB7ICd0eXBlJzogdHlwZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdjb2xsYWJvcmF0aW9ucy5sZW5ndGgnKSwgNSk7XG4gICAgICAgICAgICAgICAgICAgIF8uZm9yRWFjaCh0b3A1LCBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHkud2VsbGNvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgZmlsdGVyZWRFbnRpdGllcyA9IF8uc29ydEJ5KGZpbHRlcmVkRW50aXRpZXMsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoZS53ZWxsY29ubmVjdGVkKSA/IDEgOiAwO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgZHJhd05ldHdvcmsoZmlsdGVyZWRFbnRpdGllcywgZmlsdGVyZWRDb25uZWN0aW9ucyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbm5lY3Rpb25TZXJ2aWNlXG4gICAgICAgICAgICAgICAgLmdldEFsbCgpXG4gICAgICAgICAgICAgICAgLnRoZW4oc3VjY2Vzcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBDb250cm9sbGVyLiRpbmplY3QgPSBbXCIkc2NvcGVcIiwgXCIkZmlsdGVyXCIsIFwiX1wiLCBcImNvbm5lY3Rpb25TZXJ2aWNlXCJdO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ25ldHdvcmtDdHJsJywgQ29udHJvbGxlcik7XG5cbn0pKGFuZ3VsYXIsIFJUUCk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMTEvMTYuXG4gKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgZGVwZW5kZW5jaWVzID0gW1xuICAgICAgICBkaXJlY3RpdmVcbiAgICBdO1xuXG4gICAgZnVuY3Rpb24gZGlyZWN0aXZlKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJyZXN0cmljdFwiOiBcIkVcIixcbiAgICAgICAgICAgIFwidGVtcGxhdGVVcmxcIjogXCJqcy9uZXR3b3JrL25ldHdvcmsuaHRtbFwiLFxuICAgICAgICAgICAgXCJjb250cm9sbGVyXCI6IFwibmV0d29ya0N0cmxcIlxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiY2l2aWMtZ3JhcGhcIilcbiAgICAgICAgLmRpcmVjdGl2ZShcIm5ldHdvcmtcIiwgZGVwZW5kZW5jaWVzKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjYvMTYuXG4gKi9cbihmdW5jdGlvbihhbmd1bGFyKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnaW5wdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0aWN0OiAnRScsXG4gICAgICAgICAgICByZXF1aXJlOiAnP25nTW9kZWwnLFxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBuZ01vZGVsKSB7XG4gICAgICAgICAgICAgICAgaWYgKCAndHlwZScgaW4gYXR0cnMgJiYgYXR0cnMudHlwZS50b0xvd2VyQ2FzZSgpID09PSAncmFuZ2UnICkge1xuICAgICAgICAgICAgICAgICAgICBuZ01vZGVsLiRwYXJzZXJzLnB1c2gocGFyc2VGbG9hdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pO1xufSkoYW5ndWxhcik7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA3LzEvMTYuXG4gKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBhbmFseXRpY3NDdHJsKCRzY29wZSkge1xuXG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ2FuYWx5dGljc0N0cmwnLCBbJyRzY29wZScsIGFuYWx5dGljc0N0cmxdKTtcbn0pKGFuZ3VsYXIpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBDb25maWcoJGh0dHBQcm92aWRlcikge1xuICAgICAgICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXSA9IFwiWE1MSHR0cFJlcXVlc3RcIjtcbiAgICB9XG5cbiAgICBDb25maWcuJGluamVjdCA9IFtcIiRodHRwUHJvdmlkZXJcIl07XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKS5jb25maWcoQ29uZmlnKTtcblxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgLy8gdmFyIGFwaVVybCA9IFwiaHR0cHM6Ly9hcGkuY2l2aWNncmFwaC5pby9hcGlcIjtcbiAgICB2YXIgYXBpVXJsID0gXCIvYXBpXCI7XG5cbiAgICB2YXIgZGVmYXVsdEhlYWRlciA9IHtcbiAgICAgICAgLy8gXCJFdmVudC1OYW1lXCI6IFwiVGVzdC1FdmVudFwiXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIFNlcnZpY2UoJGh0dHAsICRxKSB7XG4gICAgICAgIGZ1bmN0aW9uIGxvZ0FwaUVycm9yKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlJlY2lldmVkIGFuIGVycm9yIGZyb20gQVBJIHdpdGggdGhpcyBtZXNzYWdlOiAlT1wiLCBlcnIuZGF0YSk7XG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KGVycik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1bndyYXBBbmd1bGFySHR0cChyZXNwb25zZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXQodXJsLCBwYXJhbXMpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cFxuICAgICAgICAgICAgICAgIC5nZXQoYXBpVXJsICsgdXJsLCB7IFwicGFyYW1zXCI6IHBhcmFtcywgXCJoZWFkZXJzXCI6IGRlZmF1bHRIZWFkZXIgfSlcbiAgICAgICAgICAgICAgICAudGhlbih1bndyYXBBbmd1bGFySHR0cCwgbG9nQXBpRXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcG9zdCh1cmwsIGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cFxuICAgICAgICAgICAgICAgIC5wb3N0KGFwaVVybCArIHVybCwgZGF0YSwgeyBcImhlYWRlcnNcIjogZGVmYXVsdEhlYWRlciB9KVxuICAgICAgICAgICAgICAgIC50aGVuKHVud3JhcEFuZ3VsYXJIdHRwLCBsb2dBcGlFcnJvcik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJnZXRcIjogZ2V0LFxuICAgICAgICAgICAgXCJwb3N0XCI6IHBvc3RcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBTZXJ2aWNlLiRpbmplY3QgPSBbXCIkaHR0cFwiLCBcIiRxXCJdO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIikuZmFjdG9yeShcImNnQXBpQ2FsbGVyXCIsIFNlcnZpY2UpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNy8xNi5cbiAqL1xuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIGlzRGVmaW5lZChvKSB7XG4gICAgICAgIHJldHVybiAhKHR5cGVvZiBvID09PSBcInVuZGVmaW5lZFwiIHx8IG8gPT09IG51bGwpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFByb3BlcnR5RnJvbU9iaihvYmopIHtcbiAgICAgICAgdmFyIGRlZk9iaiA9IGlzRGVmaW5lZChvYmopID8gb2JqIDoge307XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChwcm9wZXJ0eSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBpc0RlZmluZWQoZGVmYXVsdFZhbHVlKSA/IGRlZmF1bHRWYWx1ZSA6IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gaXNEZWZpbmVkKGRlZk9ialtwcm9wZXJ0eV0pXG4gICAgICAgICAgICAgICAgPyBkZWZPYmpbcHJvcGVydHldXG4gICAgICAgICAgICAgICAgOiB2YWx1ZTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBMb2NhdGlvbihvYmopIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHZhciBnZXRQcm9wZXJ0eSA9IGdldFByb3BlcnR5RnJvbU9iaihvYmopO1xuXG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkRm9ybWF0dGVkQWRkcmVzcygpIHtcbiAgICAgICAgICAgIHZhciBkZWZPYmogPSBpc0RlZmluZWQob2JqKSA/IG9iaiA6IHt9O1xuICAgICAgICAgICAgdmFyIGFkZHJlc3NMaW5lID0gKGlzRGVmaW5lZChkZWZPYmouYWRkcmVzc19saW5lKSA/IGRlZk9iai5hZGRyZXNzX2xpbmUgKyAgJyAnIDogJycpO1xuICAgICAgICAgICAgdmFyIGxvY2FsaXR5ID0gKGlzRGVmaW5lZChkZWZPYmoubG9jYWxpdHkpID8gZGVmT2JqLmxvY2FsaXR5ICsgJywgJyA6ICcnKTtcbiAgICAgICAgICAgIHZhciBjb3VudHJ5Q29kZSA9IChpc0RlZmluZWQoZGVmT2JqLmNvdW50cnlfY29kZSkgPyBkZWZPYmouY291bnRyeV9jb2RlICsgJyAnIDogJycpO1xuICAgICAgICAgICAgdmFyIHBvc3RhbENvZGUgPSAoaXNEZWZpbmVkKGRlZk9iai5wb3N0YWxfY29kZSkgPyBkZWZPYmoucG9zdGFsX2NvZGUgOiAnJyk7XG5cbiAgICAgICAgICAgIHJldHVybiAoYWRkcmVzc0xpbmUgKyBsb2NhbGl0eSArIGNvdW50cnlDb2RlICsgcG9zdGFsQ29kZSkudHJpbSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5pZCA9IGdldFByb3BlcnR5KFwiaWRcIik7XG4gICAgICAgIHNlbGYuYWRkcmVzc19saW5lID0gZ2V0UHJvcGVydHkoXCJhZGRyZXNzX2xpbmVcIik7XG4gICAgICAgIHNlbGYubG9jYWxpdHkgPSBnZXRQcm9wZXJ0eShcImxvY2FsaXR5XCIpO1xuICAgICAgICBzZWxmLmRpc3RyaWN0ID0gZ2V0UHJvcGVydHkoXCJkaXN0cmljdFwiKTtcbiAgICAgICAgc2VsZi5wb3N0YWxfY29kZSA9IGdldFByb3BlcnR5KFwicG9zdGFsX2NvZGVcIik7XG4gICAgICAgIHNlbGYuY291bnRyeSA9IGdldFByb3BlcnR5KFwiY291bnRyeVwiKTtcbiAgICAgICAgc2VsZi5jb3VudHJ5X2NvZGUgPSBnZXRQcm9wZXJ0eShcImNvdW50cnlfY29kZVwiKTtcbiAgICAgICAgc2VsZi5jb29yZGluYXRlcyA9IGdldFByb3BlcnR5KFwiY29vcmRpbmF0ZXNcIik7XG5cbiAgICAgICAgLy8gVE9ETzogQ29udmVydCB0aGlzIHRvIGEgbWV0aG9kIHRoYXQgYnVpbGRzIGJhc2VkIG9mZiBvZiB0aGUgY3VycmVudCBvYmplY3QncyBwcm9wZXJ0aWVzLlxuICAgICAgICAvLyBVbmxlc3MgdGhpcyBpcyBuZWVkZWQgZm9yIHRoZSBBUEkgc3BlY2lmaWNhbGx5LCB0aGVuIGhhdmUgdGhpcyBidWlsdCBpbiBhIHNpbWlsYXIgZnVuY3Rpb24gYXMgdGhlIG9uZSBpblxuICAgICAgICAvLyBFbnRpdHlNb2RlbCBmb3IgYnVpbGRpbmcgQVBJIHNwZWNpZmljIG9iamVjdHNcbiAgICAgICAgc2VsZi5mb3JtYXR0ZWRBZGRyZXNzID0gYnVpbGRGb3JtYXR0ZWRBZGRyZXNzKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gU2VydmljZSgpIHtcbiAgICAgICAgZnVuY3Rpb24gZ2V0TG9jYXRpb25Nb2RlbChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTG9jYXRpb24ob2JqKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcImdldExvY2F0aW9uTW9kZWxcIjogZ2V0TG9jYXRpb25Nb2RlbFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnY2l2aWMtZ3JhcGguYXBpJylcbiAgICAgICAgLmZhY3RvcnkoJ2xvY2F0aW9uU2VydmljZScsIFNlcnZpY2UpO1xuXG59KShhbmd1bGFyKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjcvMTYuXG4gKi9cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBpc0RlZmluZWQobykge1xuICAgICAgICByZXR1cm4gISh0eXBlb2YgbyA9PT0gXCJ1bmRlZmluZWRcIiB8fCBvID09PSBudWxsKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc09iamVjdChvKSB7XG4gICAgICAgIHJldHVybiBpc0RlZmluZWQobykgJiYgIUFycmF5LmlzQXJyYXkobykgJiYgKHR5cGVvZiBvID09PSBcIm9iamVjdFwiKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRQcm9wZXJ0eUZyb21PYmoob2JqKSB7XG4gICAgICAgIHZhciBkZWZPYmogPSBpc0RlZmluZWQob2JqKSA/IG9iaiA6IHt9O1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAocHJvcGVydHksIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gaXNEZWZpbmVkKGRlZmF1bHRWYWx1ZSkgPyBkZWZhdWx0VmFsdWUgOiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIGlzRGVmaW5lZChkZWZPYmpbcHJvcGVydHldKVxuICAgICAgICAgICAgICAgID8gZGVmT2JqW3Byb3BlcnR5XVxuICAgICAgICAgICAgICAgIDogdmFsdWU7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0RW50aXR5VHlwZXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcIkdvdmVybm1lbnRcIjogdHJ1ZSxcbiAgICAgICAgICAgIFwiRm9yLVByb2ZpdFwiOiB0cnVlLFxuICAgICAgICAgICAgXCJOb24tUHJvZml0XCI6IHRydWUsXG4gICAgICAgICAgICBcIkluZGl2aWR1YWxcIjogdHJ1ZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEluZmx1ZW5jZVR5cGVzKCkge1xuICAgICAgICByZXR1cm4gW1wiTG9jYWxcIiwgXCJOYXRpb25hbFwiLCBcIkdsb2JhbFwiXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb29wQW5kSW5pdChtb2RlbEFycmF5LCBpbml0TW9kZWxGdW5jdGlvbikge1xuICAgICAgICB2YXIgbmV3QXJyYXkgPSBBcnJheS5pc0FycmF5KG1vZGVsQXJyYXkpXG4gICAgICAgICAgICA/IG1vZGVsQXJyYXkuZmlsdGVyKGlzT2JqZWN0KS5tYXAoaW5pdE1vZGVsRnVuY3Rpb24pXG4gICAgICAgICAgICA6IFtdO1xuXG4gICAgICAgIHJldHVybiBuZXdBcnJheS5jb25jYXQoW2luaXRNb2RlbEZ1bmN0aW9uKCldKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBFbnRpdHkob2JqLCBmdW5Db25uU2VydmljZSwgY29ublNlcnZpY2UsIGZpbmFuY2VTZXJ2aWNlLCBsb2NhdGlvblNlcnZpY2UsIGNhdGVnb3J5U2VydmljZSkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBkZWZPYmogPSBpc0RlZmluZWQob2JqKSA/IG9iaiA6IHt9O1xuICAgICAgICB2YXIgZ2V0UHJvcGVydHkgPSBnZXRQcm9wZXJ0eUZyb21PYmoob2JqKTtcblxuICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZURCTW9kZWwoKSB7XG4gICAgICAgICAgICB2YXIgZGJNb2RlbCA9IG5ldyBFbnRpdHkoc2VsZik7XG4gICAgICAgICAgICBkYk1vZGVsLmxvY2F0aW9ucy5wb3AoKTtcbiAgICAgICAgICAgIGRiTW9kZWwubG9jYXRpb25zLnBvcCgpO1xuICAgICAgICAgICAgZGJNb2RlbC5ncmFudHNfcmVjZWl2ZWQucG9wKCk7XG4gICAgICAgICAgICBkYk1vZGVsLmdyYW50c19yZWNlaXZlZC5wb3AoKTtcbiAgICAgICAgICAgIGRiTW9kZWwuZ3JhbnRzX2dpdmVuLnBvcCgpO1xuICAgICAgICAgICAgZGJNb2RlbC5ncmFudHNfZ2l2ZW4ucG9wKCk7XG4gICAgICAgICAgICBkYk1vZGVsLmludmVzdG1lbnRzX3JlY2VpdmVkLnBvcCgpO1xuICAgICAgICAgICAgZGJNb2RlbC5pbnZlc3RtZW50c19yZWNlaXZlZC5wb3AoKTtcbiAgICAgICAgICAgIGRiTW9kZWwuaW52ZXN0bWVudHNfbWFkZS5wb3AoKTtcbiAgICAgICAgICAgIGRiTW9kZWwuaW52ZXN0bWVudHNfbWFkZS5wb3AoKTtcbiAgICAgICAgICAgIGRiTW9kZWwuZGF0YV9naXZlbi5wb3AoKTtcbiAgICAgICAgICAgIGRiTW9kZWwuZGF0YV9naXZlbi5wb3AoKTtcbiAgICAgICAgICAgIGRiTW9kZWwuZGF0YV9yZWNlaXZlZC5wb3AoKTtcbiAgICAgICAgICAgIGRiTW9kZWwuZGF0YV9yZWNlaXZlZC5wb3AoKTtcbiAgICAgICAgICAgIGRiTW9kZWwuY29sbGFib3JhdGlvbnMucG9wKCk7XG4gICAgICAgICAgICBkYk1vZGVsLmNvbGxhYm9yYXRpb25zLnBvcCgpO1xuICAgICAgICAgICAgZGJNb2RlbC5rZXlfcGVvcGxlLnBvcCgpO1xuICAgICAgICAgICAgZGJNb2RlbC5rZXlfcGVvcGxlLnBvcCgpO1xuICAgICAgICAgICAgZGJNb2RlbC5lbXBsb3ltZW50cy5wb3AoKTtcbiAgICAgICAgICAgIGRiTW9kZWwuZW1wbG95bWVudHMucG9wKCk7XG4gICAgICAgICAgICBkYk1vZGVsLnJldmVudWVzLnBvcCgpO1xuICAgICAgICAgICAgZGJNb2RlbC5yZXZlbnVlcy5wb3AoKTtcbiAgICAgICAgICAgIGRiTW9kZWwuZXhwZW5zZXMucG9wKCk7XG4gICAgICAgICAgICBkYk1vZGVsLmV4cGVuc2VzLnBvcCgpO1xuICAgICAgICAgICAgZGJNb2RlbC5jYXRlZ29yaWVzLnBvcCgpO1xuICAgICAgICAgICAgZGJNb2RlbC5jYXRlZ29yaWVzLnBvcCgpO1xuICAgICAgICAgICAgZGJNb2RlbC5kZXNjcmlwdGlvbiA9ICcnO1xuXG4gICAgICAgICAgICByZXR1cm4gZGJNb2RlbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYuaWQgPSBnZXRQcm9wZXJ0eShcImlkXCIpO1xuICAgICAgICBzZWxmLm5hbWUgPSBnZXRQcm9wZXJ0eShcIm5hbWVcIik7XG4gICAgICAgIHNlbGYuaW5mbHVlbmNlID0gZ2V0UHJvcGVydHkoXCJpbmZsdWVuY2VcIik7XG4gICAgICAgIHNlbGYudHlwZSA9IGdldFByb3BlcnR5KFwidHlwZVwiKTtcbiAgICAgICAgc2VsZi5uaWNrbmFtZSA9IGdldFByb3BlcnR5KFwibmlja25hbWVcIik7XG4gICAgICAgIHNlbGYudXJsID0gZ2V0UHJvcGVydHkoXCJ1cmxcIik7XG4gICAgICAgIHNlbGYudHdpdHRlcl9oYW5kbGUgPSBnZXRQcm9wZXJ0eShcInR3aXR0ZXJfaGFuZGxlXCIpO1xuICAgICAgICBzZWxmLmVtcGxveWVlcyA9IGdldFByb3BlcnR5KFwiZW1wbG95ZWVzXCIpO1xuXG4gICAgICAgIHNlbGYubG9jYXRpb25zID0gbG9vcEFuZEluaXQoZGVmT2JqLmxvY2F0aW9ucywgbG9jYXRpb25TZXJ2aWNlLmdldExvY2F0aW9uTW9kZWwpO1xuICAgICAgICBzZWxmLmdyYW50c19yZWNlaXZlZCA9IGxvb3BBbmRJbml0KGRlZk9iai5ncmFudHNfcmVjZWl2ZWQsIGZ1bkNvbm5TZXJ2aWNlLmdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICBzZWxmLmludmVzdG1lbnRzX3JlY2VpdmVkID0gbG9vcEFuZEluaXQoZGVmT2JqLmludmVzdG1lbnRzX3JlY2VpdmVkLCBmdW5Db25uU2VydmljZS5nZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgc2VsZi5ncmFudHNfZ2l2ZW4gPSBsb29wQW5kSW5pdChkZWZPYmouZ3JhbnRzX2dpdmVuLCBmdW5Db25uU2VydmljZS5nZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgc2VsZi5pbnZlc3RtZW50c19tYWRlID0gbG9vcEFuZEluaXQoZGVmT2JqLmludmVzdG1lbnRzX21hZGUsIGZ1bkNvbm5TZXJ2aWNlLmdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICBzZWxmLmRhdGFfZ2l2ZW4gPSBsb29wQW5kSW5pdChkZWZPYmouZGF0YV9naXZlbiwgY29ublNlcnZpY2UuZ2V0Q29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgc2VsZi5kYXRhX3JlY2VpdmVkID0gbG9vcEFuZEluaXQoZGVmT2JqLmRhdGFfcmVjZWl2ZWQsIGNvbm5TZXJ2aWNlLmdldENvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgIHNlbGYuY29sbGFib3JhdGlvbnMgPSBsb29wQW5kSW5pdChkZWZPYmouY29sbGFib3JhdGlvbnMsIGNvbm5TZXJ2aWNlLmdldENvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgIHNlbGYua2V5X3Blb3BsZSA9IGxvb3BBbmRJbml0KGRlZk9iai5rZXlfcGVvcGxlLCBjb25uU2VydmljZS5nZXRDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICBzZWxmLmVtcGxveW1lbnRzID0gbG9vcEFuZEluaXQoZGVmT2JqLmVtcGxveW1lbnRzLCBjb25uU2VydmljZS5nZXRDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICBzZWxmLnJldmVudWVzID0gbG9vcEFuZEluaXQoZGVmT2JqLnJldmVudWVzLCBmaW5hbmNlU2VydmljZS5nZXRGaW5hbmNlTW9kZWwpO1xuICAgICAgICBzZWxmLmV4cGVuc2VzID0gbG9vcEFuZEluaXQoZGVmT2JqLmV4cGVuc2VzLCBmaW5hbmNlU2VydmljZS5nZXRGaW5hbmNlTW9kZWwpO1xuICAgICAgICBzZWxmLmNhdGVnb3JpZXMgPSBsb29wQW5kSW5pdChkZWZPYmouY2F0ZWdvcmllcywgY2F0ZWdvcnlTZXJ2aWNlLmdldENhdGVnb3J5TW9kZWwpO1xuXG4gICAgICAgIHNlbGYuZ2VuZXJhdGVEQk1vZGVsID0gZ2VuZXJhdGVEQk1vZGVsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFNlcnZpY2UoYXBpQ2FsbGVyLCBmdW5Db25uU2VydmljZSwgY29ublNlcnZpY2UsIGZpbmFuY2VTZXJ2aWNlLCBsb2NhdGlvblNlcnZpY2UsIGNhdGVnb3J5U2VydmljZSkge1xuICAgICAgICBmdW5jdGlvbiBnZXRFbnRpdHlNb2RlbChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRW50aXR5KG9iaiwgZnVuQ29ublNlcnZpY2UsIGNvbm5TZXJ2aWNlLCBmaW5hbmNlU2VydmljZSwgbG9jYXRpb25TZXJ2aWNlLCBjYXRlZ29yeVNlcnZpY2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0QWxsKCkge1xuICAgICAgICAgICAgcmV0dXJuIGFwaUNhbGxlci5nZXQoJy9lbnRpdGllcycpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2F2ZUVudGl0eShlbnRpdHkpIHtcbiAgICAgICAgICAgIHJldHVybiBhcGlDYWxsZXIucG9zdChcIi9zYXZlXCIsIHsgXCJlbnRpdHlcIjogZW50aXR5IH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiZ2V0RW50aXR5TW9kZWxcIjogZ2V0RW50aXR5TW9kZWwsXG4gICAgICAgICAgICBcImdldEVudGl0eVR5cGVzXCI6IGdldEVudGl0eVR5cGVzLFxuICAgICAgICAgICAgXCJnZXRJbmZsdWVuY2VUeXBlc1wiOiBnZXRJbmZsdWVuY2VUeXBlcyxcbiAgICAgICAgICAgIFwiZ2V0QWxsXCI6IGdldEFsbCxcbiAgICAgICAgICAgIFwic2F2ZUVudGl0eVwiOiBzYXZlRW50aXR5XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgU2VydmljZS4kaW5qZWN0ID0gW1xuICAgICAgICBcImNnQXBpQ2FsbGVyXCIsXG4gICAgICAgIFwiZnVuZGluZ0Nvbm5lY3Rpb25TZXJ2aWNlXCIsXG4gICAgICAgIFwiY29ubmVjdGlvblNlcnZpY2VcIixcbiAgICAgICAgXCJmaW5hbmNlU2VydmljZVwiLFxuICAgICAgICBcImxvY2F0aW9uU2VydmljZVwiLFxuICAgICAgICBcImNhdGVnb3J5U2VydmljZVwiXG4gICAgXTtcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKVxuICAgICAgICAuZmFjdG9yeShcImVudGl0eVNlcnZpY2VcIiwgU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA3LzEwLzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGNvbnRyb2xEZXBzID0gW1xuICAgICAgICAnZW50aXR5U2VydmljZScsXG4gICAgICAgICdjb25uZWN0aW9uU2VydmljZScsXG4gICAgICAgICckcm9vdFNjb3BlJyxcbiAgICAgICAgJ18nLFxuICAgICAgICAnJG1vZGFsJyxcbiAgICAgICAgY29udHJvbEN0cmxcbiAgICBdO1xuXG4gICAgZnVuY3Rpb24gY29udHJvbEN0cmwoZW50aXR5U2VydmljZSwgY29ubmVjdGlvblNlcnZpY2UsICRyb290U2NvcGUsIF8sICRtb2RhbCkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2bS5lbnRpdHlUeXBlcyA9IGVudGl0eVNlcnZpY2UuZ2V0RW50aXR5VHlwZXMoKTtcbiAgICAgICAgdm0uY29ubmVjdGlvblR5cGVzID0gY29ubmVjdGlvblNlcnZpY2UuZ2V0Q29ubmVjdGlvblR5cGVzKCk7XG4gICAgICAgIHZtLnNpemVCeUxpc3QgPSBbXG4gICAgICAgICAgICB7J25hbWUnOiAnRW1wbG95ZWVzJywgJ3ZhbHVlJzogJ2VtcGxveWVlcyd9LFxuICAgICAgICAgICAgeyduYW1lJzogJ1R3aXR0ZXIgRm9sbG93ZXJzJywgJ3ZhbHVlJzogJ2ZvbGxvd2Vycyd9XG4gICAgICAgIF07XG4gICAgICAgIHZtLnNpemVCeSA9ICdlbXBsb3llZXMnO1xuICAgICAgICB2bS5zaG93VmlldyA9IHtcbiAgICAgICAgICAgICdOZXR3b3JrJzogdHJ1ZSxcbiAgICAgICAgICAgICdNYXAnOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICB2bS5zd2l0Y2hWaWV3ID0gc3dpdGNoVmlldztcbiAgICAgICAgdm0uY2hhbmdlVmlldyA9IGZ1bmN0aW9uICh2aWV3KSB7XG4gICAgICAgICAgICBfLmZvckVhY2goXy5rZXlzKHZtLnNob3dWaWV3KSwgZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgICAgICB2bS5zaG93Vmlld1tuYW1lXSA9IHZpZXcgPT09IG5hbWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgndmlld0NoYW5nZScsIHZtLnNob3dWaWV3KTtcbiAgICAgICAgfTtcbiAgICAgICAgdm0uc2hvd0Fib3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJG1vZGFsLm9wZW4oe1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb250cm9sL2Fib3V0Lmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdtb2RhbEN0cmwnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdm0udG9nZ2xlTm9kZSA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3RvZ2dsZU5vZGUnLCB7J25hbWUnOiB0eXBlLCAnZW5hYmxlZCc6IHZtLmVudGl0eVR5cGVzW3R5cGVdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdm0udG9nZ2xlTGluayA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3RvZ2dsZUxpbmsnLCB7J25hbWUnOiB0eXBlLCAnZW5hYmxlZCc6IHZtLmNvbm5lY3Rpb25UeXBlc1t0eXBlXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHZtLmNoYW5nZVNpemVCeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnY2hhbmdlU2l6ZUJ5Jywgdm0uc2l6ZUJ5KTtcbiAgICAgICAgfTtcbiAgICAgICAgZnVuY3Rpb24gc3dpdGNoVmlldygpIHtcbiAgICAgICAgICAgIHZtLmNoYW5nZVZpZXcoIXZtLnRvZ2dsZU5ldHdvcmsgPyAnTWFwJyA6ICdOZXR3b3JrJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2bS5jaGFuZ2VTaXplQnkoKTtcblxuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdjb250cm9sQ3RybCcsIGNvbnRyb2xEZXBzKTtcblxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIGRldGFpbHNDdHJsKCRzY29wZSwgXykge1xuICAgICAgICAkc2NvcGUuaXRlbXNTaG93bkRlZmF1bHQgPSB7XG4gICAgICAgICAgICAna2V5X3Blb3BsZSc6IDMsXG4gICAgICAgICAgICAnZ3JhbnRzX2dpdmVuJzogMyxcbiAgICAgICAgICAgICdncmFudHNfcmVjZWl2ZWQnOiAzLFxuICAgICAgICAgICAgJ2ludmVzdG1lbnRzX21hZGUnOiAzLFxuICAgICAgICAgICAgJ2ludmVzdG1lbnRzX3JlY2VpdmVkJzogMyxcbiAgICAgICAgICAgICdjb2xsYWJvcmF0aW9ucyc6IDMsXG4gICAgICAgICAgICAnZW1wbG95bWVudHMnOiAzLFxuICAgICAgICAgICAgJ3JlbGF0aW9ucyc6IDMsXG4gICAgICAgICAgICAnZGF0YV9naXZlbic6IDMsXG4gICAgICAgICAgICAnZGF0YV9yZWNlaXZlZCc6IDMsXG4gICAgICAgICAgICAncmV2ZW51ZXMnOiAzLFxuICAgICAgICAgICAgJ2V4cGVuc2VzJzogM1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5pdGVtc1Nob3duID0gXy5jbG9uZSgkc2NvcGUuaXRlbXNTaG93bkRlZmF1bHQpO1xuXG4gICAgICAgICRzY29wZS4kb24oJ2VudGl0eUNoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIFJlc2V0IGl0ZW1zIHNob3duIGluIGRldGFpbHMgbGlzdC5cbiAgICAgICAgICAgICRzY29wZS5pdGVtc1Nob3duID0gXy5jbG9uZSgkc2NvcGUuaXRlbXNTaG93bkRlZmF1bHQpO1xuICAgICAgICB9KTtcbiAgICAgICAgJHNjb3BlLnNob3dNb3JlID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICRzY29wZS5pdGVtc1Nob3duW3R5cGVdID0gJHNjb3BlLmN1cnJlbnRFbnRpdHlbdHlwZV0ubGVuZ3RoO1xuICAgICAgICB9O1xuICAgICAgICAkc2NvcGUuc2hvd0xlc3MgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgJHNjb3BlLml0ZW1zU2hvd25bdHlwZV0gPSAkc2NvcGUuaXRlbXNTaG93bkRlZmF1bHRbdHlwZV07XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ2RldGFpbHNDdHJsJywgWyckc2NvcGUnLCBcIl9cIiwgZGV0YWlsc0N0cmxdKTtcbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyLCBkMywgTCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBkZXBlbmRlbmNpZXMgPSBbXG4gICAgICAgICckc2NvcGUnLFxuICAgICAgICAnJHRpbWVvdXQnLFxuICAgICAgICAnbGVhZmxldERhdGEnLFxuICAgICAgICAnXycsXG4gICAgICAgICckZmlsdGVyJyxcbiAgICAgICAgbWFwQ3RybFxuICAgIF07XG5cbiAgICBmdW5jdGlvbiBtYXBDdHJsKCRzY29wZSwgJHRpbWVvdXQsIGxlYWZsZXREYXRhLCBfLCAkZmlsdGVyKSB7XG5cbiAgICAgICAgJHNjb3BlLm9wdGlvbnMgPSB7XG4gICAgICAgICAgICBjZW50ZXIgIDoge1xuICAgICAgICAgICAgICAgIGxhdCA6IDIwLjAwLFxuICAgICAgICAgICAgICAgIGxuZyA6IC00MC4wMCxcbiAgICAgICAgICAgICAgICB6b29tOiAzXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgICAgICB0aWxlTGF5ZXIgICAgICAgICA6ICdodHRwczovL2FwaS50aWxlcy5tYXBib3guY29tL3Y0L21hcGJveC5saWdodC97en0ve3h9L3t5fS5wbmc/YWNjZXNzX3Rva2VuPXBrLmV5SjFJam9pWkdGMmFXUnNjbTUwSWl3aVlTSTZJakEwTTJSa056TXpaV0ptTnpFek5HWXpNVGRoWVRFeFl6QXlabVU0WlRFMUluMC5UTllsRnRhMlZJdHJrbjRMMFo5QkpRJyxcbiAgICAgICAgICAgICAgICB0aWxlTGF5ZXJPcHRpb25zICA6IHtcbiAgICAgICAgICAgICAgICAgICAgZGV0ZWN0UmV0aW5hOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICByZXVzZVRpbGVzICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB6b29tQ29udHJvbCAgICAgICA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGF0dHJpYnV0aW9uQ29udHJvbDogZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY3JlYXRlUGllQ2hhcnQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhICAgPSBvcHRpb25zLmRhdGE7XG4gICAgICAgICAgICAgICAgdmFyIHBpZSAgICA9IGQzLmxheW91dC5waWUoKS5zb3J0KG51bGwpLnZhbHVlKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnZhbHVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZhciBhcmMgICAgPSBkMy5zdmcuYXJjKCkub3V0ZXJSYWRpdXMob3B0aW9ucy5yKS5pbm5lclJhZGl1cyhvcHRpb25zLnIgLSAxMCk7XG4gICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IG9wdGlvbnMuciArIG9wdGlvbnMuc3Ryb2tlV2lkdGg7XG4gICAgICAgICAgICAgICAgdmFyIHcgICAgICA9IGNlbnRlciAqIDI7XG4gICAgICAgICAgICAgICAgdmFyIGggICAgICA9IHc7XG4gICAgICAgICAgICAgICAgdmFyIHN2ZyAgICA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhkMy5ucy5wcmVmaXguc3ZnLCAnc3ZnJyk7XG4gICAgICAgICAgICAgICAgdmFyIHZpcyAgICA9IGQzLnNlbGVjdChzdmcpXG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKGRhdGEpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdwaWVjaGFydCcpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHcpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBoKTtcblxuICAgICAgICAgICAgICAgIHZhciBhcmNzID0gdmlzLnNlbGVjdEFsbCgnLmFyYycpXG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKHBpZShkYXRhKSlcbiAgICAgICAgICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKCdnJylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2FyYycpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBjZW50ZXIgKyAnLCcgKyBjZW50ZXIgKyAnKScpO1xuXG4gICAgICAgICAgICAgICAgLy8gdmFyIG1hcCA9IEwubWFwYm94Lm1hcCgnbWFwJywgJ2V4YW1wbGVzLm1hcC05aWp1azI0eScsIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgbWluWm9vbTogMSxcbiAgICAgICAgICAgICAgICAvLyAgICAgbWF4Wm9vbTogMlxuICAgICAgICAgICAgICAgIC8vIH0pLnNldFZpZXcoWzQwLCAtNzQuNTBdLCA5KTtcblxuICAgICAgICAgICAgICAgIGFyY3MuYXBwZW5kKCdwYXRoJylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCBhcmMpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5kYXRhLnR5cGUgKyAnLWFyYyc7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgYXJjcy5hcHBlbmQoXCJzdmc6dGV4dFwiKVxuICAgICAgICAgICAgICAgICAgICAudGV4dChmdW5jdGlvbiAoZCwgaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5jb3VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIC00ICogb3B0aW9ucy5jb3VudC50b1N0cmluZygpLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJkeVwiLCA1KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiYXJjVGV4dFwiKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB3aW5kb3cuWE1MU2VyaWFsaXplciA/IChuZXcgd2luZG93LlhNTFNlcmlhbGl6ZXIoKSkuc2VyaWFsaXplVG9TdHJpbmcoc3ZnKVxuICAgICAgICAgICAgICAgICAgICA6IHN2Zy54bWwgPyBzdmcueG1sIDogJyc7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBsZWFmbGV0RGF0YS5nZXRNYXAoKS50aGVuKGZ1bmN0aW9uIChtYXApIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWRFbnRpdGllcyA9ICRzY29wZS5lbnRpdGllcztcblxuICAgICAgICAgICAgICAgIG1hcC5pbnZhbGlkYXRlU2l6ZSgpO1xuXG4gICAgICAgICAgICAgICAgbmV3IEwuQ29udHJvbC5ab29tKHtwb3NpdGlvbjogJ3RvcHJpZ2h0J30pLmFkZFRvKG1hcCk7XG4gICAgICAgICAgICAgICAgTC5jb250cm9sLmxvY2F0ZShcbiAgICAgICAgICAgICAgICAgICAge3Bvc2l0aW9uOiAndG9wcmlnaHQnLCBzaG93UG9wdXA6IGZhbHNlLCBpY29uOiAnZmEgZmEtbG9jYXRpb24tYXJyb3cnfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRvKG1hcCk7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjbHVzdGVySWNvbihjbHVzdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZHJlbiAgICAgICA9IGNsdXN0ZXIuZ2V0QWxsQ2hpbGRNYXJrZXJzKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b3RhbCAgICAgICAgICA9IGNoaWxkcmVuLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNsdXN0ZXJNYXJrZXJzID0gXy5wbHVjayhjaGlsZHJlbiwgJ29wdGlvbnMnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50cyAgICAgICAgID0gXy5tYXAoXy5jb3VudEJ5KGNsdXN0ZXJNYXJrZXJzLCAndHlwZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoY291bnQsIHR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7J3R5cGUnOiB0eXBlLCAndmFsdWUnOiBjb3VudH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgciAgICAgICAgICAgICAgPSAyODtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0cm9rZVdpZHRoICAgID0gMTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGljb25EaW0gICAgICAgID0gKHIgKyBzdHJva2VXaWR0aCkgKiAyO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaHRtbCAgICAgICAgICAgPSBjcmVhdGVQaWVDaGFydChcbiAgICAgICAgICAgICAgICAgICAgICAgIHtkYXRhOiBjb3VudHMsIHI6IHIsIHN0cm9rZVdpZHRoOiBzdHJva2VXaWR0aCwgY291bnQ6IHRvdGFsfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTC5EaXZJY29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgICAgIDogaHRtbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ21hcmtlci1jbHVzdGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb25TaXplIDogbmV3IEwucG9pbnQoaWNvbkRpbSwgaWNvbkRpbSlcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBtYXJrZXJJY29uICA9IHtcbiAgICAgICAgICAgICAgICAgICAgJ05vbi1Qcm9maXQnOiBMLmljb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblVybCA6ICdpbWcvbWFya2VyLW5vbnByb2Yuc3ZnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TaXplOiBbNjAsIDYwXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgJ0Zvci1Qcm9maXQnOiBMLmljb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblVybCA6ICdpbWcvbWFya2VyLXByb2Yuc3ZnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TaXplOiBbNjAsIDYwXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgJ0luZGl2aWR1YWwnOiBMLmljb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblVybCA6ICdpbWcvbWFya2VyLWluZC5zdmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblNpemU6IFs2MCwgNjBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAnR292ZXJubWVudCc6IEwuaWNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uVXJsIDogJ2ltZy9tYXJrZXItZ292LnN2ZycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZTogWzYwLCA2MF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgdmFyIG1hcmtlcnMgPSBMLm1hcmtlckNsdXN0ZXJHcm91cCh7XG5cbiAgICAgICAgICAgICAgICAgICAgc3BpZGVyZnlPbk1heFpvb206IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHNob3dDb3ZlcmFnZU9uSG92ZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpY29uQ3JlYXRlRnVuY3Rpb246IGNsdXN0ZXJJY29uLFxuICAgICAgICAgICAgICAgICAgICBtYXhDbHVzdGVyUmFkaXVzOiAzMCxcbiAgICAgICAgICAgICAgICAgICAgc3BpZGVyZnlEaXN0YW5jZU11bHRpcGxpZXI6IDEuM1xuICAgICAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBvdXRlckxvb3AoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGlubmVyTG9vcChsb2MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghXy5ldmVyeShsb2MuY29vcmRpbmF0ZXMpKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jLmNvb3JkaW5hdGVzWzBdLnRvRml4ZWQoNSkgPT09ICc0MC43ODIwMCcgJiYgbG9jLmNvb3JkaW5hdGVzWzFdLnRvRml4ZWQoNSkgPT09ICctNzMuODMxNzAnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jLmNvb3JkaW5hdGVzWzBdID0gNDAuNzcwNjU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jLmNvb3JkaW5hdGVzWzFdID0gLTczLjk3NDA2O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSBMLm1hcmtlcihsb2MuY29vcmRpbmF0ZXMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBtYXJrZXJJY29uW2VudGl0eS50eXBlXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGl0bGUnOiBlbnRpdHkubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZW50aXR5X2lkJzogZW50aXR5LmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtZXNzYWdlJzogZW50aXR5Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiBlbnRpdHkudHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzLmFkZExheWVyKG0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgXy5mb3JFYWNoKGVudGl0eS5sb2NhdGlvbnMsIGlubmVyTG9vcCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJPcmlnaW5hbDogJU9cIiwgJHNjb3BlLmVudGl0aWVzKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZpbHRlcmVkOiAlT1wiLCBmaWx0ZXJlZEVudGl0aWVzKTtcblxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChmaWx0ZXJlZEVudGl0aWVzLCBvdXRlckxvb3ApO1xuICAgICAgICAgICAgICAgIG1hcC5hZGRMYXllcihtYXJrZXJzKTtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9uTG9jYXRpb25FcnJvcihsZWFmbGV0RXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihsZWFmbGV0RXJyb3IubWVzc2FnZSArIFwiICAlT1wiLCBsZWFmbGV0RXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG1hcC5vbignbG9jYXRpb25lcnJvcicsIG9uTG9jYXRpb25FcnJvcik7XG4gICAgICAgICAgICAgICAgLy8gbWFwLmxvY2F0ZSh7c2V0VmlldzogdHJ1ZSwgbWF4Wm9vbTogMTF9KTtcbiAgICAgICAgICAgICAgICBtYXJrZXJzLm9uKCdjbGljaycsIGZ1bmN0aW9uIChtYXJrZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNldEVudGl0eUlEKG1hcmtlci5sYXllci5vcHRpb25zLmVudGl0eV9pZCk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9ICRzY29wZS5jdXJyZW50RW50aXR5O1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbnRlcmFjdGVkICAgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnNldHRpbmdzRW5hYmxlZCAmJiAkc2NvcGUubW9iaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudG9nZ2xlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBtYXAub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbnRlcmFjdGVkICAgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLiRvbignc2VsZWN0SXRlbScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gJHNjb3BlLmN1cnJlbnRFbnRpdHkubG9jYXRpb25zLmxlbmd0aCA+IDAgPyBfLnBsdWNrKFxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRFbnRpdHkubG9jYXRpb25zLCAnY29vcmRpbmF0ZXMnKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb29yZGluYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXAuc2V0Vmlldyhjb29yZGluYXRlc1swXSwgMTEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcblxuICAgICAgICAuY29udHJvbGxlcignbWFwQ3RybCcsIGRlcGVuZGVuY2llcyk7XG59KShhbmd1bGFyLCBkMywgTCk7XG4iXX0=
