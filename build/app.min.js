!function(i){"use strict";var a=["ui.bootstrap","leaflet-directive","ngAnimate","templateCache","civic-graph.api"];i.module("civic-graph.api",[]),i.module("civic-graph",a)}(angular);
!function(t){"use strict";function a(){return{templateUrl:"js/analytic/analytics.html",restrict:"E",scope:{},controller:"analyticsCtrl"}}var c=[a];t.module("civic-graph").directive("analytics",c)}(angular);
!function(t){"use strict";function e(){return{templateUrl:"js/edit-entity/edit.html",restrict:"E",scope:{entity:"=",entities:"=",isOpen:"="},controller:"editCtrl"}}var i=[e];t.module("civic-graph").directive("editEntity",i)}(angular);
!function(i,t){"use strict";function s(i){function s(){var i=t(this);i.css("height","55vh")}function c(){var i=t(this);window.innerHeight/3>parseInt(i.css("height"))?i.css("height","55vh"):i.css("height","30vh")}var e;i.mobile&&(e=t("#details-panel"),e.css("height","30vh"),e.scrollTop(0),e.scroll(s),e.click(c))}function c(){return{restrict:"A",link:s}}i.module("civic-graph").directive("addMobileEvents",[c])}(angular,$);
!function(o){"use strict";function c(o,c){o.closeWindow=function(){c.close()}}o.module("civic-graph").controller("modalCtrl",["$scope","$modalInstance",c])}(angular);
!function(o){"use strict";function r(){return{templateUrl:"js/control/controls.html",restrict:"E",scope:{toggleNetwork:"="},controller:"controlCtrl",controllerAs:"control",bindToController:{minConnections:"="}}}var t=[r];o.module("civic-graph").directive("control",t)}(angular);
!function(i){"use strict";var a=[];i.module("civic-graph").directive("map",a)}(angular);
!function(o){"use strict";o.module("civic-graph").constant("_",window._).constant("config",{apiHost:"https://api.civicgraph.io/"}).config(["$locationProvider","$compileProvider",function(o,i){o.html5Mode(!0),i.debugInfoEnabled(!0)}]).filter("thousandSuffix",function(){return function(o,i){var n,t=["k","M","G","T","P","E"];return window.isNaN(o)?null:o<1e3?o:(n=Math.floor(Math.log(o)/Math.log(1e3)),(o/Math.pow(1e3,n)).toFixed(i)+t[n-1])}})}(angular);
!function(t){"use strict";function i(t,i,e,n){t.entities=[],t.searchItems=null,t.categories=[],t.currentLocation=null,t.clickedLocation={},t.clickedLocation.location=null,t.clickedEntity={},t.clickedEntity.entity=null,t.editing=!1,t.actions={interacted:!1},t.showsearchMB=!1,t.showAnalytics=!1,t.entityTypes=e.getEntityTypes(),t.connectionTypes=n.getConnectionTypes(),t.status={isNetworkShown:!0,license:!0,networkLoading:!0},t.toggleAnalytics=function(){t.showAnalytics=!t.showAnalytics},this.minConnections=t.minConnections=2;var o=this;t.$watch("minConnections",function(){t.$broadcast("triggerNetworkDraw")}),t.connectionChange=function(){console.log(o.minConnections),t.minConnections=o.minConnections,t.$broadcast("triggerNetworkDraw")},t.hydePartials=function(i){"search"===i?(t.editing=!1,t.settingsEnabled=!1):"settings"===i?(t.editing=!1,t.showsearchMB=!1):"edit"===i?(t.settingsEnabled=!1,t.showsearchMB=!1):(t.editing=!1,t.settingsEnabled=!1,t.showsearchMB=!1)},t.showSearch=function(){t.hydePartials("search"),t.showsearchMB=!t.showsearchMB,t.status.license=!1},t.toggleSettings=function(){t.hydePartials("settings"),t.settingsEnabled=!t.settingsEnabled},t.startEdit=function(i){t.currentEntity=i,t.mobile&&t.hydePartials("edit"),t.editing=!0},t.switchView=function(){t.status.isNetworkShown=!t.status.isNetworkShown,t.status.isNetworkShown&&t.$broadcast("triggerNetworkDraw")},window.mobilecheck=function(){var t=!1,i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,e=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i;return function(n){(i.test(n)||e.test(n.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},t.mobile=window.mobilecheck(),t.settingsEnabled=!t.mobile,setTimeout(function(){e.getAll().then(function(e){console.log(e),t.entities=e.nodes;var n=i.uniq(i.pluck(i.flatten(i.pluck(t.entities,"locations")),"locality")),o=i.map(n,function(e){var n=i.filter(t.entities,i.flow(i.property("locations"),i.partialRight(i.any,{locality:e})));return{name:e,type:"location",entities:n,dict:i.zipObject(i.pluck(n,"name"),i.pluck(n,"index"))}});t.searchItems=o.concat(t.entities),t.overviewUrl="js/overview/overview.html",t.$broadcast("triggerNetworkDraw")})},100),t.overviewUrl=null,t.setEntity=function(i){t.currentLocation=null,t.currentEntity=i,t.editing&&t.stopEdit(),t.$broadcast("entityChange")},t.setEntityID=function(e){t.setEntity(i.find(t.entities,{id:e}))},t.setLocation=function(i){t.currentLocation=i,t.editing&&t.stopEdit(),t.$broadcast("itemChange")},t.selectItem=function(i){"location"===i.type?t.setLocation(i):t[i%1===0?"setEntityID":"setEntity"](i),t.$broadcast("selectItem",i)},t.$on("setCurrentEntity",function(i,e){t.currentEntity=e.value}),t.$on("setCurrentLocation",function(i,e){t.currentLocation=e.value}),t.setEntities=function(i){t.entities=i},t.stopEdit=function(){t.editing=!1},t.$on("editEntitySuccess",function(i){t.setEntities(i.nodes),t.$broadcast("triggerNetworkDraw")}),t.animationsEnabled=!0}var e=["$scope","_","entityService","connectionService",i];t.module("civic-graph").controller("homeCtrl",e)}(angular);
!function(r){"use strict";function t(){return{restrict:"E",templateUrl:"js/network/network.html",controller:"networkCtrl"}}var e=[t];r.module("civic-graph").directive("network",e)}(angular);
!function(e){"use strict";e.module("civic-graph").directive("input",function(){return{restict:"E",require:"?ngModel",link:function(e,r,t,i){"type"in t&&"range"===t.type.toLowerCase()&&i.$parsers.push(parseFloat)}}})}(angular);
!function(e){"use strict";function t(e,t){e.categorizedEntities={},t.forEach(t.keys(e.entityTypes),function(i){e.categorizedEntities[i]=t.filter(e.entities,{type:i})})}e.module("civic-graph").controller("overviewCtrl",["$scope","_",t])}(angular);
!function(c){"use strict";function n(c){}c.module("civic-graph").controller("analyticsCtrl",["$scope",n])}(angular);
!function(e){"use strict";function n(e,n){e.itemsShownDefault={key_people:3,grants_given:3,grants_received:3,investments_made:3,investments_received:3,collaborations:3,employments:3,relations:3,data_given:3,data_received:3,revenues:3,expenses:3},e.itemsShown=n.clone(e.itemsShownDefault),e.$on("entityChange",function(){e.itemsShown=n.clone(e.itemsShownDefault)}),e.showMore=function(n){e.itemsShown[n]=e.currentEntity[n].length},e.showLess=function(n){e.itemsShown[n]=e.itemsShownDefault[n]}}e.module("civic-graph").controller("detailsCtrl",["$scope","_",n])}(angular);
!function(t){"use strict";function e(t){t.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}e.$inject=["$httpProvider"],t.module("civic-graph.api").config(e)}(angular);
!function(n){"use strict"}(angular);
!function(t){"use strict";function e(t){return void 0!==t&&null!==t}function i(i,n,o,s,c,a,r){function d(){var t,e,n,o;for(e in i.categories)if(i.categories.hasOwnProperty(e)){t=i.categories[e];for(n in i.editEntity.categories)i.editEntity.categories.hasOwnProperty(n)&&(o=i.editEntity.categories[n],t.id===o.id&&(t.enabled=o.enabled))}}i.isEditing=!1,i.editEntity=c.getEntityModel(i.entity),i.entityTypes=c.getEntityTypes(),i.influenceTypes=c.getInfluenceTypes();var u;i.categories=[],i.addressSearch=function(t){return n.jsonp("https://dev.virtualearth.net/REST/v1/Locations",{params:{query:t,key:"Ai58581yC-Sr7mcFbYTtUkS3ixE7f6ZuJnbFJCVI4hAtW1XoDEeZyidQz2gLCCyD",jsonp:"JSON_CALLBACK",include:"ciso2"}}).then(function(t){if(e(t.data.resourceSets)&&t.data.resourceSets.length>0)return t.data.resourceSets[0].resources})},i.toggleCategory=function(t){if(0===i.editEntity.categories.length)i.editEntity.categories.push(t);else{var e=!1;for(var n in i.editEntity.categories)if(i.editEntity.categories.hasOwnProperty(n)){var o=i.editEntity.categories[n];if(o.id===t.id){e=!0,o.enabled=t.enabled;break}}e||i.editEntity.categories.push(t)}},i.setLocation=function(t,n){i.addressSearch(t.formattedAddress).then(function(o){var s=o[0],c=s.address,a=s.point;i.addLocation(n),t.address_line=e(c.addressLine)?c.addressLine:"",t.locality=e(c.locality)?c.locality:"",t.district=e(c.adminDistrict)?c.adminDistrict:"",t.country=e(c.countryRegion)?c.countryRegion:null,t.country_code=e(c.countryRegionIso2)?c.countryRegionIso2:"",t.coordinates=e(a.coordinates)?a.coordinates:null,t.postal_code=e(c.postalCode)?c.postalCode:null})},i.addLocation=function(t){t&&i.editEntity.locations.push(a.getLocationModel())},i.addKeyPerson=function(){s.some(i.editEntity.key_people,{name:"",id:null})||i.editEntity.key_people.push({name:"",id:null})},i.setFundingConnection=function(t,e){e.entity_id=t.id},i.addFundingConnection=function(t){s.some(t,{entity:""})||t.push({entity:"",amount:null,year:null,id:null})},i.setConnection=function(t,e){e.entity_id=t.id},i.addConnection=function(t){s.some(t,{entity:"",id:null})||t.push({entity:"",id:null,details:null})},i.addFinance=function(t){s.every(t,function(t){return t.amount>0&&t.year>1750})&&t.push({amount:null,year:null,id:null})},i.save=function(){i.isSaving=!0,console.log(i.editEntity.generateDBModel()),n.post(r.apiHost+"api/save",{entity:i.editEntity.generateDBModel()}).success(function(t){i.isSaving=!1,i.$emit("editEntitySuccess",t),i.cancelEdit()}).error(function(){i.isError=!0,o(function(){i.isError=!1},2e3)})},i.cancelEdit=function(){i.isOpen=!1},i.$watch("entity",function(n,o){t.equals(n,o)||(console.log(i.entity),i.editEntity=c.getEntityModel(n),i.categories=t.copy(u),d(),i.isEditing=e(i.editEntity.id))}),n.get(r.apiHost+"api/categories").success(function(e){u=e.categories,i.categories=t.copy(u)})}var n=["$scope","$http","$timeout","_","entityService","locationService","config",i];t.module("civic-graph").controller("editCtrl",n)}(angular);
!function(n){"use strict";function e(){function n(n){return void 0!==n&&null!==n}function e(e){var i=n(e)?e:{};this.name=n(i.name)?i.name:null,this.enabled=!n(i.enable)||i.enabled,this.id=n(i.id)?i.id:null}this.getCategoryModel=function(n){return new e(n)}}var i=[e];n.module("civic-graph").service("categoryService",i)}(angular);
!function(n){"use strict";function t(n){return void 0!==n&&null!==n}function i(){function n(n){var i=t(n);this.entity=i&&t(n.entity)?n.entity:null,this.id=i&&t(n.id)?n.id:null,this.details=i&&t(n.details)?n.details:null,this.name=i&&t(n.name)?n.name:null,this.entity_id=i&&t(n.entity_id)?n.entity_id:null}this.getConnectionModel=function(t){return new n(t)},this.getConnectionTypes=function(){return l}}var e=[i],l={Funding:!0,Data:!0,Employment:!0,Collaboration:!0};n.module("civic-graph").service("connectionService",e)}(angular);
!function(e){"use strict";function n(e){return!("undefined"==typeof e||null===e)}function t(t,o,i,r,p,a,c,s){function l(e){return console.error("Recieved an error from API with this message: %O",e.data),o.reject(e)}function d(e){return e.data}function g(t,o){if(!n(t)&&!e.isArray(t))return[o()];var i,r,p=[];for(i in t)t.hasOwnProperty(i)&&(r=t[i],e.isObject(r)&&p.push(o(r)));return p.push(o()),p}function u(e){function t(){var e=new u(i);return e.locations.pop(),e.locations.pop(),e.grants_received.pop(),e.grants_received.pop(),e.grants_given.pop(),e.grants_given.pop(),e.investments_received.pop(),e.investments_received.pop(),e.investments_made.pop(),e.investments_made.pop(),e.data_given.pop(),e.data_given.pop(),e.data_received.pop(),e.data_received.pop(),e.collaborations.pop(),e.collaborations.pop(),e.key_people.pop(),e.key_people.pop(),e.employments.pop(),e.employments.pop(),e.revenues.pop(),e.revenues.pop(),e.expenses.pop(),e.expenses.pop(),e.categories.pop(),e.categories.pop(),e.description="",e}function o(t,o){var i=n(e)?e:{},r=n(o)?o:null;return n(i[t])?i[t]:r}var i=this,l=n(e)?e:{};i.id=o("id"),i.name=o("name"),i.influence=o("influence"),i.type=o("type"),i.nickname=o("nickname"),i.url=o("url"),i.twitter_handle=o("twitter_handle"),i.employees=o("employees"),i.locations=g(l.locations,c.getLocationModel),i.grants_received=g(l.grants_received,r.getFundingConnectionModel),i.investments_received=g(l.investments_received,r.getFundingConnectionModel),i.grants_given=g(l.grants_given,r.getFundingConnectionModel),i.investments_made=g(l.investments_made,r.getFundingConnectionModel),i.data_given=g(l.data_given,p.getConnectionModel),i.data_received=g(l.data_received,p.getConnectionModel),i.collaborations=g(l.collaborations,p.getConnectionModel),i.key_people=g(l.key_people,p.getConnectionModel),i.employments=g(l.employments,p.getConnectionModel),i.revenues=g(l.revenues,a.getFinanceModel),i.expenses=g(l.expenses,a.getFinanceModel),i.categories=g(l.categories,s.getCategoryModel),i.generateDBModel=t}function v(e){return new u(e)}function m(){return y}function _(){return M}function f(){return t.get(i.apiHost+"api/entities").then(d,l)}var y={Government:!0,"For-Profit":!0,"Non-Profit":!0,Individual:!0},M=["Local","National","Global"];return{getEntityModel:v,getEntityTypes:m,getInfluenceTypes:_,getAll:f}}t.$inject=["$http","$q","config","fundingConnectionService","connectionService","financeService","locationService","categoryService"],e.module("civic-graph").factory("entityService",t)}(angular);
!function(n){"use strict";function i(n){return void 0!==n&&null!==n}function t(){function n(n){var t=i(n)?n:{};this.amount=i(t.amount)&&t.amount>=0?t.amount:0,this.year=i(t.year)&&t.year>=1750?t.year:null,this.id=i(t.id)?t.id:null}this.getFinanceModel=function(i){return new n(i)}}var e=[t];n.module("civic-graph").service("financeService",e)}(angular);
!function(n){"use strict";function i(n){return void 0!==n&&null!==n}function t(){function n(n){var t=i(n);this.entity=t&&i(n.entity)?n.entity:"",this.amount=t&&i(n.amount)?n.amount:null,this.year=t&&i(n.year)?n.year:null,this.id=t&&i(n.id)?n.id:null}this.getFundingConnectionModel=function(i){return new n(i)}}var e=[t];n.module("civic-graph").service("fundingConnectionService",e)}(angular);
!function(t){"use strict";function i(){function t(t){return void 0!==t&&null!==t}function i(i){var s=t(i)?i:{};this.address_line=t(s.address_line)?s.address_line:null,this.locality=t(s.locality)?s.locality:null,this.district=t(s.district)?s.district:null,this.postal_code=t(s.postal_code)?s.postal_code:null,this.country=t(s.country)?s.country:null,this.country_code=t(s.country_code)?s.country_code:null,this.coordinates=t(s.coordinates)?s.coordinates:null,this.id=t(s.id)?s.id:null,this.formattedAddress=(t(this.address_line)?this.address_line+" ":"")+(t(this.locality)?this.locality+", ":"")+(t(this.country_code)?this.country_code+" ":"")+(t(this.postal_code)?this.postal_code:""),this.formattedAddress=this.formattedAddress.trim()}this.getLocationModel=function(t){return new i(t)}}var s=[i];t.module("civic-graph").service("locationService",s)}(angular);
!function(e){"use strict";function o(e,o,n,t,i){function c(){a.changeView(a.toggleNetwork?"Network":"Map")}var a=this;a.entityTypes=e.getEntityTypes(),a.connectionTypes=o.getConnectionTypes(),a.sizeByList=[{name:"Employees",value:"employees"},{name:"Twitter Followers",value:"followers"}],a.sizeBy="employees",a.showView={Network:!0,Map:!1},a.switchView=c,a.changeView=function(e){t.forEach(t.keys(a.showView),function(o){a.showView[o]=e===o}),n.$broadcast("viewChange",a.showView)},a.showAbout=function(){i.open({animation:!1,templateUrl:"control/about.html",controller:"modalCtrl"})},a.toggleNode=function(e){n.$broadcast("toggleNode",{name:e,enabled:a.entityTypes[e]})},a.toggleLink=function(e){n.$broadcast("toggleLink",{name:e,enabled:a.connectionTypes[e]})},a.changeSizeBy=function(){n.$broadcast("changeSizeBy",a.sizeBy)},a.changeSizeBy()}var n=["entityService","connectionService","$rootScope","_","$modal",o];e.module("civic-graph").controller("controlCtrl",n)}(angular);
!function(t,e,n){"use strict";function i(t,i,o,r,a){t.options={center:{lat:20,lng:-40,zoom:3},defaults:{tileLayer:"https://api.tiles.mapbox.com/v4/mapbox.light/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZGF2aWRscm50IiwiYSI6IjA0M2RkNzMzZWJmNzEzNGYzMTdhYTExYzAyZmU4ZTE1In0.TNYlFta2VItrkn4L0Z9BJQ",tileLayerOptions:{detectRetina:!0,reuseTiles:!1},zoomControl:!1,attributionControl:!1}},i(function(){var i=function(t){var n=t.data,i=e.layout.pie().sort(null).value(function(t){return t.value}),o=e.svg.arc().outerRadius(t.r).innerRadius(t.r-10),r=t.r+t.strokeWidth,a=2*r,c=a,l=document.createElementNS(e.ns.prefix.svg,"svg"),s=e.select(l).data(n).attr("class","piechart").attr("width",a).attr("height",c),d=s.selectAll(".arc").data(i(n)).enter().append("g").attr("class","arc").attr("transform","translate("+r+","+r+")");return d.append("path").attr("d",o).attr("class",function(t){return t.data.type+"-arc"}),d.append("svg:text").text(function(e,n){if(0===n)return t.count}).attr("x",-4*t.count.toString().length).attr("dy",5).attr("class","arcText"),window.XMLSerializer?(new window.XMLSerializer).serializeToString(l):l.xml?l.xml:""};o.getMap().then(function(e){function o(t){var e=t.getAllChildMarkers(),o=e.length,a=r.pluck(e,"options"),c=r.map(r.countBy(a,"type"),function(t,e){return{type:e,value:t}}),l=28,s=1,d=2*(l+s),u=i({data:c,r:l,strokeWidth:s,count:o});return new n.DivIcon({html:u,className:"marker-cluster",iconSize:new n.point(d,d)})}function a(t){function e(e){if(r.every(e.coordinates)){"40.78200"===e.coordinates[0].toFixed(5)&&"-73.83170"===e.coordinates[1].toFixed(5)&&(e.coordinates[0]=40.77065,e.coordinates[1]=-73.97406);var i=n.marker(e.coordinates,{icon:s[t.type],title:t.name,entity_id:t.id,message:t.name,type:t.type});d.addLayer(i)}}r.forEach(t.locations,e)}function c(t){console.error(t.message+"  %O",t)}var l=t.entities;e.invalidateSize(),new n.Control.Zoom({position:"topright"}).addTo(e),n.control.locate({position:"topright",showPopup:!1,icon:"fa fa-location-arrow"}).addTo(e);var s={"Non-Profit":n.icon({iconUrl:"img/marker-nonprof.svg",iconSize:[60,60]}),"For-Profit":n.icon({iconUrl:"img/marker-prof.svg",iconSize:[60,60]}),Individual:n.icon({iconUrl:"img/marker-ind.svg",iconSize:[60,60]}),Government:n.icon({iconUrl:"img/marker-gov.svg",iconSize:[60,60]})},d=n.markerClusterGroup({spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,iconCreateFunction:o,maxClusterRadius:30,spiderfyDistanceMultiplier:1.3});console.log("Original: %O",t.entities),console.log("Filtered: %O",l),r.forEach(l,a),e.addLayer(d),e.on("locationerror",c),d.on("click",function(e){t.setEntityID(e.layer.options.entity_id),t.clickedEntity.entity=t.currentEntity,t.actions.interacted=!0,t.settingsEnabled&&t.mobile&&t.toggleSettings(),t.safeApply()}),e.on("click",function(){t.clickedEntity.entity=null,t.actions.interacted=!0,t.safeApply()}),t.$on("selectItem",function(){var n=t.currentEntity.locations.length>0?r.pluck(t.currentEntity.locations,"coordinates"):null;n.length>0&&e.setView(n[0],11),t.actions.interacted=!0,t.safeApply()})})})}var o=["$scope","$timeout","leafletData","_","$filter",i];t.module("civic-graph").controller("mapCtrl",o)}(angular,d3,L);
!function(n,t){"use strict";function e(n){return void 0!==n&&null!==n}function i(n,t,i,c,o){function r(r){t.get(o.apiHost+"api/connections").success(function(t){var o=c("filter")(n.entities,function(t){return t.collaborations.length>=n.minConnections}),r={};i.forEach(i.keys(t.connections),function(n){r[n]=[]}),i.forEach(t.connections,function(n,t){i.forEach(n,function(n){var c=i.find(o,{id:n.source}),a=i.find(o,{id:n.target});e(c)&&e(a)&&r[t].push({source:c,target:a})})}),i.forEach(i.keys(n.entityTypes),function(t){var e=i.takeRight(i.sortBy(i.filter(n.entities,{type:t}),"collaborations.length"),5);i.forEach(e,function(n){n.wellconnected=!0})}),o=i.sortBy(o,function(n){return n.wellconnected?1:0}),a(o,r)})}n.isLoading=!0,n.connections={},r(),n.safeApply=function(n){var t=this.$root.$$phase;"$apply"===t||"$digest"===t?n&&"function"==typeof n&&n():this.$apply(n)},n.$on("triggerNetworkDraw",r),n.$on("viewChange",function(n){console.log(n)});var a=function(t,c){n.isLoading=!1;var o=d3.select("#network");o.selectAll("*").remove();var r=o.node().getBoundingClientRect(),a=r.height,s=r.width,l=6,u=7,d={Individual:{x:1,y:1},"For-Profit":{x:1,y:-1},"Non-Profit":{x:-1,y:1},Government:{x:-1,y:-1}},f=10,y=50,p=d3.max(t,function(n){return parseInt(n.employees)}),k=d3.max(t,function(n){return parseInt(n.followers)}),g={employees:d3.scale.sqrt().domain([10,p]).range([f,y]),followers:d3.scale.sqrt().domain([10,k]).range([f,y])},m={},h=d3.layout.force().size([s,a]).nodes(t).links(i.flatten(i.values(c))).charge(function(n){return n.employees?-2*g.employees(n.employees):-20}).linkStrength(0).linkDistance(50);i.forEach(c,function(n,t){m[t]=o.selectAll(".link ."+t+"-link").data(n).enter().append("line").attr("class",function(n){return e(n.source)&&e(n.target)?(n.type=t,"link "+t+"-link "+n.source.type+"-link "+n.target.type+"-link"):""})});var x=o.selectAll(".node").data(t).enter().append("g").attr("class",function(n){return"node "+n.type+"-node"}).call(h.drag);x.append("circle").attr("r",function(n){return n.employees?g.employees(n.employees):u}),x.append("text").text(function(n){return n.nickname?n.nickname:n.name}).attr("dx",function(){return-.065*this.getComputedTextLength()/2+"em"}).attr("dy",function(){return.08*this.parentNode.getBBox().height/2+.5+"em"}),h.on("tick",function(n){var e=l*n.alpha;i.forEach(t,function(n){n.x&&d[n.type]&&(n.x+=d[n.type].x*e,n.y+=d[n.type].y*e,n.x=Math.max(y,Math.min(s-y,n.x)),n.y=Math.max(y,Math.min(a-y,n.y)))}),i.forEach(m,function(n){n.attr("x1",function(n){return n.source.x}).attr("y1",function(n){return n.source.y}).attr("x2",function(n){return n.target.x}).attr("y2",function(n){return n.target.y})}),x.attr("transform",function(n){return"translate("+n.x+","+n.y+")"})});var E=function(n){requestAnimationFrame(function t(){for(var e=0;e<n;e++)h.tick();h.alpha()>0&&requestAnimationFrame(t)})};n.mobile||E(7),h.start();var v={};i.forEach(m,function(n){i.forEach(n[0],function(n){var t=n.__data__.source,e=n.__data__.target;v[t.index+","+e.index]=!0,v[e.index+","+t.index]=!0})});var L,A=function(n,t){return v[n.index+","+t.index]||n.index===t.index},T=function(n){x.classed("focused",function(t){return A(n,t)}).classed("unfocused",function(t){return!A(n,t)}),i.forEach(m,function(t){t.classed("focused",function(t){return n.index===t.source.index||n.index===t.target.index}).classed("unfocused",function(t){return!(n.index===t.source.index||n.index===t.target.index)})})},w=function(t){n.currentEntity!==t&&n.setEntity(t),n.safeApply(),T(t)},$=function(t){x.classed("focused",!1).classed("unfocused",!1),i.forEach(m,function(n){n.classed("focused",!1).classed("unfocused",!1)}),t.fixed=!1,n.clickedEntity.entity&&h.resume()},b=function(t){n.clickedEntity.entity||n.editing||n.currentLocation||(L=setTimeout(function(){w(t)},500)),n.actions.interacted=!0,n.safeApply()},_=function(t){n.clickedEntity.entity||n.currentLocation||($(t),clearTimeout(L)),n.actions.interacted=!0,n.safeApply()},B=function(t){n.safeApply(),x.classed("focused",function(n){return n.name in t.dict}).classed("unfocused",function(n){return!(n.name in t.dict)}),i.forEach(m,function(n){n.classed("focused",function(n){return n.source.name in t.dict&&n.target.name in t.dict}).classed("unfocused",function(n){return!(n.source.name in t.dict&&n.target.name in t.dict)})})},P=function(){x.classed("focused",!1).classed("unfocused",!1),i.forEach(m,function(n){n.classed("focused",!1).classed("unfocused",!1)}),n.clickedLocation.location&&h.resume()},C=function(t){n.showLicense=!1,n.clickedEntity.entity&&($(n.clickedEntity.entity),n.clickedEntity.entity=null),n.clickedLocation.location!==t&&(P(n.clickedLocation.location),n.clickedLocation.location=t,B(t)),d3.event&&d3.event.stopPropagation(),n.actions.interacted=!0,n.safeApply()},q=function(t){n.showLicense=!1,e(n.clickedLocation)&&(e(n.clickedLocation.location)&&(P(n.clickedLocation.entity),n.clickedLocation.location=null),n.clickedEntity.entity===t?n.clickedEntity.entity=null:(n.clickedEntity.entity&&$(n.clickedEntity.entity),n.clickedEntity.entity=t,w(t))),d3.event&&d3.event.stopPropagation(),n.actions.interacted=!0,n.safeApply()},I=function(){e(n.clickedLocation)&&(e(n.clickedLocation.location)&&($(n.clickedLocation.location),n.clickedLocation.location=null),e(n.clickedEntity.entity)&&($(n.clickedEntity.entity),n.clickedEntity.entity=null)),n.safeApply()},M=function(t){t.fixed?$(t):(t.x=s/2,t.y=a/2,t.px=s/2,t.py=a/2,t.fixed=!0,n.clickedEntity.entity=t),n.actions.interacted=!0,n.safeApply()};x.on("mouseover",b),x.on("mouseout",_),x.on("click",q),x.on("dblclick",M),o.on("click",I),x.classed("wellconnected",function(n){return n.hasOwnProperty("wellconnected")}),n.$on("changeSizeBy",function(n,t){o.selectAll("circle").transition().duration(250).attr("r",function(n){return n[t]?g[t](n[t]):u})}),n.$on("toggleLink",function(t,e){i.map(n.entityTypes,function(t,e){o.selectAll("."+e+"-link").classed({visible:function(t){return!n.connectionTypes[t.type]||n.entityTypes[t.source.type]&&n.entityTypes[t.target.type]},hidden:function(t){return!n.connectionTypes[t.type]||!n.entityTypes[t.source.type]||!n.entityTypes[t.target.type]}})})}),n.$on("toggleNode",function(t,e){o.selectAll("."+e.name+"-node").classed({visible:e.enabled,hidden:!e.enabled}),o.selectAll("."+e.name+"-link").classed({visible:function(t){return n.connectionTypes[t.type]&&n.entityTypes[t.source.type]&&n.entityTypes[t.target.type]},hidden:function(t){return!n.connectionTypes[t.type]||!n.entityTypes[t.source.type]||!n.entityTypes[t.target.type]}})}),n.$on("selectItem",function(t,e){"location"===e.type?C(n.currentLocation):q(n.currentEntity)})}}var c=["$scope","$http","_","$filter","config",i];n.module("civic-graph").controller("networkCtrl",c)}(angular,RTP);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNpdmljLWdyYXBoLm1vZHVsZS5qcyIsImFuYWx5dGljL2FuYWx5dGljc0RpcmVjdGl2ZS5qcyIsImVkaXQtZW50aXR5L2VkaXRFbnRpdHlEaXJlY3RpdmUuanMiLCJleHRyYS9hZGRNb2JpbGVFdmVudHMuanMiLCJleHRyYS9tb2RhbEN0cmwuanMiLCJjb250cm9sL2NvbnRyb2xEaXJlY3RpdmUuanMiLCJtYXAvbWFwRGlyZWN0aXZlLmpzIiwibWFpbi9hcHAuanMiLCJtYWluL2hvbWVDdHJsLmpzIiwibmV0d29yay9uZXR3b3JrRGlyZWN0aXZlLmpzIiwibmV0d29yay9zbGlkZXJCYXIuanMiLCJvdmVydmlldy9vdmVydmlld0N0cmwuanMiLCJhbmFseXRpYy9jb250cm9sbGVyL2FuYWx5dGljc0N0cmwuanMiLCJkZXRhaWwvY29udHJvbGxlci9kZXRhaWxzQ3RybC5qcyIsImFwaS9hcGlDYWxsZXIvY29uZmlnLmpzIiwiYXBpL2FwaUNhbGxlci9zZXJ2aWNlLmpzIiwiZWRpdC1lbnRpdHkvY29udHJvbGxlci9lZGl0Q3RybC5qcyIsImVkaXQtZW50aXR5L3NlcnZpY2UvY2F0ZWdvcnlTZXJ2aWNlLmpzIiwiZWRpdC1lbnRpdHkvc2VydmljZS9jb25uZWN0aW9uU2VydmljZS5qcyIsImVkaXQtZW50aXR5L3NlcnZpY2UvZW50aXR5U2VydmljZS5qcyIsImVkaXQtZW50aXR5L3NlcnZpY2UvZmluYW5jZVNlcnZpY2UuanMiLCJlZGl0LWVudGl0eS9zZXJ2aWNlL2Z1bmRpbmdDb25uZWN0aW9uU2VydmljZS5qcyIsImVkaXQtZW50aXR5L3NlcnZpY2UvbG9jYXRpb25TZXJ2aWNlLmpzIiwiY29udHJvbC9jb250cm9sbGVyL2NvbnRyb2xDdHJsLmpzIiwibWFwL2NvbnRyb2xsZXIvbWFwQ3RybC5qcyIsIm5ldHdvcmsvY29udHJvbGxlci9uZXR3b3JrQ3RybC5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibWFpbkRlcGVuZGVuY2llcyIsIm1vZHVsZSIsImFuYWx5dGljc0RpcmVjdGl2ZSIsInRlbXBsYXRlVXJsIiwicmVzdHJpY3QiLCJzY29wZSIsImNvbnRyb2xsZXIiLCJhbmFseXRpY3NEZXBlbmRlbmNpZXMiLCJkaXJlY3RpdmUiLCJlZGl0RW50aXR5RGlyZWN0aXZlIiwiZW50aXR5IiwiZW50aXRpZXMiLCJpc09wZW4iLCJlZGl0RW50aXR5RGVwZW5kZW5jaWVzIiwiJCIsImxpbmtGdW5jdGlvbiIsInNjcm9sbCIsInNlbGYiLCJ0aGlzIiwiY3NzIiwiY2xpY2siLCJ3aW5kb3ciLCJpbm5lckhlaWdodCIsInBhcnNlSW50IiwiZGV0YWlsc1BhbmVsIiwibW9iaWxlIiwic2Nyb2xsVG9wIiwiYWRkTW9iaWxlRXZlbnRzIiwibGluayIsIm1vZGFsQ3RybCIsIiRzY29wZSIsIiRtb2RhbEluc3RhbmNlIiwiY2xvc2VXaW5kb3ciLCJjbG9zZSIsImNvbnRyb2xEaXJlY3RpdmUiLCJ0b2dnbGVOZXR3b3JrIiwiY29udHJvbGxlckFzIiwiYmluZFRvQ29udHJvbGxlciIsIm1pbkNvbm5lY3Rpb25zIiwiY29udHJvbERlcGVuZGVuY2llcyIsImRlcGVuZGVuY2llcyIsImNvbnN0YW50IiwiXyIsImFwaUhvc3QiLCJjb25maWciLCIkbG9jYXRpb25Qcm92aWRlciIsIiRjb21waWxlUHJvdmlkZXIiLCJodG1sNU1vZGUiLCJkZWJ1Z0luZm9FbmFibGVkIiwiZmlsdGVyIiwiaW5wdXQiLCJkZWNpbWFscyIsImV4cCIsInN1ZmZpeGVzIiwiaXNOYU4iLCJNYXRoIiwiZmxvb3IiLCJsb2ciLCJwb3ciLCJ0b0ZpeGVkIiwiaG9tZUN0cmwiLCJlbnRpdHlTZXJ2aWNlIiwiY29ubmVjdGlvblNlcnZpY2UiLCJzZWFyY2hJdGVtcyIsImNhdGVnb3JpZXMiLCJjdXJyZW50TG9jYXRpb24iLCJjbGlja2VkTG9jYXRpb24iLCJsb2NhdGlvbiIsImNsaWNrZWRFbnRpdHkiLCJlZGl0aW5nIiwiYWN0aW9ucyIsImludGVyYWN0ZWQiLCJzaG93c2VhcmNoTUIiLCJzaG93QW5hbHl0aWNzIiwiZW50aXR5VHlwZXMiLCJnZXRFbnRpdHlUeXBlcyIsImNvbm5lY3Rpb25UeXBlcyIsImdldENvbm5lY3Rpb25UeXBlcyIsInN0YXR1cyIsImlzTmV0d29ya1Nob3duIiwibGljZW5zZSIsIm5ldHdvcmtMb2FkaW5nIiwidG9nZ2xlQW5hbHl0aWNzIiwiJHdhdGNoIiwiJGJyb2FkY2FzdCIsImNvbm5lY3Rpb25DaGFuZ2UiLCJjb25zb2xlIiwiaHlkZVBhcnRpYWxzIiwiZXhjZXB0Iiwic2V0dGluZ3NFbmFibGVkIiwic2hvd1NlYXJjaCIsInRvZ2dsZVNldHRpbmdzIiwic3RhcnRFZGl0IiwiY3VycmVudEVudGl0eSIsInN3aXRjaFZpZXciLCJtb2JpbGVjaGVjayIsImNoZWNrIiwicmVnZXgiLCJyZWdleDIiLCJhIiwidGVzdCIsInN1YnN0ciIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInZlbmRvciIsIm9wZXJhIiwic2V0VGltZW91dCIsImdldEFsbCIsInRoZW4iLCJkYXRhIiwibm9kZXMiLCJsb2NhdGlvbnMiLCJ1bmlxIiwicGx1Y2siLCJmbGF0dGVuIiwiZW50aXRpZXNCeUxvY2F0aW9uIiwibWFwIiwibG9jIiwiZmluZGluZ3MiLCJmbG93IiwicHJvcGVydHkiLCJwYXJ0aWFsUmlnaHQiLCJhbnkiLCJsb2NhbGl0eSIsIm5hbWUiLCJ0eXBlIiwiZGljdCIsInppcE9iamVjdCIsImNvbmNhdCIsIm92ZXJ2aWV3VXJsIiwic2V0RW50aXR5Iiwic3RvcEVkaXQiLCJzZXRFbnRpdHlJRCIsImlkIiwiZmluZCIsInNldExvY2F0aW9uIiwic2VsZWN0SXRlbSIsIml0ZW0iLCIkb24iLCJldmVudCIsImFyZ3MiLCJ2YWx1ZSIsInNldEVudGl0aWVzIiwicmVzcG9uc2UiLCJhbmltYXRpb25zRW5hYmxlZCIsImhvbWVEZXBlbmRlbmNpZXMiLCJyZXN0aWN0IiwicmVxdWlyZSIsImVsZW1lbnQiLCJhdHRycyIsIm5nTW9kZWwiLCJ0b0xvd2VyQ2FzZSIsIiRwYXJzZXJzIiwicHVzaCIsInBhcnNlRmxvYXQiLCJvdmVydmlld0N0cmwiLCJjYXRlZ29yaXplZEVudGl0aWVzIiwiZm9yRWFjaCIsImtleXMiLCJhbmFseXRpY3NDdHJsIiwiZGV0YWlsc0N0cmwiLCJpdGVtc1Nob3duRGVmYXVsdCIsImtleV9wZW9wbGUiLCJncmFudHNfZ2l2ZW4iLCJncmFudHNfcmVjZWl2ZWQiLCJpbnZlc3RtZW50c19tYWRlIiwiaW52ZXN0bWVudHNfcmVjZWl2ZWQiLCJjb2xsYWJvcmF0aW9ucyIsImVtcGxveW1lbnRzIiwicmVsYXRpb25zIiwiZGF0YV9naXZlbiIsImRhdGFfcmVjZWl2ZWQiLCJyZXZlbnVlcyIsImV4cGVuc2VzIiwiaXRlbXNTaG93biIsImNsb25lIiwic2hvd01vcmUiLCJsZW5ndGgiLCJzaG93TGVzcyIsIkNvbmZpZyIsIiRodHRwUHJvdmlkZXIiLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iLCIkaW5qZWN0IiwiaXNEZWYiLCJvYmoiLCJ1bmRlZmluZWQiLCJlZGl0Q3RybCIsIiRodHRwIiwiJHRpbWVvdXQiLCJsb2NhdGlvblNlcnZpY2UiLCJpbml0Q2F0ZWdvcnlBcnJheSIsImNhdGVnb3J5IiwiY2F0ZWdvcnlJbmRleCIsImVudGl0eUNhdGVnb3J5SW5kZXgiLCJlbnRpdHlDYXRlZ29yeSIsImhhc093blByb3BlcnR5IiwiZWRpdEVudGl0eSIsImVuYWJsZWQiLCJpc0VkaXRpbmciLCJnZXRFbnRpdHlNb2RlbCIsImluZmx1ZW5jZVR5cGVzIiwiZ2V0SW5mbHVlbmNlVHlwZXMiLCJjYXRlZ29yeUJhY2t1cCIsImFkZHJlc3NTZWFyY2giLCJzZWFyY2giLCJqc29ucCIsInBhcmFtcyIsInF1ZXJ5Iiwia2V5IiwiaW5jbHVkZSIsInJlc291cmNlU2V0cyIsInJlc291cmNlcyIsInRvZ2dsZUNhdGVnb3J5IiwiZm91bmQiLCJpc0xhc3QiLCJmb3JtYXR0ZWRBZGRyZXNzIiwiYXBpQ2FsbFJlc3VsdCIsInJlc3VsdCIsImFkZHJlc3MiLCJwb2ludCIsImFkZExvY2F0aW9uIiwiYWRkcmVzc19saW5lIiwiYWRkcmVzc0xpbmUiLCJkaXN0cmljdCIsImFkbWluRGlzdHJpY3QiLCJjb3VudHJ5IiwiY291bnRyeVJlZ2lvbiIsImNvdW50cnlfY29kZSIsImNvdW50cnlSZWdpb25Jc28yIiwiY29vcmRpbmF0ZXMiLCJwb3N0YWxfY29kZSIsInBvc3RhbENvZGUiLCJnZXRMb2NhdGlvbk1vZGVsIiwiYWRkS2V5UGVyc29uIiwic29tZSIsInNldEZ1bmRpbmdDb25uZWN0aW9uIiwiZnVuZGluZyIsImVudGl0eV9pZCIsImFkZEZ1bmRpbmdDb25uZWN0aW9uIiwiYW1vdW50IiwieWVhciIsInNldENvbm5lY3Rpb24iLCJjb25uZWN0aW9uIiwiYWRkQ29ubmVjdGlvbiIsImNvbm5lY3Rpb25zIiwiZGV0YWlscyIsImFkZEZpbmFuY2UiLCJyZWNvcmRzIiwiZXZlcnkiLCJyIiwic2F2ZSIsImlzU2F2aW5nIiwiZ2VuZXJhdGVEQk1vZGVsIiwicG9zdCIsInN1Y2Nlc3MiLCIkZW1pdCIsImNhbmNlbEVkaXQiLCJlcnJvciIsImlzRXJyb3IiLCJuZXdWYWwiLCJvbGRWYWwiLCJlcXVhbHMiLCJjb3B5IiwiZ2V0IiwiZWRpdENvbnRyb2xsZXJEZXBzIiwiQ2F0ZWdvcnlTZXJ2aWNlIiwibyIsIkNhdGVnb3J5IiwiZGVmT2JqIiwiZW5hYmxlIiwiZ2V0Q2F0ZWdvcnlNb2RlbCIsImNhdGVnb3J5U2VydmljZURlcGVuZGVuY2llcyIsInNlcnZpY2UiLCJDb25uZWN0aW9ucyIsIkNvbm5lY3Rpb24iLCJvYmpJc0RlZiIsImdldENvbm5lY3Rpb25Nb2RlbCIsIkZ1bmRpbmciLCJEYXRhIiwiRW1wbG95bWVudCIsIkNvbGxhYm9yYXRpb24iLCJpc0RlZmluZWQiLCJFbnRpdHlTZXJ2aWNlIiwiJHEiLCJmdW5kaW5nQ29ubmVjdGlvblNlcnZpY2UiLCJmaW5hbmNlU2VydmljZSIsImNhdGVnb3J5U2VydmljZSIsImxvZ0FwaUVycm9yIiwiZXJyIiwicmVqZWN0IiwidW53cmFwQW5ndWxhckh0dHAiLCJsb29wQW5kSW5pdCIsIm1vZGVsQXJyYXkiLCJpbml0TW9kZWxGdW5jdGlvbiIsImlzQXJyYXkiLCJhcnJheUluZGV4IiwiYXJyYXlWYWx1ZSIsIm5ld01vZGVsQXJyYXkiLCJpc09iamVjdCIsIkVudGl0eSIsImRiTW9kZWwiLCJwb3AiLCJkZXNjcmlwdGlvbiIsImdldFByb3BlcnR5IiwiZGVmYXVsdFZhbHVlIiwiaW5mbHVlbmNlIiwibmlja25hbWUiLCJ1cmwiLCJ0d2l0dGVyX2hhbmRsZSIsImVtcGxveWVlcyIsImdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwiLCJnZXRGaW5hbmNlTW9kZWwiLCJHb3Zlcm5tZW50IiwiRm9yLVByb2ZpdCIsIk5vbi1Qcm9maXQiLCJJbmRpdmlkdWFsIiwiZmFjdG9yeSIsIkZpbmFuY2VTZXJ2aWNlIiwiRmluYW5jZSIsIkZ1bmRpbmdDb25uZWN0aW9ucyIsIkZ1bmRpbmdDb25uZWN0aW9uIiwiZnVuZGluZ0Nvbm5lY3Rpb25TZXJ2aWNlRGVwZW5kZW5jaWVzIiwiTG9jYXRpb25TZXJ2aWNlIiwiTG9jYXRpb24iLCJ0cmltIiwibG9jYXRpb25TZXJ2aWNlRGVwZW5kZW5jaWVzIiwiY29udHJvbEN0cmwiLCIkcm9vdFNjb3BlIiwiJG1vZGFsIiwidm0iLCJjaGFuZ2VWaWV3Iiwic2l6ZUJ5TGlzdCIsInNpemVCeSIsInNob3dWaWV3IiwiTmV0d29yayIsIk1hcCIsInZpZXciLCJzaG93QWJvdXQiLCJvcGVuIiwiYW5pbWF0aW9uIiwidG9nZ2xlTm9kZSIsInRvZ2dsZUxpbmsiLCJjaGFuZ2VTaXplQnkiLCJjb250cm9sRGVwcyIsImQzIiwiTCIsIm1hcEN0cmwiLCJsZWFmbGV0RGF0YSIsIiRmaWx0ZXIiLCJvcHRpb25zIiwiY2VudGVyIiwibGF0IiwibG5nIiwiem9vbSIsInRpbGVMYXllciIsInRpbGVMYXllck9wdGlvbnMiLCJkZXRlY3RSZXRpbmEiLCJyZXVzZVRpbGVzIiwiem9vbUNvbnRyb2wiLCJhdHRyaWJ1dGlvbkNvbnRyb2wiLCJjcmVhdGVQaWVDaGFydCIsInBpZSIsImxheW91dCIsInNvcnQiLCJkIiwiYXJjIiwic3ZnIiwib3V0ZXJSYWRpdXMiLCJpbm5lclJhZGl1cyIsInN0cm9rZVdpZHRoIiwidyIsImgiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnROUyIsIm5zIiwicHJlZml4IiwidmlzIiwic2VsZWN0IiwiYXR0ciIsImFyY3MiLCJzZWxlY3RBbGwiLCJlbnRlciIsImFwcGVuZCIsInRleHQiLCJpIiwiY291bnQiLCJ0b1N0cmluZyIsIlhNTFNlcmlhbGl6ZXIiLCJzZXJpYWxpemVUb1N0cmluZyIsInhtbCIsImdldE1hcCIsImNsdXN0ZXJJY29uIiwiY2x1c3RlciIsImNoaWxkcmVuIiwiZ2V0QWxsQ2hpbGRNYXJrZXJzIiwidG90YWwiLCJjbHVzdGVyTWFya2VycyIsImNvdW50cyIsImNvdW50QnkiLCJpY29uRGltIiwiaHRtbCIsIkRpdkljb24iLCJjbGFzc05hbWUiLCJpY29uU2l6ZSIsIm91dGVyTG9vcCIsImlubmVyTG9vcCIsIm0iLCJtYXJrZXIiLCJpY29uIiwibWFya2VySWNvbiIsInRpdGxlIiwibWVzc2FnZSIsIm1hcmtlcnMiLCJhZGRMYXllciIsIm9uTG9jYXRpb25FcnJvciIsImxlYWZsZXRFcnJvciIsImZpbHRlcmVkRW50aXRpZXMiLCJpbnZhbGlkYXRlU2l6ZSIsIkNvbnRyb2wiLCJab29tIiwicG9zaXRpb24iLCJhZGRUbyIsImNvbnRyb2wiLCJsb2NhdGUiLCJzaG93UG9wdXAiLCJpY29uVXJsIiwibWFya2VyQ2x1c3Rlckdyb3VwIiwic3BpZGVyZnlPbk1heFpvb20iLCJzaG93Q292ZXJhZ2VPbkhvdmVyIiwiaWNvbkNyZWF0ZUZ1bmN0aW9uIiwibWF4Q2x1c3RlclJhZGl1cyIsInNwaWRlcmZ5RGlzdGFuY2VNdWx0aXBsaWVyIiwib24iLCJsYXllciIsInNhZmVBcHBseSIsInNldFZpZXciLCJSVFAiLCJuZXR3b3JrQ3RybCIsInN0YXJ0TG9hZCIsImZpbHRlcmVkQ29ubmVjdGlvbnMiLCJzb3VyY2VOb2RlIiwic291cmNlIiwidGFyZ2V0Tm9kZSIsInRhcmdldCIsInRvcDUiLCJ0YWtlUmlnaHQiLCJzb3J0QnkiLCJ3ZWxsY29ubmVjdGVkIiwiZSIsImRyYXdOZXR3b3JrIiwiaXNMb2FkaW5nIiwiZm4iLCJwaGFzZSIsIiRyb290IiwiJCRwaGFzZSIsIiRhcHBseSIsInZpZXdPYmoiLCJlbnRpdHlBcnJheSIsImNvbm5lY3Rpb25BcnJheSIsInJlbW92ZSIsImJvdW5kcyIsIm5vZGUiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJoZWlnaHQiLCJ3aWR0aCIsIm9mZnNldFNjYWxlIiwiZGVmYXVsdE5vZGVTaXplIiwib2Zmc2V0cyIsIngiLCJ5IiwibG93ZXJCb3VuZFJhZGl1cyIsInVwcGVyQm91bmRSYWRpdXMiLCJtYXhFbXBsb3llZXMiLCJtYXgiLCJlbCIsIm1heEZvbGxvd2VycyIsImZvbGxvd2VycyIsInNjYWxlIiwic3FydCIsImRvbWFpbiIsInJhbmdlIiwibGlua3MiLCJmb3JjZSIsInNpemUiLCJ2YWx1ZXMiLCJjaGFyZ2UiLCJsaW5rU3RyZW5ndGgiLCJsaW5rRGlzdGFuY2UiLCJjYWxsIiwiZHJhZyIsImdldENvbXB1dGVkVGV4dExlbmd0aCIsInBhcmVudE5vZGUiLCJnZXRCQm94IiwiayIsImFscGhhIiwibWluIiwic3BlZWRBbmltYXRlIiwidGlja3MiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJyZW5kZXIiLCJ0aWNrIiwic3RhcnQiLCJsaW5rZWRCeUluZGV4IiwibCIsIl9fZGF0YV9fIiwiaW5kZXgiLCJob3ZlclRpbWVyIiwibmVpZ2hib3JpbmciLCJiIiwiZm9jdXNuZWlnaGJvcnMiLCJjbGFzc2VkIiwibiIsImZvY3VzIiwidW5mb2N1cyIsImZpeGVkIiwicmVzdW1lIiwiaG92ZXIiLCJ1bmhvdmVyIiwiY2xlYXJUaW1lb3V0IiwiZm9jdXNMb2NhdGlvbiIsInVuZm9jdXNMb2NhdGlvbiIsImhpZ2hsaWdodExvY2F0aW9uIiwic2hvd0xpY2Vuc2UiLCJzdG9wUHJvcGFnYXRpb24iLCJiYWNrZ3JvdW5kY2xpY2siLCJkYmxjbGljayIsInB4IiwicHkiLCJ0cmFuc2l0aW9uIiwiZHVyYXRpb24iLCJ2YWwiLCJ2aXNpYmxlIiwiaGlkZGVuIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFVQSxHQUVOLFlBRUEsSUFBSUMsSUFDQSxlQUNBLG9CQUNBLFlBQ0EsZ0JBQ0Esa0JBR0pELEdBQVFFLE9BQU8sc0JBQ2ZGLEVBQVFFLE9BQU8sY0FBZUQsSUFFL0JEO0NDVkgsU0FBV0EsR0FFUCxZQUlBLFNBQVNHLEtBQ0wsT0FDSUMsWUFBYSw2QkFDYkMsU0FBYSxJQUNiQyxTQUNBQyxXQUFlLGlCQVB2QixHQUFJQyxJQUF5QkwsRUFXN0JILEdBQVFFLE9BQU8sZUFDVk8sVUFBVSxZQUFhRCxJQUU3QlI7Q0NsQkgsU0FBV0EsR0FFUCxZQUlBLFNBQVNVLEtBQ0wsT0FDSU4sWUFBYSwyQkFDYkMsU0FBYSxJQUNiQyxPQUNJSyxPQUFZLElBQ1pDLFNBQVksSUFDWkMsT0FBWSxLQUVoQk4sV0FBYSxZQVhyQixHQUFJTyxJQUEwQkosRUFlOUJWLEdBQVFFLE9BQU8sZUFDVk8sVUFBVSxhQUFjSyxJQUU5QmQ7Q0MzQkgsU0FBV0EsRUFBU2UsR0FFaEIsWUFFQSxTQUFTQyxHQUFhVixHQUVsQixRQUFTVyxLQUNMLEdBQUlDLEdBQU9ILEVBQUVJLEtBQ2JELEdBQUtFLElBQUksU0FBVSxRQUd2QixRQUFTQyxLQUNMLEdBQUlILEdBQU9ILEVBQUVJLEtBQ1RHLFFBQU9DLFlBQWMsRUFBSUMsU0FBU04sRUFBS0UsSUFBSSxXQUMzQ0YsRUFBS0UsSUFBSSxTQUFVLFFBRW5CRixFQUFLRSxJQUFJLFNBQVUsUUFJM0IsR0FBSUssRUFDQW5CLEdBQU1vQixTQUNORCxFQUFlVixFQUFFLGtCQUNqQlUsRUFBYUwsSUFBSSxTQUFVLFFBQzNCSyxFQUFhRSxVQUFVLEdBQ3ZCRixFQUFhUixPQUFPQSxHQUNwQlEsRUFBYUosTUFBTUEsSUFJM0IsUUFBU08sS0FDTCxPQUNJdkIsU0FBVSxJQUNWd0IsS0FBTWIsR0FJZGhCLEVB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LGdCQUFnQjZhLEVBQUU1WCxRQUNyQi9GLEVBQU80QyxZQUFZK2EsRUFBRTlELE9BQU85VCxRQUM3Qi9GLEVBQU80QyxZQUFZK2EsRUFBRTVELE9BQU9oVSxhQU1wRS9GLEVBQU80RyxJQUFJLGFBQWMsU0FBVUMsRUFBT2QsR0FDdENtUCxFQUNLYyxVQUFVLElBQU1qUSxFQUFLRCxLQUFPLFNBQzVCb1ksU0FBU3FCLFFBQVd4WixFQUFLMEUsUUFBUytVLFFBQVd6WixFQUFLMEUsVUFFdkR5SyxFQUNLYyxVQUFVLElBQU1qUSxFQUFLRCxLQUFPLFNBQzVCb1ksU0FDWXFCLFFBQVcsU0FBVTVCLEdBR2pCLE1BQU8zZCxHQUFPOEMsZ0JBQWdCNmEsRUFBRTVYLE9BQ3JCL0YsRUFBTzRDLFlBQVkrYSxFQUFFOUQsT0FBTzlULE9BQzdCL0YsRUFBTzRDLFlBQVkrYSxFQUFFNUQsT0FBT2hVLE9BRTFDeVosT0FBVyxTQUFVN0IsR0FHakIsT0FBUTNkLEVBQU84QyxnQkFBZ0I2YSxFQUFFNVgsUUFDckIvRixFQUFPNEMsWUFBWSthLEVBQUU5RCxPQUFPOVQsUUFDN0IvRixFQUFPNEMsWUFBWSthLEVBQUU1RCxPQUFPaFUsV0FNaEUvRixFQUFPNEcsSUFBSSxhQUFjLFNBQVVDLEVBQU9GLEdBQ3BCLGFBQWRBLEVBQUtaLEtBQ0w4WSxFQUFrQjdlLEVBQU9tQyxpQkFHekI3QyxFQUFNVSxFQUFPK0Qsa0JBOWI3QixHQUFJckQsSUFDQSxTQUNBLFFBQ0EsSUFDQSxVQUNBLFNBQ0ErWSxFQTJlSnhiLEdBQVFFLE9BQU8sZUFDVkssV0FBVyxjQUFla0MsSUFFaEN6QyxRQUFTdWIiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbihhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgbWFpbkRlcGVuZGVuY2llcyA9IFtcbiAgICAgICAgJ3VpLmJvb3RzdHJhcCcsXG4gICAgICAgICdsZWFmbGV0LWRpcmVjdGl2ZScsXG4gICAgICAgICduZ0FuaW1hdGUnLFxuICAgICAgICAndGVtcGxhdGVDYWNoZScsXG4gICAgICAgICdjaXZpYy1ncmFwaC5hcGknXG4gICAgXTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaC5hcGknLCBbXSk7XG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJywgbWFpbkRlcGVuZGVuY2llcyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA3LzEvMTYuXG4gKi9cblxuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBhbmFseXRpY3NEZXBlbmRlbmNpZXMgPSBbYW5hbHl0aWNzRGlyZWN0aXZlXTtcblxuICAgIGZ1bmN0aW9uIGFuYWx5dGljc0RpcmVjdGl2ZSgpe1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdqcy9hbmFseXRpYy9hbmFseXRpY3MuaHRtbCcsXG4gICAgICAgICAgICByZXN0cmljdCAgIDogJ0UnLFxuICAgICAgICAgICAgc2NvcGUgICAgICA6IHt9LFxuICAgICAgICAgICAgY29udHJvbGxlciAgIDogJ2FuYWx5dGljc0N0cmwnXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnYW5hbHl0aWNzJywgYW5hbHl0aWNzRGVwZW5kZW5jaWVzKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGVkaXRFbnRpdHlEZXBlbmRlbmNpZXMgPSBbZWRpdEVudGl0eURpcmVjdGl2ZV07XG5cbiAgICBmdW5jdGlvbiBlZGl0RW50aXR5RGlyZWN0aXZlKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdqcy9lZGl0LWVudGl0eS9lZGl0Lmh0bWwnLFxuICAgICAgICAgICAgcmVzdHJpY3QgICA6ICdFJyxcbiAgICAgICAgICAgIHNjb3BlICAgICAgOiB7XG4gICAgICAgICAgICAgICAgJ2VudGl0eScgIDogXCI9XCIsXG4gICAgICAgICAgICAgICAgJ2VudGl0aWVzJzogXCI9XCIsXG4gICAgICAgICAgICAgICAgJ2lzT3BlbicgIDogXCI9XCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb250cm9sbGVyIDogJ2VkaXRDdHJsJ1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2VkaXRFbnRpdHknLCBlZGl0RW50aXR5RGVwZW5kZW5jaWVzKTtcblxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIsICQpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIGxpbmtGdW5jdGlvbihzY29wZSkge1xuXG4gICAgICAgIGZ1bmN0aW9uIHNjcm9sbCgpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gJCh0aGlzKTtcbiAgICAgICAgICAgIHNlbGYuY3NzKCdoZWlnaHQnLCAnNTV2aCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY2xpY2soKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9ICQodGhpcyk7XG4gICAgICAgICAgICBpZiAod2luZG93LmlubmVySGVpZ2h0IC8gMyA+IHBhcnNlSW50KHNlbGYuY3NzKCdoZWlnaHQnKSkpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmNzcygnaGVpZ2h0JywgJzU1dmgnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jc3MoJ2hlaWdodCcsICczMHZoJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGV0YWlsc1BhbmVsO1xuICAgICAgICBpZiAoc2NvcGUubW9iaWxlKSB7XG4gICAgICAgICAgICBkZXRhaWxzUGFuZWwgPSAkKFwiI2RldGFpbHMtcGFuZWxcIik7XG4gICAgICAgICAgICBkZXRhaWxzUGFuZWwuY3NzKFwiaGVpZ2h0XCIsIFwiMzB2aFwiKTtcbiAgICAgICAgICAgIGRldGFpbHNQYW5lbC5zY3JvbGxUb3AoMCk7XG4gICAgICAgICAgICBkZXRhaWxzUGFuZWwuc2Nyb2xsKHNjcm9sbCk7XG4gICAgICAgICAgICBkZXRhaWxzUGFuZWwuY2xpY2soY2xpY2spO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkTW9iaWxlRXZlbnRzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgICAgIGxpbms6IGxpbmtGdW5jdGlvblxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2FkZE1vYmlsZUV2ZW50cycsIFthZGRNb2JpbGVFdmVudHNdKTtcbn0pKGFuZ3VsYXIsICQpO1xuIiwiKGZ1bmN0aW9uKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIG1vZGFsQ3RybCgkc2NvcGUsICRtb2RhbEluc3RhbmNlKSB7XG4gICAgICAgICRzY29wZS5jbG9zZVdpbmRvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRtb2RhbEluc3RhbmNlLmNsb3NlKCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ21vZGFsQ3RybCcsIFsnJHNjb3BlJywgJyRtb2RhbEluc3RhbmNlJywgbW9kYWxDdHJsXSk7XG5cbn0pKGFuZ3VsYXIpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNy8xMC8xNi5cbiAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBjb250cm9sRGVwZW5kZW5jaWVzID0gW2NvbnRyb2xEaXJlY3RpdmVdO1xuXG4gICAgZnVuY3Rpb24gY29udHJvbERpcmVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnanMvY29udHJvbC9jb250cm9scy5odG1sJyxcbiAgICAgICAgICAgIHJlc3RyaWN0ICAgOiAnRScsXG4gICAgICAgICAgICBzY29wZSAgICAgIDoge1xuICAgICAgICAgICAgICAgIHRvZ2dsZU5ldHdvcmsgOiAnPScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29udHJvbGxlciAgIDogJ2NvbnRyb2xDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBcyA6ICdjb250cm9sJyxcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXIgOiB7XG4gICAgICAgICAgICAgICAgbWluQ29ubmVjdGlvbnMgOiBcIj1cIlxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2NvbnRyb2wnLCBjb250cm9sRGVwZW5kZW5jaWVzKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMTQvMTYuXG4gKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgZGVwZW5kZW5jaWVzID0gW107XG5cbiAgICBmdW5jdGlvbiBkaXJlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcInJlc3RyaWN0XCI6IFwiRVwiLFxuICAgICAgICAgICAgXCJ0ZW1wbGF0ZVVybFwiOiBcIi9tYXAvbWFwLmh0bWxcIixcbiAgICAgICAgICAgIFwiY29udHJvbGxlclwiOiBcIm1hcEN0cmxcIlxuICAgICAgICB9O1xuICAgIH1cbiAgICAgICAgYW5ndWxhci5tb2R1bGUoXCJjaXZpYy1ncmFwaFwiKVxuICAgICAgICAgICAgLmRpcmVjdGl2ZShcIm1hcFwiLCBkZXBlbmRlbmNpZXMpO1xuXG59KShhbmd1bGFyKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb25zdGFudCgnXycsIHdpbmRvdy5fKVxuICAgICAgICAuY29uc3RhbnQoJ2NvbmZpZycsIHtcbiAgICAgICAgICAgIGFwaUhvc3Q6ICdodHRwczovL2FwaS5jaXZpY2dyYXBoLmlvLydcbiAgICAgICAgfSlcbiAgICAgICAgLmNvbmZpZyhbJyRsb2NhdGlvblByb3ZpZGVyJywgJyRjb21waWxlUHJvdmlkZXInLFxuICAgICAgICAgICAgZnVuY3Rpb24gKCRsb2NhdGlvblByb3ZpZGVyLCAkY29tcGlsZVByb3ZpZGVyKSB7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuICAgICAgICAgICAgICAgICRjb21waWxlUHJvdmlkZXIuZGVidWdJbmZvRW5hYmxlZCh0cnVlKTtcbiAgICAgICAgICAgIH1dKVxuICAgICAgICAuZmlsdGVyKCd0aG91c2FuZFN1ZmZpeCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoaW5wdXQsIGRlY2ltYWxzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGV4cCxcbiAgICAgICAgICAgICAgICAgICAgc3VmZml4ZXMgPSBbJ2snLCAnTScsICdHJywgJ1QnLCAnUCcsICdFJ107XG5cbiAgICAgICAgICAgICAgICBpZiAod2luZG93LmlzTmFOKGlucHV0KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQgPCAxMDAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBleHAgPSBNYXRoLmZsb29yKE1hdGgubG9nKGlucHV0KSAvIE1hdGgubG9nKDEwMDApKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiAoaW5wdXQgLyBNYXRoLnBvdygxMDAwLCBleHApKS50b0ZpeGVkKGRlY2ltYWxzKSArIHN1ZmZpeGVzW2V4cCAtIDFdO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgaG9tZURlcGVuZGVuY2llcyA9IFtcbiAgICAgICAgJyRzY29wZScsXG4gICAgICAgICdfJyxcbiAgICAgICAgJ2VudGl0eVNlcnZpY2UnLFxuICAgICAgICAnY29ubmVjdGlvblNlcnZpY2UnLFxuICAgICAgICBob21lQ3RybFxuICAgIF07XG5cbiAgICBmdW5jdGlvbiBob21lQ3RybCgkc2NvcGUsIF8sIGVudGl0eVNlcnZpY2UsIGNvbm5lY3Rpb25TZXJ2aWNlKSB7XG4gICAgICAgICRzY29wZS5lbnRpdGllcyAgICAgICAgICAgICAgICAgPSBbXTtcbiAgICAgICAgJHNjb3BlLnNlYXJjaEl0ZW1zICAgICAgICAgICAgICA9IG51bGw7XG4gICAgICAgICRzY29wZS5jYXRlZ29yaWVzICAgICAgICAgICAgICAgPSBbXTtcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRMb2NhdGlvbiAgICAgICAgICA9IG51bGw7XG4gICAgICAgICRzY29wZS5jbGlja2VkTG9jYXRpb24gICAgICAgICAgPSB7fTtcbiAgICAgICAgJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiA9IG51bGw7XG4gICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5ICAgICAgICAgICAgPSB7fTtcbiAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ICAgICA9IG51bGw7XG4gICAgICAgICRzY29wZS5lZGl0aW5nICAgICAgICAgICAgICAgICAgPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLmFjdGlvbnMgICAgICAgICAgICAgICAgICA9IHsnaW50ZXJhY3RlZCc6IGZhbHNlfTtcbiAgICAgICAgJHNjb3BlLnNob3dzZWFyY2hNQiAgICAgICAgICAgICA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUuc2hvd0FuYWx5dGljcyAgICAgICAgICAgID0gZmFsc2U7XG4gICAgICAgICRzY29wZS5lbnRpdHlUeXBlcyAgICAgICAgICAgICAgPSBlbnRpdHlTZXJ2aWNlLmdldEVudGl0eVR5cGVzKCk7XG4gICAgICAgICRzY29wZS5jb25uZWN0aW9uVHlwZXMgICAgICAgICAgPSBjb25uZWN0aW9uU2VydmljZS5nZXRDb25uZWN0aW9uVHlwZXMoKTtcbiAgICAgICAgJHNjb3BlLnN0YXR1cyAgICAgICAgICAgICAgICAgICA9IHtcbiAgICAgICAgICAgIFwiaXNOZXR3b3JrU2hvd25cIjogdHJ1ZSxcbiAgICAgICAgICAgIFwibGljZW5zZVwiICAgICAgIDogdHJ1ZSxcbiAgICAgICAgICAgIFwibmV0d29ya0xvYWRpbmdcIjogdHJ1ZVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS50b2dnbGVBbmFseXRpY3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2NvcGUuc2hvd0FuYWx5dGljcyA9ICEkc2NvcGUuc2hvd0FuYWx5dGljcztcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm1pbkNvbm5lY3Rpb25zID0gJHNjb3BlLm1pbkNvbm5lY3Rpb25zID0gMjtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICRzY29wZS4kd2F0Y2goJ21pbkNvbm5lY3Rpb25zJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgndHJpZ2dlck5ldHdvcmtEcmF3Jyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRzY29wZS5jb25uZWN0aW9uQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coc2VsZi5taW5Db25uZWN0aW9ucyk7XG4gICAgICAgICAgICAkc2NvcGUubWluQ29ubmVjdGlvbnMgPSBzZWxmLm1pbkNvbm5lY3Rpb25zO1xuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3RyaWdnZXJOZXR3b3JrRHJhdycpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5oeWRlUGFydGlhbHMgPSBmdW5jdGlvbiAoZXhjZXB0KSB7XG4gICAgICAgICAgICBpZiAoZXhjZXB0ID09PSBcInNlYXJjaFwiKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRpbmcgICAgICAgICA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zZXR0aW5nc0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXhjZXB0ID09PSBcInNldHRpbmdzXCIpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdGluZyAgICAgID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3dzZWFyY2hNQiA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChleGNlcHQgPT09IFwiZWRpdFwiKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNldHRpbmdzRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zaG93c2VhcmNoTUIgICAgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRpbmcgICAgICAgICA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zZXR0aW5nc0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd3NlYXJjaE1CICAgID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2hvd1NlYXJjaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5oeWRlUGFydGlhbHMoXCJzZWFyY2hcIik7XG4gICAgICAgICAgICAkc2NvcGUuc2hvd3NlYXJjaE1CICAgPSAhJHNjb3BlLnNob3dzZWFyY2hNQjtcbiAgICAgICAgICAgIC8vICRzY29wZS4kYnJvYWRjYXN0KCdoaWRlTGljZW5zZScpO1xuICAgICAgICAgICAgJHNjb3BlLnN0YXR1cy5saWNlbnNlID0gZmFsc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnRvZ2dsZVNldHRpbmdzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLmh5ZGVQYXJ0aWFscyhcInNldHRpbmdzXCIpO1xuICAgICAgICAgICAgJHNjb3BlLnNldHRpbmdzRW5hYmxlZCA9ICEkc2NvcGUuc2V0dGluZ3NFbmFibGVkO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zdGFydEVkaXQgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudEVudGl0eSA9IGVudGl0eTtcbiAgICAgICAgICAgIGlmICgkc2NvcGUubW9iaWxlKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmh5ZGVQYXJ0aWFscyhcImVkaXRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc2NvcGUuZWRpdGluZyA9IHRydWU7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnN3aXRjaFZpZXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyAkc2NvcGUuJGJyb2FkY2FzdCgndmlld0NoYW5nZScsICEkc2NvcGUuc3RhdHVzLmlzTmV0d29ya1Nob3duID8gJ01hcCcgOiAnTmV0d29yaycpO1xuICAgICAgICAgICAgLy8gJHNjb3BlLmNoYW5nZVZpZXcoISRzY29wZS5zdGF0dXMuaXNOZXR3b3JrU2hvd24gPyAnTWFwJyA6ICdOZXR3b3JrJyk7XG4gICAgICAgICAgICAkc2NvcGUuc3RhdHVzLmlzTmV0d29ya1Nob3duID0gISRzY29wZS5zdGF0dXMuaXNOZXR3b3JrU2hvd247XG4gICAgICAgICAgICBpZiAoJHNjb3BlLnN0YXR1cy5pc05ldHdvcmtTaG93bikge1xuICAgICAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCd0cmlnZ2VyTmV0d29ya0RyYXcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB3aW5kb3cubW9iaWxlY2hlY2sgICAgID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNoZWNrICA9IGZhbHNlLFxuICAgICAgICAgICAgICAgIHJlZ2V4ICA9IC8oYW5kcm9pZHxiYlxcZCt8bWVlZ28pLittb2JpbGV8YXZhbnRnb3xiYWRhXFwvfGJsYWNrYmVycnl8YmxhemVyfGNvbXBhbHxlbGFpbmV8ZmVubmVjfGhpcHRvcHxpZW1vYmlsZXxpcChob25lfG9kKXxpcmlzfGtpbmRsZXxsZ2UgfG1hZW1vfG1pZHB8bW1wfG1vYmlsZS4rZmlyZWZveHxuZXRmcm9udHxvcGVyYSBtKG9ifGluKWl8cGFsbSggb3MpP3xwaG9uZXxwKGl4aXxyZSlcXC98cGx1Y2tlcnxwb2NrZXR8cHNwfHNlcmllcyg0fDYpMHxzeW1iaWFufHRyZW98dXBcXC4oYnJvd3NlcnxsaW5rKXx2b2RhZm9uZXx3YXB8d2luZG93cyBjZXx4ZGF8eGlpbm8vaSxcbiAgICAgICAgICAgICAgICByZWdleDIgPSAvMTIwN3w2MzEwfDY1OTB8M2dzb3w0dGhwfDUwWzEtNl1pfDc3MHN8ODAyc3xhIHdhfGFiYWN8YWMoZXJ8b298c1xcLSl8YWkoa298cm4pfGFsKGF2fGNhfGNvKXxhbW9pfGFuKGV4fG55fHl3KXxhcHR1fGFyKGNofGdvKXxhcyh0ZXx1cyl8YXR0d3xhdShkaXxcXC1tfHIgfHMgKXxhdmFufGJlKGNrfGxsfG5xKXxiaShsYnxyZCl8YmwoYWN8YXopfGJyKGV8dil3fGJ1bWJ8YndcXC0obnx1KXxjNTVcXC98Y2FwaXxjY3dhfGNkbVxcLXxjZWxsfGNodG18Y2xkY3xjbWRcXC18Y28obXB8bmQpfGNyYXd8ZGEoaXR8bGx8bmcpfGRidGV8ZGNcXC1zfGRldml8ZGljYXxkbW9ifGRvKGN8cClvfGRzKDEyfFxcLWQpfGVsKDQ5fGFpKXxlbShsMnx1bCl8ZXIoaWN8azApfGVzbDh8ZXooWzQtN10wfG9zfHdhfHplKXxmZXRjfGZseShcXC18Xyl8ZzEgdXxnNTYwfGdlbmV8Z2ZcXC01fGdcXC1tb3xnbyhcXC53fG9kKXxncihhZHx1bil8aGFpZXxoY2l0fGhkXFwtKG18cHx0KXxoZWlcXC18aGkocHR8dGEpfGhwKCBpfGlwKXxoc1xcLWN8aHQoYyhcXC18IHxffGF8Z3xwfHN8dCl8dHApfGh1KGF3fHRjKXxpXFwtKDIwfGdvfG1hKXxpMjMwfGlhYyggfFxcLXxcXC8pfGlicm98aWRlYXxpZzAxfGlrb218aW0xa3xpbm5vfGlwYXF8aXJpc3xqYSh0fHYpYXxqYnJvfGplbXV8amlnc3xrZGRpfGtlaml8a2d0KCB8XFwvKXxrbG9ufGtwdCB8a3djXFwtfGt5byhjfGspfGxlKG5vfHhpKXxsZyggZ3xcXC8oa3xsfHUpfDUwfDU0fFxcLVthLXddKXxsaWJ3fGx5bnh8bTFcXC13fG0zZ2F8bTUwXFwvfG1hKHRlfHVpfHhvKXxtYygwMXwyMXxjYSl8bVxcLWNyfG1lKHJjfHJpKXxtaShvOHxvYXx0cyl8bW1lZnxtbygwMXwwMnxiaXxkZXxkb3x0KFxcLXwgfG98dil8enopfG10KDUwfHAxfHYgKXxtd2JwfG15d2F8bjEwWzAtMl18bjIwWzItM118bjMwKDB8Mil8bjUwKDB8Mnw1KXxuNygwKDB8MSl8MTApfG5lKChjfG0pXFwtfG9ufHRmfHdmfHdnfHd0KXxub2soNnxpKXxuenBofG8yaW18b3AodGl8d3YpfG9yYW58b3dnMXxwODAwfHBhbihhfGR8dCl8cGR4Z3xwZygxM3xcXC0oWzEtOF18YykpfHBoaWx8cGlyZXxwbChheXx1Yyl8cG5cXC0yfHBvKGNrfHJ0fHNlKXxwcm94fHBzaW98cHRcXC1nfHFhXFwtYXxxYygwN3wxMnwyMXwzMnw2MHxcXC1bMi03XXxpXFwtKXxxdGVrfHIzODB8cjYwMHxyYWtzfHJpbTl8cm8odmV8em8pfHM1NVxcL3xzYShnZXxtYXxtbXxtc3xueXx2YSl8c2MoMDF8aFxcLXxvb3xwXFwtKXxzZGtcXC98c2UoYyhcXC18MHwxKXw0N3xtY3xuZHxyaSl8c2doXFwtfHNoYXJ8c2llKFxcLXxtKXxza1xcLTB8c2woNDV8aWQpfHNtKGFsfGFyfGIzfGl0fHQ1KXxzbyhmdHxueSl8c3AoMDF8aFxcLXx2XFwtfHYgKXxzeSgwMXxtYil8dDIoMTh8NTApfHQ2KDAwfDEwfDE4KXx0YShndHxsayl8dGNsXFwtfHRkZ1xcLXx0ZWwoaXxtKXx0aW1cXC18dFxcLW1vfHRvKHBsfHNoKXx0cyg3MHxtXFwtfG0zfG01KXx0eFxcLTl8dXAoXFwuYnxnMXxzaSl8dXRzdHx2NDAwfHY3NTB8dmVyaXx2aShyZ3x0ZSl8dmsoNDB8NVswLTNdfFxcLXYpfHZtNDB8dm9kYXx2dWxjfHZ4KDUyfDUzfDYwfDYxfDcwfDgwfDgxfDgzfDg1fDk4KXx3M2MoXFwtfCApfHdlYmN8d2hpdHx3aShnIHxuY3xudyl8d21sYnx3b251fHg3MDB8eWFzXFwtfHlvdXJ8emV0b3x6dGVcXC0vaTtcbiAgICAgICAgICAgIChmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgICAgIGlmIChyZWdleC50ZXN0KGEpIHx8IHJlZ2V4Mi50ZXN0KGEuc3Vic3RyKDAsIDQpKSkge1xuICAgICAgICAgICAgICAgICAgICBjaGVjayA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkobmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBuYXZpZ2F0b3IudmVuZG9yIHx8IHdpbmRvdy5vcGVyYSk7XG4gICAgICAgICAgICByZXR1cm4gY2hlY2s7XG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS5tb2JpbGUgICAgICAgICAgPSB3aW5kb3cubW9iaWxlY2hlY2soKTtcbiAgICAgICAgJHNjb3BlLnNldHRpbmdzRW5hYmxlZCA9ICEkc2NvcGUubW9iaWxlO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZW50aXR5U2VydmljZS5nZXRBbGwoKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZW50aXRpZXMgPSBkYXRhLm5vZGVzO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYXRpb25zICAgPSBfLnVuaXEoXG4gICAgICAgICAgICAgICAgICAgICAgICBfLnBsdWNrKF8uZmxhdHRlbihfLnBsdWNrKCRzY29wZS5lbnRpdGllcywgJ2xvY2F0aW9ucycpKSwgJ2xvY2FsaXR5JykpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbnRpdGllc0J5TG9jYXRpb24gPSBfLm1hcChsb2NhdGlvbnMsIGZ1bmN0aW9uIChsb2MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaW5kaW5ncyA9IF8uZmlsdGVyKCRzY29wZS5lbnRpdGllcywgXy5mbG93KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8ucHJvcGVydHkoJ2xvY2F0aW9ucycpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8ucGFydGlhbFJpZ2h0KF8uYW55LCB7bG9jYWxpdHk6IGxvY30pXG4gICAgICAgICAgICAgICAgICAgICAgICApKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lICAgIDogbG9jLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgICAgOiAnbG9jYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0aWVzOiBmaW5kaW5ncyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWN0ICAgIDogXy56aXBPYmplY3QoXy5wbHVjayhmaW5kaW5ncywgJ25hbWUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5wbHVjayhmaW5kaW5ncywgJ2luZGV4JykpXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VhcmNoSXRlbXMgPSBlbnRpdGllc0J5TG9jYXRpb24uY29uY2F0KCRzY29wZS5lbnRpdGllcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgKCRzY29wZS5nZXRVUkxJRCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAvLyBTZXQgdGhlIGVudGl0eSB0byB0aGUgSUQgaW4gdGhlIFVSTCBpZiBpdCBleGlzdHMuXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAkc2NvcGUuc2V0RW50aXR5SUQoJHNjb3BlLmdldFVSTElEKCkpO1xuICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5vdmVydmlld1VybCA9ICdqcy9vdmVydmlldy9vdmVydmlldy5odG1sJztcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3RyaWdnZXJOZXR3b3JrRHJhdycpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCAxMDApO1xuXG4gICAgICAgICRzY29wZS5vdmVydmlld1VybCA9IG51bGw7XG5cbiAgICAgICAgJHNjb3BlLnNldEVudGl0eSAgID0gZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRMb2NhdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudEVudGl0eSAgID0gZW50aXR5O1xuICAgICAgICAgICAgaWYgKCRzY29wZS5lZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnN0b3BFZGl0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnZW50aXR5Q2hhbmdlJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNldEVudGl0eUlEID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICAkc2NvcGUuc2V0RW50aXR5KF8uZmluZCgkc2NvcGUuZW50aXRpZXMsIHsnaWQnOiBpZH0pKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2V0TG9jYXRpb24gPSBmdW5jdGlvbiAobG9jYXRpb24pIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50TG9jYXRpb24gPSBsb2NhdGlvbjtcbiAgICAgICAgICAgIGlmICgkc2NvcGUuZWRpdGluZykge1xuICAgICAgICAgICAgICAgICRzY29wZS5zdG9wRWRpdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ2l0ZW1DaGFuZ2UnKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2VsZWN0SXRlbSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnbG9jYXRpb24nKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNldExvY2F0aW9uKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlW2l0ZW0gJSAxID09PSAwID8gJ3NldEVudGl0eUlEJyA6ICdzZXRFbnRpdHknXShpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzZWxlY3RJdGVtJywgaXRlbSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLiRvbignc2V0Q3VycmVudEVudGl0eScsIGZ1bmN0aW9uIChldmVudCwgYXJncykge1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRFbnRpdHkgPSBhcmdzLnZhbHVlO1xuICAgICAgICB9KTtcblxuICAgICAgICAkc2NvcGUuJG9uKCdzZXRDdXJyZW50TG9jYXRpb24nLCBmdW5jdGlvbiAoZXZlbnQsIGFyZ3MpIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50TG9jYXRpb24gPSBhcmdzLnZhbHVlO1xuICAgICAgICB9KTtcblxuICAgICAgICAkc2NvcGUuc2V0RW50aXRpZXMgPSBmdW5jdGlvbiAoZW50aXRpZXMpIHtcbiAgICAgICAgICAgICRzY29wZS5lbnRpdGllcyA9IGVudGl0aWVzO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zdG9wRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5lZGl0aW5nID0gZmFsc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLiRvbihcImVkaXRFbnRpdHlTdWNjZXNzXCIsIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgJHNjb3BlLnNldEVudGl0aWVzKHJlc3BvbnNlLm5vZGVzKTtcbiAgICAgICAgICAgIC8vICRzY29wZS5zZXRFbnRpdHlJRCgkc2NvcGUuY3VycmVudEVudGl0eS5pZCk7XG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgndHJpZ2dlck5ldHdvcmtEcmF3Jyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRzY29wZS5hbmltYXRpb25zRW5hYmxlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ2hvbWVDdHJsJywgaG9tZURlcGVuZGVuY2llcyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA3LzExLzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGRlcGVuZGVuY2llcyA9IFtcbiAgICAgICAgZGlyZWN0aXZlXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIGRpcmVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwicmVzdHJpY3RcIjogXCJFXCIsXG4gICAgICAgICAgICBcInRlbXBsYXRlVXJsXCI6IFwianMvbmV0d29yay9uZXR3b3JrLmh0bWxcIixcbiAgICAgICAgICAgIFwiY29udHJvbGxlclwiOiBcIm5ldHdvcmtDdHJsXCJcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoXCIpXG4gICAgICAgIC5kaXJlY3RpdmUoXCJuZXR3b3JrXCIsIGRlcGVuZGVuY2llcyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI2LzE2LlxuICovXG4oZnVuY3Rpb24oYW5ndWxhcikge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2lucHV0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdGljdDogJ0UnLFxuICAgICAgICAgICAgcmVxdWlyZTogJz9uZ01vZGVsJyxcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmdNb2RlbCkge1xuICAgICAgICAgICAgICAgIGlmICggJ3R5cGUnIGluIGF0dHJzICYmIGF0dHJzLnR5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ3JhbmdlJyApIHtcbiAgICAgICAgICAgICAgICAgICAgbmdNb2RlbC4kcGFyc2Vycy5wdXNoKHBhcnNlRmxvYXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KTtcbn0pKGFuZ3VsYXIpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gb3ZlcnZpZXdDdHJsKCRzY29wZSwgXykge1xuICAgICAgICAkc2NvcGUuY2F0ZWdvcml6ZWRFbnRpdGllcyA9IHt9O1xuICAgICAgICBfLmZvckVhY2goXy5rZXlzKCRzY29wZS5lbnRpdHlUeXBlcyksIGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAkc2NvcGUuY2F0ZWdvcml6ZWRFbnRpdGllc1t0eXBlXSA9IF8uZmlsdGVyKCRzY29wZS5lbnRpdGllcywgeyd0eXBlJzogdHlwZX0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29udHJvbGxlcignb3ZlcnZpZXdDdHJsJywgWyckc2NvcGUnLCAnXycsIG92ZXJ2aWV3Q3RybF0pO1xufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMS8xNi5cbiAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIGFuYWx5dGljc0N0cmwoJHNjb3BlKSB7XG5cbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29udHJvbGxlcignYW5hbHl0aWNzQ3RybCcsIFsnJHNjb3BlJywgYW5hbHl0aWNzQ3RybF0pO1xufSkoYW5ndWxhcik7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBkZXRhaWxzQ3RybCgkc2NvcGUsIF8pIHtcbiAgICAgICAgJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0ID0ge1xuICAgICAgICAgICAgJ2tleV9wZW9wbGUnOiAzLFxuICAgICAgICAgICAgJ2dyYW50c19naXZlbic6IDMsXG4gICAgICAgICAgICAnZ3JhbnRzX3JlY2VpdmVkJzogMyxcbiAgICAgICAgICAgICdpbnZlc3RtZW50c19tYWRlJzogMyxcbiAgICAgICAgICAgICdpbnZlc3RtZW50c19yZWNlaXZlZCc6IDMsXG4gICAgICAgICAgICAnY29sbGFib3JhdGlvbnMnOiAzLFxuICAgICAgICAgICAgJ2VtcGxveW1lbnRzJzogMyxcbiAgICAgICAgICAgICdyZWxhdGlvbnMnOiAzLFxuICAgICAgICAgICAgJ2RhdGFfZ2l2ZW4nOiAzLFxuICAgICAgICAgICAgJ2RhdGFfcmVjZWl2ZWQnOiAzLFxuICAgICAgICAgICAgJ3JldmVudWVzJzogMyxcbiAgICAgICAgICAgICdleHBlbnNlcyc6IDNcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuaXRlbXNTaG93biA9IF8uY2xvbmUoJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0KTtcblxuICAgICAgICAkc2NvcGUuJG9uKCdlbnRpdHlDaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBSZXNldCBpdGVtcyBzaG93biBpbiBkZXRhaWxzIGxpc3QuXG4gICAgICAgICAgICAkc2NvcGUuaXRlbXNTaG93biA9IF8uY2xvbmUoJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0KTtcbiAgICAgICAgfSk7XG4gICAgICAgICRzY29wZS5zaG93TW9yZSA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAkc2NvcGUuaXRlbXNTaG93blt0eXBlXSA9ICRzY29wZS5jdXJyZW50RW50aXR5W3R5cGVdLmxlbmd0aDtcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLnNob3dMZXNzID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICRzY29wZS5pdGVtc1Nob3duW3R5cGVdID0gJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0W3R5cGVdO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdkZXRhaWxzQ3RybCcsIFsnJHNjb3BlJywgXCJfXCIsIGRldGFpbHNDdHJsXSk7XG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBDb25maWcoJGh0dHBQcm92aWRlcikge1xuICAgICAgICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXSA9IFwiWE1MSHR0cFJlcXVlc3RcIjtcbiAgICB9XG5cbiAgICBDb25maWcuJGluamVjdCA9IFtcIiRodHRwUHJvdmlkZXJcIl07XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKS5jb25maWcoQ29uZmlnKTtcblxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgLy8gdmFyIGFwaVVybCA9IFwiaHR0cHM6Ly9hcGkuY2l2aWNncmFwaC5pby9cIjtcbiAgICB2YXIgYXBpVXJsID0gXCJodHRwOi8vbG9jYWxob3N0Ojg4ODgvYXBpXCI7XG5cbiAgICB2YXIgZGVmYXVsdEhlYWRlciA9IHtcbiAgICAgICAgLy8gXCJFdmVudC1OYW1lXCI6IFwiVGVzdC1FdmVudFwiXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIFNlcnZpY2UoJGh0dHAsICRxKSB7XG4gICAgICAgIGZ1bmN0aW9uIGxvZ0FwaUVycm9yKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlJlY2lldmVkIGFuIGVycm9yIGZyb20gQVBJIHdpdGggdGhpcyBtZXNzYWdlOiAlT1wiLCBlcnIuZGF0YSk7XG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KGVycik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1bndyYXBBbmd1bGFySHR0cChyZXNwb25zZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXQodXJsLCBwYXJhbXMpIHtcbiAgICAgICAgICAgICRodHRwXG4gICAgICAgICAgICAgICAgLmdldChhcGlVcmwgKyB1cmwsIHsgXCJwYXJhbXNcIjogcGFyYW1zLCBcImhlYWRlcnNcIjogZGVmYXVsdEhlYWRlciB9KVxuICAgICAgICAgICAgICAgIC50aGVuKHVud3JhcEFuZ3VsYXJIdHRwLCBsb2dBcGlFcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgZWRpdENvbnRyb2xsZXJEZXBzID0gW1xuICAgICAgICAnJHNjb3BlJyxcbiAgICAgICAgJyRodHRwJyxcbiAgICAgICAgJyR0aW1lb3V0JyxcbiAgICAgICAgJ18nLFxuICAgICAgICAnZW50aXR5U2VydmljZScsXG4gICAgICAgICdsb2NhdGlvblNlcnZpY2UnLFxuICAgICAgICAnY29uZmlnJyxcbiAgICAgICAgZWRpdEN0cmxcbiAgICBdO1xuXG4gICAgZnVuY3Rpb24gaXNEZWYob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmogIT09IHVuZGVmaW5lZCAmJiBvYmogIT09IG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZWRpdEN0cmwoJHNjb3BlLCAkaHR0cCwgJHRpbWVvdXQsIF8sIGVudGl0eVNlcnZpY2UsIGxvY2F0aW9uU2VydmljZSwgY29uZmlnKSB7XG4gICAgICAgICRzY29wZS5pc0VkaXRpbmcgPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLmVkaXRFbnRpdHkgPSBlbnRpdHlTZXJ2aWNlLmdldEVudGl0eU1vZGVsKCRzY29wZS5lbnRpdHkpO1xuICAgICAgICAkc2NvcGUuZW50aXR5VHlwZXMgPSBlbnRpdHlTZXJ2aWNlLmdldEVudGl0eVR5cGVzKCk7XG4gICAgICAgICRzY29wZS5pbmZsdWVuY2VUeXBlcyA9IGVudGl0eVNlcnZpY2UuZ2V0SW5mbHVlbmNlVHlwZXMoKTtcblxuICAgICAgICB2YXIgY2F0ZWdvcnlCYWNrdXA7XG5cbiAgICAgICAgJHNjb3BlLmNhdGVnb3JpZXMgPSBbXTtcblxuICAgICAgICAkc2NvcGUuYWRkcmVzc1NlYXJjaCA9IGZ1bmN0aW9uIChzZWFyY2gpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5qc29ucCgnaHR0cHM6Ly9kZXYudmlydHVhbGVhcnRoLm5ldC9SRVNUL3YxL0xvY2F0aW9ucycsIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHNlYXJjaCxcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnQWk1ODU4MXlDLVNyN21jRmJZVHRVa1MzaXhFN2Y2WnVKbmJGSkNWSTRoQXRXMVhvREVlWnlpZFF6MmdMQ0N5RCcsXG4gICAgICAgICAgICAgICAgICAgICdqc29ucCc6ICdKU09OX0NBTExCQUNLJyxcbiAgICAgICAgICAgICAgICAgICAgJ2luY2x1ZGUnOiAnY2lzbzInXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRGVmKHJlc3BvbnNlLmRhdGEucmVzb3VyY2VTZXRzKSAmJiByZXNwb25zZS5kYXRhLnJlc291cmNlU2V0cy5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEucmVzb3VyY2VTZXRzWzBdLnJlc291cmNlcztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS50b2dnbGVDYXRlZ29yeSA9IGZ1bmN0aW9uIChjYXRlZ29yeSkge1xuICAgICAgICAgICAgaWYgKCRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcy5wdXNoKGNhdGVnb3J5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgY2F0ZWdvcnlJbmRleCBpbiAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcy5oYXNPd25Qcm9wZXJ0eShjYXRlZ29yeUluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGVudGl0eUNhdGVnb3J5ID0gJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllc1tjYXRlZ29yeUluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVudGl0eUNhdGVnb3J5LmlkID09PSBjYXRlZ29yeS5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5Q2F0ZWdvcnkuZW5hYmxlZCA9IGNhdGVnb3J5LmVuYWJsZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMucHVzaChjYXRlZ29yeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZXRMb2NhdGlvbiA9IGZ1bmN0aW9uIChsb2NhdGlvbiwgaXNMYXN0KSB7XG4gICAgICAgICAgICAkc2NvcGUuYWRkcmVzc1NlYXJjaChsb2NhdGlvbi5mb3JtYXR0ZWRBZGRyZXNzKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChhcGlDYWxsUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBhcGlDYWxsUmVzdWx0WzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyA9IHJlc3VsdC5hZGRyZXNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnQgPSByZXN1bHQucG9pbnQ7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRMb2NhdGlvbihpc0xhc3QpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFBhcnNlcyBBUEkgY2FsbCByZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uYWRkcmVzc19saW5lID0gaXNEZWYoYWRkcmVzcy5hZGRyZXNzTGluZSkgPyBhZGRyZXNzLmFkZHJlc3NMaW5lIDogJyc7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmxvY2FsaXR5ID0gaXNEZWYoYWRkcmVzcy5sb2NhbGl0eSkgPyBhZGRyZXNzLmxvY2FsaXR5IDogJyc7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmRpc3RyaWN0ID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRGVmKGFkZHJlc3MuYWRtaW5EaXN0cmljdCkgPyBhZGRyZXNzLmFkbWluRGlzdHJpY3QgOiAnJztcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uY291bnRyeSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0RlZihhZGRyZXNzLmNvdW50cnlSZWdpb24pID8gYWRkcmVzcy5jb3VudHJ5UmVnaW9uIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uY291bnRyeV9jb2RlID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRGVmKGFkZHJlc3MuY291bnRyeVJlZ2lvbklzbzIpID8gYWRkcmVzcy5jb3VudHJ5UmVnaW9uSXNvMiA6ICcnO1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5jb29yZGluYXRlcyA9IGlzRGVmKHBvaW50LmNvb3JkaW5hdGVzKSA/IHBvaW50LmNvb3JkaW5hdGVzIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucG9zdGFsX2NvZGUgPSBpc0RlZihhZGRyZXNzLnBvc3RhbENvZGUpID8gYWRkcmVzcy5wb3N0YWxDb2RlIDogbnVsbDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuYWRkTG9jYXRpb24gPSBmdW5jdGlvbiAoaXNMYXN0KSB7XG4gICAgICAgICAgICBpZiAoaXNMYXN0KSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRFbnRpdHkubG9jYXRpb25zLnB1c2gobG9jYXRpb25TZXJ2aWNlLmdldExvY2F0aW9uTW9kZWwoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmFkZEtleVBlcnNvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIEFkZCBibGFuayBmaWVsZCB0byBlZGl0IGlmIHRoZXJlIGFyZSBub25lLlxuICAgICAgICAgICAgLy8gV0FUQ0ggT1VUISBUT0RPOiBJZiBzb21lb25lIGRlbGV0ZXMgYW4gb2xkIHBlcnNvbiwgZGVsZXRlIHRoZWlyIGlkIHRvby5cbiAgICAgICAgICAgIC8vIGkuZS4gbWFrZSBzdXJlIG9sZC9jbGVhcmVkIGZvcm0gZmllbGRzIGFyZW4ndCBiZWluZyBlZGl0ZWQgaW50byBuZXcgcGVvcGxlLlxuICAgICAgICAgICAgaWYgKCEoXy5zb21lKCRzY29wZS5lZGl0RW50aXR5LmtleV9wZW9wbGUsIHsnbmFtZSc6ICcnLCAnaWQnOiBudWxsfSkpKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRFbnRpdHkua2V5X3Blb3BsZS5wdXNoKHsnbmFtZSc6ICcnLCAnaWQnOiBudWxsfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNldEZ1bmRpbmdDb25uZWN0aW9uID0gZnVuY3Rpb24gKGVudGl0eSwgZnVuZGluZykge1xuICAgICAgICAgICAgLy8gQWRkIG90aGVyIGVudGl0eSdzIGlkIHRvIHRoaXMgZmluYW5jZSBjb25uZWN0aW9uLlxuICAgICAgICAgICAgZnVuZGluZy5lbnRpdHlfaWQgPSBlbnRpdHkuaWQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmFkZEZ1bmRpbmdDb25uZWN0aW9uID0gZnVuY3Rpb24gKGZ1bmRpbmcpIHtcbiAgICAgICAgICAgIGlmICghXy5zb21lKGZ1bmRpbmcsIHsnZW50aXR5JzogJyd9KSkge1xuICAgICAgICAgICAgICAgIC8vIE1heWJlIHNldCBhbW91bnQgdG8gMCBpbnN0ZWFkIG9mIG51bGw/XG4gICAgICAgICAgICAgICAgZnVuZGluZy5wdXNoKHsnZW50aXR5JzogJycsICdhbW91bnQnOiBudWxsLCAneWVhcic6IG51bGwsICdpZCc6IG51bGx9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2V0Q29ubmVjdGlvbiA9IGZ1bmN0aW9uIChlbnRpdHksIGNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uZW50aXR5X2lkID0gZW50aXR5LmlkO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5hZGRDb25uZWN0aW9uID0gZnVuY3Rpb24gKGNvbm5lY3Rpb25zKSB7XG4gICAgICAgICAgICAvLyBBZGQgYW4gZW1wdHkgY29ubmVjdGlvbiB0byBlZGl0IGlmIG5vbmUgZXhpc3QuXG4gICAgICAgICAgICBpZiAoIV8uc29tZShjb25uZWN0aW9ucywgeydlbnRpdHknOiAnJywgJ2lkJzogbnVsbH0pKSB7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbnMucHVzaCh7J2VudGl0eSc6ICcnLCAnaWQnOiBudWxsLCAnZGV0YWlscyc6IG51bGx9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuYWRkRmluYW5jZSA9IGZ1bmN0aW9uIChyZWNvcmRzKSB7XG4gICAgICAgICAgICAvLyBBZGQgbmV3IGZpbmFuY2UgZmllbGQgaWYgYWxsIGN1cnJlbnQgZmllbGRzIGFyZSB2YWxpZC5cbiAgICAgICAgICAgIGlmIChfLmV2ZXJ5KHJlY29yZHMsIGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByLmFtb3VudCA+IDAgJiYgci55ZWFyID4gMTc1MDtcbiAgICAgICAgICAgICAgICB9KSkge1xuICAgICAgICAgICAgICAgIHJlY29yZHMucHVzaCh7J2Ftb3VudCc6IG51bGwsICd5ZWFyJzogbnVsbCwgJ2lkJzogbnVsbH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zYXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLmlzU2F2aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5lZGl0RW50aXR5LmdlbmVyYXRlREJNb2RlbCgpKTtcblxuICAgICAgICAgICAgJGh0dHAucG9zdChjb25maWcuYXBpSG9zdCArICdhcGkvc2F2ZScsIHsnZW50aXR5JzogJHNjb3BlLmVkaXRFbnRpdHkuZ2VuZXJhdGVEQk1vZGVsKCl9KVxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXNTYXZpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRlbWl0KFwiZWRpdEVudGl0eVN1Y2Nlc3NcIiwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAvLyBDYWxsIHRvIGhvbWVDdHJsJ3MgcGFyZW50IHN0b3BFZGl0KCkgdG8gY2hhbmdlIHZpZXcgYmFjayBhbmQgYW55IG90aGVyXG4gICAgICAgICAgICAgICAgICAgIC8vIGhpZ2gtbGV2ZWwgY2hhbmdlcy5cbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNhbmNlbEVkaXQoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmlzRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMjAwMCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmNhbmNlbEVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2NvcGUuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLiR3YXRjaCgnZW50aXR5JywgZnVuY3Rpb24gKG5ld1ZhbCwgb2xkVmFsKSB7XG4gICAgICAgICAgICBpZiAoYW5ndWxhci5lcXVhbHMobmV3VmFsLCBvbGRWYWwpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuZW50aXR5KTtcblxuICAgICAgICAgICAgJHNjb3BlLmVkaXRFbnRpdHkgPSBlbnRpdHlTZXJ2aWNlLmdldEVudGl0eU1vZGVsKG5ld1ZhbCk7XG4gICAgICAgICAgICAkc2NvcGUuY2F0ZWdvcmllcyA9IGFuZ3VsYXIuY29weShjYXRlZ29yeUJhY2t1cCk7XG5cbiAgICAgICAgICAgIGluaXRDYXRlZ29yeUFycmF5KCk7XG5cbiAgICAgICAgICAgICRzY29wZS5pc0VkaXRpbmcgPSBpc0RlZigkc2NvcGUuZWRpdEVudGl0eS5pZCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0aWFsaXplcyBjYXRlZ29yeSBmaWVsZHMgd2l0aCBlbnRpdHkgdmFsdWVzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBMb29wcyB0aHJvdWdoIGNhdGVnb3J5IGluIGNhdGVnb3JpZXMgYW5kIGxvb3BzIHRocm91Z2ggY2F0ZWdvcnkgaW4gZW50aXR5LiBJZGVudGlmaWVzXG4gICAgICAgICAqIGNhdGVnb3JpZXMgZW5hYmxlZCBpbiB0aGUgZW50aXR5IGFuZCBzZXRzIGxvY2FsIGRpc3BsYXkgZGF0YS4gVGhpcyBpcyBiZWNhdXNlIHdlIGNyZWF0ZWRcbiAgICAgICAgICogYSBiYWNrdXAgb2YgZW50aXR5IGRhdGEgc28gdGhhdCB0aGUgYXBpIGRhdGEgaXMgbm90IHRhbXBlcmVkIHdpdGggZGlyZWN0bHkuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRPRE86IHJlcGxhY2Ugd2l0aCBiZXR0ZXIgZGF0YSBzdHJ1Y3R1cmUgZm9yIGNhdGVnb3JpZXMuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBpbml0Q2F0ZWdvcnlBcnJheSgpIHtcbiAgICAgICAgICAgIHZhciBjYXRlZ29yeSxcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUluZGV4LFxuICAgICAgICAgICAgICAgIGVudGl0eUNhdGVnb3J5SW5kZXgsXG4gICAgICAgICAgICAgICAgZW50aXR5Q2F0ZWdvcnk7XG5cbiAgICAgICAgICAgIGZvciAoY2F0ZWdvcnlJbmRleCBpbiAkc2NvcGUuY2F0ZWdvcmllcykge1xuICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmNhdGVnb3JpZXMuaGFzT3duUHJvcGVydHkoY2F0ZWdvcnlJbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGVnb3J5ID0gJHNjb3BlLmNhdGVnb3JpZXNbY2F0ZWdvcnlJbmRleF07XG4gICAgICAgICAgICAgICAgZm9yIChlbnRpdHlDYXRlZ29yeUluZGV4IGluICRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzLmhhc093blByb3BlcnR5KGVudGl0eUNhdGVnb3J5SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbnRpdHlDYXRlZ29yeSA9ICRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXNbZW50aXR5Q2F0ZWdvcnlJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChjYXRlZ29yeS5pZCA9PT0gZW50aXR5Q2F0ZWdvcnkuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5LmVuYWJsZWQgPSBlbnRpdHlDYXRlZ29yeS5lbmFibGVkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmV0cmlldmUgQ2F0ZWdvcmllcyBmcm9tIERCXG4gICAgICAgICRodHRwLmdldChjb25maWcuYXBpSG9zdCArICdhcGkvY2F0ZWdvcmllcycpXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGNhdGVnb3J5QmFja3VwID0gZGF0YS5jYXRlZ29yaWVzO1xuICAgICAgICAgICAgICAgIC8vIENyZWF0ZXMgYmFja3VwIG9mIGRhdGEgdXNpbmcgQW5ndWxhciB0byBwcmV2ZW50IGFwaSBkYXRhIGZyb20gYmVpbmcgdGFtcGVyZWRcbiAgICAgICAgICAgICAgICAvLyBkaXJlY3RseVxuICAgICAgICAgICAgICAgICRzY29wZS5jYXRlZ29yaWVzID0gYW5ndWxhci5jb3B5KGNhdGVnb3J5QmFja3VwKTtcbiAgICAgICAgICAgICAgICAvLyAkc2NvcGUuY2F0ZWdvcmllcyA9IGRhdGEuY2F0ZWdvcmllcztcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdlZGl0Q3RybCcsIGVkaXRDb250cm9sbGVyRGVwcyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI4LzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGNhdGVnb3J5U2VydmljZURlcGVuZGVuY2llcyA9IFtcbiAgICAgICAgQ2F0ZWdvcnlTZXJ2aWNlXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIENhdGVnb3J5U2VydmljZSgpIHtcblxuICAgICAgICBmdW5jdGlvbiBpc0RlZihvKSB7IHJldHVybiBvICE9PSB1bmRlZmluZWQgJiYgbyAhPT0gbnVsbDsgfVxuXG4gICAgICAgIGZ1bmN0aW9uIENhdGVnb3J5KG9iaikge1xuICAgICAgICAgICAgdmFyIGRlZk9iaiA9IGlzRGVmKG9iaikgPyBvYmogOiB7fTtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IChpc0RlZihkZWZPYmoubmFtZSkgPyBkZWZPYmoubmFtZSA6IG51bGwpO1xuICAgICAgICAgICAgdGhpcy5lbmFibGVkID0gKGlzRGVmKGRlZk9iai5lbmFibGUpID8gZGVmT2JqLmVuYWJsZWQgOiB0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuaWQgPSAoaXNEZWYoZGVmT2JqLmlkKSA/IGRlZk9iai5pZCA6IG51bGwpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5nZXRDYXRlZ29yeU1vZGVsID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IENhdGVnb3J5KG9iaik7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLnNlcnZpY2UoJ2NhdGVnb3J5U2VydmljZScsIGNhdGVnb3J5U2VydmljZURlcGVuZGVuY2llcyk7XG5cbn0pKGFuZ3VsYXIpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNy8xNi5cbiAqL1xuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgY29ubmVjdGlvblNlcnZpY2UgPSBbQ29ubmVjdGlvbnNdO1xuICAgIHZhciBjb25uZWN0aW9uVHlwZXMgPSB7XG4gICAgICAgICdGdW5kaW5nJzogdHJ1ZSxcbiAgICAgICAgJ0RhdGEnOiB0cnVlLFxuICAgICAgICAnRW1wbG95bWVudCc6IHRydWUsXG4gICAgICAgICdDb2xsYWJvcmF0aW9uJzogdHJ1ZVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBpc0RlZihvKSB7XG4gICAgICAgIHJldHVybiBvICE9PSB1bmRlZmluZWQgJiYgbyAhPT0gbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBDb25uZWN0aW9ucygpIHtcbiAgICAgICAgZnVuY3Rpb24gQ29ubmVjdGlvbihvYmopIHtcbiAgICAgICAgICAgIHZhciBvYmpJc0RlZiA9IGlzRGVmKG9iaik7XG4gICAgICAgICAgICB0aGlzLmVudGl0eSA9IChvYmpJc0RlZiAmJiBpc0RlZihvYmouZW50aXR5KSA/IG9iai5lbnRpdHkgOiBudWxsKTtcbiAgICAgICAgICAgIHRoaXMuaWQgPSAob2JqSXNEZWYgJiYgaXNEZWYob2JqLmlkKSA/IG9iai5pZCA6IG51bGwpO1xuICAgICAgICAgICAgdGhpcy5kZXRhaWxzID0gKG9iaklzRGVmICYmIGlzRGVmKG9iai5kZXRhaWxzKSA/IG9iai5kZXRhaWxzIDogbnVsbCk7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSAob2JqSXNEZWYgJiYgaXNEZWYob2JqLm5hbWUpID8gb2JqLm5hbWU6IG51bGwpO1xuICAgICAgICAgICAgdGhpcy5lbnRpdHlfaWQgPSAob2JqSXNEZWYgJiYgaXNEZWYob2JqLmVudGl0eV9pZCkgPyBvYmouZW50aXR5X2lkOiBudWxsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZ2V0Q29ubmVjdGlvbk1vZGVsID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDb25uZWN0aW9uKG9iaik7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXRDb25uZWN0aW9uVHlwZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvblR5cGVzO1xuICAgICAgICB9O1xuICAgIH1cblxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLnNlcnZpY2UoJ2Nvbm5lY3Rpb25TZXJ2aWNlJywgY29ubmVjdGlvblNlcnZpY2UpO1xuXG59KShhbmd1bGFyKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjcvMTYuXG4gKi9cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gaXNEZWZpbmVkKG8pIHtcbiAgICAgICAgcmV0dXJuICEodHlwZW9mIG8gPT09IFwidW5kZWZpbmVkXCIgfHwgbyA9PT0gbnVsbCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gRW50aXR5U2VydmljZSgkaHR0cCwgJHEsIGNvbmZpZywgZnVuZGluZ0Nvbm5lY3Rpb25TZXJ2aWNlLCBjb25uZWN0aW9uU2VydmljZSwgZmluYW5jZVNlcnZpY2UsIGxvY2F0aW9uU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5U2VydmljZSkge1xuXG4gICAgICAgIGZ1bmN0aW9uIGxvZ0FwaUVycm9yKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlJlY2lldmVkIGFuIGVycm9yIGZyb20gQVBJIHdpdGggdGhpcyBtZXNzYWdlOiAlT1wiLCBlcnIuZGF0YSk7XG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KGVycik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1bndyYXBBbmd1bGFySHR0cChyZXNwb25zZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZW50aXR5VHlwZXMgPSB7XG4gICAgICAgICAgICAnR292ZXJubWVudCc6IHRydWUsXG4gICAgICAgICAgICAnRm9yLVByb2ZpdCc6IHRydWUsXG4gICAgICAgICAgICAnTm9uLVByb2ZpdCc6IHRydWUsXG4gICAgICAgICAgICAnSW5kaXZpZHVhbCc6IHRydWVcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgaW5mbHVlbmNlVHlwZXMgPSBbXG4gICAgICAgICAgICAnTG9jYWwnLFxuICAgICAgICAgICAgJ05hdGlvbmFsJyxcbiAgICAgICAgICAgICdHbG9iYWwnXG4gICAgICAgIF07XG5cbiAgICAgICAgZnVuY3Rpb24gbG9vcEFuZEluaXQobW9kZWxBcnJheSwgaW5pdE1vZGVsRnVuY3Rpb24pIHtcbiAgICAgICAgICAgIGlmKCAhKCBpc0RlZmluZWQobW9kZWxBcnJheSkgfHwgYW5ndWxhci5pc0FycmF5KG1vZGVsQXJyYXkpICkgKSByZXR1cm4gW2luaXRNb2RlbEZ1bmN0aW9uKCldO1xuICAgICAgICAgICAgdmFyIGFycmF5SW5kZXgsXG4gICAgICAgICAgICAgICAgYXJyYXlWYWx1ZSxcbiAgICAgICAgICAgICAgICBuZXdNb2RlbEFycmF5ID0gW107XG5cbiAgICAgICAgICAgIGZvciAoIGFycmF5SW5kZXggaW4gbW9kZWxBcnJheSApIHtcbiAgICAgICAgICAgICAgICBpZighbW9kZWxBcnJheS5oYXNPd25Qcm9wZXJ0eShhcnJheUluZGV4KSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgYXJyYXlWYWx1ZSA9IG1vZGVsQXJyYXlbYXJyYXlJbmRleF07XG5cbiAgICAgICAgICAgICAgICBpZighYW5ndWxhci5pc09iamVjdChhcnJheVZhbHVlKSkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICBuZXdNb2RlbEFycmF5LnB1c2goaW5pdE1vZGVsRnVuY3Rpb24oYXJyYXlWYWx1ZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3TW9kZWxBcnJheS5wdXNoKGluaXRNb2RlbEZ1bmN0aW9uKCkpO1xuXG4gICAgICAgICAgICByZXR1cm4gbmV3TW9kZWxBcnJheTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIEVudGl0eShvYmopIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIHZhciBkZWZPYmogPSBpc0RlZmluZWQob2JqKSA/IG9iaiA6IHt9O1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZURCTW9kZWwoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRiTW9kZWwgPSBuZXcgRW50aXR5KHNlbGYpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwubG9jYXRpb25zLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwubG9jYXRpb25zLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZ3JhbnRzX3JlY2VpdmVkLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZ3JhbnRzX3JlY2VpdmVkLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZ3JhbnRzX2dpdmVuLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZ3JhbnRzX2dpdmVuLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuaW52ZXN0bWVudHNfcmVjZWl2ZWQucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5pbnZlc3RtZW50c19yZWNlaXZlZC5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmludmVzdG1lbnRzX21hZGUucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5pbnZlc3RtZW50c19tYWRlLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZGF0YV9naXZlbi5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmRhdGFfZ2l2ZW4ucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5kYXRhX3JlY2VpdmVkLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZGF0YV9yZWNlaXZlZC5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmNvbGxhYm9yYXRpb25zLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuY29sbGFib3JhdGlvbnMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5rZXlfcGVvcGxlLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwua2V5X3Blb3BsZS5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmVtcGxveW1lbnRzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZW1wbG95bWVudHMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5yZXZlbnVlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLnJldmVudWVzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZXhwZW5zZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5leHBlbnNlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmNhdGVnb3JpZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5jYXRlZ29yaWVzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZGVzY3JpcHRpb24gPSAnJztcblxuICAgICAgICAgICAgICAgIHJldHVybiBkYk1vZGVsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRQcm9wZXJ0eShwcm9wZXJ0eSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlZk9iaiA9IGlzRGVmaW5lZChvYmopID8gb2JqIDoge307XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gaXNEZWZpbmVkKGRlZmF1bHRWYWx1ZSkgPyBkZWZhdWx0VmFsdWUgOiBudWxsO1xuICAgICAgICAgICAgICAgIHJldHVybiBpc0RlZmluZWQoZGVmT2JqW3Byb3BlcnR5XSlcbiAgICAgICAgICAgICAgICAgICAgPyBkZWZPYmpbcHJvcGVydHldXG4gICAgICAgICAgICAgICAgICAgIDogdmFsdWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGYuaWQgPSBnZXRQcm9wZXJ0eShcImlkXCIpO1xuICAgICAgICAgICAgc2VsZi5uYW1lID0gZ2V0UHJvcGVydHkoXCJuYW1lXCIpO1xuICAgICAgICAgICAgc2VsZi5pbmZsdWVuY2UgPSBnZXRQcm9wZXJ0eShcImluZmx1ZW5jZVwiKTtcbiAgICAgICAgICAgIHNlbGYudHlwZSA9IGdldFByb3BlcnR5KFwidHlwZVwiKTtcbiAgICAgICAgICAgIHNlbGYubmlja25hbWUgPSBnZXRQcm9wZXJ0eShcIm5pY2tuYW1lXCIpO1xuICAgICAgICAgICAgc2VsZi51cmwgPSBnZXRQcm9wZXJ0eShcInVybFwiKTtcbiAgICAgICAgICAgIHNlbGYudHdpdHRlcl9oYW5kbGUgPSBnZXRQcm9wZXJ0eShcInR3aXR0ZXJfaGFuZGxlXCIpO1xuICAgICAgICAgICAgc2VsZi5lbXBsb3llZXMgPSBnZXRQcm9wZXJ0eShcImVtcGxveWVlc1wiKTtcblxuICAgICAgICAgICAgc2VsZi5sb2NhdGlvbnMgPSBsb29wQW5kSW5pdChkZWZPYmoubG9jYXRpb25zLCBsb2NhdGlvblNlcnZpY2UuZ2V0TG9jYXRpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmdyYW50c19yZWNlaXZlZCA9IGxvb3BBbmRJbml0KGRlZk9iai5ncmFudHNfcmVjZWl2ZWQsIGZ1bmRpbmdDb25uZWN0aW9uU2VydmljZS5nZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuaW52ZXN0bWVudHNfcmVjZWl2ZWQgPSBsb29wQW5kSW5pdChkZWZPYmouaW52ZXN0bWVudHNfcmVjZWl2ZWQsIGZ1bmRpbmdDb25uZWN0aW9uU2VydmljZS5nZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuZ3JhbnRzX2dpdmVuID0gbG9vcEFuZEluaXQoZGVmT2JqLmdyYW50c19naXZlbiwgZnVuZGluZ0Nvbm5lY3Rpb25TZXJ2aWNlLmdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5pbnZlc3RtZW50c19tYWRlID0gbG9vcEFuZEluaXQoZGVmT2JqLmludmVzdG1lbnRzX21hZGUsIGZ1bmRpbmdDb25uZWN0aW9uU2VydmljZS5nZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuZGF0YV9naXZlbiA9IGxvb3BBbmRJbml0KGRlZk9iai5kYXRhX2dpdmVuLCBjb25uZWN0aW9uU2VydmljZS5nZXRDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5kYXRhX3JlY2VpdmVkID0gbG9vcEFuZEluaXQoZGVmT2JqLmRhdGFfcmVjZWl2ZWQsIGNvbm5lY3Rpb25TZXJ2aWNlLmdldENvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmNvbGxhYm9yYXRpb25zID0gbG9vcEFuZEluaXQoZGVmT2JqLmNvbGxhYm9yYXRpb25zLCBjb25uZWN0aW9uU2VydmljZS5nZXRDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5rZXlfcGVvcGxlID0gbG9vcEFuZEluaXQoZGVmT2JqLmtleV9wZW9wbGUsIGNvbm5lY3Rpb25TZXJ2aWNlLmdldENvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmVtcGxveW1lbnRzID0gbG9vcEFuZEluaXQoZGVmT2JqLmVtcGxveW1lbnRzLCBjb25uZWN0aW9uU2VydmljZS5nZXRDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5yZXZlbnVlcyA9IGxvb3BBbmRJbml0KGRlZk9iai5yZXZlbnVlcywgZmluYW5jZVNlcnZpY2UuZ2V0RmluYW5jZU1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuZXhwZW5zZXMgPSBsb29wQW5kSW5pdChkZWZPYmouZXhwZW5zZXMsIGZpbmFuY2VTZXJ2aWNlLmdldEZpbmFuY2VNb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmNhdGVnb3JpZXMgPSBsb29wQW5kSW5pdChkZWZPYmouY2F0ZWdvcmllcywgY2F0ZWdvcnlTZXJ2aWNlLmdldENhdGVnb3J5TW9kZWwpO1xuXG4gICAgICAgICAgICBzZWxmLmdlbmVyYXRlREJNb2RlbCA9IGdlbmVyYXRlREJNb2RlbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEVudGl0eU1vZGVsKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFbnRpdHkob2JqKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEVudGl0eVR5cGVzKCkge1xuICAgICAgICAgICAgcmV0dXJuIGVudGl0eVR5cGVzO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0SW5mbHVlbmNlVHlwZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5mbHVlbmNlVHlwZXM7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRBbGwoKSB7XG5cbiAgICAgICAgICAgIHJldHVybiAkaHR0cFxuICAgICAgICAgICAgICAgIC5nZXQoY29uZmlnLmFwaUhvc3QgKyAnYXBpL2VudGl0aWVzJylcbiAgICAgICAgICAgICAgICAudGhlbih1bndyYXBBbmd1bGFySHR0cCwgbG9nQXBpRXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiZ2V0RW50aXR5TW9kZWxcIjogZ2V0RW50aXR5TW9kZWwsXG4gICAgICAgICAgICBcImdldEVudGl0eVR5cGVzXCI6IGdldEVudGl0eVR5cGVzLFxuICAgICAgICAgICAgXCJnZXRJbmZsdWVuY2VUeXBlc1wiOiBnZXRJbmZsdWVuY2VUeXBlcyxcbiAgICAgICAgICAgIFwiZ2V0QWxsXCI6IGdldEFsbFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIEVudGl0eVNlcnZpY2UuJGluamVjdCA9IFtcbiAgICAgICAgJyRodHRwJyxcbiAgICAgICAgJyRxJyxcbiAgICAgICAgJ2NvbmZpZycsXG4gICAgICAgICdmdW5kaW5nQ29ubmVjdGlvblNlcnZpY2UnLFxuICAgICAgICAnY29ubmVjdGlvblNlcnZpY2UnLFxuICAgICAgICAnZmluYW5jZVNlcnZpY2UnLFxuICAgICAgICAnbG9jYXRpb25TZXJ2aWNlJyxcbiAgICAgICAgJ2NhdGVnb3J5U2VydmljZSdcbiAgICBdO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5mYWN0b3J5KCdlbnRpdHlTZXJ2aWNlJywgRW50aXR5U2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGZpbmFuY2VTZXJ2aWNlID0gW0ZpbmFuY2VTZXJ2aWNlXTtcblxuICAgIGZ1bmN0aW9uIGlzRGVmKG8pIHtcbiAgICAgICAgcmV0dXJuIG8gIT09IHVuZGVmaW5lZCAmJiBvICE9PSBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIEZpbmFuY2VTZXJ2aWNlKCkge1xuICAgICAgICBmdW5jdGlvbiBGaW5hbmNlKG9iaikge1xuICAgICAgICAgICAgdmFyIGRlZk9iaiA9IGlzRGVmKG9iaikgPyBvYmogOiB7fTtcbiAgICAgICAgICAgIHRoaXMuYW1vdW50ID0gKGlzRGVmKGRlZk9iai5hbW91bnQpICYmIGRlZk9iai5hbW91bnQgPj0gMCA/IGRlZk9iai5hbW91bnQgOiAwKTtcbiAgICAgICAgICAgIHRoaXMueWVhciA9IChpc0RlZihkZWZPYmoueWVhcikgJiYgZGVmT2JqLnllYXIgPj0gMTc1MCA/IGRlZk9iai55ZWFyIDogbnVsbCk7XG4gICAgICAgICAgICB0aGlzLmlkID0gKGlzRGVmKGRlZk9iai5pZCkgPyBkZWZPYmouaWQgOiBudWxsKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5nZXRGaW5hbmNlTW9kZWwgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZpbmFuY2Uob2JqKTtcbiAgICAgICAgfTtcbiAgICB9XG5cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5zZXJ2aWNlKCdmaW5hbmNlU2VydmljZScsIGZpbmFuY2VTZXJ2aWNlKTtcblxufSkoYW5ndWxhcik7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxuICovXG5cbihmdW5jdGlvbihhbmd1bGFyKXtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBmdW5kaW5nQ29ubmVjdGlvblNlcnZpY2VEZXBlbmRlbmNpZXMgPSBbRnVuZGluZ0Nvbm5lY3Rpb25zXTtcblxuICAgIGZ1bmN0aW9uIGlzRGVmKG8pIHsgcmV0dXJuIG8gIT09IHVuZGVmaW5lZCAmJiBvICE9PSBudWxsOyB9XG5cbiAgICBmdW5jdGlvbiBGdW5kaW5nQ29ubmVjdGlvbnMoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEZ1bmRpbmdDb25uZWN0aW9uKG9iaikge1xuICAgICAgICAgICAgdmFyIG9iaklzRGVmID0gaXNEZWYob2JqKTtcbiAgICAgICAgICAgIHRoaXMuZW50aXR5ID0gKG9iaklzRGVmICYmIGlzRGVmKG9iai5lbnRpdHkpID8gb2JqLmVudGl0eSA6ICcnKTtcbiAgICAgICAgICAgIHRoaXMuYW1vdW50ID0gKG9iaklzRGVmICYmIGlzRGVmKG9iai5hbW91bnQpID8gb2JqLmFtb3VudDogbnVsbCk7XG4gICAgICAgICAgICB0aGlzLnllYXIgPSAob2JqSXNEZWYgJiYgaXNEZWYob2JqLnllYXIpID8gb2JqLnllYXIgOiBudWxsKTtcbiAgICAgICAgICAgIHRoaXMuaWQgPSAob2JqSXNEZWYgJiYgaXNEZWYob2JqLmlkKSA/IG9iai5pZCA6IG51bGwpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5nZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsID0gZnVuY3Rpb24ob2JqKXtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRnVuZGluZ0Nvbm5lY3Rpb24ob2JqKTtcbiAgICAgICAgfTtcblxuXG5cbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuc2VydmljZSgnZnVuZGluZ0Nvbm5lY3Rpb25TZXJ2aWNlJywgZnVuZGluZ0Nvbm5lY3Rpb25TZXJ2aWNlRGVwZW5kZW5jaWVzKTtcblxuXG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGxvY2F0aW9uU2VydmljZURlcGVuZGVuY2llcyA9IFtMb2NhdGlvblNlcnZpY2VdO1xuXG5cblxuICAgIGZ1bmN0aW9uIExvY2F0aW9uU2VydmljZSgpe1xuXG4gICAgICAgIGZ1bmN0aW9uIGlzRGVmKG8pIHtcbiAgICAgICAgICAgIHJldHVybiBvICE9PSB1bmRlZmluZWQgJiYgbyAhPT0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIExvY2F0aW9uKG9iaikge1xuICAgICAgICAgICAgdmFyIGRlZk9iaiA9IGlzRGVmKG9iaikgPyBvYmogOiB7fTtcbiAgICAgICAgICAgIHRoaXMuYWRkcmVzc19saW5lID0gKGlzRGVmKGRlZk9iai5hZGRyZXNzX2xpbmUpID8gZGVmT2JqLmFkZHJlc3NfbGluZSA6IG51bGwpO1xuICAgICAgICAgICAgdGhpcy5sb2NhbGl0eSA9IChpc0RlZihkZWZPYmoubG9jYWxpdHkpID8gZGVmT2JqLmxvY2FsaXR5IDogbnVsbCk7XG4gICAgICAgICAgICB0aGlzLmRpc3RyaWN0ID0gKGlzRGVmKGRlZk9iai5kaXN0cmljdCkgPyBkZWZPYmouZGlzdHJpY3QgOiBudWxsKTtcbiAgICAgICAgICAgIHRoaXMucG9zdGFsX2NvZGUgPSAoaXNEZWYoZGVmT2JqLnBvc3RhbF9jb2RlKSA/IGRlZk9iai5wb3N0YWxfY29kZSA6IG51bGwpO1xuICAgICAgICAgICAgdGhpcy5jb3VudHJ5ID0gKGlzRGVmKGRlZk9iai5jb3VudHJ5KSA/IGRlZk9iai5jb3VudHJ5IDogbnVsbCk7XG4gICAgICAgICAgICB0aGlzLmNvdW50cnlfY29kZSA9IChpc0RlZihkZWZPYmouY291bnRyeV9jb2RlKSA/IGRlZk9iai5jb3VudHJ5X2NvZGUgOiBudWxsKTtcbiAgICAgICAgICAgIHRoaXMuY29vcmRpbmF0ZXMgPSAoaXNEZWYoZGVmT2JqLmNvb3JkaW5hdGVzKSA/IGRlZk9iai5jb29yZGluYXRlcyA6IG51bGwpO1xuICAgICAgICAgICAgdGhpcy5pZCA9IChpc0RlZihkZWZPYmouaWQpID8gZGVmT2JqLmlkIDogbnVsbCk7XG4gICAgICAgICAgICB0aGlzLmZvcm1hdHRlZEFkZHJlc3MgPSAoaXNEZWYodGhpcy5hZGRyZXNzX2xpbmUpID8gdGhpcy5hZGRyZXNzX2xpbmUgKyAgJyAnIDogJycpXG4gICAgICAgICAgICAgICAgKyAoaXNEZWYodGhpcy5sb2NhbGl0eSkgPyB0aGlzLmxvY2FsaXR5ICsgJywgJyA6ICcnKVxuICAgICAgICAgICAgICAgICsgKGlzRGVmKHRoaXMuY291bnRyeV9jb2RlKSA/IHRoaXMuY291bnRyeV9jb2RlICsgJyAnIDogJycpXG4gICAgICAgICAgICAgICAgKyAoaXNEZWYodGhpcy5wb3N0YWxfY29kZSkgPyB0aGlzLnBvc3RhbF9jb2RlIDogJycpO1xuICAgICAgICAgICAgdGhpcy5mb3JtYXR0ZWRBZGRyZXNzID0gdGhpcy5mb3JtYXR0ZWRBZGRyZXNzLnRyaW0oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZ2V0TG9jYXRpb25Nb2RlbCA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBMb2NhdGlvbihvYmopO1xuICAgICAgICB9O1xuXG4gICAgfVxuXG5cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5zZXJ2aWNlKCdsb2NhdGlvblNlcnZpY2UnLCBsb2NhdGlvblNlcnZpY2VEZXBlbmRlbmNpZXMpO1xuXG59KShhbmd1bGFyKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMTAvMTYuXG4gKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgY29udHJvbERlcHMgPSBbXG4gICAgICAgICdlbnRpdHlTZXJ2aWNlJyxcbiAgICAgICAgJ2Nvbm5lY3Rpb25TZXJ2aWNlJyxcbiAgICAgICAgJyRyb290U2NvcGUnLFxuICAgICAgICAnXycsXG4gICAgICAgICckbW9kYWwnLFxuICAgICAgICBjb250cm9sQ3RybFxuICAgIF07XG5cbiAgICBmdW5jdGlvbiBjb250cm9sQ3RybChlbnRpdHlTZXJ2aWNlLCBjb25uZWN0aW9uU2VydmljZSwgJHJvb3RTY29wZSwgXywgJG1vZGFsKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICAgIHZtLmVudGl0eVR5cGVzID0gZW50aXR5U2VydmljZS5nZXRFbnRpdHlUeXBlcygpO1xuICAgICAgICB2bS5jb25uZWN0aW9uVHlwZXMgPSBjb25uZWN0aW9uU2VydmljZS5nZXRDb25uZWN0aW9uVHlwZXMoKTtcbiAgICAgICAgdm0uc2l6ZUJ5TGlzdCA9IFtcbiAgICAgICAgICAgIHsnbmFtZSc6ICdFbXBsb3llZXMnLCAndmFsdWUnOiAnZW1wbG95ZWVzJ30sXG4gICAgICAgICAgICB7J25hbWUnOiAnVHdpdHRlciBGb2xsb3dlcnMnLCAndmFsdWUnOiAnZm9sbG93ZXJzJ31cbiAgICAgICAgXTtcbiAgICAgICAgdm0uc2l6ZUJ5ID0gJ2VtcGxveWVlcyc7XG4gICAgICAgIHZtLnNob3dWaWV3ID0ge1xuICAgICAgICAgICAgJ05ldHdvcmsnOiB0cnVlLFxuICAgICAgICAgICAgJ01hcCc6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIHZtLnN3aXRjaFZpZXcgPSBzd2l0Y2hWaWV3O1xuICAgICAgICB2bS5jaGFuZ2VWaWV3ID0gZnVuY3Rpb24gKHZpZXcpIHtcbiAgICAgICAgICAgIF8uZm9yRWFjaChfLmtleXModm0uc2hvd1ZpZXcpLCBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgICAgIHZtLnNob3dWaWV3W25hbWVdID0gdmlldyA9PT0gbmFtZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCd2aWV3Q2hhbmdlJywgdm0uc2hvd1ZpZXcpO1xuICAgICAgICB9O1xuICAgICAgICB2bS5zaG93QWJvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkbW9kYWwub3Blbih7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbnRyb2wvYWJvdXQuaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ21vZGFsQ3RybCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB2bS50b2dnbGVOb2RlID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgndG9nZ2xlTm9kZScsIHsnbmFtZSc6IHR5cGUsICdlbmFibGVkJzogdm0uZW50aXR5VHlwZXNbdHlwZV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB2bS50b2dnbGVMaW5rID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgndG9nZ2xlTGluaycsIHsnbmFtZSc6IHR5cGUsICdlbmFibGVkJzogdm0uY29ubmVjdGlvblR5cGVzW3R5cGVdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdm0uY2hhbmdlU2l6ZUJ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdjaGFuZ2VTaXplQnknLCB2bS5zaXplQnkpO1xuICAgICAgICB9O1xuICAgICAgICBmdW5jdGlvbiBzd2l0Y2hWaWV3KCkge1xuICAgICAgICAgICAgdm0uY2hhbmdlVmlldyghdm0udG9nZ2xlTmV0d29yayA/ICdNYXAnIDogJ05ldHdvcmsnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZtLmNoYW5nZVNpemVCeSgpO1xuXG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ2NvbnRyb2xDdHJsJywgY29udHJvbERlcHMpO1xuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhciwgZDMsIEwpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgZGVwZW5kZW5jaWVzID0gW1xuICAgICAgICAnJHNjb3BlJyxcbiAgICAgICAgJyR0aW1lb3V0JyxcbiAgICAgICAgJ2xlYWZsZXREYXRhJyxcbiAgICAgICAgJ18nLFxuICAgICAgICAnJGZpbHRlcicsXG4gICAgICAgIG1hcEN0cmxcbiAgICBdO1xuXG4gICAgZnVuY3Rpb24gbWFwQ3RybCgkc2NvcGUsICR0aW1lb3V0LCBsZWFmbGV0RGF0YSwgXywgJGZpbHRlcikge1xuXG4gICAgICAgICRzY29wZS5vcHRpb25zID0ge1xuICAgICAgICAgICAgY2VudGVyICA6IHtcbiAgICAgICAgICAgICAgICBsYXQgOiAyMC4wMCxcbiAgICAgICAgICAgICAgICBsbmcgOiAtNDAuMDAsXG4gICAgICAgICAgICAgICAgem9vbTogM1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICAgICAgdGlsZUxheWVyICAgICAgICAgOiAnaHR0cHM6Ly9hcGkudGlsZXMubWFwYm94LmNvbS92NC9tYXBib3gubGlnaHQve3p9L3t4fS97eX0ucG5nP2FjY2Vzc190b2tlbj1way5leUoxSWpvaVpHRjJhV1JzY201MElpd2lZU0k2SWpBME0yUmtOek16WldKbU56RXpOR1l6TVRkaFlURXhZekF5Wm1VNFpURTFJbjAuVE5ZbEZ0YTJWSXRya240TDBaOUJKUScsXG4gICAgICAgICAgICAgICAgdGlsZUxheWVyT3B0aW9ucyAgOiB7XG4gICAgICAgICAgICAgICAgICAgIGRldGVjdFJldGluYTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgcmV1c2VUaWxlcyAgOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgem9vbUNvbnRyb2wgICAgICAgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGlvbkNvbnRyb2w6IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNyZWF0ZVBpZUNoYXJ0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSAgID0gb3B0aW9ucy5kYXRhO1xuICAgICAgICAgICAgICAgIHZhciBwaWUgICAgPSBkMy5sYXlvdXQucGllKCkuc29ydChudWxsKS52YWx1ZShmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC52YWx1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgYXJjICAgID0gZDMuc3ZnLmFyYygpLm91dGVyUmFkaXVzKG9wdGlvbnMucikuaW5uZXJSYWRpdXMob3B0aW9ucy5yIC0gMTApO1xuICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBvcHRpb25zLnIgKyBvcHRpb25zLnN0cm9rZVdpZHRoO1xuICAgICAgICAgICAgICAgIHZhciB3ICAgICAgPSBjZW50ZXIgKiAyO1xuICAgICAgICAgICAgICAgIHZhciBoICAgICAgPSB3O1xuICAgICAgICAgICAgICAgIHZhciBzdmcgICAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoZDMubnMucHJlZml4LnN2ZywgJ3N2ZycpO1xuICAgICAgICAgICAgICAgIHZhciB2aXMgICAgPSBkMy5zZWxlY3Qoc3ZnKVxuICAgICAgICAgICAgICAgICAgICAuZGF0YShkYXRhKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAncGllY2hhcnQnKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLCB3KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgaCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgYXJjcyA9IHZpcy5zZWxlY3RBbGwoJy5hcmMnKVxuICAgICAgICAgICAgICAgICAgICAuZGF0YShwaWUoZGF0YSkpXG4gICAgICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdhcmMnKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgY2VudGVyICsgJywnICsgY2VudGVyICsgJyknKTtcblxuICAgICAgICAgICAgICAgIC8vIHZhciBtYXAgPSBMLm1hcGJveC5tYXAoJ21hcCcsICdleGFtcGxlcy5tYXAtOWlqdWsyNHknLCB7XG4gICAgICAgICAgICAgICAgLy8gICAgIG1pblpvb206IDEsXG4gICAgICAgICAgICAgICAgLy8gICAgIG1heFpvb206IDJcbiAgICAgICAgICAgICAgICAvLyB9KS5zZXRWaWV3KFs0MCwgLTc0LjUwXSwgOSk7XG5cbiAgICAgICAgICAgICAgICBhcmNzLmFwcGVuZCgncGF0aCcpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgYXJjKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuZGF0YS50eXBlICsgJy1hcmMnO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGFyY3MuYXBwZW5kKFwic3ZnOnRleHRcIilcbiAgICAgICAgICAgICAgICAgICAgLnRleHQoZnVuY3Rpb24gKGQsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMuY291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwieFwiLCAtNCAqIG9wdGlvbnMuY291bnQudG9TdHJpbmcoKS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiZHlcIiwgNSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImFyY1RleHRcIik7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93LlhNTFNlcmlhbGl6ZXIgPyAobmV3IHdpbmRvdy5YTUxTZXJpYWxpemVyKCkpLnNlcmlhbGl6ZVRvU3RyaW5nKHN2ZylcbiAgICAgICAgICAgICAgICAgICAgOiBzdmcueG1sID8gc3ZnLnhtbCA6ICcnO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbGVhZmxldERhdGEuZ2V0TWFwKCkudGhlbihmdW5jdGlvbiAobWFwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkRW50aXRpZXMgPSAkc2NvcGUuZW50aXRpZXM7XG5cbiAgICAgICAgICAgICAgICBtYXAuaW52YWxpZGF0ZVNpemUoKTtcblxuICAgICAgICAgICAgICAgIG5ldyBMLkNvbnRyb2wuWm9vbSh7cG9zaXRpb246ICd0b3ByaWdodCd9KS5hZGRUbyhtYXApO1xuICAgICAgICAgICAgICAgIEwuY29udHJvbC5sb2NhdGUoXG4gICAgICAgICAgICAgICAgICAgIHtwb3NpdGlvbjogJ3RvcHJpZ2h0Jywgc2hvd1BvcHVwOiBmYWxzZSwgaWNvbjogJ2ZhIGZhLWxvY2F0aW9uLWFycm93J31cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUbyhtYXApO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gY2x1c3Rlckljb24oY2x1c3Rlcikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRyZW4gICAgICAgPSBjbHVzdGVyLmdldEFsbENoaWxkTWFya2VycygpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG90YWwgICAgICAgICAgPSBjaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjbHVzdGVyTWFya2VycyA9IF8ucGx1Y2soY2hpbGRyZW4sICdvcHRpb25zJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb3VudHMgICAgICAgICA9IF8ubWFwKF8uY291bnRCeShjbHVzdGVyTWFya2VycywgJ3R5cGUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGNvdW50LCB0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyd0eXBlJzogdHlwZSwgJ3ZhbHVlJzogY291bnR9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHIgICAgICAgICAgICAgID0gMjg7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdHJva2VXaWR0aCAgICA9IDE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpY29uRGltICAgICAgICA9IChyICsgc3Ryb2tlV2lkdGgpICogMjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWwgICAgICAgICAgID0gY3JlYXRlUGllQ2hhcnQoXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZGF0YTogY291bnRzLCByOiByLCBzdHJva2VXaWR0aDogc3Ryb2tlV2lkdGgsIGNvdW50OiB0b3RhbH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEwuRGl2SWNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sICAgICA6IGh0bWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdtYXJrZXItY2x1c3RlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZSA6IG5ldyBMLnBvaW50KGljb25EaW0sIGljb25EaW0pXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbWFya2VySWNvbiAgPSB7XG4gICAgICAgICAgICAgICAgICAgICdOb24tUHJvZml0JzogTC5pY29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25VcmwgOiAnaW1nL21hcmtlci1ub25wcm9mLnN2ZycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZTogWzYwLCA2MF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICdGb3ItUHJvZml0JzogTC5pY29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25VcmwgOiAnaW1nL21hcmtlci1wcm9mLnN2ZycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZTogWzYwLCA2MF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICdJbmRpdmlkdWFsJzogTC5pY29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25VcmwgOiAnaW1nL21hcmtlci1pbmQuc3ZnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TaXplOiBbNjAsIDYwXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgJ0dvdmVybm1lbnQnOiBMLmljb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblVybCA6ICdpbWcvbWFya2VyLWdvdi5zdmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblNpemU6IFs2MCwgNjBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHZhciBtYXJrZXJzID0gTC5tYXJrZXJDbHVzdGVyR3JvdXAoe1xuXG4gICAgICAgICAgICAgICAgICAgIHNwaWRlcmZ5T25NYXhab29tOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzaG93Q292ZXJhZ2VPbkhvdmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNyZWF0ZUZ1bmN0aW9uOiBjbHVzdGVySWNvbixcbiAgICAgICAgICAgICAgICAgICAgbWF4Q2x1c3RlclJhZGl1czogMzAsXG4gICAgICAgICAgICAgICAgICAgIHNwaWRlcmZ5RGlzdGFuY2VNdWx0aXBsaWVyOiAxLjNcbiAgICAgICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gb3V0ZXJMb29wKGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBpbm5lckxvb3AobG9jKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV8uZXZlcnkobG9jLmNvb3JkaW5hdGVzKSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvYy5jb29yZGluYXRlc1swXS50b0ZpeGVkKDUpID09PSAnNDAuNzgyMDAnICYmIGxvYy5jb29yZGluYXRlc1sxXS50b0ZpeGVkKDUpID09PSAnLTczLjgzMTcwJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYy5jb29yZGluYXRlc1swXSA9IDQwLjc3MDY1O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYy5jb29yZGluYXRlc1sxXSA9IC03My45NzQwNjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtID0gTC5tYXJrZXIobG9jLmNvb3JkaW5hdGVzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogbWFya2VySWNvbltlbnRpdHkudHlwZV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RpdGxlJzogZW50aXR5Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2VudGl0eV9pZCc6IGVudGl0eS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWVzc2FnZSc6IGVudGl0eS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogZW50aXR5LnR5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Vycy5hZGRMYXllcihtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIF8uZm9yRWFjaChlbnRpdHkubG9jYXRpb25zLCBpbm5lckxvb3ApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiT3JpZ2luYWw6ICVPXCIsICRzY29wZS5lbnRpdGllcyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGaWx0ZXJlZDogJU9cIiwgZmlsdGVyZWRFbnRpdGllcyk7XG5cbiAgICAgICAgICAgICAgICBfLmZvckVhY2goZmlsdGVyZWRFbnRpdGllcywgb3V0ZXJMb29wKTtcbiAgICAgICAgICAgICAgICBtYXAuYWRkTGF5ZXIobWFya2Vycyk7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBvbkxvY2F0aW9uRXJyb3IobGVhZmxldEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobGVhZmxldEVycm9yLm1lc3NhZ2UgKyBcIiAgJU9cIiwgbGVhZmxldEVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBtYXAub24oJ2xvY2F0aW9uZXJyb3InLCBvbkxvY2F0aW9uRXJyb3IpO1xuICAgICAgICAgICAgICAgIC8vIG1hcC5sb2NhdGUoe3NldFZpZXc6IHRydWUsIG1heFpvb206IDExfSk7XG4gICAgICAgICAgICAgICAgbWFya2Vycy5vbignY2xpY2snLCBmdW5jdGlvbiAobWFya2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zZXRFbnRpdHlJRChtYXJrZXIubGF5ZXIub3B0aW9ucy5lbnRpdHlfaWQpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSAkc2NvcGUuY3VycmVudEVudGl0eTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCAgID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5zZXR0aW5nc0VuYWJsZWQgJiYgJHNjb3BlLm1vYmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRvZ2dsZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgbWFwLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCAgID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICRzY29wZS4kb24oJ3NlbGVjdEl0ZW0nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb29yZGluYXRlcyA9ICRzY29wZS5jdXJyZW50RW50aXR5LmxvY2F0aW9ucy5sZW5ndGggPiAwID8gXy5wbHVjayhcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jdXJyZW50RW50aXR5LmxvY2F0aW9ucywgJ2Nvb3JkaW5hdGVzJykgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29vcmRpbmF0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFwLnNldFZpZXcoY29vcmRpbmF0ZXNbMF0sIDExKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbnRlcmFjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG5cbiAgICAgICAgLmNvbnRyb2xsZXIoJ21hcEN0cmwnLCBkZXBlbmRlbmNpZXMpO1xufSkoYW5ndWxhciwgZDMsIEwpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyLCBSVFApIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBkZXBlbmRlbmNpZXMgPSBbXG4gICAgICAgICckc2NvcGUnLFxuICAgICAgICAnJGh0dHAnLFxuICAgICAgICAnXycsXG4gICAgICAgICckZmlsdGVyJyxcbiAgICAgICAgJ2NvbmZpZycsXG4gICAgICAgIG5ldHdvcmtDdHJsXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIGlzRGVmKG8pIHtcbiAgICAgICAgcmV0dXJuIG8gIT09IHVuZGVmaW5lZCAmJiBvICE9PSBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5ldHdvcmtDdHJsKCRzY29wZSwgJGh0dHAsIF8sICRmaWx0ZXIsIGNvbmZpZykge1xuICAgICAgICAvLyBUT0RPOiBNYWtlIGEgaGFzaG1hcCBvbiB0aGUgYmFja2VuZCBvZiBpZCAtPiBwb3NpdGlvbiwgdGhlbiB1c2Ugc291cmNlOlxuICAgICAgICAvLyBlbnRpdGllc1ttYXBbc291cmNlaWRdXSB0byBnZXQgbm9kZXMuIFNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcS8xNjgyNDMwOFxuICAgICAgICAkc2NvcGUuaXNMb2FkaW5nICAgPSB0cnVlO1xuICAgICAgICAkc2NvcGUuY29ubmVjdGlvbnMgPSB7fTtcbiAgICAgICAgc3RhcnRMb2FkKCk7XG5cbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vY29kZXJ3YWxsLmNvbS9wL25naXNtYS9zYWZlLWFwcGx5LWluLWFuZ3VsYXItanNcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgdmFyIHBoYXNlID0gdGhpcy4kcm9vdC4kJHBoYXNlO1xuICAgICAgICAgICAgaWYgKHBoYXNlID09PSAnJGFwcGx5JyB8fCBwaGFzZSA9PT0gJyRkaWdlc3QnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZuICYmICh0eXBlb2YoZm4pID09PSAnZnVuY3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICBmbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kYXBwbHkoZm4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS4kb24oJ3RyaWdnZXJOZXR3b3JrRHJhdycsIHN0YXJ0TG9hZCk7XG5cbiAgICAgICAgJHNjb3BlLiRvbigndmlld0NoYW5nZScsIGZ1bmN0aW9uICh2aWV3T2JqKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh2aWV3T2JqKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGRyYXdOZXR3b3JrID0gZnVuY3Rpb24gKGVudGl0eUFycmF5LCBjb25uZWN0aW9uQXJyYXkpIHtcbiAgICAgICAgICAgICRzY29wZS5pc0xvYWRpbmcgPSBmYWxzZTtcblxuICAgICAgICAgICAgdmFyIHN2ZyA9IGQzLnNlbGVjdCgnI25ldHdvcmsnKTtcbiAgICAgICAgICAgIHN2Zy5zZWxlY3RBbGwoXCIqXCIpLnJlbW92ZSgpO1xuICAgICAgICAgICAgdmFyIGJvdW5kcyAgICAgICAgICAgPSBzdmcubm9kZSgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdmFyIGhlaWdodCAgICAgICAgICAgPSBib3VuZHMuaGVpZ2h0O1xuICAgICAgICAgICAgdmFyIHdpZHRoICAgICAgICAgICAgPSBib3VuZHMud2lkdGg7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0U2NhbGUgICAgICA9IDY7XG4gICAgICAgICAgICB2YXIgZGVmYXVsdE5vZGVTaXplICA9IDc7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0cyAgICAgICAgICA9IHtcbiAgICAgICAgICAgICAgICAnSW5kaXZpZHVhbCc6IHsneCc6IDEsICd5JzogMX0sXG4gICAgICAgICAgICAgICAgJ0Zvci1Qcm9maXQnOiB7J3gnOiAxLCAneSc6IC0xfSxcbiAgICAgICAgICAgICAgICAnTm9uLVByb2ZpdCc6IHsneCc6IC0xLCAneSc6IDF9LFxuICAgICAgICAgICAgICAgICdHb3Zlcm5tZW50Jzogeyd4JzogLTEsICd5JzogLTF9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGxvd2VyQm91bmRSYWRpdXMgPSAxMDtcbiAgICAgICAgICAgIHZhciB1cHBlckJvdW5kUmFkaXVzID0gNTA7XG4gICAgICAgICAgICB2YXIgbWF4RW1wbG95ZWVzICAgICA9IGQzLm1heChlbnRpdHlBcnJheSwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KGVsLmVtcGxveWVlcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBtYXhGb2xsb3dlcnMgICAgID0gZDMubWF4KGVudGl0eUFycmF5LCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoZWwuZm9sbG93ZXJzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIHNjYWxlICAgICAgICAgICAgPSB7XG4gICAgICAgICAgICAgICAgJ2VtcGxveWVlcyc6IGQzLnNjYWxlLnNxcnQoKS5kb21haW4oWzEwLCBtYXhFbXBsb3llZXNdKVxuICAgICAgICAgICAgICAgICAgICAucmFuZ2UoW2xvd2VyQm91bmRSYWRpdXMsIHVwcGVyQm91bmRSYWRpdXNdKSxcbiAgICAgICAgICAgICAgICAnZm9sbG93ZXJzJzogZDMuc2NhbGUuc3FydCgpLmRvbWFpbihbMTAsIG1heEZvbGxvd2Vyc10pXG4gICAgICAgICAgICAgICAgICAgIC5yYW5nZShbbG93ZXJCb3VuZFJhZGl1cywgdXBwZXJCb3VuZFJhZGl1c10pXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGxpbmtzICAgICAgICAgICAgPSB7fTtcbiAgICAgICAgICAgIHZhciBmb3JjZSAgICAgICAgICAgID0gZDMubGF5b3V0LmZvcmNlKClcbiAgICAgICAgICAgICAgICAuc2l6ZShbd2lkdGgsIGhlaWdodF0pXG4gICAgICAgICAgICAgICAgLm5vZGVzKGVudGl0eUFycmF5KVxuICAgICAgICAgICAgICAgIC5saW5rcyhfLmZsYXR0ZW4oXy52YWx1ZXMoY29ubmVjdGlvbkFycmF5KSkpXG4gICAgICAgICAgICAgICAgLmNoYXJnZShmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5lbXBsb3llZXMgPyAtMiAqIHNjYWxlLmVtcGxveWVlcyhkLmVtcGxveWVlcykgOiAtMjA7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAubGlua1N0cmVuZ3RoKDApXG4gICAgICAgICAgICAgICAgLmxpbmtEaXN0YW5jZSg1MCk7XG5cbiAgICAgICAgICAgIF8uZm9yRWFjaChjb25uZWN0aW9uQXJyYXksIGZ1bmN0aW9uIChjb25uZWN0aW9ucywgdHlwZSkge1xuICAgICAgICAgICAgICAgIGxpbmtzW3R5cGVdID0gc3ZnLnNlbGVjdEFsbCgnLmxpbmsgLicgKyB0eXBlICsgJy1saW5rJylcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEoY29ubmVjdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgnbGluZScpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzRGVmKGQuc291cmNlKSB8fCAhaXNEZWYoZC50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkLnR5cGUgPSB0eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdsaW5rICcgKyB0eXBlICsgJy1saW5rICcgKyBkLnNvdXJjZS50eXBlICsgJy1saW5rICcgKyBkLnRhcmdldC50eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAnLWxpbmsnO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgbm9kZSA9IHN2Zy5zZWxlY3RBbGwoJy5ub2RlJylcbiAgICAgICAgICAgICAgICAuZGF0YShlbnRpdHlBcnJheSlcbiAgICAgICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnbm9kZSAnICsgZC50eXBlICsgJy1ub2RlJztcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYWxsKGZvcmNlLmRyYWcpO1xuXG4gICAgICAgICAgICBub2RlLmFwcGVuZCgnY2lyY2xlJylcbiAgICAgICAgICAgICAgICAuYXR0cigncicsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmVtcGxveWVlcyA/IHNjYWxlWydlbXBsb3llZXMnXShkLmVtcGxveWVlcykgOiBkZWZhdWx0Tm9kZVNpemU7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG5vZGUuYXBwZW5kKCd0ZXh0JylcbiAgICAgICAgICAgICAgICAudGV4dChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5uaWNrbmFtZSA/IGQubmlja25hbWUgOiBkLm5hbWU7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYXR0cignZHgnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoLTAuMDY1ICogdGhpcy5nZXRDb21wdXRlZFRleHRMZW5ndGgoKSAvIDIpICsgJ2VtJztcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5hdHRyKCdkeScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgwLjA4ICogdGhpcy5wYXJlbnROb2RlLmdldEJCb3goKS5oZWlnaHQgLyAyICsgMC41KSArICdlbSc7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZvcmNlLm9uKCd0aWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBDbHVzdGVyIGluIGZvdXIgY29ybmVycyBiYXNlZCBvbiBvZmZzZXQuXG4gICAgICAgICAgICAgICAgdmFyIGsgPSBvZmZzZXRTY2FsZSAqIGUuYWxwaGE7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZS5hbHBoYSlcbiAgICAgICAgICAgICAgICBfLmZvckVhY2goZW50aXR5QXJyYXksIGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVudGl0eS54ICYmIG9mZnNldHNbZW50aXR5LnR5cGVdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHkueCArPSBvZmZzZXRzW2VudGl0eS50eXBlXS54ICogaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eS55ICs9IG9mZnNldHNbZW50aXR5LnR5cGVdLnkgKiBrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5LnggPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KHVwcGVyQm91bmRSYWRpdXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5taW4od2lkdGggLSB1cHBlckJvdW5kUmFkaXVzLCBlbnRpdHkueCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5LnkgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KHVwcGVyQm91bmRSYWRpdXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5taW4oaGVpZ2h0IC0gdXBwZXJCb3VuZFJhZGl1cywgZW50aXR5LnkpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGxpbmtzLCBmdW5jdGlvbiAobGluaykge1xuICAgICAgICAgICAgICAgICAgICBsaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDEnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnNvdXJjZS54O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5MScsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuc291cmNlLnk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gyJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC50YXJnZXQueDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneTInLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnRhcmdldC55O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgbm9kZS5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgZC54ICsgJywnICsgZC55ICsgJyknO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgc3BlZWRBbmltYXRlID0gZnVuY3Rpb24gKHRpY2tzKSB7XG4gICAgICAgICAgICAgICAgLy8gU3BlZWQgdXAgdGhlIGluaXRpYWwgYW5pbWF0aW9uLlxuICAgICAgICAgICAgICAgIC8vIFNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNjE4OTExMFxuICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGlja3M7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yY2UudGljaygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb3JjZS5hbHBoYSgpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlbmRlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoISRzY29wZS5tb2JpbGUpIHtcbiAgICAgICAgICAgICAgICBzcGVlZEFuaW1hdGUoNyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3JjZS5zdGFydCgpO1xuXG4gICAgICAgICAgICAvLyBIYXNoIGxpbmtlZCBuZWlnaGJvcnMgZm9yIGVhc3kgaG92ZXJpbmcgZWZmZWN0cy5cbiAgICAgICAgICAgIC8vIFNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS84NzgwMjc3XG4gICAgICAgICAgICB2YXIgbGlua2VkQnlJbmRleCA9IHt9O1xuICAgICAgICAgICAgXy5mb3JFYWNoKGxpbmtzLCBmdW5jdGlvbiAobCkge1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChsWzBdLCBmdW5jdGlvbiAoY29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBjb25uZWN0aW9uLl9fZGF0YV9fLnNvdXJjZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gY29ubmVjdGlvbi5fX2RhdGFfXy50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtlZEJ5SW5kZXhbc291cmNlLmluZGV4ICsgJywnICsgdGFyZ2V0LmluZGV4XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtlZEJ5SW5kZXhbdGFyZ2V0LmluZGV4ICsgJywnICsgc291cmNlLmluZGV4XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIG5laWdoYm9yaW5nID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGlua2VkQnlJbmRleFthLmluZGV4ICsgJywnICsgYi5pbmRleF0gfHwgYS5pbmRleCA9PT0gYi5pbmRleDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBmb2N1c25laWdoYm9ycyA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAvLyBBcHBseSAndW5mb2N1c2VkJyBjbGFzcyB0byBhbGwgbm9uLW5laWdoYm9ycy5cbiAgICAgICAgICAgICAgICAvLyBBcHBseSAnZm9jdXNlZCcgY2xhc3MgdG8gYWxsIG5laWdoYm9ycy5cbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBTZWUgaWYgaXQgY2FuIGJlIGRvbmUgd2l0aCBqdXN0IG9uZSBjbGFzcyBhbmQgOm5vdCguZm9jdXNlZCkgQ1NTIHNlbGVjdG9ycy5cbiAgICAgICAgICAgICAgICBub2RlXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZWlnaGJvcmluZyhlbnRpdHksIG4pO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhbmVpZ2hib3JpbmcoZW50aXR5LCBuKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBfLmZvckVhY2gobGlua3MsIGZ1bmN0aW9uIChsaW5rKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW50aXR5LmluZGV4ID09PSBvLnNvdXJjZS5pbmRleCB8fCBlbnRpdHkuaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9PT0gby50YXJnZXQuaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEoZW50aXR5LmluZGV4ID09PSBvLnNvdXJjZS5pbmRleCB8fCBlbnRpdHkuaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID09PSBvLnRhcmdldC5pbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBmb2N1cyA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmN1cnJlbnRFbnRpdHkgIT09IGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2V0RW50aXR5KGVudGl0eSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgICAgICBmb2N1c25laWdoYm9ycyhlbnRpdHkpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIHVuZm9jdXMgICAgICAgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgLy92YXIgdHJhbnNpdGlvbmRlbGF5ID0gNzU7XG4gICAgICAgICAgICAgICAgbm9kZVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChsaW5rcywgZnVuY3Rpb24gKGxpbmspIHtcbiAgICAgICAgICAgICAgICAgICAgbGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZW50aXR5LmZpeGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgLy8gUmVzdGFydCBkMyBhbmltYXRpb25zLlxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yY2UucmVzdW1lKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vVE9ETzogU2hvdyBnZW5lcmljIGRldGFpbHMgYW5kIG5vdCBpbmRpdmlkdWFsIGVudGl0eSBkZXRhaWxzP1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBob3ZlclRpbWVyO1xuICAgICAgICAgICAgdmFyIGhvdmVyICAgICAgICAgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgJiYgISRzY29wZS5lZGl0aW5nICYmICEkc2NvcGUuY3VycmVudExvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvdmVyVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgdW5ob3ZlciAgICAgICA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSAmJiAhJHNjb3BlLmN1cnJlbnRMb2NhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB1bmZvY3VzKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChob3ZlclRpbWVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBmb2N1c0xvY2F0aW9uID0gZnVuY3Rpb24gKGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgLy8gIElmIHRoZSBjdXJyZW50IGVudGl0eSBpcyBzaG93biBhbmQgaXQgZG9lc24ndCBtYXRjaCB0aGUgY2xpY2tlZCBub2RlLCB0aGVuIHNldFxuICAgICAgICAgICAgICAgIC8vIHRoZSBuZXcgbm9kZSB0byBjbGlja2VkLlxuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcblxuICAgICAgICAgICAgICAgIG5vZGUuY2xhc3NlZCgnZm9jdXNlZCcsIGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5uYW1lIGluIGxvY2F0aW9uLmRpY3Q7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEobi5uYW1lIGluIGxvY2F0aW9uLmRpY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChsaW5rcywgZnVuY3Rpb24gKGxpbmspIHtcbiAgICAgICAgICAgICAgICAgICAgbGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmdW5jdGlvbiAobykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoby5zb3VyY2UubmFtZSBpbiBsb2NhdGlvbi5kaWN0ICYmIG8udGFyZ2V0Lm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbiBsb2NhdGlvbi5kaWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShvLnNvdXJjZS5uYW1lIGluIGxvY2F0aW9uLmRpY3QpIHx8ICEoby50YXJnZXQubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbiBsb2NhdGlvbi5kaWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIHVuZm9jdXNMb2NhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBub2RlXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGxpbmtzLCBmdW5jdGlvbiAobGluaykge1xuICAgICAgICAgICAgICAgICAgICBsaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcmNlLnJlc3VtZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBoaWdobGlnaHRMb2NhdGlvbiA9IGZ1bmN0aW9uIChsb2NhdGlvbikge1xuICAgICAgICAgICAgICAgICRzY29wZS5zaG93TGljZW5zZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgdW5mb2N1cygkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiAhPT0gbG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdW5mb2N1c0xvY2F0aW9uKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uID0gbG9jYXRpb247XG4gICAgICAgICAgICAgICAgICAgIGZvY3VzTG9jYXRpb24obG9jYXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZDMuZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZDMuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgY2xpY2sgICAgICAgICAgICAgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3dMaWNlbnNlID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNEZWYoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRGVmKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bmZvY3VzTG9jYXRpb24oJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5lbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gIElmIHRoZSBwcmV2aW91cyBub2RlIGlzIGVxdWFsIHRvIHRoZSBuZXcgbm9kZSwgZG8gbm90aGluZy5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9PT0gZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gIFVuZm9jdXMgb24gcHJldmlvdXMgbm9kZSBhbmQgZm9jdXMgb24gbmV3IG5vZGUuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5mb2N1cygkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ID0gZW50aXR5O1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXMoZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFN0b3AgZXZlbnQgc28gd2UgZG9uJ3QgZGV0ZWN0IGEgY2xpY2sgb24gdGhlIGJhY2tncm91bmQuXG4gICAgICAgICAgICAgICAgLy8gU2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xLzIyOTQxNzk2XG4gICAgICAgICAgICAgICAgaWYgKGQzLmV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbnRlcmFjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgYmFja2dyb3VuZGNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChpc0RlZigkc2NvcGUuY2xpY2tlZExvY2F0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNEZWYoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuZm9jdXMoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNEZWYoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5mb2N1cygkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICAgICAgLy9UT0RPOiBTaG93IGdlbmVyaWMgZGV0YWlscyBhbmQgbm90IGluZGl2aWR1YWwgZW50aXR5IGRldGFpbHMuXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGRibGNsaWNrICAgICAgICA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVudGl0eS5maXhlZCkge1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHkueCAgICAgICAgICAgICAgICAgICAgPSB3aWR0aCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS55ICAgICAgICAgICAgICAgICAgICA9IGhlaWdodCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5weCAgICAgICAgICAgICAgICAgICA9IHdpZHRoIC8gMjtcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LnB5ICAgICAgICAgICAgICAgICAgID0gaGVpZ2h0IC8gMjtcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LmZpeGVkICAgICAgICAgICAgICAgID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ID0gZW50aXR5O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHVuZm9jdXMoZW50aXR5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbm9kZS5vbignbW91c2VvdmVyJywgaG92ZXIpO1xuICAgICAgICAgICAgbm9kZS5vbignbW91c2VvdXQnLCB1bmhvdmVyKTtcbiAgICAgICAgICAgIG5vZGUub24oJ2NsaWNrJywgY2xpY2spO1xuICAgICAgICAgICAgbm9kZS5vbignZGJsY2xpY2snLCBkYmxjbGljayk7XG4gICAgICAgICAgICBzdmcub24oJ2NsaWNrJywgYmFja2dyb3VuZGNsaWNrKTtcblxuICAgICAgICAgICAgbm9kZVxuICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd3ZWxsY29ubmVjdGVkJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuaGFzT3duUHJvcGVydHkoJ3dlbGxjb25uZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJHNjb3BlLiRvbignY2hhbmdlU2l6ZUJ5JywgZnVuY3Rpb24gKGV2ZW50LCBzaXplQnkpIHtcbiAgICAgICAgICAgICAgICBzdmcuc2VsZWN0QWxsKCdjaXJjbGUnKVxuICAgICAgICAgICAgICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbigyNTApXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdyJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkW3NpemVCeV0gPyBzY2FsZVtzaXplQnldKGRbc2l6ZUJ5XSkgOiBkZWZhdWx0Tm9kZVNpemU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkc2NvcGUuJG9uKCd0b2dnbGVMaW5rJywgZnVuY3Rpb24gKGV2ZW50LCBsaW5rKSB7XG4gICAgICAgICAgICAgICAgLy8gbGlua3NbbGluay5uYW1lXVxuICAgICAgICAgICAgICAgIC8vIC5jbGFzc2VkKHsndmlzaWJsZSc6IGxpbmsuZW5hYmxlZCwgJ2hpZGRlbic6ICFsaW5rLmVuYWJsZWR9KTtcbiAgICAgICAgICAgICAgICBfLm1hcCgkc2NvcGUuZW50aXR5VHlwZXMsIGZ1bmN0aW9uICh2YWwsIGtleSkge1xuICAgICAgICAgICAgICAgICAgICBzdmdcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJy4nICsga2V5ICsgJy1saW5rJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndmlzaWJsZSc6IGZ1bmN0aW9uIChsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbm5lY3Rpb25UeXBlIGVuYWJsZWQsIGNvbm5lY3Rpb24gc291cmNlIGVudGl0eSB0eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGVuYWJsZWQsIGNvbm5lY3Rpb24gdGFyZ2V0IGVudGl0eSB0eXBlIGlzIGVuYWJsZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhJHNjb3BlLmNvbm5lY3Rpb25UeXBlc1tsLnR5cGVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCAoJHNjb3BlLmVudGl0eVR5cGVzW2wuc291cmNlLnR5cGVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgJHNjb3BlLmVudGl0eVR5cGVzW2wudGFyZ2V0LnR5cGVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoaWRkZW4nIDogZnVuY3Rpb24gKGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgYW55IG9mIENvbm5lY3Rpb25UeXBlLCBzb3VyY2UgZW50aXR5IHR5cGUsIG9yIHRhcmdldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbnRpdHkgdHlwZSBhcmUgZGlzYWJsZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhJHNjb3BlLmNvbm5lY3Rpb25UeXBlc1tsLnR5cGVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCAoISRzY29wZS5lbnRpdHlUeXBlc1tsLnNvdXJjZS50eXBlXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgISRzY29wZS5lbnRpdHlUeXBlc1tsLnRhcmdldC50eXBlXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJHNjb3BlLiRvbigndG9nZ2xlTm9kZScsIGZ1bmN0aW9uIChldmVudCwgdHlwZSkge1xuICAgICAgICAgICAgICAgIHN2Z1xuICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCcuJyArIHR5cGUubmFtZSArICctbm9kZScpXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKHsndmlzaWJsZSc6IHR5cGUuZW5hYmxlZCwgJ2hpZGRlbic6ICF0eXBlLmVuYWJsZWR9KTtcblxuICAgICAgICAgICAgICAgIHN2Z1xuICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCcuJyArIHR5cGUubmFtZSArICctbGluaycpXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd2aXNpYmxlJzogZnVuY3Rpb24gKGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb25uZWN0aW9uVHlwZSBlbmFibGVkLCBjb25uZWN0aW9uIHNvdXJjZSBlbnRpdHkgdHlwZSBpc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVuYWJsZWQsIGNvbm5lY3Rpb24gdGFyZ2V0IGVudGl0eSB0eXBlIGlzIGVuYWJsZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS5jb25uZWN0aW9uVHlwZXNbbC50eXBlXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiAoJHNjb3BlLmVudGl0eVR5cGVzW2wuc291cmNlLnR5cGVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmICRzY29wZS5lbnRpdHlUeXBlc1tsLnRhcmdldC50eXBlXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hpZGRlbicgOiBmdW5jdGlvbiAobCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGFueSBvZiBDb25uZWN0aW9uVHlwZSwgc291cmNlIGVudGl0eSB0eXBlLCBvciB0YXJnZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbnRpdHkgdHlwZSBhcmUgZGlzYWJsZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEkc2NvcGUuY29ubmVjdGlvblR5cGVzW2wudHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgKCEkc2NvcGUuZW50aXR5VHlwZXNbbC5zb3VyY2UudHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgISRzY29wZS5lbnRpdHlUeXBlc1tsLnRhcmdldC50eXBlXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJHNjb3BlLiRvbignc2VsZWN0SXRlbScsIGZ1bmN0aW9uIChldmVudCwgaXRlbSkge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdsb2NhdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0TG9jYXRpb24oJHNjb3BlLmN1cnJlbnRMb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjbGljaygkc2NvcGUuY3VycmVudEVudGl0eSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gc3RhcnRMb2FkIChldmVudCkge1xuICAgICAgICAgICAgJGh0dHAuZ2V0KGNvbmZpZy5hcGlIb3N0ICsgJ2FwaS9jb25uZWN0aW9ucycpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWRFbnRpdGllcyAgICA9ICRmaWx0ZXIoJ2ZpbHRlcicpKCRzY29wZS5lbnRpdGllcyxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVudGl0eS5jb2xsYWJvcmF0aW9ucy5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PSAkc2NvcGUubWluQ29ubmVjdGlvbnM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJlZENvbm5lY3Rpb25zID0ge307XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKF8ua2V5cyhkYXRhLmNvbm5lY3Rpb25zKSwgZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gJHNjb3BlLmNvbm5lY3Rpb25zW3R5cGVdID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkQ29ubmVjdGlvbnNbdHlwZV0gPSBbXTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBfLmZvckVhY2goZGF0YS5jb25uZWN0aW9ucywgZnVuY3Rpb24gKGNvbm5lY3Rpb25zLCB0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIF8uZm9yRWFjaChjb25uZWN0aW9ucywgZnVuY3Rpb24gKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2VOb2RlID0gXy5maW5kKGZpbHRlcmVkRW50aXRpZXMsIHsnaWQnOiBjb25uZWN0aW9uLnNvdXJjZX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldE5vZGUgPSBfLmZpbmQoZmlsdGVyZWRFbnRpdGllcywgeydpZCc6IGNvbm5lY3Rpb24udGFyZ2V0fSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISggaXNEZWYoc291cmNlTm9kZSkgJiYgaXNEZWYodGFyZ2V0Tm9kZSkgKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWRDb25uZWN0aW9uc1t0eXBlXS5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsnc291cmNlJzogc291cmNlTm9kZSwgJ3RhcmdldCc6IHRhcmdldE5vZGV9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICRzY29wZS5jb25uZWN0aW9uc1t0eXBlXS5wdXNoKHsnc291cmNlJzogc291cmNlTm9kZSwgJ3RhcmdldCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0YXJnZXROb2RlfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgc2hvdyBsYWJlbHMgb24gdG9wIDUgbW9zdCBjb25uZWN0ZWQgZW50aXRpZXMgaW5pdGlhbGx5LlxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChfLmtleXMoJHNjb3BlLmVudGl0eVR5cGVzKSwgZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgdG9wIDUgbW9zdC1jb25uZWN0ZWQgZW50aXRpZXMuXG4gICAgICAgICAgICAgICAgICAgIHZhciB0b3A1ID0gXy50YWtlUmlnaHQoXy5zb3J0QnkoXy5maWx0ZXIoJHNjb3BlLmVudGl0aWVzLCB7J3R5cGUnOiB0eXBlfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAnY29sbGFib3JhdGlvbnMubGVuZ3RoJyksIDUpO1xuICAgICAgICAgICAgICAgICAgICBfLmZvckVhY2godG9wNSwgZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5LndlbGxjb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGZpbHRlcmVkRW50aXRpZXMgPSBfLnNvcnRCeShmaWx0ZXJlZEVudGl0aWVzLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGUud2VsbGNvbm5lY3RlZCkgPyAxIDogMDtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGRyYXdOZXR3b3JrKGZpbHRlcmVkRW50aXRpZXMsIGZpbHRlcmVkQ29ubmVjdGlvbnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29udHJvbGxlcignbmV0d29ya0N0cmwnLCBkZXBlbmRlbmNpZXMpO1xuXG59KShhbmd1bGFyLCBSVFApO1xuIl19
