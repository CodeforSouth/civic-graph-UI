!function(i){"use strict";var a=["ui.bootstrap","leaflet-directive","ngAnimate","templateCache","civic-graph.api","civic-graph.util"],c=["civic-graph.util"];i.module("civic-graph.util",[]),i.module("civic-graph.api",c),i.module("civic-graph",a)}(angular);
!function(e){"use strict";function t(e,t){function i(e){var i=t.getPropertyFromObj(e);this.id=i("id"),this.name=i("name"),this.enabled=i("enable",!0)}function n(e){return new i(e)}function r(){return e.get("/categories")}return{getCategoryModel:n,getAll:r}}t.$inject=["cgApiCaller","cgUtilService"],e.module("civic-graph.api").factory("categoryService",t)}(angular);
!function(t){"use strict";function n(){return{Funding:!0,Data:!0,Employment:!0,Collaboration:!0}}function i(t,i){function o(t){var n=i.getPropertyFromObj(t);this.id=n("id"),this.name=n("name"),this.details=n("details"),this.entity=n("entity"),this.entity_id=n("entity_id")}function c(t){return new o(t)}function r(){return t.get(e)}return{getAll:r,getConnectionTypes:n,getConnectionModel:c}}var e="/connections";i.$inject=["cgApiCaller","cgUtilService"],t.module("civic-graph.api").factory("connectionService",i)}(angular);
!function(i){"use strict";function n(i){function n(n){var t=i.getPropertyFromObj(n);this.id=t("id"),this.year=t("year"),this.amount=t("amount",0)}function t(i){return new n(i)}return{getFinanceModel:t}}n.$inject=["cgUtilService"],i.module("civic-graph.api").factory("financeService",n)}(angular);
!function(n){"use strict";function t(n){function t(t){var i=n.getPropertyFromObj(t);this.id=i("id"),this.year=i("year"),this.amount=i("amount"),this.entity=i("entity","")}function i(n){return new t(n)}return{getFundingConnectionModel:i}}t.$inject=["cgUtilService"],n.module("civic-graph.api").factory("fundingConnectionService",t)}(angular);
!function(o){"use strict";function r(){return{templateUrl:"js/control/controls.html",restrict:"E",scope:{toggleNetwork:"="},controller:"controlCtrl",controllerAs:"control",bindToController:{minConnections:"="}}}var t=[r];o.module("civic-graph").directive("control",t)}(angular);
!function(t){"use strict";function a(){return{templateUrl:"js/analytic/analytics.html",restrict:"E",scope:{},controller:"analyticsCtrl"}}var c=[a];t.module("civic-graph").directive("analytics",c)}(angular);
!function(i,t){"use strict";function s(i){function s(){var i=t(this);i.css("height","55vh")}function c(){var i=t(this);window.innerHeight/3>parseInt(i.css("height"))?i.css("height","55vh"):i.css("height","30vh")}var e;i.mobile&&(e=t("#details-panel"),e.css("height","30vh"),e.scrollTop(0),e.scroll(s),e.click(c))}function c(){return{restrict:"A",link:s}}i.module("civic-graph").directive("addMobileEvents",[c])}(angular,$);
!function(o){"use strict";function c(o,c){o.closeWindow=function(){c.close()}}o.module("civic-graph").controller("modalCtrl",["$scope","$modalInstance",c])}(angular);
!function(e){"use strict";function t(t,i,n,o,s,d,c,a){function r(){var e,i,n,o;for(i in t.categories)if(t.categories.hasOwnProperty(i)){e=t.categories[i];for(n in t.editEntity.categories)t.editEntity.categories.hasOwnProperty(n)&&(o=t.editEntity.categories[n],e.id===o.id&&(e.enabled=o.enabled))}}t.isEditing=!1,t.editEntity=s.getEntityModel(t.entity),t.entityTypes=s.getEntityTypes(),t.influenceTypes=s.getInfluenceTypes();var u;t.categories=[],t.addressSearch=function(e){return i.jsonp("https://dev.virtualearth.net/REST/v1/Locations",{params:{query:e,key:"Ai58581yC-Sr7mcFbYTtUkS3ixE7f6ZuJnbFJCVI4hAtW1XoDEeZyidQz2gLCCyD",jsonp:"JSON_CALLBACK",include:"ciso2"}}).then(function(e){if(a.isDefined(e.data.resourceSets)&&e.data.resourceSets.length>0)return e.data.resourceSets[0].resources})},t.toggleCategory=function(e){if(0===t.editEntity.categories.length)t.editEntity.categories.push(e);else{var i=!1;for(var n in t.editEntity.categories)if(t.editEntity.categories.hasOwnProperty(n)){var o=t.editEntity.categories[n];if(o.id===e.id){i=!0,o.enabled=e.enabled;break}}i||t.editEntity.categories.push(e)}},t.setLocation=function(e,i){t.addressSearch(e.formattedAddress).then(function(n){if(a.isDefined(n[0])){var o=n[0],s=o.address,d=o.point;t.addLocation(i),e.address_line=a.isDefined(s.addressLine)?s.addressLine:"",e.locality=a.isDefined(s.locality)?s.locality:"",e.district=a.isDefined(s.adminDistrict)?s.adminDistrict:"",e.country=a.isDefined(s.countryRegion)?s.countryRegion:null,e.country_code=a.isDefined(s.countryRegionIso2)?s.countryRegionIso2:"",e.coordinates=a.isDefined(d.coordinates)?d.coordinates:null,e.postal_code=a.isDefined(s.postalCode)?s.postalCode:null}})},t.addLocation=function(e){e&&t.editEntity.locations.push(c.getLocationModel())},t.addKeyPerson=function(){o.some(t.editEntity.key_people,{name:"",id:null})||t.editEntity.key_people.push({name:"",id:null})},t.setFundingConnection=function(e,t){t.entity_id=e.id},t.addFundingConnection=function(e){o.some(e,{entity:""})||e.push({entity:"",amount:null,year:null,id:null})},t.setConnection=function(e,t){t.entity_id=e.id},t.addConnection=function(e){o.some(e,{entity:"",id:null})||e.push({entity:"",id:null,details:null})},t.addFinance=function(e){o.every(e,function(e){return e.amount>0&&e.year>1750})&&e.push({amount:null,year:null,id:null})},t.save=function(){function e(e){t.isSaving=!1,t.$emit("editEntitySuccess",e),t.cancelEdit()}function i(){t.isError=!0,n(function(){t.isError=!1},2e3)}t.isSaving=!0,s.saveEntity(t.editEntity.generateDBModel()).then(e,i)},t.cancelEdit=function(){t.isOpen=!1},t.$watch("entity",function(i,n){e.equals(i,n)||(t.editEntity=s.getEntityModel(i),t.categories=e.copy(u),r(),t.isEditing=a.isDefined(t.editEntity.id))}),d.getAll().then(function(i){u=i.categories,t.categories=e.copy(u)})}t.$inject=["$scope","$http","$timeout","_","entityService","categoryService","locationService","cgUtilService"],e.module("civic-graph").controller("editCtrl",t)}(angular);
!function(t){"use strict";function e(){return{templateUrl:"js/edit-entity/edit.html",restrict:"E",scope:{entity:"=",entities:"=",isOpen:"="},controller:"editCtrl"}}var i=[e];t.module("civic-graph").directive("editEntity",i)}(angular);
!function(o){"use strict";o.module("civic-graph").constant("_",window._).config(["$locationProvider","$compileProvider",function(o,n){o.html5Mode(!0),n.debugInfoEnabled(!0)}]).filter("thousandSuffix",function(){return function(o,n){var t,i=["k","M","G","T","P","E"];return window.isNaN(o)?null:o<1e3?o:(t=Math.floor(Math.log(o)/Math.log(1e3)),(o/Math.pow(1e3,t)).toFixed(n)+i[t-1])}})}(angular);
!function(t){"use strict";function i(t,i,e,n,o){function a(){t.$broadcast("triggerNetworkDraw")}t.entities=[],t.searchItems=null,t.categories=[],t.currentLocation=null,t.clickedLocation={},t.clickedLocation.location=null,t.clickedEntity={},t.clickedEntity.entity=null,t.editing=!1,t.actions={interacted:!1},t.showsearchMB=!1,t.showAnalytics=!1,t.entityTypes=n.getEntityTypes(),t.connectionTypes=o.getConnectionTypes(),t.status={isNetworkShown:!0,license:!0,networkLoading:!0},t.toggleAnalytics=function(){t.showAnalytics=!t.showAnalytics},this.minConnections=t.minConnections=2;var s=this;t.$watch("minConnections",a),t.connectionChange=function(){console.log(s.minConnections),t.minConnections=s.minConnections,t.$broadcast("triggerNetworkDraw")},t.hydePartials=function(i){"search"===i?(t.editing=!1,t.settingsEnabled=!1):"settings"===i?(t.editing=!1,t.showsearchMB=!1):"edit"===i?(t.settingsEnabled=!1,t.showsearchMB=!1):(t.editing=!1,t.settingsEnabled=!1,t.showsearchMB=!1)},t.showSearch=function(){t.hydePartials("search"),t.showsearchMB=!t.showsearchMB,t.status.license=!1},t.toggleSettings=function(){t.hydePartials("settings"),t.settingsEnabled=!t.settingsEnabled},t.startEdit=function(i){t.currentEntity=i,t.mobile&&t.hydePartials("edit"),t.editing=!0},t.switchView=function(){t.status.isNetworkShown=!t.status.isNetworkShown,t.status.isNetworkShown&&t.$broadcast("triggerNetworkDraw")},window.mobilecheck=function(){var t=!1,i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,e=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i;return function(n){(i.test(n)||e.test(n.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},t.mobile=window.mobilecheck(),t.settingsEnabled=!t.mobile,i(function(){n.getAll().then(function(i){t.entities=i.nodes;var n=e.uniq(e.pluck(e.flatten(e.pluck(t.entities,"locations")),"locality")),o=e.map(n,function(i){var n=e.filter(t.entities,e.flow(e.property("locations"),e.partialRight(e.any,{locality:i})));return{name:i,type:"location",entities:n,dict:e.zipObject(e.pluck(n,"name"),e.pluck(n,"index"))}});t.searchItems=o.concat(t.entities),t.overviewUrl="js/overview/overview.html",t.$broadcast("triggerNetworkDraw")})},100),t.overviewUrl=null,t.setEntity=function(i){t.currentLocation=null,t.currentEntity=i,t.editing&&t.stopEdit(),t.$broadcast("entityChange")},t.setEntityID=function(i){t.setEntity(e.find(t.entities,{id:i}))},t.setLocation=function(i){t.currentLocation=i,t.editing&&t.stopEdit(),t.$broadcast("itemChange")},t.selectItem=function(i){"location"===i.type?t.setLocation(i):t[i%1===0?"setEntityID":"setEntity"](i),t.$broadcast("selectItem",i)},t.$on("setCurrentEntity",function(i,e){t.currentEntity=e.value}),t.$on("setCurrentLocation",function(i,e){t.currentLocation=e.value}),t.setEntities=function(i){t.entities=i},t.stopEdit=function(){t.editing=!1},t.$on("editEntitySuccess",function(i){t.setEntities(i.nodes),t.$broadcast("triggerNetworkDraw")}),t.animationsEnabled=!0}var e=["$scope","$timeout","_","entityService","connectionService",i];t.module("civic-graph").controller("homeCtrl",e)}(angular);
!function(i){"use strict";var a=[];i.module("civic-graph").directive("map",a)}(angular);
!function(e){"use strict";function n(e,n,t,i,c){function o(){function o(i){var o=n("filter")(e.entities,function(n){return n.collaborations.length>=e.minConnections}),a={};t.forEach(t.keys(i.connections),function(e){a[e]=[]}),t.forEach(i.connections,function(e,n){t.forEach(e,function(e){var i=t.find(o,{id:e.source}),r=t.find(o,{id:e.target});c.isDefined(i)&&c.isDefined(r)&&a[n].push({source:i,target:r})})}),t.forEach(t.keys(e.entityTypes),function(n){var i=t.takeRight(t.sortBy(t.filter(e.entities,{type:n}),"collaborations.length"),5);t.forEach(i,function(e){e.wellconnected=!0})}),o=t.sortBy(o,function(e){return e.wellconnected?1:0}),r(o,a)}i.getAll().then(o)}e.isLoading=!0,e.connections={},o(),e.safeApply=function(e){var n=this.$root.$$phase;"$apply"===n||"$digest"===n?e&&"function"==typeof e&&e():this.$apply(e)},e.$on("triggerNetworkDraw",o),e.$on("viewChange",function(e){console.log(e)});var r=function(n,i){e.isLoading=!1;var o=d3.select("#network");o.selectAll("*").remove();var r=o.node().getBoundingClientRect(),a=r.height,s=r.width,l=6,u=7,d={Individual:{x:1,y:1},"For-Profit":{x:1,y:-1},"Non-Profit":{x:-1,y:1},Government:{x:-1,y:-1}},f=10,y=50,p=d3.max(n,function(e){return parseInt(e.employees)}),k=d3.max(n,function(e){return parseInt(e.followers)}),g={employees:d3.scale.sqrt().domain([10,p]).range([f,y]),followers:d3.scale.sqrt().domain([10,k]).range([f,y])},m={},h=d3.layout.force().size([s,a]).nodes(n).links(t.flatten(t.values(i))).charge(function(e){return e.employees?-2*g.employees(e.employees):-20}).linkStrength(0).linkDistance(50);t.forEach(i,function(e,n){m[n]=o.selectAll(".link ."+n+"-link").data(e).enter().append("line").attr("class",function(e){return c.isDefined(e.source)&&c.isDefined(e.target)?(e.type=n,"link "+n+"-link "+e.source.type+"-link "+e.target.type+"-link"):""})});var x=o.selectAll(".node").data(n).enter().append("g").attr("class",function(e){return"node "+e.type+"-node"}).call(h.drag);x.append("circle").attr("r",function(e){return e.employees?g.employees(e.employees):u}),x.append("text").text(function(e){return e.nickname?e.nickname:e.name}).attr("dx",function(){return-.065*this.getComputedTextLength()/2+"em"}).attr("dy",function(){return.08*this.parentNode.getBBox().height/2+.5+"em"}),h.on("tick",function(e){var i=l*e.alpha;t.forEach(n,function(e){e.x&&d[e.type]&&(e.x+=d[e.type].x*i,e.y+=d[e.type].y*i,e.x=Math.max(y,Math.min(s-y,e.x)),e.y=Math.max(y,Math.min(a-y,e.y)))}),t.forEach(m,function(e){e.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y})}),x.attr("transform",function(e){return"translate("+e.x+","+e.y+")"})});var E=function(e){requestAnimationFrame(function n(){for(var t=0;t<e;t++)h.tick();h.alpha()>0&&requestAnimationFrame(n)})};e.mobile||E(7),h.start();var v={};t.forEach(m,function(e){t.forEach(e[0],function(e){var n=e.__data__.source,t=e.__data__.target;v[n.index+","+t.index]=!0,v[t.index+","+n.index]=!0})});var L,A=function(e,n){return v[e.index+","+n.index]||e.index===n.index},T=function(e){x.classed("focused",function(n){return A(e,n)}).classed("unfocused",function(n){return!A(e,n)}),t.forEach(m,function(n){n.classed("focused",function(n){return e.index===n.source.index||e.index===n.target.index}).classed("unfocused",function(n){return!(e.index===n.source.index||e.index===n.target.index)})})},w=function(n){e.currentEntity!==n&&e.setEntity(n),e.safeApply(),T(n)},$=function(n){x.classed("focused",!1).classed("unfocused",!1),t.forEach(m,function(e){e.classed("focused",!1).classed("unfocused",!1)}),n.fixed=!1,e.clickedEntity.entity&&h.resume()},D=function(n){e.clickedEntity.entity||e.editing||e.currentLocation||(L=setTimeout(function(){w(n)},500)),e.actions.interacted=!0,e.safeApply()},b=function(n){e.clickedEntity.entity||e.currentLocation||($(n),clearTimeout(L)),e.actions.interacted=!0,e.safeApply()},_=function(n){e.safeApply(),x.classed("focused",function(e){return e.name in n.dict}).classed("unfocused",function(e){return!(e.name in n.dict)}),t.forEach(m,function(e){e.classed("focused",function(e){return e.source.name in n.dict&&e.target.name in n.dict}).classed("unfocused",function(e){return!(e.source.name in n.dict&&e.target.name in n.dict)})})},B=function(){x.classed("focused",!1).classed("unfocused",!1),t.forEach(m,function(e){e.classed("focused",!1).classed("unfocused",!1)}),e.clickedLocation.location&&h.resume()},P=function(n){e.showLicense=!1,e.clickedEntity.entity&&($(e.clickedEntity.entity),e.clickedEntity.entity=null),e.clickedLocation.location!==n?(B(e.clickedLocation.location),_(n)):e.clickedLocation.location===n&&(e.clickedLocation.location=n,_(n)),d3.event&&d3.event.stopPropagation(),e.actions.interacted=!0,e.safeApply()},C=function(n){e.showLicense=!1,c.isDefined(e.clickedLocation)&&(c.isDefined(e.clickedLocation.location)&&(B(e.clickedLocation.entity),e.clickedLocation.location=null),e.clickedEntity.entity===n?(e.clickedEntity.entity=null,w(n)):(e.clickedEntity.entity&&$(e.clickedEntity.entity),e.clickedEntity.entity=n,w(n))),d3.event&&d3.event.stopPropagation(),e.actions.interacted=!0,e.safeApply()},q=function(){c.isDefined(e.clickedLocation)&&(c.isDefined(e.clickedLocation.location)&&($(e.clickedLocation.location),e.clickedLocation.location=null),c.isDefined(e.clickedEntity.entity)&&($(e.clickedEntity.entity),e.clickedEntity.entity=null)),e.safeApply()},I=function(n){n.fixed?$(n):(n.x=s/2,n.y=a/2,n.px=s/2,n.py=a/2,n.fixed=!0,e.clickedEntity.entity=n),e.actions.interacted=!0,e.safeApply()};x.on("mouseover",D),x.on("mouseout",b),x.on("click",C),x.on("dblclick",I),o.on("click",q),x.classed("wellconnected",function(e){return e.hasOwnProperty("wellconnected")}),e.$on("changeSizeBy",function(e,n){o.selectAll("circle").transition().duration(250).attr("r",function(e){return e[n]?g[n](e[n]):u})}),e.$on("toggleLink",function(n,i){t.map(e.entityTypes,function(n,t){o.selectAll("."+t+"-link").classed({visible:function(n){return!e.connectionTypes[n.type]||e.entityTypes[n.source.type]&&e.entityTypes[n.target.type]},hidden:function(n){return!e.connectionTypes[n.type]||!e.entityTypes[n.source.type]||!e.entityTypes[n.target.type]}})})}),e.$on("toggleNode",function(n,t){o.selectAll("."+t.name+"-node").classed({visible:t.enabled,hidden:!t.enabled}),o.selectAll("."+t.name+"-link").classed({visible:function(n){return e.connectionTypes[n.type]&&e.entityTypes[n.source.type]&&e.entityTypes[n.target.type]},hidden:function(n){return!e.connectionTypes[n.type]||!e.entityTypes[n.source.type]||!e.entityTypes[n.target.type]}})}),e.$on("selectItem",function(n,t){"location"===t.type?P(e.currentLocation):C(e.currentEntity)})}}n.$inject=["$scope","$filter","_","connectionService","cgUtilService"],e.module("civic-graph").controller("networkCtrl",n)}(angular,RTP);
!function(r){"use strict";function t(){return{restrict:"E",templateUrl:"js/network/network.html",controller:"networkCtrl"}}var e=[t];r.module("civic-graph").directive("network",e)}(angular);
!function(e){"use strict";e.module("civic-graph").directive("input",function(){return{restict:"E",require:"?ngModel",link:function(e,r,t,i){"type"in t&&"range"===t.type.toLowerCase()&&i.$parsers.push(parseFloat)}}})}(angular);
!function(e){"use strict";function t(e,t){e.categorizedEntities={},t.forEach(t.keys(e.entityTypes),function(i){e.categorizedEntities[i]=t.filter(e.entities,{type:i})})}e.module("civic-graph").controller("overviewCtrl",["$scope","_",t])}(angular);
!function(r){"use strict";function n(r){return!("undefined"==typeof r||null===r)}function t(r){return n(r)&&!Array.isArray(r)&&"object"==typeof r}function e(r){var t=n(r)?r:{};return function(r,e){var i=n(e)?e:null;return n(t[r])?t[r]:i}}function i(r,n){var e=Array.isArray(r)?r.filter(t).map(n):[];return e.concat([n()])}function u(){return{isDefined:n,isObject:t,getPropertyFromObj:e,loopAndInit:i}}r.module("civic-graph.util").factory("cgUtilService",u)}(angular);
!function(t){"use strict";function e(t){t.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}e.$inject=["$httpProvider"],t.module("civic-graph.api").config(e)}(angular);
!function(t){"use strict";function r(t,r){function a(t){return console.error("Recieved an error from API with this message: %O",t.data),r.reject(t)}function i(t){return t.data}function c(r,c){return t.get(e+r,{params:c,headers:n}).then(i,a)}function o(r,c){return t.post(e+r,c,{headers:n}).then(i,a)}return{get:c,post:o}}var e="https://api.civicgraph.io/api",n={};r.$inject=["$http","$q"],t.module("civic-graph.api").factory("cgApiCaller",r)}(angular);
!function(e){"use strict";function i(e){function i(i){function t(){var t=e.isDefined(i)?i:{},o=e.isDefined(t.address_line)?t.address_line+" ":"",c=e.isDefined(t.locality)?t.locality+", ":"",n=e.isDefined(t.country_code)?t.country_code+" ":"",r=e.isDefined(t.postal_code)?t.postal_code:"";return(o+c+n+r).trim()}var o=this,c=e.getPropertyFromObj(i);o.id=c("id"),o.address_line=c("address_line"),o.locality=c("locality"),o.district=c("district"),o.postal_code=c("postal_code"),o.country=c("country"),o.country_code=c("country_code"),o.coordinates=c("coordinates"),o.formattedAddress=t()}function t(e){return new i(e)}return{getLocationModel:t}}i.$inject=["cgUtilService"],e.module("civic-graph.api").factory("locationService",i)}(angular);
!function(e){"use strict";function n(){return{Government:!0,"For-Profit":!0,"Non-Profit":!0,Individual:!0}}function o(){return["Local","National","Global"]}function t(e,t,i,p,r,a,c){function l(e){function n(){var e=new l(o);return e.locations.pop(),e.locations.pop(),e.grants_received.pop(),e.grants_received.pop(),e.grants_given.pop(),e.grants_given.pop(),e.investments_received.pop(),e.investments_received.pop(),e.investments_made.pop(),e.investments_made.pop(),e.data_given.pop(),e.data_given.pop(),e.data_received.pop(),e.data_received.pop(),e.collaborations.pop(),e.collaborations.pop(),e.key_people.pop(),e.key_people.pop(),e.employments.pop(),e.employments.pop(),e.revenues.pop(),e.revenues.pop(),e.expenses.pop(),e.expenses.pop(),e.categories.pop(),e.categories.pop(),e.description="",e}var o=this,d=c.isDefined(e)?e:{},s=c.getPropertyFromObj(e);o.id=s("id"),o.name=s("name"),o.influence=s("influence"),o.type=s("type"),o.nickname=s("nickname"),o.url=s("url"),o.twitter_handle=s("twitter_handle"),o.employees=s("employees"),o.locations=c.loopAndInit(d.locations,r.getLocationModel),o.grants_received=c.loopAndInit(d.grants_received,t.getFundingConnectionModel),o.investments_received=c.loopAndInit(d.investments_received,t.getFundingConnectionModel),o.grants_given=c.loopAndInit(d.grants_given,t.getFundingConnectionModel),o.investments_made=c.loopAndInit(d.investments_made,t.getFundingConnectionModel),o.data_given=c.loopAndInit(d.data_given,i.getConnectionModel),o.data_received=c.loopAndInit(d.data_received,i.getConnectionModel),o.collaborations=c.loopAndInit(d.collaborations,i.getConnectionModel),o.key_people=c.loopAndInit(d.key_people,i.getConnectionModel),o.employments=c.loopAndInit(d.employments,i.getConnectionModel),o.revenues=c.loopAndInit(d.revenues,p.getFinanceModel),o.expenses=c.loopAndInit(d.expenses,p.getFinanceModel),o.categories=c.loopAndInit(d.categories,a.getCategoryModel),o.generateDBModel=n}function d(e){return new l(e)}function s(){return e.get("/entities")}function g(n){return e.post("/save",{entity:n})}return{getEntityModel:d,getEntityTypes:n,getInfluenceTypes:o,getAll:s,saveEntity:g}}t.$inject=["cgApiCaller","fundingConnectionService","connectionService","financeService","locationService","categoryService","cgUtilService"],e.module("civic-graph.api").factory("entityService",t)}(angular);
!function(e){"use strict";function o(e,o,n,t,i){function c(){a.changeView(a.toggleNetwork?"Network":"Map")}var a=this;a.entityTypes=e.getEntityTypes(),a.connectionTypes=o.getConnectionTypes(),a.sizeByList=[{name:"Employees",value:"employees"},{name:"Twitter Followers",value:"followers"}],a.sizeBy="employees",a.showView={Network:!0,Map:!1},a.switchView=c,a.changeView=function(e){t.forEach(t.keys(a.showView),function(o){a.showView[o]=e===o}),n.$broadcast("viewChange",a.showView)},a.showAbout=function(){i.open({animation:!1,templateUrl:"control/about.html",controller:"modalCtrl"})},a.toggleNode=function(e){n.$broadcast("toggleNode",{name:e,enabled:a.entityTypes[e]})},a.toggleLink=function(e){n.$broadcast("toggleLink",{name:e,enabled:a.connectionTypes[e]})},a.changeSizeBy=function(){n.$broadcast("changeSizeBy",a.sizeBy)},a.changeSizeBy()}var n=["entityService","connectionService","$rootScope","_","$modal",o];e.module("civic-graph").controller("controlCtrl",n)}(angular);
!function(c){"use strict";function n(c){}c.module("civic-graph").controller("analyticsCtrl",["$scope",n])}(angular);
!function(t,e,n){"use strict";function i(t,i,o,r,a){t.options={center:{lat:20,lng:-40,zoom:3},defaults:{tileLayer:"https://api.tiles.mapbox.com/v4/mapbox.light/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZGF2aWRscm50IiwiYSI6IjA0M2RkNzMzZWJmNzEzNGYzMTdhYTExYzAyZmU4ZTE1In0.TNYlFta2VItrkn4L0Z9BJQ",tileLayerOptions:{detectRetina:!0,reuseTiles:!1},zoomControl:!1,attributionControl:!1}},i(function(){var i=function(t){var n=t.data,i=e.layout.pie().sort(null).value(function(t){return t.value}),o=e.svg.arc().outerRadius(t.r).innerRadius(t.r-10),r=t.r+t.strokeWidth,a=2*r,c=a,l=document.createElementNS(e.ns.prefix.svg,"svg"),s=e.select(l).data(n).attr("class","piechart").attr("width",a).attr("height",c),d=s.selectAll(".arc").data(i(n)).enter().append("g").attr("class","arc").attr("transform","translate("+r+","+r+")");return d.append("path").attr("d",o).attr("class",function(t){return t.data.type+"-arc"}),d.append("svg:text").text(function(e,n){if(0===n)return t.count}).attr("x",-4*t.count.toString().length).attr("dy",5).attr("class","arcText"),window.XMLSerializer?(new window.XMLSerializer).serializeToString(l):l.xml?l.xml:""};o.getMap().then(function(e){function o(t){var e=t.getAllChildMarkers(),o=e.length,a=r.pluck(e,"options"),c=r.map(r.countBy(a,"type"),function(t,e){return{type:e,value:t}}),l=28,s=1,d=2*(l+s),u=i({data:c,r:l,strokeWidth:s,count:o});return new n.DivIcon({html:u,className:"marker-cluster",iconSize:new n.point(d,d)})}function a(t){function e(e){if(r.every(e.coordinates)){"40.78200"===e.coordinates[0].toFixed(5)&&"-73.83170"===e.coordinates[1].toFixed(5)&&(e.coordinates[0]=40.77065,e.coordinates[1]=-73.97406);var i=n.marker(e.coordinates,{icon:s[t.type],title:t.name,entity_id:t.id,message:t.name,type:t.type});d.addLayer(i)}}r.forEach(t.locations,e)}function c(t){console.error(t.message+"  %O",t)}var l=t.entities;e.invalidateSize(),new n.Control.Zoom({position:"topright"}).addTo(e),n.control.locate({position:"topright",showPopup:!1,icon:"fa fa-location-arrow"}).addTo(e);var s={"Non-Profit":n.icon({iconUrl:"img/marker-nonprof.svg",iconSize:[60,60]}),"For-Profit":n.icon({iconUrl:"img/marker-prof.svg",iconSize:[60,60]}),Individual:n.icon({iconUrl:"img/marker-ind.svg",iconSize:[60,60]}),Government:n.icon({iconUrl:"img/marker-gov.svg",iconSize:[60,60]})},d=n.markerClusterGroup({spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,iconCreateFunction:o,maxClusterRadius:30,spiderfyDistanceMultiplier:1.3});console.log("Original: %O",t.entities),console.log("Filtered: %O",l),r.forEach(l,a),e.addLayer(d),e.on("locationerror",c),d.on("click",function(e){t.setEntityID(e.layer.options.entity_id),t.clickedEntity.entity=t.currentEntity,t.actions.interacted=!0,t.settingsEnabled&&t.mobile&&t.toggleSettings(),t.safeApply()}),e.on("click",function(){t.clickedEntity.entity=null,t.actions.interacted=!0,t.safeApply()}),t.$on("selectItem",function(){var n=t.currentEntity.locations.length>0?r.pluck(t.currentEntity.locations,"coordinates"):null;n.length>0&&e.setView(n[0],11),t.actions.interacted=!0,t.safeApply()})})})}var o=["$scope","$timeout","leafletData","_","$filter",i];t.module("civic-graph").controller("mapCtrl",o)}(angular,d3,L);
!function(e){"use strict";function n(e,n){e.itemsShownDefault={key_people:3,grants_given:3,grants_received:3,investments_made:3,investments_received:3,collaborations:3,employments:3,relations:3,data_given:3,data_received:3,revenues:3,expenses:3},e.itemsShown=n.clone(e.itemsShownDefault),e.$on("entityChange",function(){e.itemsShown=n.clone(e.itemsShownDefault)}),e.showMore=function(n){e.itemsShown[n]=e.currentEntity[n].length},e.showLess=function(n){e.itemsShown[n]=e.itemsShownDefault[n]}}e.module("civic-graph").controller("detailsCtrl",["$scope","_",n])}(angular);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNpdmljLWdyYXBoLm1vZHVsZS5qcyIsImFwaS9jYXRlZ29yeS5zZXJ2aWNlLmpzIiwiYXBpL2Nvbm5lY3Rpb24uc2VydmljZS5qcyIsImFwaS9maW5hbmNlLnNlcnZpY2UuanMiLCJhcGkvZnVuZGluZ0Nvbm5lY3Rpb24uc2VydmljZS5qcyIsImNvbnRyb2wvY29udHJvbERpcmVjdGl2ZS5qcyIsImFuYWx5dGljL2FuYWx5dGljc0RpcmVjdGl2ZS5qcyIsImV4dHJhL2FkZE1vYmlsZUV2ZW50cy5qcyIsImV4dHJhL21vZGFsQ3RybC5qcyIsImVkaXQtZW50aXR5L2VkaXRDdHJsLmpzIiwiZWRpdC1lbnRpdHkvZWRpdEVudGl0eURpcmVjdGl2ZS5qcyIsIm1haW4vYXBwLmpzIiwibWFpbi9ob21lQ3RybC5qcyIsIm1hcC9tYXBEaXJlY3RpdmUuanMiLCJuZXR3b3JrL25ldHdvcmtDdHJsLmpzIiwibmV0d29yay9uZXR3b3JrRGlyZWN0aXZlLmpzIiwibmV0d29yay9zbGlkZXJCYXIuanMiLCJvdmVydmlldy9vdmVydmlld0N0cmwuanMiLCJ1dGlsL3NlcnZpY2UuanMiLCJhcGkvYXBpQ2FsbGVyL2NvbmZpZy5qcyIsImFwaS9hcGlDYWxsZXIvc2VydmljZS5qcyIsImFwaS9lbnRpdHkvbG9jYXRpb24uc2VydmljZS5qcyIsImFwaS9lbnRpdHkvc2VydmljZS5qcyIsImNvbnRyb2wvY29udHJvbGxlci9jb250cm9sQ3RybC5qcyIsImFuYWx5dGljL2NvbnRyb2xsZXIvYW5hbHl0aWNzQ3RybC5qcyIsIm1hcC9jb250cm9sbGVyL21hcEN0cmwuanMiLCJkZXRhaWwvY29udHJvbGxlci9kZXRhaWxzQ3RybC5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibWFpbkRlcGVuZGVuY3lMaXN0IiwiYXBpRGVwZW5kZW5jeUxpc3QiLCJtb2R1bGUiLCJTZXJ2aWNlIiwiYXBpQ2FsbGVyIiwidXRpbHMiLCJDYXRlZ29yeSIsIm9iaiIsImdldFByb3BlcnR5IiwiZ2V0UHJvcGVydHlGcm9tT2JqIiwidGhpcyIsImlkIiwibmFtZSIsImVuYWJsZWQiLCJnZXRDYXRlZ29yeU1vZGVsIiwiZ2V0QWxsIiwiZ2V0IiwiJGluamVjdCIsImZhY3RvcnkiLCJnZXRDb25uZWN0aW9uVHlwZXMiLCJGdW5kaW5nIiwiRGF0YSIsIkVtcGxveW1lbnQiLCJDb2xsYWJvcmF0aW9uIiwiQ29ubmVjdGlvbiIsImRldGFpbHMiLCJlbnRpdHkiLCJlbnRpdHlfaWQiLCJnZXRDb25uZWN0aW9uTW9kZWwiLCJ1cmwiLCJGaW5hbmNlIiwieWVhciIsImFtb3VudCIsImdldEZpbmFuY2VNb2RlbCIsIkZ1bmRpbmdDb25uZWN0aW9uIiwiZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbCIsImNvbnRyb2xEaXJlY3RpdmUiLCJ0ZW1wbGF0ZVVybCIsInJlc3RyaWN0Iiwic2NvcGUiLCJ0b2dnbGVOZXR3b3JrIiwiY29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsImJpbmRUb0NvbnRyb2xsZXIiLCJtaW5Db25uZWN0aW9ucyIsImNvbnRyb2xEZXBlbmRlbmNpZXMiLCJkaXJlY3RpdmUiLCJhbmFseXRpY3NEaXJlY3RpdmUiLCJhbmFseXRpY3NEZXBlbmRlbmNpZXMiLCIkIiwibGlua0Z1bmN0aW9uIiwic2Nyb2xsIiwic2VsZiIsImNzcyIsImNsaWNrIiwid2luZG93IiwiaW5uZXJIZWlnaHQiLCJwYXJzZUludCIsImRldGFpbHNQYW5lbCIsIm1vYmlsZSIsInNjcm9sbFRvcCIsImFkZE1vYmlsZUV2ZW50cyIsImxpbmsiLCJtb2RhbEN0cmwiLCIkc2NvcGUiLCIkbW9kYWxJbnN0YW5jZSIsImNsb3NlV2luZG93IiwiY2xvc2UiLCJDb250cm9sbGVyIiwiJGh0dHAiLCIkdGltZW91dCIsIl8iLCJlbnRpdHlTZXJ2aWNlIiwiY2F0ZWdvcnlTZXJ2aWNlIiwibG9jYXRpb25TZXJ2aWNlIiwiaW5pdENhdGVnb3J5QXJyYXkiLCJjYXRlZ29yeSIsImNhdGVnb3J5SW5kZXgiLCJlbnRpdHlDYXRlZ29yeUluZGV4IiwiZW50aXR5Q2F0ZWdvcnkiLCJjYXRlZ29yaWVzIiwiaGFzT3duUHJvcGVydHkiLCJlZGl0RW50aXR5IiwiaXNFZGl0aW5nIiwiZ2V0RW50aXR5TW9kZWwiLCJlbnRpdHlUeXBlcyIsImdldEVudGl0eVR5cGVzIiwiaW5mbHVlbmNlVHlwZXMiLCJnZXRJbmZsdWVuY2VUeXBlcyIsImNhdGVnb3J5QmFja3VwIiwiYWRkcmVzc1NlYXJjaCIsInNlYXJjaCIsImpzb25wIiwicGFyYW1zIiwicXVlcnkiLCJrZXkiLCJpbmNsdWRlIiwidGhlbiIsInJlc3BvbnNlIiwiaXNEZWZpbmVkIiwiZGF0YSIsInJlc291cmNlU2V0cyIsImxlbmd0aCIsInJlc291cmNlcyIsInRvZ2dsZUNhdGVnb3J5IiwicHVzaCIsImZvdW5kIiwic2V0TG9jYXRpb24iLCJsb2NhdGlvbiIsImlzTGFzdCIsImZvcm1hdHRlZEFkZHJlc3MiLCJhcGlDYWxsUmVzdWx0IiwicmVzdWx0IiwiYWRkcmVzcyIsInBvaW50IiwiYWRkTG9jYXRpb24iLCJhZGRyZXNzX2xpbmUiLCJhZGRyZXNzTGluZSIsImxvY2FsaXR5IiwiZGlzdHJpY3QiLCJhZG1pbkRpc3RyaWN0IiwiY291bnRyeSIsImNvdW50cnlSZWdpb24iLCJjb3VudHJ5X2NvZGUiLCJjb3VudHJ5UmVnaW9uSXNvMiIsImNvb3JkaW5hdGVzIiwicG9zdGFsX2NvZGUiLCJwb3N0YWxDb2RlIiwibG9jYXRpb25zIiwiZ2V0TG9jYXRpb25Nb2RlbCIsImFkZEtleVBlcnNvbiIsInNvbWUiLCJrZXlfcGVvcGxlIiwic2V0RnVuZGluZ0Nvbm5lY3Rpb24iLCJmdW5kaW5nIiwiYWRkRnVuZGluZ0Nvbm5lY3Rpb24iLCJzZXRDb25uZWN0aW9uIiwiY29ubmVjdGlvbiIsImFkZENvbm5lY3Rpb24iLCJjb25uZWN0aW9ucyIsImFkZEZpbmFuY2UiLCJyZWNvcmRzIiwiZXZlcnkiLCJyIiwic2F2ZSIsInN1Y2Nlc3MiLCJpc1NhdmluZyIsIiRlbWl0IiwiY2FuY2VsRWRpdCIsImVycm9yIiwiaXNFcnJvciIsInNhdmVFbnRpdHkiLCJnZW5lcmF0ZURCTW9kZWwiLCJpc09wZW4iLCIkd2F0Y2giLCJuZXdWYWwiLCJvbGRWYWwiLCJlcXVhbHMiLCJjb3B5IiwiZWRpdEVudGl0eURpcmVjdGl2ZSIsImVudGl0aWVzIiwiZWRpdEVudGl0eURlcGVuZGVuY2llcyIsImNvbnN0YW50IiwiY29uZmlnIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCIkY29tcGlsZVByb3ZpZGVyIiwiaHRtbDVNb2RlIiwiZGVidWdJbmZvRW5hYmxlZCIsImZpbHRlciIsImlucHV0IiwiZGVjaW1hbHMiLCJleHAiLCJzdWZmaXhlcyIsImlzTmFOIiwiTWF0aCIsImZsb29yIiwibG9nIiwicG93IiwidG9GaXhlZCIsImhvbWVDdHJsIiwiY29ubmVjdGlvblNlcnZpY2UiLCJ3YXRjaE1pbkNvbm5lY3Rpb24iLCIkYnJvYWRjYXN0Iiwic2VhcmNoSXRlbXMiLCJjdXJyZW50TG9jYXRpb24iLCJjbGlja2VkTG9jYXRpb24iLCJjbGlja2VkRW50aXR5IiwiZWRpdGluZyIsImFjdGlvbnMiLCJpbnRlcmFjdGVkIiwic2hvd3NlYXJjaE1CIiwic2hvd0FuYWx5dGljcyIsImNvbm5lY3Rpb25UeXBlcyIsInN0YXR1cyIsImlzTmV0d29ya1Nob3duIiwibGljZW5zZSIsIm5ldHdvcmtMb2FkaW5nIiwidG9nZ2xlQW5hbHl0aWNzIiwiY29ubmVjdGlvbkNoYW5nZSIsImNvbnNvbGUiLCJoeWRlUGFydGlhbHMiLCJleGNlcHQiLCJzZXR0aW5nc0VuYWJsZWQiLCJzaG93U2VhcmNoIiwidG9nZ2xlU2V0dGluZ3MiLCJzdGFydEVkaXQiLCJjdXJyZW50RW50aXR5Iiwic3dpdGNoVmlldyIsIm1vYmlsZWNoZWNrIiwiY2hlY2siLCJyZWdleCIsInJlZ2V4MiIsImEiLCJ0ZXN0Iiwic3Vic3RyIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidmVuZG9yIiwib3BlcmEiLCJub2RlcyIsInVuaXEiLCJwbHVjayIsImZsYXR0ZW4iLCJlbnRpdGllc0J5TG9jYXRpb24iLCJtYXAiLCJsb2MiLCJmaW5kaW5ncyIsImZsb3ciLCJwcm9wZXJ0eSIsInBhcnRpYWxSaWdodCIsImFueSIsInR5cGUiLCJkaWN0IiwiemlwT2JqZWN0IiwiY29uY2F0Iiwib3ZlcnZpZXdVcmwiLCJzZXRFbnRpdHkiLCJzdG9wRWRpdCIsInNldEVudGl0eUlEIiwiZmluZCIsInNlbGVjdEl0ZW0iLCJpdGVtIiwiJG9uIiwiZXZlbnQiLCJhcmdzIiwidmFsdWUiLCJzZXRFbnRpdGllcyIsImFuaW1hdGlvbnNFbmFibGVkIiwiaG9tZURlcGVuZGVuY2llcyIsImRlcGVuZGVuY2llcyIsIiRmaWx0ZXIiLCJzdGFydExvYWQiLCJmaWx0ZXJlZEVudGl0aWVzIiwiY29sbGFib3JhdGlvbnMiLCJmaWx0ZXJlZENvbm5lY3Rpb25zIiwiZm9yRWFjaCIsImtleXMiLCJzb3VyY2VOb2RlIiwic291cmNlIiwidGFyZ2V0Tm9kZSIsInRhcmdldCIsInRvcDUiLCJ0YWtlUmlnaHQiLCJzb3J0QnkiLCJ3ZWxsY29ubmVjdGVkIiwiZSIsImRyYXdOZXR3b3JrIiwiaXNMb2FkaW5nIiwic2FmZUFwcGx5IiwiZm4iLCJwaGFzZSIsIiRyb290IiwiJCRwaGFzZSIsIiRhcHBseSIsInZpZXdPYmoiLCJlbnRpdHlBcnJheSIsImNvbm5lY3Rpb25BcnJheSIsInN2ZyIsImQzIiwic2VsZWN0Iiwic2VsZWN0QWxsIiwicmVtb3ZlIiwiYm91bmRzIiwibm9kZSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImhlaWdodCIsIndpZHRoIiwib2Zmc2V0U2NhbGUiLCJkZWZhdWx0Tm9kZVNpemUiLCJvZmZzZXRzIiwiSW5kaXZpZHVhbCIsIngiLCJ5IiwiRm9yLVByb2ZpdCIsIk5vbi1Qcm9maXQiLCJHb3Zlcm5tZW50IiwibG93ZXJCb3VuZFJhZGl1cyIsInVwcGVyQm91bmRSYWRpdXMiLCJtYXhFbXBsb3llZXMiLCJtYXgiLCJlbCIsImVtcGxveWVlcyIsIm1heEZvbGxvd2VycyIsImZvbGxvd2VycyIsInNjYWxlIiwic3FydCIsImRvbWFpbiIsInJhbmdlIiwibGlua3MiLCJmb3JjZSIsImxheW91dCIsInNpemUiLCJ2YWx1ZXMiLCJjaGFyZ2UiLCJkIiwibGlua1N0cmVuZ3RoIiwibGlua0Rpc3RhbmNlIiwiZW50ZXIiLCJhcHBlbmQiLCJhdHRyIiwiY2FsbCIsImRyYWciLCJ0ZXh0Iiwibmlja25hbWUiLCJnZXRDb21wdXRlZFRleHRMZW5ndGgiLCJwYXJlbnROb2RlIiwiZ2V0QkJveCIsIm9uIiwiayIsImFscGhhIiwibWluIiwic3BlZWRBbmltYXRlIiwidGlja3MiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJyZW5kZXIiLCJpIiwidGljayIsInN0YXJ0IiwibGlua2VkQnlJbmRleCIsImwiLCJfX2RhdGFfXyIsImluZGV4IiwiaG92ZXJUaW1lciIsIm5laWdoYm9yaW5nIiwiYiIsImZvY3VzbmVpZ2hib3JzIiwiY2xhc3NlZCIsIm4iLCJvIiwiZm9jdXMiLCJ1bmZvY3VzIiwiZml4ZWQiLCJyZXN1bWUiLCJob3ZlciIsInNldFRpbWVvdXQiLCJ1bmhvdmVyIiwiY2xlYXJUaW1lb3V0IiwiZm9jdXNMb2NhdGlvbiIsInVuZm9jdXNMb2NhdGlvbiIsImhpZ2hsaWdodExvY2F0aW9uIiwic2hvd0xpY2Vuc2UiLCJzdG9wUHJvcGFnYXRpb24iLCJiYWNrZ3JvdW5kY2xpY2siLCJkYmxjbGljayIsInB4IiwicHkiLCJzaXplQnkiLCJ0cmFuc2l0aW9uIiwiZHVyYXRpb24iLCJ2YWwiLCJ2aXNpYmxlIiwiaGlkZGVuIiwiUlRQIiwicmVzdGljdCIsInJlcXVpcmUiLCJlbGVtZW50IiwiYXR0cnMiLCJuZ01vZGVsIiwidG9Mb3dlckNhc2UiLCIkcGFyc2VycyIsInBhcnNlRmxvYXQiLCJvdmVydmlld0N0cmwiLCJjYXRlZ29yaXplZEVudGl0aWVzIiwiaXNPYmplY3QiLCJBcnJheSIsImlzQXJyYXkiLCJkZWZPYmoiLCJkZWZhdWx0VmFsdWUiLCJsb29wQW5kSW5pdCIsIm1vZGVsQXJyYXkiLCJpbml0TW9kZWxGdW5jdGlvbiIsIm5ld0FycmF5IiwiQ29uZmlnIiwiJGh0dHBQcm92aWRlciIsImRlZmF1bHRzIiwiaGVhZGVycyIsImNvbW1vbiIsIiRxIiwibG9nQXBpRXJyb3IiLCJlcnIiLCJyZWplY3QiLCJ1bndyYXBBbmd1bGFySHR0cCIsImFwaVVybCIsImRlZmF1bHRIZWFkZXIiLCJwb3N0IiwiTG9jYXRpb24iLCJidWlsZEZvcm1hdHRlZEFkZHJlc3MiLCJjb3VudHJ5Q29kZSIsInRyaW0iLCJmdW5Db25uU2VydmljZSIsImNvbm5TZXJ2aWNlIiwiZmluYW5jZVNlcnZpY2UiLCJFbnRpdHkiLCJkYk1vZGVsIiwicG9wIiwiZ3JhbnRzX3JlY2VpdmVkIiwiZ3JhbnRzX2dpdmVuIiwiaW52ZXN0bWVudHNfcmVjZWl2ZWQiLCJpbnZlc3RtZW50c19tYWRlIiwiZGF0YV9naXZlbiIsImRhdGFfcmVjZWl2ZWQiLCJlbXBsb3ltZW50cyIsInJldmVudWVzIiwiZXhwZW5zZXMiLCJkZXNjcmlwdGlvbiIsImluZmx1ZW5jZSIsInR3aXR0ZXJfaGFuZGxlIiwiY29udHJvbEN0cmwiLCIkcm9vdFNjb3BlIiwiJG1vZGFsIiwidm0iLCJjaGFuZ2VWaWV3Iiwic2l6ZUJ5TGlzdCIsInNob3dWaWV3IiwiTmV0d29yayIsIk1hcCIsInZpZXciLCJzaG93QWJvdXQiLCJvcGVuIiwiYW5pbWF0aW9uIiwidG9nZ2xlTm9kZSIsInRvZ2dsZUxpbmsiLCJjaGFuZ2VTaXplQnkiLCJjb250cm9sRGVwcyIsImFuYWx5dGljc0N0cmwiLCJMIiwibWFwQ3RybCIsImxlYWZsZXREYXRhIiwib3B0aW9ucyIsImNlbnRlciIsImxhdCIsImxuZyIsInpvb20iLCJ0aWxlTGF5ZXIiLCJ0aWxlTGF5ZXJPcHRpb25zIiwiZGV0ZWN0UmV0aW5hIiwicmV1c2VUaWxlcyIsInpvb21Db250cm9sIiwiYXR0cmlidXRpb25Db250cm9sIiwiY3JlYXRlUGllQ2hhcnQiLCJwaWUiLCJzb3J0IiwiYXJjIiwib3V0ZXJSYWRpdXMiLCJpbm5lclJhZGl1cyIsInN0cm9rZVdpZHRoIiwidyIsImgiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnROUyIsIm5zIiwicHJlZml4IiwidmlzIiwiYXJjcyIsImNvdW50IiwidG9TdHJpbmciLCJYTUxTZXJpYWxpemVyIiwic2VyaWFsaXplVG9TdHJpbmciLCJ4bWwiLCJnZXRNYXAiLCJjbHVzdGVySWNvbiIsImNsdXN0ZXIiLCJjaGlsZHJlbiIsImdldEFsbENoaWxkTWFya2VycyIsInRvdGFsIiwiY2x1c3Rlck1hcmtlcnMiLCJjb3VudHMiLCJjb3VudEJ5IiwiaWNvbkRpbSIsImh0bWwiLCJEaXZJY29uIiwiY2xhc3NOYW1lIiwiaWNvblNpemUiLCJvdXRlckxvb3AiLCJpbm5lckxvb3AiLCJtIiwibWFya2VyIiwiaWNvbiIsIm1hcmtlckljb24iLCJ0aXRsZSIsIm1lc3NhZ2UiLCJtYXJrZXJzIiwiYWRkTGF5ZXIiLCJvbkxvY2F0aW9uRXJyb3IiLCJsZWFmbGV0RXJyb3IiLCJpbnZhbGlkYXRlU2l6ZSIsIkNvbnRyb2wiLCJab29tIiwicG9zaXRpb24iLCJhZGRUbyIsImNvbnRyb2wiLCJsb2NhdGUiLCJzaG93UG9wdXAiLCJpY29uVXJsIiwibWFya2VyQ2x1c3Rlckdyb3VwIiwic3BpZGVyZnlPbk1heFpvb20iLCJzaG93Q292ZXJhZ2VPbkhvdmVyIiwiaWNvbkNyZWF0ZUZ1bmN0aW9uIiwibWF4Q2x1c3RlclJhZGl1cyIsInNwaWRlcmZ5RGlzdGFuY2VNdWx0aXBsaWVyIiwibGF5ZXIiLCJzZXRWaWV3IiwiZGV0YWlsc0N0cmwiLCJpdGVtc1Nob3duRGVmYXVsdCIsInJlbGF0aW9ucyIsIml0ZW1zU2hvd24iLCJjbG9uZSIsInNob3dNb3JlIiwic2hvd0xlc3MiXSwibWFwcGluZ3MiOiJDQUFBLFNBQVVBLEdBRU4sWUFFQSxJQUFJQyxJQUNBLGVBQ0Esb0JBQ0EsWUFDQSxnQkFDQSxrQkFDQSxvQkFHQUMsR0FBcUIsbUJBRXpCRixHQUFRRyxPQUFPLHVCQUNmSCxFQUFRRyxPQUFPLGtCQUFtQkQsR0FDbENGLEVBQVFH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R0FHaEJ2VyxFQUFPNmMsV0FBYXRjLEVBQUV1YyxNQUFNOWMsRUFBTzJjLG1CQUVuQzNjLEVBQU9rTCxJQUFJLGVBQWdCLFdBRXZCbEwsRUFBTzZjLFdBQWF0YyxFQUFFdWMsTUFBTTljLEVBQU8yYyxxQkFFdkMzYyxFQUFPK2MsU0FBVyxTQUFVeFMsR0FDeEJ2SyxFQUFPNmMsV0FBV3RTLEdBQVF2SyxFQUFPOEksY0FBY3lCLEdBQU1qSSxRQUV6RHRDLEVBQU9nZCxTQUFXLFNBQVV6UyxHQUN4QnZLLEVBQU82YyxXQUFXdFMsR0FBUXZLLEVBQU8yYyxrQkFBa0JwUyxJQUkzRHhPLEVBQVFHLE9BQU8sZUFDVnVDLFdBQVcsZUFBZ0IsU0FBVSxJQUFLaWUsS0FDaEQzZ0IiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbihhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgbWFpbkRlcGVuZGVuY3lMaXN0ID0gW1xuICAgICAgICBcInVpLmJvb3RzdHJhcFwiLFxuICAgICAgICBcImxlYWZsZXQtZGlyZWN0aXZlXCIsXG4gICAgICAgIFwibmdBbmltYXRlXCIsXG4gICAgICAgIFwidGVtcGxhdGVDYWNoZVwiLFxuICAgICAgICBcImNpdmljLWdyYXBoLmFwaVwiLFxuICAgICAgICBcImNpdmljLWdyYXBoLnV0aWxcIlxuICAgIF07XG5cbiAgICB2YXIgYXBpRGVwZW5kZW5jeUxpc3QgPSBbXCJjaXZpYy1ncmFwaC51dGlsXCJdO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJjaXZpYy1ncmFwaC51dGlsXCIsIFtdKTtcbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiLCBhcGlEZXBlbmRlbmN5TGlzdCk7XG4gICAgYW5ndWxhci5tb2R1bGUoXCJjaXZpYy1ncmFwaFwiLCBtYWluRGVwZW5kZW5jeUxpc3QpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yOC8xNi5cbiAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgZnVuY3Rpb24gU2VydmljZShhcGlDYWxsZXIsIHV0aWxzKSB7XG5cbiAgICAgICAgZnVuY3Rpb24gQ2F0ZWdvcnkob2JqKSB7XG4gICAgICAgICAgICB2YXIgZ2V0UHJvcGVydHkgPSB1dGlscy5nZXRQcm9wZXJ0eUZyb21PYmoob2JqKTtcblxuICAgICAgICAgICAgdGhpcy5pZCA9IGdldFByb3BlcnR5KFwiaWRcIik7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBnZXRQcm9wZXJ0eShcIm5hbWVcIik7XG4gICAgICAgICAgICB0aGlzLmVuYWJsZWQgPSBnZXRQcm9wZXJ0eShcImVuYWJsZVwiLCB0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldENhdGVnb3J5TW9kZWwob2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IENhdGVnb3J5KG9iaik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRBbGwoKSB7XG4gICAgICAgICAgICByZXR1cm4gYXBpQ2FsbGVyLmdldChcIi9jYXRlZ29yaWVzXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiZ2V0Q2F0ZWdvcnlNb2RlbFwiOiBnZXRDYXRlZ29yeU1vZGVsLFxuICAgICAgICAgICAgXCJnZXRBbGxcIjogZ2V0QWxsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgU2VydmljZS4kaW5qZWN0ID0gW1wiY2dBcGlDYWxsZXJcIiwgXCJjZ1V0aWxTZXJ2aWNlXCJdO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKFwiY2l2aWMtZ3JhcGguYXBpXCIpXG4gICAgICAgIC5mYWN0b3J5KFwiY2F0ZWdvcnlTZXJ2aWNlXCIsIFNlcnZpY2UpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNy8xNi5cbiAqL1xuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciB1cmwgPSBcIi9jb25uZWN0aW9uc1wiO1xuXG4gICAgZnVuY3Rpb24gZ2V0Q29ubmVjdGlvblR5cGVzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJGdW5kaW5nXCI6IHRydWUsXG4gICAgICAgICAgICBcIkRhdGFcIjogdHJ1ZSxcbiAgICAgICAgICAgIFwiRW1wbG95bWVudFwiOiB0cnVlLFxuICAgICAgICAgICAgXCJDb2xsYWJvcmF0aW9uXCI6IHRydWVcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBTZXJ2aWNlKGFwaUNhbGxlciwgdXRpbHMpIHtcblxuICAgICAgICBmdW5jdGlvbiBDb25uZWN0aW9uKG9iaikge1xuICAgICAgICAgICAgdmFyIGdldFByb3BlcnR5ID0gdXRpbHMuZ2V0UHJvcGVydHlGcm9tT2JqKG9iaik7XG5cbiAgICAgICAgICAgIHRoaXMuaWQgPSBnZXRQcm9wZXJ0eShcImlkXCIpO1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gZ2V0UHJvcGVydHkoXCJuYW1lXCIpO1xuICAgICAgICAgICAgdGhpcy5kZXRhaWxzID0gZ2V0UHJvcGVydHkoXCJkZXRhaWxzXCIpO1xuICAgICAgICAgICAgdGhpcy5lbnRpdHkgPSBnZXRQcm9wZXJ0eShcImVudGl0eVwiKTtcbiAgICAgICAgICAgIHRoaXMuZW50aXR5X2lkID0gZ2V0UHJvcGVydHkoXCJlbnRpdHlfaWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRDb25uZWN0aW9uTW9kZWwob2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IENvbm5lY3Rpb24ob2JqKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEFsbCgpIHtcbiAgICAgICAgICAgIHJldHVybiBhcGlDYWxsZXIuZ2V0KHVybCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJnZXRBbGxcIjogZ2V0QWxsLFxuICAgICAgICAgICAgXCJnZXRDb25uZWN0aW9uVHlwZXNcIjogZ2V0Q29ubmVjdGlvblR5cGVzLFxuICAgICAgICAgICAgXCJnZXRDb25uZWN0aW9uTW9kZWxcIjogZ2V0Q29ubmVjdGlvbk1vZGVsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgU2VydmljZS4kaW5qZWN0ID0gW1wiY2dBcGlDYWxsZXJcIiwgXCJjZ1V0aWxTZXJ2aWNlXCJdO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKFwiY2l2aWMtZ3JhcGguYXBpXCIpXG4gICAgICAgIC5mYWN0b3J5KFwiY29ubmVjdGlvblNlcnZpY2VcIiwgU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxuICovXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgZnVuY3Rpb24gU2VydmljZSh1dGlscykge1xuICAgICAgICBmdW5jdGlvbiBGaW5hbmNlKG9iaikge1xuICAgICAgICAgICAgdmFyIGdldFByb3BlcnR5ID0gdXRpbHMuZ2V0UHJvcGVydHlGcm9tT2JqKG9iaik7XG5cbiAgICAgICAgICAgIHRoaXMuaWQgPSBnZXRQcm9wZXJ0eShcImlkXCIpO1xuICAgICAgICAgICAgdGhpcy55ZWFyID0gZ2V0UHJvcGVydHkoXCJ5ZWFyXCIpO1xuICAgICAgICAgICAgdGhpcy5hbW91bnQgPSBnZXRQcm9wZXJ0eShcImFtb3VudFwiLCAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEZpbmFuY2VNb2RlbChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmluYW5jZShvYmopO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiZ2V0RmluYW5jZU1vZGVsXCI6IGdldEZpbmFuY2VNb2RlbFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIFNlcnZpY2UuJGluamVjdCA9IFtcImNnVXRpbFNlcnZpY2VcIl07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIilcbiAgICAgICAgLmZhY3RvcnkoXCJmaW5hbmNlU2VydmljZVwiLCBTZXJ2aWNlKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjcvMTYuXG4gKi9cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBTZXJ2aWNlKHV0aWxzKSB7XG5cbiAgICAgICAgZnVuY3Rpb24gRnVuZGluZ0Nvbm5lY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICB2YXIgZ2V0UHJvcGVydHkgPSB1dGlscy5nZXRQcm9wZXJ0eUZyb21PYmoob2JqKTtcblxuICAgICAgICAgICAgdGhpcy5pZCA9IGdldFByb3BlcnR5KFwiaWRcIik7XG4gICAgICAgICAgICB0aGlzLnllYXIgPSBnZXRQcm9wZXJ0eShcInllYXJcIik7XG4gICAgICAgICAgICB0aGlzLmFtb3VudCA9IGdldFByb3BlcnR5KFwiYW1vdW50XCIpO1xuICAgICAgICAgICAgdGhpcy5lbnRpdHkgPSBnZXRQcm9wZXJ0eShcImVudGl0eVwiLCBcIlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwob2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZ1bmRpbmdDb25uZWN0aW9uKG9iaik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJnZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsXCI6IGdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBTZXJ2aWNlLiRpbmplY3QgPSBbXCJjZ1V0aWxTZXJ2aWNlXCJdO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKFwiY2l2aWMtZ3JhcGguYXBpXCIpXG4gICAgICAgIC5mYWN0b3J5KFwiZnVuZGluZ0Nvbm5lY3Rpb25TZXJ2aWNlXCIsIFNlcnZpY2UpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNy8xMC8xNi5cbiAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBjb250cm9sRGVwZW5kZW5jaWVzID0gW2NvbnRyb2xEaXJlY3RpdmVdO1xuXG4gICAgZnVuY3Rpb24gY29udHJvbERpcmVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnanMvY29udHJvbC9jb250cm9scy5odG1sJyxcbiAgICAgICAgICAgIHJlc3RyaWN0ICAgOiAnRScsXG4gICAgICAgICAgICBzY29wZSAgICAgIDoge1xuICAgICAgICAgICAgICAgIHRvZ2dsZU5ldHdvcmsgOiAnPScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29udHJvbGxlciAgIDogJ2NvbnRyb2xDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBcyA6ICdjb250cm9sJyxcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXIgOiB7XG4gICAgICAgICAgICAgICAgbWluQ29ubmVjdGlvbnMgOiBcIj1cIlxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2NvbnRyb2wnLCBjb250cm9sRGVwZW5kZW5jaWVzKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMS8xNi5cbiAqL1xuXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGFuYWx5dGljc0RlcGVuZGVuY2llcyA9IFthbmFseXRpY3NEaXJlY3RpdmVdO1xuXG4gICAgZnVuY3Rpb24gYW5hbHl0aWNzRGlyZWN0aXZlKCl7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2pzL2FuYWx5dGljL2FuYWx5dGljcy5odG1sJyxcbiAgICAgICAgICAgIHJlc3RyaWN0ICAgOiAnRScsXG4gICAgICAgICAgICBzY29wZSAgICAgIDoge30sXG4gICAgICAgICAgICBjb250cm9sbGVyICAgOiAnYW5hbHl0aWNzQ3RybCdcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuZGlyZWN0aXZlKCdhbmFseXRpY3MnLCBhbmFseXRpY3NEZXBlbmRlbmNpZXMpO1xuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhciwgJCkge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gbGlua0Z1bmN0aW9uKHNjb3BlKSB7XG5cbiAgICAgICAgZnVuY3Rpb24gc2Nyb2xsKCkge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSAkKHRoaXMpO1xuICAgICAgICAgICAgc2VsZi5jc3MoJ2hlaWdodCcsICc1NXZoJyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjbGljaygpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gJCh0aGlzKTtcbiAgICAgICAgICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgLyAzID4gcGFyc2VJbnQoc2VsZi5jc3MoJ2hlaWdodCcpKSkge1xuICAgICAgICAgICAgICAgIHNlbGYuY3NzKCdoZWlnaHQnLCAnNTV2aCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxmLmNzcygnaGVpZ2h0JywgJzMwdmgnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkZXRhaWxzUGFuZWw7XG4gICAgICAgIGlmIChzY29wZS5tb2JpbGUpIHtcbiAgICAgICAgICAgIGRldGFpbHNQYW5lbCA9ICQoXCIjZGV0YWlscy1wYW5lbFwiKTtcbiAgICAgICAgICAgIGRldGFpbHNQYW5lbC5jc3MoXCJoZWlnaHRcIiwgXCIzMHZoXCIpO1xuICAgICAgICAgICAgZGV0YWlsc1BhbmVsLnNjcm9sbFRvcCgwKTtcbiAgICAgICAgICAgIGRldGFpbHNQYW5lbC5zY3JvbGwoc2Nyb2xsKTtcbiAgICAgICAgICAgIGRldGFpbHNQYW5lbC5jbGljayhjbGljayk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRNb2JpbGVFdmVudHMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICAgICAgbGluazogbGlua0Z1bmN0aW9uXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnYWRkTW9iaWxlRXZlbnRzJywgW2FkZE1vYmlsZUV2ZW50c10pO1xufSkoYW5ndWxhciwgJCk7XG4iLCIoZnVuY3Rpb24oYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gbW9kYWxDdHJsKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UpIHtcbiAgICAgICAgJHNjb3BlLmNsb3NlV2luZG93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJG1vZGFsSW5zdGFuY2UuY2xvc2UoKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29udHJvbGxlcignbW9kYWxDdHJsJywgWyckc2NvcGUnLCAnJG1vZGFsSW5zdGFuY2UnLCBtb2RhbEN0cmxdKTtcblxufSkoYW5ndWxhcik7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIENvbnRyb2xsZXIoJHNjb3BlLCAkaHR0cCwgJHRpbWVvdXQsIF8sIGVudGl0eVNlcnZpY2UsIGNhdGVnb3J5U2VydmljZSwgbG9jYXRpb25TZXJ2aWNlLCB1dGlscykge1xuICAgICAgICAkc2NvcGUuaXNFZGl0aW5nID0gZmFsc2U7XG4gICAgICAgICRzY29wZS5lZGl0RW50aXR5ID0gZW50aXR5U2VydmljZS5nZXRFbnRpdHlNb2RlbCgkc2NvcGUuZW50aXR5KTtcbiAgICAgICAgJHNjb3BlLmVudGl0eVR5cGVzID0gZW50aXR5U2VydmljZS5nZXRFbnRpdHlUeXBlcygpO1xuICAgICAgICAkc2NvcGUuaW5mbHVlbmNlVHlwZXMgPSBlbnRpdHlTZXJ2aWNlLmdldEluZmx1ZW5jZVR5cGVzKCk7XG5cbiAgICAgICAgdmFyIGNhdGVnb3J5QmFja3VwO1xuXG4gICAgICAgICRzY29wZS5jYXRlZ29yaWVzID0gW107XG5cbiAgICAgICAgJHNjb3BlLmFkZHJlc3NTZWFyY2ggPSBmdW5jdGlvbiAoc2VhcmNoKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuanNvbnAoJ2h0dHBzOi8vZGV2LnZpcnR1YWxlYXJ0aC5uZXQvUkVTVC92MS9Mb2NhdGlvbnMnLCB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBzZWFyY2gsXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ0FpNTg1ODF5Qy1TcjdtY0ZiWVR0VWtTM2l4RTdmNlp1Sm5iRkpDVkk0aEF0VzFYb0RFZVp5aWRRejJnTENDeUQnLFxuICAgICAgICAgICAgICAgICAgICAnanNvbnAnOiAnSlNPTl9DQUxMQkFDSycsXG4gICAgICAgICAgICAgICAgICAgICdpbmNsdWRlJzogJ2Npc28yJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1dGlscy5pc0RlZmluZWQocmVzcG9uc2UuZGF0YS5yZXNvdXJjZVNldHMpICYmIHJlc3BvbnNlLmRhdGEucmVzb3VyY2VTZXRzLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS5yZXNvdXJjZVNldHNbMF0ucmVzb3VyY2VzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnRvZ2dsZUNhdGVnb3J5ID0gZnVuY3Rpb24gKGNhdGVnb3J5KSB7XG4gICAgICAgICAgICBpZiAoJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzLnB1c2goY2F0ZWdvcnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBjYXRlZ29yeUluZGV4IGluICRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzLmhhc093blByb3BlcnR5KGNhdGVnb3J5SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgZW50aXR5Q2F0ZWdvcnkgPSAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzW2NhdGVnb3J5SW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW50aXR5Q2F0ZWdvcnkuaWQgPT09IGNhdGVnb3J5LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHlDYXRlZ29yeS5lbmFibGVkID0gY2F0ZWdvcnkuZW5hYmxlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcy5wdXNoKGNhdGVnb3J5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNldExvY2F0aW9uID0gZnVuY3Rpb24gKGxvY2F0aW9uLCBpc0xhc3QpIHtcbiAgICAgICAgICAgICRzY29wZS5hZGRyZXNzU2VhcmNoKGxvY2F0aW9uLmZvcm1hdHRlZEFkZHJlc3MpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGFwaUNhbGxSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoIXV0aWxzLmlzRGVmaW5lZChhcGlDYWxsUmVzdWx0WzBdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBhcGlDYWxsUmVzdWx0WzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyA9IHJlc3VsdC5hZGRyZXNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnQgPSByZXN1bHQucG9pbnQ7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRMb2NhdGlvbihpc0xhc3QpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFBhcnNlcyBBUEkgY2FsbCByZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uYWRkcmVzc19saW5lID0gdXRpbHMuaXNEZWZpbmVkKGFkZHJlc3MuYWRkcmVzc0xpbmUpID8gYWRkcmVzcy5hZGRyZXNzTGluZSA6ICcnO1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5sb2NhbGl0eSA9IHV0aWxzLmlzRGVmaW5lZChhZGRyZXNzLmxvY2FsaXR5KSA/IGFkZHJlc3MubG9jYWxpdHkgOiAnJztcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uZGlzdHJpY3QgPVxuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMuaXNEZWZpbmVkKGFkZHJlc3MuYWRtaW5EaXN0cmljdCkgPyBhZGRyZXNzLmFkbWluRGlzdHJpY3QgOiAnJztcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uY291bnRyeSA9XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5pc0RlZmluZWQoYWRkcmVzcy5jb3VudHJ5UmVnaW9uKSA/IGFkZHJlc3MuY291bnRyeVJlZ2lvbiA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmNvdW50cnlfY29kZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5pc0RlZmluZWQoYWRkcmVzcy5jb3VudHJ5UmVnaW9uSXNvMikgPyBhZGRyZXNzLmNvdW50cnlSZWdpb25Jc28yIDogJyc7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmNvb3JkaW5hdGVzID0gdXRpbHMuaXNEZWZpbmVkKHBvaW50LmNvb3JkaW5hdGVzKSA/IHBvaW50LmNvb3JkaW5hdGVzIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucG9zdGFsX2NvZGUgPSB1dGlscy5pc0RlZmluZWQoYWRkcmVzcy5wb3N0YWxDb2RlKSA/IGFkZHJlc3MucG9zdGFsQ29kZSA6IG51bGw7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmFkZExvY2F0aW9uID0gZnVuY3Rpb24gKGlzTGFzdCkge1xuICAgICAgICAgICAgaWYgKGlzTGFzdCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5lZGl0RW50aXR5LmxvY2F0aW9ucy5wdXNoKGxvY2F0aW9uU2VydmljZS5nZXRMb2NhdGlvbk1vZGVsKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5hZGRLZXlQZXJzb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBBZGQgYmxhbmsgZmllbGQgdG8gZWRpdCBpZiB0aGVyZSBhcmUgbm9uZS5cbiAgICAgICAgICAgIC8vIFdBVENIIE9VVCEgVE9ETzogSWYgc29tZW9uZSBkZWxldGVzIGFuIG9sZCBwZXJzb24sIGRlbGV0ZSB0aGVpciBpZCB0b28uXG4gICAgICAgICAgICAvLyBpLmUuIG1ha2Ugc3VyZSBvbGQvY2xlYXJlZCBmb3JtIGZpZWxkcyBhcmVuJ3QgYmVpbmcgZWRpdGVkIGludG8gbmV3IHBlb3BsZS5cbiAgICAgICAgICAgIGlmICghKF8uc29tZSgkc2NvcGUuZWRpdEVudGl0eS5rZXlfcGVvcGxlLCB7J25hbWUnOiAnJywgJ2lkJzogbnVsbH0pKSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5lZGl0RW50aXR5LmtleV9wZW9wbGUucHVzaCh7J25hbWUnOiAnJywgJ2lkJzogbnVsbH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZXRGdW5kaW5nQ29ubmVjdGlvbiA9IGZ1bmN0aW9uIChlbnRpdHksIGZ1bmRpbmcpIHtcbiAgICAgICAgICAgIC8vIEFkZCBvdGhlciBlbnRpdHkncyBpZCB0byB0aGlzIGZpbmFuY2UgY29ubmVjdGlvbi5cbiAgICAgICAgICAgIGZ1bmRpbmcuZW50aXR5X2lkID0gZW50aXR5LmlkO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5hZGRGdW5kaW5nQ29ubmVjdGlvbiA9IGZ1bmN0aW9uIChmdW5kaW5nKSB7XG4gICAgICAgICAgICBpZiAoIV8uc29tZShmdW5kaW5nLCB7J2VudGl0eSc6ICcnfSkpIHtcbiAgICAgICAgICAgICAgICAvLyBNYXliZSBzZXQgYW1vdW50IHRvIDAgaW5zdGVhZCBvZiBudWxsP1xuICAgICAgICAgICAgICAgIGZ1bmRpbmcucHVzaCh7J2VudGl0eSc6ICcnLCAnYW1vdW50JzogbnVsbCwgJ3llYXInOiBudWxsLCAnaWQnOiBudWxsfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNldENvbm5lY3Rpb24gPSBmdW5jdGlvbiAoZW50aXR5LCBjb25uZWN0aW9uKSB7XG4gICAgICAgICAgICBjb25uZWN0aW9uLmVudGl0eV9pZCA9IGVudGl0eS5pZDtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuYWRkQ29ubmVjdGlvbiA9IGZ1bmN0aW9uIChjb25uZWN0aW9ucykge1xuICAgICAgICAgICAgLy8gQWRkIGFuIGVtcHR5IGNvbm5lY3Rpb24gdG8gZWRpdCBpZiBub25lIGV4aXN0LlxuICAgICAgICAgICAgaWYgKCFfLnNvbWUoY29ubmVjdGlvbnMsIHsnZW50aXR5JzogJycsICdpZCc6IG51bGx9KSkge1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25zLnB1c2goeydlbnRpdHknOiAnJywgJ2lkJzogbnVsbCwgJ2RldGFpbHMnOiBudWxsfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmFkZEZpbmFuY2UgPSBmdW5jdGlvbiAocmVjb3Jkcykge1xuICAgICAgICAgICAgLy8gQWRkIG5ldyBmaW5hbmNlIGZpZWxkIGlmIGFsbCBjdXJyZW50IGZpZWxkcyBhcmUgdmFsaWQuXG4gICAgICAgICAgICBpZiAoXy5ldmVyeShyZWNvcmRzLCBmdW5jdGlvbiAocikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gci5hbW91bnQgPiAwICYmIHIueWVhciA+IDE3NTA7XG4gICAgICAgICAgICAgICAgfSkpIHtcbiAgICAgICAgICAgICAgICByZWNvcmRzLnB1c2goeydhbW91bnQnOiBudWxsLCAneWVhcic6IG51bGwsICdpZCc6IG51bGx9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5pc1NhdmluZyA9IHRydWU7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXNTYXZpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuJGVtaXQoXCJlZGl0RW50aXR5U3VjY2Vzc1wiLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgLy8gQ2FsbCB0byBob21lQ3RybCdzIHBhcmVudCBzdG9wRWRpdCgpIHRvIGNoYW5nZSB2aWV3IGJhY2sgYW5kIGFueSBvdGhlclxuICAgICAgICAgICAgICAgIC8vIGhpZ2gtbGV2ZWwgY2hhbmdlcy5cbiAgICAgICAgICAgICAgICAkc2NvcGUuY2FuY2VsRWRpdCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBlcnJvcigpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXNFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXNFcnJvciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbnRpdHlTZXJ2aWNlXG4gICAgICAgICAgICAgICAgLnNhdmVFbnRpdHkoJHNjb3BlLmVkaXRFbnRpdHkuZ2VuZXJhdGVEQk1vZGVsKCkpXG4gICAgICAgICAgICAgICAgLnRoZW4oc3VjY2VzcywgZXJyb3IpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5jYW5jZWxFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS4kd2F0Y2goJ2VudGl0eScsIGZ1bmN0aW9uIChuZXdWYWwsIG9sZFZhbCkge1xuICAgICAgICAgICAgaWYgKGFuZ3VsYXIuZXF1YWxzKG5ld1ZhbCwgb2xkVmFsKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmVkaXRFbnRpdHkgPSBlbnRpdHlTZXJ2aWNlLmdldEVudGl0eU1vZGVsKG5ld1ZhbCk7XG4gICAgICAgICAgICAkc2NvcGUuY2F0ZWdvcmllcyA9IGFuZ3VsYXIuY29weShjYXRlZ29yeUJhY2t1cCk7XG5cbiAgICAgICAgICAgIGluaXRDYXRlZ29yeUFycmF5KCk7XG5cbiAgICAgICAgICAgICRzY29wZS5pc0VkaXRpbmcgPSB1dGlscy5pc0RlZmluZWQoJHNjb3BlLmVkaXRFbnRpdHkuaWQpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW5pdGlhbGl6ZXMgY2F0ZWdvcnkgZmllbGRzIHdpdGggZW50aXR5IHZhbHVlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogTG9vcHMgdGhyb3VnaCBjYXRlZ29yeSBpbiBjYXRlZ29yaWVzIGFuZCBsb29wcyB0aHJvdWdoIGNhdGVnb3J5IGluIGVudGl0eS4gSWRlbnRpZmllc1xuICAgICAgICAgKiBjYXRlZ29yaWVzIGVuYWJsZWQgaW4gdGhlIGVudGl0eSBhbmQgc2V0cyBsb2NhbCBkaXNwbGF5IGRhdGEuIFRoaXMgaXMgYmVjYXVzZSB3ZSBjcmVhdGVkXG4gICAgICAgICAqIGEgYmFja3VwIG9mIGVudGl0eSBkYXRhIHNvIHRoYXQgdGhlIGFwaSBkYXRhIGlzIG5vdCB0YW1wZXJlZCB3aXRoIGRpcmVjdGx5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUT0RPOiByZXBsYWNlIHdpdGggYmV0dGVyIGRhdGEgc3RydWN0dXJlIGZvciBjYXRlZ29yaWVzLlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gaW5pdENhdGVnb3J5QXJyYXkoKSB7XG4gICAgICAgICAgICB2YXIgY2F0ZWdvcnksXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnlJbmRleCxcbiAgICAgICAgICAgICAgICBlbnRpdHlDYXRlZ29yeUluZGV4LFxuICAgICAgICAgICAgICAgIGVudGl0eUNhdGVnb3J5O1xuXG4gICAgICAgICAgICBmb3IgKGNhdGVnb3J5SW5kZXggaW4gJHNjb3BlLmNhdGVnb3JpZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5jYXRlZ29yaWVzLmhhc093blByb3BlcnR5KGNhdGVnb3J5SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRlZ29yeSA9ICRzY29wZS5jYXRlZ29yaWVzW2NhdGVnb3J5SW5kZXhdO1xuICAgICAgICAgICAgICAgIGZvciAoZW50aXR5Q2F0ZWdvcnlJbmRleCBpbiAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcy5oYXNPd25Qcm9wZXJ0eShlbnRpdHlDYXRlZ29yeUluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZW50aXR5Q2F0ZWdvcnkgPSAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzW2VudGl0eUNhdGVnb3J5SW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2F0ZWdvcnkuaWQgPT09IGVudGl0eUNhdGVnb3J5LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeS5lbmFibGVkID0gZW50aXR5Q2F0ZWdvcnkuZW5hYmxlZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJldHJpZXZlIENhdGVnb3JpZXMgZnJvbSBEQlxuICAgICAgICBjYXRlZ29yeVNlcnZpY2VcbiAgICAgICAgICAgIC5nZXRBbGwoKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUJhY2t1cCA9IGRhdGEuY2F0ZWdvcmllcztcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGVzIGJhY2t1cCBvZiBkYXRhIHVzaW5nIEFuZ3VsYXIgdG8gcHJldmVudCBhcGkgZGF0YSBmcm9tIGJlaW5nIHRhbXBlcmVkXG4gICAgICAgICAgICAgICAgLy8gZGlyZWN0bHlcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2F0ZWdvcmllcyA9IGFuZ3VsYXIuY29weShjYXRlZ29yeUJhY2t1cCk7XG4gICAgICAgICAgICAgICAgLy8gJHNjb3BlLmNhdGVnb3JpZXMgPSBkYXRhLmNhdGVnb3JpZXM7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBDb250cm9sbGVyLiRpbmplY3QgPSBbXG4gICAgICAgIFwiJHNjb3BlXCIsXG4gICAgICAgIFwiJGh0dHBcIixcbiAgICAgICAgXCIkdGltZW91dFwiLFxuICAgICAgICBcIl9cIixcbiAgICAgICAgXCJlbnRpdHlTZXJ2aWNlXCIsXG4gICAgICAgIFwiY2F0ZWdvcnlTZXJ2aWNlXCIsXG4gICAgICAgIFwibG9jYXRpb25TZXJ2aWNlXCIsXG4gICAgICAgIFwiY2dVdGlsU2VydmljZVwiXG4gICAgXTtcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoXCIpXG4gICAgICAgIC5jb250cm9sbGVyKFwiZWRpdEN0cmxcIiwgQ29udHJvbGxlcik7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNy8xNi5cbiAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBlZGl0RW50aXR5RGVwZW5kZW5jaWVzID0gW2VkaXRFbnRpdHlEaXJlY3RpdmVdO1xuXG4gICAgZnVuY3Rpb24gZWRpdEVudGl0eURpcmVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnanMvZWRpdC1lbnRpdHkvZWRpdC5odG1sJyxcbiAgICAgICAgICAgIHJlc3RyaWN0ICAgOiAnRScsXG4gICAgICAgICAgICBzY29wZSAgICAgIDoge1xuICAgICAgICAgICAgICAgICdlbnRpdHknICA6IFwiPVwiLFxuICAgICAgICAgICAgICAgICdlbnRpdGllcyc6IFwiPVwiLFxuICAgICAgICAgICAgICAgICdpc09wZW4nICA6IFwiPVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29udHJvbGxlciA6ICdlZGl0Q3RybCdcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuZGlyZWN0aXZlKCdlZGl0RW50aXR5JywgZWRpdEVudGl0eURlcGVuZGVuY2llcyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29uc3RhbnQoJ18nLCB3aW5kb3cuXylcbiAgICAgICAgLmNvbmZpZyhbJyRsb2NhdGlvblByb3ZpZGVyJywgJyRjb21waWxlUHJvdmlkZXInLFxuICAgICAgICAgICAgZnVuY3Rpb24gKCRsb2NhdGlvblByb3ZpZGVyLCAkY29tcGlsZVByb3ZpZGVyKSB7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuICAgICAgICAgICAgICAgICRjb21waWxlUHJvdmlkZXIuZGVidWdJbmZvRW5hYmxlZCh0cnVlKTtcbiAgICAgICAgICAgIH1dKVxuICAgICAgICAuZmlsdGVyKCd0aG91c2FuZFN1ZmZpeCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoaW5wdXQsIGRlY2ltYWxzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGV4cCxcbiAgICAgICAgICAgICAgICAgICAgc3VmZml4ZXMgPSBbJ2snLCAnTScsICdHJywgJ1QnLCAnUCcsICdFJ107XG5cbiAgICAgICAgICAgICAgICBpZiAod2luZG93LmlzTmFOKGlucHV0KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQgPCAxMDAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBleHAgPSBNYXRoLmZsb29yKE1hdGgubG9nKGlucHV0KSAvIE1hdGgubG9nKDEwMDApKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiAoaW5wdXQgLyBNYXRoLnBvdygxMDAwLCBleHApKS50b0ZpeGVkKGRlY2ltYWxzKSArIHN1ZmZpeGVzW2V4cCAtIDFdO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgaG9tZURlcGVuZGVuY2llcyA9IFtcbiAgICAgICAgJyRzY29wZScsXG4gICAgICAgICckdGltZW91dCcsXG4gICAgICAgICdfJyxcbiAgICAgICAgJ2VudGl0eVNlcnZpY2UnLFxuICAgICAgICAnY29ubmVjdGlvblNlcnZpY2UnLFxuICAgICAgICBob21lQ3RybFxuICAgIF07XG5cbiAgICBmdW5jdGlvbiBob21lQ3RybCgkc2NvcGUsICR0aW1lb3V0LCBfLCBlbnRpdHlTZXJ2aWNlLCBjb25uZWN0aW9uU2VydmljZSkge1xuICAgICAgICAkc2NvcGUuZW50aXRpZXMgICAgICAgICAgICAgICAgID0gW107XG4gICAgICAgICRzY29wZS5zZWFyY2hJdGVtcyAgICAgICAgICAgICAgPSBudWxsO1xuICAgICAgICAkc2NvcGUuY2F0ZWdvcmllcyAgICAgICAgICAgICAgID0gW107XG4gICAgICAgICRzY29wZS5jdXJyZW50TG9jYXRpb24gICAgICAgICAgPSBudWxsO1xuICAgICAgICAkc2NvcGUuY2xpY2tlZExvY2F0aW9uICAgICAgICAgID0ge307XG4gICAgICAgICRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24gPSBudWxsO1xuICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eSAgICAgICAgICAgID0ge307XG4gICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSAgICAgPSBudWxsO1xuICAgICAgICAkc2NvcGUuZWRpdGluZyAgICAgICAgICAgICAgICAgID0gZmFsc2U7XG4gICAgICAgICRzY29wZS5hY3Rpb25zICAgICAgICAgICAgICAgICAgPSB7J2ludGVyYWN0ZWQnOiBmYWxzZX07XG4gICAgICAgICRzY29wZS5zaG93c2VhcmNoTUIgICAgICAgICAgICAgPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLnNob3dBbmFseXRpY3MgICAgICAgICAgICA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUuZW50aXR5VHlwZXMgICAgICAgICAgICAgID0gZW50aXR5U2VydmljZS5nZXRFbnRpdHlUeXBlcygpO1xuICAgICAgICAkc2NvcGUuY29ubmVjdGlvblR5cGVzICAgICAgICAgID0gY29ubmVjdGlvblNlcnZpY2UuZ2V0Q29ubmVjdGlvblR5cGVzKCk7XG4gICAgICAgICRzY29wZS5zdGF0dXMgICAgICAgICAgICAgICAgICAgPSB7XG4gICAgICAgICAgICBcImlzTmV0d29ya1Nob3duXCI6IHRydWUsXG4gICAgICAgICAgICBcImxpY2Vuc2VcIiAgICAgICA6IHRydWUsXG4gICAgICAgICAgICBcIm5ldHdvcmtMb2FkaW5nXCI6IHRydWVcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUudG9nZ2xlQW5hbHl0aWNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLnNob3dBbmFseXRpY3MgPSAhJHNjb3BlLnNob3dBbmFseXRpY3M7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5taW5Db25uZWN0aW9ucyA9ICRzY29wZS5taW5Db25uZWN0aW9ucyA9IDI7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICAvLyAkc2NvcGUuJHdhdGNoKCdtaW5Db25uZWN0aW9ucycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3RyaWdnZXJOZXR3b3JrRHJhdycpO1xuICAgICAgICAvLyB9KTtcblxuICAgICAgICAkc2NvcGUuJHdhdGNoKCdtaW5Db25uZWN0aW9ucycsIHdhdGNoTWluQ29ubmVjdGlvbik7XG5cbiAgICAgICAgZnVuY3Rpb24gd2F0Y2hNaW5Db25uZWN0aW9uKCkge1xuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3RyaWdnZXJOZXR3b3JrRHJhdycpO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLmNvbm5lY3Rpb25DaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzZWxmLm1pbkNvbm5lY3Rpb25zKTtcbiAgICAgICAgICAgICRzY29wZS5taW5Db25uZWN0aW9ucyA9IHNlbGYubWluQ29ubmVjdGlvbnM7XG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgndHJpZ2dlck5ldHdvcmtEcmF3Jyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmh5ZGVQYXJ0aWFscyA9IGZ1bmN0aW9uIChleGNlcHQpIHtcbiAgICAgICAgICAgIGlmIChleGNlcHQgPT09IFwic2VhcmNoXCIpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdGluZyAgICAgICAgID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNldHRpbmdzRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChleGNlcHQgPT09IFwic2V0dGluZ3NcIikge1xuICAgICAgICAgICAgICAgICRzY29wZS5lZGl0aW5nICAgICAgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd3NlYXJjaE1CID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV4Y2VwdCA9PT0gXCJlZGl0XCIpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3NFbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3dzZWFyY2hNQiAgICA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdGluZyAgICAgICAgID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNldHRpbmdzRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zaG93c2VhcmNoTUIgICAgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zaG93U2VhcmNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLmh5ZGVQYXJ0aWFscyhcInNlYXJjaFwiKTtcbiAgICAgICAgICAgICRzY29wZS5zaG93c2VhcmNoTUIgICA9ICEkc2NvcGUuc2hvd3NlYXJjaE1CO1xuICAgICAgICAgICAgLy8gJHNjb3BlLiRicm9hZGNhc3QoJ2hpZGVMaWNlbnNlJyk7XG4gICAgICAgICAgICAkc2NvcGUuc3RhdHVzLmxpY2Vuc2UgPSBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUudG9nZ2xlU2V0dGluZ3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2NvcGUuaHlkZVBhcnRpYWxzKFwic2V0dGluZ3NcIik7XG4gICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3NFbmFibGVkID0gISRzY29wZS5zZXR0aW5nc0VuYWJsZWQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnN0YXJ0RWRpdCA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50RW50aXR5ID0gZW50aXR5O1xuICAgICAgICAgICAgaWYgKCRzY29wZS5tb2JpbGUpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuaHlkZVBhcnRpYWxzKFwiZWRpdFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRzY29wZS5lZGl0aW5nID0gdHJ1ZTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc3dpdGNoVmlldyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vICRzY29wZS4kYnJvYWRjYXN0KCd2aWV3Q2hhbmdlJywgISRzY29wZS5zdGF0dXMuaXNOZXR3b3JrU2hvd24gPyAnTWFwJyA6ICdOZXR3b3JrJyk7XG4gICAgICAgICAgICAvLyAkc2NvcGUuY2hhbmdlVmlldyghJHNjb3BlLnN0YXR1cy5pc05ldHdvcmtTaG93biA/ICdNYXAnIDogJ05ldHdvcmsnKTtcbiAgICAgICAgICAgICRzY29wZS5zdGF0dXMuaXNOZXR3b3JrU2hvd24gPSAhJHNjb3BlLnN0YXR1cy5pc05ldHdvcmtTaG93bjtcbiAgICAgICAgICAgIGlmICgkc2NvcGUuc3RhdHVzLmlzTmV0d29ya1Nob3duKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3RyaWdnZXJOZXR3b3JrRHJhdycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHdpbmRvdy5tb2JpbGVjaGVjayAgICAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY2hlY2sgID0gZmFsc2UsXG4gICAgICAgICAgICAgICAgcmVnZXggID0gLyhhbmRyb2lkfGJiXFxkK3xtZWVnbykuK21vYmlsZXxhdmFudGdvfGJhZGFcXC98YmxhY2tiZXJyeXxibGF6ZXJ8Y29tcGFsfGVsYWluZXxmZW5uZWN8aGlwdG9wfGllbW9iaWxlfGlwKGhvbmV8b2QpfGlyaXN8a2luZGxlfGxnZSB8bWFlbW98bWlkcHxtbXB8bW9iaWxlLitmaXJlZm94fG5ldGZyb250fG9wZXJhIG0ob2J8aW4paXxwYWxtKCBvcyk/fHBob25lfHAoaXhpfHJlKVxcL3xwbHVja2VyfHBvY2tldHxwc3B8c2VyaWVzKDR8NikwfHN5bWJpYW58dHJlb3x1cFxcLihicm93c2VyfGxpbmspfHZvZGFmb25lfHdhcHx3aW5kb3dzIGNlfHhkYXx4aWluby9pLFxuICAgICAgICAgICAgICAgIHJlZ2V4MiA9IC8xMjA3fDYzMTB8NjU5MHwzZ3NvfDR0aHB8NTBbMS02XWl8Nzcwc3w4MDJzfGEgd2F8YWJhY3xhYyhlcnxvb3xzXFwtKXxhaShrb3xybil8YWwoYXZ8Y2F8Y28pfGFtb2l8YW4oZXh8bnl8eXcpfGFwdHV8YXIoY2h8Z28pfGFzKHRlfHVzKXxhdHR3fGF1KGRpfFxcLW18ciB8cyApfGF2YW58YmUoY2t8bGx8bnEpfGJpKGxifHJkKXxibChhY3xheil8YnIoZXx2KXd8YnVtYnxid1xcLShufHUpfGM1NVxcL3xjYXBpfGNjd2F8Y2RtXFwtfGNlbGx8Y2h0bXxjbGRjfGNtZFxcLXxjbyhtcHxuZCl8Y3Jhd3xkYShpdHxsbHxuZyl8ZGJ0ZXxkY1xcLXN8ZGV2aXxkaWNhfGRtb2J8ZG8oY3xwKW98ZHMoMTJ8XFwtZCl8ZWwoNDl8YWkpfGVtKGwyfHVsKXxlcihpY3xrMCl8ZXNsOHxleihbNC03XTB8b3N8d2F8emUpfGZldGN8Zmx5KFxcLXxfKXxnMSB1fGc1NjB8Z2VuZXxnZlxcLTV8Z1xcLW1vfGdvKFxcLnd8b2QpfGdyKGFkfHVuKXxoYWllfGhjaXR8aGRcXC0obXxwfHQpfGhlaVxcLXxoaShwdHx0YSl8aHAoIGl8aXApfGhzXFwtY3xodChjKFxcLXwgfF98YXxnfHB8c3x0KXx0cCl8aHUoYXd8dGMpfGlcXC0oMjB8Z298bWEpfGkyMzB8aWFjKCB8XFwtfFxcLyl8aWJyb3xpZGVhfGlnMDF8aWtvbXxpbTFrfGlubm98aXBhcXxpcmlzfGphKHR8dilhfGpicm98amVtdXxqaWdzfGtkZGl8a2VqaXxrZ3QoIHxcXC8pfGtsb258a3B0IHxrd2NcXC18a3lvKGN8ayl8bGUobm98eGkpfGxnKCBnfFxcLyhrfGx8dSl8NTB8NTR8XFwtW2Etd10pfGxpYnd8bHlueHxtMVxcLXd8bTNnYXxtNTBcXC98bWEodGV8dWl8eG8pfG1jKDAxfDIxfGNhKXxtXFwtY3J8bWUocmN8cmkpfG1pKG84fG9hfHRzKXxtbWVmfG1vKDAxfDAyfGJpfGRlfGRvfHQoXFwtfCB8b3x2KXx6eil8bXQoNTB8cDF8diApfG13YnB8bXl3YXxuMTBbMC0yXXxuMjBbMi0zXXxuMzAoMHwyKXxuNTAoMHwyfDUpfG43KDAoMHwxKXwxMCl8bmUoKGN8bSlcXC18b258dGZ8d2Z8d2d8d3QpfG5vayg2fGkpfG56cGh8bzJpbXxvcCh0aXx3dil8b3Jhbnxvd2cxfHA4MDB8cGFuKGF8ZHx0KXxwZHhnfHBnKDEzfFxcLShbMS04XXxjKSl8cGhpbHxwaXJlfHBsKGF5fHVjKXxwblxcLTJ8cG8oY2t8cnR8c2UpfHByb3h8cHNpb3xwdFxcLWd8cWFcXC1hfHFjKDA3fDEyfDIxfDMyfDYwfFxcLVsyLTddfGlcXC0pfHF0ZWt8cjM4MHxyNjAwfHJha3N8cmltOXxybyh2ZXx6byl8czU1XFwvfHNhKGdlfG1hfG1tfG1zfG55fHZhKXxzYygwMXxoXFwtfG9vfHBcXC0pfHNka1xcL3xzZShjKFxcLXwwfDEpfDQ3fG1jfG5kfHJpKXxzZ2hcXC18c2hhcnxzaWUoXFwtfG0pfHNrXFwtMHxzbCg0NXxpZCl8c20oYWx8YXJ8YjN8aXR8dDUpfHNvKGZ0fG55KXxzcCgwMXxoXFwtfHZcXC18diApfHN5KDAxfG1iKXx0MigxOHw1MCl8dDYoMDB8MTB8MTgpfHRhKGd0fGxrKXx0Y2xcXC18dGRnXFwtfHRlbChpfG0pfHRpbVxcLXx0XFwtbW98dG8ocGx8c2gpfHRzKDcwfG1cXC18bTN8bTUpfHR4XFwtOXx1cChcXC5ifGcxfHNpKXx1dHN0fHY0MDB8djc1MHx2ZXJpfHZpKHJnfHRlKXx2ayg0MHw1WzAtM118XFwtdil8dm00MHx2b2RhfHZ1bGN8dngoNTJ8NTN8NjB8NjF8NzB8ODB8ODF8ODN8ODV8OTgpfHczYyhcXC18ICl8d2ViY3x3aGl0fHdpKGcgfG5jfG53KXx3bWxifHdvbnV8eDcwMHx5YXNcXC18eW91cnx6ZXRvfHp0ZVxcLS9pO1xuICAgICAgICAgICAgKGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlZ2V4LnRlc3QoYSkgfHwgcmVnZXgyLnRlc3QoYS5zdWJzdHIoMCwgNCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KShuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvci52ZW5kb3IgfHwgd2luZG93Lm9wZXJhKTtcbiAgICAgICAgICAgIHJldHVybiBjaGVjaztcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLm1vYmlsZSAgICAgICAgICA9IHdpbmRvdy5tb2JpbGVjaGVjaygpO1xuICAgICAgICAkc2NvcGUuc2V0dGluZ3NFbmFibGVkID0gISRzY29wZS5tb2JpbGU7XG5cbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZW50aXR5U2VydmljZVxuICAgICAgICAgICAgICAgIC5nZXRBbGwoKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lbnRpdGllcyA9IGRhdGEubm9kZXM7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbnMgICA9IF8udW5pcShcbiAgICAgICAgICAgICAgICAgICAgICAgIF8ucGx1Y2soXy5mbGF0dGVuKF8ucGx1Y2soJHNjb3BlLmVudGl0aWVzLCAnbG9jYXRpb25zJykpLCAnbG9jYWxpdHknKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGVudGl0aWVzQnlMb2NhdGlvbiA9IF8ubWFwKGxvY2F0aW9ucywgZnVuY3Rpb24gKGxvYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbmRpbmdzID0gXy5maWx0ZXIoJHNjb3BlLmVudGl0aWVzLCBfLmZsb3coXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5wcm9wZXJ0eSgnbG9jYXRpb25zJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5wYXJ0aWFsUmlnaHQoXy5hbnksIHtsb2NhbGl0eTogbG9jfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgICAgOiBsb2MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSAgICA6ICdsb2NhdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50aXRpZXM6IGZpbmRpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpY3QgICAgOiBfLnppcE9iamVjdChfLnBsdWNrKGZpbmRpbmdzLCAnbmFtZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLnBsdWNrKGZpbmRpbmdzLCAnaW5kZXgnKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zZWFyY2hJdGVtcyA9IGVudGl0aWVzQnlMb2NhdGlvbi5jb25jYXQoJHNjb3BlLmVudGl0aWVzKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBpZiAoJHNjb3BlLmdldFVSTElEKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIC8vIFNldCB0aGUgZW50aXR5IHRvIHRoZSBJRCBpbiB0aGUgVVJMIGlmIGl0IGV4aXN0cy5cbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICRzY29wZS5zZXRFbnRpdHlJRCgkc2NvcGUuZ2V0VVJMSUQoKSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm92ZXJ2aWV3VXJsID0gJ2pzL292ZXJ2aWV3L292ZXJ2aWV3Lmh0bWwnO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgndHJpZ2dlck5ldHdvcmtEcmF3Jyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIDEwMCk7XG5cbiAgICAgICAgJHNjb3BlLm92ZXJ2aWV3VXJsID0gbnVsbDtcblxuICAgICAgICAkc2NvcGUuc2V0RW50aXR5ICAgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudExvY2F0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50RW50aXR5ICAgPSBlbnRpdHk7XG4gICAgICAgICAgICBpZiAoJHNjb3BlLmVkaXRpbmcpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3RvcEVkaXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdlbnRpdHlDaGFuZ2UnKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2V0RW50aXR5SUQgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgICRzY29wZS5zZXRFbnRpdHkoXy5maW5kKCRzY29wZS5lbnRpdGllcywgeydpZCc6IGlkfSkpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZXRMb2NhdGlvbiA9IGZ1bmN0aW9uIChsb2NhdGlvbikge1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRMb2NhdGlvbiA9IGxvY2F0aW9uO1xuICAgICAgICAgICAgaWYgKCRzY29wZS5lZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnN0b3BFZGl0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnaXRlbUNoYW5nZScpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZWxlY3RJdGVtID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdsb2NhdGlvbicpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2V0TG9jYXRpb24oaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAkc2NvcGVbaXRlbSAlIDEgPT09IDAgPyAnc2V0RW50aXR5SUQnIDogJ3NldEVudGl0eSddKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3NlbGVjdEl0ZW0nLCBpdGVtKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuJG9uKCdzZXRDdXJyZW50RW50aXR5JywgZnVuY3Rpb24gKGV2ZW50LCBhcmdzKSB7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudEVudGl0eSA9IGFyZ3MudmFsdWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRzY29wZS4kb24oJ3NldEN1cnJlbnRMb2NhdGlvbicsIGZ1bmN0aW9uIChldmVudCwgYXJncykge1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRMb2NhdGlvbiA9IGFyZ3MudmFsdWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRzY29wZS5zZXRFbnRpdGllcyA9IGZ1bmN0aW9uIChlbnRpdGllcykge1xuICAgICAgICAgICAgJHNjb3BlLmVudGl0aWVzID0gZW50aXRpZXM7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnN0b3BFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLmVkaXRpbmcgPSBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuJG9uKFwiZWRpdEVudGl0eVN1Y2Nlc3NcIiwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAkc2NvcGUuc2V0RW50aXRpZXMocmVzcG9uc2Uubm9kZXMpO1xuICAgICAgICAgICAgLy8gJHNjb3BlLnNldEVudGl0eUlEKCRzY29wZS5jdXJyZW50RW50aXR5LmlkKTtcbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCd0cmlnZ2VyTmV0d29ya0RyYXcnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29udHJvbGxlcignaG9tZUN0cmwnLCBob21lRGVwZW5kZW5jaWVzKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMTQvMTYuXG4gKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgZGVwZW5kZW5jaWVzID0gW107XG5cbiAgICBmdW5jdGlvbiBkaXJlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcInJlc3RyaWN0XCI6IFwiRVwiLFxuICAgICAgICAgICAgXCJ0ZW1wbGF0ZVVybFwiOiBcIi9tYXAvbWFwLmh0bWxcIixcbiAgICAgICAgICAgIFwiY29udHJvbGxlclwiOiBcIm1hcEN0cmxcIlxuICAgICAgICB9O1xuICAgIH1cbiAgICAgICAgYW5ndWxhci5tb2R1bGUoXCJjaXZpYy1ncmFwaFwiKVxuICAgICAgICAgICAgLmRpcmVjdGl2ZShcIm1hcFwiLCBkZXBlbmRlbmNpZXMpO1xuXG59KShhbmd1bGFyKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgZnVuY3Rpb24gQ29udHJvbGxlcigkc2NvcGUsICRmaWx0ZXIsIF8sIGNvbm5lY3Rpb25TZXJ2aWNlLCB1dGlscykge1xuICAgICAgICAvLyBUT0RPOiBNYWtlIGEgaGFzaG1hcCBvbiB0aGUgYmFja2VuZCBvZiBpZCAtPiBwb3NpdGlvbiwgdGhlbiB1c2Ugc291cmNlOlxuICAgICAgICAvLyBlbnRpdGllc1ttYXBbc291cmNlaWRdXSB0byBnZXQgbm9kZXMuIFNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcS8xNjgyNDMwOFxuICAgICAgICAkc2NvcGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgJHNjb3BlLmNvbm5lY3Rpb25zID0ge307XG4gICAgICAgIHN0YXJ0TG9hZCgpO1xuXG4gICAgICAgIC8vIFNlZSBodHRwczovL2NvZGVyd2FsbC5jb20vcC9uZ2lzbWEvc2FmZS1hcHBseS1pbi1hbmd1bGFyLWpzXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgICAgIHZhciBwaGFzZSA9IHRoaXMuJHJvb3QuJCRwaGFzZTtcbiAgICAgICAgICAgIGlmIChwaGFzZSA9PT0gJyRhcHBseScgfHwgcGhhc2UgPT09ICckZGlnZXN0Jykge1xuICAgICAgICAgICAgICAgIGlmIChmbiAmJiAodHlwZW9mKGZuKSA9PT0gJ2Z1bmN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuJGFwcGx5KGZuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuJG9uKCd0cmlnZ2VyTmV0d29ya0RyYXcnLCBzdGFydExvYWQpO1xuXG4gICAgICAgICRzY29wZS4kb24oJ3ZpZXdDaGFuZ2UnLCBmdW5jdGlvbiAodmlld09iaikge1xuICAgICAgICAgICAgY29uc29sZS5sb2codmlld09iaik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBkcmF3TmV0d29yayA9IGZ1bmN0aW9uIChlbnRpdHlBcnJheSwgY29ubmVjdGlvbkFycmF5KSB7XG4gICAgICAgICAgICAkc2NvcGUuaXNMb2FkaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHZhciBzdmcgPSBkMy5zZWxlY3QoJyNuZXR3b3JrJyk7XG4gICAgICAvLyAgICAgICAuY2xhc3NlZChcIm5ldHdvcmstY29udGFpbmVyXCIsIHRydWUpXG4gICAgICAvLyAgICAgICAuYXR0cihcInByZXNlcnZlQXNwZWN0UmF0aW9cIiwgXCJ4TWluWU1pbiBtZWV0XCIpXG4gICAgICAvLyAuYXR0cihcInZpZXdCb3hcIiwgXCIwIDAgNjAwIDQwMFwiICk7XG4gICAvL2NsYXNzIHRvIG1ha2UgaXQgcmVzcG9uc2l2ZVxuICAgLy8gLmNsYXNzZWQoXCJzdmctY29udGVudC1yZXNwb25zaXZlXCIsIHRydWUpOyBcbiAgICAgICAgICAgIHN2Zy5zZWxlY3RBbGwoXCIqXCIpLnJlbW92ZSgpO1xuICAgICAgICAgICAgdmFyIGJvdW5kcyA9IHN2Zy5ub2RlKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gYm91bmRzLmhlaWdodDtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IGJvdW5kcy53aWR0aDtcbiAgICAgICAgICAgIHZhciBvZmZzZXRTY2FsZSA9IDY7XG4gICAgICAgICAgICB2YXIgZGVmYXVsdE5vZGVTaXplID0gNztcbiAgICAgICAgICAgIHZhciBvZmZzZXRzID0ge1xuICAgICAgICAgICAgICAgICdJbmRpdmlkdWFsJzogeyAneCc6IDEsICd5JzogMSB9LFxuICAgICAgICAgICAgICAgICdGb3ItUHJvZml0JzogeyAneCc6IDEsICd5JzogLTEgfSxcbiAgICAgICAgICAgICAgICAnTm9uLVByb2ZpdCc6IHsgJ3gnOiAtMSwgJ3knOiAxIH0sXG4gICAgICAgICAgICAgICAgJ0dvdmVybm1lbnQnOiB7ICd4JzogLTEsICd5JzogLTEgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBsb3dlckJvdW5kUmFkaXVzID0gMTA7XG4gICAgICAgICAgICB2YXIgdXBwZXJCb3VuZFJhZGl1cyA9IDUwO1xuICAgICAgICAgICAgdmFyIG1heEVtcGxveWVlcyA9IGQzLm1heChlbnRpdHlBcnJheSwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KGVsLmVtcGxveWVlcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBtYXhGb2xsb3dlcnMgPSBkMy5tYXgoZW50aXR5QXJyYXksIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUludChlbC5mb2xsb3dlcnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgc2NhbGUgPSB7XG4gICAgICAgICAgICAgICAgJ2VtcGxveWVlcyc6IGQzLnNjYWxlLnNxcnQoKS5kb21haW4oWzEwLCBtYXhFbXBsb3llZXNdKVxuICAgICAgICAgICAgICAgICAgICAucmFuZ2UoW2xvd2VyQm91bmRSYWRpdXMsIHVwcGVyQm91bmRSYWRpdXNdKSxcbiAgICAgICAgICAgICAgICAnZm9sbG93ZXJzJzogZDMuc2NhbGUuc3FydCgpLmRvbWFpbihbMTAsIG1heEZvbGxvd2Vyc10pXG4gICAgICAgICAgICAgICAgICAgIC5yYW5nZShbbG93ZXJCb3VuZFJhZGl1cywgdXBwZXJCb3VuZFJhZGl1c10pXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGxpbmtzID0ge307XG4gICAgICAgICAgICB2YXIgZm9yY2UgPSBkMy5sYXlvdXQuZm9yY2UoKVxuICAgICAgICAgICAgICAgIC5zaXplKFt3aWR0aCwgaGVpZ2h0XSlcbiAgICAgICAgICAgICAgICAubm9kZXMoZW50aXR5QXJyYXkpXG4gICAgICAgICAgICAgICAgLmxpbmtzKF8uZmxhdHRlbihfLnZhbHVlcyhjb25uZWN0aW9uQXJyYXkpKSlcbiAgICAgICAgICAgICAgICAuY2hhcmdlKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmVtcGxveWVlcyA/IC0yICogc2NhbGUuZW1wbG95ZWVzKGQuZW1wbG95ZWVzKSA6IC0yMDtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5saW5rU3RyZW5ndGgoMClcbiAgICAgICAgICAgICAgICAubGlua0Rpc3RhbmNlKDUwKTtcblxuICAgICAgICAgICAgXy5mb3JFYWNoKGNvbm5lY3Rpb25BcnJheSwgZnVuY3Rpb24gKGNvbm5lY3Rpb25zLCB0eXBlKSB7XG4gICAgICAgICAgICAgICAgbGlua3NbdHlwZV0gPSBzdmcuc2VsZWN0QWxsKCcubGluayAuJyArIHR5cGUgKyAnLWxpbmsnKVxuICAgICAgICAgICAgICAgICAgICAuZGF0YShjb25uZWN0aW9ucylcbiAgICAgICAgICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKCdsaW5lJylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdXRpbHMuaXNEZWZpbmVkKGQuc291cmNlKSB8fCAhdXRpbHMuaXNEZWZpbmVkKGQudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZC50eXBlID0gdHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnbGluayAnICsgdHlwZSArICctbGluayAnICsgZC5zb3VyY2UudHlwZSArICctbGluayAnICsgZC50YXJnZXQudHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgJy1saW5rJztcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIG5vZGUgPSBzdmcuc2VsZWN0QWxsKCcubm9kZScpXG4gICAgICAgICAgICAgICAgLmRhdGEoZW50aXR5QXJyYXkpXG4gICAgICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKCdnJylcbiAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ25vZGUgJyArIGQudHlwZSArICctbm9kZSc7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2FsbChmb3JjZS5kcmFnKTtcblxuICAgICAgICAgICAgbm9kZS5hcHBlbmQoJ2NpcmNsZScpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3InLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5lbXBsb3llZXMgPyBzY2FsZVsnZW1wbG95ZWVzJ10oZC5lbXBsb3llZXMpIDogZGVmYXVsdE5vZGVTaXplO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBub2RlLmFwcGVuZCgndGV4dCcpXG4gICAgICAgICAgICAgICAgLnRleHQoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQubmlja25hbWUgPyBkLm5pY2tuYW1lIDogZC5uYW1lO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2R4JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKC0wLjA2NSAqIHRoaXMuZ2V0Q29tcHV0ZWRUZXh0TGVuZ3RoKCkgLyAyKSArICdlbSc7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYXR0cignZHknLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoMC4wOCAqIHRoaXMucGFyZW50Tm9kZS5nZXRCQm94KCkuaGVpZ2h0IC8gMiArIDAuNSkgKyAnZW0nO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBmb3JjZS5vbigndGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gQ2x1c3RlciBpbiBmb3VyIGNvcm5lcnMgYmFzZWQgb24gb2Zmc2V0LlxuICAgICAgICAgICAgICAgIHZhciBrID0gb2Zmc2V0U2NhbGUgKiBlLmFscGhhO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGUuYWxwaGEpXG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGVudGl0eUFycmF5LCBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbnRpdHkueCAmJiBvZmZzZXRzW2VudGl0eS50eXBlXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5LnggKz0gb2Zmc2V0c1tlbnRpdHkudHlwZV0ueCAqIGs7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHkueSArPSBvZmZzZXRzW2VudGl0eS50eXBlXS55ICogaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eS54ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heCh1cHBlckJvdW5kUmFkaXVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1pbih3aWR0aCAtIHVwcGVyQm91bmRSYWRpdXMsIGVudGl0eS54KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHkueSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgodXBwZXJCb3VuZFJhZGl1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5taW4oaGVpZ2h0IC0gdXBwZXJCb3VuZFJhZGl1cywgZW50aXR5LnkpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGxpbmtzLCBmdW5jdGlvbiAobGluaykge1xuICAgICAgICAgICAgICAgICAgICBsaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDEnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnNvdXJjZS54O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5MScsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuc291cmNlLnk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gyJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC50YXJnZXQueDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneTInLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnRhcmdldC55O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgbm9kZS5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgZC54ICsgJywnICsgZC55ICsgJyknO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgc3BlZWRBbmltYXRlID0gZnVuY3Rpb24gKHRpY2tzKSB7XG4gICAgICAgICAgICAgICAgLy8gU3BlZWQgdXAgdGhlIGluaXRpYWwgYW5pbWF0aW9uLlxuICAgICAgICAgICAgICAgIC8vIFNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNjE4OTExMFxuICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGlja3M7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yY2UudGljaygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb3JjZS5hbHBoYSgpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlbmRlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoISRzY29wZS5tb2JpbGUpIHtcbiAgICAgICAgICAgICAgICBzcGVlZEFuaW1hdGUoNyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3JjZS5zdGFydCgpO1xuXG4gICAgICAgICAgICAvLyBIYXNoIGxpbmtlZCBuZWlnaGJvcnMgZm9yIGVhc3kgaG92ZXJpbmcgZWZmZWN0cy5cbiAgICAgICAgICAgIC8vIFNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS84NzgwMjc3XG4gICAgICAgICAgICB2YXIgbGlua2VkQnlJbmRleCA9IHt9O1xuICAgICAgICAgICAgXy5mb3JFYWNoKGxpbmtzLCBmdW5jdGlvbiAobCkge1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChsWzBdLCBmdW5jdGlvbiAoY29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gY29ubmVjdGlvbi5fX2RhdGFfXy5zb3VyY2U7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBjb25uZWN0aW9uLl9fZGF0YV9fLnRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgbGlua2VkQnlJbmRleFtzb3VyY2UuaW5kZXggKyAnLCcgKyB0YXJnZXQuaW5kZXhdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgbGlua2VkQnlJbmRleFt0YXJnZXQuaW5kZXggKyAnLCcgKyBzb3VyY2UuaW5kZXhdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgbmVpZ2hib3JpbmcgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgICAgIHJldHVybiBsaW5rZWRCeUluZGV4W2EuaW5kZXggKyAnLCcgKyBiLmluZGV4XSB8fCBhLmluZGV4ID09PSBiLmluZGV4O1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGZvY3VzbmVpZ2hib3JzID0gZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgICAgIC8vIEFwcGx5ICd1bmZvY3VzZWQnIGNsYXNzIHRvIGFsbCBub24tbmVpZ2hib3JzLlxuICAgICAgICAgICAgICAgIC8vIEFwcGx5ICdmb2N1c2VkJyBjbGFzcyB0byBhbGwgbmVpZ2hib3JzLlxuICAgICAgICAgICAgICAgIC8vIFRPRE86IFNlZSBpZiBpdCBjYW4gYmUgZG9uZSB3aXRoIGp1c3Qgb25lIGNsYXNzIGFuZCA6bm90KC5mb2N1c2VkKSBDU1Mgc2VsZWN0b3JzLlxuICAgICAgICAgICAgICAgIG5vZGVcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5laWdoYm9yaW5nKGVudGl0eSwgbik7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFuZWlnaGJvcmluZyhlbnRpdHksIG4pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChsaW5rcywgZnVuY3Rpb24gKGxpbmspIHtcbiAgICAgICAgICAgICAgICAgICAgbGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmdW5jdGlvbiAobykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRpdHkuaW5kZXggPT09IG8uc291cmNlLmluZGV4IHx8IGVudGl0eS5pbmRleFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9PT0gby50YXJnZXQuaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEoZW50aXR5LmluZGV4ID09PSBvLnNvdXJjZS5pbmRleCB8fCBlbnRpdHkuaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA9PT0gby50YXJnZXQuaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgZm9jdXMgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jdXJyZW50RW50aXR5ICE9PSBlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNldEVudGl0eShlbnRpdHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICAgICAgZm9jdXNuZWlnaGJvcnMoZW50aXR5KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciB1bmZvY3VzID0gZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgICAgIC8vdmFyIHRyYW5zaXRpb25kZWxheSA9IDc1O1xuICAgICAgICAgICAgICAgIG5vZGVcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBfLmZvckVhY2gobGlua3MsIGZ1bmN0aW9uIChsaW5rKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGVudGl0eS5maXhlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIC8vIFJlc3RhcnQgZDMgYW5pbWF0aW9ucy5cbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcmNlLnJlc3VtZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL1RPRE86IFNob3cgZ2VuZXJpYyBkZXRhaWxzIGFuZCBub3QgaW5kaXZpZHVhbCBlbnRpdHkgZGV0YWlscz9cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgaG92ZXJUaW1lcjtcbiAgICAgICAgICAgIHZhciBob3ZlciA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSAmJiAhJHNjb3BlLmVkaXRpbmcgJiYgISRzY29wZS5jdXJyZW50TG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgaG92ZXJUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXMoZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciB1bmhvdmVyID0gZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ICYmICEkc2NvcGUuY3VycmVudExvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHVuZm9jdXMoZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGhvdmVyVGltZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbnRlcmFjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGZvY3VzTG9jYXRpb24gPSBmdW5jdGlvbiAobG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICAvLyAgSWYgdGhlIGN1cnJlbnQgZW50aXR5IGlzIHNob3duIGFuZCBpdCBkb2Vzbid0IG1hdGNoIHRoZSBjbGlja2VkIG5vZGUsIHRoZW4gc2V0XG4gICAgICAgICAgICAgICAgLy8gdGhlIG5ldyBub2RlIHRvIGNsaWNrZWQuXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuXG4gICAgICAgICAgICAgICAgbm9kZS5jbGFzc2VkKCdmb2N1c2VkJywgZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4ubmFtZSBpbiBsb2NhdGlvbi5kaWN0O1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEobi5uYW1lIGluIGxvY2F0aW9uLmRpY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChsaW5rcywgZnVuY3Rpb24gKGxpbmspIHtcbiAgICAgICAgICAgICAgICAgICAgbGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmdW5jdGlvbiAobykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoby5zb3VyY2UubmFtZSBpbiBsb2NhdGlvbi5kaWN0ICYmIG8udGFyZ2V0Lm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbiBsb2NhdGlvbi5kaWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShvLnNvdXJjZS5uYW1lIGluIGxvY2F0aW9uLmRpY3QpIHx8ICEoby50YXJnZXQubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbiBsb2NhdGlvbi5kaWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIHVuZm9jdXNMb2NhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBub2RlXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGxpbmtzLCBmdW5jdGlvbiAobGluaykge1xuICAgICAgICAgICAgICAgICAgICBsaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcmNlLnJlc3VtZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBoaWdobGlnaHRMb2NhdGlvbiA9IGZ1bmN0aW9uIChsb2NhdGlvbikge1xuICAgICAgICAgICAgICAgICRzY29wZS5zaG93TGljZW5zZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgdW5mb2N1cygkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiAhPT0gbG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdW5mb2N1c0xvY2F0aW9uKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAvLyAkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uID0gbG9jYXRpb247XG4gICAgICAgICAgICAgICAgICAgIGZvY3VzTG9jYXRpb24obG9jYXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBGSVggRk9SIExPQ0FUSU9OIE5PVCBISUdITElHSFRJTkcgb24gc2VhcmNoIGVudGVyOlxuICAgICAgICAgICAgICAgIGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uID09PSBsb2NhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiA9IGxvY2F0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNMb2NhdGlvbihsb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZDMuZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZDMuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgY2xpY2sgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3dMaWNlbnNlID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBpZiAodXRpbHMuaXNEZWZpbmVkKCRzY29wZS5jbGlja2VkTG9jYXRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1dGlscy5pc0RlZmluZWQoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuZm9jdXNMb2NhdGlvbigkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyAgSWYgdGhlIHByZXZpb3VzIG5vZGUgaXMgZXF1YWwgdG8gdGhlIG5ldyBub2RlLCBkbyBub3RoaW5nLlxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ID09PSBlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGSVggRk9SIFNFQVJDSCBOT1QgV09SS0lORzogZW50aXR5IHdhcyBub3QgZm9jdXNlZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWZ0ZXIgc3dpdGNoaW5nIHRvIHN0YXJ0bG9hZCBmdW5jdGlvbiBmb3IgbmV0d29yayBncmFwaFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXMoZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICBVbmZvY3VzIG9uIHByZXZpb3VzIG5vZGUgYW5kIGZvY3VzIG9uIG5ldyBub2RlLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZm9jdXMoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9IGVudGl0eTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTdG9wIGV2ZW50IHNvIHdlIGRvbid0IGRldGVjdCBhIGNsaWNrIG9uIHRoZSBiYWNrZ3JvdW5kLlxuICAgICAgICAgICAgICAgIC8vIFNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcS8yMjk0MTc5NlxuICAgICAgICAgICAgICAgIGlmIChkMy5ldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBkMy5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGJhY2tncm91bmRjbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAodXRpbHMuaXNEZWZpbmVkKCRzY29wZS5jbGlja2VkTG9jYXRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1dGlscy5pc0RlZmluZWQoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuZm9jdXMoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodXRpbHMuaXNEZWZpbmVkKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuZm9jdXMoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgICAgIC8vVE9ETzogU2hvdyBnZW5lcmljIGRldGFpbHMgYW5kIG5vdCBpbmRpdmlkdWFsIGVudGl0eSBkZXRhaWxzLlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBkYmxjbGljayA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVudGl0eS5maXhlZCkge1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHkueCA9IHdpZHRoIC8gMjtcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LnkgPSBoZWlnaHQgLyAyO1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHkucHggPSB3aWR0aCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5weSA9IGhlaWdodCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5maXhlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9IGVudGl0eTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB1bmZvY3VzKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIG5vZGUub24oJ21vdXNlb3ZlcicsIGhvdmVyKTtcbiAgICAgICAgICAgIG5vZGUub24oJ21vdXNlb3V0JywgdW5ob3Zlcik7XG4gICAgICAgICAgICBub2RlLm9uKCdjbGljaycsIGNsaWNrKTtcbiAgICAgICAgICAgIG5vZGUub24oJ2RibGNsaWNrJywgZGJsY2xpY2spO1xuICAgICAgICAgICAgc3ZnLm9uKCdjbGljaycsIGJhY2tncm91bmRjbGljayk7XG5cbiAgICAgICAgICAgIG5vZGVcbiAgICAgICAgICAgICAgICAuY2xhc3NlZCgnd2VsbGNvbm5lY3RlZCcsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmhhc093blByb3BlcnR5KCd3ZWxsY29ubmVjdGVkJyk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICRzY29wZS4kb24oJ2NoYW5nZVNpemVCeScsIGZ1bmN0aW9uIChldmVudCwgc2l6ZUJ5KSB7XG4gICAgICAgICAgICAgICAgc3ZnLnNlbGVjdEFsbCgnY2lyY2xlJylcbiAgICAgICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oMjUwKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cigncicsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZFtzaXplQnldID8gc2NhbGVbc2l6ZUJ5XShkW3NpemVCeV0pIDogZGVmYXVsdE5vZGVTaXplO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJHNjb3BlLiRvbigndG9nZ2xlTGluaycsIGZ1bmN0aW9uIChldmVudCwgbGluaykge1xuICAgICAgICAgICAgICAgIC8vIGxpbmtzW2xpbmsubmFtZV1cbiAgICAgICAgICAgICAgICAvLyAuY2xhc3NlZCh7J3Zpc2libGUnOiBsaW5rLmVuYWJsZWQsICdoaWRkZW4nOiAhbGluay5lbmFibGVkfSk7XG4gICAgICAgICAgICAgICAgXy5tYXAoJHNjb3BlLmVudGl0eVR5cGVzLCBmdW5jdGlvbiAodmFsLCBrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgc3ZnXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCcuJyArIGtleSArICctbGluaycpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Zpc2libGUnOiBmdW5jdGlvbiAobCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb25uZWN0aW9uVHlwZSBlbmFibGVkLCBjb25uZWN0aW9uIHNvdXJjZSBlbnRpdHkgdHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpcyBlbmFibGVkLCBjb25uZWN0aW9uIHRhcmdldCBlbnRpdHkgdHlwZSBpcyBlbmFibGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gISRzY29wZS5jb25uZWN0aW9uVHlwZXNbbC50eXBlXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgKCRzY29wZS5lbnRpdHlUeXBlc1tsLnNvdXJjZS50eXBlXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgJHNjb3BlLmVudGl0eVR5cGVzW2wudGFyZ2V0LnR5cGVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoaWRkZW4nOiBmdW5jdGlvbiAobCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBhbnkgb2YgQ29ubmVjdGlvblR5cGUsIHNvdXJjZSBlbnRpdHkgdHlwZSwgb3IgdGFyZ2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVudGl0eSB0eXBlIGFyZSBkaXNhYmxlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEkc2NvcGUuY29ubmVjdGlvblR5cGVzW2wudHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8ICghJHNjb3BlLmVudGl0eVR5cGVzW2wuc291cmNlLnR5cGVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCAhJHNjb3BlLmVudGl0eVR5cGVzW2wudGFyZ2V0LnR5cGVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkc2NvcGUuJG9uKCd0b2dnbGVOb2RlJywgZnVuY3Rpb24gKGV2ZW50LCB0eXBlKSB7XG4gICAgICAgICAgICAgICAgc3ZnXG4gICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJy4nICsgdHlwZS5uYW1lICsgJy1ub2RlJylcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoeyAndmlzaWJsZSc6IHR5cGUuZW5hYmxlZCwgJ2hpZGRlbic6ICF0eXBlLmVuYWJsZWQgfSk7XG5cbiAgICAgICAgICAgICAgICBzdmdcbiAgICAgICAgICAgICAgICAgICAgLnNlbGVjdEFsbCgnLicgKyB0eXBlLm5hbWUgKyAnLWxpbmsnKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAndmlzaWJsZSc6IGZ1bmN0aW9uIChsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ubmVjdGlvblR5cGUgZW5hYmxlZCwgY29ubmVjdGlvbiBzb3VyY2UgZW50aXR5IHR5cGUgaXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbmFibGVkLCBjb25uZWN0aW9uIHRhcmdldCBlbnRpdHkgdHlwZSBpcyBlbmFibGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUuY29ubmVjdGlvblR5cGVzW2wudHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgKCRzY29wZS5lbnRpdHlUeXBlc1tsLnNvdXJjZS50eXBlXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiAkc2NvcGUuZW50aXR5VHlwZXNbbC50YXJnZXQudHlwZV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdoaWRkZW4nOiBmdW5jdGlvbiAobCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGFueSBvZiBDb25uZWN0aW9uVHlwZSwgc291cmNlIGVudGl0eSB0eXBlLCBvciB0YXJnZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbnRpdHkgdHlwZSBhcmUgZGlzYWJsZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEkc2NvcGUuY29ubmVjdGlvblR5cGVzW2wudHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgKCEkc2NvcGUuZW50aXR5VHlwZXNbbC5zb3VyY2UudHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgISRzY29wZS5lbnRpdHlUeXBlc1tsLnRhcmdldC50eXBlXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJHNjb3BlLiRvbignc2VsZWN0SXRlbScsIGZ1bmN0aW9uIChldmVudCwgaXRlbSkge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdsb2NhdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0TG9jYXRpb24oJHNjb3BlLmN1cnJlbnRMb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjbGljaygkc2NvcGUuY3VycmVudEVudGl0eSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gc3RhcnRMb2FkKCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gc3VjY2VzcyhkYXRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkRW50aXRpZXMgPSAkZmlsdGVyKCdmaWx0ZXInKSgkc2NvcGUuZW50aXRpZXMsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRpdHkuY29sbGFib3JhdGlvbnMubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPj0gJHNjb3BlLm1pbkNvbm5lY3Rpb25zO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWRDb25uZWN0aW9ucyA9IHt9O1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChfLmtleXMoZGF0YS5jb25uZWN0aW9ucyksIGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICRzY29wZS5jb25uZWN0aW9uc1t0eXBlXSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZENvbm5lY3Rpb25zW3R5cGVdID0gW107XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGRhdGEuY29ubmVjdGlvbnMsIGZ1bmN0aW9uIChjb25uZWN0aW9ucywgdHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBfLmZvckVhY2goY29ubmVjdGlvbnMsIGZ1bmN0aW9uIChjb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlTm9kZSA9IF8uZmluZChmaWx0ZXJlZEVudGl0aWVzLCB7ICdpZCc6IGNvbm5lY3Rpb24uc291cmNlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldE5vZGUgPSBfLmZpbmQoZmlsdGVyZWRFbnRpdGllcywgeyAnaWQnOiBjb25uZWN0aW9uLnRhcmdldCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKCB1dGlscy5pc0RlZmluZWQoc291cmNlTm9kZSkgJiYgdXRpbHMuaXNEZWZpbmVkKHRhcmdldE5vZGUpICkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkQ29ubmVjdGlvbnNbdHlwZV0ucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ICdzb3VyY2UnOiBzb3VyY2VOb2RlLCAndGFyZ2V0JzogdGFyZ2V0Tm9kZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICRzY29wZS5jb25uZWN0aW9uc1t0eXBlXS5wdXNoKHsnc291cmNlJzogc291cmNlTm9kZSwgJ3RhcmdldCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0YXJnZXROb2RlfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgc2hvdyBsYWJlbHMgb24gdG9wIDUgbW9zdCBjb25uZWN0ZWQgZW50aXRpZXMgaW5pdGlhbGx5LlxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChfLmtleXMoJHNjb3BlLmVudGl0eVR5cGVzKSwgZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgdG9wIDUgbW9zdC1jb25uZWN0ZWQgZW50aXRpZXMuXG4gICAgICAgICAgICAgICAgICAgIHZhciB0b3A1ID0gXy50YWtlUmlnaHQoXy5zb3J0QnkoXy5maWx0ZXIoJHNjb3BlLmVudGl0aWVzLCB7ICd0eXBlJzogdHlwZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdjb2xsYWJvcmF0aW9ucy5sZW5ndGgnKSwgNSk7XG4gICAgICAgICAgICAgICAgICAgIF8uZm9yRWFjaCh0b3A1LCBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHkud2VsbGNvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgZmlsdGVyZWRFbnRpdGllcyA9IF8uc29ydEJ5KGZpbHRlcmVkRW50aXRpZXMsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoZS53ZWxsY29ubmVjdGVkKSA/IDEgOiAwO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgZHJhd05ldHdvcmsoZmlsdGVyZWRFbnRpdGllcywgZmlsdGVyZWRDb25uZWN0aW9ucyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbm5lY3Rpb25TZXJ2aWNlXG4gICAgICAgICAgICAgICAgLmdldEFsbCgpXG4gICAgICAgICAgICAgICAgLnRoZW4oc3VjY2Vzcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBDb250cm9sbGVyLiRpbmplY3QgPSBbXCIkc2NvcGVcIiwgXCIkZmlsdGVyXCIsIFwiX1wiLCBcImNvbm5lY3Rpb25TZXJ2aWNlXCIsIFwiY2dVdGlsU2VydmljZVwiXTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb250cm9sbGVyKCduZXR3b3JrQ3RybCcsIENvbnRyb2xsZXIpO1xuXG59KShhbmd1bGFyLCBSVFApO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA3LzExLzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGRlcGVuZGVuY2llcyA9IFtcbiAgICAgICAgZGlyZWN0aXZlXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIGRpcmVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwicmVzdHJpY3RcIjogXCJFXCIsXG4gICAgICAgICAgICBcInRlbXBsYXRlVXJsXCI6IFwianMvbmV0d29yay9uZXR3b3JrLmh0bWxcIixcbiAgICAgICAgICAgIFwiY29udHJvbGxlclwiOiBcIm5ldHdvcmtDdHJsXCJcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoXCIpXG4gICAgICAgIC5kaXJlY3RpdmUoXCJuZXR3b3JrXCIsIGRlcGVuZGVuY2llcyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI2LzE2LlxuICovXG4oZnVuY3Rpb24oYW5ndWxhcikge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2lucHV0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdGljdDogJ0UnLFxuICAgICAgICAgICAgcmVxdWlyZTogJz9uZ01vZGVsJyxcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmdNb2RlbCkge1xuICAgICAgICAgICAgICAgIGlmICggJ3R5cGUnIGluIGF0dHJzICYmIGF0dHJzLnR5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ3JhbmdlJyApIHtcbiAgICAgICAgICAgICAgICAgICAgbmdNb2RlbC4kcGFyc2Vycy5wdXNoKHBhcnNlRmxvYXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KTtcbn0pKGFuZ3VsYXIpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gb3ZlcnZpZXdDdHJsKCRzY29wZSwgXykge1xuICAgICAgICAkc2NvcGUuY2F0ZWdvcml6ZWRFbnRpdGllcyA9IHt9O1xuICAgICAgICBfLmZvckVhY2goXy5rZXlzKCRzY29wZS5lbnRpdHlUeXBlcyksIGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAkc2NvcGUuY2F0ZWdvcml6ZWRFbnRpdGllc1t0eXBlXSA9IF8uZmlsdGVyKCRzY29wZS5lbnRpdGllcywgeyd0eXBlJzogdHlwZX0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29udHJvbGxlcignb3ZlcnZpZXdDdHJsJywgWyckc2NvcGUnLCAnXycsIG92ZXJ2aWV3Q3RybF0pO1xufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgZnVuY3Rpb24gaXNEZWZpbmVkKG8pIHtcbiAgICAgICAgcmV0dXJuICEodHlwZW9mIG8gPT09IFwidW5kZWZpbmVkXCIgfHwgbyA9PT0gbnVsbCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNPYmplY3Qobykge1xuICAgICAgICByZXR1cm4gaXNEZWZpbmVkKG8pICYmICFBcnJheS5pc0FycmF5KG8pICYmICh0eXBlb2YgbyA9PT0gXCJvYmplY3RcIik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UHJvcGVydHlGcm9tT2JqKG9iaikge1xuICAgICAgICB2YXIgZGVmT2JqID0gaXNEZWZpbmVkKG9iaikgPyBvYmogOiB7fTtcblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHByb3BlcnR5LCBkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGlzRGVmaW5lZChkZWZhdWx0VmFsdWUpID8gZGVmYXVsdFZhbHVlIDogbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBpc0RlZmluZWQoZGVmT2JqW3Byb3BlcnR5XSlcbiAgICAgICAgICAgICAgICA/IGRlZk9ialtwcm9wZXJ0eV1cbiAgICAgICAgICAgICAgICA6IHZhbHVlO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvb3BBbmRJbml0KG1vZGVsQXJyYXksIGluaXRNb2RlbEZ1bmN0aW9uKSB7XG4gICAgICAgIHZhciBuZXdBcnJheSA9IEFycmF5LmlzQXJyYXkobW9kZWxBcnJheSlcbiAgICAgICAgICAgID8gbW9kZWxBcnJheS5maWx0ZXIoaXNPYmplY3QpLm1hcChpbml0TW9kZWxGdW5jdGlvbilcbiAgICAgICAgICAgIDogW107XG5cbiAgICAgICAgcmV0dXJuIG5ld0FycmF5LmNvbmNhdChbaW5pdE1vZGVsRnVuY3Rpb24oKV0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFNlcnZpY2UoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcImlzRGVmaW5lZFwiOiBpc0RlZmluZWQsXG4gICAgICAgICAgICBcImlzT2JqZWN0XCI6IGlzT2JqZWN0LFxuXG4gICAgICAgICAgICBcImdldFByb3BlcnR5RnJvbU9ialwiOiBnZXRQcm9wZXJ0eUZyb21PYmosXG4gICAgICAgICAgICBcImxvb3BBbmRJbml0XCI6IGxvb3BBbmRJbml0XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKFwiY2l2aWMtZ3JhcGgudXRpbFwiKVxuICAgICAgICAuZmFjdG9yeShcImNnVXRpbFNlcnZpY2VcIiwgU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIENvbmZpZygkaHR0cFByb3ZpZGVyKSB7XG4gICAgICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bXCJYLVJlcXVlc3RlZC1XaXRoXCJdID0gXCJYTUxIdHRwUmVxdWVzdFwiO1xuICAgIH1cblxuICAgIENvbmZpZy4kaW5qZWN0ID0gW1wiJGh0dHBQcm92aWRlclwiXTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiY2l2aWMtZ3JhcGguYXBpXCIpLmNvbmZpZyhDb25maWcpO1xuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgYXBpVXJsID0gXCJodHRwczovL2FwaS5jaXZpY2dyYXBoLmlvL2FwaVwiO1xuICAgIC8vdmFyIGFwaVVybCA9IFwiL2FwaVwiO1xuXG4gICAgdmFyIGRlZmF1bHRIZWFkZXIgPSB7XG4gICAgICAgIC8vIFwiRXZlbnQtTmFtZVwiOiBcIlRlc3QtRXZlbnRcIlxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBTZXJ2aWNlKCRodHRwLCAkcSkge1xuICAgICAgICBmdW5jdGlvbiBsb2dBcGlFcnJvcihlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJSZWNpZXZlZCBhbiBlcnJvciBmcm9tIEFQSSB3aXRoIHRoaXMgbWVzc2FnZTogJU9cIiwgZXJyLmRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChlcnIpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdW53cmFwQW5ndWxhckh0dHAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0KHVybCwgcGFyYW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHBcbiAgICAgICAgICAgICAgICAuZ2V0KGFwaVVybCArIHVybCwgeyBcInBhcmFtc1wiOiBwYXJhbXMsIFwiaGVhZGVyc1wiOiBkZWZhdWx0SGVhZGVyIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4odW53cmFwQW5ndWxhckh0dHAsIGxvZ0FwaUVycm9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHBvc3QodXJsLCBkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHBcbiAgICAgICAgICAgICAgICAucG9zdChhcGlVcmwgKyB1cmwsIGRhdGEsIHsgXCJoZWFkZXJzXCI6IGRlZmF1bHRIZWFkZXIgfSlcbiAgICAgICAgICAgICAgICAudGhlbih1bndyYXBBbmd1bGFySHR0cCwgbG9nQXBpRXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiZ2V0XCI6IGdldCxcbiAgICAgICAgICAgIFwicG9zdFwiOiBwb3N0XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgU2VydmljZS4kaW5qZWN0ID0gW1wiJGh0dHBcIiwgXCIkcVwiXTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiY2l2aWMtZ3JhcGguYXBpXCIpLmZhY3RvcnkoXCJjZ0FwaUNhbGxlclwiLCBTZXJ2aWNlKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjcvMTYuXG4gKi9cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBTZXJ2aWNlKHV0aWxzKSB7XG4gICAgICAgIGZ1bmN0aW9uIExvY2F0aW9uKG9iaikge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgZ2V0UHJvcGVydHkgPSB1dGlscy5nZXRQcm9wZXJ0eUZyb21PYmoob2JqKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gYnVpbGRGb3JtYXR0ZWRBZGRyZXNzKCkge1xuICAgICAgICAgICAgICAgIHZhciBkZWZPYmogPSB1dGlscy5pc0RlZmluZWQob2JqKSA/IG9iaiA6IHt9O1xuICAgICAgICAgICAgICAgIHZhciBhZGRyZXNzTGluZSA9ICh1dGlscy5pc0RlZmluZWQoZGVmT2JqLmFkZHJlc3NfbGluZSkgPyBkZWZPYmouYWRkcmVzc19saW5lICsgJyAnIDogJycpO1xuICAgICAgICAgICAgICAgIHZhciBsb2NhbGl0eSA9ICh1dGlscy5pc0RlZmluZWQoZGVmT2JqLmxvY2FsaXR5KSA/IGRlZk9iai5sb2NhbGl0eSArICcsICcgOiAnJyk7XG4gICAgICAgICAgICAgICAgdmFyIGNvdW50cnlDb2RlID0gKHV0aWxzLmlzRGVmaW5lZChkZWZPYmouY291bnRyeV9jb2RlKSA/IGRlZk9iai5jb3VudHJ5X2NvZGUgKyAnICcgOiAnJyk7XG4gICAgICAgICAgICAgICAgdmFyIHBvc3RhbENvZGUgPSAodXRpbHMuaXNEZWZpbmVkKGRlZk9iai5wb3N0YWxfY29kZSkgPyBkZWZPYmoucG9zdGFsX2NvZGUgOiAnJyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gKGFkZHJlc3NMaW5lICsgbG9jYWxpdHkgKyBjb3VudHJ5Q29kZSArIHBvc3RhbENvZGUpLnRyaW0oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZi5pZCA9IGdldFByb3BlcnR5KFwiaWRcIik7XG4gICAgICAgICAgICBzZWxmLmFkZHJlc3NfbGluZSA9IGdldFByb3BlcnR5KFwiYWRkcmVzc19saW5lXCIpO1xuICAgICAgICAgICAgc2VsZi5sb2NhbGl0eSA9IGdldFByb3BlcnR5KFwibG9jYWxpdHlcIik7XG4gICAgICAgICAgICBzZWxmLmRpc3RyaWN0ID0gZ2V0UHJvcGVydHkoXCJkaXN0cmljdFwiKTtcbiAgICAgICAgICAgIHNlbGYucG9zdGFsX2NvZGUgPSBnZXRQcm9wZXJ0eShcInBvc3RhbF9jb2RlXCIpO1xuICAgICAgICAgICAgc2VsZi5jb3VudHJ5ID0gZ2V0UHJvcGVydHkoXCJjb3VudHJ5XCIpO1xuICAgICAgICAgICAgc2VsZi5jb3VudHJ5X2NvZGUgPSBnZXRQcm9wZXJ0eShcImNvdW50cnlfY29kZVwiKTtcbiAgICAgICAgICAgIHNlbGYuY29vcmRpbmF0ZXMgPSBnZXRQcm9wZXJ0eShcImNvb3JkaW5hdGVzXCIpO1xuXG4gICAgICAgICAgICAvLyBUT0RPOiBDb252ZXJ0IHRoaXMgdG8gYSBtZXRob2QgdGhhdCBidWlsZHMgYmFzZWQgb2ZmIG9mIHRoZSBjdXJyZW50IG9iamVjdCdzIHByb3BlcnRpZXMuXG4gICAgICAgICAgICAvLyBVbmxlc3MgdGhpcyBpcyBuZWVkZWQgZm9yIHRoZSBBUEkgc3BlY2lmaWNhbGx5LCB0aGVuIGhhdmUgdGhpcyBidWlsdCBpbiBhIHNpbWlsYXIgZnVuY3Rpb24gYXMgdGhlIG9uZSBpblxuICAgICAgICAgICAgLy8gRW50aXR5TW9kZWwgZm9yIGJ1aWxkaW5nIEFQSSBzcGVjaWZpYyBvYmplY3RzXG4gICAgICAgICAgICBzZWxmLmZvcm1hdHRlZEFkZHJlc3MgPSBidWlsZEZvcm1hdHRlZEFkZHJlc3MoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldExvY2F0aW9uTW9kZWwob2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IExvY2F0aW9uKG9iaik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJnZXRMb2NhdGlvbk1vZGVsXCI6IGdldExvY2F0aW9uTW9kZWxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBTZXJ2aWNlLiRpbmplY3QgPSBbXCJjZ1V0aWxTZXJ2aWNlXCJdO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdjaXZpYy1ncmFwaC5hcGknKVxuICAgICAgICAuZmFjdG9yeSgnbG9jYXRpb25TZXJ2aWNlJywgU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxuICovXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgZnVuY3Rpb24gZ2V0RW50aXR5VHlwZXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcIkdvdmVybm1lbnRcIjogdHJ1ZSxcbiAgICAgICAgICAgIFwiRm9yLVByb2ZpdFwiOiB0cnVlLFxuICAgICAgICAgICAgXCJOb24tUHJvZml0XCI6IHRydWUsXG4gICAgICAgICAgICBcIkluZGl2aWR1YWxcIjogdHJ1ZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEluZmx1ZW5jZVR5cGVzKCkge1xuICAgICAgICByZXR1cm4gW1wiTG9jYWxcIiwgXCJOYXRpb25hbFwiLCBcIkdsb2JhbFwiXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBTZXJ2aWNlKGFwaUNhbGxlciwgZnVuQ29ublNlcnZpY2UsIGNvbm5TZXJ2aWNlLCBmaW5hbmNlU2VydmljZSwgbG9jYXRpb25TZXJ2aWNlLCBjYXRlZ29yeVNlcnZpY2UsIHV0aWxzKSB7XG5cbiAgICAgICAgZnVuY3Rpb24gRW50aXR5KG9iaikge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGRlZk9iaiA9IHV0aWxzLmlzRGVmaW5lZChvYmopID8gb2JqIDoge307XG4gICAgICAgICAgICB2YXIgZ2V0UHJvcGVydHkgPSB1dGlscy5nZXRQcm9wZXJ0eUZyb21PYmoob2JqKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVEQk1vZGVsKCkge1xuICAgICAgICAgICAgICAgIHZhciBkYk1vZGVsID0gbmV3IEVudGl0eShzZWxmKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmxvY2F0aW9ucy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmxvY2F0aW9ucy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmdyYW50c19yZWNlaXZlZC5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmdyYW50c19yZWNlaXZlZC5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmdyYW50c19naXZlbi5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmdyYW50c19naXZlbi5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmludmVzdG1lbnRzX3JlY2VpdmVkLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuaW52ZXN0bWVudHNfcmVjZWl2ZWQucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5pbnZlc3RtZW50c19tYWRlLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuaW52ZXN0bWVudHNfbWFkZS5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmRhdGFfZ2l2ZW4ucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5kYXRhX2dpdmVuLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZGF0YV9yZWNlaXZlZC5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmRhdGFfcmVjZWl2ZWQucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5jb2xsYWJvcmF0aW9ucy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmNvbGxhYm9yYXRpb25zLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwua2V5X3Blb3BsZS5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmtleV9wZW9wbGUucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5lbXBsb3ltZW50cy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmVtcGxveW1lbnRzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwucmV2ZW51ZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5yZXZlbnVlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmV4cGVuc2VzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZXhwZW5zZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5jYXRlZ29yaWVzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuY2F0ZWdvcmllcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmRlc2NyaXB0aW9uID0gJyc7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZGJNb2RlbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZi5pZCA9IGdldFByb3BlcnR5KFwiaWRcIik7XG4gICAgICAgICAgICBzZWxmLm5hbWUgPSBnZXRQcm9wZXJ0eShcIm5hbWVcIik7XG4gICAgICAgICAgICBzZWxmLmluZmx1ZW5jZSA9IGdldFByb3BlcnR5KFwiaW5mbHVlbmNlXCIpO1xuICAgICAgICAgICAgc2VsZi50eXBlID0gZ2V0UHJvcGVydHkoXCJ0eXBlXCIpO1xuICAgICAgICAgICAgc2VsZi5uaWNrbmFtZSA9IGdldFByb3BlcnR5KFwibmlja25hbWVcIik7XG4gICAgICAgICAgICBzZWxmLnVybCA9IGdldFByb3BlcnR5KFwidXJsXCIpO1xuICAgICAgICAgICAgc2VsZi50d2l0dGVyX2hhbmRsZSA9IGdldFByb3BlcnR5KFwidHdpdHRlcl9oYW5kbGVcIik7XG4gICAgICAgICAgICBzZWxmLmVtcGxveWVlcyA9IGdldFByb3BlcnR5KFwiZW1wbG95ZWVzXCIpO1xuXG4gICAgICAgICAgICBzZWxmLmxvY2F0aW9ucyA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5sb2NhdGlvbnMsIGxvY2F0aW9uU2VydmljZS5nZXRMb2NhdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuZ3JhbnRzX3JlY2VpdmVkID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmdyYW50c19yZWNlaXZlZCwgZnVuQ29ublNlcnZpY2UuZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmludmVzdG1lbnRzX3JlY2VpdmVkID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmludmVzdG1lbnRzX3JlY2VpdmVkLCBmdW5Db25uU2VydmljZS5nZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuZ3JhbnRzX2dpdmVuID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmdyYW50c19naXZlbiwgZnVuQ29ublNlcnZpY2UuZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmludmVzdG1lbnRzX21hZGUgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouaW52ZXN0bWVudHNfbWFkZSwgZnVuQ29ublNlcnZpY2UuZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmRhdGFfZ2l2ZW4gPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouZGF0YV9naXZlbiwgY29ublNlcnZpY2UuZ2V0Q29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuZGF0YV9yZWNlaXZlZCA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5kYXRhX3JlY2VpdmVkLCBjb25uU2VydmljZS5nZXRDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5jb2xsYWJvcmF0aW9ucyA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5jb2xsYWJvcmF0aW9ucywgY29ublNlcnZpY2UuZ2V0Q29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYua2V5X3Blb3BsZSA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5rZXlfcGVvcGxlLCBjb25uU2VydmljZS5nZXRDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5lbXBsb3ltZW50cyA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5lbXBsb3ltZW50cywgY29ublNlcnZpY2UuZ2V0Q29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYucmV2ZW51ZXMgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmoucmV2ZW51ZXMsIGZpbmFuY2VTZXJ2aWNlLmdldEZpbmFuY2VNb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmV4cGVuc2VzID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmV4cGVuc2VzLCBmaW5hbmNlU2VydmljZS5nZXRGaW5hbmNlTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5jYXRlZ29yaWVzID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmNhdGVnb3JpZXMsIGNhdGVnb3J5U2VydmljZS5nZXRDYXRlZ29yeU1vZGVsKTtcblxuICAgICAgICAgICAgc2VsZi5nZW5lcmF0ZURCTW9kZWwgPSBnZW5lcmF0ZURCTW9kZWw7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRFbnRpdHlNb2RlbChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRW50aXR5KG9iaik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRBbGwoKSB7XG4gICAgICAgICAgICByZXR1cm4gYXBpQ2FsbGVyLmdldCgnL2VudGl0aWVzJyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzYXZlRW50aXR5KGVudGl0eSkge1xuICAgICAgICAgICAgcmV0dXJuIGFwaUNhbGxlci5wb3N0KFwiL3NhdmVcIiwgeyBcImVudGl0eVwiOiBlbnRpdHkgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJnZXRFbnRpdHlNb2RlbFwiOiBnZXRFbnRpdHlNb2RlbCxcbiAgICAgICAgICAgIFwiZ2V0RW50aXR5VHlwZXNcIjogZ2V0RW50aXR5VHlwZXMsXG4gICAgICAgICAgICBcImdldEluZmx1ZW5jZVR5cGVzXCI6IGdldEluZmx1ZW5jZVR5cGVzLFxuICAgICAgICAgICAgXCJnZXRBbGxcIjogZ2V0QWxsLFxuICAgICAgICAgICAgXCJzYXZlRW50aXR5XCI6IHNhdmVFbnRpdHlcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBTZXJ2aWNlLiRpbmplY3QgPSBbXG4gICAgICAgIFwiY2dBcGlDYWxsZXJcIixcbiAgICAgICAgXCJmdW5kaW5nQ29ubmVjdGlvblNlcnZpY2VcIixcbiAgICAgICAgXCJjb25uZWN0aW9uU2VydmljZVwiLFxuICAgICAgICBcImZpbmFuY2VTZXJ2aWNlXCIsXG4gICAgICAgIFwibG9jYXRpb25TZXJ2aWNlXCIsXG4gICAgICAgIFwiY2F0ZWdvcnlTZXJ2aWNlXCIsXG4gICAgICAgIFwiY2dVdGlsU2VydmljZVwiXG4gICAgXTtcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKVxuICAgICAgICAuZmFjdG9yeShcImVudGl0eVNlcnZpY2VcIiwgU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA3LzEwLzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGNvbnRyb2xEZXBzID0gW1xuICAgICAgICAnZW50aXR5U2VydmljZScsXG4gICAgICAgICdjb25uZWN0aW9uU2VydmljZScsXG4gICAgICAgICckcm9vdFNjb3BlJyxcbiAgICAgICAgJ18nLFxuICAgICAgICAnJG1vZGFsJyxcbiAgICAgICAgY29udHJvbEN0cmxcbiAgICBdO1xuXG4gICAgZnVuY3Rpb24gY29udHJvbEN0cmwoZW50aXR5U2VydmljZSwgY29ubmVjdGlvblNlcnZpY2UsICRyb290U2NvcGUsIF8sICRtb2RhbCkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2bS5lbnRpdHlUeXBlcyA9IGVudGl0eVNlcnZpY2UuZ2V0RW50aXR5VHlwZXMoKTtcbiAgICAgICAgdm0uY29ubmVjdGlvblR5cGVzID0gY29ubmVjdGlvblNlcnZpY2UuZ2V0Q29ubmVjdGlvblR5cGVzKCk7XG4gICAgICAgIHZtLnNpemVCeUxpc3QgPSBbXG4gICAgICAgICAgICB7J25hbWUnOiAnRW1wbG95ZWVzJywgJ3ZhbHVlJzogJ2VtcGxveWVlcyd9LFxuICAgICAgICAgICAgeyduYW1lJzogJ1R3aXR0ZXIgRm9sbG93ZXJzJywgJ3ZhbHVlJzogJ2ZvbGxvd2Vycyd9XG4gICAgICAgIF07XG4gICAgICAgIHZtLnNpemVCeSA9ICdlbXBsb3llZXMnO1xuICAgICAgICB2bS5zaG93VmlldyA9IHtcbiAgICAgICAgICAgICdOZXR3b3JrJzogdHJ1ZSxcbiAgICAgICAgICAgICdNYXAnOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICB2bS5zd2l0Y2hWaWV3ID0gc3dpdGNoVmlldztcbiAgICAgICAgdm0uY2hhbmdlVmlldyA9IGZ1bmN0aW9uICh2aWV3KSB7XG4gICAgICAgICAgICBfLmZvckVhY2goXy5rZXlzKHZtLnNob3dWaWV3KSwgZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgICAgICB2bS5zaG93Vmlld1tuYW1lXSA9IHZpZXcgPT09IG5hbWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgndmlld0NoYW5nZScsIHZtLnNob3dWaWV3KTtcbiAgICAgICAgfTtcbiAgICAgICAgdm0uc2hvd0Fib3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJG1vZGFsLm9wZW4oe1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb250cm9sL2Fib3V0Lmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdtb2RhbEN0cmwnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdm0udG9nZ2xlTm9kZSA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3RvZ2dsZU5vZGUnLCB7J25hbWUnOiB0eXBlLCAnZW5hYmxlZCc6IHZtLmVudGl0eVR5cGVzW3R5cGVdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdm0udG9nZ2xlTGluayA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3RvZ2dsZUxpbmsnLCB7J25hbWUnOiB0eXBlLCAnZW5hYmxlZCc6IHZtLmNvbm5lY3Rpb25UeXBlc1t0eXBlXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHZtLmNoYW5nZVNpemVCeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnY2hhbmdlU2l6ZUJ5Jywgdm0uc2l6ZUJ5KTtcbiAgICAgICAgfTtcbiAgICAgICAgZnVuY3Rpb24gc3dpdGNoVmlldygpIHtcbiAgICAgICAgICAgIHZtLmNoYW5nZVZpZXcoIXZtLnRvZ2dsZU5ldHdvcmsgPyAnTWFwJyA6ICdOZXR3b3JrJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2bS5jaGFuZ2VTaXplQnkoKTtcblxuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdjb250cm9sQ3RybCcsIGNvbnRyb2xEZXBzKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMS8xNi5cbiAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIGFuYWx5dGljc0N0cmwoJHNjb3BlKSB7XG5cbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29udHJvbGxlcignYW5hbHl0aWNzQ3RybCcsIFsnJHNjb3BlJywgYW5hbHl0aWNzQ3RybF0pO1xufSkoYW5ndWxhcik7IiwiKGZ1bmN0aW9uIChhbmd1bGFyLCBkMywgTCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBkZXBlbmRlbmNpZXMgPSBbXG4gICAgICAgICckc2NvcGUnLFxuICAgICAgICAnJHRpbWVvdXQnLFxuICAgICAgICAnbGVhZmxldERhdGEnLFxuICAgICAgICAnXycsXG4gICAgICAgICckZmlsdGVyJyxcbiAgICAgICAgbWFwQ3RybFxuICAgIF07XG5cbiAgICBmdW5jdGlvbiBtYXBDdHJsKCRzY29wZSwgJHRpbWVvdXQsIGxlYWZsZXREYXRhLCBfLCAkZmlsdGVyKSB7XG5cbiAgICAgICAgJHNjb3BlLm9wdGlvbnMgPSB7XG4gICAgICAgICAgICBjZW50ZXIgIDoge1xuICAgICAgICAgICAgICAgIGxhdCA6IDIwLjAwLFxuICAgICAgICAgICAgICAgIGxuZyA6IC00MC4wMCxcbiAgICAgICAgICAgICAgICB6b29tOiAzXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgICAgICB0aWxlTGF5ZXIgICAgICAgICA6ICdodHRwczovL2FwaS50aWxlcy5tYXBib3guY29tL3Y0L21hcGJveC5saWdodC97en0ve3h9L3t5fS5wbmc/YWNjZXNzX3Rva2VuPXBrLmV5SjFJam9pWkdGMmFXUnNjbTUwSWl3aVlTSTZJakEwTTJSa056TXpaV0ptTnpFek5HWXpNVGRoWVRFeFl6QXlabVU0WlRFMUluMC5UTllsRnRhMlZJdHJrbjRMMFo5QkpRJyxcbiAgICAgICAgICAgICAgICB0aWxlTGF5ZXJPcHRpb25zICA6IHtcbiAgICAgICAgICAgICAgICAgICAgZGV0ZWN0UmV0aW5hOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICByZXVzZVRpbGVzICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB6b29tQ29udHJvbCAgICAgICA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGF0dHJpYnV0aW9uQ29udHJvbDogZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY3JlYXRlUGllQ2hhcnQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhICAgPSBvcHRpb25zLmRhdGE7XG4gICAgICAgICAgICAgICAgdmFyIHBpZSAgICA9IGQzLmxheW91dC5waWUoKS5zb3J0KG51bGwpLnZhbHVlKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnZhbHVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZhciBhcmMgICAgPSBkMy5zdmcuYXJjKCkub3V0ZXJSYWRpdXMob3B0aW9ucy5yKS5pbm5lclJhZGl1cyhvcHRpb25zLnIgLSAxMCk7XG4gICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IG9wdGlvbnMuciArIG9wdGlvbnMuc3Ryb2tlV2lkdGg7XG4gICAgICAgICAgICAgICAgdmFyIHcgICAgICA9IGNlbnRlciAqIDI7XG4gICAgICAgICAgICAgICAgdmFyIGggICAgICA9IHc7XG4gICAgICAgICAgICAgICAgdmFyIHN2ZyAgICA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhkMy5ucy5wcmVmaXguc3ZnLCAnc3ZnJyk7XG4gICAgICAgICAgICAgICAgdmFyIHZpcyAgICA9IGQzLnNlbGVjdChzdmcpXG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKGRhdGEpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdwaWVjaGFydCcpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHcpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBoKTtcblxuICAgICAgICAgICAgICAgIHZhciBhcmNzID0gdmlzLnNlbGVjdEFsbCgnLmFyYycpXG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKHBpZShkYXRhKSlcbiAgICAgICAgICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKCdnJylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2FyYycpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBjZW50ZXIgKyAnLCcgKyBjZW50ZXIgKyAnKScpO1xuXG4gICAgICAgICAgICAgICAgLy8gdmFyIG1hcCA9IEwubWFwYm94Lm1hcCgnbWFwJywgJ2V4YW1wbGVzLm1hcC05aWp1azI0eScsIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgbWluWm9vbTogMSxcbiAgICAgICAgICAgICAgICAvLyAgICAgbWF4Wm9vbTogMlxuICAgICAgICAgICAgICAgIC8vIH0pLnNldFZpZXcoWzQwLCAtNzQuNTBdLCA5KTtcblxuICAgICAgICAgICAgICAgIGFyY3MuYXBwZW5kKCdwYXRoJylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCBhcmMpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5kYXRhLnR5cGUgKyAnLWFyYyc7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgYXJjcy5hcHBlbmQoXCJzdmc6dGV4dFwiKVxuICAgICAgICAgICAgICAgICAgICAudGV4dChmdW5jdGlvbiAoZCwgaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5jb3VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIC00ICogb3B0aW9ucy5jb3VudC50b1N0cmluZygpLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJkeVwiLCA1KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiYXJjVGV4dFwiKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB3aW5kb3cuWE1MU2VyaWFsaXplciA/IChuZXcgd2luZG93LlhNTFNlcmlhbGl6ZXIoKSkuc2VyaWFsaXplVG9TdHJpbmcoc3ZnKVxuICAgICAgICAgICAgICAgICAgICA6IHN2Zy54bWwgPyBzdmcueG1sIDogJyc7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBsZWFmbGV0RGF0YS5nZXRNYXAoKS50aGVuKGZ1bmN0aW9uIChtYXApIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWRFbnRpdGllcyA9ICRzY29wZS5lbnRpdGllcztcblxuICAgICAgICAgICAgICAgIG1hcC5pbnZhbGlkYXRlU2l6ZSgpO1xuXG4gICAgICAgICAgICAgICAgbmV3IEwuQ29udHJvbC5ab29tKHtwb3NpdGlvbjogJ3RvcHJpZ2h0J30pLmFkZFRvKG1hcCk7XG4gICAgICAgICAgICAgICAgTC5jb250cm9sLmxvY2F0ZShcbiAgICAgICAgICAgICAgICAgICAge3Bvc2l0aW9uOiAndG9wcmlnaHQnLCBzaG93UG9wdXA6IGZhbHNlLCBpY29uOiAnZmEgZmEtbG9jYXRpb24tYXJyb3cnfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRvKG1hcCk7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjbHVzdGVySWNvbihjbHVzdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZHJlbiAgICAgICA9IGNsdXN0ZXIuZ2V0QWxsQ2hpbGRNYXJrZXJzKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b3RhbCAgICAgICAgICA9IGNoaWxkcmVuLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNsdXN0ZXJNYXJrZXJzID0gXy5wbHVjayhjaGlsZHJlbiwgJ29wdGlvbnMnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50cyAgICAgICAgID0gXy5tYXAoXy5jb3VudEJ5KGNsdXN0ZXJNYXJrZXJzLCAndHlwZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoY291bnQsIHR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7J3R5cGUnOiB0eXBlLCAndmFsdWUnOiBjb3VudH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgciAgICAgICAgICAgICAgPSAyODtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0cm9rZVdpZHRoICAgID0gMTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGljb25EaW0gICAgICAgID0gKHIgKyBzdHJva2VXaWR0aCkgKiAyO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaHRtbCAgICAgICAgICAgPSBjcmVhdGVQaWVDaGFydChcbiAgICAgICAgICAgICAgICAgICAgICAgIHtkYXRhOiBjb3VudHMsIHI6IHIsIHN0cm9rZVdpZHRoOiBzdHJva2VXaWR0aCwgY291bnQ6IHRvdGFsfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTC5EaXZJY29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgICAgIDogaHRtbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ21hcmtlci1jbHVzdGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb25TaXplIDogbmV3IEwucG9pbnQoaWNvbkRpbSwgaWNvbkRpbSlcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBtYXJrZXJJY29uICA9IHtcbiAgICAgICAgICAgICAgICAgICAgJ05vbi1Qcm9maXQnOiBMLmljb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblVybCA6ICdpbWcvbWFya2VyLW5vbnByb2Yuc3ZnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TaXplOiBbNjAsIDYwXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgJ0Zvci1Qcm9maXQnOiBMLmljb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblVybCA6ICdpbWcvbWFya2VyLXByb2Yuc3ZnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TaXplOiBbNjAsIDYwXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgJ0luZGl2aWR1YWwnOiBMLmljb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblVybCA6ICdpbWcvbWFya2VyLWluZC5zdmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblNpemU6IFs2MCwgNjBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAnR292ZXJubWVudCc6IEwuaWNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uVXJsIDogJ2ltZy9tYXJrZXItZ292LnN2ZycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZTogWzYwLCA2MF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgdmFyIG1hcmtlcnMgPSBMLm1hcmtlckNsdXN0ZXJHcm91cCh7XG5cbiAgICAgICAgICAgICAgICAgICAgc3BpZGVyZnlPbk1heFpvb206IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHNob3dDb3ZlcmFnZU9uSG92ZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpY29uQ3JlYXRlRnVuY3Rpb246IGNsdXN0ZXJJY29uLFxuICAgICAgICAgICAgICAgICAgICBtYXhDbHVzdGVyUmFkaXVzOiAzMCxcbiAgICAgICAgICAgICAgICAgICAgc3BpZGVyZnlEaXN0YW5jZU11bHRpcGxpZXI6IDEuM1xuICAgICAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBvdXRlckxvb3AoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGlubmVyTG9vcChsb2MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghXy5ldmVyeShsb2MuY29vcmRpbmF0ZXMpKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jLmNvb3JkaW5hdGVzWzBdLnRvRml4ZWQoNSkgPT09ICc0MC43ODIwMCcgJiYgbG9jLmNvb3JkaW5hdGVzWzFdLnRvRml4ZWQoNSkgPT09ICctNzMuODMxNzAnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jLmNvb3JkaW5hdGVzWzBdID0gNDAuNzcwNjU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jLmNvb3JkaW5hdGVzWzFdID0gLTczLjk3NDA2O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSBMLm1hcmtlcihsb2MuY29vcmRpbmF0ZXMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBtYXJrZXJJY29uW2VudGl0eS50eXBlXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGl0bGUnOiBlbnRpdHkubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZW50aXR5X2lkJzogZW50aXR5LmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtZXNzYWdlJzogZW50aXR5Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiBlbnRpdHkudHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzLmFkZExheWVyKG0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgXy5mb3JFYWNoKGVudGl0eS5sb2NhdGlvbnMsIGlubmVyTG9vcCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJPcmlnaW5hbDogJU9cIiwgJHNjb3BlLmVudGl0aWVzKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZpbHRlcmVkOiAlT1wiLCBmaWx0ZXJlZEVudGl0aWVzKTtcblxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChmaWx0ZXJlZEVudGl0aWVzLCBvdXRlckxvb3ApO1xuICAgICAgICAgICAgICAgIG1hcC5hZGRMYXllcihtYXJrZXJzKTtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9uTG9jYXRpb25FcnJvcihsZWFmbGV0RXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihsZWFmbGV0RXJyb3IubWVzc2FnZSArIFwiICAlT1wiLCBsZWFmbGV0RXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG1hcC5vbignbG9jYXRpb25lcnJvcicsIG9uTG9jYXRpb25FcnJvcik7XG4gICAgICAgICAgICAgICAgLy8gbWFwLmxvY2F0ZSh7c2V0VmlldzogdHJ1ZSwgbWF4Wm9vbTogMTF9KTtcbiAgICAgICAgICAgICAgICBtYXJrZXJzLm9uKCdjbGljaycsIGZ1bmN0aW9uIChtYXJrZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNldEVudGl0eUlEKG1hcmtlci5sYXllci5vcHRpb25zLmVudGl0eV9pZCk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9ICRzY29wZS5jdXJyZW50RW50aXR5O1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbnRlcmFjdGVkICAgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnNldHRpbmdzRW5hYmxlZCAmJiAkc2NvcGUubW9iaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudG9nZ2xlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBtYXAub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbnRlcmFjdGVkICAgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLiRvbignc2VsZWN0SXRlbScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gJHNjb3BlLmN1cnJlbnRFbnRpdHkubG9jYXRpb25zLmxlbmd0aCA+IDAgPyBfLnBsdWNrKFxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRFbnRpdHkubG9jYXRpb25zLCAnY29vcmRpbmF0ZXMnKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb29yZGluYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXAuc2V0Vmlldyhjb29yZGluYXRlc1swXSwgMTEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcblxuICAgICAgICAuY29udHJvbGxlcignbWFwQ3RybCcsIGRlcGVuZGVuY2llcyk7XG59KShhbmd1bGFyLCBkMywgTCk7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIGRldGFpbHNDdHJsKCRzY29wZSwgXykge1xuICAgICAgICAkc2NvcGUuaXRlbXNTaG93bkRlZmF1bHQgPSB7XG4gICAgICAgICAgICAna2V5X3Blb3BsZSc6IDMsXG4gICAgICAgICAgICAnZ3JhbnRzX2dpdmVuJzogMyxcbiAgICAgICAgICAgICdncmFudHNfcmVjZWl2ZWQnOiAzLFxuICAgICAgICAgICAgJ2ludmVzdG1lbnRzX21hZGUnOiAzLFxuICAgICAgICAgICAgJ2ludmVzdG1lbnRzX3JlY2VpdmVkJzogMyxcbiAgICAgICAgICAgICdjb2xsYWJvcmF0aW9ucyc6IDMsXG4gICAgICAgICAgICAnZW1wbG95bWVudHMnOiAzLFxuICAgICAgICAgICAgJ3JlbGF0aW9ucyc6IDMsXG4gICAgICAgICAgICAnZGF0YV9naXZlbic6IDMsXG4gICAgICAgICAgICAnZGF0YV9yZWNlaXZlZCc6IDMsXG4gICAgICAgICAgICAncmV2ZW51ZXMnOiAzLFxuICAgICAgICAgICAgJ2V4cGVuc2VzJzogM1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5pdGVtc1Nob3duID0gXy5jbG9uZSgkc2NvcGUuaXRlbXNTaG93bkRlZmF1bHQpO1xuXG4gICAgICAgICRzY29wZS4kb24oJ2VudGl0eUNoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIFJlc2V0IGl0ZW1zIHNob3duIGluIGRldGFpbHMgbGlzdC5cbiAgICAgICAgICAgICRzY29wZS5pdGVtc1Nob3duID0gXy5jbG9uZSgkc2NvcGUuaXRlbXNTaG93bkRlZmF1bHQpO1xuICAgICAgICB9KTtcbiAgICAgICAgJHNjb3BlLnNob3dNb3JlID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICRzY29wZS5pdGVtc1Nob3duW3R5cGVdID0gJHNjb3BlLmN1cnJlbnRFbnRpdHlbdHlwZV0ubGVuZ3RoO1xuICAgICAgICB9O1xuICAgICAgICAkc2NvcGUuc2hvd0xlc3MgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgJHNjb3BlLml0ZW1zU2hvd25bdHlwZV0gPSAkc2NvcGUuaXRlbXNTaG93bkRlZmF1bHRbdHlwZV07XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ2RldGFpbHNDdHJsJywgWyckc2NvcGUnLCBcIl9cIiwgZGV0YWlsc0N0cmxdKTtcbn0pKGFuZ3VsYXIpO1xuIl19
