!function(i){"use strict";var c=["ui.bootstrap","leaflet-directive","ngAnimate","templateCache","civic-graph.util","civic-graph.api","civic-graph.network"],a=["civic-graph.util"],r=["civic-graph.util","civic-graph.api"];i.module("civic-graph.util",[]),i.module("civic-graph.api",a),i.module("civic-graph.network",r),i.module("civic-graph",c)}(angular);
!function(t){"use strict";function a(){return{templateUrl:"js/analytic/analytics.html",restrict:"E",scope:{},controller:"analyticsCtrl"}}var c=[a];t.module("civic-graph").directive("analytics",c)}(angular);
!function(e){"use strict";function t(e,t){function i(e){var i=t.getPropertyFromObj(e);this.id=i("id"),this.name=i("name"),this.enabled=i("enable",!0)}function n(e){return new i(e)}function r(){return e.get("/categories")}return{getCategoryModel:n,getAll:r}}t.$inject=["cgApiCaller","cgUtilService"],e.module("civic-graph.api").factory("categoryService",t)}(angular);
!function(t){"use strict";function n(){return o}function i(t,i){function o(t){var n=i.getPropertyFromObj(t);this.id=n("id"),this.name=n("name"),this.details=n("details"),this.entity=n("entity"),this.entity_id=n("entity_id")}function c(t){return new o(t)}function r(){return t.get(e)}return{getAll:r,getConnectionTypes:n,getConnectionModel:c}}var e="/connections",o={Funding:!0,Data:!0,Employment:!0,Collaboration:!0};i.$inject=["cgApiCaller","cgUtilService"],t.module("civic-graph.api").factory("connectionService",i)}(angular);
!function(i){"use strict";function n(i){function n(n){var t=i.getPropertyFromObj(n);this.id=t("id"),this.year=t("year"),this.amount=t("amount",0)}function t(i){return new n(i)}return{getFinanceModel:t}}n.$inject=["cgUtilService"],i.module("civic-graph.api").factory("financeService",n)}(angular);
!function(n){"use strict";function t(n){function t(t){var i=n.getPropertyFromObj(t);this.id=i("id"),this.year=i("year"),this.amount=i("amount"),this.entity=i("entity","")}function i(n){return new t(n)}return{getFundingConnectionModel:i}}t.$inject=["cgUtilService"],n.module("civic-graph.api").factory("fundingConnectionService",t)}(angular);
!function(e){"use strict";function t(e,t){var n=this;n.isLoading=!0,n.getCurrentView=t.getCurrentView,n.isMobile=t.mobileCheck(),e.$on("cg.data-loaded",function(){n.isLoading=!1})}function n(){return{restrict:"E",templateUrl:"js/centralColumn/centralColumn.template.html",controller:t,controllerAs:"central",scope:{}}}t.$inject=["$scope","cgMainService"],e.module("civic-graph").directive("centralColumn",n)}(angular,d3);
!function(e){"use strict";e.module("civic-graph").directive("input",function(){return{restict:"E",require:"?ngModel",link:function(e,r,t,i){"type"in t&&"range"===t.type.toLowerCase()&&i.$parsers.push(parseFloat)}}})}(angular);
!function(e){"use strict";function n(e,n,t,o,i,c,r){var l=this;l.entityTypes=c.getEntityTypes(),l.connectionTypes=r.getConnectionTypes(),l.currentView=o.getCurrentView(),l.sizeBy=i.sizeBy(),l.minConnection=i.minConnection(),l.sizeByList=[{name:"Employees",value:"employees"},{name:"Twitter Followers",value:"followers"}],l.changeMinConnection=function(){i.minConnection(l.minConnection)},l.changeView=function(){o.setCurrentView(l.currentView)},l.showAbout=function(){n.open({animation:!1,templateUrl:"control/about.html",controller:"modalCtrl"})},l.toggleLink=function(n){e.$broadcast("toggleLink",{name:n,enabled:l.connectionTypes[n]})},l.changeSizeBy=function(){i.sizeBy(l.sizeBy)}}function t(){return{templateUrl:"js/control/control.template.html",restrict:"E",scope:{toggleNetwork:"="},controller:n,controllerAs:"control",bindToController:!0}}n.$inject=["$rootScope","$uibModal","_","cgMainService","cgNetworkService","entityService","connectionService"],e.module("civic-graph").directive("control",t)}(angular);
!function(e){"use strict";function t(){return{key_people:3,grants_given:3,grants_received:3,investments_made:3,investments_received:3,collaborations:3,employments:3,relations:3,data_given:3,data_received:3,revenues:3,expenses:3}}function n(e,n){function i(t){e.$emit("cg.start-edit",t)}function o(t){e.itemsShown[t]=n.getCurrentEntity()[t].length}function s(t){e.itemsShown[t]=e.itemsShownDefault[t]}function r(n){e.currentEntity=n,e.itemsShown=t()}e.isMobile=n.mobileCheck(),e.itemsShownDefault=t(),e.itemsShown=t(),e.emitStartEditEvent=i,e.showMore=o,e.showLess=s,e.$on("cg.current-entity.update",function(e,t){r(t)})}n.$inject=["$scope","cgMainService"],e.module("civic-graph").controller("detailsCtrl",n)}(angular);
!function(e){"use strict";function t(t,i,n,o,s,r,c,d,a){function u(e){return i.jsonp("https://dev.virtualearth.net/REST/v1/Locations",{params:{query:e,key:"Ai58581yC-Sr7mcFbYTtUkS3ixE7f6ZuJnbFJCVI4hAtW1XoDEeZyidQz2gLCCyD",jsonp:"JSON_CALLBACK",include:"ciso2"}}).then(function(e){if(a.isDefined(e.data.resourceSets)&&e.data.resourceSets.length>0)return e.data.resourceSets[0].resources})}function l(e){if(0===t.editEntity.categories.length)t.editEntity.categories.push(e);else{var i=!1;for(var n in t.editEntity.categories)if(t.editEntity.categories.hasOwnProperty(n)){var o=t.editEntity.categories[n];if(o.id===e.id){i=!0,o.enabled=e.enabled;break}}i||t.editEntity.categories.push(e)}}function y(e,t){u(e.formattedAddress).then(function(i){if(a.isDefined(i[0])){var n=i[0],o=n.address,s=n.point;f(t),e.address_line=a.isDefined(o.addressLine)?o.addressLine:"",e.locality=a.isDefined(o.locality)?o.locality:"",e.district=a.isDefined(o.adminDistrict)?o.adminDistrict:"",e.country=a.isDefined(o.countryRegion)?o.countryRegion:null,e.country_code=a.isDefined(o.countryRegionIso2)?o.countryRegionIso2:"",e.coordinates=a.isDefined(s.coordinates)?s.coordinates:null,e.postal_code=a.isDefined(o.postalCode)?o.postalCode:null}})}function f(e){e&&t.editEntity.locations.push(d.getLocationModel())}function g(){o.some(t.editEntity.key_people,{name:"",id:null})||t.editEntity.key_people.push({name:"",id:null})}function p(e,t){t.entity_id=e.id}function E(e){o.some(e,{entity:""})||e.push({entity:"",amount:null,year:null,id:null})}function h(e,t){t.entity_id=e.id}function v(e){o.some(e,{entity:"",id:null})||e.push({entity:"",id:null,details:null})}function m(e){o.every(e,function(e){return e.amount>0&&e.year>1750})&&e.push({amount:null,year:null,id:null})}function S(){function e(e){t.isSaving=!1,t.$emit("editEntitySuccess",e),D()}function i(){t.isError=!0,n(function(){t.isError=!1},2e3)}t.isSaving=!0,r.saveEntity(t.editEntity.generateDBModel()).then(e,i)}function D(){t.isOpen=!1}function C(i,n){e.equals(i,n)||(t.editEntity=r.getEntityModel(i),t.categories=e.copy(_),L(),t.isEditing=a.isDefined(t.editEntity.id))}function L(){var e,i,n,o;for(i in t.categories)if(t.categories.hasOwnProperty(i)){e=t.categories[i];for(n in t.editEntity.categories)t.editEntity.categories.hasOwnProperty(n)&&(o=t.editEntity.categories[n],e.id===o.id&&(e.enabled=o.enabled))}}var _;t.isEditing=!1,t.entities=s.getEntityList(),t.editEntity=r.getEntityModel(s.getCurrentEntity()),t.entityTypes=r.getEntityTypes(),t.influenceTypes=r.getInfluenceTypes(),t.categories=[],t.addressSearch=u,t.toggleCategory=l,t.setLocation=y,t.addLocation=f,t.addKeyPerson=g,t.setFundingConnection=p,t.addFundingConnection=E,t.setConnection=h,t.addConnection=v,t.addFinance=m,t.save=S,t.cancelEdit=D,t.$watch("entity",C),c.getAll().then(function(i){_=i.categories,t.categories=e.copy(_)})}function i(){return{restrict:"E",templateUrl:"js/edit-entity/editEntity.template.html",controller:t,scope:{isOpen:"="}}}t.$inject=["$scope","$http","$timeout","_","cgMainService","entityService","categoryService","locationService","cgUtilService"],e.module("civic-graph").directive("editEntity",i)}(angular);
!function(i,t){"use strict";function s(i){function s(){var i=t(this);i.css("height","55vh")}function c(){var i=t(this);window.innerHeight/3>parseInt(i.css("height"))?i.css("height","55vh"):i.css("height","30vh")}var e;i.mobile&&(e=t("#details-panel"),e.css("height","30vh"),e.scrollTop(0),e.scroll(s),e.click(c))}function c(){return{restrict:"A",link:s}}i.module("civic-graph").directive("addMobileEvents",[c])}(angular,$);
!function(o){"use strict";function c(o,c){o.closeWindow=function(){c.close()}}o.module("civic-graph").controller("modalCtrl",["$scope","$modalInstance",c])}(angular);
!function(o){"use strict";o.module("civic-graph").constant("_",window._).config(["$locationProvider","$compileProvider",function(o,n){o.html5Mode(!0),n.debugInfoEnabled(!0)}]).filter("thousandSuffix",function(){return function(o,n){var t,i=["k","M","G","T","P","E"];return window.isNaN(o)?null:o<1e3?o:(t=Math.floor(Math.log(o)/Math.log(1e3)),(o/Math.pow(1e3,t)).toFixed(n)+i[t-1])}})}(angular);
!function(t){"use strict";function e(t,e,n,s,i,c,o){function r(t){return e(function(e){setTimeout(e,t)})}function a(e){switch(e){case"search":i.setIsEdit(!1),t.settingsEnabled=!1;break;case"settings":i.setIsEdit(!1),t.showsearchMB=!1;break;case"edit":t.settingsEnabled=!1,t.showsearchMB=!1;break;default:i.setIsEdit(!1),t.settingsEnabled=!1,t.showsearchMB=!1}}function u(){a("search"),t.showsearchMB=!t.showsearchMB,t.status.license=!1}function d(){a("settings"),t.settingsEnabled=!t.settingsEnabled}function l(t){i.setCurrentEntity(t),S.isMobile&&a("edit"),i.setIsEdit(!0)}function h(){t.status.isNetworkShown=!t.status.isNetworkShown,t.status.isNetworkShown&&t.$broadcast("triggerNetworkDraw")}function g(t){i.setCurrentEntity(t),S.isEdit()&&b()}function E(t){g(n.find(i.getEntityList(),{id:t}))}function w(t){(s.isObject(t)?g:E)(t)}function f(e){t.entities=e}function b(){i.setIsEdit(!1)}function y(e){f(e.nodes),t.$broadcast("triggerNetworkDraw")}function k(t){S.currentEntity=t}var S=this;S.currentEntity=null,S.isMobile=i.mobileCheck(),S.isEdit=i.getIsEdit,t.searchItems=null,t.clickedEntity={entity:null},t.showsearchMB=!1,t.status={isNetworkShown:!0,license:!0,networkLoading:!0},t.settingsEnabled=!S.isMobile,t.showSearch=u,t.toggleSettings=d,t.startEdit=l,t.switchView=h,t.setEntity=g,t.setEntityID=E,t.selectItem=w,t.$on("cg.current-entity.update",function(t,e){k(e)}),t.$on("editEntitySuccess",y),t.$on("cg.start-edit",l),r(1e3).then(function(){return e.all([c.getAll(),o.getAll()])}).then(function(e){i.setEntityList(e[0].nodes),t.searchItems=e[0].nodes,i.setConnectionObj(e[1].connections),t.$broadcast("cg.data-loaded")})}e.$inject=["$scope","$q","_","cgUtilService","cgMainService","entityService","connectionService"],t.module("civic-graph").controller("homeCtrl",e)}(angular);
!function(i){"use strict";function t(i,t,e,n){function o(){return console.log("Current Entity in Service was called"),w}function a(t){e.isEqual(w,t)||(w=t,i.$broadcast("cg.current-entity.update",w))}function r(){var i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series([46])0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,e=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br([ev])w|bumb|bw-([nu])|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do([cp])o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly([-_])|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-([mpt])|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c([- _agpst])|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac([ -\/])|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja([tv])a|jbro|jemu|jigs|kddi|keji|kgt([ \/])|klon|kpt |kwc-|kyo([ck])|le(no|xi)|lg( g|\/([klu])|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t([- ov])|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30([02])|n50([025])|n7(0([01])|10)|ne(([cm])-|on|tf|wf|wg|wt)|nok([6i])|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan([adt])|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c([-01])|47|mc|nd|ri)|sgh-|shar|sie([-m])|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel([im])|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c([- ])|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i,n=t.navigator.userAgent||t.navigator.vendor||t.opera;return i.test(n)||e.test(n.substr(0,4))}function c(){return f}function s(i){Array.isArray(i)&&(f=i)}function m(){return y}function l(i){n.isObject(i)&&(y=i)}function p(){return h}function u(i){n.isString(i)&&k.includes(i)&&(h=i)}function d(){return v}function g(i){v=!!i}var b=this,w=null,v=!1,k=["network","map"],h="network",f=[],y={};b.getCurrentEntity=o,b.setCurrentEntity=a,b.mobileCheck=r,b.getEntityList=c,b.setEntityList=s,b.getConnectionObj=m,b.setConnectionObj=l,b.getCurrentView=p,b.setCurrentView=u,b.getIsEdit=d,b.setIsEdit=g}t.$inject=["$rootScope","$window","_","cgUtilService"],i.module("civic-graph").service("cgMainService",t)}(angular);
!function(t){"use strict";function e(t,e){return function(n){return n[t]===e}}function n(t,n,i){function r(t){i.setCurrentEntity(t)}function c(){t.categorizedEntities=Object.keys(u).reduce(function(t,n){var r={};return r[n]=i.getEntityList().filter(e("type",n)),Object.assign({},t,r)},{})}var u=n.getEntityTypes();t.categorizedEntities={},t.updateCurrentEntity=r,t.$watch(i.getEntityList,c)}n.$inject=["$scope","entityService","cgMainService"],t.module("civic-graph").controller("overviewCtrl",n)}(angular);
!function(r){"use strict";function n(r){return!("undefined"==typeof r||null===r)}function t(r){return n(r)&&!Array.isArray(r)&&"object"==typeof r}function i(r){return n(r)&&"string"==typeof r}function e(r){var i=t(r)?r:{};return function(r,t){var e=n(t)?t:null;return n(i[r])?i[r]:e}}function u(r,n){var i=Array.isArray(r)?r.filter(t).map(n):[];return i.concat([n()])}function o(){return{isDefined:n,isObject:t,isString:i,getPropertyFromObj:e,loopAndInit:u}}r.module("civic-graph.util").factory("cgUtilService",o)}(angular);
!function(c){"use strict";function n(c){}c.module("civic-graph").controller("analyticsCtrl",["$scope",n])}(angular);
!function(t){"use strict";function e(t){t.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}e.$inject=["$httpProvider"],t.module("civic-graph.api").config(e)}(angular);
!function(t){"use strict";function r(t,r){function a(t){return console.error("Recieved an error from API with this message: %O",t.data),r.reject(t)}function i(t){return t.data}function c(r,c){return t.get(e+r,{params:c,headers:n}).then(i,a)}function o(r,c){return t.post(e+r,c,{headers:n}).then(i,a)}return{get:c,post:o}}var e="https://api.civicgraph.io/api",n={};r.$inject=["$http","$q"],t.module("civic-graph.api").factory("cgApiCaller",r)}(angular);
!function(e){"use strict";function i(e){function i(i){function t(){var t=e.isDefined(i)?i:{},o=e.isDefined(t.address_line)?t.address_line+" ":"",c=e.isDefined(t.locality)?t.locality+", ":"",n=e.isDefined(t.country_code)?t.country_code+" ":"",r=e.isDefined(t.postal_code)?t.postal_code:"";return(o+c+n+r).trim()}var o=this,c=e.getPropertyFromObj(i);o.id=c("id"),o.address_line=c("address_line"),o.locality=c("locality"),o.district=c("district"),o.postal_code=c("postal_code"),o.country=c("country"),o.country_code=c("country_code"),o.coordinates=c("coordinates"),o.formattedAddress=t()}function t(e){return new i(e)}return{getLocationModel:t}}i.$inject=["cgUtilService"],e.module("civic-graph.api").factory("locationService",i)}(angular);
!function(e){"use strict";function n(){return["Local","National","Global"]}function o(e,o,i,p,r,a,c){function l(e){function n(){var e=new l(t);return e.locations.pop(),e.locations.pop(),e.grants_received.pop(),e.grants_received.pop(),e.grants_given.pop(),e.grants_given.pop(),e.investments_received.pop(),e.investments_received.pop(),e.investments_made.pop(),e.investments_made.pop(),e.data_given.pop(),e.data_given.pop(),e.data_received.pop(),e.data_received.pop(),e.collaborations.pop(),e.collaborations.pop(),e.key_people.pop(),e.key_people.pop(),e.employments.pop(),e.employments.pop(),e.revenues.pop(),e.revenues.pop(),e.expenses.pop(),e.expenses.pop(),e.categories.pop(),e.categories.pop(),e.description="",e}var t=this,d=c.isDefined(e)?e:{},s=c.getPropertyFromObj(e);t.id=s("id"),t.name=s("name"),t.influence=s("influence"),t.type=s("type"),t.nickname=s("nickname"),t.url=s("url"),t.twitter_handle=s("twitter_handle"),t.employees=s("employees"),t.locations=c.loopAndInit(d.locations,r.getLocationModel),t.grants_received=c.loopAndInit(d.grants_received,o.getFundingConnectionModel),t.investments_received=c.loopAndInit(d.investments_received,o.getFundingConnectionModel),t.grants_given=c.loopAndInit(d.grants_given,o.getFundingConnectionModel),t.investments_made=c.loopAndInit(d.investments_made,o.getFundingConnectionModel),t.data_given=c.loopAndInit(d.data_given,i.getConnectionModel),t.data_received=c.loopAndInit(d.data_received,i.getConnectionModel),t.collaborations=c.loopAndInit(d.collaborations,i.getConnectionModel),t.key_people=c.loopAndInit(d.key_people,i.getConnectionModel),t.employments=c.loopAndInit(d.employments,i.getConnectionModel),t.revenues=c.loopAndInit(d.revenues,p.getFinanceModel),t.expenses=c.loopAndInit(d.expenses,p.getFinanceModel),t.categories=c.loopAndInit(d.categories,a.getCategoryModel),t.generateDBModel=n}function d(e){return new l(e)}function s(){return e.get("/entities")}function g(n){return e.post("/save",{entity:n})}return{getEntityModel:d,getInfluenceTypes:n,getAll:s,saveEntity:g,getEntityTypes:function(){return t}}}var t={Government:!0,"For-Profit":!0,"Non-Profit":!0,Individual:!0};o.$inject=["cgApiCaller","fundingConnectionService","connectionService","financeService","locationService","categoryService","cgUtilService"],e.module("civic-graph.api").factory("entityService",o)}(angular);
!function(t,e,o){"use strict";function r(t,r,n,i){function a(){t.options={center:{lat:20,lng:-40,zoom:3},defaults:{tileLayer:"https://api.tiles.mapbox.com/v4/mapbox.light/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZGF2aWRscm50IiwiYSI6IjA0M2RkNzMzZWJmNzEzNGYzMTdhYTExYzAyZmU4ZTE1In0.TNYlFta2VItrkn4L0Z9BJQ",tileLayerOptions:{detectRetina:!0,reuseTiles:!1},zoomControl:!1,attributionControl:!1}},n.getMap().then(s)}function c(t){var o=t.data,r=e.layout.pie().sort(null).value(function(t){return t.value}),n=e.svg.arc().outerRadius(t.r).innerRadius(t.r-10),i=t.r+t.strokeWidth,a=2*i,c=a,s=document.createElementNS(e.ns.prefix.svg,"svg"),l=e.select(s).data(o).attr("class","piechart").attr("width",a).attr("height",c),d=l.selectAll(".arc").data(r(o)).enter().append("g").attr("class","arc").attr("transform","translate("+i+","+i+")");return d.append("path").attr("d",n).attr("class",function(t){return t.data.type+"-arc"}),d.append("svg:text").text(function(e,o){if(0===o)return t.count}).attr("x",-4*t.count.toString().length).attr("dy",5).attr("class","arcText"),window.XMLSerializer?(new window.XMLSerializer).serializeToString(s):s.xml?s.xml:""}function s(t){function e(t){var e=t.getAllChildMarkers(),n=e.length,i=r.pluck(e,"options"),a=r.map(r.countBy(i,"type"),function(t,e){return{type:e,value:t}}),s=28,l=1,d=2*(s+l),u=c({data:a,r:s,strokeWidth:l,count:n});return new o.DivIcon({html:u,className:"marker-cluster",iconSize:new o.point(d,d)})}function n(t){function e(e){if(r.every(e.coordinates)){"40.78200"===e.coordinates[0].toFixed(5)&&"-73.83170"===e.coordinates[1].toFixed(5)&&(e.coordinates[0]=40.77065,e.coordinates[1]=-73.97406);var n=o.marker(e.coordinates,{icon:l[t.type],title:t.name,entity_id:t.id,message:t.name,type:t.type});d.addLayer(n)}}r.forEach(t.locations,e)}function a(t){console.error(t.message+"  %O",t)}var s=i.getEntityList();t.invalidateSize(),new o.Control.Zoom({position:"topright"}).addTo(t),new o.Control.Locate({position:"topright",showPopup:!1,icon:"fa fa-location-arrow"}).addTo(t);var l={"Non-Profit":o.icon({iconUrl:"img/marker-nonprof.svg",iconSize:[60,60]}),"For-Profit":o.icon({iconUrl:"img/marker-prof.svg",iconSize:[60,60]}),Individual:o.icon({iconUrl:"img/marker-ind.svg",iconSize:[60,60]}),Government:o.icon({iconUrl:"img/marker-gov.svg",iconSize:[60,60]})},d=o.markerClusterGroup({spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,iconCreateFunction:e,maxClusterRadius:30,spiderfyDistanceMultiplier:1.3});r.forEach(s,n),t.addLayer(d),t.on("locationerror",a)}a(),t.$on("cg.data-loaded",a)}function n(){return{restrict:"E",templateUrl:"js/component/map/map.template.html",controller:r}}r.$inject=["$scope","_","leafletData","cgMainService"],t.module("civic-graph").directive("cgMap",n)}(angular,d3,L);
!function(n,t){"use strict";function e(n){return a(n.select("svg"))&&n.select("svg").remove(),n.append("svg").attr("height","100vh").attr("width","100%")}function r(n){return function(e){function r(t){var e=t.value[n];return isFinite(e)&&a(e)?e:0}var i=10,u=50,c=t.max(e,r);return function(e){return t.scale.sqrt().domain([5,c]).range([i,u])(e.value[n])}}}function i(n){function t(n){return n/3}function e(n){return n-t(n)}return{Individual:{x:t(n.width),y:t(n.height)},"For-Profit":{x:t(n.width),y:e(n.height)},"Non-Profit":{x:e(n.width),y:t(n.height)},Government:{x:e(n.width),y:e(n.height)}}}function u(n){return function(t){var e=r(n)(t);return function(t){return a(t.value[n])?-2*e(t):-20}}}function c(n){return function(){return n()}}function o(o,f,s,d,l){function g(g,h){function v(){function t(){return n.element(o)[0].innerWidth}function e(){return n.element(o)[0].innerHeight}return[e(),t()]}function p(){g.$apply()}function y(n,t){n!==t&&(E&&E(),m(l.getGraphData()))}function x(n){a(n)&&(k=r(n),w=u(n))}function m(n){function r(t){n.nodeList.map(function(n){return n.value}).filter(function(n){return f.isEqual(t,n)}).forEach(o)}function u(n,e){return t.layout.force().size([e.width,e.height]).nodes(n.nodeList).links(n.linkList).linkStrength(0).linkDistance(50).charge(D).start()}function c(n){function e(n){return a(n)?m(n):i}function r(n){function e(){s.isDefined(t.event)&&(t.event.preventDefault(),t.event.stopPropagation()),n.selected=!0,l(n)}g.$apply(e)}var i=10,u=y.selectAll(".node").data(n).enter().append("g").attr("class",function(n){return"node "+n.value.type+"-node"}).on("click",r).call(C.drag);return u.append("circle").attr("r",e),u.append("text").text(function(n){return a(n.value.nickname)?n.value.nickname:n.value.name}).attr("dx",function(){return-.065*this.getComputedTextLength()/2+"em"}).attr("dy",function(){return.08*this.parentNode.getBBox().height/2+.5+"em"}),u}function o(t){function e(n){return function(t){return n.source===t.index||n.target===t.index}}function r(t){return function(r){return t.index===r.index||s.isDefined(n.linkList.find(e(t)))}}G.classed("focused",r(t)).classed("unfocused",f.negate(r(t))),B.classed("focused",e(t)).classed("unfocused",f.negate(e))}function l(n){if(s.isDefined(d.getCurrentEntity())){if(f.isEqual(d.getCurrentEntity(),n.value))return;v(n)}d.setCurrentEntity(n.value),o(n)}function h(){s.isDefined(d.getCurrentEntity())&&(v(),d.setCurrentEntity(null))}function v(t){G.classed("focused",!1).classed("unfocused",!1),B.classed("focused",!1).classed("unfocused",!1),s.isDefined(t)?t.fixed=!1:n.nodeList.forEach(function(n){n.fixed=!1}),s.isDefined(d.getCurrentEntity())&&C.resume()}function p(n){function t(n){function t(n){return e[n.target.id]||e[n.target.id]&&null!==e[n.target.id].find(function(t){return t===n.source.id})}var e=n.map(function(n){return{source:n.source.id,target:n.target.id}}).reduce(function(n,t){return n[t.source]?n[t.source].push(t.target):n[t.source]=[t.target],n},{});return n.filter(t)}var e=t(n);return y.selectAll(".link").data(e).enter().append("line").attr("class",function(n){return"link "+n.type+"-link "})}var y=e(L);if(y.on("click",function(){g.$apply(h)}),0===n.nodeList.length)return void console.debug("Node list is empty, not drawing a graph");var x=y.node().getBoundingClientRect(),m=k(n.nodeList),D=w(n.nodeList),$=i(x),C=u(n,x),B=p(n.linkList),G=c(n.nodeList);C.on("tick",function(t){function e(){var e=.1*t.alpha;B.attr("x1",function(n){return n.source.x}).attr("y1",function(n){return n.source.y}).attr("x2",function(n){return n.target.x}).attr("y2",function(n){return n.target.y}),n.nodeList.forEach(function(n){n.y+=($[n.value.type].y-n.y)*e,n.x+=($[n.value.type].x-n.x)*e}),G.attr("transform",function(n){return"translate("+n.x+","+n.y+")"})}g.$apply(e)}),E=g.$on("cg.current-entity.update",function(n,t){r(t)})}var k,w,E,L=t.select(h[0]);o.onresize=f.debounce(p),g.$watch(c(l.sizeBy),x),g.$watchGroup([c(l.minConnection),c(l.sizeBy)],y),g.$watchCollection(f.debounce(v),y),g.$watch(l.getGraphData,y,!0)}return a=s.isDefined,{restrict:"E",link:g}}var a;o.$inject=["$window","_","cgUtilService","cgMainService","cgNetworkService"],n.module("civic-graph.network").directive("cgNetworkGraph",o)}(angular,d3);
!function(n){"use strict";function t(n){return function(t){return n[t.type]}}function e(n){return function(t){return t.value.collaborations.length>=n}}function r(n){return{id:n.id,value:n}}function i(n){return function(t){return t.id===n}}function c(n,c,u,o){function f(t){return n.isString(t)&&(y=t),y}function a(n){return isFinite(n)&&n>=0&&(d=n),d}function s(n){return Array.isArray(n)?n.filter(t(u.getEntityTypes())).map(r).filter(e(d)):[]}function g(e,r){function c(t){var c=r[t];return c.map(function(n){var r=e.findIndex(i(n.source)),c=e.findIndex(i(n.target));return{source:r,target:c,type:t}}).filter(n.isDefined)}function u(t){function e(e){return n.isDefined(t[e])&&t[e]!==-1}return e("source")&&e("target")}function f(n,t){return n.concat(t)}return Object.keys(r).map(c).reduce(f,[]).filter(u).filter(t(o.getConnectionTypes()))}function l(){var n=c.getConnectionObj(),t=s(c.getEntityList());return{nodeList:t,linkList:g(t,n)}}var v=this,d=5,y="employees";v.getGraphData=l,v.sizeBy=f,v.minConnection=a}c.$inject=["cgUtilService","cgMainService","entityService","connectionService"],n.module("civic-graph.network").service("cgNetworkService",c)}(angular);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNpdmljLWdyYXBoLm1vZHVsZS5qcyIsImFuYWx5dGljL2FuYWx5dGljc0RpcmVjdGl2ZS5qcyIsImFwaS9jYXRlZ29yeS5zZXJ2aWNlLmpzIiwiYXBpL2Nvbm5lY3Rpb24uc2VydmljZS5qcyIsImFwaS9maW5hbmNlLnNlcnZpY2UuanMiLCJhcGkvZnVuZGluZ0Nvbm5lY3Rpb24uc2VydmljZS5qcyIsImNlbnRyYWxDb2x1bW4vaW5kZXguanMiLCJjZW50cmFsQ29sdW1uL3NsaWRlckJhci5qcyIsImNvbnRyb2wvY29udHJvbC5qcyIsImRldGFpbC9kZXRhaWxzQ3RybC5qcyIsImVkaXQtZW50aXR5L2VkaXRFbnRpdHkuanMiLCJleHRyYS9hZGRNb2JpbGVFdmVudHMuanMiLCJleHRyYS9tb2RhbEN0cmwuanMiLCJtYWluL2FwcC5qcyIsIm1haW4vaG9tZUN0cmwuanMiLCJtYWluL3NlcnZpY2UuanMiLCJvdmVydmlldy9vdmVydmlld0N0cmwuanMiLCJ1dGlsL3NlcnZpY2UuanMiLCJhbmFseXRpYy9jb250cm9sbGVyL2FuYWx5dGljc0N0cmwuanMiLCJhcGkvYXBpQ2FsbGVyL2NvbmZpZy5qcyIsImFwaS9hcGlDYWxsZXIvc2VydmljZS5qcyIsImFwaS9lbnRpdHkvbG9jYXRpb24uc2VydmljZS5qcyIsImFwaS9lbnRpdHkvc2VydmljZS5qcyIsImNvbXBvbmVudC9tYXAvbWFwLmpzIiwiY29tcG9uZW50L25ldHdvcmsvZ3JhcGguanMiLCJjb21wb25lbnQvbmV0d29yay9uZXR3b3JrLnNlcnZpY2UuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1haW5EZXBlbmRlbmN5TGlzdCIsImFwaURlcGVuZGVuY3lMaXN0IiwibmV0d29ya0RlcGVuZGVuY3lMaXN0IiwibW9kdWxlIiwiYW5hbHl0aWNzRGlyZWN0aXZlIiwidGVtcGxhdGVVcmwiLCJyZXN0cmljdCIsInNjb3BlIiwiY29udHJvbGxlciIsImFuYWx5dGljc0RlcGVuZGVuY2llcyIsImRpcmVjdGl2ZSIsIlNlcnZpY2UiLCJhcGlDYWxsZXIiLCJ1dGlscyIsIkNhdGVnb3J5Iiwib2JqIiwiZ2V0UHJvcGVydHkiLCJnZXRQcm9wZXJ0eUZyb21PYmoiLCJ0aGlzIiwiaWQiLCJuYW1lIiwiZW5hYmxlZCIsImdldENhdGVnb3J5TW9kZWwiLCJnZXRBbGwiLCJnZXQiLCIkaW5qZWN0IiwiZmFjdG9yeSIsImdldENvbm5lY3Rpb25UeXBlcyIsImNvbm5lY3Rpb25UeXBlT2JqIiwiQ29ubmVjdGlvbiIsImRldGFpbHMiLCJlbnRpdHkiLCJlbnRpdHlfaWQiLCJnZXRDb25uZWN0aW9uTW9kZWwiLCJ1cmwiLCJGdW5kaW5nIiwiRGF0YSIsIkVtcGxveW1lbnQiLCJDb2xsYWJvcmF0aW9uIiwiRmluYW5jZSIsInllYXIiLCJhbW91bnQiLCJnZXRGaW5hbmNlTW9kZWwiLCJGdW5kaW5nQ29ubmVjdGlvbiIsImdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwiLCJDb250cm9sbGVyIiwiY2dTZXJ2aWNlIiwidm0iLCJpc0xvYWRpbmciLCJnZXRDdXJyZW50VmlldyIsImlzTW9iaWxlIiwibW9iaWxlQ2hlY2siLCIkb24iLCJEaXJlY3RpdmUiLCJjb250cm9sbGVyQXMiLCJkMyIsInJlc3RpY3QiLCJyZXF1aXJlIiwibGluayIsImVsZW1lbnQiLCJhdHRycyIsIm5nTW9kZWwiLCJ0eXBlIiwidG9Mb3dlckNhc2UiLCIkcGFyc2VycyIsInB1c2giLCJwYXJzZUZsb2F0IiwiJHJvb3RTY29wZSIsIiRtb2RhbCIsIl8iLCJuZXR3b3JrU2VydmljZSIsImVudGl0eVNlcnZpY2UiLCJjb25uZWN0aW9uU2VydmljZSIsImVudGl0eVR5cGVzIiwiZ2V0RW50aXR5VHlwZXMiLCJjb25uZWN0aW9uVHlwZXMiLCJjdXJyZW50VmlldyIsInNpemVCeSIsIm1pbkNvbm5lY3Rpb24iLCJzaXplQnlMaXN0IiwidmFsdWUiLCJjaGFuZ2VNaW5Db25uZWN0aW9uIiwiY2hhbmdlVmlldyIsInNldEN1cnJlbnRWaWV3Iiwic2hvd0Fib3V0Iiwib3BlbiIsImFuaW1hdGlvbiIsInRvZ2dsZUxpbmsiLCIkYnJvYWRjYXN0IiwiY2hhbmdlU2l6ZUJ5IiwidG9nZ2xlTmV0d29yayIsImJpbmRUb0NvbnRyb2xsZXIiLCJnZXRJdGVtc1Nob3duRGVmYXVsdCIsImtleV9wZW9wbGUiLCJncmFudHNfZ2l2ZW4iLCJncmFudHNfcmVjZWl2ZWQiLCJpbnZlc3RtZW50c19tYWRlIiwiaW52ZXN0bWVudHNfcmVjZWl2ZWQiLCJjb2xsYWJvcmF0aW9ucyIsImVtcGxveW1lbnRzIiwicmVsYXRpb25zIiwiZGF0YV9naXZlbiIsImRhdGFfcmVjZWl2ZWQiLCJyZXZlbnVlcyIsImV4cGVuc2VzIiwiJHNjb3BlIiwiZW1pdFN0YXJ0RWRpdEV2ZW50IiwiJGVtaXQiLCJzaG93TW9yZSIsIml0ZW1zU2hvd24iLCJnZXRDdXJyZW50RW50aXR5IiwibGVuZ3RoIiwic2hvd0xlc3MiLCJpdGVtc1Nob3duRGVmYXVsdCIsIm9uQ3VycmVudEVudGl0eVVwZGF0ZSIsImN1cnJlbnRFbnRpdHkiLCJldmVudCIsImFyZ3MiLCIkaHR0cCIsIiR0aW1lb3V0IiwiY2F0ZWdvcnlTZXJ2aWNlIiwibG9jYXRpb25TZXJ2aWNlIiwiYWRkcmVzc1NlYXJjaCIsInNlYXJjaCIsImpzb25wIiwicGFyYW1zIiwicXVlcnkiLCJrZXkiLCJpbmNsdWRlIiwidGhlbiIsInJlc3BvbnNlIiwiaXNEZWZpbmVkIiwiZGF0YSIsInJlc291cmNlU2V0cyIsInJlc291cmNlcyIsInRvZ2dsZUNhdGVnb3J5IiwiY2F0ZWdvcnkiLCJlZGl0RW50aXR5IiwiY2F0ZWdvcmllcyIsImZvdW5kIiwiY2F0ZWdvcnlJbmRleCIsImhhc093blByb3BlcnR5IiwiZW50aXR5Q2F0ZWdvcnkiLCJzZXRMb2NhdGlvbiIsImxvY2F0aW9uIiwiaXNMYXN0IiwiZm9ybWF0dGVkQWRkcmVzcyIsImFwaUNhbGxSZXN1bHQiLCJyZXN1bHQiLCJhZGRyZXNzIiwicG9pbnQiLCJhZGRMb2NhdGlvbiIsImFkZHJlc3NfbGluZSIsImFkZHJlc3NMaW5lIiwibG9jYWxpdHkiLCJkaXN0cmljdCIsImFkbWluRGlzdHJpY3QiLCJjb3VudHJ5IiwiY291bnRyeVJlZ2lvbiIsImNvdW50cnlfY29kZSIsImNvdW50cnlSZWdpb25Jc28yIiwiY29vcmRpbmF0ZXMiLCJwb3N0YWxfY29kZSIsInBvc3RhbENvZGUiLCJsb2NhdGlvbnMiLCJnZXRMb2NhdGlvbk1vZGVsIiwiYWRkS2V5UGVyc29uIiwic29tZSIsInNldEZ1bmRpbmdDb25uZWN0aW9uIiwiZnVuZGluZyIsImFkZEZ1bmRpbmdDb25uZWN0aW9uIiwic2V0Q29ubmVjdGlvbiIsImNvbm5lY3Rpb24iLCJhZGRDb25uZWN0aW9uIiwiY29ubmVjdGlvbnMiLCJhZGRGaW5hbmNlIiwicmVjb3JkcyIsImV2ZXJ5IiwiciIsInNhdmUiLCJzdWNjZXNzIiwiaXNTYXZpbmciLCJjYW5jZWxFZGl0IiwiZXJyb3IiLCJpc0Vycm9yIiwic2F2ZUVudGl0eSIsImdlbmVyYXRlREJNb2RlbCIsImlzT3BlbiIsIndhdGNoRW50aXR5IiwibmV3VmFsIiwib2xkVmFsIiwiZXF1YWxzIiwiZ2V0RW50aXR5TW9kZWwiLCJjb3B5IiwiY2F0ZWdvcnlCYWNrdXAiLCJpbml0Q2F0ZWdvcnlBcnJheSIsImlzRWRpdGluZyIsImVudGl0eUNhdGVnb3J5SW5kZXgiLCJlbnRpdGllcyIsImdldEVudGl0eUxpc3QiLCJpbmZsdWVuY2VUeXBlcyIsImdldEluZmx1ZW5jZVR5cGVzIiwiJHdhdGNoIiwiJCIsImxpbmtGdW5jdGlvbiIsInNjcm9sbCIsInNlbGYiLCJjc3MiLCJjbGljayIsIndpbmRvdyIsImlubmVySGVpZ2h0IiwicGFyc2VJbnQiLCJkZXRhaWxzUGFuZWwiLCJtb2JpbGUiLCJzY3JvbGxUb3AiLCJhZGRNb2JpbGVFdmVudHMiLCJtb2RhbEN0cmwiLCIkbW9kYWxJbnN0YW5jZSIsImNsb3NlV2luZG93IiwiY2xvc2UiLCJjb25zdGFudCIsImNvbmZpZyIsIiRsb2NhdGlvblByb3ZpZGVyIiwiJGNvbXBpbGVQcm92aWRlciIsImh0bWw1TW9kZSIsImRlYnVnSW5mb0VuYWJsZWQiLCJmaWx0ZXIiLCJpbnB1dCIsImRlY2ltYWxzIiwiZXhwIiwic3VmZml4ZXMiLCJpc05hTiIsIk1hdGgiLCJmbG9vciIsImxvZyIsInBvdyIsInRvRml4ZWQiLCIkcSIsIndhaXQiLCJtcyIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiaHlkZVBhcnRpYWxzIiwiZXhjZXB0Iiwic2V0SXNFZGl0Iiwic2V0dGluZ3NFbmFibGVkIiwic2hvd3NlYXJjaE1CIiwic2hvd1NlYXJjaCIsInN0YXR1cyIsImxpY2Vuc2UiLCJ0b2dnbGVTZXR0aW5ncyIsInN0YXJ0RWRpdCIsInNldEN1cnJlbnRFbnRpdHkiLCJzd2l0Y2hWaWV3IiwiaXNOZXR3b3JrU2hvd24iLCJzZXRFbnRpdHkiLCJpc0VkaXQiLCJzdG9wRWRpdCIsInNldEVudGl0eUlEIiwiZmluZCIsInNlbGVjdEl0ZW0iLCJpdGVtIiwiaXNPYmplY3QiLCJzZXRFbnRpdGllcyIsIm9uRWRpdEVudGl0eVN1Y2Nlc3MiLCJub2RlcyIsImdldElzRWRpdCIsInNlYXJjaEl0ZW1zIiwiY2xpY2tlZEVudGl0eSIsIm5ldHdvcmtMb2FkaW5nIiwiYWxsIiwicmVzcG9uc2VMaXN0Iiwic2V0RW50aXR5TGlzdCIsInNldENvbm5lY3Rpb25PYmoiLCIkd2luZG93IiwiY29uc29sZSIsIl9jdXJyZW50RW50aXR5IiwibyIsImlzRXF1YWwiLCJyZWdleCIsInJlZ2V4MiIsImFnZW50Q2hlY2siLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ2ZW5kb3IiLCJvcGVyYSIsInRlc3QiLCJzdWJzdHIiLCJlbnRpdHlMaXN0IiwiYSIsIkFycmF5IiwiaXNBcnJheSIsImdldENvbm5lY3Rpb25PYmoiLCJjb25uZWN0aW9uT2JqIiwicyIsImlzU3RyaW5nIiwiYXZhaWxhYmxlVmlld3MiLCJpbmNsdWRlcyIsImUiLCJzZXJ2aWNlIiwiZmlsdGVyQnlQcm9wZXJ0eSIsInVwZGF0ZUN1cnJlbnRFbnRpdHkiLCJ3YXRjaEVudGl0eUxpc3QiLCJjYXRlZ29yaXplZEVudGl0aWVzIiwiT2JqZWN0Iiwia2V5cyIsInJlZHVjZSIsImFzc2lnbiIsImRlZk9iaiIsInByb3BlcnR5IiwiZGVmYXVsdFZhbHVlIiwibG9vcEFuZEluaXQiLCJtb2RlbEFycmF5IiwiaW5pdE1vZGVsRnVuY3Rpb24iLCJuZXdBcnJheSIsIm1hcCIsImNvbmNhdCIsImFuYWx5dGljc0N0cmwiLCJDb25maWciLCIkaHR0cFByb3ZpZGVyIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiY29tbW9uIiwibG9nQXBpRXJyb3IiLCJlcnIiLCJyZWplY3QiLCJ1bndyYXBBbmd1bGFySHR0cCIsImFwaVVybCIsImRlZmF1bHRIZWFkZXIiLCJwb3N0IiwiTG9jYXRpb24iLCJidWlsZEZvcm1hdHRlZEFkZHJlc3MiLCJjb3VudHJ5Q29kZSIsInRyaW0iLCJmdW5Db25uU2VydmljZSIsImNvbm5TZXJ2aWNlIiwiZmluYW5jZVNlcnZpY2UiLCJFbnRpdHkiLCJkYk1vZGVsIiwicG9wIiwiZGVzY3JpcHRpb24iLCJpbmZsdWVuY2UiLCJuaWNrbmFtZSIsInR3aXR0ZXJfaGFuZGxlIiwiZW1wbG95ZWVzIiwiZW50aXR5VHlwZU9iaiIsIkdvdmVybm1lbnQiLCJGb3ItUHJvZml0IiwiTm9uLVByb2ZpdCIsIkluZGl2aWR1YWwiLCJMIiwibGVhZmxldERhdGEiLCJhY3RpdmF0ZSIsIm9wdGlvbnMiLCJjZW50ZXIiLCJsYXQiLCJsbmciLCJ6b29tIiwidGlsZUxheWVyIiwidGlsZUxheWVyT3B0aW9ucyIsImRldGVjdFJldGluYSIsInJldXNlVGlsZXMiLCJ6b29tQ29udHJvbCIsImF0dHJpYnV0aW9uQ29udHJvbCIsImdldE1hcCIsImhhbmRsZUxlYWZsZXREYXRhIiwiY3JlYXRlUGllQ2hhcnQiLCJwaWUiLCJsYXlvdXQiLCJzb3J0IiwiZCIsImFyYyIsInN2ZyIsIm91dGVyUmFkaXVzIiwiaW5uZXJSYWRpdXMiLCJzdHJva2VXaWR0aCIsInciLCJoIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50TlMiLCJucyIsInByZWZpeCIsInZpcyIsInNlbGVjdCIsImF0dHIiLCJhcmNzIiwic2VsZWN0QWxsIiwiZW50ZXIiLCJhcHBlbmQiLCJ0ZXh0IiwiaSIsImNvdW50IiwidG9TdHJpbmciLCJYTUxTZXJpYWxpemVyIiwic2VyaWFsaXplVG9TdHJpbmciLCJ4bWwiLCJjbHVzdGVySWNvbiIsImNsdXN0ZXIiLCJjaGlsZHJlbiIsImdldEFsbENoaWxkTWFya2VycyIsInRvdGFsIiwiY2x1c3Rlck1hcmtlcnMiLCJwbHVjayIsImNvdW50cyIsImNvdW50QnkiLCJpY29uRGltIiwiaHRtbCIsIkRpdkljb24iLCJjbGFzc05hbWUiLCJpY29uU2l6ZSIsIm91dGVyTG9vcCIsImlubmVyTG9vcCIsImxvYyIsIm0iLCJtYXJrZXIiLCJpY29uIiwibWFya2VySWNvbiIsInRpdGxlIiwibWVzc2FnZSIsIm1hcmtlcnMiLCJhZGRMYXllciIsImZvckVhY2giLCJvbkxvY2F0aW9uRXJyb3IiLCJsZWFmbGV0RXJyb3IiLCJmaWx0ZXJlZEVudGl0aWVzIiwiaW52YWxpZGF0ZVNpemUiLCJDb250cm9sIiwiWm9vbSIsInBvc2l0aW9uIiwiYWRkVG8iLCJMb2NhdGUiLCJzaG93UG9wdXAiLCJpY29uVXJsIiwibWFya2VyQ2x1c3Rlckdyb3VwIiwic3BpZGVyZnlPbk1heFpvb20iLCJzaG93Q292ZXJhZ2VPbkhvdmVyIiwiaWNvbkNyZWF0ZUZ1bmN0aW9uIiwibWF4Q2x1c3RlclJhZGl1cyIsInNwaWRlcmZ5RGlzdGFuY2VNdWx0aXBsaWVyIiwib24iLCJidWlsZFN2Z0VsZW1lbnQiLCJyb290IiwicmVtb3ZlIiwiYnVpbGRTY2FsZUZ1bmN0aW9uIiwibm9kZUxpc3QiLCJnZXRHcmFwaE9ialBhcmFtIiwidiIsImlzRmluaXRlIiwibG93ZXJCb3VuZFJhZGl1cyIsInVwcGVyQm91bmRSYWRpdXMiLCJtYXhOb2RlUGFyYW0iLCJtYXgiLCJzY2FsZSIsInNxcnQiLCJkb21haW4iLCJyYW5nZSIsImJ1aWxkRm9jaSIsImJvdW5kcyIsInBlcmNlbnRhZ2VPZkJvdW5kYXJ5IiwicmVzdE9mQm91bmRhcnkiLCJ4Iiwid2lkdGgiLCJ5IiwiaGVpZ2h0IiwiYnVpbGRDaGFyZ2VGdW5jdGlvbiIsInNpemVCeVNjYWxlIiwid3JhcEZuIiwiZm4iLCJMaW5rRm4iLCJnZXRXaW5kb3dCb3giLCJnZXRXaW5kb3dXaWR0aCIsImlubmVyV2lkdGgiLCJnZXRXaW5kb3dIZWlnaHQiLCJvbldpbmRvd1Jlc2l6ZSIsIiRhcHBseSIsInJ1biIsIm4iLCJjdXJyZW50RW50aXR5TGlzdGVuZXIiLCJyZW5kZXIiLCJnZXRHcmFwaERhdGEiLCJ3YXRjaFNpemVCeSIsIm5ld1NpemVCeSIsIl9idWlsZFNjYWxlRnVuY3Rpb24iLCJfYnVpbGRDaGFyZ2VGdW5jdGlvbiIsImdyYXBoRGF0YSIsImZvY3VzQ3VycmVudEVudGl0eSIsImZvY3VzTmVpZ2hib3JzIiwiYnVpbGRGb3JjZUxheW91dCIsImZvcmNlIiwic2l6ZSIsImxpbmtzIiwibGlua0xpc3QiLCJsaW5rU3RyZW5ndGgiLCJsaW5rRGlzdGFuY2UiLCJjaGFyZ2UiLCJjYWxjdWxhdGVDaGFyZ2UiLCJzdGFydCIsImRyYXdOb2RlIiwiZ2V0Q2lyY2xlUmFkaXVzIiwiZGVmYXVsdFNpemUiLCJjbGlja0V2ZW50IiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJzZWxlY3RlZCIsImZvY3VzIiwibm9kZSIsImNhbGwiLCJmb3JjZUxheW91dCIsImRyYWciLCJnZXRDb21wdXRlZFRleHRMZW5ndGgiLCJwYXJlbnROb2RlIiwiZ2V0QkJveCIsImNvbXBhcmVBZ2FpbnN0Q29ubmVjdGlvbk9iaiIsImMiLCJzb3VyY2UiLCJpbmRleCIsInRhcmdldCIsIm5laWdoYm9yaW5nIiwiYiIsImNsYXNzZWQiLCJuZWdhdGUiLCJ1bkZvY3VzIiwiYmFja2dyb3VuZENsaWNrIiwiZml4ZWQiLCJyZXN1bWUiLCJkcmF3Q29ubmVjdGlvbiIsImNvbm5lY3Rpb25MaXN0IiwicmVtb3ZlUmVkdW5kYW50Q29ubmVjdGlvbkZyb21MaXN0IiwiY29uTGlzdCIsImZpbmRJbklkTWFwIiwiaWRNYXAiLCJzSWQiLCJmaWx0ZXJlZCIsImwiLCJkZWJ1ZyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImZvY2kiLCJ0aWNrIiwiayIsImFscGhhIiwib25yZXNpemUiLCJkZWJvdW5jZSIsIiR3YXRjaEdyb3VwIiwiJHdhdGNoQ29sbGVjdGlvbiIsImZpbHRlckJ5Qm9vbGVhbk1hcCIsImZpbHRlckJ5TWluQ29ubmVjdGlvbiIsImNvbnZlcnRFbnRpdHlUb0dyYXBoTm9kZSIsImZpbmRCeUlkIiwiZmluZFRoaXMiLCJfc2l6ZUJ5IiwiX21pbkNvbm5lY3Rpb24iLCJnZXRHcmFwaE5vZGVMaXN0IiwiZ2V0R3JhcGhMaW5rTGlzdCIsImJ1aWxkQ29ubmVjdGlvbk9iamVjdCIsInNvdXJjZU5vZGUiLCJmaW5kSW5kZXgiLCJ0YXJnZXROb2RlIiwiZmlsdGVyQ29ubmVjdGlvbldpdGhNaXNzaW5nRW50aXR5IiwiY2hlY2tQcm9wZXJ0eSIsInByb3AiLCJyZWR1Y2VBcnJheU9mQXJyYXkiLCJhcnIiXSwibWFwcGluZ3MiOiJDQUFBLFNBQVVBLEdBRU4sWUFFQSxJQUFJQyxJQUNBLGVBQ0Esb0JBQ0EsWUFDQSxnQkFDQSxtQkFDQSxrQkFDQSx1QkFHQUMsR0FBcUIsb0JBRXJCQyxHQUNBLG1CQUNBLGtCQUdKSCxHQUFRSSxPQUFPLHVCQUNmSixFQUFRSSxPQUFPLGtCQUFtQkYsR0FDbENGLEVBQVFJLE9BQU8sc0JBQXVCRCxHQUN0Q0gsRUFBUUksT0FBTyxjQUFlSCxJQUUvQkQ7Q0NyQkgsU0FBV0EsR0FFUCxZQUlBLFNBQVNLLEtBQ0wsT0FDSUMsWUFBYSw2QkFDYkMsU0FBYSxJQUNiQyxTQUNBQyxXQUFlLGlCQVB2QixHQUFJQyxJQUF5QkwsRUFXN0JMLEdBQVFJLE9BQU8sZUFDVk8sVUFBVSxZQUFhRCxJQUU3QlY7Q0NuQkgsU0FBV0EsR0FFUCxZQUVBLFNBQVNZLEdBQVFDLEVBQVdDLEdBRXhCLFFB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R0FDWCxHQUFJOFgsR0FBYTlHLEVBQVMrRyxVQUFVUixFQUFTdlgsRUFBV3NWLFNBQ3BEMEMsRUFBYWhILEVBQVMrRyxVQUFVUixFQUFTdlgsRUFBV3dWLFFBQ3hELFFBQVNGLE9BQVV3QyxFQUFZdEMsT0FBVXdDLEVBQVk5ZSxLQUFNaUUsS0FFOURtRyxPQUFPck4sRUFBTXNILFdBR3RCLFFBQVMwYSxHQUFrQ2pZLEdBQ3ZDLFFBQVNrWSxHQUFjQyxHQUNuQixNQUFPbGlCLEdBQU1zSCxVQUFVeUMsRUFBV21ZLEtBQVVuWSxFQUFXbVksUUFFM0QsTUFBT0QsR0FBYyxXQUFhQSxFQUFjLFVBR3BELFFBQVNFLEdBQW1CQyxFQUFLL0wsR0FDN0IsTUFBTytMLEdBQUlyUCxPQUFPc0QsR0FHdEIsTUFBT2xFLFFBQ0ZDLEtBQUtaLEdBQ0xzQixJQUFJOE8sR0FDSnZQLE9BQU84UCxNQUNQOVUsT0FBTzJVLEdBQ1AzVSxPQUFPOFQsRUFBbUJ4ZCxFQUFrQjdDLHVCQUdyRCxRQUFTb2MsS0FDTCxHQUFJMUwsR0FBZ0J2UCxFQUFVc1AsbUJBQzFCd0osRUFBVzJHLEVBQWlCemYsRUFBVXlKLGdCQUUxQyxRQUFTcVAsU0FBWUEsRUFBVStDLFNBQVk2RCxFQUFpQjVHLEVBQVV2SixJQW5FMUUsR0FBSXZGLEdBQU81TCxLQUVQb2hCLEVBQWlCLEVBQ2pCRCxFQUFVLFdBbUVkdlYsR0FBS2lSLGFBQWVBLEVBRXBCalIsRUFBS2pJLE9BQVNBLEVBQ2RpSSxFQUFLaEksY0FBZ0JBLEVBR3pCbkUsRUFBUWMsU0FDSixnQkFDQSxnQkFDQSxnQkFDQSxxQkFHSjFCLEVBQ0tJLE9BQU8sdUJBQ1B3UyxRQUFRLG1CQUFvQmhTLElBRWxDWiIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBtYWluRGVwZW5kZW5jeUxpc3QgPSBbXG4gICAgICAgIFwidWkuYm9vdHN0cmFwXCIsXG4gICAgICAgIFwibGVhZmxldC1kaXJlY3RpdmVcIixcbiAgICAgICAgXCJuZ0FuaW1hdGVcIixcbiAgICAgICAgXCJ0ZW1wbGF0ZUNhY2hlXCIsXG4gICAgICAgIFwiY2l2aWMtZ3JhcGgudXRpbFwiLFxuICAgICAgICBcImNpdmljLWdyYXBoLmFwaVwiLFxuICAgICAgICBcImNpdmljLWdyYXBoLm5ldHdvcmtcIlxuICAgIF07XG5cbiAgICB2YXIgYXBpRGVwZW5kZW5jeUxpc3QgPSBbXCJjaXZpYy1ncmFwaC51dGlsXCJdO1xuXG4gICAgdmFyIG5ldHdvcmtEZXBlbmRlbmN5TGlzdCA9IFtcbiAgICAgICAgXCJjaXZpYy1ncmFwaC51dGlsXCIsXG4gICAgICAgIFwiY2l2aWMtZ3JhcGguYXBpXCJcbiAgICBdO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJjaXZpYy1ncmFwaC51dGlsXCIsIFtdKTtcbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiLCBhcGlEZXBlbmRlbmN5TGlzdCk7XG4gICAgYW5ndWxhci5tb2R1bGUoXCJjaXZpYy1ncmFwaC5uZXR3b3JrXCIsIG5ldHdvcmtEZXBlbmRlbmN5TGlzdCk7XG4gICAgYW5ndWxhci5tb2R1bGUoXCJjaXZpYy1ncmFwaFwiLCBtYWluRGVwZW5kZW5jeUxpc3QpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNy8xLzE2LlxuICovXG5cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgYW5hbHl0aWNzRGVwZW5kZW5jaWVzID0gW2FuYWx5dGljc0RpcmVjdGl2ZV07XG5cbiAgICBmdW5jdGlvbiBhbmFseXRpY3NEaXJlY3RpdmUoKXtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnanMvYW5hbHl0aWMvYW5hbHl0aWNzLmh0bWwnLFxuICAgICAgICAgICAgcmVzdHJpY3QgICA6ICdFJyxcbiAgICAgICAgICAgIHNjb3BlICAgICAgOiB7fSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgICA6ICdhbmFseXRpY3NDdHJsJ1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2FuYWx5dGljcycsIGFuYWx5dGljc0RlcGVuZGVuY2llcyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI4LzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBTZXJ2aWNlKGFwaUNhbGxlciwgdXRpbHMpIHtcblxuICAgICAgICBmdW5jdGlvbiBDYXRlZ29yeShvYmopIHtcbiAgICAgICAgICAgIHZhciBnZXRQcm9wZXJ0eSA9IHV0aWxzLmdldFByb3BlcnR5RnJvbU9iaihvYmopO1xuXG4gICAgICAgICAgICB0aGlzLmlkID0gZ2V0UHJvcGVydHkoXCJpZFwiKTtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IGdldFByb3BlcnR5KFwibmFtZVwiKTtcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlZCA9IGdldFByb3BlcnR5KFwiZW5hYmxlXCIsIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Q2F0ZWdvcnlNb2RlbChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2F0ZWdvcnkob2JqKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEFsbCgpIHtcbiAgICAgICAgICAgIHJldHVybiBhcGlDYWxsZXIuZ2V0KFwiL2NhdGVnb3JpZXNcIik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJnZXRDYXRlZ29yeU1vZGVsXCI6IGdldENhdGVnb3J5TW9kZWwsXG4gICAgICAgICAgICBcImdldEFsbFwiOiBnZXRBbGxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBTZXJ2aWNlLiRpbmplY3QgPSBbXCJjZ0FwaUNhbGxlclwiLCBcImNnVXRpbFNlcnZpY2VcIl07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIilcbiAgICAgICAgLmZhY3RvcnkoXCJjYXRlZ29yeVNlcnZpY2VcIiwgU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxuICovXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIHVybCA9IFwiL2Nvbm5lY3Rpb25zXCI7XG5cbiAgICB2YXIgY29ubmVjdGlvblR5cGVPYmogPSB7XG4gICAgICAgIFwiRnVuZGluZ1wiOiB0cnVlLFxuICAgICAgICBcIkRhdGFcIjogdHJ1ZSxcbiAgICAgICAgXCJFbXBsb3ltZW50XCI6IHRydWUsXG4gICAgICAgIFwiQ29sbGFib3JhdGlvblwiOiB0cnVlXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGdldENvbm5lY3Rpb25UeXBlcygpIHtcbiAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb25UeXBlT2JqO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFNlcnZpY2UoYXBpQ2FsbGVyLCB1dGlscykge1xuXG4gICAgICAgIGZ1bmN0aW9uIENvbm5lY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICB2YXIgZ2V0UHJvcGVydHkgPSB1dGlscy5nZXRQcm9wZXJ0eUZyb21PYmoob2JqKTtcblxuICAgICAgICAgICAgdGhpcy5pZCA9IGdldFByb3BlcnR5KFwiaWRcIik7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBnZXRQcm9wZXJ0eShcIm5hbWVcIik7XG4gICAgICAgICAgICB0aGlzLmRldGFpbHMgPSBnZXRQcm9wZXJ0eShcImRldGFpbHNcIik7XG4gICAgICAgICAgICB0aGlzLmVudGl0eSA9IGdldFByb3BlcnR5KFwiZW50aXR5XCIpO1xuICAgICAgICAgICAgdGhpcy5lbnRpdHlfaWQgPSBnZXRQcm9wZXJ0eShcImVudGl0eV9pZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldENvbm5lY3Rpb25Nb2RlbChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ29ubmVjdGlvbihvYmopO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0QWxsKCkge1xuICAgICAgICAgICAgcmV0dXJuIGFwaUNhbGxlci5nZXQodXJsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcImdldEFsbFwiOiBnZXRBbGwsXG4gICAgICAgICAgICBcImdldENvbm5lY3Rpb25UeXBlc1wiOiBnZXRDb25uZWN0aW9uVHlwZXMsXG4gICAgICAgICAgICBcImdldENvbm5lY3Rpb25Nb2RlbFwiOiBnZXRDb25uZWN0aW9uTW9kZWxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBTZXJ2aWNlLiRpbmplY3QgPSBbXCJjZ0FwaUNhbGxlclwiLCBcImNnVXRpbFNlcnZpY2VcIl07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIilcbiAgICAgICAgLmZhY3RvcnkoXCJjb25uZWN0aW9uU2VydmljZVwiLCBTZXJ2aWNlKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjcvMTYuXG4gKi9cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBTZXJ2aWNlKHV0aWxzKSB7XG4gICAgICAgIGZ1bmN0aW9uIEZpbmFuY2Uob2JqKSB7XG4gICAgICAgICAgICB2YXIgZ2V0UHJvcGVydHkgPSB1dGlscy5nZXRQcm9wZXJ0eUZyb21PYmoob2JqKTtcblxuICAgICAgICAgICAgdGhpcy5pZCA9IGdldFByb3BlcnR5KFwiaWRcIik7XG4gICAgICAgICAgICB0aGlzLnllYXIgPSBnZXRQcm9wZXJ0eShcInllYXJcIik7XG4gICAgICAgICAgICB0aGlzLmFtb3VudCA9IGdldFByb3BlcnR5KFwiYW1vdW50XCIsIDApO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RmluYW5jZU1vZGVsKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBGaW5hbmNlKG9iaik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJnZXRGaW5hbmNlTW9kZWxcIjogZ2V0RmluYW5jZU1vZGVsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgU2VydmljZS4kaW5qZWN0ID0gW1wiY2dVdGlsU2VydmljZVwiXTtcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKVxuICAgICAgICAuZmFjdG9yeShcImZpbmFuY2VTZXJ2aWNlXCIsIFNlcnZpY2UpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNy8xNi5cbiAqL1xuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIFNlcnZpY2UodXRpbHMpIHtcblxuICAgICAgICBmdW5jdGlvbiBGdW5kaW5nQ29ubmVjdGlvbihvYmopIHtcbiAgICAgICAgICAgIHZhciBnZXRQcm9wZXJ0eSA9IHV0aWxzLmdldFByb3BlcnR5RnJvbU9iaihvYmopO1xuXG4gICAgICAgICAgICB0aGlzLmlkID0gZ2V0UHJvcGVydHkoXCJpZFwiKTtcbiAgICAgICAgICAgIHRoaXMueWVhciA9IGdldFByb3BlcnR5KFwieWVhclwiKTtcbiAgICAgICAgICAgIHRoaXMuYW1vdW50ID0gZ2V0UHJvcGVydHkoXCJhbW91bnRcIik7XG4gICAgICAgICAgICB0aGlzLmVudGl0eSA9IGdldFByb3BlcnR5KFwiZW50aXR5XCIsIFwiXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRnVuZGluZ0Nvbm5lY3Rpb24ob2JqKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcImdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWxcIjogZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIFNlcnZpY2UuJGluamVjdCA9IFtcImNnVXRpbFNlcnZpY2VcIl07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIilcbiAgICAgICAgLmZhY3RvcnkoXCJmdW5kaW5nQ29ubmVjdGlvblNlcnZpY2VcIiwgU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIENvbnRyb2xsZXIoc2NvcGUsIGNnU2VydmljZSkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIHZtLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgIHZtLmdldEN1cnJlbnRWaWV3ID0gY2dTZXJ2aWNlLmdldEN1cnJlbnRWaWV3O1xuICAgICAgICB2bS5pc01vYmlsZSA9IGNnU2VydmljZS5tb2JpbGVDaGVjaygpO1xuXG4gICAgICAgIHNjb3BlLiRvbihcImNnLmRhdGEtbG9hZGVkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZtLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBDb250cm9sbGVyLiRpbmplY3QgPSBbXCIkc2NvcGVcIiwgXCJjZ01haW5TZXJ2aWNlXCJdO1xuXG4gICAgZnVuY3Rpb24gRGlyZWN0aXZlKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJyZXN0cmljdFwiOiBcIkVcIixcbiAgICAgICAgICAgIFwidGVtcGxhdGVVcmxcIjogXCJqcy9jZW50cmFsQ29sdW1uL2NlbnRyYWxDb2x1bW4udGVtcGxhdGUuaHRtbFwiLFxuICAgICAgICAgICAgXCJjb250cm9sbGVyXCI6IENvbnRyb2xsZXIsXG4gICAgICAgICAgICBcImNvbnRyb2xsZXJBc1wiOiBcImNlbnRyYWxcIixcbiAgICAgICAgICAgIFwic2NvcGVcIjoge31cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaFwiKVxuICAgICAgICAuZGlyZWN0aXZlKFwiY2VudHJhbENvbHVtblwiLCBEaXJlY3RpdmUpO1xuXG59KShhbmd1bGFyLCBkMyk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjYvMTYuXG4gKi9cbihmdW5jdGlvbihhbmd1bGFyKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnaW5wdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0aWN0OiAnRScsXG4gICAgICAgICAgICByZXF1aXJlOiAnP25nTW9kZWwnLFxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBuZ01vZGVsKSB7XG4gICAgICAgICAgICAgICAgaWYgKCAndHlwZScgaW4gYXR0cnMgJiYgYXR0cnMudHlwZS50b0xvd2VyQ2FzZSgpID09PSAncmFuZ2UnICkge1xuICAgICAgICAgICAgICAgICAgICBuZ01vZGVsLiRwYXJzZXJzLnB1c2gocGFyc2VGbG9hdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pO1xufSkoYW5ndWxhcik7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA3LzEwLzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBDb250cm9sbGVyKCRyb290U2NvcGUsICRtb2RhbCwgXywgY2dTZXJ2aWNlLCBuZXR3b3JrU2VydmljZSwgZW50aXR5U2VydmljZSwgY29ubmVjdGlvblNlcnZpY2UpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICB2bS5lbnRpdHlUeXBlcyA9IGVudGl0eVNlcnZpY2UuZ2V0RW50aXR5VHlwZXMoKTtcbiAgICAgICAgdm0uY29ubmVjdGlvblR5cGVzID0gY29ubmVjdGlvblNlcnZpY2UuZ2V0Q29ubmVjdGlvblR5cGVzKCk7XG4gICAgICAgIHZtLmN1cnJlbnRWaWV3ID0gY2dTZXJ2aWNlLmdldEN1cnJlbnRWaWV3KCk7XG5cbiAgICAgICAgdm0uc2l6ZUJ5ID0gbmV0d29ya1NlcnZpY2Uuc2l6ZUJ5KCk7XG4gICAgICAgIHZtLm1pbkNvbm5lY3Rpb24gPSBuZXR3b3JrU2VydmljZS5taW5Db25uZWN0aW9uKCk7XG5cbiAgICAgICAgdm0uc2l6ZUJ5TGlzdCA9IFtcbiAgICAgICAgICAgIHsgXCJuYW1lXCI6IFwiRW1wbG95ZWVzXCIsIFwidmFsdWVcIjogXCJlbXBsb3llZXNcIiB9LFxuICAgICAgICAgICAgeyBcIm5hbWVcIjogXCJUd2l0dGVyIEZvbGxvd2Vyc1wiLCBcInZhbHVlXCI6IFwiZm9sbG93ZXJzXCIgfVxuICAgICAgICBdO1xuXG4gICAgICAgIHZtLmNoYW5nZU1pbkNvbm5lY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBuZXR3b3JrU2VydmljZS5taW5Db25uZWN0aW9uKHZtLm1pbkNvbm5lY3Rpb24pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZtLmNoYW5nZVZpZXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjZ1NlcnZpY2Uuc2V0Q3VycmVudFZpZXcodm0uY3VycmVudFZpZXcpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZtLnNob3dBYm91dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRtb2RhbC5vcGVuKHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb246IGZhbHNlLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcImNvbnRyb2wvYWJvdXQuaHRtbFwiLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IFwibW9kYWxDdHJsXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZtLnRvZ2dsZUxpbmsgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KFwidG9nZ2xlTGlua1wiLCB7XG4gICAgICAgICAgICAgICAgXCJuYW1lXCI6IHR5cGUsIFwiZW5hYmxlZFwiOiB2bS5jb25uZWN0aW9uVHlwZXNbdHlwZV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZtLmNoYW5nZVNpemVCeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG5ldHdvcmtTZXJ2aWNlLnNpemVCeSh2bS5zaXplQnkpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIENvbnRyb2xsZXIuJGluamVjdCA9IFtcbiAgICAgICAgXCIkcm9vdFNjb3BlXCIsXG4gICAgICAgIFwiJHVpYk1vZGFsXCIsXG4gICAgICAgIFwiX1wiLFxuICAgICAgICBcImNnTWFpblNlcnZpY2VcIixcbiAgICAgICAgXCJjZ05ldHdvcmtTZXJ2aWNlXCIsXG4gICAgICAgIFwiZW50aXR5U2VydmljZVwiLFxuICAgICAgICBcImNvbm5lY3Rpb25TZXJ2aWNlXCJcbiAgICBdO1xuXG4gICAgZnVuY3Rpb24gRGlyZWN0aXZlKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwianMvY29udHJvbC9jb250cm9sLnRlbXBsYXRlLmh0bWxcIixcbiAgICAgICAgICAgIHJlc3RyaWN0ICAgOiBcIkVcIixcbiAgICAgICAgICAgIHNjb3BlICAgICAgOiB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlTmV0d29yayA6IFwiPVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29udHJvbGxlciAgIDogQ29udHJvbGxlcixcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBcyA6IFwiY29udHJvbFwiLFxuICAgICAgICAgICAgYmluZFRvQ29udHJvbGxlciA6IHRydWVcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaFwiKVxuICAgICAgICAuZGlyZWN0aXZlKFwiY29udHJvbFwiLCBEaXJlY3RpdmUpO1xuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gZ2V0SXRlbXNTaG93bkRlZmF1bHQgKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgJ2tleV9wZW9wbGUnOiAzLFxuICAgICAgICAgICAgJ2dyYW50c19naXZlbic6IDMsXG4gICAgICAgICAgICAnZ3JhbnRzX3JlY2VpdmVkJzogMyxcbiAgICAgICAgICAgICdpbnZlc3RtZW50c19tYWRlJzogMyxcbiAgICAgICAgICAgICdpbnZlc3RtZW50c19yZWNlaXZlZCc6IDMsXG4gICAgICAgICAgICAnY29sbGFib3JhdGlvbnMnOiAzLFxuICAgICAgICAgICAgJ2VtcGxveW1lbnRzJzogMyxcbiAgICAgICAgICAgICdyZWxhdGlvbnMnOiAzLFxuICAgICAgICAgICAgJ2RhdGFfZ2l2ZW4nOiAzLFxuICAgICAgICAgICAgJ2RhdGFfcmVjZWl2ZWQnOiAzLFxuICAgICAgICAgICAgJ3JldmVudWVzJzogMyxcbiAgICAgICAgICAgICdleHBlbnNlcyc6IDNcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBDb250cm9sbGVyICgkc2NvcGUsIGNnU2VydmljZSkge1xuICAgICAgICAkc2NvcGUuaXNNb2JpbGUgPSBjZ1NlcnZpY2UubW9iaWxlQ2hlY2soKTtcbiAgICAgICAgJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0ID0gZ2V0SXRlbXNTaG93bkRlZmF1bHQoKTtcbiAgICAgICAgJHNjb3BlLml0ZW1zU2hvd24gPSBnZXRJdGVtc1Nob3duRGVmYXVsdCgpO1xuXG4gICAgICAgICRzY29wZS5lbWl0U3RhcnRFZGl0RXZlbnQgPSBlbWl0U3RhcnRFZGl0RXZlbnQ7XG4gICAgICAgICRzY29wZS5zaG93TW9yZSA9IHNob3dNb3JlO1xuICAgICAgICAkc2NvcGUuc2hvd0xlc3MgPSBzaG93TGVzcztcblxuICAgICAgICAkc2NvcGUuJG9uKCdjZy5jdXJyZW50LWVudGl0eS51cGRhdGUnLCBmdW5jdGlvbiAoZXZlbnQsIGFyZ3MpIHsgb25DdXJyZW50RW50aXR5VXBkYXRlKGFyZ3MpOyB9KTtcblxuICAgICAgICBmdW5jdGlvbiBlbWl0U3RhcnRFZGl0RXZlbnQgKGVudGl0eSkge1xuICAgICAgICAgICAgJHNjb3BlLiRlbWl0KCdjZy5zdGFydC1lZGl0JywgZW50aXR5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNob3dNb3JlICh0eXBlKSB7XG4gICAgICAgICAgICAkc2NvcGUuaXRlbXNTaG93blsgdHlwZSBdID0gY2dTZXJ2aWNlLmdldEN1cnJlbnRFbnRpdHkoKVsgdHlwZSBdLmxlbmd0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNob3dMZXNzICh0eXBlKSB7XG4gICAgICAgICAgICAkc2NvcGUuaXRlbXNTaG93blsgdHlwZSBdID0gJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0WyB0eXBlIF07XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvbkN1cnJlbnRFbnRpdHlVcGRhdGUgKGN1cnJlbnRFbnRpdHkpIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50RW50aXR5ID0gY3VycmVudEVudGl0eTtcbiAgICAgICAgICAgIC8vIFJlc2V0IGl0ZW1zIHNob3duIGluIGRldGFpbHMgbGlzdC5cbiAgICAgICAgICAgICRzY29wZS5pdGVtc1Nob3duID0gZ2V0SXRlbXNTaG93bkRlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIENvbnRyb2xsZXIuJGluamVjdCA9IFsgJyRzY29wZScsICdjZ01haW5TZXJ2aWNlJyBdO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdkZXRhaWxzQ3RybCcsIENvbnRyb2xsZXIpO1xufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgZnVuY3Rpb24gQ29udHJvbGxlcigkc2NvcGUsICRodHRwLCAkdGltZW91dCwgXywgY2dTZXJ2aWNlLCBlbnRpdHlTZXJ2aWNlLCBjYXRlZ29yeVNlcnZpY2UsIGxvY2F0aW9uU2VydmljZSwgdXRpbHMpIHtcbiAgICAgICAgdmFyIGNhdGVnb3J5QmFja3VwO1xuXG4gICAgICAgICRzY29wZS5pc0VkaXRpbmcgPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLmVudGl0aWVzID0gY2dTZXJ2aWNlLmdldEVudGl0eUxpc3QoKTtcbiAgICAgICAgJHNjb3BlLmVkaXRFbnRpdHkgPSBlbnRpdHlTZXJ2aWNlLmdldEVudGl0eU1vZGVsKGNnU2VydmljZS5nZXRDdXJyZW50RW50aXR5KCkpO1xuICAgICAgICAkc2NvcGUuZW50aXR5VHlwZXMgPSBlbnRpdHlTZXJ2aWNlLmdldEVudGl0eVR5cGVzKCk7XG4gICAgICAgICRzY29wZS5pbmZsdWVuY2VUeXBlcyA9IGVudGl0eVNlcnZpY2UuZ2V0SW5mbHVlbmNlVHlwZXMoKTtcbiAgICAgICAgJHNjb3BlLmNhdGVnb3JpZXMgPSBbXTtcblxuICAgICAgICAkc2NvcGUuYWRkcmVzc1NlYXJjaCA9IGFkZHJlc3NTZWFyY2g7XG4gICAgICAgICRzY29wZS50b2dnbGVDYXRlZ29yeSA9IHRvZ2dsZUNhdGVnb3J5O1xuICAgICAgICAkc2NvcGUuc2V0TG9jYXRpb24gPSBzZXRMb2NhdGlvbjtcbiAgICAgICAgJHNjb3BlLmFkZExvY2F0aW9uID0gYWRkTG9jYXRpb247XG4gICAgICAgICRzY29wZS5hZGRLZXlQZXJzb24gPSBhZGRLZXlQZXJzb247XG4gICAgICAgICRzY29wZS5zZXRGdW5kaW5nQ29ubmVjdGlvbiA9IHNldEZ1bmRpbmdDb25uZWN0aW9uO1xuICAgICAgICAkc2NvcGUuYWRkRnVuZGluZ0Nvbm5lY3Rpb24gPSBhZGRGdW5kaW5nQ29ubmVjdGlvbjtcbiAgICAgICAgJHNjb3BlLnNldENvbm5lY3Rpb24gPSBzZXRDb25uZWN0aW9uO1xuICAgICAgICAkc2NvcGUuYWRkQ29ubmVjdGlvbiA9IGFkZENvbm5lY3Rpb247XG4gICAgICAgICRzY29wZS5hZGRGaW5hbmNlID0gYWRkRmluYW5jZTtcbiAgICAgICAgJHNjb3BlLnNhdmUgPSBzYXZlO1xuICAgICAgICAkc2NvcGUuY2FuY2VsRWRpdCA9IGNhbmNlbEVkaXQ7XG5cbiAgICAgICAgJHNjb3BlLiR3YXRjaCgnZW50aXR5Jywgd2F0Y2hFbnRpdHkpO1xuXG4gICAgICAgIC8vIFJldHJpZXZlIENhdGVnb3JpZXMgZnJvbSBEQlxuICAgICAgICBjYXRlZ29yeVNlcnZpY2VcbiAgICAgICAgICAgIC5nZXRBbGwoKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUJhY2t1cCA9IGRhdGEuY2F0ZWdvcmllcztcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGVzIGJhY2t1cCBvZiBkYXRhIHVzaW5nIEFuZ3VsYXIgdG8gcHJldmVudCBhcGkgZGF0YSBmcm9tIGJlaW5nIHRhbXBlcmVkXG4gICAgICAgICAgICAgICAgLy8gZGlyZWN0bHlcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2F0ZWdvcmllcyA9IGFuZ3VsYXIuY29weShjYXRlZ29yeUJhY2t1cCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBmdW5jdGlvbiBhZGRyZXNzU2VhcmNoKHNlYXJjaCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmpzb25wKCdodHRwczovL2Rldi52aXJ0dWFsZWFydGgubmV0L1JFU1QvdjEvTG9jYXRpb25zJywge1xuICAgICAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICBxdWVyeTogc2VhcmNoLFxuICAgICAgICAgICAgICAgICAgICBrZXk6ICdBaTU4NTgxeUMtU3I3bWNGYllUdFVrUzNpeEU3ZjZadUpuYkZKQ1ZJNGhBdFcxWG9ERWVaeWlkUXoyZ0xDQ3lEJyxcbiAgICAgICAgICAgICAgICAgICAgJ2pzb25wJzogJ0pTT05fQ0FMTEJBQ0snLFxuICAgICAgICAgICAgICAgICAgICAnaW5jbHVkZSc6ICdjaXNvMidcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodXRpbHMuaXNEZWZpbmVkKHJlc3BvbnNlLmRhdGEucmVzb3VyY2VTZXRzKSAmJiByZXNwb25zZS5kYXRhLnJlc291cmNlU2V0cy5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEucmVzb3VyY2VTZXRzWzBdLnJlc291cmNlcztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdG9nZ2xlQ2F0ZWdvcnkoY2F0ZWdvcnkpIHtcbiAgICAgICAgICAgIGlmICgkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMucHVzaChjYXRlZ29yeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGNhdGVnb3J5SW5kZXggaW4gJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMuaGFzT3duUHJvcGVydHkoY2F0ZWdvcnlJbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbnRpdHlDYXRlZ29yeSA9ICRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXNbY2F0ZWdvcnlJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbnRpdHlDYXRlZ29yeS5pZCA9PT0gY2F0ZWdvcnkuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eUNhdGVnb3J5LmVuYWJsZWQgPSBjYXRlZ29yeS5lbmFibGVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzLnB1c2goY2F0ZWdvcnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldExvY2F0aW9uKGxvY2F0aW9uLCBpc0xhc3QpIHtcbiAgICAgICAgICAgIGFkZHJlc3NTZWFyY2gobG9jYXRpb24uZm9ybWF0dGVkQWRkcmVzcylcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoYXBpQ2FsbFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXV0aWxzLmlzRGVmaW5lZChhcGlDYWxsUmVzdWx0WzBdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBhcGlDYWxsUmVzdWx0WzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyA9IHJlc3VsdC5hZGRyZXNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnQgPSByZXN1bHQucG9pbnQ7XG4gICAgICAgICAgICAgICAgICAgIGFkZExvY2F0aW9uKGlzTGFzdCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUGFyc2VzIEFQSSBjYWxsIHJlc3VsdFxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5hZGRyZXNzX2xpbmUgPSB1dGlscy5pc0RlZmluZWQoYWRkcmVzcy5hZGRyZXNzTGluZSkgPyBhZGRyZXNzLmFkZHJlc3NMaW5lIDogJyc7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmxvY2FsaXR5ID0gdXRpbHMuaXNEZWZpbmVkKGFkZHJlc3MubG9jYWxpdHkpID8gYWRkcmVzcy5sb2NhbGl0eSA6ICcnO1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5kaXN0cmljdCA9XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5pc0RlZmluZWQoYWRkcmVzcy5hZG1pbkRpc3RyaWN0KSA/IGFkZHJlc3MuYWRtaW5EaXN0cmljdCA6ICcnO1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5jb3VudHJ5ID1cbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxzLmlzRGVmaW5lZChhZGRyZXNzLmNvdW50cnlSZWdpb24pID8gYWRkcmVzcy5jb3VudHJ5UmVnaW9uIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uY291bnRyeV9jb2RlID1cbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxzLmlzRGVmaW5lZChhZGRyZXNzLmNvdW50cnlSZWdpb25Jc28yKSA/IGFkZHJlc3MuY291bnRyeVJlZ2lvbklzbzIgOiAnJztcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uY29vcmRpbmF0ZXMgPSB1dGlscy5pc0RlZmluZWQocG9pbnQuY29vcmRpbmF0ZXMpID8gcG9pbnQuY29vcmRpbmF0ZXMgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5wb3N0YWxfY29kZSA9IHV0aWxzLmlzRGVmaW5lZChhZGRyZXNzLnBvc3RhbENvZGUpID8gYWRkcmVzcy5wb3N0YWxDb2RlIDogbnVsbDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGFkZExvY2F0aW9uKGlzTGFzdCkge1xuICAgICAgICAgICAgaWYgKGlzTGFzdCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5lZGl0RW50aXR5LmxvY2F0aW9ucy5wdXNoKGxvY2F0aW9uU2VydmljZS5nZXRMb2NhdGlvbk1vZGVsKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYWRkS2V5UGVyc29uKCkge1xuICAgICAgICAgICAgLy8gQWRkIGJsYW5rIGZpZWxkIHRvIGVkaXQgaWYgdGhlcmUgYXJlIG5vbmUuXG4gICAgICAgICAgICAvLyBXQVRDSCBPVVQhIFRPRE86IElmIHNvbWVvbmUgZGVsZXRlcyBhbiBvbGQgcGVyc29uLCBkZWxldGUgdGhlaXIgaWQgdG9vLlxuICAgICAgICAgICAgLy8gaS5lLiBtYWtlIHN1cmUgb2xkL2NsZWFyZWQgZm9ybSBmaWVsZHMgYXJlbid0IGJlaW5nIGVkaXRlZCBpbnRvIG5ldyBwZW9wbGUuXG4gICAgICAgICAgICBpZiAoIShfLnNvbWUoJHNjb3BlLmVkaXRFbnRpdHkua2V5X3Blb3BsZSwgeyAnbmFtZSc6ICcnLCAnaWQnOiBudWxsIH0pKSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5lZGl0RW50aXR5LmtleV9wZW9wbGUucHVzaCh7ICduYW1lJzogJycsICdpZCc6IG51bGwgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRGdW5kaW5nQ29ubmVjdGlvbihlbnRpdHksIGZ1bmRpbmcpIHtcbiAgICAgICAgICAgIC8vIEFkZCBvdGhlciBlbnRpdHkncyBpZCB0byB0aGlzIGZpbmFuY2UgY29ubmVjdGlvbi5cbiAgICAgICAgICAgIGZ1bmRpbmcuZW50aXR5X2lkID0gZW50aXR5LmlkO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYWRkRnVuZGluZ0Nvbm5lY3Rpb24oZnVuZGluZykge1xuICAgICAgICAgICAgaWYgKCFfLnNvbWUoZnVuZGluZywgeyAnZW50aXR5JzogJycgfSkpIHtcbiAgICAgICAgICAgICAgICAvLyBNYXliZSBzZXQgYW1vdW50IHRvIDAgaW5zdGVhZCBvZiBudWxsP1xuICAgICAgICAgICAgICAgIGZ1bmRpbmcucHVzaCh7ICdlbnRpdHknOiAnJywgJ2Ftb3VudCc6IG51bGwsICd5ZWFyJzogbnVsbCwgJ2lkJzogbnVsbCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldENvbm5lY3Rpb24oZW50aXR5LCBjb25uZWN0aW9uKSB7XG4gICAgICAgICAgICBjb25uZWN0aW9uLmVudGl0eV9pZCA9IGVudGl0eS5pZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGFkZENvbm5lY3Rpb24oY29ubmVjdGlvbnMpIHtcbiAgICAgICAgICAgIC8vIEFkZCBhbiBlbXB0eSBjb25uZWN0aW9uIHRvIGVkaXQgaWYgbm9uZSBleGlzdC5cbiAgICAgICAgICAgIGlmICghXy5zb21lKGNvbm5lY3Rpb25zLCB7ICdlbnRpdHknOiAnJywgJ2lkJzogbnVsbCB9KSkge1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25zLnB1c2goeyAnZW50aXR5JzogJycsICdpZCc6IG51bGwsICdkZXRhaWxzJzogbnVsbCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGFkZEZpbmFuY2UocmVjb3Jkcykge1xuICAgICAgICAgICAgLy8gQWRkIG5ldyBmaW5hbmNlIGZpZWxkIGlmIGFsbCBjdXJyZW50IGZpZWxkcyBhcmUgdmFsaWQuXG4gICAgICAgICAgICBpZiAoXy5ldmVyeShyZWNvcmRzLCBmdW5jdGlvbiAocikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gci5hbW91bnQgPiAwICYmIHIueWVhciA+IDE3NTA7XG4gICAgICAgICAgICAgICAgfSkpIHtcbiAgICAgICAgICAgICAgICByZWNvcmRzLnB1c2goeyAnYW1vdW50JzogbnVsbCwgJ3llYXInOiBudWxsLCAnaWQnOiBudWxsIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2F2ZSgpIHtcbiAgICAgICAgICAgICRzY29wZS5pc1NhdmluZyA9IHRydWU7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXNTYXZpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuJGVtaXQoXCJlZGl0RW50aXR5U3VjY2Vzc1wiLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgY2FuY2VsRWRpdCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBlcnJvcigpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXNFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXNFcnJvciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbnRpdHlTZXJ2aWNlXG4gICAgICAgICAgICAgICAgLnNhdmVFbnRpdHkoJHNjb3BlLmVkaXRFbnRpdHkuZ2VuZXJhdGVEQk1vZGVsKCkpXG4gICAgICAgICAgICAgICAgLnRoZW4oc3VjY2VzcywgZXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY2FuY2VsRWRpdCgpIHtcbiAgICAgICAgICAgICRzY29wZS5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHdhdGNoRW50aXR5KG5ld1ZhbCwgb2xkVmFsKSB7XG4gICAgICAgICAgICBpZiAoYW5ndWxhci5lcXVhbHMobmV3VmFsLCBvbGRWYWwpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUuZWRpdEVudGl0eSA9IGVudGl0eVNlcnZpY2UuZ2V0RW50aXR5TW9kZWwobmV3VmFsKTtcbiAgICAgICAgICAgICRzY29wZS5jYXRlZ29yaWVzID0gYW5ndWxhci5jb3B5KGNhdGVnb3J5QmFja3VwKTtcblxuICAgICAgICAgICAgaW5pdENhdGVnb3J5QXJyYXkoKTtcblxuICAgICAgICAgICAgJHNjb3BlLmlzRWRpdGluZyA9IHV0aWxzLmlzRGVmaW5lZCgkc2NvcGUuZWRpdEVudGl0eS5pZCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogSW5pdGlhbGl6ZXMgY2F0ZWdvcnkgZmllbGRzIHdpdGggZW50aXR5IHZhbHVlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogTG9vcHMgdGhyb3VnaCBjYXRlZ29yeSBpbiBjYXRlZ29yaWVzIGFuZCBsb29wcyB0aHJvdWdoIGNhdGVnb3J5IGluIGVudGl0eS4gSWRlbnRpZmllc1xuICAgICAgICAgKiBjYXRlZ29yaWVzIGVuYWJsZWQgaW4gdGhlIGVudGl0eSBhbmQgc2V0cyBsb2NhbCBkaXNwbGF5IGRhdGEuIFRoaXMgaXMgYmVjYXVzZSB3ZSBjcmVhdGVkXG4gICAgICAgICAqIGEgYmFja3VwIG9mIGVudGl0eSBkYXRhIHNvIHRoYXQgdGhlIGFwaSBkYXRhIGlzIG5vdCB0YW1wZXJlZCB3aXRoIGRpcmVjdGx5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUT0RPOiByZXBsYWNlIHdpdGggYmV0dGVyIGRhdGEgc3RydWN0dXJlIGZvciBjYXRlZ29yaWVzLlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gaW5pdENhdGVnb3J5QXJyYXkoKSB7XG4gICAgICAgICAgICB2YXIgY2F0ZWdvcnksXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnlJbmRleCxcbiAgICAgICAgICAgICAgICBlbnRpdHlDYXRlZ29yeUluZGV4LFxuICAgICAgICAgICAgICAgIGVudGl0eUNhdGVnb3J5O1xuXG4gICAgICAgICAgICBmb3IgKGNhdGVnb3J5SW5kZXggaW4gJHNjb3BlLmNhdGVnb3JpZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5jYXRlZ29yaWVzLmhhc093blByb3BlcnR5KGNhdGVnb3J5SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRlZ29yeSA9ICRzY29wZS5jYXRlZ29yaWVzW2NhdGVnb3J5SW5kZXhdO1xuICAgICAgICAgICAgICAgIGZvciAoZW50aXR5Q2F0ZWdvcnlJbmRleCBpbiAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcy5oYXNPd25Qcm9wZXJ0eShlbnRpdHlDYXRlZ29yeUluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZW50aXR5Q2F0ZWdvcnkgPSAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzW2VudGl0eUNhdGVnb3J5SW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2F0ZWdvcnkuaWQgPT09IGVudGl0eUNhdGVnb3J5LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeS5lbmFibGVkID0gZW50aXR5Q2F0ZWdvcnkuZW5hYmxlZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIENvbnRyb2xsZXIuJGluamVjdCA9IFtcbiAgICAgICAgXCIkc2NvcGVcIixcbiAgICAgICAgXCIkaHR0cFwiLFxuICAgICAgICBcIiR0aW1lb3V0XCIsXG4gICAgICAgIFwiX1wiLFxuICAgICAgICBcImNnTWFpblNlcnZpY2VcIixcbiAgICAgICAgXCJlbnRpdHlTZXJ2aWNlXCIsXG4gICAgICAgIFwiY2F0ZWdvcnlTZXJ2aWNlXCIsXG4gICAgICAgIFwibG9jYXRpb25TZXJ2aWNlXCIsXG4gICAgICAgIFwiY2dVdGlsU2VydmljZVwiXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIERpcmVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcImpzL2VkaXQtZW50aXR5L2VkaXRFbnRpdHkudGVtcGxhdGUuaHRtbFwiLFxuICAgICAgICAgICAgY29udHJvbGxlcjogQ29udHJvbGxlcixcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICAgICAgXCJpc09wZW5cIjogXCI9XCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaFwiKVxuICAgICAgICAuZGlyZWN0aXZlKFwiZWRpdEVudGl0eVwiLCBEaXJlY3RpdmUpO1xuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhciwgJCkge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gbGlua0Z1bmN0aW9uKHNjb3BlKSB7XG5cbiAgICAgICAgZnVuY3Rpb24gc2Nyb2xsKCkge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSAkKHRoaXMpO1xuICAgICAgICAgICAgc2VsZi5jc3MoJ2hlaWdodCcsICc1NXZoJyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjbGljaygpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gJCh0aGlzKTtcbiAgICAgICAgICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgLyAzID4gcGFyc2VJbnQoc2VsZi5jc3MoJ2hlaWdodCcpKSkge1xuICAgICAgICAgICAgICAgIHNlbGYuY3NzKCdoZWlnaHQnLCAnNTV2aCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxmLmNzcygnaGVpZ2h0JywgJzMwdmgnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkZXRhaWxzUGFuZWw7XG4gICAgICAgIGlmIChzY29wZS5tb2JpbGUpIHtcbiAgICAgICAgICAgIGRldGFpbHNQYW5lbCA9ICQoXCIjZGV0YWlscy1wYW5lbFwiKTtcbiAgICAgICAgICAgIGRldGFpbHNQYW5lbC5jc3MoXCJoZWlnaHRcIiwgXCIzMHZoXCIpO1xuICAgICAgICAgICAgZGV0YWlsc1BhbmVsLnNjcm9sbFRvcCgwKTtcbiAgICAgICAgICAgIGRldGFpbHNQYW5lbC5zY3JvbGwoc2Nyb2xsKTtcbiAgICAgICAgICAgIGRldGFpbHNQYW5lbC5jbGljayhjbGljayk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRNb2JpbGVFdmVudHMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICAgICAgbGluazogbGlua0Z1bmN0aW9uXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnYWRkTW9iaWxlRXZlbnRzJywgW2FkZE1vYmlsZUV2ZW50c10pO1xufSkoYW5ndWxhciwgJCk7XG4iLCIoZnVuY3Rpb24oYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gbW9kYWxDdHJsKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UpIHtcbiAgICAgICAgJHNjb3BlLmNsb3NlV2luZG93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJG1vZGFsSW5zdGFuY2UuY2xvc2UoKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29udHJvbGxlcignbW9kYWxDdHJsJywgWyckc2NvcGUnLCAnJG1vZGFsSW5zdGFuY2UnLCBtb2RhbEN0cmxdKTtcblxufSkoYW5ndWxhcik7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29uc3RhbnQoJ18nLCB3aW5kb3cuXylcbiAgICAgICAgLmNvbmZpZyhbJyRsb2NhdGlvblByb3ZpZGVyJywgJyRjb21waWxlUHJvdmlkZXInLFxuICAgICAgICAgICAgZnVuY3Rpb24gKCRsb2NhdGlvblByb3ZpZGVyLCAkY29tcGlsZVByb3ZpZGVyKSB7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuICAgICAgICAgICAgICAgICRjb21waWxlUHJvdmlkZXIuZGVidWdJbmZvRW5hYmxlZCh0cnVlKTtcbiAgICAgICAgICAgIH1dKVxuICAgICAgICAuZmlsdGVyKCd0aG91c2FuZFN1ZmZpeCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoaW5wdXQsIGRlY2ltYWxzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGV4cCxcbiAgICAgICAgICAgICAgICAgICAgc3VmZml4ZXMgPSBbJ2snLCAnTScsICdHJywgJ1QnLCAnUCcsICdFJ107XG5cbiAgICAgICAgICAgICAgICBpZiAod2luZG93LmlzTmFOKGlucHV0KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQgPCAxMDAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBleHAgPSBNYXRoLmZsb29yKE1hdGgubG9nKGlucHV0KSAvIE1hdGgubG9nKDEwMDApKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiAoaW5wdXQgLyBNYXRoLnBvdygxMDAwLCBleHApKS50b0ZpeGVkKGRlY2ltYWxzKSArIHN1ZmZpeGVzW2V4cCAtIDFdO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBDb250cm9sbGVyICgkc2NvcGUsICRxLCBfLCB1dGlscywgY2dTZXJ2aWNlLCBlbnRpdHlTZXJ2aWNlLCBjb25uZWN0aW9uU2VydmljZSkge1xuICAgICAgICBmdW5jdGlvbiB3YWl0IChtcykge1xuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpOyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgLy8gRm9yIHRoZSBzZWFyY2ggYmFyXG4gICAgICAgIHZtLmN1cnJlbnRFbnRpdHkgPSBudWxsO1xuXG4gICAgICAgIHZtLmlzTW9iaWxlID0gY2dTZXJ2aWNlLm1vYmlsZUNoZWNrKCk7XG5cbiAgICAgICAgdm0uaXNFZGl0ID0gY2dTZXJ2aWNlLmdldElzRWRpdDtcblxuICAgICAgICAkc2NvcGUuc2VhcmNoSXRlbXMgPSBudWxsO1xuICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eSA9IHsgZW50aXR5OiBudWxsIH07XG4gICAgICAgICRzY29wZS5zaG93c2VhcmNoTUIgPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLnN0YXR1cyA9IHtcbiAgICAgICAgICAgICdpc05ldHdvcmtTaG93bic6IHRydWUsXG4gICAgICAgICAgICAnbGljZW5zZSc6IHRydWUsXG4gICAgICAgICAgICAnbmV0d29ya0xvYWRpbmcnOiB0cnVlXG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS5zZXR0aW5nc0VuYWJsZWQgPSAhdm0uaXNNb2JpbGU7XG5cbiAgICAgICAgJHNjb3BlLnNob3dTZWFyY2ggPSBzaG93U2VhcmNoO1xuICAgICAgICAkc2NvcGUudG9nZ2xlU2V0dGluZ3MgPSB0b2dnbGVTZXR0aW5ncztcbiAgICAgICAgJHNjb3BlLnN0YXJ0RWRpdCA9IHN0YXJ0RWRpdDtcbiAgICAgICAgJHNjb3BlLnN3aXRjaFZpZXcgPSBzd2l0Y2hWaWV3O1xuICAgICAgICAkc2NvcGUuc2V0RW50aXR5ID0gc2V0RW50aXR5O1xuICAgICAgICAkc2NvcGUuc2V0RW50aXR5SUQgPSBzZXRFbnRpdHlJRDtcbiAgICAgICAgJHNjb3BlLnNlbGVjdEl0ZW0gPSBzZWxlY3RJdGVtO1xuXG4gICAgICAgICRzY29wZS4kb24oJ2NnLmN1cnJlbnQtZW50aXR5LnVwZGF0ZScsIGZ1bmN0aW9uIChldmVudCwgYXJncykgeyBvbkN1cnJlbnRFbnRpdHlVcGRhdGUoYXJncyk7IH0pO1xuICAgICAgICAkc2NvcGUuJG9uKCdlZGl0RW50aXR5U3VjY2VzcycsIG9uRWRpdEVudGl0eVN1Y2Nlc3MpO1xuICAgICAgICAkc2NvcGUuJG9uKCdjZy5zdGFydC1lZGl0Jywgc3RhcnRFZGl0KTtcblxuICAgICAgICAvLyBMZWF2aW5nIGhlcmUgZm9yIHRlc3RpbmcgcmVhc29ucy4gIFRoZSB3YWl0IG1ldGhvZCBpc24ndCBhY3R1YWxseSBuZWNlc3NhcnksIGJ1dCB1c2VmdWxcbiAgICAgICAgLy8gaWYgeW91IGRvbid0IGhhdmUgYSBsb3Qgb2YgZGF0YSBpbiB0aGUgZGF0YWJhc2UgYW5kIG5lZWQgdG8gc2ltdWxhdGUgYSBsYXJnZSByZXF1ZXN0LlxuICAgICAgICAvLyBUaGUgJHEuYWxsKCkgaXMgbmVjZXNzYXJ5IHRob3VnaCwgc28gaWYgeW91IHJlbW92ZSB3YWl0KCksIGxlYXZlIHRoZSAkcS5hbGwoKVxuICAgICAgICB3YWl0KDEwMDApXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRxLmFsbChbIGVudGl0eVNlcnZpY2UuZ2V0QWxsKCksIGNvbm5lY3Rpb25TZXJ2aWNlLmdldEFsbCgpIF0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZUxpc3QpIHtcbiAgICAgICAgICAgICAgICBjZ1NlcnZpY2Uuc2V0RW50aXR5TGlzdChyZXNwb25zZUxpc3RbIDAgXS5ub2Rlcyk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlYXJjaEl0ZW1zID0gcmVzcG9uc2VMaXN0WyAwIF0ubm9kZXM7XG5cbiAgICAgICAgICAgICAgICBjZ1NlcnZpY2Uuc2V0Q29ubmVjdGlvbk9iaihyZXNwb25zZUxpc3RbIDEgXS5jb25uZWN0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnY2cuZGF0YS1sb2FkZWQnKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIGh5ZGVQYXJ0aWFscyAoZXhjZXB0KSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGV4Y2VwdCkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NlYXJjaCc6XG4gICAgICAgICAgICAgICAgICAgIGNnU2VydmljZS5zZXRJc0VkaXQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3NFbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NldHRpbmdzJzpcbiAgICAgICAgICAgICAgICAgICAgY2dTZXJ2aWNlLnNldElzRWRpdChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zaG93c2VhcmNoTUIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZWRpdCc6XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zZXR0aW5nc0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dzZWFyY2hNQiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBjZ1NlcnZpY2Uuc2V0SXNFZGl0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNldHRpbmdzRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd3NlYXJjaE1CID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNob3dTZWFyY2ggKCkge1xuICAgICAgICAgICAgaHlkZVBhcnRpYWxzKCdzZWFyY2gnKTtcbiAgICAgICAgICAgICRzY29wZS5zaG93c2VhcmNoTUIgPSAhJHNjb3BlLnNob3dzZWFyY2hNQjtcbiAgICAgICAgICAgIC8vICRzY29wZS4kYnJvYWRjYXN0KCdoaWRlTGljZW5zZScpO1xuICAgICAgICAgICAgJHNjb3BlLnN0YXR1cy5saWNlbnNlID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB0b2dnbGVTZXR0aW5ncyAoKSB7XG4gICAgICAgICAgICBoeWRlUGFydGlhbHMoJ3NldHRpbmdzJyk7XG4gICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3NFbmFibGVkID0gISRzY29wZS5zZXR0aW5nc0VuYWJsZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzdGFydEVkaXQgKGVudGl0eSkge1xuICAgICAgICAgICAgY2dTZXJ2aWNlLnNldEN1cnJlbnRFbnRpdHkoZW50aXR5KTtcbiAgICAgICAgICAgIGlmICggdm0uaXNNb2JpbGUgKSB7XG4gICAgICAgICAgICAgICAgaHlkZVBhcnRpYWxzKCdlZGl0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjZ1NlcnZpY2Uuc2V0SXNFZGl0KHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc3dpdGNoVmlldyAoKSB7XG4gICAgICAgICAgICAkc2NvcGUuc3RhdHVzLmlzTmV0d29ya1Nob3duID0gISRzY29wZS5zdGF0dXMuaXNOZXR3b3JrU2hvd247XG4gICAgICAgICAgICBpZiAoICRzY29wZS5zdGF0dXMuaXNOZXR3b3JrU2hvd24gKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3RyaWdnZXJOZXR3b3JrRHJhdycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0RW50aXR5IChlbnRpdHkpIHtcbiAgICAgICAgICAgIGNnU2VydmljZS5zZXRDdXJyZW50RW50aXR5KGVudGl0eSk7XG5cbiAgICAgICAgICAgIGlmICggdm0uaXNFZGl0KCkgKSB7XG4gICAgICAgICAgICAgICAgc3RvcEVkaXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldEVudGl0eUlEIChpZCkge1xuICAgICAgICAgICAgc2V0RW50aXR5KF8uZmluZChjZ1NlcnZpY2UuZ2V0RW50aXR5TGlzdCgpLCB7ICdpZCc6IGlkIH0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNlbGVjdEl0ZW0gKGl0ZW0pIHtcbiAgICAgICAgICAgICh1dGlscy5pc09iamVjdChpdGVtKSA/IHNldEVudGl0eSA6IHNldEVudGl0eUlEKShpdGVtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldEVudGl0aWVzIChlbnRpdGllcykge1xuICAgICAgICAgICAgJHNjb3BlLmVudGl0aWVzID0gZW50aXRpZXM7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzdG9wRWRpdCAoKSB7IGNnU2VydmljZS5zZXRJc0VkaXQoZmFsc2UpOyB9XG5cbiAgICAgICAgZnVuY3Rpb24gb25FZGl0RW50aXR5U3VjY2VzcyAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHNldEVudGl0aWVzKHJlc3BvbnNlLm5vZGVzKTtcbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCd0cmlnZ2VyTmV0d29ya0RyYXcnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9uQ3VycmVudEVudGl0eVVwZGF0ZSAoY3VycmVudEVudGl0eSkge1xuICAgICAgICAgICAgdm0uY3VycmVudEVudGl0eSA9IGN1cnJlbnRFbnRpdHk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBDb250cm9sbGVyLiRpbmplY3QgPSBbXG4gICAgICAgICckc2NvcGUnLFxuICAgICAgICAnJHEnLFxuICAgICAgICAnXycsXG4gICAgICAgICdjZ1V0aWxTZXJ2aWNlJyxcbiAgICAgICAgJ2NnTWFpblNlcnZpY2UnLFxuICAgICAgICAnZW50aXR5U2VydmljZScsXG4gICAgICAgICdjb25uZWN0aW9uU2VydmljZSdcbiAgICBdO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgICAgLmNvbnRyb2xsZXIoJ2hvbWVDdHJsJywgQ29udHJvbGxlcik7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gJHJvb3RTY29wZSAtIE5vdCBwcm91ZCBvZiB0aGlzIGRlcGVuZGVuY3ksIGJ1dCB3aWxsIGhvcGVmdWxseSByZW1vdmUgc29tZSBoYXJkLWhpdHRpbmcgd2F0Y2hlcnNcbiAgICAgKiBAcGFyYW0gJHdpbmRvd1xuICAgICAqIEBwYXJhbSBfLCBsb2Rhc2ggbGlicmFyeSwgcmVhbGx5IG5lZWQgdG8gZ2V0IGFyb3VuZCB0byBpbXBsZW1lbnRpbmcgRVM2IGZvciBpbXBvcnRzIG9mIHRoaXMgc3R1ZmZcbiAgICAgKiBAcGFyYW0gdXRpbHNcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTZXJ2aWNlICgkcm9vdFNjb3BlLCAkd2luZG93LCBfLCB1dGlscykge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgdmFyIF9jdXJyZW50RW50aXR5ID0gbnVsbDtcblxuICAgICAgICB2YXIgaXNFZGl0ID0gZmFsc2U7XG5cbiAgICAgICAgdmFyIGF2YWlsYWJsZVZpZXdzID0gWyAnbmV0d29yaycsICdtYXAnIF07XG4gICAgICAgIHZhciBjdXJyZW50VmlldyA9ICduZXR3b3JrJztcblxuICAgICAgICB2YXIgZW50aXR5TGlzdCA9IFtdO1xuICAgICAgICB2YXIgY29ubmVjdGlvbk9iaiA9IHt9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRFbnRpdHkgKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0N1cnJlbnQgRW50aXR5IGluIFNlcnZpY2Ugd2FzIGNhbGxlZCcpO1xuICAgICAgICAgICAgcmV0dXJuIF9jdXJyZW50RW50aXR5O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0Q3VycmVudEVudGl0eSAobykge1xuICAgICAgICAgICAgaWYgKCAhXy5pc0VxdWFsKF9jdXJyZW50RW50aXR5LCBvKSApIHtcbiAgICAgICAgICAgICAgICBfY3VycmVudEVudGl0eSA9IG87XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdjZy5jdXJyZW50LWVudGl0eS51cGRhdGUnLCBfY3VycmVudEVudGl0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBtb2JpbGVDaGVjayAoKSB7XG4gICAgICAgICAgICB2YXIgcmVnZXggPSAvKGFuZHJvaWR8YmJcXGQrfG1lZWdvKS4rbW9iaWxlfGF2YW50Z298YmFkYVxcL3xibGFja2JlcnJ5fGJsYXplcnxjb21wYWx8ZWxhaW5lfGZlbm5lY3xoaXB0b3B8aWVtb2JpbGV8aXAoaG9uZXxvZCl8aXJpc3xraW5kbGV8bGdlIHxtYWVtb3xtaWRwfG1tcHxtb2JpbGUuK2ZpcmVmb3h8bmV0ZnJvbnR8b3BlcmEgbShvYnxpbilpfHBhbG0oIG9zKT98cGhvbmV8cChpeGl8cmUpXFwvfHBsdWNrZXJ8cG9ja2V0fHBzcHxzZXJpZXMoWzQ2XSkwfHN5bWJpYW58dHJlb3x1cFxcLihicm93c2VyfGxpbmspfHZvZGFmb25lfHdhcHx3aW5kb3dzIGNlfHhkYXx4aWluby9pO1xuICAgICAgICAgICAgdmFyIHJlZ2V4MiA9IC8xMjA3fDYzMTB8NjU5MHwzZ3NvfDR0aHB8NTBbMS02XWl8Nzcwc3w4MDJzfGEgd2F8YWJhY3xhYyhlcnxvb3xzLSl8YWkoa298cm4pfGFsKGF2fGNhfGNvKXxhbW9pfGFuKGV4fG55fHl3KXxhcHR1fGFyKGNofGdvKXxhcyh0ZXx1cyl8YXR0d3xhdShkaXwtbXxyIHxzICl8YXZhbnxiZShja3xsbHxucSl8YmkobGJ8cmQpfGJsKGFjfGF6KXxicihbZXZdKXd8YnVtYnxidy0oW251XSl8YzU1XFwvfGNhcGl8Y2N3YXxjZG0tfGNlbGx8Y2h0bXxjbGRjfGNtZC18Y28obXB8bmQpfGNyYXd8ZGEoaXR8bGx8bmcpfGRidGV8ZGMtc3xkZXZpfGRpY2F8ZG1vYnxkbyhbY3BdKW98ZHMoMTJ8LWQpfGVsKDQ5fGFpKXxlbShsMnx1bCl8ZXIoaWN8azApfGVzbDh8ZXooWzQtN10wfG9zfHdhfHplKXxmZXRjfGZseShbLV9dKXxnMSB1fGc1NjB8Z2VuZXxnZi01fGctbW98Z28oXFwud3xvZCl8Z3IoYWR8dW4pfGhhaWV8aGNpdHxoZC0oW21wdF0pfGhlaS18aGkocHR8dGEpfGhwKCBpfGlwKXxocy1jfGh0KGMoWy0gX2FncHN0XSl8dHApfGh1KGF3fHRjKXxpLSgyMHxnb3xtYSl8aTIzMHxpYWMoWyAtL10pfGlicm98aWRlYXxpZzAxfGlrb218aW0xa3xpbm5vfGlwYXF8aXJpc3xqYShbdHZdKWF8amJyb3xqZW11fGppZ3N8a2RkaXxrZWppfGtndChbIC9dKXxrbG9ufGtwdCB8a3djLXxreW8oW2NrXSl8bGUobm98eGkpfGxnKCBnfFxcLyhba2x1XSl8NTB8NTR8LVthLXddKXxsaWJ3fGx5bnh8bTEtd3xtM2dhfG01MFxcL3xtYSh0ZXx1aXx4byl8bWMoMDF8MjF8Y2EpfG0tY3J8bWUocmN8cmkpfG1pKG84fG9hfHRzKXxtbWVmfG1vKDAxfDAyfGJpfGRlfGRvfHQoWy0gb3ZdKXx6eil8bXQoNTB8cDF8diApfG13YnB8bXl3YXxuMTBbMC0yXXxuMjBbMi0zXXxuMzAoWzAyXSl8bjUwKFswMjVdKXxuNygwKFswMV0pfDEwKXxuZSgoW2NtXSktfG9ufHRmfHdmfHdnfHd0KXxub2soWzZpXSl8bnpwaHxvMmltfG9wKHRpfHd2KXxvcmFufG93ZzF8cDgwMHxwYW4oW2FkdF0pfHBkeGd8cGcoMTN8LShbMS04XXxjKSl8cGhpbHxwaXJlfHBsKGF5fHVjKXxwbi0yfHBvKGNrfHJ0fHNlKXxwcm94fHBzaW98cHQtZ3xxYS1hfHFjKDA3fDEyfDIxfDMyfDYwfC1bMi03XXxpLSl8cXRla3xyMzgwfHI2MDB8cmFrc3xyaW05fHJvKHZlfHpvKXxzNTVcXC98c2EoZ2V8bWF8bW18bXN8bnl8dmEpfHNjKDAxfGgtfG9vfHAtKXxzZGtcXC98c2UoYyhbLTAxXSl8NDd8bWN8bmR8cmkpfHNnaC18c2hhcnxzaWUoWy1tXSl8c2stMHxzbCg0NXxpZCl8c20oYWx8YXJ8YjN8aXR8dDUpfHNvKGZ0fG55KXxzcCgwMXxoLXx2LXx2ICl8c3koMDF8bWIpfHQyKDE4fDUwKXx0NigwMHwxMHwxOCl8dGEoZ3R8bGspfHRjbC18dGRnLXx0ZWwoW2ltXSl8dGltLXx0LW1vfHRvKHBsfHNoKXx0cyg3MHxtLXxtM3xtNSl8dHgtOXx1cChcXC5ifGcxfHNpKXx1dHN0fHY0MDB8djc1MHx2ZXJpfHZpKHJnfHRlKXx2ayg0MHw1WzAtM118LXYpfHZtNDB8dm9kYXx2dWxjfHZ4KDUyfDUzfDYwfDYxfDcwfDgwfDgxfDgzfDg1fDk4KXx3M2MoWy0gXSl8d2ViY3x3aGl0fHdpKGcgfG5jfG53KXx3bWxifHdvbnV8eDcwMHx5YXMtfHlvdXJ8emV0b3x6dGUtL2k7XG4gICAgICAgICAgICB2YXIgYWdlbnRDaGVjayA9ICR3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCB8fCAkd2luZG93Lm5hdmlnYXRvci52ZW5kb3IgfHwgJHdpbmRvdy5vcGVyYTtcblxuICAgICAgICAgICAgcmV0dXJuIHJlZ2V4LnRlc3QoYWdlbnRDaGVjaykgfHwgcmVnZXgyLnRlc3QoYWdlbnRDaGVjay5zdWJzdHIoMCwgNCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RW50aXR5TGlzdCAoKSB7IHJldHVybiBlbnRpdHlMaXN0OyB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0RW50aXR5TGlzdCAoYSkge1xuICAgICAgICAgICAgaWYgKCBBcnJheS5pc0FycmF5KGEpICkge1xuICAgICAgICAgICAgICAgIGVudGl0eUxpc3QgPSBhO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gV0FSTklORywgTVVUQUJMRSEgIEV2ZXJ5b25lIHdpbGwgc2VlIGlmIHlvdSB1cGRhdGUgcHJvcGVydGllcyBvZiB0aGlzXG4gICAgICAgIGZ1bmN0aW9uIGdldENvbm5lY3Rpb25PYmogKCkgeyByZXR1cm4gY29ubmVjdGlvbk9iajsgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldENvbm5lY3Rpb25PYmogKG8pIHtcbiAgICAgICAgICAgIGlmICggdXRpbHMuaXNPYmplY3QobykgKSB7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbk9iaiA9IG87XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRDdXJyZW50VmlldyAoKSB7IHJldHVybiBjdXJyZW50VmlldzsgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldEN1cnJlbnRWaWV3IChzKSB7XG4gICAgICAgICAgICBpZiAoIHV0aWxzLmlzU3RyaW5nKHMpICYmIGF2YWlsYWJsZVZpZXdzLmluY2x1ZGVzKHMpICkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRWaWV3ID0gcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldElzRWRpdCAoKSB7IHJldHVybiBpc0VkaXQ7IH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRJc0VkaXQgKGUpIHsgaXNFZGl0ID0gISFlOyB9XG5cbiAgICAgICAgc2VsZi5nZXRDdXJyZW50RW50aXR5ID0gZ2V0Q3VycmVudEVudGl0eTtcbiAgICAgICAgc2VsZi5zZXRDdXJyZW50RW50aXR5ID0gc2V0Q3VycmVudEVudGl0eTtcbiAgICAgICAgc2VsZi5tb2JpbGVDaGVjayA9IG1vYmlsZUNoZWNrO1xuICAgICAgICBzZWxmLmdldEVudGl0eUxpc3QgPSBnZXRFbnRpdHlMaXN0O1xuICAgICAgICBzZWxmLnNldEVudGl0eUxpc3QgPSBzZXRFbnRpdHlMaXN0O1xuICAgICAgICBzZWxmLmdldENvbm5lY3Rpb25PYmogPSBnZXRDb25uZWN0aW9uT2JqO1xuICAgICAgICBzZWxmLnNldENvbm5lY3Rpb25PYmogPSBzZXRDb25uZWN0aW9uT2JqO1xuICAgICAgICBzZWxmLmdldEN1cnJlbnRWaWV3ID0gZ2V0Q3VycmVudFZpZXc7XG4gICAgICAgIHNlbGYuc2V0Q3VycmVudFZpZXcgPSBzZXRDdXJyZW50VmlldztcbiAgICAgICAgc2VsZi5nZXRJc0VkaXQgPSBnZXRJc0VkaXQ7XG4gICAgICAgIHNlbGYuc2V0SXNFZGl0ID0gc2V0SXNFZGl0O1xuICAgIH1cblxuICAgIFNlcnZpY2UuJGluamVjdCA9IFsgJyRyb290U2NvcGUnLCAnJHdpbmRvdycsICdfJywgJ2NnVXRpbFNlcnZpY2UnIF07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLnNlcnZpY2UoJ2NnTWFpblNlcnZpY2UnLCBTZXJ2aWNlKTtcblxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIGZpbHRlckJ5UHJvcGVydHkgKGtleSwgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gZVsga2V5IF0gPT09IHZhbHVlO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIENvbnRyb2xsZXIgKCRzY29wZSwgZW50aXR5U2VydmljZSwgY2dTZXJ2aWNlKSB7XG4gICAgICAgIHZhciBlbnRpdHlUeXBlcyA9IGVudGl0eVNlcnZpY2UuZ2V0RW50aXR5VHlwZXMoKTtcblxuICAgICAgICAkc2NvcGUuY2F0ZWdvcml6ZWRFbnRpdGllcyA9IHt9O1xuXG4gICAgICAgICRzY29wZS51cGRhdGVDdXJyZW50RW50aXR5ID0gdXBkYXRlQ3VycmVudEVudGl0eTtcblxuICAgICAgICAkc2NvcGUuJHdhdGNoKGNnU2VydmljZS5nZXRFbnRpdHlMaXN0LCB3YXRjaEVudGl0eUxpc3QpO1xuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUN1cnJlbnRFbnRpdHkgKGVudGl0eSkgeyBjZ1NlcnZpY2Uuc2V0Q3VycmVudEVudGl0eShlbnRpdHkpOyB9XG5cbiAgICAgICAgZnVuY3Rpb24gd2F0Y2hFbnRpdHlMaXN0ICgpIHtcbiAgICAgICAgICAgICRzY29wZS5jYXRlZ29yaXplZEVudGl0aWVzID0gT2JqZWN0XG4gICAgICAgICAgICAgICAgLmtleXMoZW50aXR5VHlwZXMpXG4gICAgICAgICAgICAgICAgLnJlZHVjZShmdW5jdGlvbiAocmVzdWx0LCB0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgb2JqWyB0eXBlIF0gPSBjZ1NlcnZpY2UuZ2V0RW50aXR5TGlzdCgpLmZpbHRlcihmaWx0ZXJCeVByb3BlcnR5KCd0eXBlJywgdHlwZSkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgcmVzdWx0LCBvYmopO1xuICAgICAgICAgICAgICAgIH0sIHt9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIENvbnRyb2xsZXIuJGluamVjdCA9IFsgJyRzY29wZScsICdlbnRpdHlTZXJ2aWNlJywgJ2NnTWFpblNlcnZpY2UnIF07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ292ZXJ2aWV3Q3RybCcsIENvbnRyb2xsZXIpO1xufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGVkZWYge09iamVjdH0gQ2dVdGlsU2VydmljZVxuICAgICAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGlzRGVmaW5lZFxuICAgICAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGlzT2JqZWN0XG4gICAgICogQHByb3BlcnR5IHtGdW5jdGlvbn0gaXNTdHJpbmdcbiAgICAgKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBnZXRQcm9wZXJ0eUZyb21PYmpcbiAgICAgKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBsb29wQW5kSW5pdFxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmZiB0eXBlb2YgbyBpcyB1bmRlZmluZWQgb3IgbyBpcyBudWxsXG4gICAgICogQHBhcmFtIG9cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0RlZmluZWQobykge1xuICAgICAgICByZXR1cm4gISh0eXBlb2YgbyA9PT0gXCJ1bmRlZmluZWRcIiB8fCBvID09PSBudWxsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWZmIG8gaXMgZGVmaW5lZCBhbmQgdHlwZW9mIG8gaXMgb2JqZWN0IGFuZCBvIGlzIG5vdCBhcnJheVxuICAgICAqIEBwYXJhbSBvXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNPYmplY3Qobykge1xuICAgICAgICByZXR1cm4gaXNEZWZpbmVkKG8pICYmICFBcnJheS5pc0FycmF5KG8pICYmICh0eXBlb2YgbyA9PT0gXCJvYmplY3RcIik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmZiBvIGlzIGRlZmluZWQgYW5kIHR5cGVvZiBvIGlzIHN0cmluZ1xuICAgICAqIEBwYXJhbSBvXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNTdHJpbmcobykge1xuICAgICAgICByZXR1cm4gaXNEZWZpbmVkKG8pICYmIHR5cGVvZiBvID09PSBcInN0cmluZ1wiO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBtZXRob2QgdGhhdCB0YWtlcyB0aGUgcHJvcGVydHkgdG8gYmUgZm91bmQgYW5kIGEgZGVmYXVsdCB2YWx1ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogLSB0aGUgb2JqZWN0IHRvIHNlYXJjaCBpblxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRQcm9wZXJ0eUZyb21PYmoob2JqKSB7XG4gICAgICAgIHZhciBkZWZPYmogPSBpc09iamVjdChvYmopID8gb2JqIDoge307XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChwcm9wZXJ0eSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBpc0RlZmluZWQoZGVmYXVsdFZhbHVlKSA/IGRlZmF1bHRWYWx1ZSA6IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gaXNEZWZpbmVkKGRlZk9ialtwcm9wZXJ0eV0pXG4gICAgICAgICAgICAgICAgPyBkZWZPYmpbcHJvcGVydHldXG4gICAgICAgICAgICAgICAgOiB2YWx1ZTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBOaWNlIHV0aWwgbWV0aG9kIGZvciBhcHBseWluZyB0aGUgY29uc3RydWN0b3IgbWV0aG9kIGZvciBhIGNsYXNzIHRvIGFuIGFycmF5IG9mIG9iamVjdHNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXkuPE9iamVjdD59IG1vZGVsQXJyYXlcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpbml0TW9kZWxGdW5jdGlvblxuICAgICAqIEByZXR1cm5zIHtBcnJheS48Kj59XG4gICAgICovXG4gICAgZnVuY3Rpb24gbG9vcEFuZEluaXQobW9kZWxBcnJheSwgaW5pdE1vZGVsRnVuY3Rpb24pIHtcbiAgICAgICAgdmFyIG5ld0FycmF5ID0gQXJyYXkuaXNBcnJheShtb2RlbEFycmF5KVxuICAgICAgICAgICAgPyBtb2RlbEFycmF5LmZpbHRlcihpc09iamVjdCkubWFwKGluaXRNb2RlbEZ1bmN0aW9uKVxuICAgICAgICAgICAgOiBbXTtcblxuICAgICAgICByZXR1cm4gbmV3QXJyYXkuY29uY2F0KFtpbml0TW9kZWxGdW5jdGlvbigpXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMge0NnVXRpbFNlcnZpY2V9XG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgZnVuY3Rpb24gU2VydmljZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiaXNEZWZpbmVkXCI6IGlzRGVmaW5lZCxcbiAgICAgICAgICAgIFwiaXNPYmplY3RcIjogaXNPYmplY3QsXG4gICAgICAgICAgICBcImlzU3RyaW5nXCI6IGlzU3RyaW5nLFxuXG4gICAgICAgICAgICBcImdldFByb3BlcnR5RnJvbU9ialwiOiBnZXRQcm9wZXJ0eUZyb21PYmosXG4gICAgICAgICAgICBcImxvb3BBbmRJbml0XCI6IGxvb3BBbmRJbml0XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKFwiY2l2aWMtZ3JhcGgudXRpbFwiKVxuICAgICAgICAuZmFjdG9yeShcImNnVXRpbFNlcnZpY2VcIiwgU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA3LzEvMTYuXG4gKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBhbmFseXRpY3NDdHJsKCRzY29wZSkge1xuXG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ2FuYWx5dGljc0N0cmwnLCBbJyRzY29wZScsIGFuYWx5dGljc0N0cmxdKTtcbn0pKGFuZ3VsYXIpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBDb25maWcoJGh0dHBQcm92aWRlcikge1xuICAgICAgICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXSA9IFwiWE1MSHR0cFJlcXVlc3RcIjtcbiAgICB9XG5cbiAgICBDb25maWcuJGluamVjdCA9IFtcIiRodHRwUHJvdmlkZXJcIl07XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKS5jb25maWcoQ29uZmlnKTtcblxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIGFwaVVybCA9IFwiaHR0cHM6Ly9hcGkuY2l2aWNncmFwaC5pby9hcGlcIjtcbiAgICAvL3ZhciBhcGlVcmwgPSBcIi9hcGlcIjtcblxuICAgIHZhciBkZWZhdWx0SGVhZGVyID0ge1xuICAgICAgICAvLyBcIkV2ZW50LU5hbWVcIjogXCJUZXN0LUV2ZW50XCJcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gU2VydmljZSgkaHR0cCwgJHEpIHtcbiAgICAgICAgZnVuY3Rpb24gbG9nQXBpRXJyb3IoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiUmVjaWV2ZWQgYW4gZXJyb3IgZnJvbSBBUEkgd2l0aCB0aGlzIG1lc3NhZ2U6ICVPXCIsIGVyci5kYXRhKTtcbiAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoZXJyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVud3JhcEFuZ3VsYXJIdHRwKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldCh1cmwsIHBhcmFtcykge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwXG4gICAgICAgICAgICAgICAgLmdldChhcGlVcmwgKyB1cmwsIHsgXCJwYXJhbXNcIjogcGFyYW1zLCBcImhlYWRlcnNcIjogZGVmYXVsdEhlYWRlciB9KVxuICAgICAgICAgICAgICAgIC50aGVuKHVud3JhcEFuZ3VsYXJIdHRwLCBsb2dBcGlFcnJvcik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBwb3N0KHVybCwgZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwXG4gICAgICAgICAgICAgICAgLnBvc3QoYXBpVXJsICsgdXJsLCBkYXRhLCB7IFwiaGVhZGVyc1wiOiBkZWZhdWx0SGVhZGVyIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4odW53cmFwQW5ndWxhckh0dHAsIGxvZ0FwaUVycm9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcImdldFwiOiBnZXQsXG4gICAgICAgICAgICBcInBvc3RcIjogcG9zdFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIFNlcnZpY2UuJGluamVjdCA9IFtcIiRodHRwXCIsIFwiJHFcIl07XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKS5mYWN0b3J5KFwiY2dBcGlDYWxsZXJcIiwgU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxuICovXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgZnVuY3Rpb24gU2VydmljZSh1dGlscykge1xuICAgICAgICBmdW5jdGlvbiBMb2NhdGlvbihvYmopIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIGdldFByb3BlcnR5ID0gdXRpbHMuZ2V0UHJvcGVydHlGcm9tT2JqKG9iaik7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkRm9ybWF0dGVkQWRkcmVzcygpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVmT2JqID0gdXRpbHMuaXNEZWZpbmVkKG9iaikgPyBvYmogOiB7fTtcbiAgICAgICAgICAgICAgICB2YXIgYWRkcmVzc0xpbmUgPSAodXRpbHMuaXNEZWZpbmVkKGRlZk9iai5hZGRyZXNzX2xpbmUpID8gZGVmT2JqLmFkZHJlc3NfbGluZSArICcgJyA6ICcnKTtcbiAgICAgICAgICAgICAgICB2YXIgbG9jYWxpdHkgPSAodXRpbHMuaXNEZWZpbmVkKGRlZk9iai5sb2NhbGl0eSkgPyBkZWZPYmoubG9jYWxpdHkgKyAnLCAnIDogJycpO1xuICAgICAgICAgICAgICAgIHZhciBjb3VudHJ5Q29kZSA9ICh1dGlscy5pc0RlZmluZWQoZGVmT2JqLmNvdW50cnlfY29kZSkgPyBkZWZPYmouY291bnRyeV9jb2RlICsgJyAnIDogJycpO1xuICAgICAgICAgICAgICAgIHZhciBwb3N0YWxDb2RlID0gKHV0aWxzLmlzRGVmaW5lZChkZWZPYmoucG9zdGFsX2NvZGUpID8gZGVmT2JqLnBvc3RhbF9jb2RlIDogJycpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIChhZGRyZXNzTGluZSArIGxvY2FsaXR5ICsgY291bnRyeUNvZGUgKyBwb3N0YWxDb2RlKS50cmltKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGYuaWQgPSBnZXRQcm9wZXJ0eShcImlkXCIpO1xuICAgICAgICAgICAgc2VsZi5hZGRyZXNzX2xpbmUgPSBnZXRQcm9wZXJ0eShcImFkZHJlc3NfbGluZVwiKTtcbiAgICAgICAgICAgIHNlbGYubG9jYWxpdHkgPSBnZXRQcm9wZXJ0eShcImxvY2FsaXR5XCIpO1xuICAgICAgICAgICAgc2VsZi5kaXN0cmljdCA9IGdldFByb3BlcnR5KFwiZGlzdHJpY3RcIik7XG4gICAgICAgICAgICBzZWxmLnBvc3RhbF9jb2RlID0gZ2V0UHJvcGVydHkoXCJwb3N0YWxfY29kZVwiKTtcbiAgICAgICAgICAgIHNlbGYuY291bnRyeSA9IGdldFByb3BlcnR5KFwiY291bnRyeVwiKTtcbiAgICAgICAgICAgIHNlbGYuY291bnRyeV9jb2RlID0gZ2V0UHJvcGVydHkoXCJjb3VudHJ5X2NvZGVcIik7XG4gICAgICAgICAgICBzZWxmLmNvb3JkaW5hdGVzID0gZ2V0UHJvcGVydHkoXCJjb29yZGluYXRlc1wiKTtcblxuICAgICAgICAgICAgLy8gVE9ETzogQ29udmVydCB0aGlzIHRvIGEgbWV0aG9kIHRoYXQgYnVpbGRzIGJhc2VkIG9mZiBvZiB0aGUgY3VycmVudCBvYmplY3QncyBwcm9wZXJ0aWVzLlxuICAgICAgICAgICAgLy8gVW5sZXNzIHRoaXMgaXMgbmVlZGVkIGZvciB0aGUgQVBJIHNwZWNpZmljYWxseSwgdGhlbiBoYXZlIHRoaXMgYnVpbHQgaW4gYSBzaW1pbGFyIGZ1bmN0aW9uIGFzIHRoZSBvbmUgaW5cbiAgICAgICAgICAgIC8vIEVudGl0eU1vZGVsIGZvciBidWlsZGluZyBBUEkgc3BlY2lmaWMgb2JqZWN0c1xuICAgICAgICAgICAgc2VsZi5mb3JtYXR0ZWRBZGRyZXNzID0gYnVpbGRGb3JtYXR0ZWRBZGRyZXNzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRMb2NhdGlvbk1vZGVsKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBMb2NhdGlvbihvYmopO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiZ2V0TG9jYXRpb25Nb2RlbFwiOiBnZXRMb2NhdGlvbk1vZGVsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgU2VydmljZS4kaW5qZWN0ID0gW1wiY2dVdGlsU2VydmljZVwiXTtcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnY2l2aWMtZ3JhcGguYXBpJylcbiAgICAgICAgLmZhY3RvcnkoJ2xvY2F0aW9uU2VydmljZScsIFNlcnZpY2UpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNy8xNi5cbiAqL1xuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlZGVmIHtPYmplY3R9IENnRW50aXR5U2VydmljZVxuICAgICAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGdldEVudGl0eU1vZGVsXG4gICAgICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZ2V0SW5mbHVlbmNlVHlwZXNcbiAgICAgKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBnZXRBbGxcbiAgICAgKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBzYXZlRW50aXR5XG4gICAgICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZ2V0RW50aXR5VHlwZXNcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEB0eXBlZGVmIHtvYmplY3R9IEVudGl0eVR5cGVPYmpcbiAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IEdvdmVybm1lbnRcbiAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IEZvci1Qcm9maXRcbiAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IE5vbi1Qcm9maXRcbiAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IEluZGl2aWR1YWxcbiAgICAgKi9cblxuICAgIC8qKiBAdHlwZSB7RW50aXR5VHlwZU9ian0gKi9cbiAgICB2YXIgZW50aXR5VHlwZU9iaiA9IHtcbiAgICAgICAgXCJHb3Zlcm5tZW50XCI6IHRydWUsXG4gICAgICAgIFwiRm9yLVByb2ZpdFwiOiB0cnVlLFxuICAgICAgICBcIk5vbi1Qcm9maXRcIjogdHJ1ZSxcbiAgICAgICAgXCJJbmRpdmlkdWFsXCI6IHRydWVcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gZ2V0SW5mbHVlbmNlVHlwZXMoKSB7XG4gICAgICAgIHJldHVybiBbXCJMb2NhbFwiLCBcIk5hdGlvbmFsXCIsIFwiR2xvYmFsXCJdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBhcGlDYWxsZXJcbiAgICAgKiBAcGFyYW0gZnVuQ29ublNlcnZpY2VcbiAgICAgKiBAcGFyYW0gY29ublNlcnZpY2VcbiAgICAgKiBAcGFyYW0gZmluYW5jZVNlcnZpY2VcbiAgICAgKiBAcGFyYW0gbG9jYXRpb25TZXJ2aWNlXG4gICAgICogQHBhcmFtIGNhdGVnb3J5U2VydmljZVxuICAgICAqIEBwYXJhbSB1dGlsc1xuICAgICAqIEByZXR1cm5zIHtDZ0VudGl0eVNlcnZpY2V9XG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgZnVuY3Rpb24gU2VydmljZShhcGlDYWxsZXIsIGZ1bkNvbm5TZXJ2aWNlLCBjb25uU2VydmljZSwgZmluYW5jZVNlcnZpY2UsIGxvY2F0aW9uU2VydmljZSwgY2F0ZWdvcnlTZXJ2aWNlLCB1dGlscykge1xuXG4gICAgICAgIGZ1bmN0aW9uIEVudGl0eShvYmopIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIHZhciBkZWZPYmogPSB1dGlscy5pc0RlZmluZWQob2JqKSA/IG9iaiA6IHt9O1xuICAgICAgICAgICAgdmFyIGdldFByb3BlcnR5ID0gdXRpbHMuZ2V0UHJvcGVydHlGcm9tT2JqKG9iaik7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlREJNb2RlbCgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGJNb2RlbCA9IG5ldyBFbnRpdHkoc2VsZik7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5sb2NhdGlvbnMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5sb2NhdGlvbnMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5ncmFudHNfcmVjZWl2ZWQucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5ncmFudHNfcmVjZWl2ZWQucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5ncmFudHNfZ2l2ZW4ucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5ncmFudHNfZ2l2ZW4ucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5pbnZlc3RtZW50c19yZWNlaXZlZC5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmludmVzdG1lbnRzX3JlY2VpdmVkLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuaW52ZXN0bWVudHNfbWFkZS5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmludmVzdG1lbnRzX21hZGUucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5kYXRhX2dpdmVuLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZGF0YV9naXZlbi5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmRhdGFfcmVjZWl2ZWQucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5kYXRhX3JlY2VpdmVkLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuY29sbGFib3JhdGlvbnMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5jb2xsYWJvcmF0aW9ucy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmtleV9wZW9wbGUucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5rZXlfcGVvcGxlLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZW1wbG95bWVudHMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5lbXBsb3ltZW50cy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLnJldmVudWVzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwucmV2ZW51ZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5leHBlbnNlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmV4cGVuc2VzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuY2F0ZWdvcmllcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmNhdGVnb3JpZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5kZXNjcmlwdGlvbiA9ICcnO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRiTW9kZWw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGYuaWQgPSBnZXRQcm9wZXJ0eShcImlkXCIpO1xuICAgICAgICAgICAgc2VsZi5uYW1lID0gZ2V0UHJvcGVydHkoXCJuYW1lXCIpO1xuICAgICAgICAgICAgc2VsZi5pbmZsdWVuY2UgPSBnZXRQcm9wZXJ0eShcImluZmx1ZW5jZVwiKTtcbiAgICAgICAgICAgIHNlbGYudHlwZSA9IGdldFByb3BlcnR5KFwidHlwZVwiKTtcbiAgICAgICAgICAgIHNlbGYubmlja25hbWUgPSBnZXRQcm9wZXJ0eShcIm5pY2tuYW1lXCIpO1xuICAgICAgICAgICAgc2VsZi51cmwgPSBnZXRQcm9wZXJ0eShcInVybFwiKTtcbiAgICAgICAgICAgIHNlbGYudHdpdHRlcl9oYW5kbGUgPSBnZXRQcm9wZXJ0eShcInR3aXR0ZXJfaGFuZGxlXCIpO1xuICAgICAgICAgICAgc2VsZi5lbXBsb3llZXMgPSBnZXRQcm9wZXJ0eShcImVtcGxveWVlc1wiKTtcblxuICAgICAgICAgICAgc2VsZi5sb2NhdGlvbnMgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmoubG9jYXRpb25zLCBsb2NhdGlvblNlcnZpY2UuZ2V0TG9jYXRpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmdyYW50c19yZWNlaXZlZCA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5ncmFudHNfcmVjZWl2ZWQsIGZ1bkNvbm5TZXJ2aWNlLmdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5pbnZlc3RtZW50c19yZWNlaXZlZCA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5pbnZlc3RtZW50c19yZWNlaXZlZCwgZnVuQ29ublNlcnZpY2UuZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmdyYW50c19naXZlbiA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5ncmFudHNfZ2l2ZW4sIGZ1bkNvbm5TZXJ2aWNlLmdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5pbnZlc3RtZW50c19tYWRlID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmludmVzdG1lbnRzX21hZGUsIGZ1bkNvbm5TZXJ2aWNlLmdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5kYXRhX2dpdmVuID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmRhdGFfZ2l2ZW4sIGNvbm5TZXJ2aWNlLmdldENvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmRhdGFfcmVjZWl2ZWQgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouZGF0YV9yZWNlaXZlZCwgY29ublNlcnZpY2UuZ2V0Q29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuY29sbGFib3JhdGlvbnMgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouY29sbGFib3JhdGlvbnMsIGNvbm5TZXJ2aWNlLmdldENvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmtleV9wZW9wbGUgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmoua2V5X3Blb3BsZSwgY29ublNlcnZpY2UuZ2V0Q29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuZW1wbG95bWVudHMgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouZW1wbG95bWVudHMsIGNvbm5TZXJ2aWNlLmdldENvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLnJldmVudWVzID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLnJldmVudWVzLCBmaW5hbmNlU2VydmljZS5nZXRGaW5hbmNlTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5leHBlbnNlcyA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5leHBlbnNlcywgZmluYW5jZVNlcnZpY2UuZ2V0RmluYW5jZU1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuY2F0ZWdvcmllcyA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5jYXRlZ29yaWVzLCBjYXRlZ29yeVNlcnZpY2UuZ2V0Q2F0ZWdvcnlNb2RlbCk7XG5cbiAgICAgICAgICAgIHNlbGYuZ2VuZXJhdGVEQk1vZGVsID0gZ2VuZXJhdGVEQk1vZGVsO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RW50aXR5TW9kZWwob2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEVudGl0eShvYmopO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0QWxsKCkge1xuICAgICAgICAgICAgcmV0dXJuIGFwaUNhbGxlci5nZXQoJy9lbnRpdGllcycpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2F2ZUVudGl0eShlbnRpdHkpIHtcbiAgICAgICAgICAgIHJldHVybiBhcGlDYWxsZXIucG9zdChcIi9zYXZlXCIsIHsgXCJlbnRpdHlcIjogZW50aXR5IH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiZ2V0RW50aXR5TW9kZWxcIjogZ2V0RW50aXR5TW9kZWwsXG4gICAgICAgICAgICBcImdldEluZmx1ZW5jZVR5cGVzXCI6IGdldEluZmx1ZW5jZVR5cGVzLFxuICAgICAgICAgICAgXCJnZXRBbGxcIjogZ2V0QWxsLFxuICAgICAgICAgICAgXCJzYXZlRW50aXR5XCI6IHNhdmVFbnRpdHksXG4gICAgICAgICAgICAvKiogQHJldHVybnMge0VudGl0eVR5cGVPYmp9ICovXG4gICAgICAgICAgICBcImdldEVudGl0eVR5cGVzXCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZW50aXR5VHlwZU9iajtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBTZXJ2aWNlLiRpbmplY3QgPSBbXG4gICAgICAgIFwiY2dBcGlDYWxsZXJcIixcbiAgICAgICAgXCJmdW5kaW5nQ29ubmVjdGlvblNlcnZpY2VcIixcbiAgICAgICAgXCJjb25uZWN0aW9uU2VydmljZVwiLFxuICAgICAgICBcImZpbmFuY2VTZXJ2aWNlXCIsXG4gICAgICAgIFwibG9jYXRpb25TZXJ2aWNlXCIsXG4gICAgICAgIFwiY2F0ZWdvcnlTZXJ2aWNlXCIsXG4gICAgICAgIFwiY2dVdGlsU2VydmljZVwiXG4gICAgXTtcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKVxuICAgICAgICAuZmFjdG9yeShcImVudGl0eVNlcnZpY2VcIiwgU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyLCBkMywgTCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgZnVuY3Rpb24gQ29udHJvbGxlcigkc2NvcGUsIF8sIGxlYWZsZXREYXRhLCBjZ1NlcnZpY2UpIHtcblxuICAgICAgICBhY3RpdmF0ZSgpO1xuXG4gICAgICAgICRzY29wZS4kb24oXCJjZy5kYXRhLWxvYWRlZFwiLCBhY3RpdmF0ZSk7XG5cbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAgICAgICAkc2NvcGUub3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBjZW50ZXIgIDoge1xuICAgICAgICAgICAgICAgICAgICBsYXQgOiAyMC4wMCxcbiAgICAgICAgICAgICAgICAgICAgbG5nIDogLTQwLjAwLFxuICAgICAgICAgICAgICAgICAgICB6b29tOiAzXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgICAgICAgICB0aWxlTGF5ZXIgICAgICAgICA6ICdodHRwczovL2FwaS50aWxlcy5tYXBib3guY29tL3Y0L21hcGJveC5saWdodC97en0ve3h9L3t5fS5wbmc/YWNjZXNzX3Rva2VuPXBrLmV5SjFJam9pWkdGMmFXUnNjbTUwSWl3aVlTSTZJakEwTTJSa056TXpaV0ptTnpFek5HWXpNVGRoWVRFeFl6QXlabVU0WlRFMUluMC5UTllsRnRhMlZJdHJrbjRMMFo5QkpRJyxcbiAgICAgICAgICAgICAgICAgICAgdGlsZUxheWVyT3B0aW9ucyAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRlY3RSZXRpbmE6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXVzZVRpbGVzICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHpvb21Db250cm9sICAgICAgIDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0aW9uQ29udHJvbDogZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBsZWFmbGV0RGF0YS5nZXRNYXAoKS50aGVuKGhhbmRsZUxlYWZsZXREYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVBpZUNoYXJ0KG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBkYXRhICAgPSBvcHRpb25zLmRhdGE7XG4gICAgICAgICAgICB2YXIgcGllICAgID0gZDMubGF5b3V0XG4gICAgICAgICAgICAgICAgLnBpZSgpXG4gICAgICAgICAgICAgICAgLnNvcnQobnVsbClcbiAgICAgICAgICAgICAgICAudmFsdWUoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQudmFsdWU7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBhcmMgICAgPSBkMy5zdmcuYXJjKCkub3V0ZXJSYWRpdXMob3B0aW9ucy5yKS5pbm5lclJhZGl1cyhvcHRpb25zLnIgLSAxMCk7XG4gICAgICAgICAgICB2YXIgY2VudGVyID0gb3B0aW9ucy5yICsgb3B0aW9ucy5zdHJva2VXaWR0aDtcbiAgICAgICAgICAgIHZhciB3ICAgICAgPSBjZW50ZXIgKiAyO1xuICAgICAgICAgICAgdmFyIGggICAgICA9IHc7XG4gICAgICAgICAgICB2YXIgc3ZnICAgID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGQzLm5zLnByZWZpeC5zdmcsICdzdmcnKTtcbiAgICAgICAgICAgIHZhciB2aXMgICAgPSBkMy5zZWxlY3Qoc3ZnKVxuICAgICAgICAgICAgICAgIC5kYXRhKGRhdGEpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3BpZWNoYXJ0JylcbiAgICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLCB3KVxuICAgICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBoKTtcblxuICAgICAgICAgICAgdmFyIGFyY3MgPSB2aXMuc2VsZWN0QWxsKCcuYXJjJylcbiAgICAgICAgICAgICAgICAuZGF0YShwaWUoZGF0YSkpXG4gICAgICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKCdnJylcbiAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnYXJjJylcbiAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgY2VudGVyICsgJywnICsgY2VudGVyICsgJyknKTtcblxuICAgICAgICAgICAgYXJjcy5hcHBlbmQoJ3BhdGgnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgYXJjKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmRhdGEudHlwZSArICctYXJjJztcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYXJjcy5hcHBlbmQoXCJzdmc6dGV4dFwiKVxuICAgICAgICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uIChkLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5jb3VudDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIC00ICogb3B0aW9ucy5jb3VudC50b1N0cmluZygpLmxlbmd0aClcbiAgICAgICAgICAgICAgICAuYXR0cihcImR5XCIsIDUpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImFyY1RleHRcIik7XG5cbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cuWE1MU2VyaWFsaXplclxuICAgICAgICAgICAgICAgID8gKG5ldyB3aW5kb3cuWE1MU2VyaWFsaXplcigpKS5zZXJpYWxpemVUb1N0cmluZyhzdmcpXG4gICAgICAgICAgICAgICAgOiAoISEoc3ZnLnhtbClcbiAgICAgICAgICAgICAgICAgICAgPyBzdmcueG1sXG4gICAgICAgICAgICAgICAgICAgIDogJydcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlTGVhZmxldERhdGEobWFwKSB7XG4gICAgICAgICAgICB2YXIgZmlsdGVyZWRFbnRpdGllcyA9IGNnU2VydmljZS5nZXRFbnRpdHlMaXN0KCk7XG5cbiAgICAgICAgICAgIG1hcC5pbnZhbGlkYXRlU2l6ZSgpO1xuXG4gICAgICAgICAgICBuZXcgTC5Db250cm9sXG4gICAgICAgICAgICAgICAgLlpvb20oe3Bvc2l0aW9uOiAndG9wcmlnaHQnfSlcbiAgICAgICAgICAgICAgICAuYWRkVG8obWFwKTtcblxuICAgICAgICAgICAgbmV3IEwuQ29udHJvbFxuICAgICAgICAgICAgICAgIC5Mb2NhdGUoe3Bvc2l0aW9uOiAndG9wcmlnaHQnLCBzaG93UG9wdXA6IGZhbHNlLCBpY29uOiAnZmEgZmEtbG9jYXRpb24tYXJyb3cnfSlcbiAgICAgICAgICAgICAgICAuYWRkVG8obWFwKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gY2x1c3Rlckljb24oY2x1c3Rlcikge1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZHJlbiAgICAgICA9IGNsdXN0ZXIuZ2V0QWxsQ2hpbGRNYXJrZXJzKCk7XG4gICAgICAgICAgICAgICAgdmFyIHRvdGFsICAgICAgICAgID0gY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHZhciBjbHVzdGVyTWFya2VycyA9IF8ucGx1Y2soY2hpbGRyZW4sICdvcHRpb25zJyk7XG4gICAgICAgICAgICAgICAgdmFyIGNvdW50cyAgICAgICAgID0gXy5tYXAoXG4gICAgICAgICAgICAgICAgICAgIF8uY291bnRCeShjbHVzdGVyTWFya2VycywgJ3R5cGUnKSxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGNvdW50LCB0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyd0eXBlJzogdHlwZSwgJ3ZhbHVlJzogY291bnR9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIHZhciByICAgICAgICAgICAgICA9IDI4O1xuICAgICAgICAgICAgICAgIHZhciBzdHJva2VXaWR0aCAgICA9IDE7XG4gICAgICAgICAgICAgICAgdmFyIGljb25EaW0gICAgICAgID0gKHIgKyBzdHJva2VXaWR0aCkgKiAyO1xuICAgICAgICAgICAgICAgIHZhciBodG1sICAgICAgICAgICA9IGNyZWF0ZVBpZUNoYXJ0KFxuICAgICAgICAgICAgICAgICAgICB7ZGF0YTogY291bnRzLCByOiByLCBzdHJva2VXaWR0aDogc3Ryb2tlV2lkdGgsIGNvdW50OiB0b3RhbH1cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMLkRpdkljb24oe1xuICAgICAgICAgICAgICAgICAgICBodG1sICAgICA6IGh0bWwsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ21hcmtlci1jbHVzdGVyJyxcbiAgICAgICAgICAgICAgICAgICAgaWNvblNpemUgOiBuZXcgTC5wb2ludChpY29uRGltLCBpY29uRGltKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG1hcmtlckljb24gID0ge1xuICAgICAgICAgICAgICAgICdOb24tUHJvZml0JzogTC5pY29uKHtcbiAgICAgICAgICAgICAgICAgICAgaWNvblVybCA6ICdpbWcvbWFya2VyLW5vbnByb2Yuc3ZnJyxcbiAgICAgICAgICAgICAgICAgICAgaWNvblNpemU6IFs2MCwgNjBdXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgJ0Zvci1Qcm9maXQnOiBMLmljb24oe1xuICAgICAgICAgICAgICAgICAgICBpY29uVXJsIDogJ2ltZy9tYXJrZXItcHJvZi5zdmcnLFxuICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZTogWzYwLCA2MF1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAnSW5kaXZpZHVhbCc6IEwuaWNvbih7XG4gICAgICAgICAgICAgICAgICAgIGljb25VcmwgOiAnaW1nL21hcmtlci1pbmQuc3ZnJyxcbiAgICAgICAgICAgICAgICAgICAgaWNvblNpemU6IFs2MCwgNjBdXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgJ0dvdmVybm1lbnQnOiBMLmljb24oe1xuICAgICAgICAgICAgICAgICAgICBpY29uVXJsIDogJ2ltZy9tYXJrZXItZ292LnN2ZycsXG4gICAgICAgICAgICAgICAgICAgIGljb25TaXplOiBbNjAsIDYwXVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgbWFya2VycyA9IEwubWFya2VyQ2x1c3Rlckdyb3VwKHtcbiAgICAgICAgICAgICAgICBzcGlkZXJmeU9uTWF4Wm9vbTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzaG93Q292ZXJhZ2VPbkhvdmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpY29uQ3JlYXRlRnVuY3Rpb246IGNsdXN0ZXJJY29uLFxuICAgICAgICAgICAgICAgIG1heENsdXN0ZXJSYWRpdXM6IDMwLFxuICAgICAgICAgICAgICAgIHNwaWRlcmZ5RGlzdGFuY2VNdWx0aXBsaWVyOiAxLjNcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBvdXRlckxvb3AoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gaW5uZXJMb29wKGxvYykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV8uZXZlcnkobG9jLmNvb3JkaW5hdGVzKSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9jLmNvb3JkaW5hdGVzWzBdLnRvRml4ZWQoNSkgPT09ICc0MC43ODIwMCcgJiYgbG9jLmNvb3JkaW5hdGVzWzFdLnRvRml4ZWQoNSkgPT09ICctNzMuODMxNzAnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2MuY29vcmRpbmF0ZXNbMF0gPSA0MC43NzA2NTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYy5jb29yZGluYXRlc1sxXSA9IC03My45NzQwNjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgbSA9IEwubWFya2VyKGxvYy5jb29yZGluYXRlcywge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogbWFya2VySWNvbltlbnRpdHkudHlwZV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAndGl0bGUnOiBlbnRpdHkubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdlbnRpdHlfaWQnOiBlbnRpdHkuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbWVzc2FnZSc6IGVudGl0eS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiBlbnRpdHkudHlwZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgbWFya2Vycy5hZGRMYXllcihtKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBfLmZvckVhY2goZW50aXR5LmxvY2F0aW9ucywgaW5uZXJMb29wKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgXy5mb3JFYWNoKGZpbHRlcmVkRW50aXRpZXMsIG91dGVyTG9vcCk7XG4gICAgICAgICAgICBtYXAuYWRkTGF5ZXIobWFya2Vycyk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uTG9jYXRpb25FcnJvcihsZWFmbGV0RXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGxlYWZsZXRFcnJvci5tZXNzYWdlICsgXCIgICVPXCIsIGxlYWZsZXRFcnJvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG1hcC5vbignbG9jYXRpb25lcnJvcicsIG9uTG9jYXRpb25FcnJvcik7XG5cbiAgICAgICAgICAgIC8vIG1hcmtlcnMub24oJ2NsaWNrJywgZnVuY3Rpb24gKG1hcmtlcikge1xuICAgICAgICAgICAgLy8gICAgICRzY29wZS5zZXRFbnRpdHlJRChtYXJrZXIubGF5ZXIub3B0aW9ucy5lbnRpdHlfaWQpO1xuICAgICAgICAgICAgLy8gICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9ICRzY29wZS5jdXJyZW50RW50aXR5O1xuICAgICAgICAgICAgLy8gICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgICA9IHRydWU7XG4gICAgICAgICAgICAvLyAgICAgaWYgKCRzY29wZS5zZXR0aW5nc0VuYWJsZWQgJiYgJHNjb3BlLm1vYmlsZSkge1xuICAgICAgICAgICAgLy8gICAgICAgICAkc2NvcGUudG9nZ2xlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAvLyAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gbWFwLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSBudWxsO1xuICAgICAgICAgICAgLy8gICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgICA9IHRydWU7XG4gICAgICAgICAgICAvLyAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgICAvLyAkc2NvcGUuJG9uKCdzZWxlY3RJdGVtJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gICAgIHZhciBjb29yZGluYXRlcyA9ICRzY29wZS5jdXJyZW50RW50aXR5LmxvY2F0aW9ucy5sZW5ndGggPiAwID8gXy5wbHVjayhcbiAgICAgICAgICAgIC8vICAgICAgICAgJHNjb3BlLmN1cnJlbnRFbnRpdHkubG9jYXRpb25zLCAnY29vcmRpbmF0ZXMnKSA6IG51bGw7XG4gICAgICAgICAgICAvLyAgICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgbWFwLnNldFZpZXcoY29vcmRpbmF0ZXNbMF0sIDExKTtcbiAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAvLyAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAvLyAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBDb250cm9sbGVyLiRpbmplY3QgPSBbXG4gICAgICAgIFwiJHNjb3BlXCIsXG4gICAgICAgIFwiX1wiLFxuICAgICAgICBcImxlYWZsZXREYXRhXCIsXG4gICAgICAgIFwiY2dNYWluU2VydmljZVwiXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIERpcmVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwicmVzdHJpY3RcIjogXCJFXCIsXG4gICAgICAgICAgICBcInRlbXBsYXRlVXJsXCI6IFwianMvY29tcG9uZW50L21hcC9tYXAudGVtcGxhdGUuaHRtbFwiLFxuICAgICAgICAgICAgXCJjb250cm9sbGVyXCI6IENvbnRyb2xsZXJcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaFwiKVxuICAgICAgICAuZGlyZWN0aXZlKFwiY2dNYXBcIiwgRGlyZWN0aXZlKTtcbn0pKGFuZ3VsYXIsIGQzLCBMKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhciwgZDMpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBpc0RlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiAoUmUpQnVpbGRzIHRoZSBgc3ZnYCBlbGVtZW50IG9uIHRoZSBzY3JlZW4uICBUaGlzIGlzIGEgZG91YmxlLWVkZ2VkIHN3b3JkLiAgT24gb25lIGhhbmQsIG11Y2ggZWFzaWVyIHRvXG4gICAgICogdXBkYXRlIHRoZSBncmFwaCBvbiBkYXRhIGNoYW5nZSwgYXMgaXQganVzdCBkZWxldGVzIHRoZSBvbGQgYW5kIGxldHMgdXMgcmUtZHJhdyBldmVyeXRoaW5nLiAgT24gdGhlIG90aGVyIGhhbmQsXG4gICAgICogd2UgaGF2ZSB0byByZWRyYXcgZXZlcnl0aGluZywgd2hpY2ggY2FuIGJlIGEgdmVyeSBzbG93IHByb2Nlc3MgaWYgdGhlcmUgYXJlIHRvbyBtYW55IG5vZGVzIG9uIHRoZSBzY3JlZW4uXG4gICAgICpcbiAgICAgKiBUaGUgc2l6ZSBpcyBzZXQgdG8gZnVsbCB2aWV3IGhlaWdodCBhbmQgZnVsbCBjb250YWluZXIgd2lkdGguICBUaGlzIHNob3VsZCBtYWtlIENTUyBlYXNpZXIsIGFzIGl0IHdpbGwgcmVzcGVjdFxuICAgICAqIHRoZSB3aWR0aCBvZiB0aGUgZGlyZWN0aXZlLCBtZWFuaW5nIHdlIGRvbid0IGhhdmUgdG8gd29ycnkgYWJvdXQgZG9pbmcgd2VpcmQgQ1NTIGluIGhlcmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcm9vdCAtIFRoZSByb290IGVsZW1lbnQsIHdoaWNoIHNob3VsZCBiZSBwcm92aWRlZCBieSBhbmd1bGFyIGluIHRoZSBsaW5rIGZ1bmN0aW9uXG4gICAgICogQHJldHVybnMgeyp9IC0gYSBuZXcgc3ZnIGVsZW1lbnRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBidWlsZFN2Z0VsZW1lbnQgKHJvb3QpIHtcbiAgICAgICAgLy8gRGVsZXRlIHRoZSBvbGQgZ3JhcGhcbiAgICAgICAgaWYgKCBpc0RlZmluZWQocm9vdC5zZWxlY3QoJ3N2ZycpKSApIHtcbiAgICAgICAgICAgIHJvb3Quc2VsZWN0KCdzdmcnKS5yZW1vdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByb290XG4gICAgICAgICAgICAuYXBwZW5kKCdzdmcnKVxuICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsICcxMDB2aCcpXG4gICAgICAgICAgICAuYXR0cignd2lkdGgnLCAnMTAwJScpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgaXMgc3RyYW5nZSBvbmUgdGhhdCBJIGhhdmUgY2xlYW5lZCB1cCBhIGJpdCBmcm9tIHRoZSBvbGQgZ3JhcGguICBJbiB0aGUgIG9sZCBncmFwaCwgdGhlcmUgd2FzIGFuIG9iamVjdFxuICAgICAqIGNhbGxlZCBzY2FsZSB0aGF0IGhhZCBhIGQzIHNxcnQgZnVuY3Rpb24gYnVpbHQgZm9yIGVtcGxveWVlcyBhbmQgZm9sbG93ZXJzLiAgSW5zdGVhZCBvZiB1c2luZyB0aGVpcnMsXG4gICAgICogSSBidWlsdCB0aGlzIGZ1bmN0aW9uIHRoYXQgYnVpbGRzIHRoZSBzY2FsZSBmdW5jdGlvbiBiYXNlZCBvbiB0aGUgZGF0YSBhbmQgcGFyYW1ldGVyIHRvIHNjYWxlIGJ5LlxuICAgICAqXG4gICAgICogVGhpcyBpcyBzbyB0aGF0IGV2ZXJ5IHRpbWUgdGhlIG5vZGUgbGlzdCBjaGFuZ2VzLCB0aGUgc2NhbGUgZnVuY3Rpb25zIGFyZSBlYXN5IHRvIHJlZ2VuZXJhdGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzaXplQnkgLSBUaGUgYXR0cmlidXRlIHRvIHNjYWxlIHRoZSBub2RlcyBieS4gIFRoaXMgd2lsbCBwcm9iYWJseSBjb21lIGZyb20gbmV0d29yayBzZXJ2aWNlXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSAtIFRoaXMgYWN0dWFsbHkgYnVpbGRzIHRoZSBmdW5jdGlvbiB0aGF0IGJ1aWxkcyB0aGUgc2NhbGUgZnVuY3Rpb24uICBTbyBqdXN0IGdpdmUgdGhlXG4gICAgICogcmVzdWx0IG9mIHRoaXMgZnVuY3Rpb24gdGhlIG5vZGUgbGlzdCBhbmQgaXQgd2lsbCBnaXZlIHlvdSB0aGUgc2NhbGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBidWlsZFNjYWxlRnVuY3Rpb24gKHNpemVCeSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG5vZGVMaXN0KSB7XG4gICAgICAgICAgICB2YXIgbG93ZXJCb3VuZFJhZGl1cyA9IDEwO1xuICAgICAgICAgICAgdmFyIHVwcGVyQm91bmRSYWRpdXMgPSA1MDtcbiAgICAgICAgICAgIHZhciBtYXhOb2RlUGFyYW0gPSBkMy5tYXgobm9kZUxpc3QsIGdldEdyYXBoT2JqUGFyYW0pO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRHcmFwaE9ialBhcmFtIChkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHYgPSBkLnZhbHVlWyBzaXplQnkgXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNGaW5pdGUodikgJiYgaXNEZWZpbmVkKHYpID8gdiA6IDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGQzLnNjYWxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgLnNxcnQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgIC5kb21haW4oWyA1LCBtYXhOb2RlUGFyYW0gXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAucmFuZ2UoWyBsb3dlckJvdW5kUmFkaXVzLCB1cHBlckJvdW5kUmFkaXVzIF0pKG9iai52YWx1ZVsgc2l6ZUJ5IF0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIGRlc2NyaWJlIHRoZSBmb3VyIGNvcm5lcnMgb2YgdGhlIGdyYXBoLiAgQnkgZGVmYXVsdCwgZm9yY2UgbGF5b3V0IGtlZXBzIHRoZSBub2RlcyBmb2N1c2VkIG9uIHRoZVxuICAgICAqIGNlbnRlciBvZiB0aGUgZ3JhcGgsIGJ1dCBpbiBvdXIgY2FzZSwgd2Ugd2FudCB0aGUgbm9kZXMgc2VwYXJhdGVkIHRvIGVhY2ggY29ybmVyLlxuICAgICAqXG4gICAgICogVGVjaG5pY2FsbHksIGlmIHlvdSB3YW50ZWQgdG8gZ2V0IGZhbmN5LCB5b3UgY291bGQgbWFrZSB0aGVtIGNsdXN0ZXIgYW55d2hlcmUgd2l0aGluIHRoZSBib3VuZHMsIGJ1dCB0aGVcbiAgICAgKiBvcmlnaW5hbCBjb2RlIGRpZCBjb3JuZXJzLCBzbyBJIGRpZCBjb3JuZXJzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJvdW5kcyAtIFByb2JhYmx5IHRoZSBzaXplIG9mIHRoZSBzdmcvcm9vdCBlbGVtZW50LCBidXQgY291bGQgYmUgYW55IGFyYml0cmFyeSB3aWR0aC9oZWlnaHQgb2JqZWN0XG4gICAgICogQHJldHVybnMgeyp9IC0gVGhlIHJldHVybiB2YWx1ZSBsb29rcyBsaWtlIHRoaXM6XG4gICAgICoge3tJbmRpdmlkdWFsOiB7eDogKiwgeTogKn0sICdGb3ItUHJvZml0Jzoge3g6ICosIHk6ICp9LCAnTm9uLVByb2ZpdCc6IHt4OiAqLCB5OiAqfSwgR292ZXJubWVudDoge3g6ICosIHk6ICp9fX1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBidWlsZEZvY2kgKGJvdW5kcykge1xuICAgICAgICBmdW5jdGlvbiBwZXJjZW50YWdlT2ZCb3VuZGFyeSAodikge1xuICAgICAgICAgICAgcmV0dXJuIHYgLyAzO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVzdE9mQm91bmRhcnkgKHYpIHtcbiAgICAgICAgICAgIHJldHVybiB2IC0gcGVyY2VudGFnZU9mQm91bmRhcnkodik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgJ0luZGl2aWR1YWwnOiB7XG4gICAgICAgICAgICAgICAgJ3gnOiBwZXJjZW50YWdlT2ZCb3VuZGFyeShib3VuZHMud2lkdGgpLFxuICAgICAgICAgICAgICAgICd5JzogcGVyY2VudGFnZU9mQm91bmRhcnkoYm91bmRzLmhlaWdodClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnRm9yLVByb2ZpdCc6IHtcbiAgICAgICAgICAgICAgICAneCc6IHBlcmNlbnRhZ2VPZkJvdW5kYXJ5KGJvdW5kcy53aWR0aCksXG4gICAgICAgICAgICAgICAgJ3knOiByZXN0T2ZCb3VuZGFyeShib3VuZHMuaGVpZ2h0KVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdOb24tUHJvZml0Jzoge1xuICAgICAgICAgICAgICAgICd4JzogcmVzdE9mQm91bmRhcnkoYm91bmRzLndpZHRoKSxcbiAgICAgICAgICAgICAgICAneSc6IHBlcmNlbnRhZ2VPZkJvdW5kYXJ5KGJvdW5kcy5oZWlnaHQpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ0dvdmVybm1lbnQnOiB7XG4gICAgICAgICAgICAgICAgJ3gnOiByZXN0T2ZCb3VuZGFyeShib3VuZHMud2lkdGgpLFxuICAgICAgICAgICAgICAgICd5JzogcmVzdE9mQm91bmRhcnkoYm91bmRzLmhlaWdodClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbm90aGVyIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgdGhlIG5vZGUgbGlzdC5cbiAgICAgKlxuICAgICAqIFRoaXMgb25lIGJ1aWxkcyB0aGUgY2hhcmdlIGZ1bmN0aW9uIGZvciB0aGUgZm9yY2UgbGF5b3V0LiAgVGhhdCBpcyB0aGUgcHJvcGVydHkgdGhhdCBwcmV2ZW50cyBub2RlcyBmcm9tXG4gICAgICogb3ZlcmxhcHBpbmcuICBUaGUgY2xvc2VyIHRvIDAsIHRoZSBtb3JlIHRoZSBvdmVybGFwLiAgU2V0dGluZ3MgY3VycmVudGx5IHJlZmxlY3Qgd2hhdCB0aGUgb3JpZ2luYWwgY29kZSBoYWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2l6ZUJ5IC0gU2luY2Ugd2UgbmVlZCB0aGUgc2l6ZSBvZiB0aGUgbm9kZSwgd2UgbmVlZCB0byBrbm93IHdoYXQgdG8gc2l6ZSBieS5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259XG4gICAgICovXG4gICAgZnVuY3Rpb24gYnVpbGRDaGFyZ2VGdW5jdGlvbiAoc2l6ZUJ5KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAobm9kZUxpc3QpIHtcbiAgICAgICAgICAgIHZhciBzaXplQnlTY2FsZSA9IGJ1aWxkU2NhbGVGdW5jdGlvbihzaXplQnkpKG5vZGVMaXN0KTtcblxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzRGVmaW5lZChkLnZhbHVlWyBzaXplQnkgXSlcbiAgICAgICAgICAgICAgICAgICAgPyAtMiAqIHNpemVCeVNjYWxlKGQpXG4gICAgICAgICAgICAgICAgICAgIDogLTIwO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGlzIGNsZWFuZXIgaW4gRVM2IG9yIGlmIEkgaGFkIGNyZWF0ZWQgYWN0dWFsIGdldHRlci9zZXR0ZXJzIGluc3RlYWQgb2YgbWVyZ2luZ1xuICAgICAqIHRoZW0gaW50byBhIHNpbmdsZSBtZXRob2QuICBCYXNpY2FsbHksIEkgbmVlZCB0byBjYWxsIGEgZnVuY3Rpb24gd2l0aG91dCBhY2NpZGVudGFsbHlcbiAgICAgKiBwYXNzaW5nIGFueSB2YWx1ZXMgdG8gaXQuXG4gICAgICpcbiAgICAgKiBGb3IgaW5zdGFuY2UsIGBzY29wZS53YXRjaGAgY2FuIHRha2UgYSBmdW5jdGlvbiBhcyB0aGUgZmlyc3QgYXJndW1lbnQsIGJ1dCBwYXNzZXMgdmFsdWVzIHRvIGl0LlxuICAgICAqIElmIEkgZGlkbid0IHdhbnQgdGhhdCB0byBoYXBwZW4sIEkgY291bGQganVzdCB3cmFwIHRoZSBhcmd1bWVudCBpbiB0aGlzIGFuZCBpdCB3b3VsZCBiZSBzYWZlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHdyYXBGbiAoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZuKCk7IH07IH1cblxuICAgIGZ1bmN0aW9uIERpcmVjdGl2ZSAoJHdpbmRvdywgXywgdXRpbHMsIGNnU2VydmljZSwgbmV0d29ya1NlcnZpY2UpIHtcbiAgICAgICAgLy8gV2hvIHJlYWxseSB3YW50cyB0byB0eXBlIGB1dGlscy5gIGV2ZXJ5IHRpbWU/XG4gICAgICAgIGlzRGVmaW5lZCA9IHV0aWxzLmlzRGVmaW5lZDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBmdW5jdGlvbiBpcyB0aGUgc2VjcmV0IHRvIG1ha2luZyBBbmd1bGFyIGFuZCBEMyBwbGF5IG5pY2UuICBGcm9tIHBhc3QgZXhwZXJpZW5jZSwgd3JpdGluZyBEMyBkaXJlY3RseVxuICAgICAgICAgKiBpbiBhbiBBbmd1bGFyIGNvbnRyb2xsZXIgb3Igc2VydmljZSBqdXN0IGRvZXNuJ3Qgd29yayBvdXQgd2VsbC4gIFRoZSBpc3N1ZSBpcyBBbmd1bGFyIGRvZXNuJ3QgbGlrZSBhbnlvbmVcbiAgICAgICAgICogYnV0IGl0c2VsZiB0b3VjaGluZyB0aGUgSFRNTCBvbmNlIGl0IGhhcyBiZWVuIHJlbmRlcmVkLiAgVGhpcyBmdW5jdGlvbiB3aWxsIGFsbG93IHVzIHRvIGRvIHdoYXQgd2UgbmVlZFxuICAgICAgICAgKiBiZWZvcmUgdGhlIEFuZ3VsYXIgcmVuZGVyaW5nIGhhcHBlbnMsIHNvIHdlIGNhbiBjcmVhdGUgYWxsIG9mIHRoZSBzdHVmZiB0aGF0IEQzIHdhbnRzIEFORCBnZXQgdGhlIGJlbmVmaXRcbiAgICAgICAgICogb2YgQW5ndWxhciBjbGVhbmluZyB1cCBmb3IgdXMgb25jZSB0aGUgZGlyZWN0aXZlIGhhcyBiZWVuIHJlbW92ZWQgZnJvbSB0aGUgc2NyZWVuLiAgV2luLVdpbi5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHNjb3BlIC0gVGhpcyBpcyB0aGUgc2FtZSBhcyBhIHNjb3BlIHZhbHVlIHRoYXQgaXMgcGFzc2VkIHRvIGEgY29udHJvbGxlclxuICAgICAgICAgKiBAcGFyYW0gZWxlbWVudCAtIFRoaXMgaXMgYW4gYXJyYXkgb2YgZWxlbWVudHMsIGJ1dCB0aGUgZmlyc3QgdmFsdWUgaXMgYWN0dWFsbHkganVzdCBvdXIgcm9vdCBlbGVtZW50XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBMaW5rRm4gKHNjb3BlLCBlbGVtZW50KSB7XG4gICAgICAgICAgICAvLyBHZXQgdGhlIHJvb3QgZWxlbWVudFxuICAgICAgICAgICAgdmFyIHJvb3QgPSBkMy5zZWxlY3QoZWxlbWVudFsgMCBdKTtcblxuICAgICAgICAgICAgLy8gVGhlc2Ugd2lsbCBzdG9yZSBvdXIgYnVpbGRlciBmdW5jdGlvbnMgdGhhdCBhcmUgcmV0dXJuZWQgZnJvbSB0aGUgYWJvdmUgZnVuY3Rpb25zLlxuICAgICAgICAgICAgdmFyIF9idWlsZFNjYWxlRnVuY3Rpb247XG4gICAgICAgICAgICB2YXIgX2J1aWxkQ2hhcmdlRnVuY3Rpb247XG5cbiAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGxpc3RlbmVyIHRoYXQgZ2V0cyByZWdpc3RlciBpbiB0aGUgcmVuZGVyIG1ldGhvZC4gIFdlIG5lZWQgdG8gY2FsbCBpdCBpbiBvcmRlciB0byByZW1vdmVcbiAgICAgICAgICAgIC8vIHRoZSBsaXN0ZW5lciB3aGVuZXZlciB3ZSBwbGFuIG9uIHJlZHJhd2luZyB0aGUgZ3JhcGguIEhlbmNlLCBpdCBpcyBkZWNsYXJlZCBhdCB0aGlzIHNjb3BlIGluc3RlYWRcbiAgICAgICAgICAgIC8vIG9mIGluc2lkZSB0aGUgcmVuZGVyIGZ1bmN0aW9uXG4gICAgICAgICAgICB2YXIgY3VycmVudEVudGl0eUxpc3RlbmVyO1xuXG4gICAgICAgICAgICAvLyBXaGVuZXZlciBhIHJlc2l6ZSBldmVudCBoYXBwZW5zLCByZWRyYXcgdGhlIGdyYXBoLCBidXQgZG9uJ3QgY29uc3RhbnRseSBkbyBpdC5cbiAgICAgICAgICAgICR3aW5kb3cub25yZXNpemUgPSBfLmRlYm91bmNlKG9uV2luZG93UmVzaXplKTtcblxuICAgICAgICAgICAgLy8gV2F0Y2ggZm9yIGNoYW5nZXMgdG8gdGhlIHNpemVCeSBzZXR0aW5nLiAgUHJvYmFibHkgd2lsbCBjaGFuZ2UgdGhpcyB0byBhIGxpc3RlbmVyIGxhdGVyIHNvIHRoYXQgaXRcbiAgICAgICAgICAgIC8vIGRvZXNuJ3QgY29uc3RhbnRseSBjaGVjayBmb3IgdGhlIHZhbHVlLiAgTG93IHByaW9yaXR5IGFzIHRoZSBmdW5jdGlvbiBpcyBjaGVhcFxuICAgICAgICAgICAgc2NvcGUuJHdhdGNoKHdyYXBGbihuZXR3b3JrU2VydmljZS5zaXplQnkpLCB3YXRjaFNpemVCeSk7XG5cbiAgICAgICAgICAgIC8vIFNhbWUgYXMgYWJvdmUsIG9ubHkgdGhpcyBvbmUgd2lsbCBhY3R1YWxseSByZWRyYXcgdGhlIGdyYXBoLiAgU3RpbGwsIHRoZSBhY3R1YWwgd2F0Y2hlcidzIGNoZWNrIGlzIGNoZWFwLFxuICAgICAgICAgICAgLy8gc28gY29udmVydGluZyB0byBldmVudCBsaXN0ZW5lciBpcyBzdGlsbCBub3QgYSBoaWdoIHByaW9yaXR5XG4gICAgICAgICAgICBzY29wZS4kd2F0Y2hHcm91cChbIHdyYXBGbihuZXR3b3JrU2VydmljZS5taW5Db25uZWN0aW9uKSwgd3JhcEZuKG5ldHdvcmtTZXJ2aWNlLnNpemVCeSkgXSwgcnVuKTtcblxuICAgICAgICAgICAgLy8gU2ltaWxhciB0byB0aGUgb25yZXNpemUgbGlzdGVuZXIgYWJvdmUuICBOb3QgZW50aXJlbHkgc3VyZSB0aGUgZGlmZmVyZW5jZSwgb25lIG9mIHRoZSB0d28gaXMgcHJvYmFibHlcbiAgICAgICAgICAgIC8vIG5vdCBuZWVkZWQuXG4gICAgICAgICAgICBzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKF8uZGVib3VuY2UoZ2V0V2luZG93Qm94KSwgcnVuKTtcblxuICAgICAgICAgICAgLy8gVGhpcyBpcyBraW5kIG9mIGFuIGV4cGVuc2l2ZSBvcGVyYXRpb24uICBIaWdoIHByaW9yaXR5IHRvIGNvbnZlcnQgdG8gYSBsaXN0ZW5lci4gIEl0IGlzIHdhaXRpbmcgZm9yXG4gICAgICAgICAgICAvLyBuZXcgZGF0YSBmcm9tIHRoZSBBUEksIHNvIHRoYXQgaXMgYW4gZXZlbnQgdGhlIGVudGlyZSBhcHAgbmVlZHMgdG8gcmVsb2FkIG9uLlxuICAgICAgICAgICAgc2NvcGUuJHdhdGNoKG5ldHdvcmtTZXJ2aWNlLmdldEdyYXBoRGF0YSwgcnVuLCB0cnVlKTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaGlzIGZ1bmN0aW9uIGRvZXNuJ3QgaW1tZWRpYXRlbHkgbWFrZSBzZW5zZS4gIEl0IHJldHVybnMgYW4gYXJyYXkgYmVjYXVzZSBpdCBpcyB1c2VkIGZvclxuICAgICAgICAgICAgICogYHNjb3BlLiR3YXRjaENvbGxlY3Rpb25gLiAgTGlrZSBJIHNhaWQgYWJvdmUsIEkgZG9uJ3QgdGhpbmsgdGhpcyBpcyB3b3JraW5nIHByb3Blcmx5LCBhcyBJIGFtIG5vdCBzdXJlXG4gICAgICAgICAgICAgKiB0aGF0IHRoZSBgd2F0Y2hDb2xsZWN0aW9uYCBtZXRob2QgY2FsbGluZyBpdCB3aWxsIGdpdmUgdXMgdGhlIHByb3BlciBkYXRhLCBidXQgaGF2ZW4ndCBjaGVja2VkIGl0LlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHsqW119XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFdpbmRvd0JveCAoKSB7XG4gICAgICAgICAgICAgICAgLy8gUmV0dXJucyB0aGUgaW5uZXIgd2lkdGggb2YgdGhlIGJyb3dzZXIgd2luZG93LCBmb3IgcmVmcmVzaGluZyBkMyBncmFwaFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldFdpbmRvd1dpZHRoICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KVsgMCBdLmlubmVyV2lkdGg7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0V2luZG93SGVpZ2h0ICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KVsgMCBdLmlubmVySGVpZ2h0O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBbIGdldFdpbmRvd0hlaWdodCgpLCBnZXRXaW5kb3dXaWR0aCgpIF07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogV2hlbmV2ZXIgdGhlIHdpbmRvdyBpcyByZXNpemVkLCB0aGVuIHdlIG5lZWQgdG8gcmUtcnVuIGFuZ3VsYXIncyBjb21waWxlIGNoYWluLlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIFRoaXMgaXMganVzdCB0aGUgZXZlbnQgaGFuZGxlciBmb3IgdGhlIGAkd2luZG93Lm9ucmVzaXplYC4gIElmIHdlIGhhZCBFUzYsIHdvdWxkIGhhdmUganVzdCBpbi1saW5lZCBpdC5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gb25XaW5kb3dSZXNpemUgKCkge1xuICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEdlbmVyaWMgY2hlY2tlciBtZXRob2QgdG8gc2VlIGlmIHR3byB0aGluZ3MgYXJlIGVxdWFsIGFuZCBpZiBub3QsIHJlZHJhdyB0aGUgZ3JhcGguICBUaGVyZSBhcmUgc28gbWFueVxuICAgICAgICAgICAgICogdGhpbmdzIHRoYXQgbmVlZCB0aGlzIGNoZWNrIHRoYXQgaXQgd2FzIGVhc2llciB0byBqdXN0IHdyaXRlIHRoaXMgd3JhcHBlciBtZXRob2QuXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogVGhlIGVxdWFscyBjaGVjayBzaG91bGQgcHJvYmFibHkgYmUgcmVwbGFjZWQgd2l0aCBsb2Rhc2gncyBpc0VxdWFsIG1ldGhvZFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBydW4gKG4sIG8pIHtcbiAgICAgICAgICAgICAgICBpZiAoIG4gPT09IG8gKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIGN1cnJlbnRFbnRpdHlMaXN0ZW5lciApIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEVudGl0eUxpc3RlbmVyKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmVuZGVyKG5ldHdvcmtTZXJ2aWNlLmdldEdyYXBoRGF0YSgpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaGlzIGlzIHdoYXQgcG9wdWxhdGVzIHRoZSBidWlsZGVyIGZ1bmN0aW9ucyBmcm9tIGFib3ZlLiAgV2UgZG9uJ3QgbmVlZCB0byBjYWxsIGByZW5kZXJgIGJlY2F1c2VcbiAgICAgICAgICAgICAqIHRoZXJlIGlzIGFub3RoZXIgd2F0Y2hlciB0aGF0IGFsc28gc2VlcyBjaGFuZ2VzIHRvIGBzaXplQnlgIHRoYXQgd2lsbCB0YWtlIGNhcmUgb2YgaXQgZm9yIHVzLlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEBwYXJhbSBuZXdTaXplQnkgLSB0aGUgbmV3IHNpemVCeSB2YWx1ZSBzZWVuIGJ5IGEgd2F0Y2hlclxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiB3YXRjaFNpemVCeSAobmV3U2l6ZUJ5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCAhaXNEZWZpbmVkKG5ld1NpemVCeSkgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX2J1aWxkU2NhbGVGdW5jdGlvbiA9IGJ1aWxkU2NhbGVGdW5jdGlvbihuZXdTaXplQnkpO1xuICAgICAgICAgICAgICAgIF9idWlsZENoYXJnZUZ1bmN0aW9uID0gYnVpbGRDaGFyZ2VGdW5jdGlvbihuZXdTaXplQnkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoaXMgaXMgdGhlIG1haW4gZnVuY3Rpb24gb2YgdGhpcyBmaWxlLiAgVGFrZXMgaW4gdGhlIGRhdGEgcmVxdWlyZWQgYW5kIGRyYXdzIHRoZSBncmFwaC5cbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBAcGFyYW0geyB7IG5vZGVMaXN0LCBsaW5rTGlzdCB9IH0gZ3JhcGhEYXRhXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlbmRlciAoZ3JhcGhEYXRhKSB7XG4gICAgICAgICAgICAgICAgLy8gR2V0IG91ciBzdmcgZWxlbWVudCBmb3IgdGhpcyBkcmF3XG4gICAgICAgICAgICAgICAgdmFyIHN2ZyA9IGJ1aWxkU3ZnRWxlbWVudChyb290KTtcbiAgICAgICAgICAgICAgICAvLyBBdHRhY2ggYSBsaXN0ZW5lciB0aGF0IHdpbGwgZmlyZSB3aGVuIGNsaWNraW5nIGFueXRoaW5nIG90aGVyIHRoYW4gYSBub2RlXG4gICAgICAgICAgICAgICAgc3ZnLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHsgc2NvcGUuJGFwcGx5KGJhY2tncm91bmRDbGljayk7IH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gU2FmZXR5IGNoZWNrIHRvIGp1c3Qgc2tpcCBldmVyeXRoaW5nIGlmIHdlIGhhdmVuJ3QgYmVlbiBnaXZlbiBhbnkgbm9kZXNcbiAgICAgICAgICAgICAgICBpZiAoIGdyYXBoRGF0YS5ub2RlTGlzdC5sZW5ndGggPT09IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ05vZGUgbGlzdCBpcyBlbXB0eSwgbm90IGRyYXdpbmcgYSBncmFwaCcpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBzaXplIG9mIHRoZSBkcmF3aW5nIGFyZWEgdGhhdCB3ZSBhcmUgYWxsb3dlZCB0byB3b3JrIHdpdGhcbiAgICAgICAgICAgICAgICB2YXIgYm91bmRzID0gc3ZnLm5vZGUoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICAgICAgICAgIC8vIEJ1aWxkIG91ciBzY2FsZSBmdW5jdGlvbnMgYmFzZWQgb24gdGhlIG5vZGVzIHByb3ZpZGVkXG4gICAgICAgICAgICAgICAgdmFyIHNpemVCeVNjYWxlID0gX2J1aWxkU2NhbGVGdW5jdGlvbihncmFwaERhdGEubm9kZUxpc3QpO1xuICAgICAgICAgICAgICAgIHZhciBjYWxjdWxhdGVDaGFyZ2UgPSBfYnVpbGRDaGFyZ2VGdW5jdGlvbihncmFwaERhdGEubm9kZUxpc3QpO1xuXG4gICAgICAgICAgICAgICAgLy8gQnVpbGQgb3VyIGZvY3VzIHBvaW50cyBiYXNlZCBvbiB0aGUgc2l6ZSBvZiB0aGUgZHJhd2luZyBhcmVhXG4gICAgICAgICAgICAgICAgdmFyIGZvY2kgPSBidWlsZEZvY2koYm91bmRzKTtcblxuICAgICAgICAgICAgICAgIC8vIEJ1aWxkIHRoZSBhY3R1YWwgRDMgZ3JhcGhcbiAgICAgICAgICAgICAgICB2YXIgZm9yY2VMYXlvdXQgPSBidWlsZEZvcmNlTGF5b3V0KGdyYXBoRGF0YSwgYm91bmRzKTtcblxuICAgICAgICAgICAgICAgIC8vIFRoZSBvcmRlciBvZiBjYWxsaW5nIGRyYXdDb25uZWN0aW9uIGFuZCBkcmF3Tm9kZSBLSU5EIE9GIG1hdHRlclxuICAgICAgICAgICAgICAgIC8vIFRoZXkgY2FuIGJlIGNoYW5nZSwgdGhhdCBkb2Vzbid0IG1hdHRlclxuICAgICAgICAgICAgICAgIC8vIEJ1dCBpZiBkcmF3Tm9kZSBoYXBwZW5zIGZpcnN0LCB0aGVuIHRoZSBsaW5lcyBnZXQgZHJhd24gb24gdG9wIG9mIHRoZSBjaXJjbGVzLCB3aGljaCBsb29rcyB3ZWlyZFxuXG4gICAgICAgICAgICAgICAgdmFyIGNvbm5lY3Rpb24gPSBkcmF3Q29ubmVjdGlvbihncmFwaERhdGEubGlua0xpc3QpO1xuXG4gICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBkcmF3Tm9kZShncmFwaERhdGEubm9kZUxpc3QpO1xuXG4gICAgICAgICAgICAgICAgLy8gYHRpY2tgIGlzIGFuIGV2ZW50IHRoYXQgaGFwcGVucywgd2VsbCwgZXZlcnkgXCJ0aWNrXCIuICBXaGF0IHRoaXMgYWxsb3dzIHVzIHRvIGRvIGlzIGFkanVzdCB0aGUgcmF0ZVxuICAgICAgICAgICAgICAgIC8vIGF0IHdoaWNoIHRoZSBub2RlcyB3aWxsIG1ha2UgdGhlaXIgd2F5IHRvIHRoZSBmb2N1cyBwb2ludHMuICBBbHNvLCB3ZSBoYXZlIHRvIHRlbGwgQW5ndWxhciB0aGF0XG4gICAgICAgICAgICAgICAgLy8gc3R1ZmYgaXMgaGFwcGVuaW5nIGJlY2F1c2UsIGxpa2UgSSBzYWlkIGJlZm9yZSwgQW5ndWxhciBkb2VzIG5vdCBsaWtlIHN0dWZmIG1lc3NpbmcgYXJvdW5kIGluIHRoZVxuICAgICAgICAgICAgICAgIC8vIEhUTUwgd2l0aG91dCBpdHMgcGVybWlzc2lvblxuICAgICAgICAgICAgICAgIGZvcmNlTGF5b3V0Lm9uKCd0aWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHRpY2sgKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGsgPSAwLjEgKiBldmVudC5hbHBoYTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MScsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnNvdXJjZS54O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kxJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuc291cmNlLnk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDInLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC50YXJnZXQueDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5MicsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnRhcmdldC55O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBncmFwaERhdGEubm9kZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQueSArPSAoZm9jaVsgZC52YWx1ZS50eXBlIF0ueSAtIGQueSkgKiBrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQueCArPSAoZm9jaVsgZC52YWx1ZS50eXBlIF0ueCAtIGQueCkgKiBrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgZC54ICsgJywnICsgZC55ICsgJyknO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkodGljayk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBMaXN0ZW4gZm9yIGEgbmV3IGN1cnJlbnQgZW50aXR5IGFuZCBzYXZlIHRoZSBsaXN0ZW5lciB0byBiZSBkZXN0cm95ZWQgb24gbmV4dCByZWRyYXdcbiAgICAgICAgICAgICAgICBjdXJyZW50RW50aXR5TGlzdGVuZXIgPSBzY29wZS4kb24oXG4gICAgICAgICAgICAgICAgICAgICdjZy5jdXJyZW50LWVudGl0eS51cGRhdGUnLFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXZlbnQsIGFyZ3MpIHsgZm9jdXNDdXJyZW50RW50aXR5KGFyZ3MpOyB9XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEZvY3VzIHRoZSBjdXJyZW50IGVudGl0eSwgaWYgaXQgZXhpc3RzXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gY3VycmVudEVudGl0eSAtIFRoZSBjdXJyZW50IGVudGl0eSBzZWxlY3RlZCBpbiB0aGUgYXBwLiAgQ291bGQgdGVjaG5pY2FsbHlcbiAgICAgICAgICAgICAgICAgKiBiZSBhbnkgYXJiaXRyYXJ5IGVudGl0eVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGZvY3VzQ3VycmVudEVudGl0eSAoY3VycmVudEVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICBncmFwaERhdGFcbiAgICAgICAgICAgICAgICAgICAgICAgIC5ub2RlTGlzdFxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmoudmFsdWU7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChlbnRpdHkpIHsgcmV0dXJuIF8uaXNFcXVhbChjdXJyZW50RW50aXR5LCBlbnRpdHkpOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZvckVhY2goZm9jdXNOZWlnaGJvcnMpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEJ1aWxkcyB0aGUgRDMgZm9yY2UgbGF5b3V0IGdyYXBoXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBUaGUgZm9yY2UgbGF5b3V0IGdyYXBoIGRvZXNuJ3QgYWN0dWFsbHkgZHJhdyBhbnl0aGluZyB0byB0aGUgc2NyZWVuLCBqdXN0IGFkZHMgcHJvcGVydGllcyB0byB0aGVcbiAgICAgICAgICAgICAgICAgKiBnaXZlbiBub2RlcyBhbmQgbGlua3Mgb2JqZWN0cyB0byBkZXNjcmliZSB3aGVyZSB0aGV5IFNIT1VMRCBiZSBvbiB0aGUgc2NyZWVuXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gZGF0YSAtIFNhbWUgYXMgdGhlIHJlbmRlcidzIGdyYXBoRGF0YSBhcmd1bWVudC4gIFNlcGFyYXRlLCBpbiBjYXNlIHdlIHdhbnQgdG8gZG8gZmlsdGVyaW5nXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIGJvdW5kcyAtIFRoZSBzaXplIG9mIHRoZSBkcmF3aW5nIGFyZWFcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBidWlsZEZvcmNlTGF5b3V0IChkYXRhLCBib3VuZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQzLmxheW91dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yY2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2l6ZShbIGJvdW5kcy53aWR0aCwgYm91bmRzLmhlaWdodCBdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubm9kZXMoZGF0YS5ub2RlTGlzdClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmxpbmtzKGRhdGEubGlua0xpc3QpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vZGUgYXR0cmFjdGlvbiB0byBlYWNoIG90aGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5saW5rU3RyZW5ndGgoMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWF4aW11bSBsZW5ndGggYmV0d2VlbiBub2Rlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubGlua0Rpc3RhbmNlKDUwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2hhcmdlKGNhbGN1bGF0ZUNoYXJnZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyB3aGF0IGFjdHVhbGx5IHN0YXJ0cyB0aGUgYW5pbWF0aW9uLiAgUmVtb3ZlIHRoaXMgYW5kIGNhbGwgbGF0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgeW91IHdhbnQgdGhpcyB0byBqdXN0IGJlIGEgYnVpbGRlciBmdW5jdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3RhcnQoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEcmF3cyB0aGUgY2lyY2xlcyBmb3IgZWFjaCBub2RlIGFuZCBhdHRhY2hlcyBsaXN0ZW5lcnMgdG8gdGhlbS5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSBub2RlTGlzdFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRyYXdOb2RlIChub2RlTGlzdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGVmYXVsdFNpemUgPSAxMDtcblxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRDaXJjbGVSYWRpdXMgKG4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpc0RlZmluZWQobikgPyBzaXplQnlTY2FsZShuKSA6IGRlZmF1bHRTaXplO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gT24gY2xpY2ssIGZvY3VzIGVudGl0eSBhbmQgbWFyayBhcyB0aGUgc2VsZWN0ZWQgZW50aXR5XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNsaWNrRXZlbnQgKG9iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY2xpY2sgKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdXRpbHMuaXNEZWZpbmVkKGQzLmV2ZW50KSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDMuZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDMuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXMob2JqKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGNsaWNrKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBub2RlID0gc3ZnXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCcubm9kZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZGF0YShub2RlTGlzdClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDU1MgaXMgc2V0dXAgdG8gc3R5bGUgbm9kZXMgZGlmZmVyZW50IGNvbG9ycyBiYXNlZCBvbiB0aGVpciB0eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gJ25vZGUgJyArIGQudmFsdWUudHlwZSArICctbm9kZSc7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAub24oJ2NsaWNrJywgY2xpY2tFdmVudClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYWxsKGZvcmNlTGF5b3V0LmRyYWcpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEFwcGVuZHMgY2lyY2xlcyB0byBlYWNoIG5vZGVcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5hcHBlbmQoJ2NpcmNsZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigncicsIGdldENpcmNsZVJhZGl1cyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gTm90IHN1cmUgd2h5LCBidXQgc2VlbXMgb25seSBhZnRlciBjbGlja2luZyBvbiBhIG5vZGUgZG9lcyB0ZXh0IGFwcGVhci4gIFByb2JhYmx5IGEgQ1NTIHRoaW5nXG4gICAgICAgICAgICAgICAgICAgIC8vIFVzZWQgdG8gYmUgYSBgd2VsbGNvbm5lY3RlZGAgcHJvcGVydHkgaW4gdGhlIG9sZCBjb2RlLCBidXQgSSBkaWRuJ3QgZ2V0IGFyb3VuZCB0byBpbXBsZW1lbnRpbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gaXQgaW4gdGhlIHJlLXdyaXRlXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuYXBwZW5kKCd0ZXh0JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uIChkKSB7IHJldHVybiBpc0RlZmluZWQoZC52YWx1ZS5uaWNrbmFtZSkgPyBkLnZhbHVlLm5pY2tuYW1lIDogZC52YWx1ZS5uYW1lOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2R4JywgZnVuY3Rpb24gKCkgeyByZXR1cm4gKC0wLjA2NSAqIHRoaXMuZ2V0Q29tcHV0ZWRUZXh0TGVuZ3RoKCkgLyAyKSArICdlbSc7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZHknLCBmdW5jdGlvbiAoKSB7IHJldHVybiAoMC4wOCAqIHRoaXMucGFyZW50Tm9kZS5nZXRCQm94KCkuaGVpZ2h0IC8gMiArIDAuNSkgKyAnZW0nOyB9KTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBBY3R1YWxseSBvbmUgb2YgdGhlIGV4cGVuc2l2ZSBtZXRob2RzIGluIGhlcmUuICBUaGlzIHdpbGwgc2VhcmNoIGZvciBjb25uZWN0ZWQgZW50aXRpZXMgYW5kIGFkZFxuICAgICAgICAgICAgICAgICAqIGNlcnRhaW4gY2xhc3NlcyB0byB0aGVtIGZvciBDU1Mgc3R5bGluZy4gIEknbSBub3Qgc3VyZSwgYnV0IEQzIHByb2JhYmx5IGhhcyBzb21ldGhpbmcgZm9yIGRvaW5nXG4gICAgICAgICAgICAgICAgICogdGhpcyBmb3IgeW91LCBidXQgSSBkaWRuJ3QgY2hlY2suXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gZW50aXR5XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZm9jdXNOZWlnaGJvcnMgKGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBjb21wYXJlQWdhaW5zdENvbm5lY3Rpb25PYmogKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnNvdXJjZSA9PT0gYy5pbmRleCB8fCBkLnRhcmdldCA9PT0gYy5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBuZWlnaGJvcmluZyAoYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuaW5kZXggPT09IGIuaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgdXRpbHMuaXNEZWZpbmVkKGdyYXBoRGF0YS5saW5rTGlzdC5maW5kKGNvbXBhcmVBZ2FpbnN0Q29ubmVjdGlvbk9iaihhKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIEFwcGx5ICd1bmZvY3VzZWQnIGNsYXNzIHRvIGFsbCBub24tbmVpZ2hib3JzLlxuICAgICAgICAgICAgICAgICAgICAvLyBBcHBseSAnZm9jdXNlZCcgY2xhc3MgdG8gYWxsIG5laWdoYm9ycy5cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogU2VlIGlmIGl0IGNhbiBiZSBkb25lIHdpdGgganVzdCBvbmUgY2xhc3MgYW5kIDpub3QoLmZvY3VzZWQpIENTUyBzZWxlY3RvcnMuXG4gICAgICAgICAgICAgICAgICAgIG5vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgbmVpZ2hib3JpbmcoZW50aXR5KSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBfLm5lZ2F0ZShuZWlnaGJvcmluZyhlbnRpdHkpKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBjb21wYXJlQWdhaW5zdENvbm5lY3Rpb25PYmooZW50aXR5KSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBfLm5lZ2F0ZShjb21wYXJlQWdhaW5zdENvbm5lY3Rpb25PYmopKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBTZXRzIHRoZSBnaXZlbiBlbnRpdHkgYXMgdGhlIGN1cnJlbnQgZW50aXR5IHNlbGVjdGVkIGluIHRoZSBhcHAgYW5kIHRoZW4gZm9jdXNlc1xuICAgICAgICAgICAgICAgICAqIGl0IGFuZCBpdHMgbmVpZ2hib3JzXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIGVudGl0eVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGZvY3VzIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB1dGlscy5pc0RlZmluZWQoY2dTZXJ2aWNlLmdldEN1cnJlbnRFbnRpdHkoKSkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGV5IGFyZSB0aGUgc2FtZSwgdGhlbiB3ZSBkb24ndCBuZWVkIHRvIGRvIGFueXRoaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIF8uaXNFcXVhbChjZ1NlcnZpY2UuZ2V0Q3VycmVudEVudGl0eSgpLCBlbnRpdHkudmFsdWUpICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIG5vdCwgdGhlbiBjYWxsIHVuRm9jdXMgdG8gc2V0dXAgZm9yIG5ldyBmb2N1c2VkIGVudGl0eVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5Gb2N1cyhlbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgY2dTZXJ2aWNlLnNldEN1cnJlbnRFbnRpdHkoZW50aXR5LnZhbHVlKTtcblxuICAgICAgICAgICAgICAgICAgICBmb2N1c05laWdoYm9ycyhlbnRpdHkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENsZWFyIG91dCBhbnkgc2VsZWN0aW9ucyBtYWRlIGFuZCBzZXQgY2FsbCB1bkZvY3VzXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gYmFja2dyb3VuZENsaWNrICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhdXRpbHMuaXNEZWZpbmVkKGNnU2VydmljZS5nZXRDdXJyZW50RW50aXR5KCkpICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdW5Gb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICBjZ1NlcnZpY2Uuc2V0Q3VycmVudEVudGl0eShudWxsKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDbGVhcnMgb3V0IHRoZSBjbGFzc2VzIGF0dGFjaGVkIGJ5IGZvY3VzLiAgVGhlIG90aGVyIGhhbGYgb2YgdGhlIGZ1bmN0aW9uIGlzIGxlZnRvdmVyIGZyb20gd2hlblxuICAgICAgICAgICAgICAgICAqIHRoZXJlIHdhcyBhIGZlYXR1cmUgZm9yIGRvdWJsZSBjbGlja2luZyBhIG5vZGUgdG8gZnJlZXplIGl0IGluIHBsYWNlLCBidXQgYWZ0ZXIgaW1wbGVtZW50aW5nIGl0IElcbiAgICAgICAgICAgICAgICAgKiBmZWx0IGl0IHdhcyBzdHVwaWQgbG9va2luZyBzbyBJIHJlbW92ZWQgaXQsIGJ1dCBsZWZ0IHRoZSBzdHVmZiBoZXJlIGJlY2F1c2UgaXQgZG9lc24ndCBhY3R1YWxseSBkb1xuICAgICAgICAgICAgICAgICAqIGFueXRoaW5nLlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIGVudGl0eVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHVuRm9jdXMgKGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICBub2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZhbHNlKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZhbHNlKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIHV0aWxzLmlzRGVmaW5lZChlbnRpdHkpICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5LmZpeGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBncmFwaERhdGEubm9kZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQuZml4ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUmVzdGFydCBkMyBhbmltYXRpb25zLlxuICAgICAgICAgICAgICAgICAgICBpZiAoIHV0aWxzLmlzRGVmaW5lZChjZ1NlcnZpY2UuZ2V0Q3VycmVudEVudGl0eSgpKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmNlTGF5b3V0LnJlc3VtZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRHJhd3MgdGhlIGxpbmVzIGZvciBlYWNoIGxpbmsgYmV0d2VlbiBub2Rlc1xuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIGNvbm5lY3Rpb25MaXN0XG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyp9XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZHJhd0Nvbm5lY3Rpb24gKGNvbm5lY3Rpb25MaXN0KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gTm90IHN1cmUgaG93IHVzZWZ1bCBleGFjdGx5LCBidXQgd2hlbiBsb29raW5nIGF0IGFsbCBkYXRhIGZyb20gdGhlIEFQSSwgdGhlcmUgYXJlIGFib3V0XG4gICAgICAgICAgICAgICAgICAgIC8vIDMwMCByZWR1bmRhbnQgY29ubmVjdGlvbnMsIHNvIHByb2JhYmx5IG5vdCBuZWNlc3NhcnksIGJ1dCBjb3VsZCBiZSB1c2VmdWwgZG93biB0aGUgcm9hZFxuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgQVBJIGlzIG5ldmVyIHVwZGF0ZWQgdG8gZmlsdGVyIHRoYXQgZm9yIHVzLiAgQmVzdCBjYXNlIHdvdWxkIGJlIEFQSSBkb2luZyB0aGlzLlxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiByZW1vdmVSZWR1bmRhbnRDb25uZWN0aW9uRnJvbUxpc3QgKGNvbkxpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpbXBsZXIgdGhhbiBpdCBsb29rcy4gIFRydXN0IG1lLCBsb29rcyBuaWNlciBpbiBFUzYuICBJIG5lZWQgdG8gZ2V0IGFyb3VuZCB0byBkb2luZyB0aGF0XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgRmlyc3QsIGNvbnZlcnRzIHRvIGFuIG9iaiBvZiB7IHNvdXJjZTogc291cmNlLmlkLCB0YXJnZXQ6IHRhcmdldC5pZCBUaGVuLCBjcmVhdGUgYVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWFwIG9mIHNvdXJjZS5pZCA9PiBhcnJheSBvZiB0YXJnZXQuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZE1hcCA9IGNvbkxpc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzb3VyY2U6IG9iai5zb3VyY2UuaWQsIHRhcmdldDogb2JqLnRhcmdldC5pZCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZWR1Y2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChyZXN1bHQsIG9iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCByZXN1bHRbIG9iai5zb3VyY2UgXSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRbIG9iai5zb3VyY2UgXS5wdXNoKG9iai50YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0WyBvYmouc291cmNlIF0gPSBbIG9iai50YXJnZXQgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5leHQsIHRoaXMgZnVuY3Rpb24gd2lsbCBmaWx0ZXIgb3V0IGFueSBjb25uZWN0aW9uIHRoYXQgaXMgYWxyZWFkeSByZXByZXNlbnRlZCBpbiB0aGUgbGlzdFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnV0IGhhcyB0aGUgc291cmNlIGFuZCB0YXJnZXQgc3dhcHBlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEV4YW1wbGU6IFt7IHNvdXJjZTogMSwgdGFyZ2V0OiAyfSwgeyBzb3VyY2U6IDIsIHRhcmdldDogMSB9XSA9PiBbeyBzb3VyY2U6IDEsIHRhcmdldDogMiB9XVxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZmluZEluSWRNYXAgKG9iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpZE1hcFsgb2JqLnRhcmdldC5pZCBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkTWFwWyBvYmoudGFyZ2V0LmlkIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIGlkTWFwWyBvYmoudGFyZ2V0LmlkIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluZChmdW5jdGlvbiAoc0lkKSB7IHJldHVybiBzSWQgPT09IG9iai5zb3VyY2UuaWQ7IH0pICE9PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb25MaXN0LmZpbHRlcihmaW5kSW5JZE1hcCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWQgPSByZW1vdmVSZWR1bmRhbnRDb25uZWN0aW9uRnJvbUxpc3QoY29ubmVjdGlvbkxpc3QpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3ZnXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCcubGluaycpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZGF0YShmaWx0ZXJlZClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgnbGluZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCBmdW5jdGlvbiAobCkgeyByZXR1cm4gJ2xpbmsgJyArIGwudHlwZSArICctbGluayAnOyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgJ3Jlc3RyaWN0JzogJ0UnLFxuICAgICAgICAgICAgJ2xpbmsnOiBMaW5rRm5cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBEaXJlY3RpdmUuJGluamVjdCA9IFtcbiAgICAgICAgJyR3aW5kb3cnLFxuICAgICAgICAnXycsXG4gICAgICAgICdjZ1V0aWxTZXJ2aWNlJyxcbiAgICAgICAgJ2NnTWFpblNlcnZpY2UnLFxuICAgICAgICAnY2dOZXR3b3JrU2VydmljZSdcbiAgICBdO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdjaXZpYy1ncmFwaC5uZXR3b3JrJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnY2dOZXR3b3JrR3JhcGgnLCBEaXJlY3RpdmUpO1xuXG59KShhbmd1bGFyLCBkMyk7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIC8vIFNsb3BweSBmdW5jdGlvbiwgcmV0dXJucyBhIGZpbHRlciBmdW5jdGlvbiB0aGF0IGZpbHRlcnMgYmFzZWQgb24gdGhlIHZhbHVlIGluIHRoZVxuICAgIC8vIG1hcCwgd2l0aCB0aGUga2V5IGNob3NlbiBiZWluZyB0aGUgdHlwZSBwcm9wZXJ0eSBpbiB0aGUgb2JqZWN0XG4gICAgZnVuY3Rpb24gZmlsdGVyQnlCb29sZWFuTWFwKG1hcCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odikge1xuICAgICAgICAgICAgcmV0dXJuIG1hcFt2LnR5cGVdO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZpbHRlckJ5TWluQ29ubmVjdGlvbihtaW5Db25uZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICByZXR1cm4gZW50aXR5LnZhbHVlLmNvbGxhYm9yYXRpb25zLmxlbmd0aCA+PSBtaW5Db25uZWN0aW9uO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbnZlcnRFbnRpdHlUb0dyYXBoTm9kZShlbnRpdHkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiaWRcIjogZW50aXR5LmlkLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBlbnRpdHlcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmaW5kQnlJZChmaW5kVGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBkLmlkID09PSBmaW5kVGhpcztcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBTZXJ2aWNlKHV0aWxzLCBjZ1NlcnZpY2UsIGVudGl0eVNlcnZpY2UsIGNvbm5lY3Rpb25TZXJ2aWNlKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICB2YXIgX21pbkNvbm5lY3Rpb24gPSA1O1xuICAgICAgICB2YXIgX3NpemVCeSA9IFwiZW1wbG95ZWVzXCI7XG5cbiAgICAgICAgZnVuY3Rpb24gc2l6ZUJ5KG8pIHtcbiAgICAgICAgICAgIGlmKHV0aWxzLmlzU3RyaW5nKG8pKSB7XG4gICAgICAgICAgICAgICAgX3NpemVCeSA9IG87XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBfc2l6ZUJ5O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbWluQ29ubmVjdGlvbihvKSB7XG4gICAgICAgICAgICBpZihpc0Zpbml0ZShvKSAmJiBvID49IDApIHtcbiAgICAgICAgICAgICAgICBfbWluQ29ubmVjdGlvbiA9IG87XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBfbWluQ29ubmVjdGlvbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEdyYXBoTm9kZUxpc3QoZW50aXR5TGlzdCkge1xuICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGVudGl0eUxpc3QpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZW50aXR5TGlzdFxuICAgICAgICAgICAgICAgIC5maWx0ZXIoZmlsdGVyQnlCb29sZWFuTWFwKGVudGl0eVNlcnZpY2UuZ2V0RW50aXR5VHlwZXMoKSkpXG4gICAgICAgICAgICAgICAgLm1hcChjb252ZXJ0RW50aXR5VG9HcmFwaE5vZGUpXG4gICAgICAgICAgICAgICAgLmZpbHRlcihmaWx0ZXJCeU1pbkNvbm5lY3Rpb24oX21pbkNvbm5lY3Rpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEdyYXBoTGlua0xpc3Qobm9kZUxpc3QsIGNvbm5lY3Rpb25PYmopIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkQ29ubmVjdGlvbk9iamVjdChrZXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29ubmVjdGlvbnMgPSBjb25uZWN0aW9uT2JqW2tleV07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb25zXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2VOb2RlID0gbm9kZUxpc3QuZmluZEluZGV4KGZpbmRCeUlkKGNvbm5lY3Rpb24uc291cmNlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0Tm9kZSA9IG5vZGVMaXN0LmZpbmRJbmRleChmaW5kQnlJZChjb25uZWN0aW9uLnRhcmdldCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgXCJzb3VyY2VcIjogc291cmNlTm9kZSwgXCJ0YXJnZXRcIjogdGFyZ2V0Tm9kZSwgdHlwZToga2V5IH07XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIodXRpbHMuaXNEZWZpbmVkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZmlsdGVyQ29ubmVjdGlvbldpdGhNaXNzaW5nRW50aXR5KGNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjaGVja1Byb3BlcnR5KHByb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHV0aWxzLmlzRGVmaW5lZChjb25uZWN0aW9uW3Byb3BdKSAmJiBjb25uZWN0aW9uW3Byb3BdICE9PSAtMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoZWNrUHJvcGVydHkoXCJzb3VyY2VcIikgJiYgY2hlY2tQcm9wZXJ0eShcInRhcmdldFwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gcmVkdWNlQXJyYXlPZkFycmF5KGFyciwgZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhcnIuY29uY2F0KGQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0XG4gICAgICAgICAgICAgICAgLmtleXMoY29ubmVjdGlvbk9iailcbiAgICAgICAgICAgICAgICAubWFwKGJ1aWxkQ29ubmVjdGlvbk9iamVjdClcbiAgICAgICAgICAgICAgICAucmVkdWNlKHJlZHVjZUFycmF5T2ZBcnJheSwgW10pXG4gICAgICAgICAgICAgICAgLmZpbHRlcihmaWx0ZXJDb25uZWN0aW9uV2l0aE1pc3NpbmdFbnRpdHkpXG4gICAgICAgICAgICAgICAgLmZpbHRlcihmaWx0ZXJCeUJvb2xlYW5NYXAoY29ubmVjdGlvblNlcnZpY2UuZ2V0Q29ubmVjdGlvblR5cGVzKCkpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEdyYXBoRGF0YSgpIHtcbiAgICAgICAgICAgIHZhciBjb25uZWN0aW9uT2JqID0gY2dTZXJ2aWNlLmdldENvbm5lY3Rpb25PYmooKTtcbiAgICAgICAgICAgIHZhciBub2RlTGlzdCA9IGdldEdyYXBoTm9kZUxpc3QoY2dTZXJ2aWNlLmdldEVudGl0eUxpc3QoKSk7XG5cbiAgICAgICAgICAgIHJldHVybiB7IFwibm9kZUxpc3RcIjogbm9kZUxpc3QsIFwibGlua0xpc3RcIjogZ2V0R3JhcGhMaW5rTGlzdChub2RlTGlzdCwgY29ubmVjdGlvbk9iaikgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYuZ2V0R3JhcGhEYXRhID0gZ2V0R3JhcGhEYXRhO1xuXG4gICAgICAgIHNlbGYuc2l6ZUJ5ID0gc2l6ZUJ5O1xuICAgICAgICBzZWxmLm1pbkNvbm5lY3Rpb24gPSBtaW5Db25uZWN0aW9uO1xuICAgIH1cblxuICAgIFNlcnZpY2UuJGluamVjdCA9IFtcbiAgICAgICAgXCJjZ1V0aWxTZXJ2aWNlXCIsXG4gICAgICAgIFwiY2dNYWluU2VydmljZVwiLFxuICAgICAgICBcImVudGl0eVNlcnZpY2VcIixcbiAgICAgICAgXCJjb25uZWN0aW9uU2VydmljZVwiXG4gICAgXTtcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoLm5ldHdvcmtcIilcbiAgICAgICAgLnNlcnZpY2UoXCJjZ05ldHdvcmtTZXJ2aWNlXCIsIFNlcnZpY2UpO1xuXG59KShhbmd1bGFyKTtcbiJdfQ==
