!function(i){"use strict";var a=["ui.bootstrap","leaflet-directive","ngAnimate","templateCache","civic-graph.api","civic-graph.util"],c=["civic-graph.util"];i.module("civic-graph.util",[]),i.module("civic-graph.api",c),i.module("civic-graph",a)}(angular);
!function(t){"use strict";function a(){return{templateUrl:"js/analytic/analytics.html",restrict:"E",scope:{},controller:"analyticsCtrl"}}var c=[a];t.module("civic-graph").directive("analytics",c)}(angular);
!function(e){"use strict";function t(e,t){function i(e){var i=t.getPropertyFromObj(e);this.id=i("id"),this.name=i("name"),this.enabled=i("enable",!0)}function n(e){return new i(e)}function r(){return e.get("/categories")}return{getCategoryModel:n,getAll:r}}t.$inject=["cgApiCaller","cgUtilService"],e.module("civic-graph.api").factory("categoryService",t)}(angular);
!function(t){"use strict";function n(){return{Funding:!0,Data:!0,Employment:!0,Collaboration:!0}}function i(t,i){function o(t){var n=i.getPropertyFromObj(t);this.id=n("id"),this.name=n("name"),this.details=n("details"),this.entity=n("entity"),this.entity_id=n("entity_id")}function c(t){return new o(t)}function r(){return t.get(e)}return{getAll:r,getConnectionTypes:n,getConnectionModel:c}}var e="/connections";i.$inject=["cgApiCaller","cgUtilService"],t.module("civic-graph.api").factory("connectionService",i)}(angular);
!function(i){"use strict";function n(i){function n(n){var t=i.getPropertyFromObj(n);this.id=t("id"),this.year=t("year"),this.amount=t("amount",0)}function t(i){return new n(i)}return{getFinanceModel:t}}n.$inject=["cgUtilService"],i.module("civic-graph.api").factory("financeService",n)}(angular);
!function(n){"use strict";function t(n){function t(t){var i=n.getPropertyFromObj(t);this.id=i("id"),this.year=i("year"),this.amount=i("amount"),this.entity=i("entity","")}function i(n){return new t(n)}return{getFundingConnectionModel:i}}t.$inject=["cgUtilService"],n.module("civic-graph.api").factory("fundingConnectionService",t)}(angular);
!function(o){"use strict";function r(){return{templateUrl:"js/control/controls.html",restrict:"E",scope:{toggleNetwork:"="},controller:"controlCtrl",controllerAs:"control",bindToController:{minConnections:"="}}}var t=[r];o.module("civic-graph").directive("control",t)}(angular);
!function(e){"use strict";function t(t,i,n,o,s,d,c,a){function r(){var e,i,n,o;for(i in t.categories)if(t.categories.hasOwnProperty(i)){e=t.categories[i];for(n in t.editEntity.categories)t.editEntity.categories.hasOwnProperty(n)&&(o=t.editEntity.categories[n],e.id===o.id&&(e.enabled=o.enabled))}}t.isEditing=!1,t.editEntity=s.getEntityModel(t.entity),t.entityTypes=s.getEntityTypes(),t.influenceTypes=s.getInfluenceTypes();var u;t.categories=[],t.addressSearch=function(e){return i.jsonp("https://dev.virtualearth.net/REST/v1/Locations",{params:{query:e,key:"Ai58581yC-Sr7mcFbYTtUkS3ixE7f6ZuJnbFJCVI4hAtW1XoDEeZyidQz2gLCCyD",jsonp:"JSON_CALLBACK",include:"ciso2"}}).then(function(e){if(a.isDefined(e.data.resourceSets)&&e.data.resourceSets.length>0)return e.data.resourceSets[0].resources})},t.toggleCategory=function(e){if(0===t.editEntity.categories.length)t.editEntity.categories.push(e);else{var i=!1;for(var n in t.editEntity.categories)if(t.editEntity.categories.hasOwnProperty(n)){var o=t.editEntity.categories[n];if(o.id===e.id){i=!0,o.enabled=e.enabled;break}}i||t.editEntity.categories.push(e)}},t.setLocation=function(e,i){t.addressSearch(e.formattedAddress).then(function(n){if(a.isDefined(n[0])){var o=n[0],s=o.address,d=o.point;t.addLocation(i),e.address_line=a.isDefined(s.addressLine)?s.addressLine:"",e.locality=a.isDefined(s.locality)?s.locality:"",e.district=a.isDefined(s.adminDistrict)?s.adminDistrict:"",e.country=a.isDefined(s.countryRegion)?s.countryRegion:null,e.country_code=a.isDefined(s.countryRegionIso2)?s.countryRegionIso2:"",e.coordinates=a.isDefined(d.coordinates)?d.coordinates:null,e.postal_code=a.isDefined(s.postalCode)?s.postalCode:null}})},t.addLocation=function(e){e&&t.editEntity.locations.push(c.getLocationModel())},t.addKeyPerson=function(){o.some(t.editEntity.key_people,{name:"",id:null})||t.editEntity.key_people.push({name:"",id:null})},t.setFundingConnection=function(e,t){t.entity_id=e.id},t.addFundingConnection=function(e){o.some(e,{entity:""})||e.push({entity:"",amount:null,year:null,id:null})},t.setConnection=function(e,t){t.entity_id=e.id},t.addConnection=function(e){o.some(e,{entity:"",id:null})||e.push({entity:"",id:null,details:null})},t.addFinance=function(e){o.every(e,function(e){return e.amount>0&&e.year>1750})&&e.push({amount:null,year:null,id:null})},t.save=function(){function e(e){t.isSaving=!1,t.$emit("editEntitySuccess",e),t.cancelEdit()}function i(){t.isError=!0,n(function(){t.isError=!1},2e3)}t.isSaving=!0,s.saveEntity(t.editEntity.generateDBModel()).then(e,i)},t.cancelEdit=function(){t.isOpen=!1},t.$watch("entity",function(i,n){e.equals(i,n)||(t.editEntity=s.getEntityModel(i),t.categories=e.copy(u),r(),t.isEditing=a.isDefined(t.editEntity.id))}),d.getAll().then(function(i){u=i.categories,t.categories=e.copy(u)})}t.$inject=["$scope","$http","$timeout","_","entityService","categoryService","locationService","cgUtilService"],e.module("civic-graph").controller("editCtrl",t)}(angular);
!function(t){"use strict";function e(){return{templateUrl:"js/edit-entity/edit.html",restrict:"E",scope:{entity:"=",entities:"=",isOpen:"="},controller:"editCtrl"}}var i=[e];t.module("civic-graph").directive("editEntity",i)}(angular);
!function(i,t){"use strict";function s(i){function s(){var i=t(this);i.css("height","55vh")}function c(){var i=t(this);window.innerHeight/3>parseInt(i.css("height"))?i.css("height","55vh"):i.css("height","30vh")}var e;i.mobile&&(e=t("#details-panel"),e.css("height","30vh"),e.scrollTop(0),e.scroll(s),e.click(c))}function c(){return{restrict:"A",link:s}}i.module("civic-graph").directive("addMobileEvents",[c])}(angular,$);
!function(o){"use strict";function c(o,c){o.closeWindow=function(){c.close()}}o.module("civic-graph").controller("modalCtrl",["$scope","$modalInstance",c])}(angular);
!function(o){"use strict";o.module("civic-graph").constant("_",window._).config(["$locationProvider","$compileProvider",function(o,n){o.html5Mode(!0),n.debugInfoEnabled(!0)}]).filter("thousandSuffix",function(){return function(o,n){var t,i=["k","M","G","T","P","E"];return window.isNaN(o)?null:o<1e3?o:(t=Math.floor(Math.log(o)/Math.log(1e3)),(o/Math.pow(1e3,t)).toFixed(n)+i[t-1])}})}(angular);
!function(t){"use strict";function i(t,i,e,n,o){function a(){t.$broadcast("triggerNetworkDraw")}t.entities=[],t.searchItems=null,t.categories=[],t.currentLocation=null,t.clickedLocation={},t.clickedLocation.location=null,t.clickedEntity={},t.clickedEntity.entity=null,t.editing=!1,t.actions={interacted:!1},t.showsearchMB=!1,t.showAnalytics=!1,t.entityTypes=n.getEntityTypes(),t.connectionTypes=o.getConnectionTypes(),t.status={isNetworkShown:!0,license:!0,networkLoading:!0},t.toggleAnalytics=function(){t.showAnalytics=!t.showAnalytics},this.minConnections=t.minConnections=2;var s=this;t.$watch("minConnections",a),t.connectionChange=function(){console.log(s.minConnections),t.minConnections=s.minConnections,t.$broadcast("triggerNetworkDraw")},t.hydePartials=function(i){"search"===i?(t.editing=!1,t.settingsEnabled=!1):"settings"===i?(t.editing=!1,t.showsearchMB=!1):"edit"===i?(t.settingsEnabled=!1,t.showsearchMB=!1):(t.editing=!1,t.settingsEnabled=!1,t.showsearchMB=!1)},t.showSearch=function(){t.hydePartials("search"),t.showsearchMB=!t.showsearchMB,t.status.license=!1},t.toggleSettings=function(){t.hydePartials("settings"),t.settingsEnabled=!t.settingsEnabled},t.startEdit=function(i){t.currentEntity=i,t.mobile&&t.hydePartials("edit"),t.editing=!0},t.switchView=function(){t.status.isNetworkShown=!t.status.isNetworkShown,t.status.isNetworkShown&&t.$broadcast("triggerNetworkDraw")},window.mobilecheck=function(){var t=!1,i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,e=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i;return function(n){(i.test(n)||e.test(n.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},t.mobile=window.mobilecheck(),t.settingsEnabled=!t.mobile,i(function(){n.getAll().then(function(i){t.entities=i.nodes;var n=e.uniq(e.pluck(e.flatten(e.pluck(t.entities,"locations")),"locality")),o=e.map(n,function(i){var n=e.filter(t.entities,e.flow(e.property("locations"),e.partialRight(e.any,{locality:i})));return{name:i,type:"location",entities:n,dict:e.zipObject(e.pluck(n,"name"),e.pluck(n,"index"))}});t.searchItems=o.concat(t.entities),t.overviewUrl="js/overview/overview.html",t.$broadcast("triggerNetworkDraw")})},100),t.overviewUrl=null,t.setEntity=function(i){t.currentLocation=null,t.currentEntity=i,t.editing&&t.stopEdit(),t.$broadcast("entityChange")},t.setEntityID=function(i){t.setEntity(e.find(t.entities,{id:i}))},t.setLocation=function(i){t.currentLocation=i,t.editing&&t.stopEdit(),t.$broadcast("itemChange")},t.selectItem=function(i){"location"===i.type?t.setLocation(i):t[i%1===0?"setEntityID":"setEntity"](i),t.$broadcast("selectItem",i)},t.$on("setCurrentEntity",function(i,e){t.currentEntity=e.value}),t.$on("setCurrentLocation",function(i,e){t.currentLocation=e.value}),t.setEntities=function(i){t.entities=i},t.stopEdit=function(){t.editing=!1},t.$on("editEntitySuccess",function(i){t.setEntities(i.nodes),t.$broadcast("triggerNetworkDraw")}),t.animationsEnabled=!0}var e=["$scope","$timeout","_","entityService","connectionService",i];t.module("civic-graph").controller("homeCtrl",e)}(angular);
!function(i){"use strict";var a=[];i.module("civic-graph").directive("map",a)}(angular);
!function(e){"use strict";function n(e,n,t,i,c){function o(){function o(i){var o=n("filter")(e.entities,function(n){return n.collaborations.length>=e.minConnections}),a={};t.forEach(t.keys(i.connections),function(e){a[e]=[]}),t.forEach(i.connections,function(e,n){t.forEach(e,function(e){var i=t.find(o,{id:e.source}),r=t.find(o,{id:e.target});c.isDefined(i)&&c.isDefined(r)&&a[n].push({source:i,target:r})})}),t.forEach(t.keys(e.entityTypes),function(n){var i=t.takeRight(t.sortBy(t.filter(e.entities,{type:n}),"collaborations.length"),5);t.forEach(i,function(e){e.wellconnected=!0})}),o=t.sortBy(o,function(e){return e.wellconnected?1:0}),r(o,a)}i.getAll().then(o)}e.isLoading=!0,e.connections={},o(),e.safeApply=function(e){var n=this.$root.$$phase;"$apply"===n||"$digest"===n?e&&"function"==typeof e&&e():this.$apply(e)},e.$on("triggerNetworkDraw",o),e.$on("viewChange",function(e){console.log(e)});var a,r=function(n,i){e.isLoading=!1;var o=d3.select("#network");o.selectAll("*").remove();var r=o.node().getBoundingClientRect(),s=r.height,l=r.width;a=6;var u=7,d={Individual:{x:1,y:1},"For-Profit":{x:1,y:-1},"Non-Profit":{x:-1,y:1},Government:{x:-1,y:-1}},f=10,y=50,p=d3.max(n,function(e){return parseInt(e.employees)}),k=d3.max(n,function(e){return parseInt(e.followers)}),g={employees:d3.scale.sqrt().domain([10,p]).range([f,y]),followers:d3.scale.sqrt().domain([10,k]).range([f,y])},m={},h=d3.layout.force().size([l,s]).nodes(n).links(t.flatten(t.values(i))).charge(function(e){return e.employees?-2*g.employees(e.employees):-20}).linkStrength(0).linkDistance(50);t.forEach(i,function(e,n){m[n]=o.selectAll(".link ."+n+"-link").data(e).enter().append("line").attr("class",function(e){return c.isDefined(e.source)&&c.isDefined(e.target)?(e.type=n,"link "+n+"-link "+e.source.type+"-link "+e.target.type+"-link"):""})});var x=o.selectAll(".node").data(n).enter().append("g").attr("class",function(e){return"node "+e.type+"-node"}).call(h.drag);x.append("circle").attr("r",function(e){return e.employees?g.employees(e.employees):u}),x.append("text").text(function(e){return e.nickname?e.nickname:e.name}).attr("dx",function(){return-.065*this.getComputedTextLength()/2+"em"}).attr("dy",function(){return.08*this.parentNode.getBBox().height/2+.5+"em"}),h.on("tick",function(e){var i=a*e.alpha;t.forEach(n,function(e){e.x&&d[e.type]&&(e.x+=d[e.type].x*i,e.y+=d[e.type].y*i,e.x=Math.max(y,Math.min(l-y,e.x)),e.y=Math.max(y,Math.min(s-y,e.y)))}),t.forEach(m,function(e){e.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y})}),x.attr("transform",function(e){return"translate("+e.x+","+e.y+")"})});var E=function(e){requestAnimationFrame(function n(){for(var t=0;t<e;t++)h.tick();h.alpha()>0&&requestAnimationFrame(n)})};e.mobile&&(a=2),E(7),h.start();var v={};t.forEach(m,function(e){t.forEach(e[0],function(e){var n=e.__data__.source,t=e.__data__.target;v[n.index+","+t.index]=!0,v[t.index+","+n.index]=!0})});var L,T=function(e,n){return v[e.index+","+n.index]||e.index===n.index},A=function(e){x.classed("focused",function(n){return T(e,n)}).classed("unfocused",function(n){return!T(e,n)}),t.forEach(m,function(n){n.classed("focused",function(n){return e.index===n.source.index||e.index===n.target.index}).classed("unfocused",function(n){return!(e.index===n.source.index||e.index===n.target.index)})})},w=function(n){e.currentEntity!==n&&e.setEntity(n),e.safeApply(),A(n)},$=function(n){x.classed("focused",!1).classed("unfocused",!1),t.forEach(m,function(e){e.classed("focused",!1).classed("unfocused",!1)}),n.fixed=!1,e.clickedEntity.entity&&h.resume()},b=function(n){e.clickedEntity.entity||e.editing||e.currentLocation||(L=setTimeout(function(){w(n)},500)),e.actions.interacted=!0,e.safeApply()},D=function(n){e.clickedEntity.entity||e.currentLocation||($(n),clearTimeout(L)),e.actions.interacted=!0,e.safeApply()},_=function(n){e.safeApply(),x.classed("focused",function(e){return e.name in n.dict}).classed("unfocused",function(e){return!(e.name in n.dict)}),t.forEach(m,function(e){e.classed("focused",function(e){return e.source.name in n.dict&&e.target.name in n.dict}).classed("unfocused",function(e){return!(e.source.name in n.dict&&e.target.name in n.dict)})})},B=function(){x.classed("focused",!1).classed("unfocused",!1),t.forEach(m,function(e){e.classed("focused",!1).classed("unfocused",!1)}),e.clickedLocation.location&&h.resume()},P=function(n){e.showLicense=!1,e.clickedEntity.entity&&($(e.clickedEntity.entity),e.clickedEntity.entity=null),e.clickedLocation.location!==n?(B(e.clickedLocation.location),_(n)):e.clickedLocation.location===n&&(e.clickedLocation.location=n,_(n)),d3.event&&d3.event.stopPropagation(),e.actions.interacted=!0,e.safeApply()},C=function(n){e.showLicense=!1,c.isDefined(e.clickedLocation)&&(c.isDefined(e.clickedLocation.location)&&(B(e.clickedLocation.entity),e.clickedLocation.location=null),e.clickedEntity.entity===n?(e.clickedEntity.entity=null,w(n)):(e.clickedEntity.entity&&$(e.clickedEntity.entity),e.clickedEntity.entity=n,w(n))),d3.event&&d3.event.stopPropagation(),e.actions.interacted=!0,e.safeApply()},q=function(){c.isDefined(e.clickedLocation)&&(c.isDefined(e.clickedLocation.location)&&($(e.clickedLocation.location),e.clickedLocation.location=null),c.isDefined(e.clickedEntity.entity)&&($(e.clickedEntity.entity),e.clickedEntity.entity=null)),e.safeApply()},I=function(n){n.fixed?$(n):(n.x=l/2,n.y=s/2,n.px=l/2,n.py=s/2,n.fixed=!0,e.clickedEntity.entity=n),e.actions.interacted=!0,e.safeApply()};x.on("mouseover",b),x.on("mouseout",D),x.on("click",C),x.on("dblclick",I),o.on("click",q),x.classed("wellconnected",function(e){return e.hasOwnProperty("wellconnected")}),e.$on("changeSizeBy",function(e,n){o.selectAll("circle").transition().duration(250).attr("r",function(e){return e[n]?g[n](e[n]):u})}),e.$on("toggleLink",function(n,i){e.connectionTypes[i.name]=i.enabled,t.map(e.entityTypes,function(n,t){o.selectAll("."+t+"-link").classed({visible:function(n){return e.connectionTypes[n.type]&&e.entityTypes[n.source.type]&&e.entityTypes[n.target.type]},hidden:function(n){return!e.connectionTypes[n.type]||!e.entityTypes[n.source.type]||!e.entityTypes[n.target.type]}})})}),e.$on("toggleNode",function(n,t){e.entityTypes[t.name]=t.enabled,o.selectAll("."+t.name+"-node").classed({visible:t.enabled,hidden:!t.enabled}),o.selectAll("."+t.name+"-link").classed({visible:function(n){return e.connectionTypes[n.type]&&e.entityTypes[n.source.type]&&e.entityTypes[n.target.type]},hidden:function(n){return!e.connectionTypes[n.type]||!e.entityTypes[n.source.type]||!e.entityTypes[n.target.type]}})}),e.$on("selectItem",function(n,t){"location"===t.type?P(e.currentLocation):C(e.currentEntity)})}}n.$inject=["$scope","$filter","_","connectionService","cgUtilService"],e.module("civic-graph").controller("networkCtrl",n)}(angular,RTP);
!function(r){"use strict";function t(){return{restrict:"E",templateUrl:"js/network/network.html",controller:"networkCtrl"}}var e=[t];r.module("civic-graph").directive("network",e)}(angular);
!function(e){"use strict";e.module("civic-graph").directive("input",function(){return{restict:"E",require:"?ngModel",link:function(e,r,t,i){"type"in t&&"range"===t.type.toLowerCase()&&i.$parsers.push(parseFloat)}}})}(angular);
!function(e){"use strict";function t(e,t){e.categorizedEntities={},t.forEach(t.keys(e.entityTypes),function(i){e.categorizedEntities[i]=t.filter(e.entities,{type:i})})}e.module("civic-graph").controller("overviewCtrl",["$scope","_",t])}(angular);
!function(r){"use strict";function n(r){return!("undefined"==typeof r||null===r)}function t(r){return n(r)&&!Array.isArray(r)&&"object"==typeof r}function e(r){var t=n(r)?r:{};return function(r,e){var i=n(e)?e:null;return n(t[r])?t[r]:i}}function i(r,n){var e=Array.isArray(r)?r.filter(t).map(n):[];return e.concat([n()])}function u(){return{isDefined:n,isObject:t,getPropertyFromObj:e,loopAndInit:i}}r.module("civic-graph.util").factory("cgUtilService",u)}(angular);
!function(c){"use strict";function n(c){}c.module("civic-graph").controller("analyticsCtrl",["$scope",n])}(angular);
!function(t){"use strict";function e(t){t.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}e.$inject=["$httpProvider"],t.module("civic-graph.api").config(e)}(angular);
!function(t){"use strict";function r(t,r){function a(t){return console.error("Recieved an error from API with this message: %O",t.data),r.reject(t)}function i(t){return t.data}function c(r,c){return t.get(e+r,{params:c,headers:n}).then(i,a)}function o(r,c){return t.post(e+r,c,{headers:n}).then(i,a)}return{get:c,post:o}}var e="https://api.civicgraph.io/api",n={};r.$inject=["$http","$q"],t.module("civic-graph.api").factory("cgApiCaller",r)}(angular);
!function(e){"use strict";function i(e){function i(i){function t(){var t=e.isDefined(i)?i:{},o=e.isDefined(t.address_line)?t.address_line+" ":"",c=e.isDefined(t.locality)?t.locality+", ":"",n=e.isDefined(t.country_code)?t.country_code+" ":"",r=e.isDefined(t.postal_code)?t.postal_code:"";return(o+c+n+r).trim()}var o=this,c=e.getPropertyFromObj(i);o.id=c("id"),o.address_line=c("address_line"),o.locality=c("locality"),o.district=c("district"),o.postal_code=c("postal_code"),o.country=c("country"),o.country_code=c("country_code"),o.coordinates=c("coordinates"),o.formattedAddress=t()}function t(e){return new i(e)}return{getLocationModel:t}}i.$inject=["cgUtilService"],e.module("civic-graph.api").factory("locationService",i)}(angular);
!function(e){"use strict";function n(){return{Government:!0,"For-Profit":!0,"Non-Profit":!0,Individual:!0}}function o(){return["Local","National","Global"]}function t(e,t,i,p,r,a,c){function l(e){function n(){var e=new l(o);return e.locations.pop(),e.locations.pop(),e.grants_received.pop(),e.grants_received.pop(),e.grants_given.pop(),e.grants_given.pop(),e.investments_received.pop(),e.investments_received.pop(),e.investments_made.pop(),e.investments_made.pop(),e.data_given.pop(),e.data_given.pop(),e.data_received.pop(),e.data_received.pop(),e.collaborations.pop(),e.collaborations.pop(),e.key_people.pop(),e.key_people.pop(),e.employments.pop(),e.employments.pop(),e.revenues.pop(),e.revenues.pop(),e.expenses.pop(),e.expenses.pop(),e.categories.pop(),e.categories.pop(),e.description="",e}var o=this,d=c.isDefined(e)?e:{},s=c.getPropertyFromObj(e);o.id=s("id"),o.name=s("name"),o.influence=s("influence"),o.type=s("type"),o.nickname=s("nickname"),o.url=s("url"),o.twitter_handle=s("twitter_handle"),o.employees=s("employees"),o.locations=c.loopAndInit(d.locations,r.getLocationModel),o.grants_received=c.loopAndInit(d.grants_received,t.getFundingConnectionModel),o.investments_received=c.loopAndInit(d.investments_received,t.getFundingConnectionModel),o.grants_given=c.loopAndInit(d.grants_given,t.getFundingConnectionModel),o.investments_made=c.loopAndInit(d.investments_made,t.getFundingConnectionModel),o.data_given=c.loopAndInit(d.data_given,i.getConnectionModel),o.data_received=c.loopAndInit(d.data_received,i.getConnectionModel),o.collaborations=c.loopAndInit(d.collaborations,i.getConnectionModel),o.key_people=c.loopAndInit(d.key_people,i.getConnectionModel),o.employments=c.loopAndInit(d.employments,i.getConnectionModel),o.revenues=c.loopAndInit(d.revenues,p.getFinanceModel),o.expenses=c.loopAndInit(d.expenses,p.getFinanceModel),o.categories=c.loopAndInit(d.categories,a.getCategoryModel),o.generateDBModel=n}function d(e){return new l(e)}function s(){return e.get("/entities")}function g(n){return e.post("/save",{entity:n})}return{getEntityModel:d,getEntityTypes:n,getInfluenceTypes:o,getAll:s,saveEntity:g}}t.$inject=["cgApiCaller","fundingConnectionService","connectionService","financeService","locationService","categoryService","cgUtilService"],e.module("civic-graph.api").factory("entityService",t)}(angular);
!function(e){"use strict";function o(e,o,n,t,i){function c(){a.changeView(a.toggleNetwork?"Network":"Map")}var a=this;a.entityTypes=e.getEntityTypes(),a.connectionTypes=o.getConnectionTypes(),a.sizeByList=[{name:"Employees",value:"employees"},{name:"Twitter Followers",value:"followers"}],a.sizeBy="employees",a.showView={Network:!0,Map:!1},a.switchView=c,a.changeView=function(e){t.forEach(t.keys(a.showView),function(o){a.showView[o]=e===o}),n.$broadcast("viewChange",a.showView)},a.showAbout=function(){i.open({animation:!1,templateUrl:"control/about.html",controller:"modalCtrl"})},a.toggleNode=function(e){n.$broadcast("toggleNode",{name:e,enabled:a.entityTypes[e]})},a.toggleLink=function(e){n.$broadcast("toggleLink",{name:e,enabled:a.connectionTypes[e]})},a.changeSizeBy=function(){n.$broadcast("changeSizeBy",a.sizeBy)},a.changeSizeBy()}var n=["entityService","connectionService","$rootScope","_","$modal",o];e.module("civic-graph").controller("controlCtrl",n)}(angular);
!function(e){"use strict";function n(e,n){e.itemsShownDefault={key_people:3,grants_given:3,grants_received:3,investments_made:3,investments_received:3,collaborations:3,employments:3,relations:3,data_given:3,data_received:3,revenues:3,expenses:3},e.itemsShown=n.clone(e.itemsShownDefault),e.$on("entityChange",function(){e.itemsShown=n.clone(e.itemsShownDefault)}),e.showMore=function(n){e.itemsShown[n]=e.currentEntity[n].length},e.showLess=function(n){e.itemsShown[n]=e.itemsShownDefault[n]}}e.module("civic-graph").controller("detailsCtrl",["$scope","_",n])}(angular);
!function(t,e,n){"use strict";function i(t,i,o,r,a){t.options={center:{lat:20,lng:-40,zoom:3},defaults:{tileLayer:"https://api.tiles.mapbox.com/v4/mapbox.light/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZGF2aWRscm50IiwiYSI6IjA0M2RkNzMzZWJmNzEzNGYzMTdhYTExYzAyZmU4ZTE1In0.TNYlFta2VItrkn4L0Z9BJQ",tileLayerOptions:{detectRetina:!0,reuseTiles:!1},zoomControl:!1,attributionControl:!1}},t.safeApply=function(t){var e=this.$root.$$phase;"$apply"===e||"$digest"===e?t&&"function"==typeof t&&t():this.$apply(t)},i(function(){var i=function(t){var n=t.data,i=e.layout.pie().sort(null).value(function(t){return t.value}),o=e.svg.arc().outerRadius(t.r).innerRadius(t.r-10),r=t.r+t.strokeWidth,a=2*r,c=a,l=document.createElementNS(e.ns.prefix.svg,"svg"),s=e.select(l).data(n).attr("class","piechart").attr("width",a).attr("height",c),p=s.selectAll(".arc").data(i(n)).enter().append("g").attr("class","arc").attr("transform","translate("+r+","+r+")");return p.append("path").attr("d",o).attr("class",function(t){return t.data.type+"-arc"}),p.append("svg:text").text(function(e,n){if(0===n)return t.count}).attr("x",-4*t.count.toString().length).attr("dy",5).attr("class","arcText"),window.XMLSerializer?(new window.XMLSerializer).serializeToString(l):l.xml?l.xml:""};o.getMap().then(function(e){function o(t){var e=t.getAllChildMarkers(),o=e.length,a=r.pluck(e,"options"),c=r.map(r.countBy(a,"type"),function(t,e){return{type:e,value:t}}),l=28,s=1,p=2*(l+s),u=i({data:c,r:l,strokeWidth:s,count:o});return new n.DivIcon({html:u,className:"marker-cluster",iconSize:new n.point(p,p)})}function a(t){function e(e){if(r.every(e.coordinates)){"40.78200"===e.coordinates[0].toFixed(5)&&"-73.83170"===e.coordinates[1].toFixed(5)&&(e.coordinates[0]=40.77065,e.coordinates[1]=-73.97406);var i=n.marker(e.coordinates,{icon:s[t.type],title:t.name,entity_id:t.id,message:t.name,type:t.type});p.addLayer(i)}}r.forEach(t.locations,e)}function c(t){console.error(t.message+"  %O",t)}var l=t.entities;e.invalidateSize(),new n.Control.Zoom({position:"topright"}).addTo(e),n.control.locate({position:"topright",showPopup:!1,icon:"fa fa-location-arrow"}).addTo(e);var s={"Non-Profit":n.icon({iconUrl:"img/marker-nonprof.svg",iconSize:[60,60]}),"For-Profit":n.icon({iconUrl:"img/marker-prof.svg",iconSize:[60,60]}),Individual:n.icon({iconUrl:"img/marker-ind.svg",iconSize:[60,60]}),Government:n.icon({iconUrl:"img/marker-gov.svg",iconSize:[60,60]})},p=n.markerClusterGroup({spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,iconCreateFunction:o,maxClusterRadius:30,spiderfyDistanceMultiplier:1.3});console.log("Original: %O",t.entities),console.log("Filtered: %O",l),r.forEach(l,a),e.addLayer(p),e.on("locationerror",c),p.on("click",function(e){t.setEntityID(e.layer.options.entity_id),t.clickedEntity.entity=t.currentEntity,t.actions.interacted=!0,t.settingsEnabled&&t.mobile&&t.toggleSettings(),t.safeApply()}),e.on("click",function(){t.clickedEntity.entity=null,t.actions.interacted=!0,t.safeApply()}),t.$on("selectItem",function(){var n=t.currentEntity.locations.length>0?r.pluck(t.currentEntity.locations,"coordinates"):null;n.length>0&&e.setView(n[0],11),t.actions.interacted=!0,t.safeApply()})})})}var o=["$scope","$timeout","leafletData","_","$filter",i];t.module("civic-graph").controller("mapCtrl",o)}(angular,d3,L);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNpdmljLWdyYXBoLm1vZHVsZS5qcyIsImFuYWx5dGljL2FuYWx5dGljc0RpcmVjdGl2ZS5qcyIsImFwaS9jYXRlZ29yeS5zZXJ2aWNlLmpzIiwiYXBpL2Nvbm5lY3Rpb24uc2VydmljZS5qcyIsImFwaS9maW5hbmNlLnNlcnZpY2UuanMiLCJhcGkvZnVuZGluZ0Nvbm5lY3Rpb24uc2VydmljZS5qcyIsImNvbnRyb2wvY29udHJvbERpcmVjdGl2ZS5qcyIsImVkaXQtZW50aXR5L2VkaXRDdHJsLmpzIiwiZWRpdC1lbnRpdHkvZWRpdEVudGl0eURpcmVjdGl2ZS5qcyIsImV4dHJhL2FkZE1vYmlsZUV2ZW50cy5qcyIsImV4dHJhL21vZGFsQ3RybC5qcyIsIm1haW4vYXBwLmpzIiwibWFpbi9ob21lQ3RybC5qcyIsIm1hcC9tYXBEaXJlY3RpdmUuanMiLCJuZXR3b3JrL25ldHdvcmtDdHJsLmpzIiwibmV0d29yay9uZXR3b3JrRGlyZWN0aXZlLmpzIiwibmV0d29yay9zbGlkZXJCYXIuanMiLCJvdmVydmlldy9vdmVydmlld0N0cmwuanMiLCJ1dGlsL3NlcnZpY2UuanMiLCJhbmFseXRpYy9jb250cm9sbGVyL2FuYWx5dGljc0N0cmwuanMiLCJhcGkvYXBpQ2FsbGVyL2NvbmZpZy5qcyIsImFwaS9hcGlDYWxsZXIvc2VydmljZS5qcyIsImFwaS9lbnRpdHkvbG9jYXRpb24uc2VydmljZS5qcyIsImFwaS9lbnRpdHkvc2VydmljZS5qcyIsImNvbnRyb2wvY29udHJvbGxlci9jb250cm9sQ3RybC5qcyIsImRldGFpbC9jb250cm9sbGVyL2RldGFpbHNDdHJsLmpzIiwibWFwL2NvbnRyb2xsZXIvbWFwQ3RybC5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibWFpbkRlcGVuZGVuY3lMaXN0IiwiYXBpRGVwZW5kZW5jeUxpc3QiLCJtb2R1bGUiLCJhbmFseXRpY3NEaXJlY3RpdmUiLCJ0ZW1wbGF0ZVVybCIsInJlc3RyaWN0Iiwic2NvcGUiLCJjb250cm9sbGVyIiwiYW5hbHl0aWNzRGVwZW5kZW5jaWVzIiwiZGlyZWN0aXZlIiwiU2VydmljZSIsImFwaUNhbGxlciIsInV0aWxzIiwiQ2F0ZWdvcnkiLCJvYmoiLCJnZXRQcm9wZXJ0eSIsImdldFByb3BlcnR5RnJvbU9iaiIsInRoaXMiLCJpZCIsIm5hbWUiLCJlbmFibGVkIiwiZ2V0Q2F0ZWdvcnlNb2RlbCIsImdldEFsbCIsImdldCIsIiRpbmplY3QiLCJmYWN0b3J5IiwiZ2V0Q29ubmVjdGlvblR5cGVzIiwiRnVuZGluZyIsIkRhdGEiLCJFbXBsb3ltZW50IiwiQ29sbGFib3JhdGlvbiIsIkNvbm5lY3Rpb24iLCJkZXRhaWxzIiwiZW50aXR5IiwiZW50aXR5X2lkIiwiZ2V0Q29ubmVjdGlvbk1vZGVsIiwidXJsIiwiRmluYW5jZSIsInllYXIiLCJhbW91bnQiLCJnZXRGaW5hbmNlTW9kZWwiLCJGdW5kaW5nQ29ubmVjdGlvbiIsImdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwiLCJjb250cm9sRGlyZWN0aXZlIiwidG9nZ2xlTmV0d29yayIsImNvbnRyb2xsZXJBcyIsImJpbmRUb0NvbnRyb2xsZXIiLCJtaW5Db25uZWN0aW9ucyIsImNvbnRyb2xEZXBlbmRlbmNpZXMiLCJDb250cm9sbGVyIiwiJHNjb3BlIiwiJGh0dHAiLCIkdGltZW91dCIsIl8iLCJlbnRpdHlTZXJ2aWNlIiwiY2F0ZWdvcnlTZXJ2aWNlIiwibG9jYXRpb25TZXJ2aWNlIiwiaW5pdENhdGVnb3J5QXJyYXkiLCJjYXRlZ29yeSIsImNhdGVnb3J5SW5kZXgiLCJlbnRpdHlDYXRlZ29yeUluZGV4IiwiZW50aXR5Q2F0ZWdvcnkiLCJjYXRlZ29yaWVzIiwiaGFzT3duUHJvcGVydHkiLCJlZGl0RW50aXR5IiwiaXNFZGl0aW5nIiwiZ2V0RW50aXR5TW9kZWwiLCJlbnRpdHlUeXBlcyIsImdldEVudGl0eVR5cGVzIiwiaW5mbHVlbmNlVHlwZXMiLCJnZXRJbmZsdWVuY2VUeXBlcyIsImNhdGVnb3J5QmFja3VwIiwiYWRkcmVzc1NlYXJjaCIsInNlYXJjaCIsImpzb25wIiwicGFyYW1zIiwicXVlcnkiLCJrZXkiLCJpbmNsdWRlIiwidGhlbiIsInJlc3BvbnNlIiwiaXNEZWZpbmVkIiwiZGF0YSIsInJlc291cmNlU2V0cyIsImxlbmd0aCIsInJlc291cmNlcyIsInRvZ2dsZUNhdGVnb3J5IiwicHVzaCIsImZvdW5kIiwic2V0TG9jYXRpb24iLCJsb2NhdGlvbiIsImlzTGFzdCIsImZvcm1hdHRlZEFkZHJlc3MiLCJhcGlDYWxsUmVzdWx0IiwicmVzdWx0IiwiYWRkcmVzcyIsInBvaW50IiwiYWRkTG9jYXRpb24iLCJhZGRyZXNzX2xpbmUiLCJhZGRyZXNzTGluZSIsImxvY2FsaXR5IiwiZGlzdHJpY3QiLCJhZG1pbkRpc3RyaWN0IiwiY291bnRyeSIsImNvdW50cnlSZWdpb24iLCJjb3VudHJ5X2NvZGUiLCJjb3VudHJ5UmVnaW9uSXNvMiIsImNvb3JkaW5hdGVzIiwicG9zdGFsX2NvZGUiLCJwb3N0YWxDb2RlIiwibG9jYXRpb25zIiwiZ2V0TG9jYXRpb25Nb2RlbCIsImFkZEtleVBlcnNvbiIsInNvbWUiLCJrZXlfcGVvcGxlIiwic2V0RnVuZGluZ0Nvbm5lY3Rpb24iLCJmdW5kaW5nIiwiYWRkRnVuZGluZ0Nvbm5lY3Rpb24iLCJzZXRDb25uZWN0aW9uIiwiY29ubmVjdGlvbiIsImFkZENvbm5lY3Rpb24iLCJjb25uZWN0aW9ucyIsImFkZEZpbmFuY2UiLCJyZWNvcmRzIiwiZXZlcnkiLCJyIiwic2F2ZSIsInN1Y2Nlc3MiLCJpc1NhdmluZyIsIiRlbWl0IiwiY2FuY2VsRWRpdCIsImVycm9yIiwiaXNFcnJvciIsInNhdmVFbnRpdHkiLCJnZW5lcmF0ZURCTW9kZWwiLCJpc09wZW4iLCIkd2F0Y2giLCJuZXdWYWwiLCJvbGRWYWwiLCJlcXVhbHMiLCJjb3B5IiwiZWRpdEVudGl0eURpcmVjdGl2ZSIsImVudGl0aWVzIiwiZWRpdEVudGl0eURlcGVuZGVuY2llcyIsIiQiLCJsaW5rRnVuY3Rpb24iLCJzY3JvbGwiLCJzZWxmIiwiY3NzIiwiY2xpY2siLCJ3aW5kb3ciLCJpbm5lckhlaWdodCIsInBhcnNlSW50IiwiZGV0YWlsc1BhbmVsIiwibW9iaWxlIiwic2Nyb2xsVG9wIiwiYWRkTW9iaWxlRXZlbnRzIiwibGluayIsIm1vZGFsQ3RybCIsIiRtb2RhbEluc3RhbmNlIiwiY2xvc2VXaW5kb3ciLCJjbG9zZSIsImNvbnN0YW50IiwiY29uZmlnIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCIkY29tcGlsZVByb3ZpZGVyIiwiaHRtbDVNb2RlIiwiZGVidWdJbmZvRW5hYmxlZCIsImZpbHRlciIsImlucHV0IiwiZGVjaW1hbHMiLCJleHAiLCJzdWZmaXhlcyIsImlzTmFOIiwiTWF0aCIsImZsb29yIiwibG9nIiwicG93IiwidG9GaXhlZCIsImhvbWVDdHJsIiwiY29ubmVjdGlvblNlcnZpY2UiLCJ3YXRjaE1pbkNvbm5lY3Rpb24iLCIkYnJvYWRjYXN0Iiwic2VhcmNoSXRlbXMiLCJjdXJyZW50TG9jYXRpb24iLCJjbGlja2VkTG9jYXRpb24iLCJjbGlja2VkRW50aXR5IiwiZWRpdGluZyIsImFjdGlvbnMiLCJpbnRlcmFjdGVkIiwic2hvd3NlYXJjaE1CIiwic2hvd0FuYWx5dGljcyIsImNvbm5lY3Rpb25UeXBlcyIsInN0YXR1cyIsImlzTmV0d29ya1Nob3duIiwibGljZW5zZSIsIm5ldHdvcmtMb2FkaW5nIiwidG9nZ2xlQW5hbHl0aWNzIiwiY29ubmVjdGlvbkNoYW5nZSIsImNvbnNvbGUiLCJoeWRlUGFydGlhbHMiLCJleGNlcHQiLCJzZXR0aW5nc0VuYWJsZWQiLCJzaG93U2VhcmNoIiwidG9nZ2xlU2V0dGluZ3MiLCJzdGFydEVkaXQiLCJjdXJyZW50RW50aXR5Iiwic3dpdGNoVmlldyIsIm1vYmlsZWNoZWNrIiwiY2hlY2siLCJyZWdleCIsInJlZ2V4MiIsImEiLCJ0ZXN0Iiwic3Vic3RyIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidmVuZG9yIiwib3BlcmEiLCJub2RlcyIsInVuaXEiLCJwbHVjayIsImZsYXR0ZW4iLCJlbnRpdGllc0J5TG9jYXRpb24iLCJtYXAiLCJsb2MiLCJmaW5kaW5ncyIsImZsb3ciLCJwcm9wZXJ0eSIsInBhcnRpYWxSaWdodCIsImFueSIsInR5cGUiLCJkaWN0IiwiemlwT2JqZWN0IiwiY29uY2F0Iiwib3ZlcnZpZXdVcmwiLCJzZXRFbnRpdHkiLCJzdG9wRWRpdCIsInNldEVudGl0eUlEIiwiZmluZCIsInNlbGVjdEl0ZW0iLCJpdGVtIiwiJG9uIiwiZXZlbnQiLCJhcmdzIiwidmFsdWUiLCJzZXRFbnRpdGllcyIsImFuaW1hdGlvbnNFbmFibGVkIiwiaG9tZURlcGVuZGVuY2llcyIsImRlcGVuZGVuY2llcyIsIiRmaWx0ZXIiLCJzdGFydExvYWQiLCJmaWx0ZXJlZEVudGl0aWVzIiwiY29sbGFib3JhdGlvbnMiLCJmaWx0ZXJlZENvbm5lY3Rpb25zIiwiZm9yRWFjaCIsImtleXMiLCJzb3VyY2VOb2RlIiwic291cmNlIiwidGFyZ2V0Tm9kZSIsInRhcmdldCIsInRvcDUiLCJ0YWtlUmlnaHQiLCJzb3J0QnkiLCJ3ZWxsY29ubmVjdGVkIiwiZSIsImRyYXdOZXR3b3JrIiwiaXNMb2FkaW5nIiwic2FmZUFwcGx5IiwiZm4iLCJwaGFzZSIsIiRyb290IiwiJCRwaGFzZSIsIiRhcHBseSIsInZpZXdPYmoiLCJvZmZzZXRTY2FsZSIsImVudGl0eUFycmF5IiwiY29ubmVjdGlvbkFycmF5Iiwic3ZnIiwiZDMiLCJzZWxlY3QiLCJzZWxlY3RBbGwiLCJyZW1vdmUiLCJib3VuZHMiLCJub2RlIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiaGVpZ2h0Iiwid2lkdGgiLCJkZWZhdWx0Tm9kZVNpemUiLCJvZmZzZXRzIiwiSW5kaXZpZHVhbCIsIngiLCJ5IiwiRm9yLVByb2ZpdCIsIk5vbi1Qcm9maXQiLCJHb3Zlcm5tZW50IiwibG93ZXJCb3VuZFJhZGl1cyIsInVwcGVyQm91bmRSYWRpdXMiLCJtYXhFbXBsb3llZXMiLCJtYXgiLCJlbCIsImVtcGxveWVlcyIsIm1heEZvbGxvd2VycyIsImZvbGxvd2VycyIsInNjYWxlIiwic3FydCIsImRvbWFpbiIsInJhbmdlIiwibGlua3MiLCJmb3JjZSIsImxheW91dCIsInNpemUiLCJ2YWx1ZXMiLCJjaGFyZ2UiLCJkIiwibGlua1N0cmVuZ3RoIiwibGlua0Rpc3RhbmNlIiwiZW50ZXIiLCJhcHBlbmQiLCJhdHRyIiwiY2FsbCIsImRyYWciLCJ0ZXh0Iiwibmlja25hbWUiLCJnZXRDb21wdXRlZFRleHRMZW5ndGgiLCJwYXJlbnROb2RlIiwiZ2V0QkJveCIsIm9uIiwiayIsImFscGhhIiwibWluIiwic3BlZWRBbmltYXRlIiwidGlja3MiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJyZW5kZXIiLCJpIiwidGljayIsInN0YXJ0IiwibGlua2VkQnlJbmRleCIsImwiLCJfX2RhdGFfXyIsImluZGV4IiwiaG92ZXJUaW1lciIsIm5laWdoYm9yaW5nIiwiYiIsImZvY3VzbmVpZ2hib3JzIiwiY2xhc3NlZCIsIm4iLCJvIiwiZm9jdXMiLCJ1bmZvY3VzIiwiZml4ZWQiLCJyZXN1bWUiLCJob3ZlciIsInNldFRpbWVvdXQiLCJ1bmhvdmVyIiwiY2xlYXJUaW1lb3V0IiwiZm9jdXNMb2NhdGlvbiIsInVuZm9jdXNMb2NhdGlvbiIsImhpZ2hsaWdodExvY2F0aW9uIiwic2hvd0xpY2Vuc2UiLCJzdG9wUHJvcGFnYXRpb24iLCJiYWNrZ3JvdW5kY2xpY2siLCJkYmxjbGljayIsInB4IiwicHkiLCJzaXplQnkiLCJ0cmFuc2l0aW9uIiwiZHVyYXRpb24iLCJ2YWwiLCJ2aXNpYmxlIiwiaGlkZGVuIiwiUlRQIiwicmVzdGljdCIsInJlcXVpcmUiLCJlbGVtZW50IiwiYXR0cnMiLCJuZ01vZGVsIiwidG9Mb3dlckNhc2UiLCIkcGFyc2VycyIsInBhcnNlRmxvYXQiLCJvdmVydmlld0N0cmwiLCJjYXRlZ29yaXplZEVudGl0aWVzIiwiaXNPYmplY3QiLCJBcnJheSIsImlzQXJyYXkiLCJkZWZPYmoiLCJkZWZhdWx0VmFsdWUiLCJsb29wQW5kSW5pdCIsIm1vZGVsQXJyYXkiLCJpbml0TW9kZWxGdW5jdGlvbiIsIm5ld0FycmF5IiwiYW5hbHl0aWNzQ3RybCIsIkNvbmZpZyIsIiRodHRwUHJvdmlkZXIiLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iLCIkcSIsImxvZ0FwaUVycm9yIiwiZXJyIiwicmVqZWN0IiwidW53cmFwQW5ndWxhckh0dHAiLCJhcGlVcmwiLCJkZWZhdWx0SGVhZGVyIiwicG9zdCIsIkxvY2F0aW9uIiwiYnVpbGRGb3JtYXR0ZWRBZGRyZXNzIiwiY291bnRyeUNvZGUiLCJ0cmltIiwiZnVuQ29ublNlcnZpY2UiLCJjb25uU2VydmljZSIsImZpbmFuY2VTZXJ2aWNlIiwiRW50aXR5IiwiZGJNb2RlbCIsInBvcCIsImdyYW50c19yZWNlaXZlZCIsImdyYW50c19naXZlbiIsImludmVzdG1lbnRzX3JlY2VpdmVkIiwiaW52ZXN0bWVudHNfbWFkZSIsImRhdGFfZ2l2ZW4iLCJkYXRhX3JlY2VpdmVkIiwiZW1wbG95bWVudHMiLCJyZXZlbnVlcyIsImV4cGVuc2VzIiwiZGVzY3JpcHRpb24iLCJpbmZsdWVuY2UiLCJ0d2l0dGVyX2hhbmRsZSIsImNvbnRyb2xDdHJsIiwiJHJvb3RTY29wZSIsIiRtb2RhbCIsInZtIiwiY2hhbmdlVmlldyIsInNpemVCeUxpc3QiLCJzaG93VmlldyIsIk5ldHdvcmsiLCJNYXAiLCJ2aWV3Iiwic2hvd0Fib3V0Iiwib3BlbiIsImFuaW1hdGlvbiIsInRvZ2dsZU5vZGUiLCJ0b2dnbGVMaW5rIiwiY2hhbmdlU2l6ZUJ5IiwiY29udHJvbERlcHMiLCJkZXRhaWxzQ3RybCIsIml0ZW1zU2hvd25EZWZhdWx0IiwicmVsYXRpb25zIiwiaXRlbXNTaG93biIsImNsb25lIiwic2hvd01vcmUiLCJzaG93TGVzcyIsIkwiLCJtYXBDdHJsIiwibGVhZmxldERhdGEiLCJvcHRpb25zIiwiY2VudGVyIiwibGF0IiwibG5nIiwiem9vbSIsInRpbGVMYXllciIsInRpbGVMYXllck9wdGlvbnMiLCJkZXRlY3RSZXRpbmEiLCJyZXVzZVRpbGVzIiwiem9vbUNvbnRyb2wiLCJhdHRyaWJ1dGlvbkNvbnRyb2wiLCJjcmVhdGVQaWVDaGFydCIsInBpZSIsInNvcnQiLCJhcmMiLCJvdXRlclJhZGl1cyIsImlubmVyUmFkaXVzIiwic3Ryb2tlV2lkdGgiLCJ3IiwiaCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwibnMiLCJwcmVmaXgiLCJ2aXMiLCJhcmNzIiwiY291bnQiLCJ0b1N0cmluZyIsIlhNTFNlcmlhbGl6ZXIiLCJzZXJpYWxpemVUb1N0cmluZyIsInhtbCIsImdldE1hcCIsImNsdXN0ZXJJY29uIiwiY2x1c3RlciIsImNoaWxkcmVuIiwiZ2V0QWxsQ2hpbGRNYXJrZXJzIiwidG90YWwiLCJjbHVzdGVyTWFya2VycyIsImNvdW50cyIsImNvdW50QnkiLCJpY29uRGltIiwiaHRtbCIsIkRpdkljb24iLCJjbGFzc05hbWUiLCJpY29uU2l6ZSIsIm91dGVyTG9vcCIsImlubmVyTG9vcCIsIm0iLCJtYXJrZXIiLCJpY29uIiwibWFya2VySWNvbiIsInRpdGxlIiwibWVzc2FnZSIsIm1hcmtlcnMiLCJhZGRMYXllciIsIm9uTG9jYXRpb25FcnJvciIsImxlYWZsZXRFcnJvciIsImludmFsaWRhdGVTaXplIiwiQ29udHJvbCIsIlpvb20iLCJwb3NpdGlvbiIsImFkZFRvIiwiY29udHJvbCIsImxvY2F0ZSIsInNob3dQb3B1cCIsImljb25VcmwiLCJtYXJrZXJDbHVzdGVyR3JvdXAiLCJzcGlkZXJmeU9uTWF4Wm9vbSIsInNob3dDb3ZlcmFnZU9uSG92ZXIiLCJpY29uQ3JlYXRlRnVuY3Rpb24iLCJtYXhDbHVzdGVyUmFkaXVzIiwic3BpZGVyZnlEaXN0YW5jZU11bHRpcGxpZXIiLCJsYXllciIsInNldFZpZXciXSwibWFwcGluZ3MiOiJDQUFBLFNBQVVBLEdBRU4sWUFFQSxJQUFJQyxJQUNBLGVBQ0Esb0JBQ0EsWUFDQSxnQkFDQSxrQkFDQSxvQkFHQUMsR0FBcUIsbUJBRXpCRixHQUFRRyxPQUFPLHVCQUNmSCxFQUFRRyxPQUFPLGtCQUFtQkQsR0FDbENGLEVBQVFH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QixFQUFPd0ksY0FBY3pKLE9BQVNpQixFQUFPNEosY0FDckM1SixFQUFPMEksUUFBUUMsWUFBZSxFQUMxQjNJLEVBQU93SixpQkFBbUJ4SixFQUFPd0csUUFDakN4RyxFQUFPMEosaUJBRVgxSixFQUFPME4sY0FHWDVDLEVBQUl1RyxHQUFHLFFBQVMsV0FDWnJSLEVBQU93SSxjQUFjekosT0FBUyxLQUM5QmlCLEVBQU8wSSxRQUFRQyxZQUFlLEVBQzlCM0ksRUFBTzBOLGNBRVgxTixFQUFPZ00sSUFBSSxhQUFjLFdBQ3JCLEdBQUl2SSxHQUFjekQsRUFBTzRKLGNBQWNoRyxVQUFVMUIsT0FBUyxFQUFJL0IsRUFBRXdLLE1BQzVEM0ssRUFBTzRKLGNBQWNoRyxVQUFXLGVBQWlCLElBQ2pESCxHQUFZdkIsT0FBUyxHQUNyQjRJLEVBQUlnVCxRQUFRcmEsRUFBWSxHQUFJLElBRWhDekQsRUFBTzBJLFFBQVFDLFlBQWEsRUFDNUIzSSxFQUFPME4sa0JBek12QixHQUFJbkIsSUFDQSxTQUNBLFdBQ0EsY0FDQSxJQUNBLFVBQ0E0TSxFQXlNSnRjLEdBQVFHLE9BQU8sZUFFVkssV0FBVyxVQUFXa1AsSUFDNUIxUCxRQUFTd1IsR0FBSTZLIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oYW5ndWxhcikge1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgbWFpbkRlcGVuZGVuY3lMaXN0ID0gW1xyXG4gICAgICAgIFwidWkuYm9vdHN0cmFwXCIsXHJcbiAgICAgICAgXCJsZWFmbGV0LWRpcmVjdGl2ZVwiLFxyXG4gICAgICAgIFwibmdBbmltYXRlXCIsXHJcbiAgICAgICAgXCJ0ZW1wbGF0ZUNhY2hlXCIsXHJcbiAgICAgICAgXCJjaXZpYy1ncmFwaC5hcGlcIixcclxuICAgICAgICBcImNpdmljLWdyYXBoLnV0aWxcIlxyXG4gICAgXTtcclxuXHJcbiAgICB2YXIgYXBpRGVwZW5kZW5jeUxpc3QgPSBbXCJjaXZpYy1ncmFwaC51dGlsXCJdO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiY2l2aWMtZ3JhcGgudXRpbFwiLCBbXSk7XHJcbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiLCBhcGlEZXBlbmRlbmN5TGlzdCk7XHJcbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoXCIsIG1haW5EZXBlbmRlbmN5TGlzdCk7XHJcblxyXG59KShhbmd1bGFyKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMS8xNi5cclxuICovXHJcblxyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBhbmFseXRpY3NEZXBlbmRlbmNpZXMgPSBbYW5hbHl0aWNzRGlyZWN0aXZlXTtcclxuXHJcbiAgICBmdW5jdGlvbiBhbmFseXRpY3NEaXJlY3RpdmUoKXtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2pzL2FuYWx5dGljL2FuYWx5dGljcy5odG1sJyxcclxuICAgICAgICAgICAgcmVzdHJpY3QgICA6ICdFJyxcclxuICAgICAgICAgICAgc2NvcGUgICAgICA6IHt9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyICAgOiAnYW5hbHl0aWNzQ3RybCdcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnYW5hbHl0aWNzJywgYW5hbHl0aWNzRGVwZW5kZW5jaWVzKTtcclxuXHJcbn0pKGFuZ3VsYXIpO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yOC8xNi5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBmdW5jdGlvbiBTZXJ2aWNlKGFwaUNhbGxlciwgdXRpbHMpIHtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gQ2F0ZWdvcnkob2JqKSB7XHJcbiAgICAgICAgICAgIHZhciBnZXRQcm9wZXJ0eSA9IHV0aWxzLmdldFByb3BlcnR5RnJvbU9iaihvYmopO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pZCA9IGdldFByb3BlcnR5KFwiaWRcIik7XHJcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IGdldFByb3BlcnR5KFwibmFtZVwiKTtcclxuICAgICAgICAgICAgdGhpcy5lbmFibGVkID0gZ2V0UHJvcGVydHkoXCJlbmFibGVcIiwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRDYXRlZ29yeU1vZGVsKG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENhdGVnb3J5KG9iaik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRBbGwoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhcGlDYWxsZXIuZ2V0KFwiL2NhdGVnb3JpZXNcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBcImdldENhdGVnb3J5TW9kZWxcIjogZ2V0Q2F0ZWdvcnlNb2RlbCxcclxuICAgICAgICAgICAgXCJnZXRBbGxcIjogZ2V0QWxsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBTZXJ2aWNlLiRpbmplY3QgPSBbXCJjZ0FwaUNhbGxlclwiLCBcImNnVXRpbFNlcnZpY2VcIl07XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIilcclxuICAgICAgICAuZmFjdG9yeShcImNhdGVnb3J5U2VydmljZVwiLCBTZXJ2aWNlKTtcclxuXHJcbn0pKGFuZ3VsYXIpO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNy8xNi5cclxuICovXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG5cclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIHZhciB1cmwgPSBcIi9jb25uZWN0aW9uc1wiO1xyXG5cclxuICAgIGZ1bmN0aW9uIGdldENvbm5lY3Rpb25UeXBlcygpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBcIkZ1bmRpbmdcIjogdHJ1ZSxcclxuICAgICAgICAgICAgXCJEYXRhXCI6IHRydWUsXHJcbiAgICAgICAgICAgIFwiRW1wbG95bWVudFwiOiB0cnVlLFxyXG4gICAgICAgICAgICBcIkNvbGxhYm9yYXRpb25cIjogdHJ1ZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gU2VydmljZShhcGlDYWxsZXIsIHV0aWxzKSB7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIENvbm5lY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgIHZhciBnZXRQcm9wZXJ0eSA9IHV0aWxzLmdldFByb3BlcnR5RnJvbU9iaihvYmopO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pZCA9IGdldFByb3BlcnR5KFwiaWRcIik7XHJcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IGdldFByb3BlcnR5KFwibmFtZVwiKTtcclxuICAgICAgICAgICAgdGhpcy5kZXRhaWxzID0gZ2V0UHJvcGVydHkoXCJkZXRhaWxzXCIpO1xyXG4gICAgICAgICAgICB0aGlzLmVudGl0eSA9IGdldFByb3BlcnR5KFwiZW50aXR5XCIpO1xyXG4gICAgICAgICAgICB0aGlzLmVudGl0eV9pZCA9IGdldFByb3BlcnR5KFwiZW50aXR5X2lkXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0Q29ubmVjdGlvbk1vZGVsKG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENvbm5lY3Rpb24ob2JqKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldEFsbCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFwaUNhbGxlci5nZXQodXJsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIFwiZ2V0QWxsXCI6IGdldEFsbCxcclxuICAgICAgICAgICAgXCJnZXRDb25uZWN0aW9uVHlwZXNcIjogZ2V0Q29ubmVjdGlvblR5cGVzLFxyXG4gICAgICAgICAgICBcImdldENvbm5lY3Rpb25Nb2RlbFwiOiBnZXRDb25uZWN0aW9uTW9kZWxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIFNlcnZpY2UuJGluamVjdCA9IFtcImNnQXBpQ2FsbGVyXCIsIFwiY2dVdGlsU2VydmljZVwiXTtcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKVxyXG4gICAgICAgIC5mYWN0b3J5KFwiY29ubmVjdGlvblNlcnZpY2VcIiwgU2VydmljZSk7XHJcblxyXG59KShhbmd1bGFyKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjcvMTYuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBmdW5jdGlvbiBTZXJ2aWNlKHV0aWxzKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gRmluYW5jZShvYmopIHtcclxuICAgICAgICAgICAgdmFyIGdldFByb3BlcnR5ID0gdXRpbHMuZ2V0UHJvcGVydHlGcm9tT2JqKG9iaik7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmlkID0gZ2V0UHJvcGVydHkoXCJpZFwiKTtcclxuICAgICAgICAgICAgdGhpcy55ZWFyID0gZ2V0UHJvcGVydHkoXCJ5ZWFyXCIpO1xyXG4gICAgICAgICAgICB0aGlzLmFtb3VudCA9IGdldFByb3BlcnR5KFwiYW1vdW50XCIsIDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0RmluYW5jZU1vZGVsKG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEZpbmFuY2Uob2JqKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIFwiZ2V0RmluYW5jZU1vZGVsXCI6IGdldEZpbmFuY2VNb2RlbFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgU2VydmljZS4kaW5qZWN0ID0gW1wiY2dVdGlsU2VydmljZVwiXTtcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKVxyXG4gICAgICAgIC5mYWN0b3J5KFwiZmluYW5jZVNlcnZpY2VcIiwgU2VydmljZSk7XHJcblxyXG59KShhbmd1bGFyKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjcvMTYuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBmdW5jdGlvbiBTZXJ2aWNlKHV0aWxzKSB7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIEZ1bmRpbmdDb25uZWN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICB2YXIgZ2V0UHJvcGVydHkgPSB1dGlscy5nZXRQcm9wZXJ0eUZyb21PYmoob2JqKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuaWQgPSBnZXRQcm9wZXJ0eShcImlkXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnllYXIgPSBnZXRQcm9wZXJ0eShcInllYXJcIik7XHJcbiAgICAgICAgICAgIHRoaXMuYW1vdW50ID0gZ2V0UHJvcGVydHkoXCJhbW91bnRcIik7XHJcbiAgICAgICAgICAgIHRoaXMuZW50aXR5ID0gZ2V0UHJvcGVydHkoXCJlbnRpdHlcIiwgXCJcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsKG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEZ1bmRpbmdDb25uZWN0aW9uKG9iaik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBcImdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWxcIjogZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgU2VydmljZS4kaW5qZWN0ID0gW1wiY2dVdGlsU2VydmljZVwiXTtcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKVxyXG4gICAgICAgIC5mYWN0b3J5KFwiZnVuZGluZ0Nvbm5lY3Rpb25TZXJ2aWNlXCIsIFNlcnZpY2UpO1xyXG5cclxufSkoYW5ndWxhcik7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA3LzEwLzE2LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgY29udHJvbERlcGVuZGVuY2llcyA9IFtjb250cm9sRGlyZWN0aXZlXTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb250cm9sRGlyZWN0aXZlKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnanMvY29udHJvbC9jb250cm9scy5odG1sJyxcclxuICAgICAgICAgICAgcmVzdHJpY3QgICA6ICdFJyxcclxuICAgICAgICAgICAgc2NvcGUgICAgICA6IHtcclxuICAgICAgICAgICAgICAgIHRvZ2dsZU5ldHdvcmsgOiAnPScsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgICA6ICdjb250cm9sQ3RybCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBcyA6ICdjb250cm9sJyxcclxuICAgICAgICAgICAgYmluZFRvQ29udHJvbGxlciA6IHtcclxuICAgICAgICAgICAgICAgIG1pbkNvbm5lY3Rpb25zIDogXCI9XCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdjb250cm9sJywgY29udHJvbERlcGVuZGVuY2llcyk7XHJcblxyXG59KShhbmd1bGFyKTtcclxuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcblxyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgZnVuY3Rpb24gQ29udHJvbGxlcigkc2NvcGUsICRodHRwLCAkdGltZW91dCwgXywgZW50aXR5U2VydmljZSwgY2F0ZWdvcnlTZXJ2aWNlLCBsb2NhdGlvblNlcnZpY2UsIHV0aWxzKSB7XHJcbiAgICAgICAgJHNjb3BlLmlzRWRpdGluZyA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5lZGl0RW50aXR5ID0gZW50aXR5U2VydmljZS5nZXRFbnRpdHlNb2RlbCgkc2NvcGUuZW50aXR5KTtcclxuICAgICAgICAkc2NvcGUuZW50aXR5VHlwZXMgPSBlbnRpdHlTZXJ2aWNlLmdldEVudGl0eVR5cGVzKCk7XHJcbiAgICAgICAgJHNjb3BlLmluZmx1ZW5jZVR5cGVzID0gZW50aXR5U2VydmljZS5nZXRJbmZsdWVuY2VUeXBlcygpO1xyXG5cclxuICAgICAgICB2YXIgY2F0ZWdvcnlCYWNrdXA7XHJcblxyXG4gICAgICAgICRzY29wZS5jYXRlZ29yaWVzID0gW107XHJcblxyXG4gICAgICAgICRzY29wZS5hZGRyZXNzU2VhcmNoID0gZnVuY3Rpb24gKHNlYXJjaCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuanNvbnAoJ2h0dHBzOi8vZGV2LnZpcnR1YWxlYXJ0aC5uZXQvUkVTVC92MS9Mb2NhdGlvbnMnLCB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHtcclxuICAgICAgICAgICAgICAgICAgICBxdWVyeTogc2VhcmNoLFxyXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ0FpNTg1ODF5Qy1TcjdtY0ZiWVR0VWtTM2l4RTdmNlp1Sm5iRkpDVkk0aEF0VzFYb0RFZVp5aWRRejJnTENDeUQnLFxyXG4gICAgICAgICAgICAgICAgICAgICdqc29ucCc6ICdKU09OX0NBTExCQUNLJyxcclxuICAgICAgICAgICAgICAgICAgICAnaW5jbHVkZSc6ICdjaXNvMidcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1dGlscy5pc0RlZmluZWQocmVzcG9uc2UuZGF0YS5yZXNvdXJjZVNldHMpICYmIHJlc3BvbnNlLmRhdGEucmVzb3VyY2VTZXRzLmxlbmd0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEucmVzb3VyY2VTZXRzWzBdLnJlc291cmNlcztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUudG9nZ2xlQ2F0ZWdvcnkgPSBmdW5jdGlvbiAoY2F0ZWdvcnkpIHtcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzLnB1c2goY2F0ZWdvcnkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgY2F0ZWdvcnlJbmRleCBpbiAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzLmhhc093blByb3BlcnR5KGNhdGVnb3J5SW5kZXgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZW50aXR5Q2F0ZWdvcnkgPSAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzW2NhdGVnb3J5SW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbnRpdHlDYXRlZ29yeS5pZCA9PT0gY2F0ZWdvcnkuaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHlDYXRlZ29yeS5lbmFibGVkID0gY2F0ZWdvcnkuZW5hYmxlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMucHVzaChjYXRlZ29yeSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuc2V0TG9jYXRpb24gPSBmdW5jdGlvbiAobG9jYXRpb24sIGlzTGFzdCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuYWRkcmVzc1NlYXJjaChsb2NhdGlvbi5mb3JtYXR0ZWRBZGRyZXNzKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGFwaUNhbGxSZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZighdXRpbHMuaXNEZWZpbmVkKGFwaUNhbGxSZXN1bHRbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGFwaUNhbGxSZXN1bHRbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgPSByZXN1bHQuYWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnQgPSByZXN1bHQucG9pbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZExvY2F0aW9uKGlzTGFzdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFBhcnNlcyBBUEkgY2FsbCByZXN1bHRcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5hZGRyZXNzX2xpbmUgPSB1dGlscy5pc0RlZmluZWQoYWRkcmVzcy5hZGRyZXNzTGluZSkgPyBhZGRyZXNzLmFkZHJlc3NMaW5lIDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ubG9jYWxpdHkgPSB1dGlscy5pc0RlZmluZWQoYWRkcmVzcy5sb2NhbGl0eSkgPyBhZGRyZXNzLmxvY2FsaXR5IDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uZGlzdHJpY3QgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5pc0RlZmluZWQoYWRkcmVzcy5hZG1pbkRpc3RyaWN0KSA/IGFkZHJlc3MuYWRtaW5EaXN0cmljdCA6ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmNvdW50cnkgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5pc0RlZmluZWQoYWRkcmVzcy5jb3VudHJ5UmVnaW9uKSA/IGFkZHJlc3MuY291bnRyeVJlZ2lvbiA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uY291bnRyeV9jb2RlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMuaXNEZWZpbmVkKGFkZHJlc3MuY291bnRyeVJlZ2lvbklzbzIpID8gYWRkcmVzcy5jb3VudHJ5UmVnaW9uSXNvMiA6ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmNvb3JkaW5hdGVzID0gdXRpbHMuaXNEZWZpbmVkKHBvaW50LmNvb3JkaW5hdGVzKSA/IHBvaW50LmNvb3JkaW5hdGVzIDogbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5wb3N0YWxfY29kZSA9IHV0aWxzLmlzRGVmaW5lZChhZGRyZXNzLnBvc3RhbENvZGUpID8gYWRkcmVzcy5wb3N0YWxDb2RlIDogbnVsbDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5hZGRMb2NhdGlvbiA9IGZ1bmN0aW9uIChpc0xhc3QpIHtcclxuICAgICAgICAgICAgaWYgKGlzTGFzdCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRFbnRpdHkubG9jYXRpb25zLnB1c2gobG9jYXRpb25TZXJ2aWNlLmdldExvY2F0aW9uTW9kZWwoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuYWRkS2V5UGVyc29uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBBZGQgYmxhbmsgZmllbGQgdG8gZWRpdCBpZiB0aGVyZSBhcmUgbm9uZS5cclxuICAgICAgICAgICAgLy8gV0FUQ0ggT1VUISBUT0RPOiBJZiBzb21lb25lIGRlbGV0ZXMgYW4gb2xkIHBlcnNvbiwgZGVsZXRlIHRoZWlyIGlkIHRvby5cclxuICAgICAgICAgICAgLy8gaS5lLiBtYWtlIHN1cmUgb2xkL2NsZWFyZWQgZm9ybSBmaWVsZHMgYXJlbid0IGJlaW5nIGVkaXRlZCBpbnRvIG5ldyBwZW9wbGUuXHJcbiAgICAgICAgICAgIGlmICghKF8uc29tZSgkc2NvcGUuZWRpdEVudGl0eS5rZXlfcGVvcGxlLCB7J25hbWUnOiAnJywgJ2lkJzogbnVsbH0pKSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRFbnRpdHkua2V5X3Blb3BsZS5wdXNoKHsnbmFtZSc6ICcnLCAnaWQnOiBudWxsfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuc2V0RnVuZGluZ0Nvbm5lY3Rpb24gPSBmdW5jdGlvbiAoZW50aXR5LCBmdW5kaW5nKSB7XHJcbiAgICAgICAgICAgIC8vIEFkZCBvdGhlciBlbnRpdHkncyBpZCB0byB0aGlzIGZpbmFuY2UgY29ubmVjdGlvbi5cclxuICAgICAgICAgICAgZnVuZGluZy5lbnRpdHlfaWQgPSBlbnRpdHkuaWQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmFkZEZ1bmRpbmdDb25uZWN0aW9uID0gZnVuY3Rpb24gKGZ1bmRpbmcpIHtcclxuICAgICAgICAgICAgaWYgKCFfLnNvbWUoZnVuZGluZywgeydlbnRpdHknOiAnJ30pKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBNYXliZSBzZXQgYW1vdW50IHRvIDAgaW5zdGVhZCBvZiBudWxsP1xyXG4gICAgICAgICAgICAgICAgZnVuZGluZy5wdXNoKHsnZW50aXR5JzogJycsICdhbW91bnQnOiBudWxsLCAneWVhcic6IG51bGwsICdpZCc6IG51bGx9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5zZXRDb25uZWN0aW9uID0gZnVuY3Rpb24gKGVudGl0eSwgY29ubmVjdGlvbikge1xyXG4gICAgICAgICAgICBjb25uZWN0aW9uLmVudGl0eV9pZCA9IGVudGl0eS5pZDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuYWRkQ29ubmVjdGlvbiA9IGZ1bmN0aW9uIChjb25uZWN0aW9ucykge1xyXG4gICAgICAgICAgICAvLyBBZGQgYW4gZW1wdHkgY29ubmVjdGlvbiB0byBlZGl0IGlmIG5vbmUgZXhpc3QuXHJcbiAgICAgICAgICAgIGlmICghXy5zb21lKGNvbm5lY3Rpb25zLCB7J2VudGl0eSc6ICcnLCAnaWQnOiBudWxsfSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25zLnB1c2goeydlbnRpdHknOiAnJywgJ2lkJzogbnVsbCwgJ2RldGFpbHMnOiBudWxsfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuYWRkRmluYW5jZSA9IGZ1bmN0aW9uIChyZWNvcmRzKSB7XHJcbiAgICAgICAgICAgIC8vIEFkZCBuZXcgZmluYW5jZSBmaWVsZCBpZiBhbGwgY3VycmVudCBmaWVsZHMgYXJlIHZhbGlkLlxyXG4gICAgICAgICAgICBpZiAoXy5ldmVyeShyZWNvcmRzLCBmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByLmFtb3VudCA+IDAgJiYgci55ZWFyID4gMTc1MDtcclxuICAgICAgICAgICAgICAgIH0pKSB7XHJcbiAgICAgICAgICAgICAgICByZWNvcmRzLnB1c2goeydhbW91bnQnOiBudWxsLCAneWVhcic6IG51bGwsICdpZCc6IG51bGx9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5zYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuaXNTYXZpbmcgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gc3VjY2VzcyhyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmlzU2F2aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuJGVtaXQoXCJlZGl0RW50aXR5U3VjY2Vzc1wiLCByZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAvLyBDYWxsIHRvIGhvbWVDdHJsJ3MgcGFyZW50IHN0b3BFZGl0KCkgdG8gY2hhbmdlIHZpZXcgYmFjayBhbmQgYW55IG90aGVyXHJcbiAgICAgICAgICAgICAgICAvLyBoaWdoLWxldmVsIGNoYW5nZXMuXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2FuY2VsRWRpdCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBlcnJvcigpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5pc0Vycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXNFcnJvciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSwgMjAwMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGVudGl0eVNlcnZpY2VcclxuICAgICAgICAgICAgICAgIC5zYXZlRW50aXR5KCRzY29wZS5lZGl0RW50aXR5LmdlbmVyYXRlREJNb2RlbCgpKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oc3VjY2VzcywgZXJyb3IpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jYW5jZWxFZGl0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuaXNPcGVuID0gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgnZW50aXR5JywgZnVuY3Rpb24gKG5ld1ZhbCwgb2xkVmFsKSB7XHJcbiAgICAgICAgICAgIGlmIChhbmd1bGFyLmVxdWFscyhuZXdWYWwsIG9sZFZhbCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmVkaXRFbnRpdHkgPSBlbnRpdHlTZXJ2aWNlLmdldEVudGl0eU1vZGVsKG5ld1ZhbCk7XHJcbiAgICAgICAgICAgICRzY29wZS5jYXRlZ29yaWVzID0gYW5ndWxhci5jb3B5KGNhdGVnb3J5QmFja3VwKTtcclxuXHJcbiAgICAgICAgICAgIGluaXRDYXRlZ29yeUFycmF5KCk7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuaXNFZGl0aW5nID0gdXRpbHMuaXNEZWZpbmVkKCRzY29wZS5lZGl0RW50aXR5LmlkKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSW5pdGlhbGl6ZXMgY2F0ZWdvcnkgZmllbGRzIHdpdGggZW50aXR5IHZhbHVlcy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIExvb3BzIHRocm91Z2ggY2F0ZWdvcnkgaW4gY2F0ZWdvcmllcyBhbmQgbG9vcHMgdGhyb3VnaCBjYXRlZ29yeSBpbiBlbnRpdHkuIElkZW50aWZpZXNcclxuICAgICAgICAgKiBjYXRlZ29yaWVzIGVuYWJsZWQgaW4gdGhlIGVudGl0eSBhbmQgc2V0cyBsb2NhbCBkaXNwbGF5IGRhdGEuIFRoaXMgaXMgYmVjYXVzZSB3ZSBjcmVhdGVkXHJcbiAgICAgICAgICogYSBiYWNrdXAgb2YgZW50aXR5IGRhdGEgc28gdGhhdCB0aGUgYXBpIGRhdGEgaXMgbm90IHRhbXBlcmVkIHdpdGggZGlyZWN0bHkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUT0RPOiByZXBsYWNlIHdpdGggYmV0dGVyIGRhdGEgc3RydWN0dXJlIGZvciBjYXRlZ29yaWVzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGluaXRDYXRlZ29yeUFycmF5KCkge1xyXG4gICAgICAgICAgICB2YXIgY2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUluZGV4LFxyXG4gICAgICAgICAgICAgICAgZW50aXR5Q2F0ZWdvcnlJbmRleCxcclxuICAgICAgICAgICAgICAgIGVudGl0eUNhdGVnb3J5O1xyXG5cclxuICAgICAgICAgICAgZm9yIChjYXRlZ29yeUluZGV4IGluICRzY29wZS5jYXRlZ29yaWVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5jYXRlZ29yaWVzLmhhc093blByb3BlcnR5KGNhdGVnb3J5SW5kZXgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeSA9ICRzY29wZS5jYXRlZ29yaWVzW2NhdGVnb3J5SW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgZm9yIChlbnRpdHlDYXRlZ29yeUluZGV4IGluICRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMuaGFzT3duUHJvcGVydHkoZW50aXR5Q2F0ZWdvcnlJbmRleCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVudGl0eUNhdGVnb3J5ID0gJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllc1tlbnRpdHlDYXRlZ29yeUluZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2F0ZWdvcnkuaWQgPT09IGVudGl0eUNhdGVnb3J5LmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5LmVuYWJsZWQgPSBlbnRpdHlDYXRlZ29yeS5lbmFibGVkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmV0cmlldmUgQ2F0ZWdvcmllcyBmcm9tIERCXHJcbiAgICAgICAgY2F0ZWdvcnlTZXJ2aWNlXHJcbiAgICAgICAgICAgIC5nZXRBbGwoKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnlCYWNrdXAgPSBkYXRhLmNhdGVnb3JpZXM7XHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGVzIGJhY2t1cCBvZiBkYXRhIHVzaW5nIEFuZ3VsYXIgdG8gcHJldmVudCBhcGkgZGF0YSBmcm9tIGJlaW5nIHRhbXBlcmVkXHJcbiAgICAgICAgICAgICAgICAvLyBkaXJlY3RseVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3JpZXMgPSBhbmd1bGFyLmNvcHkoY2F0ZWdvcnlCYWNrdXApO1xyXG4gICAgICAgICAgICAgICAgLy8gJHNjb3BlLmNhdGVnb3JpZXMgPSBkYXRhLmNhdGVnb3JpZXM7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIENvbnRyb2xsZXIuJGluamVjdCA9IFtcclxuICAgICAgICBcIiRzY29wZVwiLFxyXG4gICAgICAgIFwiJGh0dHBcIixcclxuICAgICAgICBcIiR0aW1lb3V0XCIsXHJcbiAgICAgICAgXCJfXCIsXHJcbiAgICAgICAgXCJlbnRpdHlTZXJ2aWNlXCIsXHJcbiAgICAgICAgXCJjYXRlZ29yeVNlcnZpY2VcIixcclxuICAgICAgICBcImxvY2F0aW9uU2VydmljZVwiLFxyXG4gICAgICAgIFwiY2dVdGlsU2VydmljZVwiXHJcbiAgICBdO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKFwiY2l2aWMtZ3JhcGhcIilcclxuICAgICAgICAuY29udHJvbGxlcihcImVkaXRDdHJsXCIsIENvbnRyb2xsZXIpO1xyXG5cclxufSkoYW5ndWxhcik7XHJcbiIsIi8qKlxyXG4gKlxyXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgZWRpdEVudGl0eURlcGVuZGVuY2llcyA9IFtlZGl0RW50aXR5RGlyZWN0aXZlXTtcclxuXHJcbiAgICBmdW5jdGlvbiBlZGl0RW50aXR5RGlyZWN0aXZlKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnanMvZWRpdC1lbnRpdHkvZWRpdC5odG1sJyxcclxuICAgICAgICAgICAgcmVzdHJpY3QgICA6ICdFJyxcclxuICAgICAgICAgICAgc2NvcGUgICAgICA6IHtcclxuICAgICAgICAgICAgICAgICdlbnRpdHknICA6IFwiPVwiLFxyXG4gICAgICAgICAgICAgICAgJ2VudGl0aWVzJzogXCI9XCIsXHJcbiAgICAgICAgICAgICAgICAnaXNPcGVuJyAgOiBcIj1cIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyIDogJ2VkaXRDdHJsJ1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdlZGl0RW50aXR5JywgZWRpdEVudGl0eURlcGVuZGVuY2llcyk7XHJcblxyXG59KShhbmd1bGFyKTtcclxuIiwiKGZ1bmN0aW9uIChhbmd1bGFyLCAkKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGZ1bmN0aW9uIGxpbmtGdW5jdGlvbihzY29wZSkge1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzY3JvbGwoKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgc2VsZi5jc3MoJ2hlaWdodCcsICc1NXZoJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBjbGljaygpIHtcclxuICAgICAgICAgICAgdmFyIHNlbGYgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICBpZiAod2luZG93LmlubmVySGVpZ2h0IC8gMyA+IHBhcnNlSW50KHNlbGYuY3NzKCdoZWlnaHQnKSkpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuY3NzKCdoZWlnaHQnLCAnNTV2aCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5jc3MoJ2hlaWdodCcsICczMHZoJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBkZXRhaWxzUGFuZWw7XHJcbiAgICAgICAgaWYgKHNjb3BlLm1vYmlsZSkge1xyXG4gICAgICAgICAgICBkZXRhaWxzUGFuZWwgPSAkKFwiI2RldGFpbHMtcGFuZWxcIik7XHJcbiAgICAgICAgICAgIGRldGFpbHNQYW5lbC5jc3MoXCJoZWlnaHRcIiwgXCIzMHZoXCIpO1xyXG4gICAgICAgICAgICBkZXRhaWxzUGFuZWwuc2Nyb2xsVG9wKDApO1xyXG4gICAgICAgICAgICBkZXRhaWxzUGFuZWwuc2Nyb2xsKHNjcm9sbCk7XHJcbiAgICAgICAgICAgIGRldGFpbHNQYW5lbC5jbGljayhjbGljayk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFkZE1vYmlsZUV2ZW50cygpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICBsaW5rOiBsaW5rRnVuY3Rpb25cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnYWRkTW9iaWxlRXZlbnRzJywgW2FkZE1vYmlsZUV2ZW50c10pO1xyXG59KShhbmd1bGFyLCAkKTtcclxuIiwiKGZ1bmN0aW9uKGFuZ3VsYXIpIHtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZnVuY3Rpb24gbW9kYWxDdHJsKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UpIHtcclxuICAgICAgICAkc2NvcGUuY2xvc2VXaW5kb3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRtb2RhbEluc3RhbmNlLmNsb3NlKCk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdtb2RhbEN0cmwnLCBbJyRzY29wZScsICckbW9kYWxJbnN0YW5jZScsIG1vZGFsQ3RybF0pO1xyXG5cclxufSkoYW5ndWxhcik7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXHJcbiAgICAgICAgLmNvbnN0YW50KCdfJywgd2luZG93Ll8pXHJcbiAgICAgICAgLmNvbmZpZyhbJyRsb2NhdGlvblByb3ZpZGVyJywgJyRjb21waWxlUHJvdmlkZXInLFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoJGxvY2F0aW9uUHJvdmlkZXIsICRjb21waWxlUHJvdmlkZXIpIHtcclxuICAgICAgICAgICAgICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgICRjb21waWxlUHJvdmlkZXIuZGVidWdJbmZvRW5hYmxlZCh0cnVlKTtcclxuICAgICAgICAgICAgfV0pXHJcbiAgICAgICAgLmZpbHRlcigndGhvdXNhbmRTdWZmaXgnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoaW5wdXQsIGRlY2ltYWxzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXhwLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1ZmZpeGVzID0gWydrJywgJ00nLCAnRycsICdUJywgJ1AnLCAnRSddO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuaXNOYU4oaW5wdXQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGlucHV0IDwgMTAwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBleHAgPSBNYXRoLmZsb29yKE1hdGgubG9nKGlucHV0KSAvIE1hdGgubG9nKDEwMDApKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKGlucHV0IC8gTWF0aC5wb3coMTAwMCwgZXhwKSkudG9GaXhlZChkZWNpbWFscykgKyBzdWZmaXhlc1tleHAgLSAxXTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuXHJcbn0pKGFuZ3VsYXIpO1xyXG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIGhvbWVEZXBlbmRlbmNpZXMgPSBbXHJcbiAgICAgICAgJyRzY29wZScsXHJcbiAgICAgICAgJyR0aW1lb3V0JyxcclxuICAgICAgICAnXycsXHJcbiAgICAgICAgJ2VudGl0eVNlcnZpY2UnLFxyXG4gICAgICAgICdjb25uZWN0aW9uU2VydmljZScsXHJcbiAgICAgICAgaG9tZUN0cmxcclxuICAgIF07XHJcblxyXG4gICAgZnVuY3Rpb24gaG9tZUN0cmwoJHNjb3BlLCAkdGltZW91dCwgXywgZW50aXR5U2VydmljZSwgY29ubmVjdGlvblNlcnZpY2UpIHtcclxuICAgICAgICAkc2NvcGUuZW50aXRpZXMgICAgICAgICAgICAgICAgID0gW107XHJcbiAgICAgICAgJHNjb3BlLnNlYXJjaEl0ZW1zICAgICAgICAgICAgICA9IG51bGw7XHJcbiAgICAgICAgJHNjb3BlLmNhdGVnb3JpZXMgICAgICAgICAgICAgICA9IFtdO1xyXG4gICAgICAgICRzY29wZS5jdXJyZW50TG9jYXRpb24gICAgICAgICAgPSBudWxsO1xyXG4gICAgICAgICRzY29wZS5jbGlja2VkTG9jYXRpb24gICAgICAgICAgPSB7fTtcclxuICAgICAgICAkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uID0gbnVsbDtcclxuICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eSAgICAgICAgICAgID0ge307XHJcbiAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ICAgICA9IG51bGw7XHJcbiAgICAgICAgJHNjb3BlLmVkaXRpbmcgICAgICAgICAgICAgICAgICA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5hY3Rpb25zICAgICAgICAgICAgICAgICAgPSB7J2ludGVyYWN0ZWQnOiBmYWxzZX07XHJcbiAgICAgICAgJHNjb3BlLnNob3dzZWFyY2hNQiAgICAgICAgICAgICA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5zaG93QW5hbHl0aWNzICAgICAgICAgICAgPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUuZW50aXR5VHlwZXMgICAgICAgICAgICAgID0gZW50aXR5U2VydmljZS5nZXRFbnRpdHlUeXBlcygpO1xyXG4gICAgICAgICRzY29wZS5jb25uZWN0aW9uVHlwZXMgICAgICAgICAgPSBjb25uZWN0aW9uU2VydmljZS5nZXRDb25uZWN0aW9uVHlwZXMoKTtcclxuICAgICAgICAkc2NvcGUuc3RhdHVzICAgICAgICAgICAgICAgICAgID0ge1xyXG4gICAgICAgICAgICBcImlzTmV0d29ya1Nob3duXCI6IHRydWUsXHJcbiAgICAgICAgICAgIFwibGljZW5zZVwiICAgICAgIDogdHJ1ZSxcclxuICAgICAgICAgICAgXCJuZXR3b3JrTG9hZGluZ1wiOiB0cnVlXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnRvZ2dsZUFuYWx5dGljcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnNob3dBbmFseXRpY3MgPSAhJHNjb3BlLnNob3dBbmFseXRpY3M7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5taW5Db25uZWN0aW9ucyA9ICRzY29wZS5taW5Db25uZWN0aW9ucyA9IDI7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgICAvLyAkc2NvcGUuJHdhdGNoKCdtaW5Db25uZWN0aW9ucycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vICAgICAkc2NvcGUuJGJyb2FkY2FzdCgndHJpZ2dlck5ldHdvcmtEcmF3Jyk7XHJcbiAgICAgICAgLy8gfSk7XHJcblxyXG4gICAgICAgICRzY29wZS4kd2F0Y2goJ21pbkNvbm5lY3Rpb25zJywgd2F0Y2hNaW5Db25uZWN0aW9uKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gd2F0Y2hNaW5Db25uZWN0aW9uKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgndHJpZ2dlck5ldHdvcmtEcmF3Jyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2NvcGUuY29ubmVjdGlvbkNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coc2VsZi5taW5Db25uZWN0aW9ucyk7XHJcbiAgICAgICAgICAgICRzY29wZS5taW5Db25uZWN0aW9ucyA9IHNlbGYubWluQ29ubmVjdGlvbnM7XHJcbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCd0cmlnZ2VyTmV0d29ya0RyYXcnKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuaHlkZVBhcnRpYWxzID0gZnVuY3Rpb24gKGV4Y2VwdCkge1xyXG4gICAgICAgICAgICBpZiAoZXhjZXB0ID09PSBcInNlYXJjaFwiKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdGluZyAgICAgICAgID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3NFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXhjZXB0ID09PSBcInNldHRpbmdzXCIpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5lZGl0aW5nICAgICAgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zaG93c2VhcmNoTUIgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChleGNlcHQgPT09IFwiZWRpdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3NFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd3NlYXJjaE1CICAgID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdGluZyAgICAgICAgID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3NFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd3NlYXJjaE1CICAgID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNob3dTZWFyY2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5oeWRlUGFydGlhbHMoXCJzZWFyY2hcIik7XHJcbiAgICAgICAgICAgICRzY29wZS5zaG93c2VhcmNoTUIgICA9ICEkc2NvcGUuc2hvd3NlYXJjaE1CO1xyXG4gICAgICAgICAgICAvLyAkc2NvcGUuJGJyb2FkY2FzdCgnaGlkZUxpY2Vuc2UnKTtcclxuICAgICAgICAgICAgJHNjb3BlLnN0YXR1cy5saWNlbnNlID0gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnRvZ2dsZVNldHRpbmdzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuaHlkZVBhcnRpYWxzKFwic2V0dGluZ3NcIik7XHJcbiAgICAgICAgICAgICRzY29wZS5zZXR0aW5nc0VuYWJsZWQgPSAhJHNjb3BlLnNldHRpbmdzRW5hYmxlZDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuc3RhcnRFZGl0ID0gZnVuY3Rpb24gKGVudGl0eSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudEVudGl0eSA9IGVudGl0eTtcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5tb2JpbGUpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5oeWRlUGFydGlhbHMoXCJlZGl0XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzY29wZS5lZGl0aW5nID0gdHJ1ZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuc3dpdGNoVmlldyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gJHNjb3BlLiRicm9hZGNhc3QoJ3ZpZXdDaGFuZ2UnLCAhJHNjb3BlLnN0YXR1cy5pc05ldHdvcmtTaG93biA/ICdNYXAnIDogJ05ldHdvcmsnKTtcclxuICAgICAgICAgICAgLy8gJHNjb3BlLmNoYW5nZVZpZXcoISRzY29wZS5zdGF0dXMuaXNOZXR3b3JrU2hvd24gPyAnTWFwJyA6ICdOZXR3b3JrJyk7XHJcbiAgICAgICAgICAgICRzY29wZS5zdGF0dXMuaXNOZXR3b3JrU2hvd24gPSAhJHNjb3BlLnN0YXR1cy5pc05ldHdvcmtTaG93bjtcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5zdGF0dXMuaXNOZXR3b3JrU2hvd24pIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCd0cmlnZ2VyTmV0d29ya0RyYXcnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHdpbmRvdy5tb2JpbGVjaGVjayAgICAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjaGVjayAgPSBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHJlZ2V4ICA9IC8oYW5kcm9pZHxiYlxcZCt8bWVlZ28pLittb2JpbGV8YXZhbnRnb3xiYWRhXFwvfGJsYWNrYmVycnl8YmxhemVyfGNvbXBhbHxlbGFpbmV8ZmVubmVjfGhpcHRvcHxpZW1vYmlsZXxpcChob25lfG9kKXxpcmlzfGtpbmRsZXxsZ2UgfG1hZW1vfG1pZHB8bW1wfG1vYmlsZS4rZmlyZWZveHxuZXRmcm9udHxvcGVyYSBtKG9ifGluKWl8cGFsbSggb3MpP3xwaG9uZXxwKGl4aXxyZSlcXC98cGx1Y2tlcnxwb2NrZXR8cHNwfHNlcmllcyg0fDYpMHxzeW1iaWFufHRyZW98dXBcXC4oYnJvd3NlcnxsaW5rKXx2b2RhZm9uZXx3YXB8d2luZG93cyBjZXx4ZGF8eGlpbm8vaSxcclxuICAgICAgICAgICAgICAgIHJlZ2V4MiA9IC8xMjA3fDYzMTB8NjU5MHwzZ3NvfDR0aHB8NTBbMS02XWl8Nzcwc3w4MDJzfGEgd2F8YWJhY3xhYyhlcnxvb3xzXFwtKXxhaShrb3xybil8YWwoYXZ8Y2F8Y28pfGFtb2l8YW4oZXh8bnl8eXcpfGFwdHV8YXIoY2h8Z28pfGFzKHRlfHVzKXxhdHR3fGF1KGRpfFxcLW18ciB8cyApfGF2YW58YmUoY2t8bGx8bnEpfGJpKGxifHJkKXxibChhY3xheil8YnIoZXx2KXd8YnVtYnxid1xcLShufHUpfGM1NVxcL3xjYXBpfGNjd2F8Y2RtXFwtfGNlbGx8Y2h0bXxjbGRjfGNtZFxcLXxjbyhtcHxuZCl8Y3Jhd3xkYShpdHxsbHxuZyl8ZGJ0ZXxkY1xcLXN8ZGV2aXxkaWNhfGRtb2J8ZG8oY3xwKW98ZHMoMTJ8XFwtZCl8ZWwoNDl8YWkpfGVtKGwyfHVsKXxlcihpY3xrMCl8ZXNsOHxleihbNC03XTB8b3N8d2F8emUpfGZldGN8Zmx5KFxcLXxfKXxnMSB1fGc1NjB8Z2VuZXxnZlxcLTV8Z1xcLW1vfGdvKFxcLnd8b2QpfGdyKGFkfHVuKXxoYWllfGhjaXR8aGRcXC0obXxwfHQpfGhlaVxcLXxoaShwdHx0YSl8aHAoIGl8aXApfGhzXFwtY3xodChjKFxcLXwgfF98YXxnfHB8c3x0KXx0cCl8aHUoYXd8dGMpfGlcXC0oMjB8Z298bWEpfGkyMzB8aWFjKCB8XFwtfFxcLyl8aWJyb3xpZGVhfGlnMDF8aWtvbXxpbTFrfGlubm98aXBhcXxpcmlzfGphKHR8dilhfGpicm98amVtdXxqaWdzfGtkZGl8a2VqaXxrZ3QoIHxcXC8pfGtsb258a3B0IHxrd2NcXC18a3lvKGN8ayl8bGUobm98eGkpfGxnKCBnfFxcLyhrfGx8dSl8NTB8NTR8XFwtW2Etd10pfGxpYnd8bHlueHxtMVxcLXd8bTNnYXxtNTBcXC98bWEodGV8dWl8eG8pfG1jKDAxfDIxfGNhKXxtXFwtY3J8bWUocmN8cmkpfG1pKG84fG9hfHRzKXxtbWVmfG1vKDAxfDAyfGJpfGRlfGRvfHQoXFwtfCB8b3x2KXx6eil8bXQoNTB8cDF8diApfG13YnB8bXl3YXxuMTBbMC0yXXxuMjBbMi0zXXxuMzAoMHwyKXxuNTAoMHwyfDUpfG43KDAoMHwxKXwxMCl8bmUoKGN8bSlcXC18b258dGZ8d2Z8d2d8d3QpfG5vayg2fGkpfG56cGh8bzJpbXxvcCh0aXx3dil8b3Jhbnxvd2cxfHA4MDB8cGFuKGF8ZHx0KXxwZHhnfHBnKDEzfFxcLShbMS04XXxjKSl8cGhpbHxwaXJlfHBsKGF5fHVjKXxwblxcLTJ8cG8oY2t8cnR8c2UpfHByb3h8cHNpb3xwdFxcLWd8cWFcXC1hfHFjKDA3fDEyfDIxfDMyfDYwfFxcLVsyLTddfGlcXC0pfHF0ZWt8cjM4MHxyNjAwfHJha3N8cmltOXxybyh2ZXx6byl8czU1XFwvfHNhKGdlfG1hfG1tfG1zfG55fHZhKXxzYygwMXxoXFwtfG9vfHBcXC0pfHNka1xcL3xzZShjKFxcLXwwfDEpfDQ3fG1jfG5kfHJpKXxzZ2hcXC18c2hhcnxzaWUoXFwtfG0pfHNrXFwtMHxzbCg0NXxpZCl8c20oYWx8YXJ8YjN8aXR8dDUpfHNvKGZ0fG55KXxzcCgwMXxoXFwtfHZcXC18diApfHN5KDAxfG1iKXx0MigxOHw1MCl8dDYoMDB8MTB8MTgpfHRhKGd0fGxrKXx0Y2xcXC18dGRnXFwtfHRlbChpfG0pfHRpbVxcLXx0XFwtbW98dG8ocGx8c2gpfHRzKDcwfG1cXC18bTN8bTUpfHR4XFwtOXx1cChcXC5ifGcxfHNpKXx1dHN0fHY0MDB8djc1MHx2ZXJpfHZpKHJnfHRlKXx2ayg0MHw1WzAtM118XFwtdil8dm00MHx2b2RhfHZ1bGN8dngoNTJ8NTN8NjB8NjF8NzB8ODB8ODF8ODN8ODV8OTgpfHczYyhcXC18ICl8d2ViY3x3aGl0fHdpKGcgfG5jfG53KXx3bWxifHdvbnV8eDcwMHx5YXNcXC18eW91cnx6ZXRvfHp0ZVxcLS9pO1xyXG4gICAgICAgICAgICAoZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZWdleC50ZXN0KGEpIHx8IHJlZ2V4Mi50ZXN0KGEuc3Vic3RyKDAsIDQpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkobmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBuYXZpZ2F0b3IudmVuZG9yIHx8IHdpbmRvdy5vcGVyYSk7XHJcbiAgICAgICAgICAgIHJldHVybiBjaGVjaztcclxuICAgICAgICB9O1xyXG4gICAgICAgICRzY29wZS5tb2JpbGUgICAgICAgICAgPSB3aW5kb3cubW9iaWxlY2hlY2soKTtcclxuICAgICAgICAkc2NvcGUuc2V0dGluZ3NFbmFibGVkID0gISRzY29wZS5tb2JpbGU7XHJcblxyXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZW50aXR5U2VydmljZVxyXG4gICAgICAgICAgICAgICAgLmdldEFsbCgpXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lbnRpdGllcyA9IGRhdGEubm9kZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvY2F0aW9ucyAgID0gXy51bmlxKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfLnBsdWNrKF8uZmxhdHRlbihfLnBsdWNrKCRzY29wZS5lbnRpdGllcywgJ2xvY2F0aW9ucycpKSwgJ2xvY2FsaXR5JykpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZW50aXRpZXNCeUxvY2F0aW9uID0gXy5tYXAobG9jYXRpb25zLCBmdW5jdGlvbiAobG9jKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaW5kaW5ncyA9IF8uZmlsdGVyKCRzY29wZS5lbnRpdGllcywgXy5mbG93KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5wcm9wZXJ0eSgnbG9jYXRpb25zJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLnBhcnRpYWxSaWdodChfLmFueSwge2xvY2FsaXR5OiBsb2N9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lICAgIDogbG9jLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSAgICA6ICdsb2NhdGlvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRpdGllczogZmluZGluZ3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWN0ICAgIDogXy56aXBPYmplY3QoXy5wbHVjayhmaW5kaW5ncywgJ25hbWUnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLnBsdWNrKGZpbmRpbmdzLCAnaW5kZXgnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlYXJjaEl0ZW1zID0gZW50aXRpZXNCeUxvY2F0aW9uLmNvbmNhdCgkc2NvcGUuZW50aXRpZXMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiAoJHNjb3BlLmdldFVSTElEKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgLy8gU2V0IHRoZSBlbnRpdHkgdG8gdGhlIElEIGluIHRoZSBVUkwgaWYgaXQgZXhpc3RzLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAkc2NvcGUuc2V0RW50aXR5SUQoJHNjb3BlLmdldFVSTElEKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3ZlcnZpZXdVcmwgPSAnanMvb3ZlcnZpZXcvb3ZlcnZpZXcuaHRtbCc7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3RyaWdnZXJOZXR3b3JrRHJhdycpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSwgMTAwKTtcclxuXHJcbiAgICAgICAgJHNjb3BlLm92ZXJ2aWV3VXJsID0gbnVsbDtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNldEVudGl0eSAgID0gZnVuY3Rpb24gKGVudGl0eSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudExvY2F0aW9uID0gbnVsbDtcclxuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRFbnRpdHkgICA9IGVudGl0eTtcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5lZGl0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3RvcEVkaXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnZW50aXR5Q2hhbmdlJyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNldEVudGl0eUlEID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5zZXRFbnRpdHkoXy5maW5kKCRzY29wZS5lbnRpdGllcywgeydpZCc6IGlkfSkpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5zZXRMb2NhdGlvbiA9IGZ1bmN0aW9uIChsb2NhdGlvbikge1xyXG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudExvY2F0aW9uID0gbG9jYXRpb247XHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuZWRpdGluZykge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnN0b3BFZGl0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ2l0ZW1DaGFuZ2UnKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuc2VsZWN0SXRlbSA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdsb2NhdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZXRMb2NhdGlvbihpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRzY29wZVtpdGVtICUgMSA9PT0gMCA/ICdzZXRFbnRpdHlJRCcgOiAnc2V0RW50aXR5J10oaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3NlbGVjdEl0ZW0nLCBpdGVtKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuJG9uKCdzZXRDdXJyZW50RW50aXR5JywgZnVuY3Rpb24gKGV2ZW50LCBhcmdzKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50RW50aXR5ID0gYXJncy52YWx1ZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJHNjb3BlLiRvbignc2V0Q3VycmVudExvY2F0aW9uJywgZnVuY3Rpb24gKGV2ZW50LCBhcmdzKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50TG9jYXRpb24gPSBhcmdzLnZhbHVlO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkc2NvcGUuc2V0RW50aXRpZXMgPSBmdW5jdGlvbiAoZW50aXRpZXMpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmVudGl0aWVzID0gZW50aXRpZXM7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnN0b3BFZGl0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZWRpdGluZyA9IGZhbHNlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oXCJlZGl0RW50aXR5U3VjY2Vzc1wiLCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnNldEVudGl0aWVzKHJlc3BvbnNlLm5vZGVzKTtcclxuICAgICAgICAgICAgLy8gJHNjb3BlLnNldEVudGl0eUlEKCRzY29wZS5jdXJyZW50RW50aXR5LmlkKTtcclxuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3RyaWdnZXJOZXR3b3JrRHJhdycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ2hvbWVDdHJsJywgaG9tZURlcGVuZGVuY2llcyk7XHJcblxyXG59KShhbmd1bGFyKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMTQvMTYuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBkZXBlbmRlbmNpZXMgPSBbXTtcclxuXHJcbiAgICBmdW5jdGlvbiBkaXJlY3RpdmUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgXCJyZXN0cmljdFwiOiBcIkVcIixcclxuICAgICAgICAgICAgXCJ0ZW1wbGF0ZVVybFwiOiBcIi9tYXAvbWFwLmh0bWxcIixcclxuICAgICAgICAgICAgXCJjb250cm9sbGVyXCI6IFwibWFwQ3RybFwiXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgICAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoXCIpXHJcbiAgICAgICAgICAgIC5kaXJlY3RpdmUoXCJtYXBcIiwgZGVwZW5kZW5jaWVzKTtcclxuXHJcbn0pKGFuZ3VsYXIpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG5cclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGZ1bmN0aW9uIENvbnRyb2xsZXIoJHNjb3BlLCAkZmlsdGVyLCBfLCBjb25uZWN0aW9uU2VydmljZSwgdXRpbHMpIHtcclxuICAgICAgICAvLyBUT0RPOiBNYWtlIGEgaGFzaG1hcCBvbiB0aGUgYmFja2VuZCBvZiBpZCAtPiBwb3NpdGlvbiwgdGhlbiB1c2Ugc291cmNlOlxyXG4gICAgICAgIC8vIGVudGl0aWVzW21hcFtzb3VyY2VpZF1dIHRvIGdldCBub2Rlcy4gU2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xLzE2ODI0MzA4XHJcbiAgICAgICAgJHNjb3BlLmlzTG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgJHNjb3BlLmNvbm5lY3Rpb25zID0ge307XHJcbiAgICAgICAgc3RhcnRMb2FkKCk7XHJcblxyXG4gICAgICAgIC8vIFNlZSBodHRwczovL2NvZGVyd2FsbC5jb20vcC9uZ2lzbWEvc2FmZS1hcHBseS1pbi1hbmd1bGFyLWpzXHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseSA9IGZ1bmN0aW9uIChmbikge1xyXG4gICAgICAgICAgICB2YXIgcGhhc2UgPSB0aGlzLiRyb290LiQkcGhhc2U7XHJcbiAgICAgICAgICAgIGlmIChwaGFzZSA9PT0gJyRhcHBseScgfHwgcGhhc2UgPT09ICckZGlnZXN0Jykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZuICYmICh0eXBlb2YoZm4pID09PSAnZnVuY3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZuKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRhcHBseShmbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuJG9uKCd0cmlnZ2VyTmV0d29ya0RyYXcnLCBzdGFydExvYWQpO1xyXG5cclxuICAgICAgICAkc2NvcGUuJG9uKCd2aWV3Q2hhbmdlJywgZnVuY3Rpb24gKHZpZXdPYmopIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codmlld09iaik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIG1ha2Ugb2Zmc2V0IHNjYWxlIGdsb2JhbCB2YXJpYWJsZVxyXG4gICAgICAgIHZhciBvZmZzZXRTY2FsZTtcclxuXHJcblxyXG4gICAgICAgIHZhciBkcmF3TmV0d29yayA9IGZ1bmN0aW9uIChlbnRpdHlBcnJheSwgY29ubmVjdGlvbkFycmF5KSB7XHJcbiAgICAgICAgICAgICRzY29wZS5pc0xvYWRpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzdmcgPSBkMy5zZWxlY3QoJyNuZXR3b3JrJyk7XHJcbiAgICAgIC8vICAgICAgIC5jbGFzc2VkKFwibmV0d29yay1jb250YWluZXJcIiwgdHJ1ZSlcclxuICAgICAgLy8gICAgICAgLmF0dHIoXCJwcmVzZXJ2ZUFzcGVjdFJhdGlvXCIsIFwieE1pbllNaW4gbWVldFwiKVxyXG4gICAgICAvLyAuYXR0cihcInZpZXdCb3hcIiwgXCIwIDAgNjAwIDQwMFwiICk7XHJcbiAgIC8vY2xhc3MgdG8gbWFrZSBpdCByZXNwb25zaXZlXHJcbiAgIC8vIC5jbGFzc2VkKFwic3ZnLWNvbnRlbnQtcmVzcG9uc2l2ZVwiLCB0cnVlKTsgXHJcbiAgICAgICAgICAgIHN2Zy5zZWxlY3RBbGwoXCIqXCIpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB2YXIgYm91bmRzID0gc3ZnLm5vZGUoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgdmFyIGhlaWdodCA9IGJvdW5kcy5oZWlnaHQ7XHJcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IGJvdW5kcy53aWR0aDtcclxuICAgICAgICAgICAgb2Zmc2V0U2NhbGUgPSA2O1xyXG4gICAgICAgICAgICB2YXIgZGVmYXVsdE5vZGVTaXplID0gNztcclxuICAgICAgICAgICAgdmFyIG9mZnNldHMgPSB7XHJcbiAgICAgICAgICAgICAgICAnSW5kaXZpZHVhbCc6IHsgJ3gnOiAxLCAneSc6IDEgfSxcclxuICAgICAgICAgICAgICAgICdGb3ItUHJvZml0JzogeyAneCc6IDEsICd5JzogLTEgfSxcclxuICAgICAgICAgICAgICAgICdOb24tUHJvZml0JzogeyAneCc6IC0xLCAneSc6IDEgfSxcclxuICAgICAgICAgICAgICAgICdHb3Zlcm5tZW50JzogeyAneCc6IC0xLCAneSc6IC0xIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIGxvd2VyQm91bmRSYWRpdXMgPSAxMDtcclxuICAgICAgICAgICAgdmFyIHVwcGVyQm91bmRSYWRpdXMgPSA1MDtcclxuICAgICAgICAgICAgdmFyIG1heEVtcGxveWVlcyA9IGQzLm1heChlbnRpdHlBcnJheSwgZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoZWwuZW1wbG95ZWVzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZhciBtYXhGb2xsb3dlcnMgPSBkMy5tYXgoZW50aXR5QXJyYXksIGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KGVsLmZvbGxvd2Vycyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgc2NhbGUgPSB7XHJcbiAgICAgICAgICAgICAgICAnZW1wbG95ZWVzJzogZDMuc2NhbGUuc3FydCgpLmRvbWFpbihbMTAsIG1heEVtcGxveWVlc10pXHJcbiAgICAgICAgICAgICAgICAgICAgLnJhbmdlKFtsb3dlckJvdW5kUmFkaXVzLCB1cHBlckJvdW5kUmFkaXVzXSksXHJcbiAgICAgICAgICAgICAgICAnZm9sbG93ZXJzJzogZDMuc2NhbGUuc3FydCgpLmRvbWFpbihbMTAsIG1heEZvbGxvd2Vyc10pXHJcbiAgICAgICAgICAgICAgICAgICAgLnJhbmdlKFtsb3dlckJvdW5kUmFkaXVzLCB1cHBlckJvdW5kUmFkaXVzXSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIGxpbmtzID0ge307XHJcbiAgICAgICAgICAgIHZhciBmb3JjZSA9IGQzLmxheW91dC5mb3JjZSgpXHJcbiAgICAgICAgICAgICAgICAuc2l6ZShbd2lkdGgsIGhlaWdodF0pXHJcbiAgICAgICAgICAgICAgICAubm9kZXMoZW50aXR5QXJyYXkpXHJcbiAgICAgICAgICAgICAgICAubGlua3MoXy5mbGF0dGVuKF8udmFsdWVzKGNvbm5lY3Rpb25BcnJheSkpKVxyXG4gICAgICAgICAgICAgICAgLmNoYXJnZShmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmVtcGxveWVlcyA/IC0yICogc2NhbGUuZW1wbG95ZWVzKGQuZW1wbG95ZWVzKSA6IC0yMDtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAubGlua1N0cmVuZ3RoKDApXHJcbiAgICAgICAgICAgICAgICAubGlua0Rpc3RhbmNlKDUwKTtcclxuXHJcbiAgICAgICAgICAgIF8uZm9yRWFjaChjb25uZWN0aW9uQXJyYXksIGZ1bmN0aW9uIChjb25uZWN0aW9ucywgdHlwZSkge1xyXG4gICAgICAgICAgICAgICAgbGlua3NbdHlwZV0gPSBzdmcuc2VsZWN0QWxsKCcubGluayAuJyArIHR5cGUgKyAnLWxpbmsnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKGNvbm5lY3Rpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgnbGluZScpXHJcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF1dGlscy5pc0RlZmluZWQoZC5zb3VyY2UpIHx8ICF1dGlscy5pc0RlZmluZWQoZC50YXJnZXQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2xpbmsgJyArIHR5cGUgKyAnLWxpbmsgJyArIGQuc291cmNlLnR5cGUgKyAnLWxpbmsgJyArIGQudGFyZ2V0LnR5cGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgJy1saW5rJztcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbm9kZSA9IHN2Zy5zZWxlY3RBbGwoJy5ub2RlJylcclxuICAgICAgICAgICAgICAgIC5kYXRhKGVudGl0eUFycmF5KVxyXG4gICAgICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdub2RlICcgKyBkLnR5cGUgKyAnLW5vZGUnO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYWxsKGZvcmNlLmRyYWcpO1xyXG5cclxuICAgICAgICAgICAgbm9kZS5hcHBlbmQoJ2NpcmNsZScpXHJcbiAgICAgICAgICAgICAgICAuYXR0cigncicsIGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuZW1wbG95ZWVzID8gc2NhbGVbJ2VtcGxveWVlcyddKGQuZW1wbG95ZWVzKSA6IGRlZmF1bHROb2RlU2l6ZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgbm9kZS5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgICAgICAgICAgLnRleHQoZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5uaWNrbmFtZSA/IGQubmlja25hbWUgOiBkLm5hbWU7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2R4JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoLTAuMDY1ICogdGhpcy5nZXRDb21wdXRlZFRleHRMZW5ndGgoKSAvIDIpICsgJ2VtJztcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuYXR0cignZHknLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgwLjA4ICogdGhpcy5wYXJlbnROb2RlLmdldEJCb3goKS5oZWlnaHQgLyAyICsgMC41KSArICdlbSc7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGZvcmNlLm9uKCd0aWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIENsdXN0ZXIgaW4gZm91ciBjb3JuZXJzIGJhc2VkIG9uIG9mZnNldC5cclxuICAgICAgICAgICAgICAgIHZhciBrID0gb2Zmc2V0U2NhbGUgKiBlLmFscGhhO1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZS5hbHBoYSlcclxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChlbnRpdHlBcnJheSwgZnVuY3Rpb24gKGVudGl0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbnRpdHkueCAmJiBvZmZzZXRzW2VudGl0eS50eXBlXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHkueCArPSBvZmZzZXRzW2VudGl0eS50eXBlXS54ICogaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5LnkgKz0gb2Zmc2V0c1tlbnRpdHkudHlwZV0ueSAqIGs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eS54ID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KHVwcGVyQm91bmRSYWRpdXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5taW4od2lkdGggLSB1cHBlckJvdW5kUmFkaXVzLCBlbnRpdHkueCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHkueSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heCh1cHBlckJvdW5kUmFkaXVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKGhlaWdodCAtIHVwcGVyQm91bmRSYWRpdXMsIGVudGl0eS55KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGxpbmtzLCBmdW5jdGlvbiAobGluaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gxJywgZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnNvdXJjZS54O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneTEnLCBmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuc291cmNlLnk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MicsIGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC50YXJnZXQueDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kyJywgZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnRhcmdldC55O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgbm9kZS5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBkLnggKyAnLCcgKyBkLnkgKyAnKSc7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZhciBzcGVlZEFuaW1hdGUgPSBmdW5jdGlvbiAodGlja3MpIHtcclxuICAgICAgICAgICAgICAgIC8vIFNwZWVkIHVwIHRoZSBpbml0aWFsIGFuaW1hdGlvbi5cclxuICAgICAgICAgICAgICAgIC8vIFNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNjE4OTExMFxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uIHJlbmRlcigpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRpY2tzOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yY2UudGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZm9yY2UuYWxwaGEoKSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlbmRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIGlmICghJHNjb3BlLm1vYmlsZSkge1xyXG4gICAgICAgICAgICAvLyAgICAgc3BlZWRBbmltYXRlKDcpO1xyXG4gICAgICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgICAgICAvLyBhZGQgY2hlY2sgZm9yIG1vYmlsZSB0byBjaGFuZ2Ugc2NhbGVcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5tb2JpbGUpIHtcclxuICAgICAgICAgICAgICAgIG9mZnNldFNjYWxlID0gMjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gc3BlZWQgdXAgYW5pbWF0aW9uIGZvciBtb2JpbGUgYW5kIGRlc2t0b3AgbmV0d29yayBncmFwaCByZW5kZXJpbmdcclxuICAgICAgICAgICAgc3BlZWRBbmltYXRlKDcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZm9yY2Uuc3RhcnQoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEhhc2ggbGlua2VkIG5laWdoYm9ycyBmb3IgZWFzeSBob3ZlcmluZyBlZmZlY3RzLlxyXG4gICAgICAgICAgICAvLyBTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvODc4MDI3N1xyXG4gICAgICAgICAgICB2YXIgbGlua2VkQnlJbmRleCA9IHt9O1xyXG4gICAgICAgICAgICBfLmZvckVhY2gobGlua3MsIGZ1bmN0aW9uIChsKSB7XHJcbiAgICAgICAgICAgICAgICBfLmZvckVhY2gobFswXSwgZnVuY3Rpb24gKGNvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gY29ubmVjdGlvbi5fX2RhdGFfXy5zb3VyY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGNvbm5lY3Rpb24uX19kYXRhX18udGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmtlZEJ5SW5kZXhbc291cmNlLmluZGV4ICsgJywnICsgdGFyZ2V0LmluZGV4XSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlua2VkQnlJbmRleFt0YXJnZXQuaW5kZXggKyAnLCcgKyBzb3VyY2UuaW5kZXhdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBuZWlnaGJvcmluZyA9IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGlua2VkQnlJbmRleFthLmluZGV4ICsgJywnICsgYi5pbmRleF0gfHwgYS5pbmRleCA9PT0gYi5pbmRleDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHZhciBmb2N1c25laWdoYm9ycyA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFwcGx5ICd1bmZvY3VzZWQnIGNsYXNzIHRvIGFsbCBub24tbmVpZ2hib3JzLlxyXG4gICAgICAgICAgICAgICAgLy8gQXBwbHkgJ2ZvY3VzZWQnIGNsYXNzIHRvIGFsbCBuZWlnaGJvcnMuXHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBTZWUgaWYgaXQgY2FuIGJlIGRvbmUgd2l0aCBqdXN0IG9uZSBjbGFzcyBhbmQgOm5vdCguZm9jdXNlZCkgQ1NTIHNlbGVjdG9ycy5cclxuICAgICAgICAgICAgICAgIG5vZGVcclxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZ1bmN0aW9uIChuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZWlnaGJvcmluZyhlbnRpdHksIG4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZ1bmN0aW9uIChuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhbmVpZ2hib3JpbmcoZW50aXR5LCBuKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBfLmZvckVhY2gobGlua3MsIGZ1bmN0aW9uIChsaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlua1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZ1bmN0aW9uIChvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW50aXR5LmluZGV4ID09PSBvLnNvdXJjZS5pbmRleCB8fCBlbnRpdHkuaW5kZXhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9PT0gby50YXJnZXQuaW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmdW5jdGlvbiAobykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEoZW50aXR5LmluZGV4ID09PSBvLnNvdXJjZS5pbmRleCB8fCBlbnRpdHkuaW5kZXhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID09PSBvLnRhcmdldC5pbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB2YXIgZm9jdXMgPSBmdW5jdGlvbiAoZW50aXR5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmN1cnJlbnRFbnRpdHkgIT09IGVudGl0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zZXRFbnRpdHkoZW50aXR5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcclxuICAgICAgICAgICAgICAgIGZvY3VzbmVpZ2hib3JzKGVudGl0eSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB2YXIgdW5mb2N1cyA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcclxuICAgICAgICAgICAgICAgIC8vdmFyIHRyYW5zaXRpb25kZWxheSA9IDc1O1xyXG4gICAgICAgICAgICAgICAgbm9kZVxyXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChsaW5rcywgZnVuY3Rpb24gKGxpbmspIHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5rXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGVudGl0eS5maXhlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgLy8gUmVzdGFydCBkMyBhbmltYXRpb25zLlxyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmNlLnJlc3VtZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy9UT0RPOiBTaG93IGdlbmVyaWMgZGV0YWlscyBhbmQgbm90IGluZGl2aWR1YWwgZW50aXR5IGRldGFpbHM/XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBob3ZlclRpbWVyO1xyXG4gICAgICAgICAgICB2YXIgaG92ZXIgPSBmdW5jdGlvbiAoZW50aXR5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSAmJiAhJHNjb3BlLmVkaXRpbmcgJiYgISRzY29wZS5jdXJyZW50TG9jYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBob3ZlclRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzKGVudGl0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgdW5ob3ZlciA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcclxuICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ICYmICEkc2NvcGUuY3VycmVudExvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5mb2N1cyhlbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChob3ZlclRpbWVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgZm9jdXNMb2NhdGlvbiA9IGZ1bmN0aW9uIChsb2NhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgLy8gIElmIHRoZSBjdXJyZW50IGVudGl0eSBpcyBzaG93biBhbmQgaXQgZG9lc24ndCBtYXRjaCB0aGUgY2xpY2tlZCBub2RlLCB0aGVuIHNldFxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIG5ldyBub2RlIHRvIGNsaWNrZWQuXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgbm9kZS5jbGFzc2VkKCdmb2N1c2VkJywgZnVuY3Rpb24gKG4pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5uYW1lIGluIGxvY2F0aW9uLmRpY3Q7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmdW5jdGlvbiAobikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShuLm5hbWUgaW4gbG9jYXRpb24uZGljdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGxpbmtzLCBmdW5jdGlvbiAobGluaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmdW5jdGlvbiAobykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChvLnNvdXJjZS5uYW1lIGluIGxvY2F0aW9uLmRpY3QgJiYgby50YXJnZXQubmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gbG9jYXRpb24uZGljdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmdW5jdGlvbiAobykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEoby5zb3VyY2UubmFtZSBpbiBsb2NhdGlvbi5kaWN0KSB8fCAhKG8udGFyZ2V0Lm5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbiBsb2NhdGlvbi5kaWN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHZhciB1bmZvY3VzTG9jYXRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBub2RlXHJcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGxpbmtzLCBmdW5jdGlvbiAobGluaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yY2UucmVzdW1lKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB2YXIgaGlnaGxpZ2h0TG9jYXRpb24gPSBmdW5jdGlvbiAobG9jYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zaG93TGljZW5zZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVuZm9jdXMoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24gIT09IGxvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5mb2N1c0xvY2F0aW9uKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24gPSBsb2NhdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICBmb2N1c0xvY2F0aW9uKGxvY2F0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIEZJWCBGT1IgTE9DQVRJT04gTk9UIEhJR0hMSUdIVElORyBvbiBzZWFyY2ggZW50ZXI6XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24gPT09IGxvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24gPSBsb2NhdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNMb2NhdGlvbihsb2NhdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkMy5ldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBjbGljayA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zaG93TGljZW5zZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh1dGlscy5pc0RlZmluZWQoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodXRpbHMuaXNEZWZpbmVkKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuZm9jdXNMb2NhdGlvbigkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmVudGl0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyAgSWYgdGhlIHByZXZpb3VzIG5vZGUgaXMgZXF1YWwgdG8gdGhlIG5ldyBub2RlLCBkbyBub3RoaW5nLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPT09IGVudGl0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGSVggRk9SIFNFQVJDSCBOT1QgV09SS0lORzogZW50aXR5IHdhcyBub3QgZm9jdXNlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhZnRlciBzd2l0Y2hpbmcgdG8gc3RhcnRsb2FkIGZ1bmN0aW9uIGZvciBuZXR3b3JrIGdyYXBoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzKGVudGl0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgVW5mb2N1cyBvbiBwcmV2aW91cyBub2RlIGFuZCBmb2N1cyBvbiBuZXcgbm9kZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5mb2N1cygkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9IGVudGl0eTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXMoZW50aXR5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gU3RvcCBldmVudCBzbyB3ZSBkb24ndCBkZXRlY3QgYSBjbGljayBvbiB0aGUgYmFja2dyb3VuZC5cclxuICAgICAgICAgICAgICAgIC8vIFNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcS8yMjk0MTc5NlxyXG4gICAgICAgICAgICAgICAgaWYgKGQzLmV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZDMuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbnRlcmFjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHZhciBiYWNrZ3JvdW5kY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodXRpbHMuaXNEZWZpbmVkKCRzY29wZS5jbGlja2VkTG9jYXRpb24pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHV0aWxzLmlzRGVmaW5lZCgkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmZvY3VzKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHV0aWxzLmlzRGVmaW5lZCgkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuZm9jdXMoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XHJcbiAgICAgICAgICAgICAgICAvL1RPRE86IFNob3cgZ2VuZXJpYyBkZXRhaWxzIGFuZCBub3QgaW5kaXZpZHVhbCBlbnRpdHkgZGV0YWlscy5cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIGRibGNsaWNrID0gZnVuY3Rpb24gKGVudGl0eSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFlbnRpdHkuZml4ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbnRpdHkueCA9IHdpZHRoIC8gMjtcclxuICAgICAgICAgICAgICAgICAgICBlbnRpdHkueSA9IGhlaWdodCAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LnB4ID0gd2lkdGggLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5weSA9IGhlaWdodCAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LmZpeGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSBlbnRpdHk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHVuZm9jdXMoZW50aXR5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgbm9kZS5vbignbW91c2VvdmVyJywgaG92ZXIpO1xyXG4gICAgICAgICAgICBub2RlLm9uKCdtb3VzZW91dCcsIHVuaG92ZXIpO1xyXG4gICAgICAgICAgICBub2RlLm9uKCdjbGljaycsIGNsaWNrKTtcclxuICAgICAgICAgICAgbm9kZS5vbignZGJsY2xpY2snLCBkYmxjbGljayk7XHJcbiAgICAgICAgICAgIHN2Zy5vbignY2xpY2snLCBiYWNrZ3JvdW5kY2xpY2spO1xyXG5cclxuICAgICAgICAgICAgbm9kZVxyXG4gICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3dlbGxjb25uZWN0ZWQnLCBmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmhhc093blByb3BlcnR5KCd3ZWxsY29ubmVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS4kb24oJ2NoYW5nZVNpemVCeScsIGZ1bmN0aW9uIChldmVudCwgc2l6ZUJ5KSB7XHJcbiAgICAgICAgICAgICAgICBzdmcuc2VsZWN0QWxsKCdjaXJjbGUnKVxyXG4gICAgICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKClcclxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oMjUwKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdyJywgZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRbc2l6ZUJ5XSA/IHNjYWxlW3NpemVCeV0oZFtzaXplQnldKSA6IGRlZmF1bHROb2RlU2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICRzY29wZS4kb24oJ3RvZ2dsZUxpbmsnLCBmdW5jdGlvbiAoZXZlbnQsIGxpbmspIHtcclxuICAgICAgICAgICAgICAgIC8vIGxpbmtzW2xpbmsubmFtZV1cclxuICAgICAgICAgICAgICAgIC8vIC5jbGFzc2VkKHsndmlzaWJsZSc6IGxpbmsuZW5hYmxlZCwgJ2hpZGRlbic6ICFsaW5rLmVuYWJsZWR9KTtcclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgbmV4dCBsaW5lIHVwZGF0ZXMgYSBkaWN0aW9uYXJ5IHdpdGgga2V5cyBvZiB0aGUgY29ubmVjdGlvbiB0eXBlcyBhbmQgdmFsdWVzIHRoYXQgYXJlIFRydWUvRmFsc2UgY29ycmVzcG9uZGluZyB0byBDaGVjay9VbmNoZWNrXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY29ubmVjdGlvblR5cGVzW2xpbmsubmFtZV0gPSBsaW5rLmVuYWJsZWQ7XHJcbiAgICAgICAgICAgICAgICBfLm1hcCgkc2NvcGUuZW50aXR5VHlwZXMsIGZ1bmN0aW9uICh2YWwsIGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN2Z1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCcuJyArIGtleSArICctbGluaycpIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndmlzaWJsZSc6IGZ1bmN0aW9uIChsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ubmVjdGlvblR5cGUgZW5hYmxlZCwgY29ubmVjdGlvbiBzb3VyY2UgZW50aXR5IHR5cGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpcyBlbmFibGVkLCBjb25uZWN0aW9uIHRhcmdldCBlbnRpdHkgdHlwZSBpcyBlbmFibGVkLlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmNvbm5lY3Rpb25UeXBlc1tsLnR5cGVdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgKCRzY29wZS5lbnRpdHlUeXBlc1tsLnNvdXJjZS50eXBlXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmICRzY29wZS5lbnRpdHlUeXBlc1tsLnRhcmdldC50eXBlXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hpZGRlbic6IGZ1bmN0aW9uIChsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgYW55IG9mIENvbm5lY3Rpb25UeXBlLCBzb3VyY2UgZW50aXR5IHR5cGUsIG9yIHRhcmdldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVudGl0eSB0eXBlIGFyZSBkaXNhYmxlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gISRzY29wZS5jb25uZWN0aW9uVHlwZXNbbC50eXBlXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8ICghJHNjb3BlLmVudGl0eVR5cGVzW2wuc291cmNlLnR5cGVdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgISRzY29wZS5lbnRpdHlUeXBlc1tsLnRhcmdldC50eXBlXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICRzY29wZS4kb24oJ3RvZ2dsZU5vZGUnLCBmdW5jdGlvbiAoZXZlbnQsIHR5cGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgbmV4dCBsaW5lIHVwZGF0ZXMgYSBkaWN0aW9uYXJ5IHdpdGgga2V5cyBvZiB0aGUgZW50aXRpZXMgYW5kIHZhbHVlcyB0aGF0IGFyZSBUcnVlL0ZhbHNlIGNvcnJlc3BvbmRpbmcgdG8gQ2hlY2svVW5jaGVja1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmVudGl0eVR5cGVzW3R5cGUubmFtZV0gPSB0eXBlLmVuYWJsZWQ7IFxyXG4gICAgICAgICAgICAgICAgc3ZnXHJcbiAgICAgICAgICAgICAgICAgICAgLnNlbGVjdEFsbCgnLicgKyB0eXBlLm5hbWUgKyAnLW5vZGUnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKHsgJ3Zpc2libGUnOiB0eXBlLmVuYWJsZWQsICdoaWRkZW4nOiAhdHlwZS5lbmFibGVkIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHN2Z1xyXG4gICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJy4nICsgdHlwZS5uYW1lICsgJy1saW5rJylcclxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd2aXNpYmxlJzogZnVuY3Rpb24gKGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbm5lY3Rpb25UeXBlIGVuYWJsZWQsIGNvbm5lY3Rpb24gc291cmNlIGVudGl0eSB0eXBlIGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbmFibGVkLCBjb25uZWN0aW9uIHRhcmdldCBlbnRpdHkgdHlwZSBpcyBlbmFibGVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS5jb25uZWN0aW9uVHlwZXNbbC50eXBlXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmICgkc2NvcGUuZW50aXR5VHlwZXNbbC5zb3VyY2UudHlwZV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiAkc2NvcGUuZW50aXR5VHlwZXNbbC50YXJnZXQudHlwZV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnaGlkZGVuJzogZnVuY3Rpb24gKGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGFueSBvZiBDb25uZWN0aW9uVHlwZSwgc291cmNlIGVudGl0eSB0eXBlLCBvciB0YXJnZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVudGl0eSB0eXBlIGFyZSBkaXNhYmxlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhJHNjb3BlLmNvbm5lY3Rpb25UeXBlc1tsLnR5cGVdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgKCEkc2NvcGUuZW50aXR5VHlwZXNbbC5zb3VyY2UudHlwZV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCAhJHNjb3BlLmVudGl0eVR5cGVzW2wudGFyZ2V0LnR5cGVdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuJG9uKCdzZWxlY3RJdGVtJywgZnVuY3Rpb24gKGV2ZW50LCBpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnbG9jYXRpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0TG9jYXRpb24oJHNjb3BlLmN1cnJlbnRMb2NhdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGljaygkc2NvcGUuY3VycmVudEVudGl0eSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHN0YXJ0TG9hZCgpIHtcclxuICAgICAgICAgICAgZnVuY3Rpb24gc3VjY2VzcyhkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWRFbnRpdGllcyA9ICRmaWx0ZXIoJ2ZpbHRlcicpKCRzY29wZS5lbnRpdGllcyxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZW50aXR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRpdHkuY29sbGFib3JhdGlvbnMubGVuZ3RoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PSAkc2NvcGUubWluQ29ubmVjdGlvbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJlZENvbm5lY3Rpb25zID0ge307XHJcbiAgICAgICAgICAgICAgICBfLmZvckVhY2goXy5rZXlzKGRhdGEuY29ubmVjdGlvbnMpLCBmdW5jdGlvbiAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICRzY29wZS5jb25uZWN0aW9uc1t0eXBlXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkQ29ubmVjdGlvbnNbdHlwZV0gPSBbXTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGRhdGEuY29ubmVjdGlvbnMsIGZ1bmN0aW9uIChjb25uZWN0aW9ucywgdHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF8uZm9yRWFjaChjb25uZWN0aW9ucywgZnVuY3Rpb24gKGNvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZU5vZGUgPSBfLmZpbmQoZmlsdGVyZWRFbnRpdGllcywgeyAnaWQnOiBjb25uZWN0aW9uLnNvdXJjZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldE5vZGUgPSBfLmZpbmQoZmlsdGVyZWRFbnRpdGllcywgeyAnaWQnOiBjb25uZWN0aW9uLnRhcmdldCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoIHV0aWxzLmlzRGVmaW5lZChzb3VyY2VOb2RlKSAmJiB1dGlscy5pc0RlZmluZWQodGFyZ2V0Tm9kZSkgKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZENvbm5lY3Rpb25zW3R5cGVdLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ICdzb3VyY2UnOiBzb3VyY2VOb2RlLCAndGFyZ2V0JzogdGFyZ2V0Tm9kZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gJHNjb3BlLmNvbm5lY3Rpb25zW3R5cGVdLnB1c2goeydzb3VyY2UnOiBzb3VyY2VOb2RlLCAndGFyZ2V0JzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGFyZ2V0Tm9kZX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyBPbmx5IHNob3cgbGFiZWxzIG9uIHRvcCA1IG1vc3QgY29ubmVjdGVkIGVudGl0aWVzIGluaXRpYWxseS5cclxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChfLmtleXMoJHNjb3BlLmVudGl0eVR5cGVzKSwgZnVuY3Rpb24gKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBGaW5kIHRoZSB0b3AgNSBtb3N0LWNvbm5lY3RlZCBlbnRpdGllcy5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdG9wNSA9IF8udGFrZVJpZ2h0KF8uc29ydEJ5KF8uZmlsdGVyKCRzY29wZS5lbnRpdGllcywgeyAndHlwZSc6IHR5cGUgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdjb2xsYWJvcmF0aW9ucy5sZW5ndGgnKSwgNSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy5mb3JFYWNoKHRvcDUsIGZ1bmN0aW9uIChlbnRpdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5LndlbGxjb25uZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZmlsdGVyZWRFbnRpdGllcyA9IF8uc29ydEJ5KGZpbHRlcmVkRW50aXRpZXMsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlLndlbGxjb25uZWN0ZWQpID8gMSA6IDA7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBkcmF3TmV0d29yayhmaWx0ZXJlZEVudGl0aWVzLCBmaWx0ZXJlZENvbm5lY3Rpb25zKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29ubmVjdGlvblNlcnZpY2VcclxuICAgICAgICAgICAgICAgIC5nZXRBbGwoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oc3VjY2Vzcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIENvbnRyb2xsZXIuJGluamVjdCA9IFtcIiRzY29wZVwiLCBcIiRmaWx0ZXJcIiwgXCJfXCIsIFwiY29ubmVjdGlvblNlcnZpY2VcIiwgXCJjZ1V0aWxTZXJ2aWNlXCJdO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ25ldHdvcmtDdHJsJywgQ29udHJvbGxlcik7XHJcblxyXG59KShhbmd1bGFyLCBSVFApO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNy8xMS8xNi5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIGRlcGVuZGVuY2llcyA9IFtcclxuICAgICAgICBkaXJlY3RpdmVcclxuICAgIF07XHJcblxyXG4gICAgZnVuY3Rpb24gZGlyZWN0aXZlKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIFwicmVzdHJpY3RcIjogXCJFXCIsXHJcbiAgICAgICAgICAgIFwidGVtcGxhdGVVcmxcIjogXCJqcy9uZXR3b3JrL25ldHdvcmsuaHRtbFwiLFxyXG4gICAgICAgICAgICBcImNvbnRyb2xsZXJcIjogXCJuZXR3b3JrQ3RybFwiXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoXCIpXHJcbiAgICAgICAgLmRpcmVjdGl2ZShcIm5ldHdvcmtcIiwgZGVwZW5kZW5jaWVzKTtcclxuXHJcbn0pKGFuZ3VsYXIpO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNi8xNi5cclxuICovXHJcbihmdW5jdGlvbihhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN0aWN0OiAnRScsXHJcbiAgICAgICAgICAgIHJlcXVpcmU6ICc/bmdNb2RlbCcsXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmdNb2RlbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCAndHlwZScgaW4gYXR0cnMgJiYgYXR0cnMudHlwZS50b0xvd2VyQ2FzZSgpID09PSAncmFuZ2UnICkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5nTW9kZWwuJHBhcnNlcnMucHVzaChwYXJzZUZsb2F0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxufSkoYW5ndWxhcik7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGZ1bmN0aW9uIG92ZXJ2aWV3Q3RybCgkc2NvcGUsIF8pIHtcclxuICAgICAgICAkc2NvcGUuY2F0ZWdvcml6ZWRFbnRpdGllcyA9IHt9O1xyXG4gICAgICAgIF8uZm9yRWFjaChfLmtleXMoJHNjb3BlLmVudGl0eVR5cGVzKSwgZnVuY3Rpb24gKHR5cGUpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3JpemVkRW50aXRpZXNbdHlwZV0gPSBfLmZpbHRlcigkc2NvcGUuZW50aXRpZXMsIHsndHlwZSc6IHR5cGV9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdvdmVydmlld0N0cmwnLCBbJyRzY29wZScsICdfJywgb3ZlcnZpZXdDdHJsXSk7XHJcbn0pKGFuZ3VsYXIpO1xyXG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBmdW5jdGlvbiBpc0RlZmluZWQobykge1xyXG4gICAgICAgIHJldHVybiAhKHR5cGVvZiBvID09PSBcInVuZGVmaW5lZFwiIHx8IG8gPT09IG51bGwpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGlzT2JqZWN0KG8pIHtcclxuICAgICAgICByZXR1cm4gaXNEZWZpbmVkKG8pICYmICFBcnJheS5pc0FycmF5KG8pICYmICh0eXBlb2YgbyA9PT0gXCJvYmplY3RcIik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0UHJvcGVydHlGcm9tT2JqKG9iaikge1xyXG4gICAgICAgIHZhciBkZWZPYmogPSBpc0RlZmluZWQob2JqKSA/IG9iaiA6IHt9O1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHByb3BlcnR5LCBkZWZhdWx0VmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gaXNEZWZpbmVkKGRlZmF1bHRWYWx1ZSkgPyBkZWZhdWx0VmFsdWUgOiBudWxsO1xyXG4gICAgICAgICAgICByZXR1cm4gaXNEZWZpbmVkKGRlZk9ialtwcm9wZXJ0eV0pXHJcbiAgICAgICAgICAgICAgICA/IGRlZk9ialtwcm9wZXJ0eV1cclxuICAgICAgICAgICAgICAgIDogdmFsdWU7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBsb29wQW5kSW5pdChtb2RlbEFycmF5LCBpbml0TW9kZWxGdW5jdGlvbikge1xyXG4gICAgICAgIHZhciBuZXdBcnJheSA9IEFycmF5LmlzQXJyYXkobW9kZWxBcnJheSlcclxuICAgICAgICAgICAgPyBtb2RlbEFycmF5LmZpbHRlcihpc09iamVjdCkubWFwKGluaXRNb2RlbEZ1bmN0aW9uKVxyXG4gICAgICAgICAgICA6IFtdO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3QXJyYXkuY29uY2F0KFtpbml0TW9kZWxGdW5jdGlvbigpXSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gU2VydmljZSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBcImlzRGVmaW5lZFwiOiBpc0RlZmluZWQsXHJcbiAgICAgICAgICAgIFwiaXNPYmplY3RcIjogaXNPYmplY3QsXHJcblxyXG4gICAgICAgICAgICBcImdldFByb3BlcnR5RnJvbU9ialwiOiBnZXRQcm9wZXJ0eUZyb21PYmosXHJcbiAgICAgICAgICAgIFwibG9vcEFuZEluaXRcIjogbG9vcEFuZEluaXRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKFwiY2l2aWMtZ3JhcGgudXRpbFwiKVxyXG4gICAgICAgIC5mYWN0b3J5KFwiY2dVdGlsU2VydmljZVwiLCBTZXJ2aWNlKTtcclxuXHJcbn0pKGFuZ3VsYXIpO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNy8xLzE2LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBmdW5jdGlvbiBhbmFseXRpY3NDdHJsKCRzY29wZSkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdhbmFseXRpY3NDdHJsJywgWyckc2NvcGUnLCBhbmFseXRpY3NDdHJsXSk7XHJcbn0pKGFuZ3VsYXIpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG5cclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGZ1bmN0aW9uIENvbmZpZygkaHR0cFByb3ZpZGVyKSB7XHJcbiAgICAgICAgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbltcIlgtUmVxdWVzdGVkLVdpdGhcIl0gPSBcIlhNTEh0dHBSZXF1ZXN0XCI7XHJcbiAgICB9XHJcblxyXG4gICAgQ29uZmlnLiRpbmplY3QgPSBbXCIkaHR0cFByb3ZpZGVyXCJdO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiY2l2aWMtZ3JhcGguYXBpXCIpLmNvbmZpZyhDb25maWcpO1xyXG5cclxufSkoYW5ndWxhcik7XHJcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG5cclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIHZhciBhcGlVcmwgPSBcImh0dHBzOi8vYXBpLmNpdmljZ3JhcGguaW8vYXBpXCI7XHJcbiAgICAvL3ZhciBhcGlVcmwgPSBcIi9hcGlcIjtcclxuXHJcbiAgICB2YXIgZGVmYXVsdEhlYWRlciA9IHtcclxuICAgICAgICAvLyBcIkV2ZW50LU5hbWVcIjogXCJUZXN0LUV2ZW50XCJcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gU2VydmljZSgkaHR0cCwgJHEpIHtcclxuICAgICAgICBmdW5jdGlvbiBsb2dBcGlFcnJvcihlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlJlY2lldmVkIGFuIGVycm9yIGZyb20gQVBJIHdpdGggdGhpcyBtZXNzYWdlOiAlT1wiLCBlcnIuZGF0YSk7XHJcbiAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoZXJyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHVud3JhcEFuZ3VsYXJIdHRwKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0KHVybCwgcGFyYW1zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cFxyXG4gICAgICAgICAgICAgICAgLmdldChhcGlVcmwgKyB1cmwsIHsgXCJwYXJhbXNcIjogcGFyYW1zLCBcImhlYWRlcnNcIjogZGVmYXVsdEhlYWRlciB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4odW53cmFwQW5ndWxhckh0dHAsIGxvZ0FwaUVycm9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHBvc3QodXJsLCBkYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cFxyXG4gICAgICAgICAgICAgICAgLnBvc3QoYXBpVXJsICsgdXJsLCBkYXRhLCB7IFwiaGVhZGVyc1wiOiBkZWZhdWx0SGVhZGVyIH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbih1bndyYXBBbmd1bGFySHR0cCwgbG9nQXBpRXJyb3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgXCJnZXRcIjogZ2V0LFxyXG4gICAgICAgICAgICBcInBvc3RcIjogcG9zdFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgU2VydmljZS4kaW5qZWN0ID0gW1wiJGh0dHBcIiwgXCIkcVwiXTtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKS5mYWN0b3J5KFwiY2dBcGlDYWxsZXJcIiwgU2VydmljZSk7XHJcblxyXG59KShhbmd1bGFyKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjcvMTYuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBmdW5jdGlvbiBTZXJ2aWNlKHV0aWxzKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gTG9jYXRpb24ob2JqKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIHZhciBnZXRQcm9wZXJ0eSA9IHV0aWxzLmdldFByb3BlcnR5RnJvbU9iaihvYmopO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gYnVpbGRGb3JtYXR0ZWRBZGRyZXNzKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlZk9iaiA9IHV0aWxzLmlzRGVmaW5lZChvYmopID8gb2JqIDoge307XHJcbiAgICAgICAgICAgICAgICB2YXIgYWRkcmVzc0xpbmUgPSAodXRpbHMuaXNEZWZpbmVkKGRlZk9iai5hZGRyZXNzX2xpbmUpID8gZGVmT2JqLmFkZHJlc3NfbGluZSArICcgJyA6ICcnKTtcclxuICAgICAgICAgICAgICAgIHZhciBsb2NhbGl0eSA9ICh1dGlscy5pc0RlZmluZWQoZGVmT2JqLmxvY2FsaXR5KSA/IGRlZk9iai5sb2NhbGl0eSArICcsICcgOiAnJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY291bnRyeUNvZGUgPSAodXRpbHMuaXNEZWZpbmVkKGRlZk9iai5jb3VudHJ5X2NvZGUpID8gZGVmT2JqLmNvdW50cnlfY29kZSArICcgJyA6ICcnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwb3N0YWxDb2RlID0gKHV0aWxzLmlzRGVmaW5lZChkZWZPYmoucG9zdGFsX2NvZGUpID8gZGVmT2JqLnBvc3RhbF9jb2RlIDogJycpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiAoYWRkcmVzc0xpbmUgKyBsb2NhbGl0eSArIGNvdW50cnlDb2RlICsgcG9zdGFsQ29kZSkudHJpbSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzZWxmLmlkID0gZ2V0UHJvcGVydHkoXCJpZFwiKTtcclxuICAgICAgICAgICAgc2VsZi5hZGRyZXNzX2xpbmUgPSBnZXRQcm9wZXJ0eShcImFkZHJlc3NfbGluZVwiKTtcclxuICAgICAgICAgICAgc2VsZi5sb2NhbGl0eSA9IGdldFByb3BlcnR5KFwibG9jYWxpdHlcIik7XHJcbiAgICAgICAgICAgIHNlbGYuZGlzdHJpY3QgPSBnZXRQcm9wZXJ0eShcImRpc3RyaWN0XCIpO1xyXG4gICAgICAgICAgICBzZWxmLnBvc3RhbF9jb2RlID0gZ2V0UHJvcGVydHkoXCJwb3N0YWxfY29kZVwiKTtcclxuICAgICAgICAgICAgc2VsZi5jb3VudHJ5ID0gZ2V0UHJvcGVydHkoXCJjb3VudHJ5XCIpO1xyXG4gICAgICAgICAgICBzZWxmLmNvdW50cnlfY29kZSA9IGdldFByb3BlcnR5KFwiY291bnRyeV9jb2RlXCIpO1xyXG4gICAgICAgICAgICBzZWxmLmNvb3JkaW5hdGVzID0gZ2V0UHJvcGVydHkoXCJjb29yZGluYXRlc1wiKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFRPRE86IENvbnZlcnQgdGhpcyB0byBhIG1ldGhvZCB0aGF0IGJ1aWxkcyBiYXNlZCBvZmYgb2YgdGhlIGN1cnJlbnQgb2JqZWN0J3MgcHJvcGVydGllcy5cclxuICAgICAgICAgICAgLy8gVW5sZXNzIHRoaXMgaXMgbmVlZGVkIGZvciB0aGUgQVBJIHNwZWNpZmljYWxseSwgdGhlbiBoYXZlIHRoaXMgYnVpbHQgaW4gYSBzaW1pbGFyIGZ1bmN0aW9uIGFzIHRoZSBvbmUgaW5cclxuICAgICAgICAgICAgLy8gRW50aXR5TW9kZWwgZm9yIGJ1aWxkaW5nIEFQSSBzcGVjaWZpYyBvYmplY3RzXHJcbiAgICAgICAgICAgIHNlbGYuZm9ybWF0dGVkQWRkcmVzcyA9IGJ1aWxkRm9ybWF0dGVkQWRkcmVzcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0TG9jYXRpb25Nb2RlbChvYmopIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBMb2NhdGlvbihvYmopO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgXCJnZXRMb2NhdGlvbk1vZGVsXCI6IGdldExvY2F0aW9uTW9kZWxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIFNlcnZpY2UuJGluamVjdCA9IFtcImNnVXRpbFNlcnZpY2VcIl07XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2NpdmljLWdyYXBoLmFwaScpXHJcbiAgICAgICAgLmZhY3RvcnkoJ2xvY2F0aW9uU2VydmljZScsIFNlcnZpY2UpO1xyXG5cclxufSkoYW5ndWxhcik7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxyXG4gKi9cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcblxyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0RW50aXR5VHlwZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgXCJHb3Zlcm5tZW50XCI6IHRydWUsXHJcbiAgICAgICAgICAgIFwiRm9yLVByb2ZpdFwiOiB0cnVlLFxyXG4gICAgICAgICAgICBcIk5vbi1Qcm9maXRcIjogdHJ1ZSxcclxuICAgICAgICAgICAgXCJJbmRpdmlkdWFsXCI6IHRydWVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldEluZmx1ZW5jZVR5cGVzKCkge1xyXG4gICAgICAgIHJldHVybiBbXCJMb2NhbFwiLCBcIk5hdGlvbmFsXCIsIFwiR2xvYmFsXCJdO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIFNlcnZpY2UoYXBpQ2FsbGVyLCBmdW5Db25uU2VydmljZSwgY29ublNlcnZpY2UsIGZpbmFuY2VTZXJ2aWNlLCBsb2NhdGlvblNlcnZpY2UsIGNhdGVnb3J5U2VydmljZSwgdXRpbHMpIHtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gRW50aXR5KG9iaikge1xyXG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciBkZWZPYmogPSB1dGlscy5pc0RlZmluZWQob2JqKSA/IG9iaiA6IHt9O1xyXG4gICAgICAgICAgICB2YXIgZ2V0UHJvcGVydHkgPSB1dGlscy5nZXRQcm9wZXJ0eUZyb21PYmoob2JqKTtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlREJNb2RlbCgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYk1vZGVsID0gbmV3IEVudGl0eShzZWxmKTtcclxuICAgICAgICAgICAgICAgIGRiTW9kZWwubG9jYXRpb25zLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgZGJNb2RlbC5sb2NhdGlvbnMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmdyYW50c19yZWNlaXZlZC5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGRiTW9kZWwuZ3JhbnRzX3JlY2VpdmVkLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgZGJNb2RlbC5ncmFudHNfZ2l2ZW4ucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmdyYW50c19naXZlbi5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGRiTW9kZWwuaW52ZXN0bWVudHNfcmVjZWl2ZWQucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmludmVzdG1lbnRzX3JlY2VpdmVkLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgZGJNb2RlbC5pbnZlc3RtZW50c19tYWRlLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgZGJNb2RlbC5pbnZlc3RtZW50c19tYWRlLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgZGJNb2RlbC5kYXRhX2dpdmVuLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgZGJNb2RlbC5kYXRhX2dpdmVuLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgZGJNb2RlbC5kYXRhX3JlY2VpdmVkLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgZGJNb2RlbC5kYXRhX3JlY2VpdmVkLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgZGJNb2RlbC5jb2xsYWJvcmF0aW9ucy5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGRiTW9kZWwuY29sbGFib3JhdGlvbnMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmtleV9wZW9wbGUucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmtleV9wZW9wbGUucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmVtcGxveW1lbnRzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgZGJNb2RlbC5lbXBsb3ltZW50cy5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGRiTW9kZWwucmV2ZW51ZXMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBkYk1vZGVsLnJldmVudWVzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgZGJNb2RlbC5leHBlbnNlcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGRiTW9kZWwuZXhwZW5zZXMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmNhdGVnb3JpZXMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmNhdGVnb3JpZXMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmRlc2NyaXB0aW9uID0gJyc7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRiTW9kZWw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNlbGYuaWQgPSBnZXRQcm9wZXJ0eShcImlkXCIpO1xyXG4gICAgICAgICAgICBzZWxmLm5hbWUgPSBnZXRQcm9wZXJ0eShcIm5hbWVcIik7XHJcbiAgICAgICAgICAgIHNlbGYuaW5mbHVlbmNlID0gZ2V0UHJvcGVydHkoXCJpbmZsdWVuY2VcIik7XHJcbiAgICAgICAgICAgIHNlbGYudHlwZSA9IGdldFByb3BlcnR5KFwidHlwZVwiKTtcclxuICAgICAgICAgICAgc2VsZi5uaWNrbmFtZSA9IGdldFByb3BlcnR5KFwibmlja25hbWVcIik7XHJcbiAgICAgICAgICAgIHNlbGYudXJsID0gZ2V0UHJvcGVydHkoXCJ1cmxcIik7XHJcbiAgICAgICAgICAgIHNlbGYudHdpdHRlcl9oYW5kbGUgPSBnZXRQcm9wZXJ0eShcInR3aXR0ZXJfaGFuZGxlXCIpO1xyXG4gICAgICAgICAgICBzZWxmLmVtcGxveWVlcyA9IGdldFByb3BlcnR5KFwiZW1wbG95ZWVzXCIpO1xyXG5cclxuICAgICAgICAgICAgc2VsZi5sb2NhdGlvbnMgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmoubG9jYXRpb25zLCBsb2NhdGlvblNlcnZpY2UuZ2V0TG9jYXRpb25Nb2RlbCk7XHJcbiAgICAgICAgICAgIHNlbGYuZ3JhbnRzX3JlY2VpdmVkID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmdyYW50c19yZWNlaXZlZCwgZnVuQ29ublNlcnZpY2UuZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbCk7XHJcbiAgICAgICAgICAgIHNlbGYuaW52ZXN0bWVudHNfcmVjZWl2ZWQgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouaW52ZXN0bWVudHNfcmVjZWl2ZWQsIGZ1bkNvbm5TZXJ2aWNlLmdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwpO1xyXG4gICAgICAgICAgICBzZWxmLmdyYW50c19naXZlbiA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5ncmFudHNfZ2l2ZW4sIGZ1bkNvbm5TZXJ2aWNlLmdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwpO1xyXG4gICAgICAgICAgICBzZWxmLmludmVzdG1lbnRzX21hZGUgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouaW52ZXN0bWVudHNfbWFkZSwgZnVuQ29ublNlcnZpY2UuZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbCk7XHJcbiAgICAgICAgICAgIHNlbGYuZGF0YV9naXZlbiA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5kYXRhX2dpdmVuLCBjb25uU2VydmljZS5nZXRDb25uZWN0aW9uTW9kZWwpO1xyXG4gICAgICAgICAgICBzZWxmLmRhdGFfcmVjZWl2ZWQgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouZGF0YV9yZWNlaXZlZCwgY29ublNlcnZpY2UuZ2V0Q29ubmVjdGlvbk1vZGVsKTtcclxuICAgICAgICAgICAgc2VsZi5jb2xsYWJvcmF0aW9ucyA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5jb2xsYWJvcmF0aW9ucywgY29ublNlcnZpY2UuZ2V0Q29ubmVjdGlvbk1vZGVsKTtcclxuICAgICAgICAgICAgc2VsZi5rZXlfcGVvcGxlID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmtleV9wZW9wbGUsIGNvbm5TZXJ2aWNlLmdldENvbm5lY3Rpb25Nb2RlbCk7XHJcbiAgICAgICAgICAgIHNlbGYuZW1wbG95bWVudHMgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouZW1wbG95bWVudHMsIGNvbm5TZXJ2aWNlLmdldENvbm5lY3Rpb25Nb2RlbCk7XHJcbiAgICAgICAgICAgIHNlbGYucmV2ZW51ZXMgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmoucmV2ZW51ZXMsIGZpbmFuY2VTZXJ2aWNlLmdldEZpbmFuY2VNb2RlbCk7XHJcbiAgICAgICAgICAgIHNlbGYuZXhwZW5zZXMgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouZXhwZW5zZXMsIGZpbmFuY2VTZXJ2aWNlLmdldEZpbmFuY2VNb2RlbCk7XHJcbiAgICAgICAgICAgIHNlbGYuY2F0ZWdvcmllcyA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5jYXRlZ29yaWVzLCBjYXRlZ29yeVNlcnZpY2UuZ2V0Q2F0ZWdvcnlNb2RlbCk7XHJcblxyXG4gICAgICAgICAgICBzZWxmLmdlbmVyYXRlREJNb2RlbCA9IGdlbmVyYXRlREJNb2RlbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldEVudGl0eU1vZGVsKG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEVudGl0eShvYmopO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0QWxsKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXBpQ2FsbGVyLmdldCgnL2VudGl0aWVzJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzYXZlRW50aXR5KGVudGl0eSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXBpQ2FsbGVyLnBvc3QoXCIvc2F2ZVwiLCB7IFwiZW50aXR5XCI6IGVudGl0eSB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIFwiZ2V0RW50aXR5TW9kZWxcIjogZ2V0RW50aXR5TW9kZWwsXHJcbiAgICAgICAgICAgIFwiZ2V0RW50aXR5VHlwZXNcIjogZ2V0RW50aXR5VHlwZXMsXHJcbiAgICAgICAgICAgIFwiZ2V0SW5mbHVlbmNlVHlwZXNcIjogZ2V0SW5mbHVlbmNlVHlwZXMsXHJcbiAgICAgICAgICAgIFwiZ2V0QWxsXCI6IGdldEFsbCxcclxuICAgICAgICAgICAgXCJzYXZlRW50aXR5XCI6IHNhdmVFbnRpdHlcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIFNlcnZpY2UuJGluamVjdCA9IFtcclxuICAgICAgICBcImNnQXBpQ2FsbGVyXCIsXHJcbiAgICAgICAgXCJmdW5kaW5nQ29ubmVjdGlvblNlcnZpY2VcIixcclxuICAgICAgICBcImNvbm5lY3Rpb25TZXJ2aWNlXCIsXHJcbiAgICAgICAgXCJmaW5hbmNlU2VydmljZVwiLFxyXG4gICAgICAgIFwibG9jYXRpb25TZXJ2aWNlXCIsXHJcbiAgICAgICAgXCJjYXRlZ29yeVNlcnZpY2VcIixcclxuICAgICAgICBcImNnVXRpbFNlcnZpY2VcIlxyXG4gICAgXTtcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKVxyXG4gICAgICAgIC5mYWN0b3J5KFwiZW50aXR5U2VydmljZVwiLCBTZXJ2aWNlKTtcclxuXHJcbn0pKGFuZ3VsYXIpO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNy8xMC8xNi5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIGNvbnRyb2xEZXBzID0gW1xyXG4gICAgICAgICdlbnRpdHlTZXJ2aWNlJyxcclxuICAgICAgICAnY29ubmVjdGlvblNlcnZpY2UnLFxyXG4gICAgICAgICckcm9vdFNjb3BlJyxcclxuICAgICAgICAnXycsXHJcbiAgICAgICAgJyRtb2RhbCcsXHJcbiAgICAgICAgY29udHJvbEN0cmxcclxuICAgIF07XHJcblxyXG4gICAgZnVuY3Rpb24gY29udHJvbEN0cmwoZW50aXR5U2VydmljZSwgY29ubmVjdGlvblNlcnZpY2UsICRyb290U2NvcGUsIF8sICRtb2RhbCkge1xyXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgdm0uZW50aXR5VHlwZXMgPSBlbnRpdHlTZXJ2aWNlLmdldEVudGl0eVR5cGVzKCk7XHJcbiAgICAgICAgdm0uY29ubmVjdGlvblR5cGVzID0gY29ubmVjdGlvblNlcnZpY2UuZ2V0Q29ubmVjdGlvblR5cGVzKCk7XHJcbiAgICAgICAgdm0uc2l6ZUJ5TGlzdCA9IFtcclxuICAgICAgICAgICAgeyduYW1lJzogJ0VtcGxveWVlcycsICd2YWx1ZSc6ICdlbXBsb3llZXMnfSxcclxuICAgICAgICAgICAgeyduYW1lJzogJ1R3aXR0ZXIgRm9sbG93ZXJzJywgJ3ZhbHVlJzogJ2ZvbGxvd2Vycyd9XHJcbiAgICAgICAgXTtcclxuICAgICAgICB2bS5zaXplQnkgPSAnZW1wbG95ZWVzJztcclxuICAgICAgICB2bS5zaG93VmlldyA9IHtcclxuICAgICAgICAgICAgJ05ldHdvcmsnOiB0cnVlLFxyXG4gICAgICAgICAgICAnTWFwJzogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZtLnN3aXRjaFZpZXcgPSBzd2l0Y2hWaWV3O1xyXG4gICAgICAgIHZtLmNoYW5nZVZpZXcgPSBmdW5jdGlvbiAodmlldykge1xyXG4gICAgICAgICAgICBfLmZvckVhY2goXy5rZXlzKHZtLnNob3dWaWV3KSwgZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHZtLnNob3dWaWV3W25hbWVdID0gdmlldyA9PT0gbmFtZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgndmlld0NoYW5nZScsIHZtLnNob3dWaWV3KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZtLnNob3dBYm91dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJG1vZGFsLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29udHJvbC9hYm91dC5odG1sJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdtb2RhbEN0cmwnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdm0udG9nZ2xlTm9kZSA9IGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgndG9nZ2xlTm9kZScsIHsnbmFtZSc6IHR5cGUsICdlbmFibGVkJzogdm0uZW50aXR5VHlwZXNbdHlwZV1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2bS50b2dnbGVMaW5rID0gZnVuY3Rpb24gKHR5cGUpIHtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCd0b2dnbGVMaW5rJywgeyduYW1lJzogdHlwZSwgJ2VuYWJsZWQnOiB2bS5jb25uZWN0aW9uVHlwZXNbdHlwZV1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2bS5jaGFuZ2VTaXplQnkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnY2hhbmdlU2l6ZUJ5Jywgdm0uc2l6ZUJ5KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGZ1bmN0aW9uIHN3aXRjaFZpZXcoKSB7XHJcbiAgICAgICAgICAgIHZtLmNoYW5nZVZpZXcoIXZtLnRvZ2dsZU5ldHdvcmsgPyAnTWFwJyA6ICdOZXR3b3JrJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2bS5jaGFuZ2VTaXplQnkoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcclxuICAgICAgICAuY29udHJvbGxlcignY29udHJvbEN0cmwnLCBjb250cm9sRGVwcyk7XHJcblxyXG59KShhbmd1bGFyKTtcclxuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGZ1bmN0aW9uIGRldGFpbHNDdHJsKCRzY29wZSwgXykge1xyXG4gICAgICAgICRzY29wZS5pdGVtc1Nob3duRGVmYXVsdCA9IHtcclxuICAgICAgICAgICAgJ2tleV9wZW9wbGUnOiAzLFxyXG4gICAgICAgICAgICAnZ3JhbnRzX2dpdmVuJzogMyxcclxuICAgICAgICAgICAgJ2dyYW50c19yZWNlaXZlZCc6IDMsXHJcbiAgICAgICAgICAgICdpbnZlc3RtZW50c19tYWRlJzogMyxcclxuICAgICAgICAgICAgJ2ludmVzdG1lbnRzX3JlY2VpdmVkJzogMyxcclxuICAgICAgICAgICAgJ2NvbGxhYm9yYXRpb25zJzogMyxcclxuICAgICAgICAgICAgJ2VtcGxveW1lbnRzJzogMyxcclxuICAgICAgICAgICAgJ3JlbGF0aW9ucyc6IDMsXHJcbiAgICAgICAgICAgICdkYXRhX2dpdmVuJzogMyxcclxuICAgICAgICAgICAgJ2RhdGFfcmVjZWl2ZWQnOiAzLFxyXG4gICAgICAgICAgICAncmV2ZW51ZXMnOiAzLFxyXG4gICAgICAgICAgICAnZXhwZW5zZXMnOiAzXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLml0ZW1zU2hvd24gPSBfLmNsb25lKCRzY29wZS5pdGVtc1Nob3duRGVmYXVsdCk7XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oJ2VudGl0eUNoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gUmVzZXQgaXRlbXMgc2hvd24gaW4gZGV0YWlscyBsaXN0LlxyXG4gICAgICAgICAgICAkc2NvcGUuaXRlbXNTaG93biA9IF8uY2xvbmUoJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkc2NvcGUuc2hvd01vcmUgPSBmdW5jdGlvbiAodHlwZSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuaXRlbXNTaG93blt0eXBlXSA9ICRzY29wZS5jdXJyZW50RW50aXR5W3R5cGVdLmxlbmd0aDtcclxuICAgICAgICB9O1xyXG4gICAgICAgICRzY29wZS5zaG93TGVzcyA9IGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5pdGVtc1Nob3duW3R5cGVdID0gJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0W3R5cGVdO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcclxuICAgICAgICAuY29udHJvbGxlcignZGV0YWlsc0N0cmwnLCBbJyRzY29wZScsIFwiX1wiLCBkZXRhaWxzQ3RybF0pO1xyXG59KShhbmd1bGFyKTtcclxuIiwiKGZ1bmN0aW9uIChhbmd1bGFyLCBkMywgTCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBkZXBlbmRlbmNpZXMgPSBbXHJcbiAgICAgICAgJyRzY29wZScsXHJcbiAgICAgICAgJyR0aW1lb3V0JyxcclxuICAgICAgICAnbGVhZmxldERhdGEnLFxyXG4gICAgICAgICdfJyxcclxuICAgICAgICAnJGZpbHRlcicsXHJcbiAgICAgICAgbWFwQ3RybFxyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBtYXBDdHJsKCRzY29wZSwgJHRpbWVvdXQsIGxlYWZsZXREYXRhLCBfLCAkZmlsdGVyKSB7XHJcblxyXG4gICAgICAgICRzY29wZS5vcHRpb25zID0ge1xyXG4gICAgICAgICAgICBjZW50ZXIgIDoge1xyXG4gICAgICAgICAgICAgICAgbGF0IDogMjAuMDAsXHJcbiAgICAgICAgICAgICAgICBsbmcgOiAtNDAuMDAsXHJcbiAgICAgICAgICAgICAgICB6b29tOiAzXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRlZmF1bHRzOiB7XHJcbiAgICAgICAgICAgICAgICB0aWxlTGF5ZXIgICAgICAgICA6ICdodHRwczovL2FwaS50aWxlcy5tYXBib3guY29tL3Y0L21hcGJveC5saWdodC97en0ve3h9L3t5fS5wbmc/YWNjZXNzX3Rva2VuPXBrLmV5SjFJam9pWkdGMmFXUnNjbTUwSWl3aVlTSTZJakEwTTJSa056TXpaV0ptTnpFek5HWXpNVGRoWVRFeFl6QXlabVU0WlRFMUluMC5UTllsRnRhMlZJdHJrbjRMMFo5QkpRJyxcclxuICAgICAgICAgICAgICAgIHRpbGVMYXllck9wdGlvbnMgIDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGRldGVjdFJldGluYTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICByZXVzZVRpbGVzICA6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgem9vbUNvbnRyb2wgICAgICAgOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGF0dHJpYnV0aW9uQ29udHJvbDogZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFNlZSBodHRwczovL2NvZGVyd2FsbC5jb20vcC9uZ2lzbWEvc2FmZS1hcHBseS1pbi1hbmd1bGFyLWpzXHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseSA9IGZ1bmN0aW9uIChmbikge1xyXG4gICAgICAgICAgICB2YXIgcGhhc2UgPSB0aGlzLiRyb290LiQkcGhhc2U7XHJcbiAgICAgICAgICAgIGlmIChwaGFzZSA9PT0gJyRhcHBseScgfHwgcGhhc2UgPT09ICckZGlnZXN0Jykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZuICYmICh0eXBlb2YoZm4pID09PSAnZnVuY3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZuKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRhcHBseShmbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjcmVhdGVQaWVDaGFydCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSAgID0gb3B0aW9ucy5kYXRhO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBpZSAgICA9IGQzLmxheW91dC5waWUoKS5zb3J0KG51bGwpLnZhbHVlKGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHZhciBhcmMgICAgPSBkMy5zdmcuYXJjKCkub3V0ZXJSYWRpdXMob3B0aW9ucy5yKS5pbm5lclJhZGl1cyhvcHRpb25zLnIgLSAxMCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gb3B0aW9ucy5yICsgb3B0aW9ucy5zdHJva2VXaWR0aDtcclxuICAgICAgICAgICAgICAgIHZhciB3ICAgICAgPSBjZW50ZXIgKiAyO1xyXG4gICAgICAgICAgICAgICAgdmFyIGggICAgICA9IHc7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3ZnICAgID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGQzLm5zLnByZWZpeC5zdmcsICdzdmcnKTtcclxuICAgICAgICAgICAgICAgIHZhciB2aXMgICAgPSBkMy5zZWxlY3Qoc3ZnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3BpZWNoYXJ0JylcclxuICAgICAgICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLCB3KVxyXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYXJjcyA9IHZpcy5zZWxlY3RBbGwoJy5hcmMnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKHBpZShkYXRhKSlcclxuICAgICAgICAgICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdhcmMnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBjZW50ZXIgKyAnLCcgKyBjZW50ZXIgKyAnKScpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHZhciBtYXAgPSBMLm1hcGJveC5tYXAoJ21hcCcsICdleGFtcGxlcy5tYXAtOWlqdWsyNHknLCB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgbWluWm9vbTogMSxcclxuICAgICAgICAgICAgICAgIC8vICAgICBtYXhab29tOiAyXHJcbiAgICAgICAgICAgICAgICAvLyB9KS5zZXRWaWV3KFs0MCwgLTc0LjUwXSwgOSk7XHJcblxyXG4gICAgICAgICAgICAgICAgYXJjcy5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgYXJjKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmRhdGEudHlwZSArICctYXJjJztcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBhcmNzLmFwcGVuZChcInN2Zzp0ZXh0XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRleHQoZnVuY3Rpb24gKGQsIGkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zLmNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcInhcIiwgLTQgKiBvcHRpb25zLmNvdW50LnRvU3RyaW5nKCkubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiZHlcIiwgNSlcclxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiYXJjVGV4dFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93LlhNTFNlcmlhbGl6ZXIgPyAobmV3IHdpbmRvdy5YTUxTZXJpYWxpemVyKCkpLnNlcmlhbGl6ZVRvU3RyaW5nKHN2ZylcclxuICAgICAgICAgICAgICAgICAgICA6IHN2Zy54bWwgPyBzdmcueG1sIDogJyc7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBsZWFmbGV0RGF0YS5nZXRNYXAoKS50aGVuKGZ1bmN0aW9uIChtYXApIHtcclxuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJlZEVudGl0aWVzID0gJHNjb3BlLmVudGl0aWVzO1xyXG5cclxuICAgICAgICAgICAgICAgIG1hcC5pbnZhbGlkYXRlU2l6ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIG5ldyBMLkNvbnRyb2wuWm9vbSh7cG9zaXRpb246ICd0b3ByaWdodCd9KS5hZGRUbyhtYXApO1xyXG4gICAgICAgICAgICAgICAgTC5jb250cm9sLmxvY2F0ZShcclxuICAgICAgICAgICAgICAgICAgICB7cG9zaXRpb246ICd0b3ByaWdodCcsIHNob3dQb3B1cDogZmFsc2UsIGljb246ICdmYSBmYS1sb2NhdGlvbi1hcnJvdyd9XHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRvKG1hcCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gY2x1c3Rlckljb24oY2x1c3Rlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZHJlbiAgICAgICA9IGNsdXN0ZXIuZ2V0QWxsQ2hpbGRNYXJrZXJzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvdGFsICAgICAgICAgID0gY2hpbGRyZW4ubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjbHVzdGVyTWFya2VycyA9IF8ucGx1Y2soY2hpbGRyZW4sICdvcHRpb25zJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50cyAgICAgICAgID0gXy5tYXAoXy5jb3VudEJ5KGNsdXN0ZXJNYXJrZXJzLCAndHlwZScpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChjb3VudCwgdHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyd0eXBlJzogdHlwZSwgJ3ZhbHVlJzogY291bnR9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByICAgICAgICAgICAgICA9IDI4O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdHJva2VXaWR0aCAgICA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGljb25EaW0gICAgICAgID0gKHIgKyBzdHJva2VXaWR0aCkgKiAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBodG1sICAgICAgICAgICA9IGNyZWF0ZVBpZUNoYXJ0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZGF0YTogY291bnRzLCByOiByLCBzdHJva2VXaWR0aDogc3Ryb2tlV2lkdGgsIGNvdW50OiB0b3RhbH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTC5EaXZJY29uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCAgICAgOiBodG1sLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdtYXJrZXItY2x1c3RlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb25TaXplIDogbmV3IEwucG9pbnQoaWNvbkRpbSwgaWNvbkRpbSlcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBtYXJrZXJJY29uICA9IHtcclxuICAgICAgICAgICAgICAgICAgICAnTm9uLVByb2ZpdCc6IEwuaWNvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25VcmwgOiAnaW1nL21hcmtlci1ub25wcm9mLnN2ZycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TaXplOiBbNjAsIDYwXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICdGb3ItUHJvZml0JzogTC5pY29uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblVybCA6ICdpbWcvbWFya2VyLXByb2Yuc3ZnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblNpemU6IFs2MCwgNjBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgJ0luZGl2aWR1YWwnOiBMLmljb24oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uVXJsIDogJ2ltZy9tYXJrZXItaW5kLnN2ZycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TaXplOiBbNjAsIDYwXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICdHb3Zlcm5tZW50JzogTC5pY29uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblVybCA6ICdpbWcvbWFya2VyLWdvdi5zdmcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZTogWzYwLCA2MF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbWFya2VycyA9IEwubWFya2VyQ2x1c3Rlckdyb3VwKHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3BpZGVyZnlPbk1heFpvb206IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd0NvdmVyYWdlT25Ib3ZlcjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNyZWF0ZUZ1bmN0aW9uOiBjbHVzdGVySWNvbixcclxuICAgICAgICAgICAgICAgICAgICBtYXhDbHVzdGVyUmFkaXVzOiAzMCxcclxuICAgICAgICAgICAgICAgICAgICBzcGlkZXJmeURpc3RhbmNlTXVsdGlwbGllcjogMS4zXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gb3V0ZXJMb29wKGVudGl0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGlubmVyTG9vcChsb2MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfLmV2ZXJ5KGxvYy5jb29yZGluYXRlcykpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvYy5jb29yZGluYXRlc1swXS50b0ZpeGVkKDUpID09PSAnNDAuNzgyMDAnICYmIGxvYy5jb29yZGluYXRlc1sxXS50b0ZpeGVkKDUpID09PSAnLTczLjgzMTcwJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jLmNvb3JkaW5hdGVzWzBdID0gNDAuNzcwNjU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2MuY29vcmRpbmF0ZXNbMV0gPSAtNzMuOTc0MDY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSBMLm1hcmtlcihsb2MuY29vcmRpbmF0ZXMsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IG1hcmtlckljb25bZW50aXR5LnR5cGVdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RpdGxlJzogZW50aXR5Lm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZW50aXR5X2lkJzogZW50aXR5LmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21lc3NhZ2UnOiBlbnRpdHkubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogZW50aXR5LnR5cGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcnMuYWRkTGF5ZXIobSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBfLmZvckVhY2goZW50aXR5LmxvY2F0aW9ucywgaW5uZXJMb29wKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk9yaWdpbmFsOiAlT1wiLCAkc2NvcGUuZW50aXRpZXMpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGaWx0ZXJlZDogJU9cIiwgZmlsdGVyZWRFbnRpdGllcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGZpbHRlcmVkRW50aXRpZXMsIG91dGVyTG9vcCk7XHJcbiAgICAgICAgICAgICAgICBtYXAuYWRkTGF5ZXIobWFya2Vycyk7XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gb25Mb2NhdGlvbkVycm9yKGxlYWZsZXRFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobGVhZmxldEVycm9yLm1lc3NhZ2UgKyBcIiAgJU9cIiwgbGVhZmxldEVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBtYXAub24oJ2xvY2F0aW9uZXJyb3InLCBvbkxvY2F0aW9uRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgLy8gbWFwLmxvY2F0ZSh7c2V0VmlldzogdHJ1ZSwgbWF4Wm9vbTogMTF9KTtcclxuICAgICAgICAgICAgICAgIG1hcmtlcnMub24oJ2NsaWNrJywgZnVuY3Rpb24gKG1hcmtlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zZXRFbnRpdHlJRChtYXJrZXIubGF5ZXIub3B0aW9ucy5lbnRpdHlfaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9ICRzY29wZS5jdXJyZW50RW50aXR5O1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgICA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5zZXR0aW5nc0VuYWJsZWQgJiYgJHNjb3BlLm1vYmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudG9nZ2xlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbWFwLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgICA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuJG9uKCdzZWxlY3RJdGVtJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb29yZGluYXRlcyA9ICRzY29wZS5jdXJyZW50RW50aXR5LmxvY2F0aW9ucy5sZW5ndGggPiAwID8gXy5wbHVjayhcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRFbnRpdHkubG9jYXRpb25zLCAnY29vcmRpbmF0ZXMnKSA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwLnNldFZpZXcoY29vcmRpbmF0ZXNbMF0sIDExKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXHJcblxyXG4gICAgICAgIC5jb250cm9sbGVyKCdtYXBDdHJsJywgZGVwZW5kZW5jaWVzKTtcclxufSkoYW5ndWxhciwgZDMsIEwpO1xyXG4iXX0=
