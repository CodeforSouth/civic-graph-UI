!function(e){"use strict";var t=["ui.bootstrap","leaflet-directive","ngAnimate","templateCache"];e.module("civic-graph",t)}(angular);
!function(t){"use strict";function a(){return{templateUrl:"js/analytic/analytics.html",restrict:"E",scope:{},controller:"analyticsCtrl"}}var c=[a];t.module("civic-graph").directive("analytics",c)}(angular);
!function(o){"use strict";function r(){return{templateUrl:"js/control/controls.html",restrict:"E",scope:{toggleNetwork:"="},controller:"controlCtrl",controllerAs:"control",bindToController:{minConnections:"="}}}var t=[r];o.module("civic-graph").directive("control",t)}(angular);
!function(t){"use strict";function e(){return{templateUrl:"js/edit-entity/edit.html",restrict:"E",scope:{entity:"=",entities:"=",isOpen:"="},controller:"editCtrl"}}var i=[e];t.module("civic-graph").directive("editEntity",i)}(angular);
!function(i,t){"use strict";function s(i){function s(){var i=t(this);i.css("height","55vh")}function c(){var i=t(this);window.innerHeight/3>parseInt(i.css("height"))?i.css("height","55vh"):i.css("height","30vh")}var e;i.mobile&&(e=t("#details-panel"),e.css("height","30vh"),e.scrollTop(0),e.scroll(s),e.click(c))}function c(){return{restrict:"A",link:s}}i.module("civic-graph").directive("addMobileEvents",[c])}(angular,$);
!function(o){"use strict";function c(o,c){o.closeWindow=function(){c.close()}}o.module("civic-graph").controller("modalCtrl",["$scope","$modalInstance",c])}(angular);
!function(t){"use strict";t.module("civic-graph").constant("_",window._).constant("config",{apiHost:"https://api.civicgraph.io/"}).config(["$locationProvider","$httpProvider","$compileProvider",function(t,o,i){t.html5Mode(!0),o.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",i.debugInfoEnabled(!0)}]).filter("thousandSuffix",function(){return function(t,o){var i,n=["k","M","G","T","P","E"];return window.isNaN(t)?null:t<1e3?t:(i=Math.floor(Math.log(t)/Math.log(1e3)),(t/Math.pow(1e3,i)).toFixed(o)+n[i-1])}})}(angular);
!function(t){"use strict";function i(t,i,e,n,o,a){t.entities=[],t.searchItems=null,t.categories=[],t.currentLocation=null,t.clickedLocation={},t.clickedLocation.location=null,t.clickedEntity={},t.clickedEntity.entity=null,t.editing=!1,t.actions={interacted:!1},t.showsearchMB=!1,t.showAnalytics=!1,t.entityTypes=n.getEntityTypes(),t.connectionTypes=o.getConnectionTypes(),t.status={isNetworkShown:!0,license:!0,networkLoading:!0},t.toggleAnalytics=function(){t.showAnalytics=!t.showAnalytics},this.minConnections=t.minConnections=2;var s=this;t.$watch("minConnections",function(){t.$broadcast("triggerNetworkDraw")}),t.connectionChange=function(){console.log(s.minConnections),t.minConnections=s.minConnections,t.$broadcast("triggerNetworkDraw")},t.hydePartials=function(i){"search"===i?(t.editing=!1,t.settingsEnabled=!1):"settings"===i?(t.editing=!1,t.showsearchMB=!1):"edit"===i?(t.settingsEnabled=!1,t.showsearchMB=!1):(t.editing=!1,t.settingsEnabled=!1,t.showsearchMB=!1)},t.showSearch=function(){t.hydePartials("search"),t.showsearchMB=!t.showsearchMB,t.status.license=!1},t.toggleSettings=function(){t.hydePartials("settings"),t.settingsEnabled=!t.settingsEnabled},t.startEdit=function(i){t.currentEntity=i,t.mobile&&t.hydePartials("edit"),t.editing=!0},t.switchView=function(){t.status.isNetworkShown=!t.status.isNetworkShown,t.status.isNetworkShown&&t.$broadcast("triggerNetworkDraw")},window.mobilecheck=function(){var t=!1,i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,e=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i;return function(n){(i.test(n)||e.test(n.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},t.mobile=window.mobilecheck(),t.settingsEnabled=!t.mobile,setTimeout(function(){i.get(a.apiHost+"api/entities").success(function(i){t.entities=i.nodes;var n=e.uniq(e.pluck(e.flatten(e.pluck(t.entities,"locations")),"locality")),o=e.map(n,function(i){var n=e.filter(t.entities,e.flow(e.property("locations"),e.partialRight(e.any,{locality:i})));return{name:i,type:"location",entities:n,dict:e.zipObject(e.pluck(n,"name"),e.pluck(n,"index"))}});t.searchItems=o.concat(t.entities),t.overviewUrl="js/overview/overview.html",t.$broadcast("triggerNetworkDraw")})},100),t.overviewUrl=null,t.setEntity=function(i){t.currentLocation=null,t.currentEntity=i,t.editing&&t.stopEdit(),t.$broadcast("entityChange")},t.setEntityID=function(i){t.setEntity(e.find(t.entities,{id:i}))},t.setLocation=function(i){t.currentLocation=i,t.editing&&t.stopEdit(),t.$broadcast("itemChange")},t.selectItem=function(i){"location"===i.type?t.setLocation(i):t[i%1===0?"setEntityID":"setEntity"](i),t.$broadcast("selectItem",i)},t.$on("setCurrentEntity",function(i,e){t.currentEntity=e.value}),t.$on("setCurrentLocation",function(i,e){t.currentLocation=e.value}),t.setEntities=function(i){t.entities=i},t.stopEdit=function(){t.editing=!1},t.$on("editEntitySuccess",function(i){t.setEntities(i.nodes),t.$broadcast("triggerNetworkDraw")}),t.animationsEnabled=!0}var e=["$scope","$http","_","entityService","connectionService","config",i];t.module("civic-graph").controller("homeCtrl",e)}(angular);
!function(i){"use strict";var a=[];i.module("civic-graph").directive("map",a)}(angular);
!function(r){"use strict";function t(){return{restrict:"E",templateUrl:"js/network/network.html",controller:"networkCtrl"}}var e=[t];r.module("civic-graph").directive("network",e)}(angular);
!function(e){"use strict";e.module("civic-graph").directive("input",function(){return{restict:"E",require:"?ngModel",link:function(e,r,t,i){"type"in t&&"range"===t.type.toLowerCase()&&i.$parsers.push(parseFloat)}}})}(angular);
!function(e){"use strict";function t(e,t){e.categorizedEntities={},t.forEach(t.keys(e.entityTypes),function(i){e.categorizedEntities[i]=t.filter(e.entities,{type:i})})}e.module("civic-graph").controller("overviewCtrl",["$scope","_",t])}(angular);
!function(c){"use strict";function n(c){}c.module("civic-graph").controller("analyticsCtrl",["$scope",n])}(angular);
!function(e){"use strict";function o(e,o,n,t,i){function c(){a.changeView(a.toggleNetwork?"Network":"Map")}var a=this;a.entityTypes=e.getEntityTypes(),a.connectionTypes=o.getConnectionTypes(),a.sizeByList=[{name:"Employees",value:"employees"},{name:"Twitter Followers",value:"followers"}],a.sizeBy="employees",a.showView={Network:!0,Map:!1},a.switchView=c,a.changeView=function(e){t.forEach(t.keys(a.showView),function(o){a.showView[o]=e===o}),n.$broadcast("viewChange",a.showView)},a.showAbout=function(){i.open({animation:!1,templateUrl:"control/about.html",controller:"modalCtrl"})},a.toggleNode=function(e){n.$broadcast("toggleNode",{name:e,enabled:a.entityTypes[e]})},a.toggleLink=function(e){n.$broadcast("toggleLink",{name:e,enabled:a.connectionTypes[e]})},a.changeSizeBy=function(){n.$broadcast("changeSizeBy",a.sizeBy)},a.changeSizeBy()}var n=["entityService","connectionService","$rootScope","_","$modal",o];e.module("civic-graph").controller("controlCtrl",n)}(angular);
!function(e){"use strict";function n(e,n){e.itemsShownDefault={key_people:3,grants_given:3,grants_received:3,investments_made:3,investments_received:3,collaborations:3,employments:3,relations:3,data_given:3,data_received:3,revenues:3,expenses:3},e.itemsShown=n.clone(e.itemsShownDefault),e.$on("entityChange",function(){e.itemsShown=n.clone(e.itemsShownDefault)}),e.showMore=function(n){e.itemsShown[n]=e.currentEntity[n].length},e.showLess=function(n){e.itemsShown[n]=e.itemsShownDefault[n]}}e.module("civic-graph").controller("detailsCtrl",["$scope","_",n])}(angular);
!function(t){"use strict";function e(t){return void 0!==t&&null!==t}function i(i,n,o,s,c,a,r){function d(){var t,e,n,o;for(e in i.categories)if(i.categories.hasOwnProperty(e)){t=i.categories[e];for(n in i.editEntity.categories)i.editEntity.categories.hasOwnProperty(n)&&(o=i.editEntity.categories[n],t.id===o.id&&(t.enabled=o.enabled))}}i.isEditing=!1,i.editEntity=c.getEntityModel(i.entity),i.entityTypes=c.getEntityTypes(),i.influenceTypes=c.getInfluenceTypes();var u;i.categories=[],i.addressSearch=function(t){return n.jsonp("https://dev.virtualearth.net/REST/v1/Locations",{params:{query:t,key:"Ai58581yC-Sr7mcFbYTtUkS3ixE7f6ZuJnbFJCVI4hAtW1XoDEeZyidQz2gLCCyD",jsonp:"JSON_CALLBACK",include:"ciso2"}}).then(function(t){if(e(t.data.resourceSets)&&t.data.resourceSets.length>0)return t.data.resourceSets[0].resources})},i.toggleCategory=function(t){if(0===i.editEntity.categories.length)i.editEntity.categories.push(t);else{var e=!1;for(var n in i.editEntity.categories)if(i.editEntity.categories.hasOwnProperty(n)){var o=i.editEntity.categories[n];if(o.id===t.id){e=!0,o.enabled=t.enabled;break}}e||i.editEntity.categories.push(t)}},i.setLocation=function(t,n){i.addressSearch(t.formattedAddress).then(function(o){var s=o[0],c=s.address,a=s.point;i.addLocation(n),t.address_line=e(c.addressLine)?c.addressLine:"",t.locality=e(c.locality)?c.locality:"",t.district=e(c.adminDistrict)?c.adminDistrict:"",t.country=e(c.countryRegion)?c.countryRegion:null,t.country_code=e(c.countryRegionIso2)?c.countryRegionIso2:"",t.coordinates=e(a.coordinates)?a.coordinates:null,t.postal_code=e(c.postalCode)?c.postalCode:null})},i.addLocation=function(t){t&&i.editEntity.locations.push(a.getLocationModel())},i.addKeyPerson=function(){s.some(i.editEntity.key_people,{name:"",id:null})||i.editEntity.key_people.push({name:"",id:null})},i.setFundingConnection=function(t,e){e.entity_id=t.id},i.addFundingConnection=function(t){s.some(t,{entity:""})||t.push({entity:"",amount:null,year:null,id:null})},i.setConnection=function(t,e){e.entity_id=t.id},i.addConnection=function(t){s.some(t,{entity:"",id:null})||t.push({entity:"",id:null,details:null})},i.addFinance=function(t){s.every(t,function(t){return t.amount>0&&t.year>1750})&&t.push({amount:null,year:null,id:null})},i.save=function(){i.isSaving=!0,console.log(i.editEntity.generateDBModel()),n.post(r.apiHost+"api/save",{entity:i.editEntity.generateDBModel()}).success(function(t){i.isSaving=!1,i.$emit("editEntitySuccess",t),i.cancelEdit()}).error(function(){i.isError=!0,o(function(){i.isError=!1},2e3)})},i.cancelEdit=function(){i.isOpen=!1},i.$watch("entity",function(n,o){t.equals(n,o)||(console.log(i.entity),i.editEntity=c.getEntityModel(n),i.categories=t.copy(u),d(),i.isEditing=e(i.editEntity.id))}),n.get(r.apiHost+"api/categories").success(function(e){u=e.categories,i.categories=t.copy(u)})}var n=["$scope","$http","$timeout","_","entityService","locationService","config",i];t.module("civic-graph").controller("editCtrl",n)}(angular);
!function(n){"use strict";function e(){function n(n){return void 0!==n&&null!==n}function e(e){var i=n(e)?e:{};this.name=n(i.name)?i.name:null,this.enabled=!n(i.enable)||i.enabled,this.id=n(i.id)?i.id:null}this.getCategoryModel=function(n){return new e(n)}}var i=[e];n.module("civic-graph").service("categoryService",i)}(angular);
!function(n){"use strict";function t(n){return void 0!==n&&null!==n}function i(){function n(n){var i=t(n);this.entity=i&&t(n.entity)?n.entity:null,this.id=i&&t(n.id)?n.id:null,this.details=i&&t(n.details)?n.details:null,this.name=i&&t(n.name)?n.name:null,this.entity_id=i&&t(n.entity_id)?n.entity_id:null}this.getConnectionModel=function(t){return new n(t)},this.getConnectionTypes=function(){return l}}var e=[i],l={Funding:!0,Data:!0,Employment:!0,Collaboration:!0};n.module("civic-graph").service("connectionService",e)}(angular);
!function(e){"use strict";function n(n,t,i,o,s){function p(e){return void 0!==e&&null!==e}function r(n,t){if(!p(n)&&!e.isArray(n))return[t()];var i,o,s=[];for(i in n)n.hasOwnProperty(i)&&(o=n[i],e.isObject(o)&&s.push(t(o)));return s.push(t()),s}function a(e){var l=this,c=p(e)?e:{};this.id=p(c.id)?c.id:null,this.name=p(c.name)?c.name:null,this.locations=r(c.locations,o.getLocationModel),this.influence=p(c.influence)?c.influence:null,this.grants_received=r(c.grants_received,n.getFundingConnectionModel),this.investments_received=r(c.investments_received,n.getFundingConnectionModel),this.grants_given=r(c.grants_given,n.getFundingConnectionModel),this.investments_made=r(c.investments_made,n.getFundingConnectionModel),this.data_given=r(c.data_given,t.getConnectionModel),this.data_received=r(c.data_received,t.getConnectionModel),this.collaborations=r(c.collaborations,t.getConnectionModel),this.key_people=r(c.key_people,t.getConnectionModel),this.employments=r(c.employments,t.getConnectionModel),this.revenues=r(c.revenues,i.getFinanceModel),this.expenses=r(c.expenses,i.getFinanceModel),this.categories=r(c.categories,s.getCategoryModel),this.type=p(c.type)?c.type:null,this.nickname=p(c.nickname)?c.nickname:null,this.url=p(c.url)?c.url:null,this.twitter_handle=p(c.twitter_handle)?c.twitter_handle:null,this.employees=p(c.employees)?c.employees:null,this.generateDBModel=function(){var e=new a(l);return e.locations.pop(),e.locations.pop(),e.grants_received.pop(),e.grants_received.pop(),e.grants_given.pop(),e.grants_given.pop(),e.investments_received.pop(),e.investments_received.pop(),e.investments_made.pop(),e.investments_made.pop(),e.data_given.pop(),e.data_given.pop(),e.data_received.pop(),e.data_received.pop(),e.collaborations.pop(),e.collaborations.pop(),e.key_people.pop(),e.key_people.pop(),e.employments.pop(),e.employments.pop(),e.revenues.pop(),e.revenues.pop(),e.expenses.pop(),e.expenses.pop(),e.categories.pop(),e.categories.pop(),e.description="",console.log(e),e}}var l={Government:!0,"For-Profit":!0,"Non-Profit":!0,Individual:!0},c=["Local","National","Global"];this.getEntityModel=function(e){return new a(e)},this.getEntityTypes=function(){return l},this.getInfluenceTypes=function(){return c}}var t=["fundingConnectionService","connectionService","financeService","locationService","categoryService",n];e.module("civic-graph").service("entityService",t)}(angular);
!function(n){"use strict";function i(n){return void 0!==n&&null!==n}function t(){function n(n){var t=i(n)?n:{};this.amount=i(t.amount)&&t.amount>=0?t.amount:0,this.year=i(t.year)&&t.year>=1750?t.year:null,this.id=i(t.id)?t.id:null}this.getFinanceModel=function(i){return new n(i)}}var e=[t];n.module("civic-graph").service("financeService",e)}(angular);
!function(n){"use strict";function i(n){return void 0!==n&&null!==n}function t(){function n(n){var t=i(n);this.entity=t&&i(n.entity)?n.entity:"",this.amount=t&&i(n.amount)?n.amount:null,this.year=t&&i(n.year)?n.year:null,this.id=t&&i(n.id)?n.id:null}this.getFundingConnectionModel=function(i){return new n(i)}}var e=[t];n.module("civic-graph").service("fundingConnectionService",e)}(angular);
!function(t){"use strict";function i(){function t(t){return void 0!==t&&null!==t}function i(i){var s=t(i)?i:{};this.address_line=t(s.address_line)?s.address_line:null,this.locality=t(s.locality)?s.locality:null,this.district=t(s.district)?s.district:null,this.postal_code=t(s.postal_code)?s.postal_code:null,this.country=t(s.country)?s.country:null,this.country_code=t(s.country_code)?s.country_code:null,this.coordinates=t(s.coordinates)?s.coordinates:null,this.id=t(s.id)?s.id:null,this.formattedAddress=(t(this.address_line)?this.address_line+" ":"")+(t(this.locality)?this.locality+", ":"")+(t(this.country_code)?this.country_code+" ":"")+(t(this.postal_code)?this.postal_code:""),this.formattedAddress=this.formattedAddress.trim()}this.getLocationModel=function(t){return new i(t)}}var s=[i];t.module("civic-graph").service("locationService",s)}(angular);
!function(t,e,n){"use strict";function i(t,i,o,r,a){t.options={center:{lat:20,lng:-40,zoom:3},defaults:{tileLayer:"https://api.tiles.mapbox.com/v4/mapbox.light/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZGF2aWRscm50IiwiYSI6IjA0M2RkNzMzZWJmNzEzNGYzMTdhYTExYzAyZmU4ZTE1In0.TNYlFta2VItrkn4L0Z9BJQ",tileLayerOptions:{detectRetina:!0,reuseTiles:!1},zoomControl:!1,attributionControl:!1}},i(function(){var i=function(t){var n=t.data,i=e.layout.pie().sort(null).value(function(t){return t.value}),o=e.svg.arc().outerRadius(t.r).innerRadius(t.r-10),r=t.r+t.strokeWidth,a=2*r,c=a,l=document.createElementNS(e.ns.prefix.svg,"svg"),s=e.select(l).data(n).attr("class","piechart").attr("width",a).attr("height",c),u=s.selectAll(".arc").data(i(n)).enter().append("g").attr("class","arc").attr("transform","translate("+r+","+r+")");return u.append("path").attr("d",o).attr("class",function(t){return t.data.type+"-arc"}),u.append("svg:text").text(function(e,n){if(0===n)return t.count}).attr("x",-4*t.count.toString().length).attr("dy",5).attr("class","arcText"),window.XMLSerializer?(new window.XMLSerializer).serializeToString(l):l.xml?l.xml:""};o.getMap().then(function(e){function o(t){var e=t.getAllChildMarkers(),o=e.length,a=r.pluck(e,"options"),c=r.map(r.countBy(a,"type"),function(t,e){return{type:e,value:t}}),l=28,s=1,u=2*(l+s),d=i({data:c,r:l,strokeWidth:s,count:o});return new n.DivIcon({html:d,className:"marker-cluster",iconSize:new n.point(u,u)})}function c(t){function e(e){if(r.every(e.coordinates)){"40.78200"===e.coordinates[0].toFixed(5)&&"-73.83170"===e.coordinates[1].toFixed(5)&&(e.coordinates[0]=40.77065,e.coordinates[1]=-73.97406);var i=n.marker(e.coordinates,{icon:u[t.type],title:t.name,entity_id:t.id,message:t.name,type:t.type});d.addLayer(i)}}r.forEach(t.locations,e)}function l(t){console.error(t.message+"  %O",t)}var s=a("filter")(t.entities,function(t){return t.collaborations.length>0});e.invalidateSize(),new n.Control.Zoom({position:"topright"}).addTo(e),n.control.locate({position:"topright",showPopup:!1,icon:"fa fa-location-arrow"}).addTo(e);var u={"Non-Profit":n.icon({iconUrl:"img/marker-nonprof.svg",iconSize:[60,60]}),"For-Profit":n.icon({iconUrl:"img/marker-prof.svg",iconSize:[60,60]}),Individual:n.icon({iconUrl:"img/marker-ind.svg",iconSize:[60,60]}),Government:n.icon({iconUrl:"img/marker-gov.svg",iconSize:[60,60]})},d=n.markerClusterGroup({spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,iconCreateFunction:o,maxClusterRadius:30,spiderfyDistanceMultiplier:1.3});console.log("Original: %O",t.entities),console.log("Filtered: %O",s),r.forEach(s,c),e.addLayer(d),e.on("locationerror",l),d.on("click",function(e){t.setEntityID(e.layer.options.entity_id),t.clickedEntity.entity=t.currentEntity,t.actions.interacted=!0,t.settingsEnabled&&t.mobile&&t.toggleSettings(),t.safeApply()}),e.on("click",function(){t.clickedEntity.entity=null,t.actions.interacted=!0,t.safeApply()}),t.$on("selectItem",function(){var n=t.currentEntity.locations.length>0?r.pluck(t.currentEntity.locations,"coordinates"):null;n.length>0&&e.setView(n[0],11),t.actions.interacted=!0,t.safeApply()})})})}var o=["$scope","$timeout","leafletData","_","$filter",i];t.module("civic-graph").controller("mapCtrl",o)}(angular,d3,L);
!function(n,t){"use strict";function e(n){return void 0!==n&&null!==n}function i(n,t,i,c,o){function r(r){t.get(o.apiHost+"api/connections").success(function(t){var o=c("filter")(n.entities,function(t){return t.collaborations.length>=n.minConnections}),r={};i.forEach(i.keys(t.connections),function(n){r[n]=[]}),i.forEach(t.connections,function(n,t){i.forEach(n,function(n){var c=i.find(o,{id:n.source}),a=i.find(o,{id:n.target});e(c)&&e(a)&&r[t].push({source:c,target:a})})}),i.forEach(i.keys(n.entityTypes),function(t){var e=i.takeRight(i.sortBy(i.filter(n.entities,{type:t}),"collaborations.length"),5);i.forEach(e,function(n){n.wellconnected=!0})}),o=i.sortBy(o,function(n){return n.wellconnected?1:0}),a(o,r)})}n.isLoading=!0,n.connections={},r(),n.safeApply=function(n){var t=this.$root.$$phase;"$apply"===t||"$digest"===t?n&&"function"==typeof n&&n():this.$apply(n)},n.$on("triggerNetworkDraw",r),n.$on("viewChange",function(n){console.log(n)});var a=function(t,c){n.isLoading=!1;var o=d3.select("#network");o.selectAll("*").remove();var r=o.node().getBoundingClientRect(),a=r.height,s=r.width,l=6,u=7,d={Individual:{x:1,y:1},"For-Profit":{x:1,y:-1},"Non-Profit":{x:-1,y:1},Government:{x:-1,y:-1}},f=10,y=50,p=d3.max(t,function(n){return parseInt(n.employees)}),k=d3.max(t,function(n){return parseInt(n.followers)}),g={employees:d3.scale.sqrt().domain([10,p]).range([f,y]),followers:d3.scale.sqrt().domain([10,k]).range([f,y])},m={},h=d3.layout.force().size([s,a]).nodes(t).links(i.flatten(i.values(c))).charge(function(n){return n.employees?-2*g.employees(n.employees):-20}).linkStrength(0).linkDistance(50);i.forEach(c,function(n,t){m[t]=o.selectAll(".link ."+t+"-link").data(n).enter().append("line").attr("class",function(n){return e(n.source)&&e(n.target)?(n.type=t,"link "+t+"-link "+n.source.type+"-link "+n.target.type+"-link"):""})});var x=o.selectAll(".node").data(t).enter().append("g").attr("class",function(n){return"node "+n.type+"-node"}).call(h.drag);x.append("circle").attr("r",function(n){return n.employees?g.employees(n.employees):u}),x.append("text").text(function(n){return n.nickname?n.nickname:n.name}).attr("dx",function(){return-.065*this.getComputedTextLength()/2+"em"}).attr("dy",function(){return.08*this.parentNode.getBBox().height/2+.5+"em"}),h.on("tick",function(n){var e=l*n.alpha;i.forEach(t,function(n){n.x&&d[n.type]&&(n.x+=d[n.type].x*e,n.y+=d[n.type].y*e,n.x=Math.max(y,Math.min(s-y,n.x)),n.y=Math.max(y,Math.min(a-y,n.y)))}),i.forEach(m,function(n){n.attr("x1",function(n){return n.source.x}).attr("y1",function(n){return n.source.y}).attr("x2",function(n){return n.target.x}).attr("y2",function(n){return n.target.y})}),x.attr("transform",function(n){return"translate("+n.x+","+n.y+")"})});var E=function(n){requestAnimationFrame(function t(){for(var e=0;e<n;e++)h.tick();h.alpha()>0&&requestAnimationFrame(t)})};n.mobile||E(7),h.start();var v={};i.forEach(m,function(n){i.forEach(n[0],function(n){var t=n.__data__.source,e=n.__data__.target;v[t.index+","+e.index]=!0,v[e.index+","+t.index]=!0})});var L,A=function(n,t){return v[n.index+","+t.index]||n.index===t.index},T=function(n){x.classed("focused",function(t){return A(n,t)}).classed("unfocused",function(t){return!A(n,t)}),i.forEach(m,function(t){t.classed("focused",function(t){return n.index===t.source.index||n.index===t.target.index}).classed("unfocused",function(t){return!(n.index===t.source.index||n.index===t.target.index)})})},w=function(t){n.currentEntity!==t&&n.setEntity(t),n.safeApply(),T(t)},$=function(t){x.classed("focused",!1).classed("unfocused",!1),i.forEach(m,function(n){n.classed("focused",!1).classed("unfocused",!1)}),t.fixed=!1,n.clickedEntity.entity&&h.resume()},b=function(t){n.clickedEntity.entity||n.editing||n.currentLocation||(L=setTimeout(function(){w(t)},500)),n.actions.interacted=!0,n.safeApply()},_=function(t){n.clickedEntity.entity||n.currentLocation||($(t),clearTimeout(L)),n.actions.interacted=!0,n.safeApply()},B=function(t){n.safeApply(),x.classed("focused",function(n){return n.name in t.dict}).classed("unfocused",function(n){return!(n.name in t.dict)}),i.forEach(m,function(n){n.classed("focused",function(n){return n.source.name in t.dict&&n.target.name in t.dict}).classed("unfocused",function(n){return!(n.source.name in t.dict&&n.target.name in t.dict)})})},P=function(){x.classed("focused",!1).classed("unfocused",!1),i.forEach(m,function(n){n.classed("focused",!1).classed("unfocused",!1)}),n.clickedLocation.location&&h.resume()},C=function(t){n.showLicense=!1,n.clickedEntity.entity&&($(n.clickedEntity.entity),n.clickedEntity.entity=null),n.clickedLocation.location!==t&&(P(n.clickedLocation.location),n.clickedLocation.location=t,B(t)),d3.event&&d3.event.stopPropagation(),n.actions.interacted=!0,n.safeApply()},q=function(t){n.showLicense=!1,e(n.clickedLocation)&&(e(n.clickedLocation.location)&&(P(n.clickedLocation.entity),n.clickedLocation.location=null),n.clickedEntity.entity===t?n.clickedEntity.entity=null:(n.clickedEntity.entity&&$(n.clickedEntity.entity),n.clickedEntity.entity=t,w(t))),d3.event&&d3.event.stopPropagation(),n.actions.interacted=!0,n.safeApply()},I=function(){e(n.clickedLocation)&&(e(n.clickedLocation.location)&&($(n.clickedLocation.location),n.clickedLocation.location=null),e(n.clickedEntity.entity)&&($(n.clickedEntity.entity),n.clickedEntity.entity=null)),n.safeApply()},M=function(t){t.fixed?$(t):(t.x=s/2,t.y=a/2,t.px=s/2,t.py=a/2,t.fixed=!0,n.clickedEntity.entity=t),n.actions.interacted=!0,n.safeApply()};x.on("mouseover",b),x.on("mouseout",_),x.on("click",q),x.on("dblclick",M),o.on("click",I),x.classed("wellconnected",function(n){return n.hasOwnProperty("wellconnected")}),n.$on("changeSizeBy",function(n,t){o.selectAll("circle").transition().duration(250).attr("r",function(n){return n[t]?g[t](n[t]):u})}),n.$on("toggleLink",function(t,e){i.map(n.entityTypes,function(t,e){o.selectAll("."+e+"-link").classed({visible:function(t){return!n.connectionTypes[t.type]||n.entityTypes[t.source.type]&&n.entityTypes[t.target.type]},hidden:function(t){return!n.connectionTypes[t.type]||!n.entityTypes[t.source.type]||!n.entityTypes[t.target.type]}})})}),n.$on("toggleNode",function(t,e){o.selectAll("."+e.name+"-node").classed({visible:e.enabled,hidden:!e.enabled}),o.selectAll("."+e.name+"-link").classed({visible:function(t){return n.connectionTypes[t.type]&&n.entityTypes[t.source.type]&&n.entityTypes[t.target.type]},hidden:function(t){return!n.connectionTypes[t.type]||!n.entityTypes[t.source.type]||!n.entityTypes[t.target.type]}})}),n.$on("selectItem",function(t,e){"location"===e.type?C(n.currentLocation):q(n.currentEntity)})}}var c=["$scope","$http","_","$filter","config",i];n.module("civic-graph").controller("networkCtrl",c)}(angular,RTP);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNpdmljLWdyYXBoLm1vZHVsZS5qcyIsImFuYWx5dGljL2FuYWx5dGljc0RpcmVjdGl2ZS5qcyIsImNvbnRyb2wvY29udHJvbERpcmVjdGl2ZS5qcyIsImVkaXQtZW50aXR5L2VkaXRFbnRpdHlEaXJlY3RpdmUuanMiLCJleHRyYS9hZGRNb2JpbGVFdmVudHMuanMiLCJleHRyYS9tb2RhbEN0cmwuanMiLCJtYWluL2FwcC5qcyIsIm1haW4vaG9tZUN0cmwuanMiLCJtYXAvbWFwRGlyZWN0aXZlLmpzIiwibmV0d29yay9uZXR3b3JrRGlyZWN0aXZlLmpzIiwibmV0d29yay9zbGlkZXJCYXIuanMiLCJvdmVydmlldy9vdmVydmlld0N0cmwuanMiLCJhbmFseXRpYy9jb250cm9sbGVyL2FuYWx5dGljc0N0cmwuanMiLCJjb250cm9sL2NvbnRyb2xsZXIvY29udHJvbEN0cmwuanMiLCJkZXRhaWwvY29udHJvbGxlci9kZXRhaWxzQ3RybC5qcyIsImVkaXQtZW50aXR5L2NvbnRyb2xsZXIvZWRpdEN0cmwuanMiLCJlZGl0LWVudGl0eS9zZXJ2aWNlL2NhdGVnb3J5U2VydmljZS5qcyIsImVkaXQtZW50aXR5L3NlcnZpY2UvY29ubmVjdGlvblNlcnZpY2UuanMiLCJlZGl0LWVudGl0eS9zZXJ2aWNlL2VudGl0eVNlcnZpY2UuanMiLCJlZGl0LWVudGl0eS9zZXJ2aWNlL2ZpbmFuY2VTZXJ2aWNlLmpzIiwiZWRpdC1lbnRpdHkvc2VydmljZS9mdW5kaW5nQ29ubmVjdGlvblNlcnZpY2UuanMiLCJlZGl0LWVudGl0eS9zZXJ2aWNlL2xvY2F0aW9uU2VydmljZS5qcyIsIm1hcC9jb250cm9sbGVyL21hcEN0cmwuanMiLCJuZXR3b3JrL2NvbnRyb2xsZXIvbmV0d29ya0N0cmwuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1haW5EZXBlbmRlbmNpZXMiLCJtb2R1bGUiLCJhbmFseXRpY3NEaXJlY3RpdmUiLCJ0ZW1wbGF0ZVVybCIsInJlc3RyaWN0Iiwic2NvcGUiLCJjb250cm9sbGVyIiwiYW5hbHl0aWNzRGVwZW5kZW5jaWVzIiwiZGlyZWN0aXZlIiwiY29udHJvbERpcmVjdGl2ZSIsInRvZ2dsZU5ldHdvcmsiLCJjb250cm9sbGVyQXMiLCJiaW5kVG9Db250cm9sbGVyIiwibWluQ29ubmVjdGlvbnMiLCJjb250cm9sRGVwZW5kZW5jaWVzIiwiZWRpdEVudGl0eURpcmVjdGl2ZSIsImVudGl0eSIsImVudGl0aWVzIiwiaXNPcGVuIiwiZWRpdEVudGl0eURlcGVuZGVuY2llcyIsIiQiLCJsaW5rRnVuY3Rpb24iLCJzY3JvbGwiLCJzZWxmIiwidGhpcyIsImNzcyIsImNsaWNrIiwid2luZG93IiwiaW5uZXJIZWlnaHQiLCJwYXJzZUludCIsImRldGFpbHNQYW5lbCIsIm1vYmlsZSIsInNjcm9sbFRvcCIsImFkZE1vYmlsZUV2ZW50cyIsImxpbmsiLCJtb2RhbEN0cmwiLCIkc2NvcGUiLCIkbW9kYWxJbnN0YW5jZSIsImNsb3NlV2luZG93IiwiY2xvc2UiLCJjb25zdGFudCIsIl8iLCJhcGlIb3N0IiwiY29uZmlnIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCIkaHR0cFByb3ZpZGVyIiwiJGNvbXBpbGVQcm92aWRlciIsImh0bWw1TW9kZSIsImRlZmF1bHRzIiwiaGVhZGVycyIsImNvbW1vbiIsImRlYnVnSW5mb0VuYWJsZWQiLCJmaWx0ZXIiLCJpbnB1dCIsImRlY2ltYWxzIiwiZXhwIiwic3VmZml4ZXMiLCJpc05hTiIsIk1hdGgiLCJmbG9vciIsImxvZyIsInBvdyIsInRvRml4ZWQiLCJob21lQ3RybCIsIiRodHRwIiwiZW50aXR5U2VydmljZSIsImNvbm5lY3Rpb25TZXJ2aWNlIiwic2VhcmNoSXRlbXMiLCJjYXRlZ29yaWVzIiwiY3VycmVudExvY2F0aW9uIiwiY2xpY2tlZExvY2F0aW9uIiwibG9jYXRpb24iLCJjbGlja2VkRW50aXR5IiwiZWRpdGluZyIsImFjdGlvbnMiLCJpbnRlcmFjdGVkIiwic2hvd3NlYXJjaE1CIiwic2hvd0FuYWx5dGljcyIsImVudGl0eVR5cGVzIiwiZ2V0RW50aXR5VHlwZXMiLCJjb25uZWN0aW9uVHlwZXMiLCJnZXRDb25uZWN0aW9uVHlwZXMiLCJzdGF0dXMiLCJpc05ldHdvcmtTaG93biIsImxpY2Vuc2UiLCJuZXR3b3JrTG9hZGluZyIsInRvZ2dsZUFuYWx5dGljcyIsIiR3YXRjaCIsIiRicm9hZGNhc3QiLCJjb25uZWN0aW9uQ2hhbmdlIiwiY29uc29sZSIsImh5ZGVQYXJ0aWFscyIsImV4Y2VwdCIsInNldHRpbmdzRW5hYmxlZCIsInNob3dTZWFyY2giLCJ0b2dnbGVTZXR0aW5ncyIsInN0YXJ0RWRpdCIsImN1cnJlbnRFbnRpdHkiLCJzd2l0Y2hWaWV3IiwibW9iaWxlY2hlY2siLCJjaGVjayIsInJlZ2V4IiwicmVnZXgyIiwiYSIsInRlc3QiLCJzdWJzdHIiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ2ZW5kb3IiLCJvcGVyYSIsInNldFRpbWVvdXQiLCJnZXQiLCJzdWNjZXNzIiwiZGF0YSIsIm5vZGVzIiwibG9jYXRpb25zIiwidW5pcSIsInBsdWNrIiwiZmxhdHRlbiIsImVudGl0aWVzQnlMb2NhdGlvbiIsIm1hcCIsImxvYyIsImZpbmRpbmdzIiwiZmxvdyIsInByb3BlcnR5IiwicGFydGlhbFJpZ2h0IiwiYW55IiwibG9jYWxpdHkiLCJuYW1lIiwidHlwZSIsImRpY3QiLCJ6aXBPYmplY3QiLCJjb25jYXQiLCJvdmVydmlld1VybCIsInNldEVudGl0eSIsInN0b3BFZGl0Iiwic2V0RW50aXR5SUQiLCJpZCIsImZpbmQiLCJzZXRMb2NhdGlvbiIsInNlbGVjdEl0ZW0iLCJpdGVtIiwiJG9uIiwiZXZlbnQiLCJhcmdzIiwidmFsdWUiLCJzZXRFbnRpdGllcyIsInJlc3BvbnNlIiwiYW5pbWF0aW9uc0VuYWJsZWQiLCJob21lRGVwZW5kZW5jaWVzIiwiZGVwZW5kZW5jaWVzIiwicmVzdGljdCIsInJlcXVpcmUiLCJlbGVtZW50IiwiYXR0cnMiLCJuZ01vZGVsIiwidG9Mb3dlckNhc2UiLCIkcGFyc2VycyIsInB1c2giLCJwYXJzZUZsb2F0Iiwib3ZlcnZpZXdDdHJsIiwiY2F0ZWdvcml6ZWRFbnRpdGllcyIsImZvckVhY2giLCJrZXlzIiwiYW5hbHl0aWNzQ3RybCIsImNvbnRyb2xDdHJsIiwiJHJvb3RTY29wZSIsIiRtb2RhbCIsInZtIiwiY2hhbmdlVmlldyIsInNpemVCeUxpc3QiLCJzaXplQnkiLCJzaG93VmlldyIsIk5ldHdvcmsiLCJNYXAiLCJ2aWV3Iiwic2hvd0Fib3V0Iiwib3BlbiIsImFuaW1hdGlvbiIsInRvZ2dsZU5vZGUiLCJlbmFibGVkIiwidG9nZ2xlTGluayIsImNoYW5nZVNpemVCeSIsImNvbnRyb2xEZXBzIiwiZGV0YWlsc0N0cmwiLCJpdGVtc1Nob3duRGVmYXVsdCIsImtleV9wZW9wbGUiLCJncmFudHNfZ2l2ZW4iLCJncmFudHNfcmVjZWl2ZWQiLCJpbnZlc3RtZW50c19tYWRlIiwiaW52ZXN0bWVudHNfcmVjZWl2ZWQiLCJjb2xsYWJvcmF0aW9ucyIsImVtcGxveW1lbnRzIiwicmVsYXRpb25zIiwiZGF0YV9naXZlbiIsImRhdGFfcmVjZWl2ZWQiLCJyZXZlbnVlcyIsImV4cGVuc2VzIiwiaXRlbXNTaG93biIsImNsb25lIiwic2hvd01vcmUiLCJsZW5ndGgiLCJzaG93TGVzcyIsImlzRGVmIiwib2JqIiwidW5kZWZpbmVkIiwiZWRpdEN0cmwiLCIkdGltZW91dCIsImxvY2F0aW9uU2VydmljZSIsImluaXRDYXRlZ29yeUFycmF5IiwiY2F0ZWdvcnkiLCJjYXRlZ29yeUluZGV4IiwiZW50aXR5Q2F0ZWdvcnlJbmRleCIsImVudGl0eUNhdGVnb3J5IiwiaGFzT3duUHJvcGVydHkiLCJlZGl0RW50aXR5IiwiaXNFZGl0aW5nIiwiZ2V0RW50aXR5TW9kZWwiLCJpbmZsdWVuY2VUeXBlcyIsImdldEluZmx1ZW5jZVR5cGVzIiwiY2F0ZWdvcnlCYWNrdXAiLCJhZGRyZXNzU2VhcmNoIiwic2VhcmNoIiwianNvbnAiLCJwYXJhbXMiLCJxdWVyeSIsImtleSIsImluY2x1ZGUiLCJ0aGVuIiwicmVzb3VyY2VTZXRzIiwicmVzb3VyY2VzIiwidG9nZ2xlQ2F0ZWdvcnkiLCJmb3VuZCIsImlzTGFzdCIsImZvcm1hdHRlZEFkZHJlc3MiLCJhcGlDYWxsUmVzdWx0IiwicmVzdWx0IiwiYWRkcmVzcyIsInBvaW50IiwiYWRkTG9jYXRpb24iLCJhZGRyZXNzX2xpbmUiLCJhZGRyZXNzTGluZSIsImRpc3RyaWN0IiwiYWRtaW5EaXN0cmljdCIsImNvdW50cnkiLCJjb3VudHJ5UmVnaW9uIiwiY291bnRyeV9jb2RlIiwiY291bnRyeVJlZ2lvbklzbzIiLCJjb29yZGluYXRlcyIsInBvc3RhbF9jb2RlIiwicG9zdGFsQ29kZSIsImdldExvY2F0aW9uTW9kZWwiLCJhZGRLZXlQZXJzb24iLCJzb21lIiwic2V0RnVuZGluZ0Nvbm5lY3Rpb24iLCJmdW5kaW5nIiwiZW50aXR5X2lkIiwiYWRkRnVuZGluZ0Nvbm5lY3Rpb24iLCJhbW91bnQiLCJ5ZWFyIiwic2V0Q29ubmVjdGlvbiIsImNvbm5lY3Rpb24iLCJhZGRDb25uZWN0aW9uIiwiY29ubmVjdGlvbnMiLCJkZXRhaWxzIiwiYWRkRmluYW5jZSIsInJlY29yZHMiLCJldmVyeSIsInIiLCJzYXZlIiwiaXNTYXZpbmciLCJnZW5lcmF0ZURCTW9kZWwiLCJwb3N0IiwiJGVtaXQiLCJjYW5jZWxFZGl0IiwiZXJyb3IiLCJpc0Vycm9yIiwibmV3VmFsIiwib2xkVmFsIiwiZXF1YWxzIiwiY29weSIsImVkaXRDb250cm9sbGVyRGVwcyIsIkNhdGVnb3J5U2VydmljZSIsIm8iLCJDYXRlZ29yeSIsImRlZk9iaiIsImVuYWJsZSIsImdldENhdGVnb3J5TW9kZWwiLCJjYXRlZ29yeVNlcnZpY2VEZXBlbmRlbmNpZXMiLCJzZXJ2aWNlIiwiQ29ubmVjdGlvbnMiLCJDb25uZWN0aW9uIiwib2JqSXNEZWYiLCJnZXRDb25uZWN0aW9uTW9kZWwiLCJGdW5kaW5nIiwiRGF0YSIsIkVtcGxveW1lbnQiLCJDb2xsYWJvcmF0aW9uIiwiRW50aXR5U2VydmljZSIsImZ1bmRpbmdDb25uZWN0aW9uU2VydmljZSIsImZpbmFuY2VTZXJ2aWNlIiwiY2F0ZWdvcnlTZXJ2aWNlIiwibG9vcEFuZEluaXQiLCJtb2RlbEFycmF5IiwiaW5pdE1vZGVsRnVuY3Rpb24iLCJpc0FycmF5IiwiYXJyYXlJbmRleCIsImFycmF5VmFsdWUiLCJuZXdNb2RlbEFycmF5IiwiaXNPYmplY3QiLCJFbnRpdHkiLCJpbmZsdWVuY2UiLCJnZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsIiwiZ2V0RmluYW5jZU1vZGVsIiwibmlja25hbWUiLCJ1cmwiLCJ0d2l0dGVyX2hhbmRsZSIsImVtcGxveWVlcyIsImRiTW9kZWwiLCJwb3AiLCJkZXNjcmlwdGlvbiIsIkdvdmVybm1lbnQiLCJGb3ItUHJvZml0IiwiTm9uLVByb2ZpdCIsIkluZGl2aWR1YWwiLCJlbnRpdHlTZXJ2aWNlRGVwZW5kZW5jaWVzIiwiRmluYW5jZVNlcnZpY2UiLCJGaW5hbmNlIiwiRnVuZGluZ0Nvbm5lY3Rpb25zIiwiRnVuZGluZ0Nvbm5lY3Rpb24iLCJmdW5kaW5nQ29ubmVjdGlvblNlcnZpY2VEZXBlbmRlbmNpZXMiLCJMb2NhdGlvblNlcnZpY2UiLCJMb2NhdGlvbiIsInRyaW0iLCJsb2NhdGlvblNlcnZpY2VEZXBlbmRlbmNpZXMiLCJkMyIsIkwiLCJtYXBDdHJsIiwibGVhZmxldERhdGEiLCIkZmlsdGVyIiwib3B0aW9ucyIsImNlbnRlciIsImxhdCIsImxuZyIsInpvb20iLCJ0aWxlTGF5ZXIiLCJ0aWxlTGF5ZXJPcHRpb25zIiwiZGV0ZWN0UmV0aW5hIiwicmV1c2VUaWxlcyIsInpvb21Db250cm9sIiwiYXR0cmlidXRpb25Db250cm9sIiwiY3JlYXRlUGllQ2hhcnQiLCJwaWUiLCJsYXlvdXQiLCJzb3J0IiwiZCIsImFyYyIsInN2ZyIsIm91dGVyUmFkaXVzIiwiaW5uZXJSYWRpdXMiLCJzdHJva2VXaWR0aCIsInciLCJoIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50TlMiLCJucyIsInByZWZpeCIsInZpcyIsInNlbGVjdCIsImF0dHIiLCJhcmNzIiwic2VsZWN0QWxsIiwiZW50ZXIiLCJhcHBlbmQiLCJ0ZXh0IiwiaSIsImNvdW50IiwidG9TdHJpbmciLCJYTUxTZXJpYWxpemVyIiwic2VyaWFsaXplVG9TdHJpbmciLCJ4bWwiLCJnZXRNYXAiLCJjbHVzdGVySWNvbiIsImNsdXN0ZXIiLCJjaGlsZHJlbiIsImdldEFsbENoaWxkTWFya2VycyIsInRvdGFsIiwiY2x1c3Rlck1hcmtlcnMiLCJjb3VudHMiLCJjb3VudEJ5IiwiaWNvbkRpbSIsImh0bWwiLCJEaXZJY29uIiwiY2xhc3NOYW1lIiwiaWNvblNpemUiLCJvdXRlckxvb3AiLCJpbm5lckxvb3AiLCJtIiwibWFya2VyIiwiaWNvbiIsIm1hcmtlckljb24iLCJ0aXRsZSIsIm1lc3NhZ2UiLCJtYXJrZXJzIiwiYWRkTGF5ZXIiLCJvbkxvY2F0aW9uRXJyb3IiLCJsZWFmbGV0RXJyb3IiLCJmaWx0ZXJlZEVudGl0aWVzIiwiaW52YWxpZGF0ZVNpemUiLCJDb250cm9sIiwiWm9vbSIsInBvc2l0aW9uIiwiYWRkVG8iLCJjb250cm9sIiwibG9jYXRlIiwic2hvd1BvcHVwIiwiaWNvblVybCIsIm1hcmtlckNsdXN0ZXJHcm91cCIsInNwaWRlcmZ5T25NYXhab29tIiwic2hvd0NvdmVyYWdlT25Ib3ZlciIsImljb25DcmVhdGVGdW5jdGlvbiIsIm1heENsdXN0ZXJSYWRpdXMiLCJzcGlkZXJmeURpc3RhbmNlTXVsdGlwbGllciIsIm9uIiwibGF5ZXIiLCJzYWZlQXBwbHkiLCJzZXRWaWV3IiwiUlRQIiwibmV0d29ya0N0cmwiLCJzdGFydExvYWQiLCJmaWx0ZXJlZENvbm5lY3Rpb25zIiwic291cmNlTm9kZSIsInNvdXJjZSIsInRhcmdldE5vZGUiLCJ0YXJnZXQiLCJ0b3A1IiwidGFrZVJpZ2h0Iiwic29ydEJ5Iiwid2VsbGNvbm5lY3RlZCIsImUiLCJkcmF3TmV0d29yayIsImlzTG9hZGluZyIsImZuIiwicGhhc2UiLCIkcm9vdCIsIiQkcGhhc2UiLCIkYXBwbHkiLCJ2aWV3T2JqIiwiZW50aXR5QXJyYXkiLCJjb25uZWN0aW9uQXJyYXkiLCJyZW1vdmUiLCJib3VuZHMiLCJub2RlIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiaGVpZ2h0Iiwid2lkdGgiLCJvZmZzZXRTY2FsZSIsImRlZmF1bHROb2RlU2l6ZSIsIm9mZnNldHMiLCJ4IiwieSIsImxvd2VyQm91bmRSYWRpdXMiLCJ1cHBlckJvdW5kUmFkaXVzIiwibWF4RW1wbG95ZWVzIiwibWF4IiwiZWwiLCJtYXhGb2xsb3dlcnMiLCJmb2xsb3dlcnMiLCJzY2FsZSIsInNxcnQiLCJkb21haW4iLCJyYW5nZSIsImxpbmtzIiwiZm9yY2UiLCJzaXplIiwidmFsdWVzIiwiY2hhcmdlIiwibGlua1N0cmVuZ3RoIiwibGlua0Rpc3RhbmNlIiwiY2FsbCIsImRyYWciLCJnZXRDb21wdXRlZFRleHRMZW5ndGgiLCJwYXJlbnROb2RlIiwiZ2V0QkJveCIsImsiLCJhbHBoYSIsIm1pbiIsInNwZWVkQW5pbWF0ZSIsInRpY2tzIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwicmVuZGVyIiwidGljayIsInN0YXJ0IiwibGlua2VkQnlJbmRleCIsImwiLCJfX2RhdGFfXyIsImluZGV4IiwiaG92ZXJUaW1lciIsIm5laWdoYm9yaW5nIiwiYiIsImZvY3VzbmVpZ2hib3JzIiwiY2xhc3NlZCIsIm4iLCJmb2N1cyIsInVuZm9jdXMiLCJmaXhlZCIsInJlc3VtZSIsImhvdmVyIiwidW5ob3ZlciIsImNsZWFyVGltZW91dCIsImZvY3VzTG9jYXRpb24iLCJ1bmZvY3VzTG9jYXRpb24iLCJoaWdobGlnaHRMb2NhdGlvbiIsInNob3dMaWNlbnNlIiwic3RvcFByb3BhZ2F0aW9uIiwiYmFja2dyb3VuZGNsaWNrIiwiZGJsY2xpY2siLCJweCIsInB5IiwidHJhbnNpdGlvbiIsImR1cmF0aW9uIiwidmFsIiwidmlzaWJsZSIsImhpZGRlbiJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBVUEsR0FFTixZQUVBLElBQUlDLElBQ0EsZUFDQSxvQkFDQSxZQUNBLGdCQUdKRCxH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RCxPQUFPalQsT0FFMUMwWSxPQUFXLFNBQVU3QixHQUdqQixPQUFRMWMsRUFBTzRDLGdCQUFnQjhaLEVBQUU3VyxRQUNyQjdGLEVBQU8wQyxZQUFZZ2EsRUFBRTlELE9BQU8vUyxRQUM3QjdGLEVBQU8wQyxZQUFZZ2EsRUFBRTVELE9BQU9qVCxXQU1oRTdGLEVBQU8wRyxJQUFJLGFBQWMsU0FBVUMsRUFBT0YsR0FDcEIsYUFBZEEsRUFBS1osS0FDTCtYLEVBQWtCNWQsRUFBT2lDLGlCQUd6QjNDLEVBQU1VLEVBQU82RCxrQkE5YjdCLEdBQUlxRCxJQUNBLFNBQ0EsUUFDQSxJQUNBLFVBQ0EsU0FDQXNSLEVBMmVKN2EsR0FBUUUsT0FBTyxlQUNWSyxXQUFXLGNBQWVnSixJQUVoQ3ZKLFFBQVM0YSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBtYWluRGVwZW5kZW5jaWVzID0gW1xuICAgICAgICAndWkuYm9vdHN0cmFwJyxcbiAgICAgICAgJ2xlYWZsZXQtZGlyZWN0aXZlJyxcbiAgICAgICAgJ25nQW5pbWF0ZScsXG4gICAgICAgICd0ZW1wbGF0ZUNhY2hlJ1xuICAgIF07XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnLCBtYWluRGVwZW5kZW5jaWVzKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMS8xNi5cbiAqL1xuXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGFuYWx5dGljc0RlcGVuZGVuY2llcyA9IFthbmFseXRpY3NEaXJlY3RpdmVdO1xuXG4gICAgZnVuY3Rpb24gYW5hbHl0aWNzRGlyZWN0aXZlKCl7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2pzL2FuYWx5dGljL2FuYWx5dGljcy5odG1sJyxcbiAgICAgICAgICAgIHJlc3RyaWN0ICAgOiAnRScsXG4gICAgICAgICAgICBzY29wZSAgICAgIDoge30sXG4gICAgICAgICAgICBjb250cm9sbGVyICAgOiAnYW5hbHl0aWNzQ3RybCdcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuZGlyZWN0aXZlKCdhbmFseXRpY3MnLCBhbmFseXRpY3NEZXBlbmRlbmNpZXMpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNy8xMC8xNi5cbiAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBjb250cm9sRGVwZW5kZW5jaWVzID0gW2NvbnRyb2xEaXJlY3RpdmVdO1xuXG4gICAgZnVuY3Rpb24gY29udHJvbERpcmVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnanMvY29udHJvbC9jb250cm9scy5odG1sJyxcbiAgICAgICAgICAgIHJlc3RyaWN0ICAgOiAnRScsXG4gICAgICAgICAgICBzY29wZSAgICAgIDoge1xuICAgICAgICAgICAgICAgIHRvZ2dsZU5ldHdvcmsgOiAnPScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29udHJvbGxlciAgIDogJ2NvbnRyb2xDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBcyA6ICdjb250cm9sJyxcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXIgOiB7XG4gICAgICAgICAgICAgICAgbWluQ29ubmVjdGlvbnMgOiBcIj1cIlxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2NvbnRyb2wnLCBjb250cm9sRGVwZW5kZW5jaWVzKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGVkaXRFbnRpdHlEZXBlbmRlbmNpZXMgPSBbZWRpdEVudGl0eURpcmVjdGl2ZV07XG5cbiAgICBmdW5jdGlvbiBlZGl0RW50aXR5RGlyZWN0aXZlKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdqcy9lZGl0LWVudGl0eS9lZGl0Lmh0bWwnLFxuICAgICAgICAgICAgcmVzdHJpY3QgICA6ICdFJyxcbiAgICAgICAgICAgIHNjb3BlICAgICAgOiB7XG4gICAgICAgICAgICAgICAgJ2VudGl0eScgIDogXCI9XCIsXG4gICAgICAgICAgICAgICAgJ2VudGl0aWVzJzogXCI9XCIsXG4gICAgICAgICAgICAgICAgJ2lzT3BlbicgIDogXCI9XCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb250cm9sbGVyIDogJ2VkaXRDdHJsJ1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2VkaXRFbnRpdHknLCBlZGl0RW50aXR5RGVwZW5kZW5jaWVzKTtcblxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIsICQpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIGxpbmtGdW5jdGlvbihzY29wZSkge1xuXG4gICAgICAgIGZ1bmN0aW9uIHNjcm9sbCgpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gJCh0aGlzKTtcbiAgICAgICAgICAgIHNlbGYuY3NzKCdoZWlnaHQnLCAnNTV2aCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY2xpY2soKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9ICQodGhpcyk7XG4gICAgICAgICAgICBpZiAod2luZG93LmlubmVySGVpZ2h0IC8gMyA+IHBhcnNlSW50KHNlbGYuY3NzKCdoZWlnaHQnKSkpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmNzcygnaGVpZ2h0JywgJzU1dmgnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jc3MoJ2hlaWdodCcsICczMHZoJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGV0YWlsc1BhbmVsO1xuICAgICAgICBpZiAoc2NvcGUubW9iaWxlKSB7XG4gICAgICAgICAgICBkZXRhaWxzUGFuZWwgPSAkKFwiI2RldGFpbHMtcGFuZWxcIik7XG4gICAgICAgICAgICBkZXRhaWxzUGFuZWwuY3NzKFwiaGVpZ2h0XCIsIFwiMzB2aFwiKTtcbiAgICAgICAgICAgIGRldGFpbHNQYW5lbC5zY3JvbGxUb3AoMCk7XG4gICAgICAgICAgICBkZXRhaWxzUGFuZWwuc2Nyb2xsKHNjcm9sbCk7XG4gICAgICAgICAgICBkZXRhaWxzUGFuZWwuY2xpY2soY2xpY2spO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkTW9iaWxlRXZlbnRzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgICAgIGxpbms6IGxpbmtGdW5jdGlvblxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2FkZE1vYmlsZUV2ZW50cycsIFthZGRNb2JpbGVFdmVudHNdKTtcbn0pKGFuZ3VsYXIsICQpO1xuIiwiKGZ1bmN0aW9uKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIG1vZGFsQ3RybCgkc2NvcGUsICRtb2RhbEluc3RhbmNlKSB7XG4gICAgICAgICRzY29wZS5jbG9zZVdpbmRvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRtb2RhbEluc3RhbmNlLmNsb3NlKCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ21vZGFsQ3RybCcsIFsnJHNjb3BlJywgJyRtb2RhbEluc3RhbmNlJywgbW9kYWxDdHJsXSk7XG5cbn0pKGFuZ3VsYXIpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnN0YW50KCdfJywgd2luZG93Ll8pXG4gICAgICAgIC5jb25zdGFudCgnY29uZmlnJywge1xuICAgICAgICAgICAgYXBpSG9zdDogJ2h0dHBzOi8vYXBpLmNpdmljZ3JhcGguaW8vJ1xuICAgICAgICB9KVxuICAgICAgICAuY29uZmlnKFsnJGxvY2F0aW9uUHJvdmlkZXInLCAnJGh0dHBQcm92aWRlcicsICckY29tcGlsZVByb3ZpZGVyJyxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgkbG9jYXRpb25Qcm92aWRlciwgJGh0dHBQcm92aWRlciwgJGNvbXBpbGVQcm92aWRlcikge1xuICAgICAgICAgICAgICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydYLVJlcXVlc3RlZC1XaXRoJ10gPSAnWE1MSHR0cFJlcXVlc3QnO1xuICAgICAgICAgICAgICAgIC8vICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0V2ZW50LU5hbWUnXSA9ICdUZXN0X0V2ZW50JztcbiAgICAgICAgICAgICAgICAkY29tcGlsZVByb3ZpZGVyLmRlYnVnSW5mb0VuYWJsZWQodHJ1ZSk7XG4gICAgICAgICAgICB9XSlcbiAgICAgICAgLmZpbHRlcigndGhvdXNhbmRTdWZmaXgnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGlucHV0LCBkZWNpbWFscykge1xuICAgICAgICAgICAgICAgIHZhciBleHAsXG4gICAgICAgICAgICAgICAgICAgIHN1ZmZpeGVzID0gWydrJywgJ00nLCAnRycsICdUJywgJ1AnLCAnRSddO1xuXG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5pc05hTihpbnB1dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGlucHV0IDwgMTAwMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZXhwID0gTWF0aC5mbG9vcihNYXRoLmxvZyhpbnB1dCkgLyBNYXRoLmxvZygxMDAwKSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gKGlucHV0IC8gTWF0aC5wb3coMTAwMCwgZXhwKSkudG9GaXhlZChkZWNpbWFscykgKyBzdWZmaXhlc1tleHAgLSAxXTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGhvbWVEZXBlbmRlbmNpZXMgPSBbXG4gICAgICAgICckc2NvcGUnLFxuICAgICAgICAnJGh0dHAnLFxuICAgICAgICAnXycsXG4gICAgICAgICdlbnRpdHlTZXJ2aWNlJyxcbiAgICAgICAgJ2Nvbm5lY3Rpb25TZXJ2aWNlJyxcbiAgICAgICAgJ2NvbmZpZycsXG4gICAgICAgIGhvbWVDdHJsXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIGhvbWVDdHJsKCRzY29wZSwgJGh0dHAsIF8sIGVudGl0eVNlcnZpY2UsIGNvbm5lY3Rpb25TZXJ2aWNlLCBjb25maWcpIHtcbiAgICAgICAgJHNjb3BlLmVudGl0aWVzICAgICAgICAgICAgICAgICA9IFtdO1xuICAgICAgICAkc2NvcGUuc2VhcmNoSXRlbXMgICAgICAgICAgICAgID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmNhdGVnb3JpZXMgICAgICAgICAgICAgICA9IFtdO1xuICAgICAgICAkc2NvcGUuY3VycmVudExvY2F0aW9uICAgICAgICAgID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmNsaWNrZWRMb2NhdGlvbiAgICAgICAgICA9IHt9O1xuICAgICAgICAkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkgICAgICAgICAgICA9IHt9O1xuICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgICAgID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmVkaXRpbmcgICAgICAgICAgICAgICAgICA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUuYWN0aW9ucyAgICAgICAgICAgICAgICAgID0geydpbnRlcmFjdGVkJzogZmFsc2V9O1xuICAgICAgICAkc2NvcGUuc2hvd3NlYXJjaE1CICAgICAgICAgICAgID0gZmFsc2U7XG4gICAgICAgICRzY29wZS5zaG93QW5hbHl0aWNzICAgICAgICAgICAgPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLmVudGl0eVR5cGVzICAgICAgICAgICAgICA9IGVudGl0eVNlcnZpY2UuZ2V0RW50aXR5VHlwZXMoKTtcbiAgICAgICAgJHNjb3BlLmNvbm5lY3Rpb25UeXBlcyAgICAgICAgICA9IGNvbm5lY3Rpb25TZXJ2aWNlLmdldENvbm5lY3Rpb25UeXBlcygpO1xuICAgICAgICAkc2NvcGUuc3RhdHVzICAgICAgICAgICAgICAgICAgID0ge1xuICAgICAgICAgICAgXCJpc05ldHdvcmtTaG93blwiOiB0cnVlLFxuICAgICAgICAgICAgXCJsaWNlbnNlXCIgICAgICAgOiB0cnVlLFxuICAgICAgICAgICAgXCJuZXR3b3JrTG9hZGluZ1wiOiB0cnVlXG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnRvZ2dsZUFuYWx5dGljcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5zaG93QW5hbHl0aWNzID0gISRzY29wZS5zaG93QW5hbHl0aWNzO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubWluQ29ubmVjdGlvbnMgPSAkc2NvcGUubWluQ29ubmVjdGlvbnMgPSAyO1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgJHNjb3BlLiR3YXRjaCgnbWluQ29ubmVjdGlvbnMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCd0cmlnZ2VyTmV0d29ya0RyYXcnKTtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICAkc2NvcGUuY29ubmVjdGlvbkNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHNlbGYubWluQ29ubmVjdGlvbnMpO1xuICAgICAgICAgICAgJHNjb3BlLm1pbkNvbm5lY3Rpb25zID0gc2VsZi5taW5Db25uZWN0aW9ucztcbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCd0cmlnZ2VyTmV0d29ya0RyYXcnKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuaHlkZVBhcnRpYWxzID0gZnVuY3Rpb24gKGV4Y2VwdCkge1xuICAgICAgICAgICAgaWYgKGV4Y2VwdCA9PT0gXCJzZWFyY2hcIikge1xuICAgICAgICAgICAgICAgICRzY29wZS5lZGl0aW5nICAgICAgICAgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3NFbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV4Y2VwdCA9PT0gXCJzZXR0aW5nc1wiKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRpbmcgICAgICA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zaG93c2VhcmNoTUIgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXhjZXB0ID09PSBcImVkaXRcIikge1xuICAgICAgICAgICAgICAgICRzY29wZS5zZXR0aW5nc0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd3NlYXJjaE1CICAgID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRzY29wZS5lZGl0aW5nICAgICAgICAgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3NFbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3dzZWFyY2hNQiAgICA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNob3dTZWFyY2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2NvcGUuaHlkZVBhcnRpYWxzKFwic2VhcmNoXCIpO1xuICAgICAgICAgICAgJHNjb3BlLnNob3dzZWFyY2hNQiAgID0gISRzY29wZS5zaG93c2VhcmNoTUI7XG4gICAgICAgICAgICAvLyAkc2NvcGUuJGJyb2FkY2FzdCgnaGlkZUxpY2Vuc2UnKTtcbiAgICAgICAgICAgICRzY29wZS5zdGF0dXMubGljZW5zZSA9IGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS50b2dnbGVTZXR0aW5ncyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5oeWRlUGFydGlhbHMoXCJzZXR0aW5nc1wiKTtcbiAgICAgICAgICAgICRzY29wZS5zZXR0aW5nc0VuYWJsZWQgPSAhJHNjb3BlLnNldHRpbmdzRW5hYmxlZDtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc3RhcnRFZGl0ID0gZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRFbnRpdHkgPSBlbnRpdHk7XG4gICAgICAgICAgICBpZiAoJHNjb3BlLm1vYmlsZSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5oeWRlUGFydGlhbHMoXCJlZGl0XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHNjb3BlLmVkaXRpbmcgPSB0cnVlO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zd2l0Y2hWaWV3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gJHNjb3BlLiRicm9hZGNhc3QoJ3ZpZXdDaGFuZ2UnLCAhJHNjb3BlLnN0YXR1cy5pc05ldHdvcmtTaG93biA/ICdNYXAnIDogJ05ldHdvcmsnKTtcbiAgICAgICAgICAgIC8vICRzY29wZS5jaGFuZ2VWaWV3KCEkc2NvcGUuc3RhdHVzLmlzTmV0d29ya1Nob3duID8gJ01hcCcgOiAnTmV0d29yaycpO1xuICAgICAgICAgICAgJHNjb3BlLnN0YXR1cy5pc05ldHdvcmtTaG93biA9ICEkc2NvcGUuc3RhdHVzLmlzTmV0d29ya1Nob3duO1xuICAgICAgICAgICAgaWYgKCRzY29wZS5zdGF0dXMuaXNOZXR3b3JrU2hvd24pIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgndHJpZ2dlck5ldHdvcmtEcmF3Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgd2luZG93Lm1vYmlsZWNoZWNrICAgICA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjaGVjayAgPSBmYWxzZSxcbiAgICAgICAgICAgICAgICByZWdleCAgPSAvKGFuZHJvaWR8YmJcXGQrfG1lZWdvKS4rbW9iaWxlfGF2YW50Z298YmFkYVxcL3xibGFja2JlcnJ5fGJsYXplcnxjb21wYWx8ZWxhaW5lfGZlbm5lY3xoaXB0b3B8aWVtb2JpbGV8aXAoaG9uZXxvZCl8aXJpc3xraW5kbGV8bGdlIHxtYWVtb3xtaWRwfG1tcHxtb2JpbGUuK2ZpcmVmb3h8bmV0ZnJvbnR8b3BlcmEgbShvYnxpbilpfHBhbG0oIG9zKT98cGhvbmV8cChpeGl8cmUpXFwvfHBsdWNrZXJ8cG9ja2V0fHBzcHxzZXJpZXMoNHw2KTB8c3ltYmlhbnx0cmVvfHVwXFwuKGJyb3dzZXJ8bGluayl8dm9kYWZvbmV8d2FwfHdpbmRvd3MgY2V8eGRhfHhpaW5vL2ksXG4gICAgICAgICAgICAgICAgcmVnZXgyID0gLzEyMDd8NjMxMHw2NTkwfDNnc298NHRocHw1MFsxLTZdaXw3NzBzfDgwMnN8YSB3YXxhYmFjfGFjKGVyfG9vfHNcXC0pfGFpKGtvfHJuKXxhbChhdnxjYXxjbyl8YW1vaXxhbihleHxueXx5dyl8YXB0dXxhcihjaHxnbyl8YXModGV8dXMpfGF0dHd8YXUoZGl8XFwtbXxyIHxzICl8YXZhbnxiZShja3xsbHxucSl8YmkobGJ8cmQpfGJsKGFjfGF6KXxicihlfHYpd3xidW1ifGJ3XFwtKG58dSl8YzU1XFwvfGNhcGl8Y2N3YXxjZG1cXC18Y2VsbHxjaHRtfGNsZGN8Y21kXFwtfGNvKG1wfG5kKXxjcmF3fGRhKGl0fGxsfG5nKXxkYnRlfGRjXFwtc3xkZXZpfGRpY2F8ZG1vYnxkbyhjfHApb3xkcygxMnxcXC1kKXxlbCg0OXxhaSl8ZW0obDJ8dWwpfGVyKGljfGswKXxlc2w4fGV6KFs0LTddMHxvc3x3YXx6ZSl8ZmV0Y3xmbHkoXFwtfF8pfGcxIHV8ZzU2MHxnZW5lfGdmXFwtNXxnXFwtbW98Z28oXFwud3xvZCl8Z3IoYWR8dW4pfGhhaWV8aGNpdHxoZFxcLShtfHB8dCl8aGVpXFwtfGhpKHB0fHRhKXxocCggaXxpcCl8aHNcXC1jfGh0KGMoXFwtfCB8X3xhfGd8cHxzfHQpfHRwKXxodShhd3x0Yyl8aVxcLSgyMHxnb3xtYSl8aTIzMHxpYWMoIHxcXC18XFwvKXxpYnJvfGlkZWF8aWcwMXxpa29tfGltMWt8aW5ub3xpcGFxfGlyaXN8amEodHx2KWF8amJyb3xqZW11fGppZ3N8a2RkaXxrZWppfGtndCggfFxcLyl8a2xvbnxrcHQgfGt3Y1xcLXxreW8oY3xrKXxsZShub3x4aSl8bGcoIGd8XFwvKGt8bHx1KXw1MHw1NHxcXC1bYS13XSl8bGlid3xseW54fG0xXFwtd3xtM2dhfG01MFxcL3xtYSh0ZXx1aXx4byl8bWMoMDF8MjF8Y2EpfG1cXC1jcnxtZShyY3xyaSl8bWkobzh8b2F8dHMpfG1tZWZ8bW8oMDF8MDJ8Yml8ZGV8ZG98dChcXC18IHxvfHYpfHp6KXxtdCg1MHxwMXx2ICl8bXdicHxteXdhfG4xMFswLTJdfG4yMFsyLTNdfG4zMCgwfDIpfG41MCgwfDJ8NSl8bjcoMCgwfDEpfDEwKXxuZSgoY3xtKVxcLXxvbnx0Znx3Znx3Z3x3dCl8bm9rKDZ8aSl8bnpwaHxvMmltfG9wKHRpfHd2KXxvcmFufG93ZzF8cDgwMHxwYW4oYXxkfHQpfHBkeGd8cGcoMTN8XFwtKFsxLThdfGMpKXxwaGlsfHBpcmV8cGwoYXl8dWMpfHBuXFwtMnxwbyhja3xydHxzZSl8cHJveHxwc2lvfHB0XFwtZ3xxYVxcLWF8cWMoMDd8MTJ8MjF8MzJ8NjB8XFwtWzItN118aVxcLSl8cXRla3xyMzgwfHI2MDB8cmFrc3xyaW05fHJvKHZlfHpvKXxzNTVcXC98c2EoZ2V8bWF8bW18bXN8bnl8dmEpfHNjKDAxfGhcXC18b298cFxcLSl8c2RrXFwvfHNlKGMoXFwtfDB8MSl8NDd8bWN8bmR8cmkpfHNnaFxcLXxzaGFyfHNpZShcXC18bSl8c2tcXC0wfHNsKDQ1fGlkKXxzbShhbHxhcnxiM3xpdHx0NSl8c28oZnR8bnkpfHNwKDAxfGhcXC18dlxcLXx2ICl8c3koMDF8bWIpfHQyKDE4fDUwKXx0NigwMHwxMHwxOCl8dGEoZ3R8bGspfHRjbFxcLXx0ZGdcXC18dGVsKGl8bSl8dGltXFwtfHRcXC1tb3x0byhwbHxzaCl8dHMoNzB8bVxcLXxtM3xtNSl8dHhcXC05fHVwKFxcLmJ8ZzF8c2kpfHV0c3R8djQwMHx2NzUwfHZlcml8dmkocmd8dGUpfHZrKDQwfDVbMC0zXXxcXC12KXx2bTQwfHZvZGF8dnVsY3x2eCg1Mnw1M3w2MHw2MXw3MHw4MHw4MXw4M3w4NXw5OCl8dzNjKFxcLXwgKXx3ZWJjfHdoaXR8d2koZyB8bmN8bncpfHdtbGJ8d29udXx4NzAwfHlhc1xcLXx5b3VyfHpldG98enRlXFwtL2k7XG4gICAgICAgICAgICAoZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVnZXgudGVzdChhKSB8fCByZWdleDIudGVzdChhLnN1YnN0cigwLCA0KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKG5hdmlnYXRvci51c2VyQWdlbnQgfHwgbmF2aWdhdG9yLnZlbmRvciB8fCB3aW5kb3cub3BlcmEpO1xuICAgICAgICAgICAgcmV0dXJuIGNoZWNrO1xuICAgICAgICB9O1xuICAgICAgICAkc2NvcGUubW9iaWxlICAgICAgICAgID0gd2luZG93Lm1vYmlsZWNoZWNrKCk7XG4gICAgICAgICRzY29wZS5zZXR0aW5nc0VuYWJsZWQgPSAhJHNjb3BlLm1vYmlsZTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRodHRwLmdldChjb25maWcuYXBpSG9zdCArICdhcGkvZW50aXRpZXMnKVxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lbnRpdGllcyA9IGRhdGEubm9kZXM7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbnMgICA9IF8udW5pcShcbiAgICAgICAgICAgICAgICAgICAgICAgIF8ucGx1Y2soXy5mbGF0dGVuKF8ucGx1Y2soJHNjb3BlLmVudGl0aWVzLCAnbG9jYXRpb25zJykpLCAnbG9jYWxpdHknKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGVudGl0aWVzQnlMb2NhdGlvbiA9IF8ubWFwKGxvY2F0aW9ucywgZnVuY3Rpb24gKGxvYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbmRpbmdzID0gXy5maWx0ZXIoJHNjb3BlLmVudGl0aWVzLCBfLmZsb3coXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5wcm9wZXJ0eSgnbG9jYXRpb25zJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5wYXJ0aWFsUmlnaHQoXy5hbnksIHtsb2NhbGl0eTogbG9jfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgICAgOiBsb2MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSAgICA6ICdsb2NhdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50aXRpZXM6IGZpbmRpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpY3QgICAgOiBfLnppcE9iamVjdChfLnBsdWNrKGZpbmRpbmdzLCAnbmFtZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLnBsdWNrKGZpbmRpbmdzLCAnaW5kZXgnKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zZWFyY2hJdGVtcyA9IGVudGl0aWVzQnlMb2NhdGlvbi5jb25jYXQoJHNjb3BlLmVudGl0aWVzKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBpZiAoJHNjb3BlLmdldFVSTElEKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIC8vIFNldCB0aGUgZW50aXR5IHRvIHRoZSBJRCBpbiB0aGUgVVJMIGlmIGl0IGV4aXN0cy5cbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICRzY29wZS5zZXRFbnRpdHlJRCgkc2NvcGUuZ2V0VVJMSUQoKSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm92ZXJ2aWV3VXJsID0gJ2pzL292ZXJ2aWV3L292ZXJ2aWV3Lmh0bWwnO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgndHJpZ2dlck5ldHdvcmtEcmF3Jyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIDEwMCk7XG5cbiAgICAgICAgJHNjb3BlLm92ZXJ2aWV3VXJsID0gbnVsbDtcblxuICAgICAgICAkc2NvcGUuc2V0RW50aXR5ICAgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudExvY2F0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50RW50aXR5ICAgPSBlbnRpdHk7XG4gICAgICAgICAgICBpZiAoJHNjb3BlLmVkaXRpbmcpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3RvcEVkaXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdlbnRpdHlDaGFuZ2UnKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2V0RW50aXR5SUQgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgICRzY29wZS5zZXRFbnRpdHkoXy5maW5kKCRzY29wZS5lbnRpdGllcywgeydpZCc6IGlkfSkpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZXRMb2NhdGlvbiA9IGZ1bmN0aW9uIChsb2NhdGlvbikge1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRMb2NhdGlvbiA9IGxvY2F0aW9uO1xuICAgICAgICAgICAgaWYgKCRzY29wZS5lZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnN0b3BFZGl0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnaXRlbUNoYW5nZScpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZWxlY3RJdGVtID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdsb2NhdGlvbicpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2V0TG9jYXRpb24oaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAkc2NvcGVbaXRlbSAlIDEgPT09IDAgPyAnc2V0RW50aXR5SUQnIDogJ3NldEVudGl0eSddKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3NlbGVjdEl0ZW0nLCBpdGVtKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuJG9uKCdzZXRDdXJyZW50RW50aXR5JywgZnVuY3Rpb24gKGV2ZW50LCBhcmdzKSB7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudEVudGl0eSA9IGFyZ3MudmFsdWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRzY29wZS4kb24oJ3NldEN1cnJlbnRMb2NhdGlvbicsIGZ1bmN0aW9uIChldmVudCwgYXJncykge1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRMb2NhdGlvbiA9IGFyZ3MudmFsdWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRzY29wZS5zZXRFbnRpdGllcyA9IGZ1bmN0aW9uIChlbnRpdGllcykge1xuICAgICAgICAgICAgJHNjb3BlLmVudGl0aWVzID0gZW50aXRpZXM7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnN0b3BFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLmVkaXRpbmcgPSBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuJG9uKFwiZWRpdEVudGl0eVN1Y2Nlc3NcIiwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAkc2NvcGUuc2V0RW50aXRpZXMocmVzcG9uc2Uubm9kZXMpO1xuICAgICAgICAgICAgLy8gJHNjb3BlLnNldEVudGl0eUlEKCRzY29wZS5jdXJyZW50RW50aXR5LmlkKTtcbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCd0cmlnZ2VyTmV0d29ya0RyYXcnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29udHJvbGxlcignaG9tZUN0cmwnLCBob21lRGVwZW5kZW5jaWVzKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMTQvMTYuXG4gKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgZGVwZW5kZW5jaWVzID0gW107XG5cbiAgICBmdW5jdGlvbiBkaXJlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcInJlc3RyaWN0XCI6IFwiRVwiLFxuICAgICAgICAgICAgXCJ0ZW1wbGF0ZVVybFwiOiBcIi9tYXAvbWFwLmh0bWxcIixcbiAgICAgICAgICAgIFwiY29udHJvbGxlclwiOiBcIm1hcEN0cmxcIlxuICAgICAgICB9O1xuICAgIH1cbiAgICAgICAgYW5ndWxhci5tb2R1bGUoXCJjaXZpYy1ncmFwaFwiKVxuICAgICAgICAgICAgLmRpcmVjdGl2ZShcIm1hcFwiLCBkZXBlbmRlbmNpZXMpO1xuXG59KShhbmd1bGFyKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMTEvMTYuXG4gKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgZGVwZW5kZW5jaWVzID0gW1xuICAgICAgICBkaXJlY3RpdmVcbiAgICBdO1xuXG4gICAgZnVuY3Rpb24gZGlyZWN0aXZlKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJyZXN0cmljdFwiOiBcIkVcIixcbiAgICAgICAgICAgIFwidGVtcGxhdGVVcmxcIjogXCJqcy9uZXR3b3JrL25ldHdvcmsuaHRtbFwiLFxuICAgICAgICAgICAgXCJjb250cm9sbGVyXCI6IFwibmV0d29ya0N0cmxcIlxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiY2l2aWMtZ3JhcGhcIilcbiAgICAgICAgLmRpcmVjdGl2ZShcIm5ldHdvcmtcIiwgZGVwZW5kZW5jaWVzKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjYvMTYuXG4gKi9cbihmdW5jdGlvbihhbmd1bGFyKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnaW5wdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0aWN0OiAnRScsXG4gICAgICAgICAgICByZXF1aXJlOiAnP25nTW9kZWwnLFxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBuZ01vZGVsKSB7XG4gICAgICAgICAgICAgICAgaWYgKCAndHlwZScgaW4gYXR0cnMgJiYgYXR0cnMudHlwZS50b0xvd2VyQ2FzZSgpID09PSAncmFuZ2UnICkge1xuICAgICAgICAgICAgICAgICAgICBuZ01vZGVsLiRwYXJzZXJzLnB1c2gocGFyc2VGbG9hdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pO1xufSkoYW5ndWxhcik7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBvdmVydmlld0N0cmwoJHNjb3BlLCBfKSB7XG4gICAgICAgICRzY29wZS5jYXRlZ29yaXplZEVudGl0aWVzID0ge307XG4gICAgICAgIF8uZm9yRWFjaChfLmtleXMoJHNjb3BlLmVudGl0eVR5cGVzKSwgZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICRzY29wZS5jYXRlZ29yaXplZEVudGl0aWVzW3R5cGVdID0gXy5maWx0ZXIoJHNjb3BlLmVudGl0aWVzLCB7J3R5cGUnOiB0eXBlfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdvdmVydmlld0N0cmwnLCBbJyRzY29wZScsICdfJywgb3ZlcnZpZXdDdHJsXSk7XG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNy8xLzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gYW5hbHl0aWNzQ3RybCgkc2NvcGUpIHtcblxuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdhbmFseXRpY3NDdHJsJywgWyckc2NvcGUnLCBhbmFseXRpY3NDdHJsXSk7XG59KShhbmd1bGFyKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMTAvMTYuXG4gKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgY29udHJvbERlcHMgPSBbXG4gICAgICAgICdlbnRpdHlTZXJ2aWNlJyxcbiAgICAgICAgJ2Nvbm5lY3Rpb25TZXJ2aWNlJyxcbiAgICAgICAgJyRyb290U2NvcGUnLFxuICAgICAgICAnXycsXG4gICAgICAgICckbW9kYWwnLFxuICAgICAgICBjb250cm9sQ3RybFxuICAgIF07XG5cbiAgICBmdW5jdGlvbiBjb250cm9sQ3RybChlbnRpdHlTZXJ2aWNlLCBjb25uZWN0aW9uU2VydmljZSwgJHJvb3RTY29wZSwgXywgJG1vZGFsKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICAgIHZtLmVudGl0eVR5cGVzID0gZW50aXR5U2VydmljZS5nZXRFbnRpdHlUeXBlcygpO1xuICAgICAgICB2bS5jb25uZWN0aW9uVHlwZXMgPSBjb25uZWN0aW9uU2VydmljZS5nZXRDb25uZWN0aW9uVHlwZXMoKTtcbiAgICAgICAgdm0uc2l6ZUJ5TGlzdCA9IFtcbiAgICAgICAgICAgIHsnbmFtZSc6ICdFbXBsb3llZXMnLCAndmFsdWUnOiAnZW1wbG95ZWVzJ30sXG4gICAgICAgICAgICB7J25hbWUnOiAnVHdpdHRlciBGb2xsb3dlcnMnLCAndmFsdWUnOiAnZm9sbG93ZXJzJ31cbiAgICAgICAgXTtcbiAgICAgICAgdm0uc2l6ZUJ5ID0gJ2VtcGxveWVlcyc7XG4gICAgICAgIHZtLnNob3dWaWV3ID0ge1xuICAgICAgICAgICAgJ05ldHdvcmsnOiB0cnVlLFxuICAgICAgICAgICAgJ01hcCc6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIHZtLnN3aXRjaFZpZXcgPSBzd2l0Y2hWaWV3O1xuICAgICAgICB2bS5jaGFuZ2VWaWV3ID0gZnVuY3Rpb24gKHZpZXcpIHtcbiAgICAgICAgICAgIF8uZm9yRWFjaChfLmtleXModm0uc2hvd1ZpZXcpLCBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgICAgIHZtLnNob3dWaWV3W25hbWVdID0gdmlldyA9PT0gbmFtZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCd2aWV3Q2hhbmdlJywgdm0uc2hvd1ZpZXcpO1xuICAgICAgICB9O1xuICAgICAgICB2bS5zaG93QWJvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkbW9kYWwub3Blbih7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbnRyb2wvYWJvdXQuaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ21vZGFsQ3RybCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB2bS50b2dnbGVOb2RlID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgndG9nZ2xlTm9kZScsIHsnbmFtZSc6IHR5cGUsICdlbmFibGVkJzogdm0uZW50aXR5VHlwZXNbdHlwZV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB2bS50b2dnbGVMaW5rID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgndG9nZ2xlTGluaycsIHsnbmFtZSc6IHR5cGUsICdlbmFibGVkJzogdm0uY29ubmVjdGlvblR5cGVzW3R5cGVdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdm0uY2hhbmdlU2l6ZUJ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdjaGFuZ2VTaXplQnknLCB2bS5zaXplQnkpO1xuICAgICAgICB9O1xuICAgICAgICBmdW5jdGlvbiBzd2l0Y2hWaWV3KCkge1xuICAgICAgICAgICAgdm0uY2hhbmdlVmlldyghdm0udG9nZ2xlTmV0d29yayA/ICdNYXAnIDogJ05ldHdvcmsnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZtLmNoYW5nZVNpemVCeSgpO1xuXG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ2NvbnRyb2xDdHJsJywgY29udHJvbERlcHMpO1xuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gZGV0YWlsc0N0cmwoJHNjb3BlLCBfKSB7XG4gICAgICAgICRzY29wZS5pdGVtc1Nob3duRGVmYXVsdCA9IHtcbiAgICAgICAgICAgICdrZXlfcGVvcGxlJzogMyxcbiAgICAgICAgICAgICdncmFudHNfZ2l2ZW4nOiAzLFxuICAgICAgICAgICAgJ2dyYW50c19yZWNlaXZlZCc6IDMsXG4gICAgICAgICAgICAnaW52ZXN0bWVudHNfbWFkZSc6IDMsXG4gICAgICAgICAgICAnaW52ZXN0bWVudHNfcmVjZWl2ZWQnOiAzLFxuICAgICAgICAgICAgJ2NvbGxhYm9yYXRpb25zJzogMyxcbiAgICAgICAgICAgICdlbXBsb3ltZW50cyc6IDMsXG4gICAgICAgICAgICAncmVsYXRpb25zJzogMyxcbiAgICAgICAgICAgICdkYXRhX2dpdmVuJzogMyxcbiAgICAgICAgICAgICdkYXRhX3JlY2VpdmVkJzogMyxcbiAgICAgICAgICAgICdyZXZlbnVlcyc6IDMsXG4gICAgICAgICAgICAnZXhwZW5zZXMnOiAzXG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLml0ZW1zU2hvd24gPSBfLmNsb25lKCRzY29wZS5pdGVtc1Nob3duRGVmYXVsdCk7XG5cbiAgICAgICAgJHNjb3BlLiRvbignZW50aXR5Q2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gUmVzZXQgaXRlbXMgc2hvd24gaW4gZGV0YWlscyBsaXN0LlxuICAgICAgICAgICAgJHNjb3BlLml0ZW1zU2hvd24gPSBfLmNsb25lKCRzY29wZS5pdGVtc1Nob3duRGVmYXVsdCk7XG4gICAgICAgIH0pO1xuICAgICAgICAkc2NvcGUuc2hvd01vcmUgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgJHNjb3BlLml0ZW1zU2hvd25bdHlwZV0gPSAkc2NvcGUuY3VycmVudEVudGl0eVt0eXBlXS5sZW5ndGg7XG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS5zaG93TGVzcyA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAkc2NvcGUuaXRlbXNTaG93blt0eXBlXSA9ICRzY29wZS5pdGVtc1Nob3duRGVmYXVsdFt0eXBlXTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29udHJvbGxlcignZGV0YWlsc0N0cmwnLCBbJyRzY29wZScsIFwiX1wiLCBkZXRhaWxzQ3RybF0pO1xufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBlZGl0Q29udHJvbGxlckRlcHMgPSBbXG4gICAgICAgICckc2NvcGUnLFxuICAgICAgICAnJGh0dHAnLFxuICAgICAgICAnJHRpbWVvdXQnLFxuICAgICAgICAnXycsXG4gICAgICAgICdlbnRpdHlTZXJ2aWNlJyxcbiAgICAgICAgJ2xvY2F0aW9uU2VydmljZScsXG4gICAgICAgICdjb25maWcnLFxuICAgICAgICBlZGl0Q3RybFxuICAgIF07XG5cbiAgICBmdW5jdGlvbiBpc0RlZihvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiAhPT0gdW5kZWZpbmVkICYmIG9iaiAhPT0gbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlZGl0Q3RybCgkc2NvcGUsICRodHRwLCAkdGltZW91dCwgXywgZW50aXR5U2VydmljZSwgbG9jYXRpb25TZXJ2aWNlLCBjb25maWcpIHtcbiAgICAgICAgJHNjb3BlLmlzRWRpdGluZyA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUuZWRpdEVudGl0eSA9IGVudGl0eVNlcnZpY2UuZ2V0RW50aXR5TW9kZWwoJHNjb3BlLmVudGl0eSk7XG4gICAgICAgICRzY29wZS5lbnRpdHlUeXBlcyA9IGVudGl0eVNlcnZpY2UuZ2V0RW50aXR5VHlwZXMoKTtcbiAgICAgICAgJHNjb3BlLmluZmx1ZW5jZVR5cGVzID0gZW50aXR5U2VydmljZS5nZXRJbmZsdWVuY2VUeXBlcygpO1xuXG4gICAgICAgIHZhciBjYXRlZ29yeUJhY2t1cDtcblxuICAgICAgICAkc2NvcGUuY2F0ZWdvcmllcyA9IFtdO1xuXG4gICAgICAgICRzY29wZS5hZGRyZXNzU2VhcmNoID0gZnVuY3Rpb24gKHNlYXJjaCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmpzb25wKCdodHRwczovL2Rldi52aXJ0dWFsZWFydGgubmV0L1JFU1QvdjEvTG9jYXRpb25zJywge1xuICAgICAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICBxdWVyeTogc2VhcmNoLFxuICAgICAgICAgICAgICAgICAgICBrZXk6ICdBaTU4NTgxeUMtU3I3bWNGYllUdFVrUzNpeEU3ZjZadUpuYkZKQ1ZJNGhBdFcxWG9ERWVaeWlkUXoyZ0xDQ3lEJyxcbiAgICAgICAgICAgICAgICAgICAgJ2pzb25wJzogJ0pTT05fQ0FMTEJBQ0snLFxuICAgICAgICAgICAgICAgICAgICAnaW5jbHVkZSc6ICdjaXNvMidcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNEZWYocmVzcG9uc2UuZGF0YS5yZXNvdXJjZVNldHMpICYmIHJlc3BvbnNlLmRhdGEucmVzb3VyY2VTZXRzLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS5yZXNvdXJjZVNldHNbMF0ucmVzb3VyY2VzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnRvZ2dsZUNhdGVnb3J5ID0gZnVuY3Rpb24gKGNhdGVnb3J5KSB7XG4gICAgICAgICAgICBpZiAoJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzLnB1c2goY2F0ZWdvcnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBjYXRlZ29yeUluZGV4IGluICRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzLmhhc093blByb3BlcnR5KGNhdGVnb3J5SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgZW50aXR5Q2F0ZWdvcnkgPSAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzW2NhdGVnb3J5SW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW50aXR5Q2F0ZWdvcnkuaWQgPT09IGNhdGVnb3J5LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHlDYXRlZ29yeS5lbmFibGVkID0gY2F0ZWdvcnkuZW5hYmxlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcy5wdXNoKGNhdGVnb3J5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNldExvY2F0aW9uID0gZnVuY3Rpb24gKGxvY2F0aW9uLCBpc0xhc3QpIHtcbiAgICAgICAgICAgICRzY29wZS5hZGRyZXNzU2VhcmNoKGxvY2F0aW9uLmZvcm1hdHRlZEFkZHJlc3MpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGFwaUNhbGxSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGFwaUNhbGxSZXN1bHRbMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzID0gcmVzdWx0LmFkZHJlc3MsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludCA9IHJlc3VsdC5wb2ludDtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZExvY2F0aW9uKGlzTGFzdCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUGFyc2VzIEFQSSBjYWxsIHJlc3VsdFxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5hZGRyZXNzX2xpbmUgPSBpc0RlZihhZGRyZXNzLmFkZHJlc3NMaW5lKSA/IGFkZHJlc3MuYWRkcmVzc0xpbmUgOiAnJztcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ubG9jYWxpdHkgPSBpc0RlZihhZGRyZXNzLmxvY2FsaXR5KSA/IGFkZHJlc3MubG9jYWxpdHkgOiAnJztcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uZGlzdHJpY3QgPVxuICAgICAgICAgICAgICAgICAgICAgICAgaXNEZWYoYWRkcmVzcy5hZG1pbkRpc3RyaWN0KSA/IGFkZHJlc3MuYWRtaW5EaXN0cmljdCA6ICcnO1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5jb3VudHJ5ID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRGVmKGFkZHJlc3MuY291bnRyeVJlZ2lvbikgPyBhZGRyZXNzLmNvdW50cnlSZWdpb24gOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5jb3VudHJ5X2NvZGUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgaXNEZWYoYWRkcmVzcy5jb3VudHJ5UmVnaW9uSXNvMikgPyBhZGRyZXNzLmNvdW50cnlSZWdpb25Jc28yIDogJyc7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmNvb3JkaW5hdGVzID0gaXNEZWYocG9pbnQuY29vcmRpbmF0ZXMpID8gcG9pbnQuY29vcmRpbmF0ZXMgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5wb3N0YWxfY29kZSA9IGlzRGVmKGFkZHJlc3MucG9zdGFsQ29kZSkgPyBhZGRyZXNzLnBvc3RhbENvZGUgOiBudWxsO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5hZGRMb2NhdGlvbiA9IGZ1bmN0aW9uIChpc0xhc3QpIHtcbiAgICAgICAgICAgIGlmIChpc0xhc3QpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdEVudGl0eS5sb2NhdGlvbnMucHVzaChsb2NhdGlvblNlcnZpY2UuZ2V0TG9jYXRpb25Nb2RlbCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuYWRkS2V5UGVyc29uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gQWRkIGJsYW5rIGZpZWxkIHRvIGVkaXQgaWYgdGhlcmUgYXJlIG5vbmUuXG4gICAgICAgICAgICAvLyBXQVRDSCBPVVQhIFRPRE86IElmIHNvbWVvbmUgZGVsZXRlcyBhbiBvbGQgcGVyc29uLCBkZWxldGUgdGhlaXIgaWQgdG9vLlxuICAgICAgICAgICAgLy8gaS5lLiBtYWtlIHN1cmUgb2xkL2NsZWFyZWQgZm9ybSBmaWVsZHMgYXJlbid0IGJlaW5nIGVkaXRlZCBpbnRvIG5ldyBwZW9wbGUuXG4gICAgICAgICAgICBpZiAoIShfLnNvbWUoJHNjb3BlLmVkaXRFbnRpdHkua2V5X3Blb3BsZSwgeyduYW1lJzogJycsICdpZCc6IG51bGx9KSkpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdEVudGl0eS5rZXlfcGVvcGxlLnB1c2goeyduYW1lJzogJycsICdpZCc6IG51bGx9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2V0RnVuZGluZ0Nvbm5lY3Rpb24gPSBmdW5jdGlvbiAoZW50aXR5LCBmdW5kaW5nKSB7XG4gICAgICAgICAgICAvLyBBZGQgb3RoZXIgZW50aXR5J3MgaWQgdG8gdGhpcyBmaW5hbmNlIGNvbm5lY3Rpb24uXG4gICAgICAgICAgICBmdW5kaW5nLmVudGl0eV9pZCA9IGVudGl0eS5pZDtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuYWRkRnVuZGluZ0Nvbm5lY3Rpb24gPSBmdW5jdGlvbiAoZnVuZGluZykge1xuICAgICAgICAgICAgaWYgKCFfLnNvbWUoZnVuZGluZywgeydlbnRpdHknOiAnJ30pKSB7XG4gICAgICAgICAgICAgICAgLy8gTWF5YmUgc2V0IGFtb3VudCB0byAwIGluc3RlYWQgb2YgbnVsbD9cbiAgICAgICAgICAgICAgICBmdW5kaW5nLnB1c2goeydlbnRpdHknOiAnJywgJ2Ftb3VudCc6IG51bGwsICd5ZWFyJzogbnVsbCwgJ2lkJzogbnVsbH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZXRDb25uZWN0aW9uID0gZnVuY3Rpb24gKGVudGl0eSwgY29ubmVjdGlvbikge1xuICAgICAgICAgICAgY29ubmVjdGlvbi5lbnRpdHlfaWQgPSBlbnRpdHkuaWQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmFkZENvbm5lY3Rpb24gPSBmdW5jdGlvbiAoY29ubmVjdGlvbnMpIHtcbiAgICAgICAgICAgIC8vIEFkZCBhbiBlbXB0eSBjb25uZWN0aW9uIHRvIGVkaXQgaWYgbm9uZSBleGlzdC5cbiAgICAgICAgICAgIGlmICghXy5zb21lKGNvbm5lY3Rpb25zLCB7J2VudGl0eSc6ICcnLCAnaWQnOiBudWxsfSkpIHtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9ucy5wdXNoKHsnZW50aXR5JzogJycsICdpZCc6IG51bGwsICdkZXRhaWxzJzogbnVsbH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5hZGRGaW5hbmNlID0gZnVuY3Rpb24gKHJlY29yZHMpIHtcbiAgICAgICAgICAgIC8vIEFkZCBuZXcgZmluYW5jZSBmaWVsZCBpZiBhbGwgY3VycmVudCBmaWVsZHMgYXJlIHZhbGlkLlxuICAgICAgICAgICAgaWYgKF8uZXZlcnkocmVjb3JkcywgZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIuYW1vdW50ID4gMCAmJiByLnllYXIgPiAxNzUwO1xuICAgICAgICAgICAgICAgIH0pKSB7XG4gICAgICAgICAgICAgICAgcmVjb3Jkcy5wdXNoKHsnYW1vdW50JzogbnVsbCwgJ3llYXInOiBudWxsLCAnaWQnOiBudWxsfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2NvcGUuaXNTYXZpbmcgPSB0cnVlO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmVkaXRFbnRpdHkuZ2VuZXJhdGVEQk1vZGVsKCkpO1xuXG4gICAgICAgICAgICAkaHR0cC5wb3N0KGNvbmZpZy5hcGlIb3N0ICsgJ2FwaS9zYXZlJywgeydlbnRpdHknOiAkc2NvcGUuZWRpdEVudGl0eS5nZW5lcmF0ZURCTW9kZWwoKX0pXG4gICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pc1NhdmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGVtaXQoXCJlZGl0RW50aXR5U3VjY2Vzc1wiLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIENhbGwgdG8gaG9tZUN0cmwncyBwYXJlbnQgc3RvcEVkaXQoKSB0byBjaGFuZ2UgdmlldyBiYWNrIGFuZCBhbnkgb3RoZXJcbiAgICAgICAgICAgICAgICAgICAgLy8gaGlnaC1sZXZlbCBjaGFuZ2VzLlxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2FuY2VsRWRpdCgpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmlzRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXNFcnJvciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuY2FuY2VsRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuJHdhdGNoKCdlbnRpdHknLCBmdW5jdGlvbiAobmV3VmFsLCBvbGRWYWwpIHtcbiAgICAgICAgICAgIGlmIChhbmd1bGFyLmVxdWFscyhuZXdWYWwsIG9sZFZhbCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5lbnRpdHkpO1xuXG4gICAgICAgICAgICAkc2NvcGUuZWRpdEVudGl0eSA9IGVudGl0eVNlcnZpY2UuZ2V0RW50aXR5TW9kZWwobmV3VmFsKTtcbiAgICAgICAgICAgICRzY29wZS5jYXRlZ29yaWVzID0gYW5ndWxhci5jb3B5KGNhdGVnb3J5QmFja3VwKTtcblxuICAgICAgICAgICAgaW5pdENhdGVnb3J5QXJyYXkoKTtcblxuICAgICAgICAgICAgJHNjb3BlLmlzRWRpdGluZyA9IGlzRGVmKCRzY29wZS5lZGl0RW50aXR5LmlkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXRpYWxpemVzIGNhdGVnb3J5IGZpZWxkcyB3aXRoIGVudGl0eSB2YWx1ZXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIExvb3BzIHRocm91Z2ggY2F0ZWdvcnkgaW4gY2F0ZWdvcmllcyBhbmQgbG9vcHMgdGhyb3VnaCBjYXRlZ29yeSBpbiBlbnRpdHkuIElkZW50aWZpZXNcbiAgICAgICAgICogY2F0ZWdvcmllcyBlbmFibGVkIGluIHRoZSBlbnRpdHkgYW5kIHNldHMgbG9jYWwgZGlzcGxheSBkYXRhLiBUaGlzIGlzIGJlY2F1c2Ugd2UgY3JlYXRlZFxuICAgICAgICAgKiBhIGJhY2t1cCBvZiBlbnRpdHkgZGF0YSBzbyB0aGF0IHRoZSBhcGkgZGF0YSBpcyBub3QgdGFtcGVyZWQgd2l0aCBkaXJlY3RseS5cbiAgICAgICAgICpcbiAgICAgICAgICogVE9ETzogcmVwbGFjZSB3aXRoIGJldHRlciBkYXRhIHN0cnVjdHVyZSBmb3IgY2F0ZWdvcmllcy5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGluaXRDYXRlZ29yeUFycmF5KCkge1xuICAgICAgICAgICAgdmFyIGNhdGVnb3J5LFxuICAgICAgICAgICAgICAgIGNhdGVnb3J5SW5kZXgsXG4gICAgICAgICAgICAgICAgZW50aXR5Q2F0ZWdvcnlJbmRleCxcbiAgICAgICAgICAgICAgICBlbnRpdHlDYXRlZ29yeTtcblxuICAgICAgICAgICAgZm9yIChjYXRlZ29yeUluZGV4IGluICRzY29wZS5jYXRlZ29yaWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuY2F0ZWdvcmllcy5oYXNPd25Qcm9wZXJ0eShjYXRlZ29yeUluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0ZWdvcnkgPSAkc2NvcGUuY2F0ZWdvcmllc1tjYXRlZ29yeUluZGV4XTtcbiAgICAgICAgICAgICAgICBmb3IgKGVudGl0eUNhdGVnb3J5SW5kZXggaW4gJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMuaGFzT3duUHJvcGVydHkoZW50aXR5Q2F0ZWdvcnlJbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eUNhdGVnb3J5ID0gJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllc1tlbnRpdHlDYXRlZ29yeUluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhdGVnb3J5LmlkID09PSBlbnRpdHlDYXRlZ29yeS5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnkuZW5hYmxlZCA9IGVudGl0eUNhdGVnb3J5LmVuYWJsZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXRyaWV2ZSBDYXRlZ29yaWVzIGZyb20gREJcbiAgICAgICAgJGh0dHAuZ2V0KGNvbmZpZy5hcGlIb3N0ICsgJ2FwaS9jYXRlZ29yaWVzJylcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgY2F0ZWdvcnlCYWNrdXAgPSBkYXRhLmNhdGVnb3JpZXM7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlcyBiYWNrdXAgb2YgZGF0YSB1c2luZyBBbmd1bGFyIHRvIHByZXZlbnQgYXBpIGRhdGEgZnJvbSBiZWluZyB0YW1wZXJlZFxuICAgICAgICAgICAgICAgIC8vIGRpcmVjdGx5XG4gICAgICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3JpZXMgPSBhbmd1bGFyLmNvcHkoY2F0ZWdvcnlCYWNrdXApO1xuICAgICAgICAgICAgICAgIC8vICRzY29wZS5jYXRlZ29yaWVzID0gZGF0YS5jYXRlZ29yaWVzO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ2VkaXRDdHJsJywgZWRpdENvbnRyb2xsZXJEZXBzKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjgvMTYuXG4gKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgY2F0ZWdvcnlTZXJ2aWNlRGVwZW5kZW5jaWVzID0gW1xuICAgICAgICBDYXRlZ29yeVNlcnZpY2VcbiAgICBdO1xuXG4gICAgZnVuY3Rpb24gQ2F0ZWdvcnlTZXJ2aWNlKCkge1xuXG4gICAgICAgIGZ1bmN0aW9uIGlzRGVmKG8pIHsgcmV0dXJuIG8gIT09IHVuZGVmaW5lZCAmJiBvICE9PSBudWxsOyB9XG5cbiAgICAgICAgZnVuY3Rpb24gQ2F0ZWdvcnkob2JqKSB7XG4gICAgICAgICAgICB2YXIgZGVmT2JqID0gaXNEZWYob2JqKSA/IG9iaiA6IHt9O1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gKGlzRGVmKGRlZk9iai5uYW1lKSA/IGRlZk9iai5uYW1lIDogbnVsbCk7XG4gICAgICAgICAgICB0aGlzLmVuYWJsZWQgPSAoaXNEZWYoZGVmT2JqLmVuYWJsZSkgPyBkZWZPYmouZW5hYmxlZCA6IHRydWUpO1xuICAgICAgICAgICAgdGhpcy5pZCA9IChpc0RlZihkZWZPYmouaWQpID8gZGVmT2JqLmlkIDogbnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmdldENhdGVnb3J5TW9kZWwgPSBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2F0ZWdvcnkob2JqKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuc2VydmljZSgnY2F0ZWdvcnlTZXJ2aWNlJywgY2F0ZWdvcnlTZXJ2aWNlRGVwZW5kZW5jaWVzKTtcblxufSkoYW5ndWxhcik7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxuICovXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBjb25uZWN0aW9uU2VydmljZSA9IFtDb25uZWN0aW9uc107XG4gICAgdmFyIGNvbm5lY3Rpb25UeXBlcyA9IHtcbiAgICAgICAgJ0Z1bmRpbmcnOiB0cnVlLFxuICAgICAgICAnRGF0YSc6IHRydWUsXG4gICAgICAgICdFbXBsb3ltZW50JzogdHJ1ZSxcbiAgICAgICAgJ0NvbGxhYm9yYXRpb24nOiB0cnVlXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGlzRGVmKG8pIHtcbiAgICAgICAgcmV0dXJuIG8gIT09IHVuZGVmaW5lZCAmJiBvICE9PSBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIENvbm5lY3Rpb25zKCkge1xuICAgICAgICBmdW5jdGlvbiBDb25uZWN0aW9uKG9iaikge1xuICAgICAgICAgICAgdmFyIG9iaklzRGVmID0gaXNEZWYob2JqKTtcbiAgICAgICAgICAgIHRoaXMuZW50aXR5ID0gKG9iaklzRGVmICYmIGlzRGVmKG9iai5lbnRpdHkpID8gb2JqLmVudGl0eSA6IG51bGwpO1xuICAgICAgICAgICAgdGhpcy5pZCA9IChvYmpJc0RlZiAmJiBpc0RlZihvYmouaWQpID8gb2JqLmlkIDogbnVsbCk7XG4gICAgICAgICAgICB0aGlzLmRldGFpbHMgPSAob2JqSXNEZWYgJiYgaXNEZWYob2JqLmRldGFpbHMpID8gb2JqLmRldGFpbHMgOiBudWxsKTtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IChvYmpJc0RlZiAmJiBpc0RlZihvYmoubmFtZSkgPyBvYmoubmFtZTogbnVsbCk7XG4gICAgICAgICAgICB0aGlzLmVudGl0eV9pZCA9IChvYmpJc0RlZiAmJiBpc0RlZihvYmouZW50aXR5X2lkKSA/IG9iai5lbnRpdHlfaWQ6IG51bGwpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5nZXRDb25uZWN0aW9uTW9kZWwgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IENvbm5lY3Rpb24ob2JqKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmdldENvbm5lY3Rpb25UeXBlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uVHlwZXM7XG4gICAgICAgIH07XG4gICAgfVxuXG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuc2VydmljZSgnY29ubmVjdGlvblNlcnZpY2UnLCBjb25uZWN0aW9uU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNy8xNi5cbiAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBlbnRpdHlTZXJ2aWNlRGVwZW5kZW5jaWVzID0gW1xuICAgICAgICAnZnVuZGluZ0Nvbm5lY3Rpb25TZXJ2aWNlJyxcbiAgICAgICAgJ2Nvbm5lY3Rpb25TZXJ2aWNlJyxcbiAgICAgICAgJ2ZpbmFuY2VTZXJ2aWNlJyxcbiAgICAgICAgJ2xvY2F0aW9uU2VydmljZScsXG4gICAgICAgICdjYXRlZ29yeVNlcnZpY2UnLFxuICAgICAgICBFbnRpdHlTZXJ2aWNlXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIEVudGl0eVNlcnZpY2UoZnVuZGluZ0Nvbm5lY3Rpb25TZXJ2aWNlLCBjb25uZWN0aW9uU2VydmljZSwgZmluYW5jZVNlcnZpY2UsIGxvY2F0aW9uU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5U2VydmljZVxuICAgICkge1xuXG4gICAgICAgIHZhciBlbnRpdHlUeXBlcyA9IHtcbiAgICAgICAgICAgICdHb3Zlcm5tZW50JzogdHJ1ZSxcbiAgICAgICAgICAgICdGb3ItUHJvZml0JzogdHJ1ZSxcbiAgICAgICAgICAgICdOb24tUHJvZml0JzogdHJ1ZSxcbiAgICAgICAgICAgICdJbmRpdmlkdWFsJzogdHJ1ZVxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBpbmZsdWVuY2VUeXBlcyA9IFtcbiAgICAgICAgICAgICdMb2NhbCcsXG4gICAgICAgICAgICAnTmF0aW9uYWwnLFxuICAgICAgICAgICAgJ0dsb2JhbCdcbiAgICAgICAgXTtcblxuICAgICAgICBmdW5jdGlvbiBpc0RlZihvKSB7XG4gICAgICAgICAgICByZXR1cm4gbyAhPT0gdW5kZWZpbmVkICYmIG8gIT09IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBsb29wQW5kSW5pdChtb2RlbEFycmF5LCBpbml0TW9kZWxGdW5jdGlvbikge1xuICAgICAgICAgICAgaWYoICEoIGlzRGVmKG1vZGVsQXJyYXkpIHx8IGFuZ3VsYXIuaXNBcnJheShtb2RlbEFycmF5KSApICkgcmV0dXJuIFtpbml0TW9kZWxGdW5jdGlvbigpXTtcbiAgICAgICAgICAgIHZhciBhcnJheUluZGV4LFxuICAgICAgICAgICAgICAgIGFycmF5VmFsdWUsXG4gICAgICAgICAgICAgICAgbmV3TW9kZWxBcnJheSA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKCBhcnJheUluZGV4IGluIG1vZGVsQXJyYXkgKSB7XG4gICAgICAgICAgICAgICAgaWYoIW1vZGVsQXJyYXkuaGFzT3duUHJvcGVydHkoYXJyYXlJbmRleCkpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGFycmF5VmFsdWUgPSBtb2RlbEFycmF5W2FycmF5SW5kZXhdO1xuXG4gICAgICAgICAgICAgICAgaWYoIWFuZ3VsYXIuaXNPYmplY3QoYXJyYXlWYWx1ZSkpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgbmV3TW9kZWxBcnJheS5wdXNoKGluaXRNb2RlbEZ1bmN0aW9uKGFycmF5VmFsdWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ld01vZGVsQXJyYXkucHVzaChpbml0TW9kZWxGdW5jdGlvbigpKTtcblxuICAgICAgICAgICAgcmV0dXJuIG5ld01vZGVsQXJyYXk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBFbnRpdHkob2JqKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZGVmT2JqID0gaXNEZWYob2JqKSA/IG9iaiA6IHt9O1xuICAgICAgICAgICAgLy8gVE9ETzogRG8gYSBsb29wIHRvIGdlbmVyYXRlIHRoZXNlIGxvY2F0aW9ucyBhcyBtb2RlbHMsIGluIG9yZGVyIHRvIHVzZSB0aGUgZnVuY3Rpb25zIGluIG1vZGVsXG4gICAgICAgICAgICAvLyB0aGlzLmxvY2F0aW9ucyA9IChpc0RlZihkZWZPYmoubG9jYXRpb25zKSA/IGRlZk9iai5sb2NhdGlvbnMgOiBbbG9jYXRpb25TZXJ2aWNlLmdldExvY2F0aW9uTW9kZWwoKV0pO1xuICAgICAgICAgICAgLy8gVE9ETzogRG8gdGhpcyBmb3IgZXZlcnkgYXJyYXkgaW4gdGhpcyBtb2RlbFxuICAgICAgICAgICAgdGhpcy5pZCA9IChpc0RlZihkZWZPYmouaWQpID8gZGVmT2JqLmlkIDogbnVsbCk7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSAoaXNEZWYoZGVmT2JqLm5hbWUpID8gZGVmT2JqLm5hbWUgOiBudWxsKTtcbiAgICAgICAgICAgIHRoaXMubG9jYXRpb25zID0gbG9vcEFuZEluaXQoZGVmT2JqLmxvY2F0aW9ucywgbG9jYXRpb25TZXJ2aWNlLmdldExvY2F0aW9uTW9kZWwpO1xuICAgICAgICAgICAgdGhpcy5pbmZsdWVuY2UgPSAoaXNEZWYoZGVmT2JqLmluZmx1ZW5jZSkgPyBkZWZPYmouaW5mbHVlbmNlIDogbnVsbCk7XG4gICAgICAgICAgICB0aGlzLmdyYW50c19yZWNlaXZlZCA9IGxvb3BBbmRJbml0KGRlZk9iai5ncmFudHNfcmVjZWl2ZWQsIGZ1bmRpbmdDb25uZWN0aW9uU2VydmljZS5nZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHRoaXMuaW52ZXN0bWVudHNfcmVjZWl2ZWQgPSBsb29wQW5kSW5pdChkZWZPYmouaW52ZXN0bWVudHNfcmVjZWl2ZWQsIGZ1bmRpbmdDb25uZWN0aW9uU2VydmljZS5nZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHRoaXMuZ3JhbnRzX2dpdmVuID0gbG9vcEFuZEluaXQoZGVmT2JqLmdyYW50c19naXZlbiwgZnVuZGluZ0Nvbm5lY3Rpb25TZXJ2aWNlLmdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgdGhpcy5pbnZlc3RtZW50c19tYWRlID0gbG9vcEFuZEluaXQoZGVmT2JqLmludmVzdG1lbnRzX21hZGUsIGZ1bmRpbmdDb25uZWN0aW9uU2VydmljZS5nZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHRoaXMuZGF0YV9naXZlbiA9IGxvb3BBbmRJbml0KGRlZk9iai5kYXRhX2dpdmVuLCBjb25uZWN0aW9uU2VydmljZS5nZXRDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgdGhpcy5kYXRhX3JlY2VpdmVkID0gbG9vcEFuZEluaXQoZGVmT2JqLmRhdGFfcmVjZWl2ZWQsIGNvbm5lY3Rpb25TZXJ2aWNlLmdldENvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICB0aGlzLmNvbGxhYm9yYXRpb25zID0gbG9vcEFuZEluaXQoZGVmT2JqLmNvbGxhYm9yYXRpb25zLCBjb25uZWN0aW9uU2VydmljZS5nZXRDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgdGhpcy5rZXlfcGVvcGxlID0gbG9vcEFuZEluaXQoZGVmT2JqLmtleV9wZW9wbGUsIGNvbm5lY3Rpb25TZXJ2aWNlLmdldENvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICB0aGlzLmVtcGxveW1lbnRzID0gbG9vcEFuZEluaXQoZGVmT2JqLmVtcGxveW1lbnRzLCBjb25uZWN0aW9uU2VydmljZS5nZXRDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgdGhpcy5yZXZlbnVlcyA9IGxvb3BBbmRJbml0KGRlZk9iai5yZXZlbnVlcywgZmluYW5jZVNlcnZpY2UuZ2V0RmluYW5jZU1vZGVsKTtcbiAgICAgICAgICAgIHRoaXMuZXhwZW5zZXMgPSBsb29wQW5kSW5pdChkZWZPYmouZXhwZW5zZXMsIGZpbmFuY2VTZXJ2aWNlLmdldEZpbmFuY2VNb2RlbCk7XG4gICAgICAgICAgICB0aGlzLmNhdGVnb3JpZXMgPSBsb29wQW5kSW5pdChkZWZPYmouY2F0ZWdvcmllcywgY2F0ZWdvcnlTZXJ2aWNlLmdldENhdGVnb3J5TW9kZWwpO1xuICAgICAgICAgICAgdGhpcy50eXBlID0gKGlzRGVmKGRlZk9iai50eXBlKSA/IGRlZk9iai50eXBlIDogbnVsbCk7XG4gICAgICAgICAgICB0aGlzLm5pY2tuYW1lID0gKGlzRGVmKGRlZk9iai5uaWNrbmFtZSkgPyBkZWZPYmoubmlja25hbWUgOiBudWxsKTtcbiAgICAgICAgICAgIHRoaXMudXJsID0gKGlzRGVmKGRlZk9iai51cmwpID8gZGVmT2JqLnVybCA6IG51bGwpO1xuICAgICAgICAgICAgdGhpcy50d2l0dGVyX2hhbmRsZSA9IChpc0RlZihkZWZPYmoudHdpdHRlcl9oYW5kbGUpID8gZGVmT2JqLnR3aXR0ZXJfaGFuZGxlIDogbnVsbCk7XG4gICAgICAgICAgICB0aGlzLmVtcGxveWVlcyA9IChpc0RlZihkZWZPYmouZW1wbG95ZWVzKSA/IGRlZk9iai5lbXBsb3llZXMgOiBudWxsKTtcbiAgICAgICAgICAgIC8vIHRoaXMucmVsYXRpb25zID0gbG9vcEFuZEluaXQoZGVmT2JqLnJlbGF0aW9ucywgY29ubmVjdGlvblNlcnZpY2UuZ2V0Q29ubmVjdGlvbk1vZGVsKTtcblxuXG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlREJNb2RlbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBkYk1vZGVsID0gbmV3IEVudGl0eShzZWxmKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmxvY2F0aW9ucy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmxvY2F0aW9ucy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmdyYW50c19yZWNlaXZlZC5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmdyYW50c19yZWNlaXZlZC5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmdyYW50c19naXZlbi5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmdyYW50c19naXZlbi5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmludmVzdG1lbnRzX3JlY2VpdmVkLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuaW52ZXN0bWVudHNfcmVjZWl2ZWQucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5pbnZlc3RtZW50c19tYWRlLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuaW52ZXN0bWVudHNfbWFkZS5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmRhdGFfZ2l2ZW4ucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5kYXRhX2dpdmVuLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZGF0YV9yZWNlaXZlZC5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmRhdGFfcmVjZWl2ZWQucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5jb2xsYWJvcmF0aW9ucy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmNvbGxhYm9yYXRpb25zLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwua2V5X3Blb3BsZS5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmtleV9wZW9wbGUucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5lbXBsb3ltZW50cy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmVtcGxveW1lbnRzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwucmV2ZW51ZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5yZXZlbnVlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmV4cGVuc2VzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZXhwZW5zZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5jYXRlZ29yaWVzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuY2F0ZWdvcmllcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmRlc2NyaXB0aW9uID0gJyc7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGJNb2RlbCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZGJNb2RlbDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZ2V0RW50aXR5TW9kZWwgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEVudGl0eShvYmopO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZ2V0RW50aXR5VHlwZXMgPSBmdW5jdGlvbiAoKXtcbiAgICAgICAgICAgIHJldHVybiBlbnRpdHlUeXBlcztcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmdldEluZmx1ZW5jZVR5cGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGluZmx1ZW5jZVR5cGVzO1xuICAgICAgICB9O1xuXG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLnNlcnZpY2UoJ2VudGl0eVNlcnZpY2UnLCBlbnRpdHlTZXJ2aWNlRGVwZW5kZW5jaWVzKTtcblxuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNy8xNi5cbiAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBmaW5hbmNlU2VydmljZSA9IFtGaW5hbmNlU2VydmljZV07XG5cbiAgICBmdW5jdGlvbiBpc0RlZihvKSB7XG4gICAgICAgIHJldHVybiBvICE9PSB1bmRlZmluZWQgJiYgbyAhPT0gbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBGaW5hbmNlU2VydmljZSgpIHtcbiAgICAgICAgZnVuY3Rpb24gRmluYW5jZShvYmopIHtcbiAgICAgICAgICAgIHZhciBkZWZPYmogPSBpc0RlZihvYmopID8gb2JqIDoge307XG4gICAgICAgICAgICB0aGlzLmFtb3VudCA9IChpc0RlZihkZWZPYmouYW1vdW50KSAmJiBkZWZPYmouYW1vdW50ID49IDAgPyBkZWZPYmouYW1vdW50IDogMCk7XG4gICAgICAgICAgICB0aGlzLnllYXIgPSAoaXNEZWYoZGVmT2JqLnllYXIpICYmIGRlZk9iai55ZWFyID49IDE3NTAgPyBkZWZPYmoueWVhciA6IG51bGwpO1xuICAgICAgICAgICAgdGhpcy5pZCA9IChpc0RlZihkZWZPYmouaWQpID8gZGVmT2JqLmlkIDogbnVsbCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZ2V0RmluYW5jZU1vZGVsID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBGaW5hbmNlKG9iaik7XG4gICAgICAgIH07XG4gICAgfVxuXG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuc2VydmljZSgnZmluYW5jZVNlcnZpY2UnLCBmaW5hbmNlU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNy8xNi5cbiAqL1xuXG4oZnVuY3Rpb24oYW5ndWxhcil7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgZnVuZGluZ0Nvbm5lY3Rpb25TZXJ2aWNlRGVwZW5kZW5jaWVzID0gW0Z1bmRpbmdDb25uZWN0aW9uc107XG5cbiAgICBmdW5jdGlvbiBpc0RlZihvKSB7IHJldHVybiBvICE9PSB1bmRlZmluZWQgJiYgbyAhPT0gbnVsbDsgfVxuXG4gICAgZnVuY3Rpb24gRnVuZGluZ0Nvbm5lY3Rpb25zKCkge1xuICAgICAgICBmdW5jdGlvbiBGdW5kaW5nQ29ubmVjdGlvbihvYmopIHtcbiAgICAgICAgICAgIHZhciBvYmpJc0RlZiA9IGlzRGVmKG9iaik7XG4gICAgICAgICAgICB0aGlzLmVudGl0eSA9IChvYmpJc0RlZiAmJiBpc0RlZihvYmouZW50aXR5KSA/IG9iai5lbnRpdHkgOiAnJyk7XG4gICAgICAgICAgICB0aGlzLmFtb3VudCA9IChvYmpJc0RlZiAmJiBpc0RlZihvYmouYW1vdW50KSA/IG9iai5hbW91bnQ6IG51bGwpO1xuICAgICAgICAgICAgdGhpcy55ZWFyID0gKG9iaklzRGVmICYmIGlzRGVmKG9iai55ZWFyKSA/IG9iai55ZWFyIDogbnVsbCk7XG4gICAgICAgICAgICB0aGlzLmlkID0gKG9iaklzRGVmICYmIGlzRGVmKG9iai5pZCkgPyBvYmouaWQgOiBudWxsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbCA9IGZ1bmN0aW9uKG9iail7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZ1bmRpbmdDb25uZWN0aW9uKG9iaik7XG4gICAgICAgIH07XG5cblxuXG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLnNlcnZpY2UoJ2Z1bmRpbmdDb25uZWN0aW9uU2VydmljZScsIGZ1bmRpbmdDb25uZWN0aW9uU2VydmljZURlcGVuZGVuY2llcyk7XG5cblxuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNy8xNi5cbiAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBsb2NhdGlvblNlcnZpY2VEZXBlbmRlbmNpZXMgPSBbTG9jYXRpb25TZXJ2aWNlXTtcblxuXG5cbiAgICBmdW5jdGlvbiBMb2NhdGlvblNlcnZpY2UoKXtcblxuICAgICAgICBmdW5jdGlvbiBpc0RlZihvKSB7XG4gICAgICAgICAgICByZXR1cm4gbyAhPT0gdW5kZWZpbmVkICYmIG8gIT09IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBMb2NhdGlvbihvYmopIHtcbiAgICAgICAgICAgIHZhciBkZWZPYmogPSBpc0RlZihvYmopID8gb2JqIDoge307XG4gICAgICAgICAgICB0aGlzLmFkZHJlc3NfbGluZSA9IChpc0RlZihkZWZPYmouYWRkcmVzc19saW5lKSA/IGRlZk9iai5hZGRyZXNzX2xpbmUgOiBudWxsKTtcbiAgICAgICAgICAgIHRoaXMubG9jYWxpdHkgPSAoaXNEZWYoZGVmT2JqLmxvY2FsaXR5KSA/IGRlZk9iai5sb2NhbGl0eSA6IG51bGwpO1xuICAgICAgICAgICAgdGhpcy5kaXN0cmljdCA9IChpc0RlZihkZWZPYmouZGlzdHJpY3QpID8gZGVmT2JqLmRpc3RyaWN0IDogbnVsbCk7XG4gICAgICAgICAgICB0aGlzLnBvc3RhbF9jb2RlID0gKGlzRGVmKGRlZk9iai5wb3N0YWxfY29kZSkgPyBkZWZPYmoucG9zdGFsX2NvZGUgOiBudWxsKTtcbiAgICAgICAgICAgIHRoaXMuY291bnRyeSA9IChpc0RlZihkZWZPYmouY291bnRyeSkgPyBkZWZPYmouY291bnRyeSA6IG51bGwpO1xuICAgICAgICAgICAgdGhpcy5jb3VudHJ5X2NvZGUgPSAoaXNEZWYoZGVmT2JqLmNvdW50cnlfY29kZSkgPyBkZWZPYmouY291bnRyeV9jb2RlIDogbnVsbCk7XG4gICAgICAgICAgICB0aGlzLmNvb3JkaW5hdGVzID0gKGlzRGVmKGRlZk9iai5jb29yZGluYXRlcykgPyBkZWZPYmouY29vcmRpbmF0ZXMgOiBudWxsKTtcbiAgICAgICAgICAgIHRoaXMuaWQgPSAoaXNEZWYoZGVmT2JqLmlkKSA/IGRlZk9iai5pZCA6IG51bGwpO1xuICAgICAgICAgICAgdGhpcy5mb3JtYXR0ZWRBZGRyZXNzID0gKGlzRGVmKHRoaXMuYWRkcmVzc19saW5lKSA/IHRoaXMuYWRkcmVzc19saW5lICsgICcgJyA6ICcnKVxuICAgICAgICAgICAgICAgICsgKGlzRGVmKHRoaXMubG9jYWxpdHkpID8gdGhpcy5sb2NhbGl0eSArICcsICcgOiAnJylcbiAgICAgICAgICAgICAgICArIChpc0RlZih0aGlzLmNvdW50cnlfY29kZSkgPyB0aGlzLmNvdW50cnlfY29kZSArICcgJyA6ICcnKVxuICAgICAgICAgICAgICAgICsgKGlzRGVmKHRoaXMucG9zdGFsX2NvZGUpID8gdGhpcy5wb3N0YWxfY29kZSA6ICcnKTtcbiAgICAgICAgICAgIHRoaXMuZm9ybWF0dGVkQWRkcmVzcyA9IHRoaXMuZm9ybWF0dGVkQWRkcmVzcy50cmltKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmdldExvY2F0aW9uTW9kZWwgPSBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTG9jYXRpb24ob2JqKTtcbiAgICAgICAgfTtcblxuICAgIH1cblxuXG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuc2VydmljZSgnbG9jYXRpb25TZXJ2aWNlJywgbG9jYXRpb25TZXJ2aWNlRGVwZW5kZW5jaWVzKTtcblxufSkoYW5ndWxhcik7IiwiKGZ1bmN0aW9uIChhbmd1bGFyLCBkMywgTCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBkZXBlbmRlbmNpZXMgPSBbXG4gICAgICAgICckc2NvcGUnLFxuICAgICAgICAnJHRpbWVvdXQnLFxuICAgICAgICAnbGVhZmxldERhdGEnLFxuICAgICAgICAnXycsXG4gICAgICAgICckZmlsdGVyJyxcbiAgICAgICAgbWFwQ3RybFxuICAgIF07XG5cbiAgICBmdW5jdGlvbiBtYXBDdHJsKCRzY29wZSwgJHRpbWVvdXQsIGxlYWZsZXREYXRhLCBfLCAkZmlsdGVyKSB7XG5cbiAgICAgICAgJHNjb3BlLm9wdGlvbnMgPSB7XG4gICAgICAgICAgICBjZW50ZXIgIDoge1xuICAgICAgICAgICAgICAgIGxhdCA6IDIwLjAwLFxuICAgICAgICAgICAgICAgIGxuZyA6IC00MC4wMCxcbiAgICAgICAgICAgICAgICB6b29tOiAzXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgICAgICB0aWxlTGF5ZXIgICAgICAgICA6ICdodHRwczovL2FwaS50aWxlcy5tYXBib3guY29tL3Y0L21hcGJveC5saWdodC97en0ve3h9L3t5fS5wbmc/YWNjZXNzX3Rva2VuPXBrLmV5SjFJam9pWkdGMmFXUnNjbTUwSWl3aVlTSTZJakEwTTJSa056TXpaV0ptTnpFek5HWXpNVGRoWVRFeFl6QXlabVU0WlRFMUluMC5UTllsRnRhMlZJdHJrbjRMMFo5QkpRJyxcbiAgICAgICAgICAgICAgICB0aWxlTGF5ZXJPcHRpb25zICA6IHtcbiAgICAgICAgICAgICAgICAgICAgZGV0ZWN0UmV0aW5hOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICByZXVzZVRpbGVzICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB6b29tQ29udHJvbCAgICAgICA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGF0dHJpYnV0aW9uQ29udHJvbDogZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY3JlYXRlUGllQ2hhcnQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhICAgPSBvcHRpb25zLmRhdGE7XG4gICAgICAgICAgICAgICAgdmFyIHBpZSAgICA9IGQzLmxheW91dC5waWUoKS5zb3J0KG51bGwpLnZhbHVlKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnZhbHVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZhciBhcmMgICAgPSBkMy5zdmcuYXJjKCkub3V0ZXJSYWRpdXMob3B0aW9ucy5yKS5pbm5lclJhZGl1cyhvcHRpb25zLnIgLSAxMCk7XG4gICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IG9wdGlvbnMuciArIG9wdGlvbnMuc3Ryb2tlV2lkdGg7XG4gICAgICAgICAgICAgICAgdmFyIHcgICAgICA9IGNlbnRlciAqIDI7XG4gICAgICAgICAgICAgICAgdmFyIGggICAgICA9IHc7XG4gICAgICAgICAgICAgICAgdmFyIHN2ZyAgICA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhkMy5ucy5wcmVmaXguc3ZnLCAnc3ZnJyk7XG4gICAgICAgICAgICAgICAgdmFyIHZpcyAgICA9IGQzLnNlbGVjdChzdmcpXG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKGRhdGEpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdwaWVjaGFydCcpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHcpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBoKTtcblxuICAgICAgICAgICAgICAgIHZhciBhcmNzID0gdmlzLnNlbGVjdEFsbCgnLmFyYycpXG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKHBpZShkYXRhKSlcbiAgICAgICAgICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKCdnJylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2FyYycpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBjZW50ZXIgKyAnLCcgKyBjZW50ZXIgKyAnKScpO1xuXG4gICAgICAgICAgICAgICAgLy8gdmFyIG1hcCA9IEwubWFwYm94Lm1hcCgnbWFwJywgJ2V4YW1wbGVzLm1hcC05aWp1azI0eScsIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgbWluWm9vbTogMSxcbiAgICAgICAgICAgICAgICAvLyAgICAgbWF4Wm9vbTogMlxuICAgICAgICAgICAgICAgIC8vIH0pLnNldFZpZXcoWzQwLCAtNzQuNTBdLCA5KTtcblxuICAgICAgICAgICAgICAgIGFyY3MuYXBwZW5kKCdwYXRoJylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCBhcmMpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5kYXRhLnR5cGUgKyAnLWFyYyc7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgYXJjcy5hcHBlbmQoXCJzdmc6dGV4dFwiKVxuICAgICAgICAgICAgICAgICAgICAudGV4dChmdW5jdGlvbiAoZCwgaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5jb3VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIC00ICogb3B0aW9ucy5jb3VudC50b1N0cmluZygpLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJkeVwiLCA1KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiYXJjVGV4dFwiKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB3aW5kb3cuWE1MU2VyaWFsaXplciA/IChuZXcgd2luZG93LlhNTFNlcmlhbGl6ZXIoKSkuc2VyaWFsaXplVG9TdHJpbmcoc3ZnKVxuICAgICAgICAgICAgICAgICAgICA6IHN2Zy54bWwgPyBzdmcueG1sIDogJyc7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBsZWFmbGV0RGF0YS5nZXRNYXAoKS50aGVuKGZ1bmN0aW9uIChtYXApIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWRFbnRpdGllcyA9ICRmaWx0ZXIoJ2ZpbHRlcicpKCRzY29wZS5lbnRpdGllcyxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW50aXR5LmNvbGxhYm9yYXRpb25zLmxlbmd0aCA+IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgbWFwLmludmFsaWRhdGVTaXplKCk7XG5cbiAgICAgICAgICAgICAgICBuZXcgTC5Db250cm9sLlpvb20oe3Bvc2l0aW9uOiAndG9wcmlnaHQnfSkuYWRkVG8obWFwKTtcbiAgICAgICAgICAgICAgICBMLmNvbnRyb2wubG9jYXRlKFxuICAgICAgICAgICAgICAgICAgICB7cG9zaXRpb246ICd0b3ByaWdodCcsIHNob3dQb3B1cDogZmFsc2UsIGljb246ICdmYSBmYS1sb2NhdGlvbi1hcnJvdyd9XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVG8obWFwKTtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNsdXN0ZXJJY29uKGNsdXN0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkcmVuICAgICAgID0gY2x1c3Rlci5nZXRBbGxDaGlsZE1hcmtlcnMoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvdGFsICAgICAgICAgID0gY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2x1c3Rlck1hcmtlcnMgPSBfLnBsdWNrKGNoaWxkcmVuLCAnb3B0aW9ucycpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRzICAgICAgICAgPSBfLm1hcChfLmNvdW50QnkoY2x1c3Rlck1hcmtlcnMsICd0eXBlJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChjb3VudCwgdHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsndHlwZSc6IHR5cGUsICd2YWx1ZSc6IGNvdW50fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByICAgICAgICAgICAgICA9IDI4O1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3Ryb2tlV2lkdGggICAgPSAxO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaWNvbkRpbSAgICAgICAgPSAociArIHN0cm9rZVdpZHRoKSAqIDI7XG4gICAgICAgICAgICAgICAgICAgIHZhciBodG1sICAgICAgICAgICA9IGNyZWF0ZVBpZUNoYXJ0KFxuICAgICAgICAgICAgICAgICAgICAgICAge2RhdGE6IGNvdW50cywgcjogciwgc3Ryb2tlV2lkdGg6IHN0cm9rZVdpZHRoLCBjb3VudDogdG90YWx9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMLkRpdkljb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCAgICAgOiBodG1sLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnbWFya2VyLWNsdXN0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvblNpemUgOiBuZXcgTC5wb2ludChpY29uRGltLCBpY29uRGltKVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIG1hcmtlckljb24gID0ge1xuICAgICAgICAgICAgICAgICAgICAnTm9uLVByb2ZpdCc6IEwuaWNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uVXJsIDogJ2ltZy9tYXJrZXItbm9ucHJvZi5zdmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblNpemU6IFs2MCwgNjBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAnRm9yLVByb2ZpdCc6IEwuaWNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uVXJsIDogJ2ltZy9tYXJrZXItcHJvZi5zdmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblNpemU6IFs2MCwgNjBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAnSW5kaXZpZHVhbCc6IEwuaWNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uVXJsIDogJ2ltZy9tYXJrZXItaW5kLnN2ZycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZTogWzYwLCA2MF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICdHb3Zlcm5tZW50JzogTC5pY29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25VcmwgOiAnaW1nL21hcmtlci1nb3Yuc3ZnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TaXplOiBbNjAsIDYwXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB2YXIgbWFya2VycyA9IEwubWFya2VyQ2x1c3Rlckdyb3VwKHtcblxuICAgICAgICAgICAgICAgICAgICBzcGlkZXJmeU9uTWF4Wm9vbTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgc2hvd0NvdmVyYWdlT25Ib3ZlcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGljb25DcmVhdGVGdW5jdGlvbjogY2x1c3Rlckljb24sXG4gICAgICAgICAgICAgICAgICAgIG1heENsdXN0ZXJSYWRpdXM6IDMwLFxuICAgICAgICAgICAgICAgICAgICBzcGlkZXJmeURpc3RhbmNlTXVsdGlwbGllcjogMS4zXG4gICAgICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG91dGVyTG9vcChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gaW5uZXJMb29wKGxvYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfLmV2ZXJ5KGxvYy5jb29yZGluYXRlcykpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb2MuY29vcmRpbmF0ZXNbMF0udG9GaXhlZCg1KSA9PT0gJzQwLjc4MjAwJyAmJiBsb2MuY29vcmRpbmF0ZXNbMV0udG9GaXhlZCg1KSA9PT0gJy03My44MzE3MCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2MuY29vcmRpbmF0ZXNbMF0gPSA0MC43NzA2NTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2MuY29vcmRpbmF0ZXNbMV0gPSAtNzMuOTc0MDY7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbSA9IEwubWFya2VyKGxvYy5jb29yZGluYXRlcywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IG1hcmtlckljb25bZW50aXR5LnR5cGVdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0aXRsZSc6IGVudGl0eS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdlbnRpdHlfaWQnOiBlbnRpdHkuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21lc3NhZ2UnOiBlbnRpdHkubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6IGVudGl0eS50eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcnMuYWRkTGF5ZXIobSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBfLmZvckVhY2goZW50aXR5LmxvY2F0aW9ucywgaW5uZXJMb29wKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk9yaWdpbmFsOiAlT1wiLCAkc2NvcGUuZW50aXRpZXMpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRmlsdGVyZWQ6ICVPXCIsIGZpbHRlcmVkRW50aXRpZXMpO1xuXG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGZpbHRlcmVkRW50aXRpZXMsIG91dGVyTG9vcCk7XG4gICAgICAgICAgICAgICAgbWFwLmFkZExheWVyKG1hcmtlcnMpO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gb25Mb2NhdGlvbkVycm9yKGxlYWZsZXRFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGxlYWZsZXRFcnJvci5tZXNzYWdlICsgXCIgICVPXCIsIGxlYWZsZXRFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbWFwLm9uKCdsb2NhdGlvbmVycm9yJywgb25Mb2NhdGlvbkVycm9yKTtcbiAgICAgICAgICAgICAgICAvLyBtYXAubG9jYXRlKHtzZXRWaWV3OiB0cnVlLCBtYXhab29tOiAxMX0pO1xuICAgICAgICAgICAgICAgIG1hcmtlcnMub24oJ2NsaWNrJywgZnVuY3Rpb24gKG1hcmtlcikge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2V0RW50aXR5SUQobWFya2VyLmxheWVyLm9wdGlvbnMuZW50aXR5X2lkKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ID0gJHNjb3BlLmN1cnJlbnRFbnRpdHk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgICA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuc2V0dGluZ3NFbmFibGVkICYmICRzY29wZS5tb2JpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50b2dnbGVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIG1hcC5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgICA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuJG9uKCdzZWxlY3RJdGVtJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29vcmRpbmF0ZXMgPSAkc2NvcGUuY3VycmVudEVudGl0eS5sb2NhdGlvbnMubGVuZ3RoID4gMCA/IF8ucGx1Y2soXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY3VycmVudEVudGl0eS5sb2NhdGlvbnMsICdjb29yZGluYXRlcycpIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcC5zZXRWaWV3KGNvb3JkaW5hdGVzWzBdLCAxMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuXG4gICAgICAgIC5jb250cm9sbGVyKCdtYXBDdHJsJywgZGVwZW5kZW5jaWVzKTtcbn0pKGFuZ3VsYXIsIGQzLCBMKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhciwgUlRQKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgZGVwZW5kZW5jaWVzID0gW1xuICAgICAgICAnJHNjb3BlJyxcbiAgICAgICAgJyRodHRwJyxcbiAgICAgICAgJ18nLFxuICAgICAgICAnJGZpbHRlcicsXG4gICAgICAgICdjb25maWcnLFxuICAgICAgICBuZXR3b3JrQ3RybFxuICAgIF07XG5cbiAgICBmdW5jdGlvbiBpc0RlZihvKSB7XG4gICAgICAgIHJldHVybiBvICE9PSB1bmRlZmluZWQgJiYgbyAhPT0gbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBuZXR3b3JrQ3RybCgkc2NvcGUsICRodHRwLCBfLCAkZmlsdGVyLCBjb25maWcpIHtcbiAgICAgICAgLy8gVE9ETzogTWFrZSBhIGhhc2htYXAgb24gdGhlIGJhY2tlbmQgb2YgaWQgLT4gcG9zaXRpb24sIHRoZW4gdXNlIHNvdXJjZTpcbiAgICAgICAgLy8gZW50aXRpZXNbbWFwW3NvdXJjZWlkXV0gdG8gZ2V0IG5vZGVzLiBTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3EvMTY4MjQzMDhcbiAgICAgICAgJHNjb3BlLmlzTG9hZGluZyAgID0gdHJ1ZTtcbiAgICAgICAgJHNjb3BlLmNvbm5lY3Rpb25zID0ge307XG4gICAgICAgIHN0YXJ0TG9hZCgpO1xuXG4gICAgICAgIC8vIFNlZSBodHRwczovL2NvZGVyd2FsbC5jb20vcC9uZ2lzbWEvc2FmZS1hcHBseS1pbi1hbmd1bGFyLWpzXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgICAgIHZhciBwaGFzZSA9IHRoaXMuJHJvb3QuJCRwaGFzZTtcbiAgICAgICAgICAgIGlmIChwaGFzZSA9PT0gJyRhcHBseScgfHwgcGhhc2UgPT09ICckZGlnZXN0Jykge1xuICAgICAgICAgICAgICAgIGlmIChmbiAmJiAodHlwZW9mKGZuKSA9PT0gJ2Z1bmN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuJGFwcGx5KGZuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuJG9uKCd0cmlnZ2VyTmV0d29ya0RyYXcnLCBzdGFydExvYWQpO1xuXG4gICAgICAgICRzY29wZS4kb24oJ3ZpZXdDaGFuZ2UnLCBmdW5jdGlvbiAodmlld09iaikge1xuICAgICAgICAgICAgY29uc29sZS5sb2codmlld09iaik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBkcmF3TmV0d29yayA9IGZ1bmN0aW9uIChlbnRpdHlBcnJheSwgY29ubmVjdGlvbkFycmF5KSB7XG4gICAgICAgICAgICAkc2NvcGUuaXNMb2FkaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHZhciBzdmcgPSBkMy5zZWxlY3QoJyNuZXR3b3JrJyk7XG4gICAgICAgICAgICBzdmcuc2VsZWN0QWxsKFwiKlwiKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIHZhciBib3VuZHMgICAgICAgICAgID0gc3ZnLm5vZGUoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgICAgICAgICAgID0gYm91bmRzLmhlaWdodDtcbiAgICAgICAgICAgIHZhciB3aWR0aCAgICAgICAgICAgID0gYm91bmRzLndpZHRoO1xuICAgICAgICAgICAgdmFyIG9mZnNldFNjYWxlICAgICAgPSA2O1xuICAgICAgICAgICAgdmFyIGRlZmF1bHROb2RlU2l6ZSAgPSA3O1xuICAgICAgICAgICAgdmFyIG9mZnNldHMgICAgICAgICAgPSB7XG4gICAgICAgICAgICAgICAgJ0luZGl2aWR1YWwnOiB7J3gnOiAxLCAneSc6IDF9LFxuICAgICAgICAgICAgICAgICdGb3ItUHJvZml0Jzogeyd4JzogMSwgJ3knOiAtMX0sXG4gICAgICAgICAgICAgICAgJ05vbi1Qcm9maXQnOiB7J3gnOiAtMSwgJ3knOiAxfSxcbiAgICAgICAgICAgICAgICAnR292ZXJubWVudCc6IHsneCc6IC0xLCAneSc6IC0xfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBsb3dlckJvdW5kUmFkaXVzID0gMTA7XG4gICAgICAgICAgICB2YXIgdXBwZXJCb3VuZFJhZGl1cyA9IDUwO1xuICAgICAgICAgICAgdmFyIG1heEVtcGxveWVlcyAgICAgPSBkMy5tYXgoZW50aXR5QXJyYXksIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUludChlbC5lbXBsb3llZXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgbWF4Rm9sbG93ZXJzICAgICA9IGQzLm1heChlbnRpdHlBcnJheSwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KGVsLmZvbGxvd2Vycyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBzY2FsZSAgICAgICAgICAgID0ge1xuICAgICAgICAgICAgICAgICdlbXBsb3llZXMnOiBkMy5zY2FsZS5zcXJ0KCkuZG9tYWluKFsxMCwgbWF4RW1wbG95ZWVzXSlcbiAgICAgICAgICAgICAgICAgICAgLnJhbmdlKFtsb3dlckJvdW5kUmFkaXVzLCB1cHBlckJvdW5kUmFkaXVzXSksXG4gICAgICAgICAgICAgICAgJ2ZvbGxvd2Vycyc6IGQzLnNjYWxlLnNxcnQoKS5kb21haW4oWzEwLCBtYXhGb2xsb3dlcnNdKVxuICAgICAgICAgICAgICAgICAgICAucmFuZ2UoW2xvd2VyQm91bmRSYWRpdXMsIHVwcGVyQm91bmRSYWRpdXNdKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBsaW5rcyAgICAgICAgICAgID0ge307XG4gICAgICAgICAgICB2YXIgZm9yY2UgICAgICAgICAgICA9IGQzLmxheW91dC5mb3JjZSgpXG4gICAgICAgICAgICAgICAgLnNpemUoW3dpZHRoLCBoZWlnaHRdKVxuICAgICAgICAgICAgICAgIC5ub2RlcyhlbnRpdHlBcnJheSlcbiAgICAgICAgICAgICAgICAubGlua3MoXy5mbGF0dGVuKF8udmFsdWVzKGNvbm5lY3Rpb25BcnJheSkpKVxuICAgICAgICAgICAgICAgIC5jaGFyZ2UoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuZW1wbG95ZWVzID8gLTIgKiBzY2FsZS5lbXBsb3llZXMoZC5lbXBsb3llZXMpIDogLTIwO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmxpbmtTdHJlbmd0aCgwKVxuICAgICAgICAgICAgICAgIC5saW5rRGlzdGFuY2UoNTApO1xuXG4gICAgICAgICAgICBfLmZvckVhY2goY29ubmVjdGlvbkFycmF5LCBmdW5jdGlvbiAoY29ubmVjdGlvbnMsIHR5cGUpIHtcbiAgICAgICAgICAgICAgICBsaW5rc1t0eXBlXSA9IHN2Zy5zZWxlY3RBbGwoJy5saW5rIC4nICsgdHlwZSArICctbGluaycpXG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKGNvbm5lY3Rpb25zKVxuICAgICAgICAgICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ2xpbmUnKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0RlZihkLnNvdXJjZSkgfHwgIWlzRGVmKGQudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZC50eXBlID0gdHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnbGluayAnICsgdHlwZSArICctbGluayAnICsgZC5zb3VyY2UudHlwZSArICctbGluayAnICsgZC50YXJnZXQudHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgJy1saW5rJztcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIG5vZGUgPSBzdmcuc2VsZWN0QWxsKCcubm9kZScpXG4gICAgICAgICAgICAgICAgLmRhdGEoZW50aXR5QXJyYXkpXG4gICAgICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKCdnJylcbiAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ25vZGUgJyArIGQudHlwZSArICctbm9kZSc7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2FsbChmb3JjZS5kcmFnKTtcblxuICAgICAgICAgICAgbm9kZS5hcHBlbmQoJ2NpcmNsZScpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3InLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5lbXBsb3llZXMgPyBzY2FsZVsnZW1wbG95ZWVzJ10oZC5lbXBsb3llZXMpIDogZGVmYXVsdE5vZGVTaXplO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBub2RlLmFwcGVuZCgndGV4dCcpXG4gICAgICAgICAgICAgICAgLnRleHQoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQubmlja25hbWUgPyBkLm5pY2tuYW1lIDogZC5uYW1lO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2R4JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKC0wLjA2NSAqIHRoaXMuZ2V0Q29tcHV0ZWRUZXh0TGVuZ3RoKCkgLyAyKSArICdlbSc7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYXR0cignZHknLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoMC4wOCAqIHRoaXMucGFyZW50Tm9kZS5nZXRCQm94KCkuaGVpZ2h0IC8gMiArIDAuNSkgKyAnZW0nO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBmb3JjZS5vbigndGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gQ2x1c3RlciBpbiBmb3VyIGNvcm5lcnMgYmFzZWQgb24gb2Zmc2V0LlxuICAgICAgICAgICAgICAgIHZhciBrID0gb2Zmc2V0U2NhbGUgKiBlLmFscGhhO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGUuYWxwaGEpXG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGVudGl0eUFycmF5LCBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbnRpdHkueCAmJiBvZmZzZXRzW2VudGl0eS50eXBlXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5LnggKz0gb2Zmc2V0c1tlbnRpdHkudHlwZV0ueCAqIGs7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHkueSArPSBvZmZzZXRzW2VudGl0eS50eXBlXS55ICogaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eS54ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heCh1cHBlckJvdW5kUmFkaXVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKHdpZHRoIC0gdXBwZXJCb3VuZFJhZGl1cywgZW50aXR5LngpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eS55ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heCh1cHBlckJvdW5kUmFkaXVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKGhlaWdodCAtIHVwcGVyQm91bmRSYWRpdXMsIGVudGl0eS55KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChsaW5rcywgZnVuY3Rpb24gKGxpbmspIHtcbiAgICAgICAgICAgICAgICAgICAgbGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gxJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5zb3VyY2UueDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneTEnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnNvdXJjZS55O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MicsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQudGFyZ2V0Lng7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kyJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC50YXJnZXQueTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIG5vZGUuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIGQueCArICcsJyArIGQueSArICcpJztcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIHNwZWVkQW5pbWF0ZSA9IGZ1bmN0aW9uICh0aWNrcykge1xuICAgICAgICAgICAgICAgIC8vIFNwZWVkIHVwIHRoZSBpbml0aWFsIGFuaW1hdGlvbi5cbiAgICAgICAgICAgICAgICAvLyBTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjYxODkxMTBcbiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRpY2tzOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmNlLnRpY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZm9yY2UuYWxwaGEoKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShyZW5kZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKCEkc2NvcGUubW9iaWxlKSB7XG4gICAgICAgICAgICAgICAgc3BlZWRBbmltYXRlKDcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yY2Uuc3RhcnQoKTtcblxuICAgICAgICAgICAgLy8gSGFzaCBsaW5rZWQgbmVpZ2hib3JzIGZvciBlYXN5IGhvdmVyaW5nIGVmZmVjdHMuXG4gICAgICAgICAgICAvLyBTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvODc4MDI3N1xuICAgICAgICAgICAgdmFyIGxpbmtlZEJ5SW5kZXggPSB7fTtcbiAgICAgICAgICAgIF8uZm9yRWFjaChsaW5rcywgZnVuY3Rpb24gKGwpIHtcbiAgICAgICAgICAgICAgICBfLmZvckVhY2gobFswXSwgZnVuY3Rpb24gKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gY29ubmVjdGlvbi5fX2RhdGFfXy5zb3VyY2U7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IGNvbm5lY3Rpb24uX19kYXRhX18udGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICBsaW5rZWRCeUluZGV4W3NvdXJjZS5pbmRleCArICcsJyArIHRhcmdldC5pbmRleF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBsaW5rZWRCeUluZGV4W3RhcmdldC5pbmRleCArICcsJyArIHNvdXJjZS5pbmRleF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBuZWlnaGJvcmluZyA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpbmtlZEJ5SW5kZXhbYS5pbmRleCArICcsJyArIGIuaW5kZXhdIHx8IGEuaW5kZXggPT09IGIuaW5kZXg7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgZm9jdXNuZWlnaGJvcnMgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgLy8gQXBwbHkgJ3VuZm9jdXNlZCcgY2xhc3MgdG8gYWxsIG5vbi1uZWlnaGJvcnMuXG4gICAgICAgICAgICAgICAgLy8gQXBwbHkgJ2ZvY3VzZWQnIGNsYXNzIHRvIGFsbCBuZWlnaGJvcnMuXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogU2VlIGlmIGl0IGNhbiBiZSBkb25lIHdpdGgganVzdCBvbmUgY2xhc3MgYW5kIDpub3QoLmZvY3VzZWQpIENTUyBzZWxlY3RvcnMuXG4gICAgICAgICAgICAgICAgbm9kZVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmVpZ2hib3JpbmcoZW50aXR5LCBuKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIW5laWdoYm9yaW5nKGVudGl0eSwgbik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGxpbmtzLCBmdW5jdGlvbiAobGluaykge1xuICAgICAgICAgICAgICAgICAgICBsaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVudGl0eS5pbmRleCA9PT0gby5zb3VyY2UuaW5kZXggfHwgZW50aXR5LmluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPT09IG8udGFyZ2V0LmluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmdW5jdGlvbiAobykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhKGVudGl0eS5pbmRleCA9PT0gby5zb3VyY2UuaW5kZXggfHwgZW50aXR5LmluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9PT0gby50YXJnZXQuaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgZm9jdXMgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jdXJyZW50RW50aXR5ICE9PSBlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNldEVudGl0eShlbnRpdHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICAgICAgZm9jdXNuZWlnaGJvcnMoZW50aXR5KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciB1bmZvY3VzICAgICAgID0gZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgICAgIC8vdmFyIHRyYW5zaXRpb25kZWxheSA9IDc1O1xuICAgICAgICAgICAgICAgIG5vZGVcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBfLmZvckVhY2gobGlua3MsIGZ1bmN0aW9uIChsaW5rKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGVudGl0eS5maXhlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIC8vIFJlc3RhcnQgZDMgYW5pbWF0aW9ucy5cbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcmNlLnJlc3VtZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL1RPRE86IFNob3cgZ2VuZXJpYyBkZXRhaWxzIGFuZCBub3QgaW5kaXZpZHVhbCBlbnRpdHkgZGV0YWlscz9cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgaG92ZXJUaW1lcjtcbiAgICAgICAgICAgIHZhciBob3ZlciAgICAgICAgID0gZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ICYmICEkc2NvcGUuZWRpdGluZyAmJiAhJHNjb3BlLmN1cnJlbnRMb2NhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBob3ZlclRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb2N1cyhlbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbnRlcmFjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIHVuaG92ZXIgICAgICAgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgJiYgISRzY29wZS5jdXJyZW50TG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdW5mb2N1cyhlbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaG92ZXJUaW1lcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgZm9jdXNMb2NhdGlvbiA9IGZ1bmN0aW9uIChsb2NhdGlvbikge1xuICAgICAgICAgICAgICAgIC8vICBJZiB0aGUgY3VycmVudCBlbnRpdHkgaXMgc2hvd24gYW5kIGl0IGRvZXNuJ3QgbWF0Y2ggdGhlIGNsaWNrZWQgbm9kZSwgdGhlbiBzZXRcbiAgICAgICAgICAgICAgICAvLyB0aGUgbmV3IG5vZGUgdG8gY2xpY2tlZC5cbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG5cbiAgICAgICAgICAgICAgICBub2RlLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4ubmFtZSBpbiBsb2NhdGlvbi5kaWN0O1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhKG4ubmFtZSBpbiBsb2NhdGlvbi5kaWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBfLmZvckVhY2gobGlua3MsIGZ1bmN0aW9uIChsaW5rKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG8uc291cmNlLm5hbWUgaW4gbG9jYXRpb24uZGljdCAmJiBvLnRhcmdldC5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gbG9jYXRpb24uZGljdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEoby5zb3VyY2UubmFtZSBpbiBsb2NhdGlvbi5kaWN0KSB8fCAhKG8udGFyZ2V0Lm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gbG9jYXRpb24uZGljdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciB1bmZvY3VzTG9jYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgbm9kZVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChsaW5rcywgZnVuY3Rpb24gKGxpbmspIHtcbiAgICAgICAgICAgICAgICAgICAgbGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBmb3JjZS5yZXN1bWUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgaGlnaGxpZ2h0TG9jYXRpb24gPSBmdW5jdGlvbiAobG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd0xpY2Vuc2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgIHVuZm9jdXMoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24gIT09IGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHVuZm9jdXNMb2NhdGlvbigkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiA9IGxvY2F0aW9uO1xuICAgICAgICAgICAgICAgICAgICBmb2N1c0xvY2F0aW9uKGxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGQzLmV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbnRlcmFjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGNsaWNrICAgICAgICAgICAgID0gZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5zaG93TGljZW5zZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlzRGVmKCRzY29wZS5jbGlja2VkTG9jYXRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0RlZigkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5mb2N1c0xvY2F0aW9uKCRzY29wZS5jbGlja2VkTG9jYXRpb24uZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vICBJZiB0aGUgcHJldmlvdXMgbm9kZSBpcyBlcXVhbCB0byB0aGUgbmV3IG5vZGUsIGRvIG5vdGhpbmcuXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPT09IGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICBVbmZvY3VzIG9uIHByZXZpb3VzIG5vZGUgYW5kIGZvY3VzIG9uIG5ldyBub2RlLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZm9jdXMoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9IGVudGl0eTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTdG9wIGV2ZW50IHNvIHdlIGRvbid0IGRldGVjdCBhIGNsaWNrIG9uIHRoZSBiYWNrZ3JvdW5kLlxuICAgICAgICAgICAgICAgIC8vIFNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcS8yMjk0MTc5NlxuICAgICAgICAgICAgICAgIGlmIChkMy5ldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBkMy5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGJhY2tncm91bmRjbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNEZWYoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRGVmKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bmZvY3VzKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRGVmKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuZm9jdXMoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgICAgIC8vVE9ETzogU2hvdyBnZW5lcmljIGRldGFpbHMgYW5kIG5vdCBpbmRpdmlkdWFsIGVudGl0eSBkZXRhaWxzLlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBkYmxjbGljayAgICAgICAgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlbnRpdHkuZml4ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LnggICAgICAgICAgICAgICAgICAgID0gd2lkdGggLyAyO1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHkueSAgICAgICAgICAgICAgICAgICAgPSBoZWlnaHQgLyAyO1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHkucHggICAgICAgICAgICAgICAgICAgPSB3aWR0aCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5weSAgICAgICAgICAgICAgICAgICA9IGhlaWdodCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5maXhlZCAgICAgICAgICAgICAgICA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9IGVudGl0eTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB1bmZvY3VzKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIG5vZGUub24oJ21vdXNlb3ZlcicsIGhvdmVyKTtcbiAgICAgICAgICAgIG5vZGUub24oJ21vdXNlb3V0JywgdW5ob3Zlcik7XG4gICAgICAgICAgICBub2RlLm9uKCdjbGljaycsIGNsaWNrKTtcbiAgICAgICAgICAgIG5vZGUub24oJ2RibGNsaWNrJywgZGJsY2xpY2spO1xuICAgICAgICAgICAgc3ZnLm9uKCdjbGljaycsIGJhY2tncm91bmRjbGljayk7XG5cbiAgICAgICAgICAgIG5vZGVcbiAgICAgICAgICAgICAgICAuY2xhc3NlZCgnd2VsbGNvbm5lY3RlZCcsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmhhc093blByb3BlcnR5KCd3ZWxsY29ubmVjdGVkJyk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICRzY29wZS4kb24oJ2NoYW5nZVNpemVCeScsIGZ1bmN0aW9uIChldmVudCwgc2l6ZUJ5KSB7XG4gICAgICAgICAgICAgICAgc3ZnLnNlbGVjdEFsbCgnY2lyY2xlJylcbiAgICAgICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oMjUwKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cigncicsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZFtzaXplQnldID8gc2NhbGVbc2l6ZUJ5XShkW3NpemVCeV0pIDogZGVmYXVsdE5vZGVTaXplO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJHNjb3BlLiRvbigndG9nZ2xlTGluaycsIGZ1bmN0aW9uIChldmVudCwgbGluaykge1xuICAgICAgICAgICAgICAgIC8vIGxpbmtzW2xpbmsubmFtZV1cbiAgICAgICAgICAgICAgICAvLyAuY2xhc3NlZCh7J3Zpc2libGUnOiBsaW5rLmVuYWJsZWQsICdoaWRkZW4nOiAhbGluay5lbmFibGVkfSk7XG4gICAgICAgICAgICAgICAgXy5tYXAoJHNjb3BlLmVudGl0eVR5cGVzLCBmdW5jdGlvbiAodmFsLCBrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgc3ZnXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCcuJyArIGtleSArICctbGluaycpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Zpc2libGUnOiBmdW5jdGlvbiAobCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb25uZWN0aW9uVHlwZSBlbmFibGVkLCBjb25uZWN0aW9uIHNvdXJjZSBlbnRpdHkgdHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpcyBlbmFibGVkLCBjb25uZWN0aW9uIHRhcmdldCBlbnRpdHkgdHlwZSBpcyBlbmFibGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gISRzY29wZS5jb25uZWN0aW9uVHlwZXNbbC50eXBlXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgKCRzY29wZS5lbnRpdHlUeXBlc1tsLnNvdXJjZS50eXBlXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmICRzY29wZS5lbnRpdHlUeXBlc1tsLnRhcmdldC50eXBlXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaGlkZGVuJyA6IGZ1bmN0aW9uIChsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGFueSBvZiBDb25uZWN0aW9uVHlwZSwgc291cmNlIGVudGl0eSB0eXBlLCBvciB0YXJnZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW50aXR5IHR5cGUgYXJlIGRpc2FibGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gISRzY29wZS5jb25uZWN0aW9uVHlwZXNbbC50eXBlXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgKCEkc2NvcGUuZW50aXR5VHlwZXNbbC5zb3VyY2UudHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8ICEkc2NvcGUuZW50aXR5VHlwZXNbbC50YXJnZXQudHlwZV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICRzY29wZS4kb24oJ3RvZ2dsZU5vZGUnLCBmdW5jdGlvbiAoZXZlbnQsIHR5cGUpIHtcbiAgICAgICAgICAgICAgICBzdmdcbiAgICAgICAgICAgICAgICAgICAgLnNlbGVjdEFsbCgnLicgKyB0eXBlLm5hbWUgKyAnLW5vZGUnKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCh7J3Zpc2libGUnOiB0eXBlLmVuYWJsZWQsICdoaWRkZW4nOiAhdHlwZS5lbmFibGVkfSk7XG5cbiAgICAgICAgICAgICAgICBzdmdcbiAgICAgICAgICAgICAgICAgICAgLnNlbGVjdEFsbCgnLicgKyB0eXBlLm5hbWUgKyAnLWxpbmsnKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndmlzaWJsZSc6IGZ1bmN0aW9uIChsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ubmVjdGlvblR5cGUgZW5hYmxlZCwgY29ubmVjdGlvbiBzb3VyY2UgZW50aXR5IHR5cGUgaXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbmFibGVkLCBjb25uZWN0aW9uIHRhcmdldCBlbnRpdHkgdHlwZSBpcyBlbmFibGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUuY29ubmVjdGlvblR5cGVzW2wudHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgKCRzY29wZS5lbnRpdHlUeXBlc1tsLnNvdXJjZS50eXBlXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiAkc2NvcGUuZW50aXR5VHlwZXNbbC50YXJnZXQudHlwZV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoaWRkZW4nIDogZnVuY3Rpb24gKGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBhbnkgb2YgQ29ubmVjdGlvblR5cGUsIHNvdXJjZSBlbnRpdHkgdHlwZSwgb3IgdGFyZ2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW50aXR5IHR5cGUgYXJlIGRpc2FibGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhJHNjb3BlLmNvbm5lY3Rpb25UeXBlc1tsLnR5cGVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8ICghJHNjb3BlLmVudGl0eVR5cGVzW2wuc291cmNlLnR5cGVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8ICEkc2NvcGUuZW50aXR5VHlwZXNbbC50YXJnZXQudHlwZV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICRzY29wZS4kb24oJ3NlbGVjdEl0ZW0nLCBmdW5jdGlvbiAoZXZlbnQsIGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnbG9jYXRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodExvY2F0aW9uKCRzY29wZS5jdXJyZW50TG9jYXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2soJHNjb3BlLmN1cnJlbnRFbnRpdHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIHN0YXJ0TG9hZCAoZXZlbnQpIHtcbiAgICAgICAgICAgICRodHRwLmdldChjb25maWcuYXBpSG9zdCArICdhcGkvY29ubmVjdGlvbnMnKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkRW50aXRpZXMgICAgPSAkZmlsdGVyKCdmaWx0ZXInKSgkc2NvcGUuZW50aXRpZXMsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRpdHkuY29sbGFib3JhdGlvbnMubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPj0gJHNjb3BlLm1pbkNvbm5lY3Rpb25zO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWRDb25uZWN0aW9ucyA9IHt9O1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChfLmtleXMoZGF0YS5jb25uZWN0aW9ucyksIGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICRzY29wZS5jb25uZWN0aW9uc1t0eXBlXSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZENvbm5lY3Rpb25zW3R5cGVdID0gW107XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGRhdGEuY29ubmVjdGlvbnMsIGZ1bmN0aW9uIChjb25uZWN0aW9ucywgdHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBfLmZvckVhY2goY29ubmVjdGlvbnMsIGZ1bmN0aW9uIChjb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlTm9kZSA9IF8uZmluZChmaWx0ZXJlZEVudGl0aWVzLCB7J2lkJzogY29ubmVjdGlvbi5zb3VyY2V9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXROb2RlID0gXy5maW5kKGZpbHRlcmVkRW50aXRpZXMsIHsnaWQnOiBjb25uZWN0aW9uLnRhcmdldH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoIGlzRGVmKHNvdXJjZU5vZGUpICYmIGlzRGVmKHRhcmdldE5vZGUpICkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkQ29ubmVjdGlvbnNbdHlwZV0ucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7J3NvdXJjZSc6IHNvdXJjZU5vZGUsICd0YXJnZXQnOiB0YXJnZXROb2RlfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAkc2NvcGUuY29ubmVjdGlvbnNbdHlwZV0ucHVzaCh7J3NvdXJjZSc6IHNvdXJjZU5vZGUsICd0YXJnZXQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGFyZ2V0Tm9kZX0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBPbmx5IHNob3cgbGFiZWxzIG9uIHRvcCA1IG1vc3QgY29ubmVjdGVkIGVudGl0aWVzIGluaXRpYWxseS5cbiAgICAgICAgICAgICAgICBfLmZvckVhY2goXy5rZXlzKCRzY29wZS5lbnRpdHlUeXBlcyksIGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZpbmQgdGhlIHRvcCA1IG1vc3QtY29ubmVjdGVkIGVudGl0aWVzLlxuICAgICAgICAgICAgICAgICAgICB2YXIgdG9wNSA9IF8udGFrZVJpZ2h0KF8uc29ydEJ5KF8uZmlsdGVyKCRzY29wZS5lbnRpdGllcywgeyd0eXBlJzogdHlwZX0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2NvbGxhYm9yYXRpb25zLmxlbmd0aCcpLCA1KTtcbiAgICAgICAgICAgICAgICAgICAgXy5mb3JFYWNoKHRvcDUsIGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eS53ZWxsY29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBmaWx0ZXJlZEVudGl0aWVzID0gXy5zb3J0QnkoZmlsdGVyZWRFbnRpdGllcywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlLndlbGxjb25uZWN0ZWQpID8gMSA6IDA7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBkcmF3TmV0d29yayhmaWx0ZXJlZEVudGl0aWVzLCBmaWx0ZXJlZENvbm5lY3Rpb25zKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ25ldHdvcmtDdHJsJywgZGVwZW5kZW5jaWVzKTtcblxufSkoYW5ndWxhciwgUlRQKTtcbiJdfQ==
