!function(i){"use strict";var a=["ui.bootstrap","leaflet-directive","ngAnimate","templateCache","civic-graph.api","civic-graph.util"],c=["civic-graph.util"];i.module("civic-graph.util",[]),i.module("civic-graph.api",c),i.module("civic-graph",a)}(angular);
!function(t){"use strict";function a(){return{templateUrl:"js/analytic/analytics.html",restrict:"E",scope:{},controller:"analyticsCtrl"}}var c=[a];t.module("civic-graph").directive("analytics",c)}(angular);
!function(e){"use strict";function t(e,t){function i(e){var i=t.getPropertyFromObj(e);this.id=i("id"),this.name=i("name"),this.enabled=i("enable",!0)}function n(e){return new i(e)}function r(){return e.get("/categories")}return{getCategoryModel:n,getAll:r}}t.$inject=["cgApiCaller","cgUtilService"],e.module("civic-graph.api").factory("categoryService",t)}(angular);
!function(t){"use strict";function n(){return{Funding:!0,Data:!0,Employment:!0,Collaboration:!0}}function i(t,i){function o(t){var n=i.getPropertyFromObj(t);this.id=n("id"),this.name=n("name"),this.details=n("details"),this.entity=n("entity"),this.entity_id=n("entity_id")}function c(t){return new o(t)}function r(){return t.get(e)}return{getAll:r,getConnectionTypes:n,getConnectionModel:c}}var e="/connections";i.$inject=["cgApiCaller","cgUtilService"],t.module("civic-graph.api").factory("connectionService",i)}(angular);
!function(i){"use strict";function n(i){function n(n){var t=i.getPropertyFromObj(n);this.id=t("id"),this.year=t("year"),this.amount=t("amount",0)}function t(i){return new n(i)}return{getFinanceModel:t}}n.$inject=["cgUtilService"],i.module("civic-graph.api").factory("financeService",n)}(angular);
!function(n){"use strict";function t(n){function t(t){var i=n.getPropertyFromObj(t);this.id=i("id"),this.year=i("year"),this.amount=i("amount"),this.entity=i("entity","")}function i(n){return new t(n)}return{getFundingConnectionModel:i}}t.$inject=["cgUtilService"],n.module("civic-graph.api").factory("fundingConnectionService",t)}(angular);
!function(e){"use strict";function t(t,i,n,o,s,d,c,a){function r(){var e,i,n,o;for(i in t.categories)if(t.categories.hasOwnProperty(i)){e=t.categories[i];for(n in t.editEntity.categories)t.editEntity.categories.hasOwnProperty(n)&&(o=t.editEntity.categories[n],e.id===o.id&&(e.enabled=o.enabled))}}t.isEditing=!1,t.editEntity=s.getEntityModel(t.entity),t.entityTypes=s.getEntityTypes(),t.influenceTypes=s.getInfluenceTypes();var u;t.categories=[],t.addressSearch=function(e){return i.jsonp("https://dev.virtualearth.net/REST/v1/Locations",{params:{query:e,key:"Ai58581yC-Sr7mcFbYTtUkS3ixE7f6ZuJnbFJCVI4hAtW1XoDEeZyidQz2gLCCyD",jsonp:"JSON_CALLBACK",include:"ciso2"}}).then(function(e){if(a.isDefined(e.data.resourceSets)&&e.data.resourceSets.length>0)return e.data.resourceSets[0].resources})},t.toggleCategory=function(e){if(0===t.editEntity.categories.length)t.editEntity.categories.push(e);else{var i=!1;for(var n in t.editEntity.categories)if(t.editEntity.categories.hasOwnProperty(n)){var o=t.editEntity.categories[n];if(o.id===e.id){i=!0,o.enabled=e.enabled;break}}i||t.editEntity.categories.push(e)}},t.setLocation=function(e,i){t.addressSearch(e.formattedAddress).then(function(n){if(a.isDefined(n[0])){var o=n[0],s=o.address,d=o.point;t.addLocation(i),e.address_line=a.isDefined(s.addressLine)?s.addressLine:"",e.locality=a.isDefined(s.locality)?s.locality:"",e.district=a.isDefined(s.adminDistrict)?s.adminDistrict:"",e.country=a.isDefined(s.countryRegion)?s.countryRegion:null,e.country_code=a.isDefined(s.countryRegionIso2)?s.countryRegionIso2:"",e.coordinates=a.isDefined(d.coordinates)?d.coordinates:null,e.postal_code=a.isDefined(s.postalCode)?s.postalCode:null}})},t.addLocation=function(e){e&&t.editEntity.locations.push(c.getLocationModel())},t.addKeyPerson=function(){o.some(t.editEntity.key_people,{name:"",id:null})||t.editEntity.key_people.push({name:"",id:null})},t.setFundingConnection=function(e,t){t.entity_id=e.id},t.addFundingConnection=function(e){o.some(e,{entity:""})||e.push({entity:"",amount:null,year:null,id:null})},t.setConnection=function(e,t){t.entity_id=e.id},t.addConnection=function(e){o.some(e,{entity:"",id:null})||e.push({entity:"",id:null,details:null})},t.addFinance=function(e){o.every(e,function(e){return e.amount>0&&e.year>1750})&&e.push({amount:null,year:null,id:null})},t.save=function(){function e(e){t.isSaving=!1,t.$emit("editEntitySuccess",e),t.cancelEdit()}function i(){t.isError=!0,n(function(){t.isError=!1},2e3)}t.isSaving=!0,s.saveEntity(t.editEntity.generateDBModel()).then(e,i)},t.cancelEdit=function(){t.isOpen=!1},t.$watch("entity",function(i,n){e.equals(i,n)||(t.editEntity=s.getEntityModel(i),t.categories=e.copy(u),r(),t.isEditing=a.isDefined(t.editEntity.id))}),d.getAll().then(function(i){u=i.categories,t.categories=e.copy(u)})}t.$inject=["$scope","$http","$timeout","_","entityService","categoryService","locationService","cgUtilService"],e.module("civic-graph").controller("editCtrl",t)}(angular);
!function(t){"use strict";function e(){return{templateUrl:"js/edit-entity/edit.html",restrict:"E",scope:{entity:"=",entities:"=",isOpen:"="},controller:"editCtrl"}}var i=[e];t.module("civic-graph").directive("editEntity",i)}(angular);
!function(i,t){"use strict";function s(i){function s(){var i=t(this);i.css("height","55vh")}function c(){var i=t(this);window.innerHeight/3>parseInt(i.css("height"))?i.css("height","55vh"):i.css("height","30vh")}var e;i.mobile&&(e=t("#details-panel"),e.css("height","30vh"),e.scrollTop(0),e.scroll(s),e.click(c))}function c(){return{restrict:"A",link:s}}i.module("civic-graph").directive("addMobileEvents",[c])}(angular,$);
!function(o){"use strict";function c(o,c){o.closeWindow=function(){c.close()}}o.module("civic-graph").controller("modalCtrl",["$scope","$modalInstance",c])}(angular);
!function(o){"use strict";o.module("civic-graph").constant("_",window._).config(["$locationProvider","$compileProvider",function(o,n){o.html5Mode(!0),n.debugInfoEnabled(!0)}]).filter("thousandSuffix",function(){return function(o,n){var t,i=["k","M","G","T","P","E"];return window.isNaN(o)?null:o<1e3?o:(t=Math.floor(Math.log(o)/Math.log(1e3)),(o/Math.pow(1e3,t)).toFixed(n)+i[t-1])}})}(angular);
!function(t){"use strict";function i(t,i,e,n,o){function a(){t.$broadcast("triggerNetworkDraw")}t.entities=[],t.searchItems=null,t.categories=[],t.currentLocation=null,t.clickedLocation={},t.clickedLocation.location=null,t.clickedEntity={},t.clickedEntity.entity=null,t.editing=!1,t.actions={interacted:!1},t.showsearchMB=!1,t.showAnalytics=!1,t.entityTypes=n.getEntityTypes(),t.connectionTypes=o.getConnectionTypes(),t.status={isNetworkShown:!0,license:!0,networkLoading:!0},t.toggleAnalytics=function(){t.showAnalytics=!t.showAnalytics},this.minConnections=t.minConnections=2;var s=this;t.$watch("minConnections",a),t.connectionChange=function(){console.log(s.minConnections),t.minConnections=s.minConnections,t.$broadcast("triggerNetworkDraw")},t.hydePartials=function(i){"search"===i?(t.editing=!1,t.settingsEnabled=!1):"settings"===i?(t.editing=!1,t.showsearchMB=!1):"edit"===i?(t.settingsEnabled=!1,t.showsearchMB=!1):(t.editing=!1,t.settingsEnabled=!1,t.showsearchMB=!1)},t.showSearch=function(){t.hydePartials("search"),t.showsearchMB=!t.showsearchMB,t.status.license=!1},t.toggleSettings=function(){t.hydePartials("settings"),t.settingsEnabled=!t.settingsEnabled},t.startEdit=function(i){t.currentEntity=i,t.mobile&&t.hydePartials("edit"),t.editing=!0},t.switchView=function(){t.status.isNetworkShown=!t.status.isNetworkShown,t.status.isNetworkShown&&t.$broadcast("triggerNetworkDraw")},window.mobilecheck=function(){var t=!1,i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,e=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i;return function(n){(i.test(n)||e.test(n.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},t.mobile=window.mobilecheck(),t.settingsEnabled=!t.mobile,i(function(){n.getAll().then(function(i){t.entities=i.nodes;var n=e.uniq(e.pluck(e.flatten(e.pluck(t.entities,"locations")),"locality")),o=e.map(n,function(i){var n=e.filter(t.entities,e.flow(e.property("locations"),e.partialRight(e.any,{locality:i})));return{name:i,type:"location",entities:n,dict:e.zipObject(e.pluck(n,"name"),e.pluck(n,"index"))}});t.searchItems=o.concat(t.entities),t.overviewUrl="js/overview/overview.html",t.$broadcast("triggerNetworkDraw")})},100),t.overviewUrl=null,t.setEntity=function(i){t.currentLocation=null,t.currentEntity=i,t.editing&&t.stopEdit(),t.$broadcast("entityChange")},t.setEntityID=function(i){t.setEntity(e.find(t.entities,{id:i}))},t.setLocation=function(i){t.currentLocation=i,t.editing&&t.stopEdit(),t.$broadcast("itemChange")},t.selectItem=function(i){"location"===i.type?t.setLocation(i):t[i%1===0?"setEntityID":"setEntity"](i),t.$broadcast("selectItem",i)},t.$on("setCurrentEntity",function(i,e){t.currentEntity=e.value}),t.$on("setCurrentLocation",function(i,e){t.currentLocation=e.value}),t.setEntities=function(i){t.entities=i},t.stopEdit=function(){t.editing=!1},t.$on("editEntitySuccess",function(i){t.setEntities(i.nodes),t.$broadcast("triggerNetworkDraw")}),t.animationsEnabled=!0}var e=["$scope","$timeout","_","entityService","connectionService",i];t.module("civic-graph").controller("homeCtrl",e)}(angular);
!function(i){"use strict";var a=[];i.module("civic-graph").directive("map",a)}(angular);
!function(n){"use strict";function e(n,e,t,i,c){function o(){function o(i){var o=e("filter")(n.entities,function(e){return e.collaborations.length>=n.minConnections}),a={};t.forEach(t.keys(i.connections),function(n){a[n]=[]}),t.forEach(i.connections,function(n,e){t.forEach(n,function(n){var i=t.find(o,{id:n.source}),r=t.find(o,{id:n.target});c.isDefined(i)&&c.isDefined(r)&&a[e].push({source:i,target:r})})}),t.forEach(t.keys(n.entityTypes),function(e){var i=t.takeRight(t.sortBy(t.filter(n.entities,{type:e}),"collaborations.length"),5);t.forEach(i,function(n){n.wellconnected=!0})}),o=t.sortBy(o,function(n){return n.wellconnected?1:0}),r(o,a)}i.getAll().then(o)}n.isLoading=!0,n.connections={},o(),n.safeApply=function(n){var e=this.$root.$$phase;"$apply"===e||"$digest"===e?n&&"function"==typeof n&&n():this.$apply(n)},n.$on("triggerNetworkDraw",o),n.$on("viewChange",function(n){console.log(n)});var r=function(e,i){n.isLoading=!1;var o=d3.select("#network");o.selectAll("*").remove();var r=o.node().getBoundingClientRect(),a=r.height,s=r.width,l=6,u=7,d={Individual:{x:1,y:1},"For-Profit":{x:1,y:-1},"Non-Profit":{x:-1,y:1},Government:{x:-1,y:-1}},f=10,y=50,p=d3.max(e,function(n){return parseInt(n.employees)}),k=d3.max(e,function(n){return parseInt(n.followers)}),g={employees:d3.scale.sqrt().domain([10,p]).range([f,y]),followers:d3.scale.sqrt().domain([10,k]).range([f,y])},h={},m=d3.layout.force().size([s,a]).nodes(e).links(t.flatten(t.values(i))).charge(function(n){return n.employees?-2*g.employees(n.employees):-20}).linkStrength(0).linkDistance(50);t.forEach(i,function(n,e){h[e]=o.selectAll(".link ."+e+"-link").data(n).enter().append("line").attr("class",function(n){return c.isDefined(n.source)&&c.isDefined(n.target)?(n.type=e,"link "+e+"-link "+n.source.type+"-link "+n.target.type+"-link"):""})});var x=o.selectAll(".node").data(e).enter().append("g").attr("class",function(n){return"node "+n.type+"-node"}).call(m.drag);x.append("circle").attr("r",function(n){return n.employees?g.employees(n.employees):u}),x.append("text").text(function(n){return n.nickname?n.nickname:n.name}).attr("dx",function(){return-.065*this.getComputedTextLength()/2+"em"}).attr("dy",function(){return.08*this.parentNode.getBBox().height/2+.5+"em"}),m.on("tick",function(n){var i=l*n.alpha;t.forEach(e,function(n){n.x&&d[n.type]&&(n.x+=d[n.type].x*i,n.y+=d[n.type].y*i,n.x=Math.max(y,Math.min(s-y,n.x)),n.y=Math.max(y,Math.min(a-y,n.y)))}),t.forEach(h,function(n){n.attr("x1",function(n){return n.source.x}).attr("y1",function(n){return n.source.y}).attr("x2",function(n){return n.target.x}).attr("y2",function(n){return n.target.y})}),x.attr("transform",function(n){return"translate("+n.x+","+n.y+")"})});var E=function(n){requestAnimationFrame(function e(){for(var t=0;t<n;t++)m.tick();m.alpha()>0&&requestAnimationFrame(e)})};E(7),m.start();var v={};t.forEach(h,function(n){t.forEach(n[0],function(n){var e=n.__data__.source,t=n.__data__.target;v[e.index+","+t.index]=!0,v[t.index+","+e.index]=!0})});var L,A=function(n,e){return v[n.index+","+e.index]||n.index===e.index},T=function(n){x.classed("focused",function(e){return A(n,e)}).classed("unfocused",function(e){return!A(n,e)}),t.forEach(h,function(e){e.classed("focused",function(e){return n.index===e.source.index||n.index===e.target.index}).classed("unfocused",function(e){return!(n.index===e.source.index||n.index===e.target.index)})})},w=function(e){n.currentEntity!==e&&n.setEntity(e),n.safeApply(),T(e)},$=function(e){x.classed("focused",!1).classed("unfocused",!1),t.forEach(h,function(n){n.classed("focused",!1).classed("unfocused",!1)}),e.fixed=!1,n.clickedEntity.entity&&m.resume()},D=function(e){n.clickedEntity.entity||n.editing||n.currentLocation||(L=setTimeout(function(){w(e)},500)),n.actions.interacted=!0,n.safeApply()},_=function(e){n.clickedEntity.entity||n.currentLocation||($(e),clearTimeout(L)),n.actions.interacted=!0,n.safeApply()},b=function(e){n.safeApply(),x.classed("focused",function(n){return n.name in e.dict}).classed("unfocused",function(n){return!(n.name in e.dict)}),t.forEach(h,function(n){n.classed("focused",function(n){return n.source.name in e.dict&&n.target.name in e.dict}).classed("unfocused",function(n){return!(n.source.name in e.dict&&n.target.name in e.dict)})})},B=function(){x.classed("focused",!1).classed("unfocused",!1),t.forEach(h,function(n){n.classed("focused",!1).classed("unfocused",!1)}),n.clickedLocation.location&&m.resume()},P=function(e){n.showLicense=!1,n.clickedEntity.entity&&($(n.clickedEntity.entity),n.clickedEntity.entity=null),n.clickedLocation.location!==e?(B(n.clickedLocation.location),b(e)):n.clickedLocation.location===e&&(n.clickedLocation.location=e,b(e)),d3.event&&d3.event.stopPropagation(),n.actions.interacted=!0,n.safeApply()},C=function(e){n.showLicense=!1,c.isDefined(n.clickedLocation)&&(c.isDefined(n.clickedLocation.location)&&(B(n.clickedLocation.entity),n.clickedLocation.location=null),n.clickedEntity.entity===e?(n.clickedEntity.entity=null,w(e)):(n.clickedEntity.entity&&$(n.clickedEntity.entity),n.clickedEntity.entity=e,w(e))),d3.event&&d3.event.stopPropagation(),n.actions.interacted=!0,n.safeApply()},q=function(){c.isDefined(n.clickedLocation)&&(c.isDefined(n.clickedLocation.location)&&($(n.clickedLocation.location),n.clickedLocation.location=null),c.isDefined(n.clickedEntity.entity)&&($(n.clickedEntity.entity),n.clickedEntity.entity=null)),n.safeApply()},I=function(e){e.fixed?$(e):(e.x=s/2,e.y=a/2,e.px=s/2,e.py=a/2,e.fixed=!0,n.clickedEntity.entity=e),n.actions.interacted=!0,n.safeApply()};x.on("mouseover",D),x.on("mouseout",_),x.on("click",C),x.on("dblclick",I),o.on("click",q),x.classed("wellconnected",function(n){return n.hasOwnProperty("wellconnected")}),n.$on("changeSizeBy",function(n,e){o.selectAll("circle").transition().duration(250).attr("r",function(n){return n[e]?g[e](n[e]):u})}),n.$on("toggleLink",function(e,i){t.map(n.entityTypes,function(e,t){o.selectAll("."+t+"-link").classed({visible:function(e){return!n.connectionTypes[e.type]||n.entityTypes[e.source.type]&&n.entityTypes[e.target.type]},hidden:function(e){return!n.connectionTypes[e.type]||!n.entityTypes[e.source.type]||!n.entityTypes[e.target.type]}})})}),n.$on("toggleNode",function(e,t){o.selectAll("."+t.name+"-node").classed({visible:t.enabled,hidden:!t.enabled}),o.selectAll("."+t.name+"-link").classed({visible:function(e){return n.connectionTypes[e.type]&&n.entityTypes[e.source.type]&&n.entityTypes[e.target.type]},hidden:function(e){return!n.connectionTypes[e.type]||!n.entityTypes[e.source.type]||!n.entityTypes[e.target.type]}})}),n.$on("selectItem",function(e,t){"location"===t.type?P(n.currentLocation):C(n.currentEntity)})}}e.$inject=["$scope","$filter","_","connectionService","cgUtilService"],n.module("civic-graph").controller("networkCtrl",e)}(angular,RTP);
!function(r){"use strict";function t(){return{restrict:"E",templateUrl:"js/network/network.html",controller:"networkCtrl"}}var e=[t];r.module("civic-graph").directive("network",e)}(angular);
!function(e){"use strict";e.module("civic-graph").directive("input",function(){return{restict:"E",require:"?ngModel",link:function(e,r,t,i){"type"in t&&"range"===t.type.toLowerCase()&&i.$parsers.push(parseFloat)}}})}(angular);
!function(o){"use strict";function r(){return{templateUrl:"js/control/controls.html",restrict:"E",scope:{toggleNetwork:"="},controller:"controlCtrl",controllerAs:"control",bindToController:{minConnections:"="}}}var t=[r];o.module("civic-graph").directive("control",t)}(angular);
!function(e){"use strict";function t(e,t){e.categorizedEntities={},t.forEach(t.keys(e.entityTypes),function(i){e.categorizedEntities[i]=t.filter(e.entities,{type:i})})}e.module("civic-graph").controller("overviewCtrl",["$scope","_",t])}(angular);
!function(r){"use strict";function n(r){return!("undefined"==typeof r||null===r)}function t(r){return n(r)&&!Array.isArray(r)&&"object"==typeof r}function e(r){var t=n(r)?r:{};return function(r,e){var i=n(e)?e:null;return n(t[r])?t[r]:i}}function i(r,n){var e=Array.isArray(r)?r.filter(t).map(n):[];return e.concat([n()])}function u(){return{isDefined:n,isObject:t,getPropertyFromObj:e,loopAndInit:i}}r.module("civic-graph.util").factory("cgUtilService",u)}(angular);
!function(c){"use strict";function n(c){}c.module("civic-graph").controller("analyticsCtrl",["$scope",n])}(angular);
!function(t){"use strict";function e(t){t.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}e.$inject=["$httpProvider"],t.module("civic-graph.api").config(e)}(angular);
!function(t){"use strict";function r(t,r){function a(t){return console.error("Recieved an error from API with this message: %O",t.data),r.reject(t)}function i(t){return t.data}function c(r,c){return t.get(e+r,{params:c,headers:n}).then(i,a)}function o(r,c){return t.post(e+r,c,{headers:n}).then(i,a)}return{get:c,post:o}}var e="https://api.civicgraph.io/api",n={};r.$inject=["$http","$q"],t.module("civic-graph.api").factory("cgApiCaller",r)}(angular);
!function(e){"use strict";function i(e){function i(i){function t(){var t=e.isDefined(i)?i:{},o=e.isDefined(t.address_line)?t.address_line+" ":"",c=e.isDefined(t.locality)?t.locality+", ":"",n=e.isDefined(t.country_code)?t.country_code+" ":"",r=e.isDefined(t.postal_code)?t.postal_code:"";return(o+c+n+r).trim()}var o=this,c=e.getPropertyFromObj(i);o.id=c("id"),o.address_line=c("address_line"),o.locality=c("locality"),o.district=c("district"),o.postal_code=c("postal_code"),o.country=c("country"),o.country_code=c("country_code"),o.coordinates=c("coordinates"),o.formattedAddress=t()}function t(e){return new i(e)}return{getLocationModel:t}}i.$inject=["cgUtilService"],e.module("civic-graph.api").factory("locationService",i)}(angular);
!function(e){"use strict";function n(){return{Government:!0,"For-Profit":!0,"Non-Profit":!0,Individual:!0}}function o(){return["Local","National","Global"]}function t(e,t,i,p,r,a,c){function l(e){function n(){var e=new l(o);return e.locations.pop(),e.locations.pop(),e.grants_received.pop(),e.grants_received.pop(),e.grants_given.pop(),e.grants_given.pop(),e.investments_received.pop(),e.investments_received.pop(),e.investments_made.pop(),e.investments_made.pop(),e.data_given.pop(),e.data_given.pop(),e.data_received.pop(),e.data_received.pop(),e.collaborations.pop(),e.collaborations.pop(),e.key_people.pop(),e.key_people.pop(),e.employments.pop(),e.employments.pop(),e.revenues.pop(),e.revenues.pop(),e.expenses.pop(),e.expenses.pop(),e.categories.pop(),e.categories.pop(),e.description="",e}var o=this,d=c.isDefined(e)?e:{},s=c.getPropertyFromObj(e);o.id=s("id"),o.name=s("name"),o.influence=s("influence"),o.type=s("type"),o.nickname=s("nickname"),o.url=s("url"),o.twitter_handle=s("twitter_handle"),o.employees=s("employees"),o.locations=c.loopAndInit(d.locations,r.getLocationModel),o.grants_received=c.loopAndInit(d.grants_received,t.getFundingConnectionModel),o.investments_received=c.loopAndInit(d.investments_received,t.getFundingConnectionModel),o.grants_given=c.loopAndInit(d.grants_given,t.getFundingConnectionModel),o.investments_made=c.loopAndInit(d.investments_made,t.getFundingConnectionModel),o.data_given=c.loopAndInit(d.data_given,i.getConnectionModel),o.data_received=c.loopAndInit(d.data_received,i.getConnectionModel),o.collaborations=c.loopAndInit(d.collaborations,i.getConnectionModel),o.key_people=c.loopAndInit(d.key_people,i.getConnectionModel),o.employments=c.loopAndInit(d.employments,i.getConnectionModel),o.revenues=c.loopAndInit(d.revenues,p.getFinanceModel),o.expenses=c.loopAndInit(d.expenses,p.getFinanceModel),o.categories=c.loopAndInit(d.categories,a.getCategoryModel),o.generateDBModel=n}function d(e){return new l(e)}function s(){return e.get("/entities")}function g(n){return e.post("/save",{entity:n})}return{getEntityModel:d,getEntityTypes:n,getInfluenceTypes:o,getAll:s,saveEntity:g}}t.$inject=["cgApiCaller","fundingConnectionService","connectionService","financeService","locationService","categoryService","cgUtilService"],e.module("civic-graph.api").factory("entityService",t)}(angular);
!function(t,e,n){"use strict";function i(t,i,o,r,a){t.options={center:{lat:20,lng:-40,zoom:3},defaults:{tileLayer:"https://api.tiles.mapbox.com/v4/mapbox.light/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZGF2aWRscm50IiwiYSI6IjA0M2RkNzMzZWJmNzEzNGYzMTdhYTExYzAyZmU4ZTE1In0.TNYlFta2VItrkn4L0Z9BJQ",tileLayerOptions:{detectRetina:!0,reuseTiles:!1},zoomControl:!1,attributionControl:!1}},t.safeApply=function(t){var e=this.$root.$$phase;"$apply"===e||"$digest"===e?t&&"function"==typeof t&&t():this.$apply(t)},i(function(){var i=function(t){var n=t.data,i=e.layout.pie().sort(null).value(function(t){return t.value}),o=e.svg.arc().outerRadius(t.r).innerRadius(t.r-10),r=t.r+t.strokeWidth,a=2*r,c=a,l=document.createElementNS(e.ns.prefix.svg,"svg"),s=e.select(l).data(n).attr("class","piechart").attr("width",a).attr("height",c),p=s.selectAll(".arc").data(i(n)).enter().append("g").attr("class","arc").attr("transform","translate("+r+","+r+")");return p.append("path").attr("d",o).attr("class",function(t){return t.data.type+"-arc"}),p.append("svg:text").text(function(e,n){if(0===n)return t.count}).attr("x",-4*t.count.toString().length).attr("dy",5).attr("class","arcText"),window.XMLSerializer?(new window.XMLSerializer).serializeToString(l):l.xml?l.xml:""};o.getMap().then(function(e){function o(t){var e=t.getAllChildMarkers(),o=e.length,a=r.pluck(e,"options"),c=r.map(r.countBy(a,"type"),function(t,e){return{type:e,value:t}}),l=28,s=1,p=2*(l+s),u=i({data:c,r:l,strokeWidth:s,count:o});return new n.DivIcon({html:u,className:"marker-cluster",iconSize:new n.point(p,p)})}function a(t){function e(e){if(r.every(e.coordinates)){"40.78200"===e.coordinates[0].toFixed(5)&&"-73.83170"===e.coordinates[1].toFixed(5)&&(e.coordinates[0]=40.77065,e.coordinates[1]=-73.97406);var i=n.marker(e.coordinates,{icon:s[t.type],title:t.name,entity_id:t.id,message:t.name,type:t.type});p.addLayer(i)}}r.forEach(t.locations,e)}function c(t){console.error(t.message+"  %O",t)}var l=t.entities;e.invalidateSize(),new n.Control.Zoom({position:"topright"}).addTo(e),n.control.locate({position:"topright",showPopup:!1,icon:"fa fa-location-arrow"}).addTo(e);var s={"Non-Profit":n.icon({iconUrl:"img/marker-nonprof.svg",iconSize:[60,60]}),"For-Profit":n.icon({iconUrl:"img/marker-prof.svg",iconSize:[60,60]}),Individual:n.icon({iconUrl:"img/marker-ind.svg",iconSize:[60,60]}),Government:n.icon({iconUrl:"img/marker-gov.svg",iconSize:[60,60]})},p=n.markerClusterGroup({spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,iconCreateFunction:o,maxClusterRadius:30,spiderfyDistanceMultiplier:1.3});console.log("Original: %O",t.entities),console.log("Filtered: %O",l),r.forEach(l,a),e.addLayer(p),e.on("locationerror",c),p.on("click",function(e){t.setEntityID(e.layer.options.entity_id),t.clickedEntity.entity=t.currentEntity,t.actions.interacted=!0,t.settingsEnabled&&t.mobile&&t.toggleSettings(),t.safeApply()}),e.on("click",function(){t.clickedEntity.entity=null,t.actions.interacted=!0,t.safeApply()}),t.$on("selectItem",function(){var n=t.currentEntity.locations.length>0?r.pluck(t.currentEntity.locations,"coordinates"):null;n.length>0&&e.setView(n[0],11),t.actions.interacted=!0,t.safeApply()})})})}var o=["$scope","$timeout","leafletData","_","$filter",i];t.module("civic-graph").controller("mapCtrl",o)}(angular,d3,L);
!function(e){"use strict";function n(e,n){e.itemsShownDefault={key_people:3,grants_given:3,grants_received:3,investments_made:3,investments_received:3,collaborations:3,employments:3,relations:3,data_given:3,data_received:3,revenues:3,expenses:3},e.itemsShown=n.clone(e.itemsShownDefault),e.$on("entityChange",function(){e.itemsShown=n.clone(e.itemsShownDefault)}),e.showMore=function(n){e.itemsShown[n]=e.currentEntity[n].length},e.showLess=function(n){e.itemsShown[n]=e.itemsShownDefault[n]}}e.module("civic-graph").controller("detailsCtrl",["$scope","_",n])}(angular);
!function(e){"use strict";function o(e,o,n,t,i){function c(){a.changeView(a.toggleNetwork?"Network":"Map")}var a=this;a.entityTypes=e.getEntityTypes(),a.connectionTypes=o.getConnectionTypes(),a.sizeByList=[{name:"Employees",value:"employees"},{name:"Twitter Followers",value:"followers"}],a.sizeBy="employees",a.showView={Network:!0,Map:!1},a.switchView=c,a.changeView=function(e){t.forEach(t.keys(a.showView),function(o){a.showView[o]=e===o}),n.$broadcast("viewChange",a.showView)},a.showAbout=function(){i.open({animation:!1,templateUrl:"control/about.html",controller:"modalCtrl"})},a.toggleNode=function(e){n.$broadcast("toggleNode",{name:e,enabled:a.entityTypes[e]})},a.toggleLink=function(e){n.$broadcast("toggleLink",{name:e,enabled:a.connectionTypes[e]})},a.changeSizeBy=function(){n.$broadcast("changeSizeBy",a.sizeBy)},a.changeSizeBy()}var n=["entityService","connectionService","$rootScope","_","$modal",o];e.module("civic-graph").controller("controlCtrl",n)}(angular);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNpdmljLWdyYXBoLm1vZHVsZS5qcyIsImFuYWx5dGljL2FuYWx5dGljc0RpcmVjdGl2ZS5qcyIsImFwaS9jYXRlZ29yeS5zZXJ2aWNlLmpzIiwiYXBpL2Nvbm5lY3Rpb24uc2VydmljZS5qcyIsImFwaS9maW5hbmNlLnNlcnZpY2UuanMiLCJhcGkvZnVuZGluZ0Nvbm5lY3Rpb24uc2VydmljZS5qcyIsImVkaXQtZW50aXR5L2VkaXRDdHJsLmpzIiwiZWRpdC1lbnRpdHkvZWRpdEVudGl0eURpcmVjdGl2ZS5qcyIsImV4dHJhL2FkZE1vYmlsZUV2ZW50cy5qcyIsImV4dHJhL21vZGFsQ3RybC5qcyIsIm1haW4vYXBwLmpzIiwibWFpbi9ob21lQ3RybC5qcyIsIm1hcC9tYXBEaXJlY3RpdmUuanMiLCJuZXR3b3JrL25ldHdvcmtDdHJsLmpzIiwibmV0d29yay9uZXR3b3JrRGlyZWN0aXZlLmpzIiwibmV0d29yay9zbGlkZXJCYXIuanMiLCJjb250cm9sL2NvbnRyb2xEaXJlY3RpdmUuanMiLCJvdmVydmlldy9vdmVydmlld0N0cmwuanMiLCJ1dGlsL3NlcnZpY2UuanMiLCJhbmFseXRpYy9jb250cm9sbGVyL2FuYWx5dGljc0N0cmwuanMiLCJhcGkvYXBpQ2FsbGVyL2NvbmZpZy5qcyIsImFwaS9hcGlDYWxsZXIvc2VydmljZS5qcyIsImFwaS9lbnRpdHkvbG9jYXRpb24uc2VydmljZS5qcyIsImFwaS9lbnRpdHkvc2VydmljZS5qcyIsIm1hcC9jb250cm9sbGVyL21hcEN0cmwuanMiLCJkZXRhaWwvY29udHJvbGxlci9kZXRhaWxzQ3RybC5qcyIsImNvbnRyb2wvY29udHJvbGxlci9jb250cm9sQ3RybC5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibWFpbkRlcGVuZGVuY3lMaXN0IiwiYXBpRGVwZW5kZW5jeUxpc3QiLCJtb2R1bGUiLCJhbmFseXRpY3NEaXJlY3RpdmUiLCJ0ZW1wbGF0ZVVybCIsInJlc3RyaWN0Iiwic2NvcGUiLCJjb250cm9sbGVyIiwiYW5hbHl0aWNzRGVwZW5kZW5jaWVzIiwiZGlyZWN0aXZlIiwiU2VydmljZSIsImFwaUNhbGxlciIsInV0aWxzIiwiQ2F0ZWdvcnkiLCJvYmoiLCJnZXRQcm9wZXJ0eSIsImdldFByb3BlcnR5RnJvbU9iaiIsInRoaXMiLCJpZCIsIm5hbWUiLCJlbmFibGVkIiwiZ2V0Q2F0ZWdvcnlNb2RlbCIsImdldEFsbCIsImdldCIsIiRpbmplY3QiLCJmYWN0b3J5IiwiZ2V0Q29ubmVjdGlvblR5cGVzIiwiRnVuZGluZyIsIkRhdGEiLCJFbXBsb3ltZW50IiwiQ29sbGFib3JhdGlvbiIsIkNvbm5lY3Rpb24iLCJkZXRhaWxzIiwiZW50aXR5IiwiZW50aXR5X2lkIiwiZ2V0Q29ubmVjdGlvbk1vZGVsIiwidXJsIiwiRmluYW5jZSIsInllYXIiLCJhbW91bnQiLCJnZXRGaW5hbmNlTW9kZWwiLCJGdW5kaW5nQ29ubmVjdGlvbiIsImdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwiLCJDb250cm9sbGVyIiwiJHNjb3BlIiwiJGh0dHAiLCIkdGltZW91dCIsIl8iLCJlbnRpdHlTZXJ2aWNlIiwiY2F0ZWdvcnlTZXJ2aWNlIiwibG9jYXRpb25TZXJ2aWNlIiwiaW5pdENhdGVnb3J5QXJyYXkiLCJjYXRlZ29yeSIsImNhdGVnb3J5SW5kZXgiLCJlbnRpdHlDYXRlZ29yeUluZGV4IiwiZW50aXR5Q2F0ZWdvcnkiLCJjYXRlZ29yaWVzIiwiaGFzT3duUHJvcGVydHkiLCJlZGl0RW50aXR5IiwiaXNFZGl0aW5nIiwiZ2V0RW50aXR5TW9kZWwiLCJlbnRpdHlUeXBlcyIsImdldEVudGl0eVR5cGVzIiwiaW5mbHVlbmNlVHlwZXMiLCJnZXRJbmZsdWVuY2VUeXBlcyIsImNhdGVnb3J5QmFja3VwIiwiYWRkcmVzc1NlYXJjaCIsInNlYXJjaCIsImpzb25wIiwicGFyYW1zIiwicXVlcnkiLCJrZXkiLCJpbmNsdWRlIiwidGhlbiIsInJlc3BvbnNlIiwiaXNEZWZpbmVkIiwiZGF0YSIsInJlc291cmNlU2V0cyIsImxlbmd0aCIsInJlc291cmNlcyIsInRvZ2dsZUNhdGVnb3J5IiwicHVzaCIsImZvdW5kIiwic2V0TG9jYXRpb24iLCJsb2NhdGlvbiIsImlzTGFzdCIsImZvcm1hdHRlZEFkZHJlc3MiLCJhcGlDYWxsUmVzdWx0IiwicmVzdWx0IiwiYWRkcmVzcyIsInBvaW50IiwiYWRkTG9jYXRpb24iLCJhZGRyZXNzX2xpbmUiLCJhZGRyZXNzTGluZSIsImxvY2FsaXR5IiwiZGlzdHJpY3QiLCJhZG1pbkRpc3RyaWN0IiwiY291bnRyeSIsImNvdW50cnlSZWdpb24iLCJjb3VudHJ5X2NvZGUiLCJjb3VudHJ5UmVnaW9uSXNvMiIsImNvb3JkaW5hdGVzIiwicG9zdGFsX2NvZGUiLCJwb3N0YWxDb2RlIiwibG9jYXRpb25zIiwiZ2V0TG9jYXRpb25Nb2RlbCIsImFkZEtleVBlcnNvbiIsInNvbWUiLCJrZXlfcGVvcGxlIiwic2V0RnVuZGluZ0Nvbm5lY3Rpb24iLCJmdW5kaW5nIiwiYWRkRnVuZGluZ0Nvbm5lY3Rpb24iLCJzZXRDb25uZWN0aW9uIiwiY29ubmVjdGlvbiIsImFkZENvbm5lY3Rpb24iLCJjb25uZWN0aW9ucyIsImFkZEZpbmFuY2UiLCJyZWNvcmRzIiwiZXZlcnkiLCJyIiwic2F2ZSIsInN1Y2Nlc3MiLCJpc1NhdmluZyIsIiRlbWl0IiwiY2FuY2VsRWRpdCIsImVycm9yIiwiaXNFcnJvciIsInNhdmVFbnRpdHkiLCJnZW5lcmF0ZURCTW9kZWwiLCJpc09wZW4iLCIkd2F0Y2giLCJuZXdWYWwiLCJvbGRWYWwiLCJlcXVhbHMiLCJjb3B5IiwiZWRpdEVudGl0eURpcmVjdGl2ZSIsImVudGl0aWVzIiwiZWRpdEVudGl0eURlcGVuZGVuY2llcyIsIiQiLCJsaW5rRnVuY3Rpb24iLCJzY3JvbGwiLCJzZWxmIiwiY3NzIiwiY2xpY2siLCJ3aW5kb3ciLCJpbm5lckhlaWdodCIsInBhcnNlSW50IiwiZGV0YWlsc1BhbmVsIiwibW9iaWxlIiwic2Nyb2xsVG9wIiwiYWRkTW9iaWxlRXZlbnRzIiwibGluayIsIm1vZGFsQ3RybCIsIiRtb2RhbEluc3RhbmNlIiwiY2xvc2VXaW5kb3ciLCJjbG9zZSIsImNvbnN0YW50IiwiY29uZmlnIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCIkY29tcGlsZVByb3ZpZGVyIiwiaHRtbDVNb2RlIiwiZGVidWdJbmZvRW5hYmxlZCIsImZpbHRlciIsImlucHV0IiwiZGVjaW1hbHMiLCJleHAiLCJzdWZmaXhlcyIsImlzTmFOIiwiTWF0aCIsImZsb29yIiwibG9nIiwicG93IiwidG9GaXhlZCIsImhvbWVDdHJsIiwiY29ubmVjdGlvblNlcnZpY2UiLCJ3YXRjaE1pbkNvbm5lY3Rpb24iLCIkYnJvYWRjYXN0Iiwic2VhcmNoSXRlbXMiLCJjdXJyZW50TG9jYXRpb24iLCJjbGlja2VkTG9jYXRpb24iLCJjbGlja2VkRW50aXR5IiwiZWRpdGluZyIsImFjdGlvbnMiLCJpbnRlcmFjdGVkIiwic2hvd3NlYXJjaE1CIiwic2hvd0FuYWx5dGljcyIsImNvbm5lY3Rpb25UeXBlcyIsInN0YXR1cyIsImlzTmV0d29ya1Nob3duIiwibGljZW5zZSIsIm5ldHdvcmtMb2FkaW5nIiwidG9nZ2xlQW5hbHl0aWNzIiwibWluQ29ubmVjdGlvbnMiLCJjb25uZWN0aW9uQ2hhbmdlIiwiY29uc29sZSIsImh5ZGVQYXJ0aWFscyIsImV4Y2VwdCIsInNldHRpbmdzRW5hYmxlZCIsInNob3dTZWFyY2giLCJ0b2dnbGVTZXR0aW5ncyIsInN0YXJ0RWRpdCIsImN1cnJlbnRFbnRpdHkiLCJzd2l0Y2hWaWV3IiwibW9iaWxlY2hlY2siLCJjaGVjayIsInJlZ2V4IiwicmVnZXgyIiwiYSIsInRlc3QiLCJzdWJzdHIiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ2ZW5kb3IiLCJvcGVyYSIsIm5vZGVzIiwidW5pcSIsInBsdWNrIiwiZmxhdHRlbiIsImVudGl0aWVzQnlMb2NhdGlvbiIsIm1hcCIsImxvYyIsImZpbmRpbmdzIiwiZmxvdyIsInByb3BlcnR5IiwicGFydGlhbFJpZ2h0IiwiYW55IiwidHlwZSIsImRpY3QiLCJ6aXBPYmplY3QiLCJjb25jYXQiLCJvdmVydmlld1VybCIsInNldEVudGl0eSIsInN0b3BFZGl0Iiwic2V0RW50aXR5SUQiLCJmaW5kIiwic2VsZWN0SXRlbSIsIml0ZW0iLCIkb24iLCJldmVudCIsImFyZ3MiLCJ2YWx1ZSIsInNldEVudGl0aWVzIiwiYW5pbWF0aW9uc0VuYWJsZWQiLCJob21lRGVwZW5kZW5jaWVzIiwiZGVwZW5kZW5jaWVzIiwiJGZpbHRlciIsInN0YXJ0TG9hZCIsImZpbHRlcmVkRW50aXRpZXMiLCJjb2xsYWJvcmF0aW9ucyIsImZpbHRlcmVkQ29ubmVjdGlvbnMiLCJmb3JFYWNoIiwia2V5cyIsInNvdXJjZU5vZGUiLCJzb3VyY2UiLCJ0YXJnZXROb2RlIiwidGFyZ2V0IiwidG9wNSIsInRha2VSaWdodCIsInNvcnRCeSIsIndlbGxjb25uZWN0ZWQiLCJlIiwiZHJhd05ldHdvcmsiLCJpc0xvYWRpbmciLCJzYWZlQXBwbHkiLCJmbiIsInBoYXNlIiwiJHJvb3QiLCIkJHBoYXNlIiwiJGFwcGx5Iiwidmlld09iaiIsImVudGl0eUFycmF5IiwiY29ubmVjdGlvbkFycmF5Iiwic3ZnIiwiZDMiLCJzZWxlY3QiLCJzZWxlY3RBbGwiLCJyZW1vdmUiLCJib3VuZHMiLCJub2RlIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiaGVpZ2h0Iiwid2lkdGgiLCJvZmZzZXRTY2FsZSIsImRlZmF1bHROb2RlU2l6ZSIsIm9mZnNldHMiLCJJbmRpdmlkdWFsIiwieCIsInkiLCJGb3ItUHJvZml0IiwiTm9uLVByb2ZpdCIsIkdvdmVybm1lbnQiLCJsb3dlckJvdW5kUmFkaXVzIiwidXBwZXJCb3VuZFJhZGl1cyIsIm1heEVtcGxveWVlcyIsIm1heCIsImVsIiwiZW1wbG95ZWVzIiwibWF4Rm9sbG93ZXJzIiwiZm9sbG93ZXJzIiwic2NhbGUiLCJzcXJ0IiwiZG9tYWluIiwicmFuZ2UiLCJsaW5rcyIsImZvcmNlIiwibGF5b3V0Iiwic2l6ZSIsInZhbHVlcyIsImNoYXJnZSIsImQiLCJsaW5rU3RyZW5ndGgiLCJsaW5rRGlzdGFuY2UiLCJlbnRlciIsImFwcGVuZCIsImF0dHIiLCJjYWxsIiwiZHJhZyIsInRleHQiLCJuaWNrbmFtZSIsImdldENvbXB1dGVkVGV4dExlbmd0aCIsInBhcmVudE5vZGUiLCJnZXRCQm94Iiwib24iLCJrIiwiYWxwaGEiLCJtaW4iLCJzcGVlZEFuaW1hdGUiLCJ0aWNrcyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInJlbmRlciIsImkiLCJ0aWNrIiwic3RhcnQiLCJsaW5rZWRCeUluZGV4IiwibCIsIl9fZGF0YV9fIiwiaW5kZXgiLCJob3ZlclRpbWVyIiwibmVpZ2hib3JpbmciLCJiIiwiZm9jdXNuZWlnaGJvcnMiLCJjbGFzc2VkIiwibiIsIm8iLCJmb2N1cyIsInVuZm9jdXMiLCJmaXhlZCIsInJlc3VtZSIsImhvdmVyIiwic2V0VGltZW91dCIsInVuaG92ZXIiLCJjbGVhclRpbWVvdXQiLCJmb2N1c0xvY2F0aW9uIiwidW5mb2N1c0xvY2F0aW9uIiwiaGlnaGxpZ2h0TG9jYXRpb24iLCJzaG93TGljZW5zZSIsInN0b3BQcm9wYWdhdGlvbiIsImJhY2tncm91bmRjbGljayIsImRibGNsaWNrIiwicHgiLCJweSIsInNpemVCeSIsInRyYW5zaXRpb24iLCJkdXJhdGlvbiIsInZhbCIsInZpc2libGUiLCJoaWRkZW4iLCJSVFAiLCJyZXN0aWN0IiwicmVxdWlyZSIsImVsZW1lbnQiLCJhdHRycyIsIm5nTW9kZWwiLCJ0b0xvd2VyQ2FzZSIsIiRwYXJzZXJzIiwicGFyc2VGbG9hdCIsImNvbnRyb2xEaXJlY3RpdmUiLCJ0b2dnbGVOZXR3b3JrIiwiY29udHJvbGxlckFzIiwiYmluZFRvQ29udHJvbGxlciIsImNvbnRyb2xEZXBlbmRlbmNpZXMiLCJvdmVydmlld0N0cmwiLCJjYXRlZ29yaXplZEVudGl0aWVzIiwiaXNPYmplY3QiLCJBcnJheSIsImlzQXJyYXkiLCJkZWZPYmoiLCJkZWZhdWx0VmFsdWUiLCJsb29wQW5kSW5pdCIsIm1vZGVsQXJyYXkiLCJpbml0TW9kZWxGdW5jdGlvbiIsIm5ld0FycmF5IiwiYW5hbHl0aWNzQ3RybCIsIkNvbmZpZyIsIiRodHRwUHJvdmlkZXIiLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iLCIkcSIsImxvZ0FwaUVycm9yIiwiZXJyIiwicmVqZWN0IiwidW53cmFwQW5ndWxhckh0dHAiLCJhcGlVcmwiLCJkZWZhdWx0SGVhZGVyIiwicG9zdCIsIkxvY2F0aW9uIiwiYnVpbGRGb3JtYXR0ZWRBZGRyZXNzIiwiY291bnRyeUNvZGUiLCJ0cmltIiwiZnVuQ29ublNlcnZpY2UiLCJjb25uU2VydmljZSIsImZpbmFuY2VTZXJ2aWNlIiwiRW50aXR5IiwiZGJNb2RlbCIsInBvcCIsImdyYW50c19yZWNlaXZlZCIsImdyYW50c19naXZlbiIsImludmVzdG1lbnRzX3JlY2VpdmVkIiwiaW52ZXN0bWVudHNfbWFkZSIsImRhdGFfZ2l2ZW4iLCJkYXRhX3JlY2VpdmVkIiwiZW1wbG95bWVudHMiLCJyZXZlbnVlcyIsImV4cGVuc2VzIiwiZGVzY3JpcHRpb24iLCJpbmZsdWVuY2UiLCJ0d2l0dGVyX2hhbmRsZSIsIkwiLCJtYXBDdHJsIiwibGVhZmxldERhdGEiLCJvcHRpb25zIiwiY2VudGVyIiwibGF0IiwibG5nIiwiem9vbSIsInRpbGVMYXllciIsInRpbGVMYXllck9wdGlvbnMiLCJkZXRlY3RSZXRpbmEiLCJyZXVzZVRpbGVzIiwiem9vbUNvbnRyb2wiLCJhdHRyaWJ1dGlvbkNvbnRyb2wiLCJjcmVhdGVQaWVDaGFydCIsInBpZSIsInNvcnQiLCJhcmMiLCJvdXRlclJhZGl1cyIsImlubmVyUmFkaXVzIiwic3Ryb2tlV2lkdGgiLCJ3IiwiaCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwibnMiLCJwcmVmaXgiLCJ2aXMiLCJhcmNzIiwiY291bnQiLCJ0b1N0cmluZyIsIlhNTFNlcmlhbGl6ZXIiLCJzZXJpYWxpemVUb1N0cmluZyIsInhtbCIsImdldE1hcCIsImNsdXN0ZXJJY29uIiwiY2x1c3RlciIsImNoaWxkcmVuIiwiZ2V0QWxsQ2hpbGRNYXJrZXJzIiwidG90YWwiLCJjbHVzdGVyTWFya2VycyIsImNvdW50cyIsImNvdW50QnkiLCJpY29uRGltIiwiaHRtbCIsIkRpdkljb24iLCJjbGFzc05hbWUiLCJpY29uU2l6ZSIsIm91dGVyTG9vcCIsImlubmVyTG9vcCIsIm0iLCJtYXJrZXIiLCJpY29uIiwibWFya2VySWNvbiIsInRpdGxlIiwibWVzc2FnZSIsIm1hcmtlcnMiLCJhZGRMYXllciIsIm9uTG9jYXRpb25FcnJvciIsImxlYWZsZXRFcnJvciIsImludmFsaWRhdGVTaXplIiwiQ29udHJvbCIsIlpvb20iLCJwb3NpdGlvbiIsImFkZFRvIiwiY29udHJvbCIsImxvY2F0ZSIsInNob3dQb3B1cCIsImljb25VcmwiLCJtYXJrZXJDbHVzdGVyR3JvdXAiLCJzcGlkZXJmeU9uTWF4Wm9vbSIsInNob3dDb3ZlcmFnZU9uSG92ZXIiLCJpY29uQ3JlYXRlRnVuY3Rpb24iLCJtYXhDbHVzdGVyUmFkaXVzIiwic3BpZGVyZnlEaXN0YW5jZU11bHRpcGxpZXIiLCJsYXllciIsInNldFZpZXciLCJkZXRhaWxzQ3RybCIsIml0ZW1zU2hvd25EZWZhdWx0IiwicmVsYXRpb25zIiwiaXRlbXNTaG93biIsImNsb25lIiwic2hvd01vcmUiLCJzaG93TGVzcyIsImNvbnRyb2xDdHJsIiwiJHJvb3RTY29wZSIsIiRtb2RhbCIsInZtIiwiY2hhbmdlVmlldyIsInNpemVCeUxpc3QiLCJzaG93VmlldyIsIk5ldHdvcmsiLCJNYXAiLCJ2aWV3Iiwic2hvd0Fib3V0Iiwib3BlbiIsImFuaW1hdGlvbiIsInRvZ2dsZU5vZGUiLCJ0b2dnbGVMaW5rIiwiY2hhbmdlU2l6ZUJ5IiwiY29udHJvbERlcHMiXSwibWFwcGluZ3MiOiJDQUFBLFNBQVVBLEdBRU4sWUFFQSxJQUFJQyxJQUNBLGVBQ0Esb0JBQ0EsWUFDQSxnQkFDQSxrQkFDQSxvQkFHQUMsR0FBcUIsbUJBRXpCRixHQUFRRyxPQUFPLHVCQUNmSCxFQUFRRyxPQUFPLGtCQUFtQkQsR0FDbENGLEVBQVFH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QU9TLE1BQ0hDLFdBQVcsRUFDWHhnQixZQUFhLHFCQUNiRyxXQUFZLGVBR3BCNGYsRUFBR1UsV0FBYSxTQUFVM1MsR0FDdEIrUixFQUFXalYsV0FBVyxjQUFlN0osS0FBUStNLEVBQU05TSxRQUFXK2UsRUFBR3RjLFlBQVlxSyxNQUdqRmlTLEVBQUdXLFdBQWEsU0FBVTVTLEdBQ3RCK1IsRUFBV2pWLFdBQVcsY0FBZTdKLEtBQVErTSxFQUFNOU0sUUFBVytlLEVBQUd6VSxnQkFBZ0J3QyxNQUdyRmlTLEVBQUdZLGFBQWUsV0FDZGQsRUFBV2pWLFdBQVcsZUFBZ0JtVixFQUFHMUosU0FNN0MwSixFQUFHWSxlQW5EUCxHQUFJQyxJQUNBLGdCQUNBLG9CQUNBLGFBQ0EsSUFDQSxTQUNBaEIsRUFpREpqZ0IsR0FBUUcsT0FBTyxlQUNWSyxXQUFXLGNBQWV5Z0IsSUFFaENqaEIiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbihhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgbWFpbkRlcGVuZGVuY3lMaXN0ID0gW1xuICAgICAgICBcInVpLmJvb3RzdHJhcFwiLFxuICAgICAgICBcImxlYWZsZXQtZGlyZWN0aXZlXCIsXG4gICAgICAgIFwibmdBbmltYXRlXCIsXG4gICAgICAgIFwidGVtcGxhdGVDYWNoZVwiLFxuICAgICAgICBcImNpdmljLWdyYXBoLmFwaVwiLFxuICAgICAgICBcImNpdmljLWdyYXBoLnV0aWxcIlxuICAgIF07XG5cbiAgICB2YXIgYXBpRGVwZW5kZW5jeUxpc3QgPSBbXCJjaXZpYy1ncmFwaC51dGlsXCJdO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJjaXZpYy1ncmFwaC51dGlsXCIsIFtdKTtcbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiLCBhcGlEZXBlbmRlbmN5TGlzdCk7XG4gICAgYW5ndWxhci5tb2R1bGUoXCJjaXZpYy1ncmFwaFwiLCBtYWluRGVwZW5kZW5jeUxpc3QpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNy8xLzE2LlxuICovXG5cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgYW5hbHl0aWNzRGVwZW5kZW5jaWVzID0gW2FuYWx5dGljc0RpcmVjdGl2ZV07XG5cbiAgICBmdW5jdGlvbiBhbmFseXRpY3NEaXJlY3RpdmUoKXtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnanMvYW5hbHl0aWMvYW5hbHl0aWNzLmh0bWwnLFxuICAgICAgICAgICAgcmVzdHJpY3QgICA6ICdFJyxcbiAgICAgICAgICAgIHNjb3BlICAgICAgOiB7fSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgICA6ICdhbmFseXRpY3NDdHJsJ1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2FuYWx5dGljcycsIGFuYWx5dGljc0RlcGVuZGVuY2llcyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI4LzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBTZXJ2aWNlKGFwaUNhbGxlciwgdXRpbHMpIHtcblxuICAgICAgICBmdW5jdGlvbiBDYXRlZ29yeShvYmopIHtcbiAgICAgICAgICAgIHZhciBnZXRQcm9wZXJ0eSA9IHV0aWxzLmdldFByb3BlcnR5RnJvbU9iaihvYmopO1xuXG4gICAgICAgICAgICB0aGlzLmlkID0gZ2V0UHJvcGVydHkoXCJpZFwiKTtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IGdldFByb3BlcnR5KFwibmFtZVwiKTtcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlZCA9IGdldFByb3BlcnR5KFwiZW5hYmxlXCIsIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Q2F0ZWdvcnlNb2RlbChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2F0ZWdvcnkob2JqKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEFsbCgpIHtcbiAgICAgICAgICAgIHJldHVybiBhcGlDYWxsZXIuZ2V0KFwiL2NhdGVnb3JpZXNcIik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJnZXRDYXRlZ29yeU1vZGVsXCI6IGdldENhdGVnb3J5TW9kZWwsXG4gICAgICAgICAgICBcImdldEFsbFwiOiBnZXRBbGxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBTZXJ2aWNlLiRpbmplY3QgPSBbXCJjZ0FwaUNhbGxlclwiLCBcImNnVXRpbFNlcnZpY2VcIl07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIilcbiAgICAgICAgLmZhY3RvcnkoXCJjYXRlZ29yeVNlcnZpY2VcIiwgU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxuICovXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIHVybCA9IFwiL2Nvbm5lY3Rpb25zXCI7XG5cbiAgICBmdW5jdGlvbiBnZXRDb25uZWN0aW9uVHlwZXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcIkZ1bmRpbmdcIjogdHJ1ZSxcbiAgICAgICAgICAgIFwiRGF0YVwiOiB0cnVlLFxuICAgICAgICAgICAgXCJFbXBsb3ltZW50XCI6IHRydWUsXG4gICAgICAgICAgICBcIkNvbGxhYm9yYXRpb25cIjogdHJ1ZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFNlcnZpY2UoYXBpQ2FsbGVyLCB1dGlscykge1xuXG4gICAgICAgIGZ1bmN0aW9uIENvbm5lY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICB2YXIgZ2V0UHJvcGVydHkgPSB1dGlscy5nZXRQcm9wZXJ0eUZyb21PYmoob2JqKTtcblxuICAgICAgICAgICAgdGhpcy5pZCA9IGdldFByb3BlcnR5KFwiaWRcIik7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBnZXRQcm9wZXJ0eShcIm5hbWVcIik7XG4gICAgICAgICAgICB0aGlzLmRldGFpbHMgPSBnZXRQcm9wZXJ0eShcImRldGFpbHNcIik7XG4gICAgICAgICAgICB0aGlzLmVudGl0eSA9IGdldFByb3BlcnR5KFwiZW50aXR5XCIpO1xuICAgICAgICAgICAgdGhpcy5lbnRpdHlfaWQgPSBnZXRQcm9wZXJ0eShcImVudGl0eV9pZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldENvbm5lY3Rpb25Nb2RlbChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ29ubmVjdGlvbihvYmopO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0QWxsKCkge1xuICAgICAgICAgICAgcmV0dXJuIGFwaUNhbGxlci5nZXQodXJsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcImdldEFsbFwiOiBnZXRBbGwsXG4gICAgICAgICAgICBcImdldENvbm5lY3Rpb25UeXBlc1wiOiBnZXRDb25uZWN0aW9uVHlwZXMsXG4gICAgICAgICAgICBcImdldENvbm5lY3Rpb25Nb2RlbFwiOiBnZXRDb25uZWN0aW9uTW9kZWxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBTZXJ2aWNlLiRpbmplY3QgPSBbXCJjZ0FwaUNhbGxlclwiLCBcImNnVXRpbFNlcnZpY2VcIl07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIilcbiAgICAgICAgLmZhY3RvcnkoXCJjb25uZWN0aW9uU2VydmljZVwiLCBTZXJ2aWNlKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjcvMTYuXG4gKi9cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBTZXJ2aWNlKHV0aWxzKSB7XG4gICAgICAgIGZ1bmN0aW9uIEZpbmFuY2Uob2JqKSB7XG4gICAgICAgICAgICB2YXIgZ2V0UHJvcGVydHkgPSB1dGlscy5nZXRQcm9wZXJ0eUZyb21PYmoob2JqKTtcblxuICAgICAgICAgICAgdGhpcy5pZCA9IGdldFByb3BlcnR5KFwiaWRcIik7XG4gICAgICAgICAgICB0aGlzLnllYXIgPSBnZXRQcm9wZXJ0eShcInllYXJcIik7XG4gICAgICAgICAgICB0aGlzLmFtb3VudCA9IGdldFByb3BlcnR5KFwiYW1vdW50XCIsIDApO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RmluYW5jZU1vZGVsKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBGaW5hbmNlKG9iaik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJnZXRGaW5hbmNlTW9kZWxcIjogZ2V0RmluYW5jZU1vZGVsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgU2VydmljZS4kaW5qZWN0ID0gW1wiY2dVdGlsU2VydmljZVwiXTtcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKVxuICAgICAgICAuZmFjdG9yeShcImZpbmFuY2VTZXJ2aWNlXCIsIFNlcnZpY2UpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNy8xNi5cbiAqL1xuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIFNlcnZpY2UodXRpbHMpIHtcblxuICAgICAgICBmdW5jdGlvbiBGdW5kaW5nQ29ubmVjdGlvbihvYmopIHtcbiAgICAgICAgICAgIHZhciBnZXRQcm9wZXJ0eSA9IHV0aWxzLmdldFByb3BlcnR5RnJvbU9iaihvYmopO1xuXG4gICAgICAgICAgICB0aGlzLmlkID0gZ2V0UHJvcGVydHkoXCJpZFwiKTtcbiAgICAgICAgICAgIHRoaXMueWVhciA9IGdldFByb3BlcnR5KFwieWVhclwiKTtcbiAgICAgICAgICAgIHRoaXMuYW1vdW50ID0gZ2V0UHJvcGVydHkoXCJhbW91bnRcIik7XG4gICAgICAgICAgICB0aGlzLmVudGl0eSA9IGdldFByb3BlcnR5KFwiZW50aXR5XCIsIFwiXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRnVuZGluZ0Nvbm5lY3Rpb24ob2JqKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcImdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWxcIjogZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIFNlcnZpY2UuJGluamVjdCA9IFtcImNnVXRpbFNlcnZpY2VcIl07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIilcbiAgICAgICAgLmZhY3RvcnkoXCJmdW5kaW5nQ29ubmVjdGlvblNlcnZpY2VcIiwgU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIENvbnRyb2xsZXIoJHNjb3BlLCAkaHR0cCwgJHRpbWVvdXQsIF8sIGVudGl0eVNlcnZpY2UsIGNhdGVnb3J5U2VydmljZSwgbG9jYXRpb25TZXJ2aWNlLCB1dGlscykge1xuICAgICAgICAkc2NvcGUuaXNFZGl0aW5nID0gZmFsc2U7XG4gICAgICAgICRzY29wZS5lZGl0RW50aXR5ID0gZW50aXR5U2VydmljZS5nZXRFbnRpdHlNb2RlbCgkc2NvcGUuZW50aXR5KTtcbiAgICAgICAgJHNjb3BlLmVudGl0eVR5cGVzID0gZW50aXR5U2VydmljZS5nZXRFbnRpdHlUeXBlcygpO1xuICAgICAgICAkc2NvcGUuaW5mbHVlbmNlVHlwZXMgPSBlbnRpdHlTZXJ2aWNlLmdldEluZmx1ZW5jZVR5cGVzKCk7XG5cbiAgICAgICAgdmFyIGNhdGVnb3J5QmFja3VwO1xuXG4gICAgICAgICRzY29wZS5jYXRlZ29yaWVzID0gW107XG5cbiAgICAgICAgJHNjb3BlLmFkZHJlc3NTZWFyY2ggPSBmdW5jdGlvbiAoc2VhcmNoKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuanNvbnAoJ2h0dHBzOi8vZGV2LnZpcnR1YWxlYXJ0aC5uZXQvUkVTVC92MS9Mb2NhdGlvbnMnLCB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBzZWFyY2gsXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ0FpNTg1ODF5Qy1TcjdtY0ZiWVR0VWtTM2l4RTdmNlp1Sm5iRkpDVkk0aEF0VzFYb0RFZVp5aWRRejJnTENDeUQnLFxuICAgICAgICAgICAgICAgICAgICAnanNvbnAnOiAnSlNPTl9DQUxMQkFDSycsXG4gICAgICAgICAgICAgICAgICAgICdpbmNsdWRlJzogJ2Npc28yJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1dGlscy5pc0RlZmluZWQocmVzcG9uc2UuZGF0YS5yZXNvdXJjZVNldHMpICYmIHJlc3BvbnNlLmRhdGEucmVzb3VyY2VTZXRzLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS5yZXNvdXJjZVNldHNbMF0ucmVzb3VyY2VzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnRvZ2dsZUNhdGVnb3J5ID0gZnVuY3Rpb24gKGNhdGVnb3J5KSB7XG4gICAgICAgICAgICBpZiAoJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzLnB1c2goY2F0ZWdvcnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBjYXRlZ29yeUluZGV4IGluICRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzLmhhc093blByb3BlcnR5KGNhdGVnb3J5SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgZW50aXR5Q2F0ZWdvcnkgPSAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzW2NhdGVnb3J5SW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW50aXR5Q2F0ZWdvcnkuaWQgPT09IGNhdGVnb3J5LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHlDYXRlZ29yeS5lbmFibGVkID0gY2F0ZWdvcnkuZW5hYmxlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcy5wdXNoKGNhdGVnb3J5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNldExvY2F0aW9uID0gZnVuY3Rpb24gKGxvY2F0aW9uLCBpc0xhc3QpIHtcbiAgICAgICAgICAgICRzY29wZS5hZGRyZXNzU2VhcmNoKGxvY2F0aW9uLmZvcm1hdHRlZEFkZHJlc3MpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGFwaUNhbGxSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoIXV0aWxzLmlzRGVmaW5lZChhcGlDYWxsUmVzdWx0WzBdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBhcGlDYWxsUmVzdWx0WzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyA9IHJlc3VsdC5hZGRyZXNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnQgPSByZXN1bHQucG9pbnQ7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRMb2NhdGlvbihpc0xhc3QpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFBhcnNlcyBBUEkgY2FsbCByZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uYWRkcmVzc19saW5lID0gdXRpbHMuaXNEZWZpbmVkKGFkZHJlc3MuYWRkcmVzc0xpbmUpID8gYWRkcmVzcy5hZGRyZXNzTGluZSA6ICcnO1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5sb2NhbGl0eSA9IHV0aWxzLmlzRGVmaW5lZChhZGRyZXNzLmxvY2FsaXR5KSA/IGFkZHJlc3MubG9jYWxpdHkgOiAnJztcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uZGlzdHJpY3QgPVxuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMuaXNEZWZpbmVkKGFkZHJlc3MuYWRtaW5EaXN0cmljdCkgPyBhZGRyZXNzLmFkbWluRGlzdHJpY3QgOiAnJztcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uY291bnRyeSA9XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5pc0RlZmluZWQoYWRkcmVzcy5jb3VudHJ5UmVnaW9uKSA/IGFkZHJlc3MuY291bnRyeVJlZ2lvbiA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmNvdW50cnlfY29kZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5pc0RlZmluZWQoYWRkcmVzcy5jb3VudHJ5UmVnaW9uSXNvMikgPyBhZGRyZXNzLmNvdW50cnlSZWdpb25Jc28yIDogJyc7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmNvb3JkaW5hdGVzID0gdXRpbHMuaXNEZWZpbmVkKHBvaW50LmNvb3JkaW5hdGVzKSA/IHBvaW50LmNvb3JkaW5hdGVzIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucG9zdGFsX2NvZGUgPSB1dGlscy5pc0RlZmluZWQoYWRkcmVzcy5wb3N0YWxDb2RlKSA/IGFkZHJlc3MucG9zdGFsQ29kZSA6IG51bGw7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmFkZExvY2F0aW9uID0gZnVuY3Rpb24gKGlzTGFzdCkge1xuICAgICAgICAgICAgaWYgKGlzTGFzdCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5lZGl0RW50aXR5LmxvY2F0aW9ucy5wdXNoKGxvY2F0aW9uU2VydmljZS5nZXRMb2NhdGlvbk1vZGVsKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5hZGRLZXlQZXJzb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBBZGQgYmxhbmsgZmllbGQgdG8gZWRpdCBpZiB0aGVyZSBhcmUgbm9uZS5cbiAgICAgICAgICAgIC8vIFdBVENIIE9VVCEgVE9ETzogSWYgc29tZW9uZSBkZWxldGVzIGFuIG9sZCBwZXJzb24sIGRlbGV0ZSB0aGVpciBpZCB0b28uXG4gICAgICAgICAgICAvLyBpLmUuIG1ha2Ugc3VyZSBvbGQvY2xlYXJlZCBmb3JtIGZpZWxkcyBhcmVuJ3QgYmVpbmcgZWRpdGVkIGludG8gbmV3IHBlb3BsZS5cbiAgICAgICAgICAgIGlmICghKF8uc29tZSgkc2NvcGUuZWRpdEVudGl0eS5rZXlfcGVvcGxlLCB7J25hbWUnOiAnJywgJ2lkJzogbnVsbH0pKSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5lZGl0RW50aXR5LmtleV9wZW9wbGUucHVzaCh7J25hbWUnOiAnJywgJ2lkJzogbnVsbH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZXRGdW5kaW5nQ29ubmVjdGlvbiA9IGZ1bmN0aW9uIChlbnRpdHksIGZ1bmRpbmcpIHtcbiAgICAgICAgICAgIC8vIEFkZCBvdGhlciBlbnRpdHkncyBpZCB0byB0aGlzIGZpbmFuY2UgY29ubmVjdGlvbi5cbiAgICAgICAgICAgIGZ1bmRpbmcuZW50aXR5X2lkID0gZW50aXR5LmlkO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5hZGRGdW5kaW5nQ29ubmVjdGlvbiA9IGZ1bmN0aW9uIChmdW5kaW5nKSB7XG4gICAgICAgICAgICBpZiAoIV8uc29tZShmdW5kaW5nLCB7J2VudGl0eSc6ICcnfSkpIHtcbiAgICAgICAgICAgICAgICAvLyBNYXliZSBzZXQgYW1vdW50IHRvIDAgaW5zdGVhZCBvZiBudWxsP1xuICAgICAgICAgICAgICAgIGZ1bmRpbmcucHVzaCh7J2VudGl0eSc6ICcnLCAnYW1vdW50JzogbnVsbCwgJ3llYXInOiBudWxsLCAnaWQnOiBudWxsfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNldENvbm5lY3Rpb24gPSBmdW5jdGlvbiAoZW50aXR5LCBjb25uZWN0aW9uKSB7XG4gICAgICAgICAgICBjb25uZWN0aW9uLmVudGl0eV9pZCA9IGVudGl0eS5pZDtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuYWRkQ29ubmVjdGlvbiA9IGZ1bmN0aW9uIChjb25uZWN0aW9ucykge1xuICAgICAgICAgICAgLy8gQWRkIGFuIGVtcHR5IGNvbm5lY3Rpb24gdG8gZWRpdCBpZiBub25lIGV4aXN0LlxuICAgICAgICAgICAgaWYgKCFfLnNvbWUoY29ubmVjdGlvbnMsIHsnZW50aXR5JzogJycsICdpZCc6IG51bGx9KSkge1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25zLnB1c2goeydlbnRpdHknOiAnJywgJ2lkJzogbnVsbCwgJ2RldGFpbHMnOiBudWxsfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmFkZEZpbmFuY2UgPSBmdW5jdGlvbiAocmVjb3Jkcykge1xuICAgICAgICAgICAgLy8gQWRkIG5ldyBmaW5hbmNlIGZpZWxkIGlmIGFsbCBjdXJyZW50IGZpZWxkcyBhcmUgdmFsaWQuXG4gICAgICAgICAgICBpZiAoXy5ldmVyeShyZWNvcmRzLCBmdW5jdGlvbiAocikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gci5hbW91bnQgPiAwICYmIHIueWVhciA+IDE3NTA7XG4gICAgICAgICAgICAgICAgfSkpIHtcbiAgICAgICAgICAgICAgICByZWNvcmRzLnB1c2goeydhbW91bnQnOiBudWxsLCAneWVhcic6IG51bGwsICdpZCc6IG51bGx9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5pc1NhdmluZyA9IHRydWU7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXNTYXZpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuJGVtaXQoXCJlZGl0RW50aXR5U3VjY2Vzc1wiLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgLy8gQ2FsbCB0byBob21lQ3RybCdzIHBhcmVudCBzdG9wRWRpdCgpIHRvIGNoYW5nZSB2aWV3IGJhY2sgYW5kIGFueSBvdGhlclxuICAgICAgICAgICAgICAgIC8vIGhpZ2gtbGV2ZWwgY2hhbmdlcy5cbiAgICAgICAgICAgICAgICAkc2NvcGUuY2FuY2VsRWRpdCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBlcnJvcigpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXNFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXNFcnJvciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbnRpdHlTZXJ2aWNlXG4gICAgICAgICAgICAgICAgLnNhdmVFbnRpdHkoJHNjb3BlLmVkaXRFbnRpdHkuZ2VuZXJhdGVEQk1vZGVsKCkpXG4gICAgICAgICAgICAgICAgLnRoZW4oc3VjY2VzcywgZXJyb3IpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5jYW5jZWxFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS4kd2F0Y2goJ2VudGl0eScsIGZ1bmN0aW9uIChuZXdWYWwsIG9sZFZhbCkge1xuICAgICAgICAgICAgaWYgKGFuZ3VsYXIuZXF1YWxzKG5ld1ZhbCwgb2xkVmFsKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmVkaXRFbnRpdHkgPSBlbnRpdHlTZXJ2aWNlLmdldEVudGl0eU1vZGVsKG5ld1ZhbCk7XG4gICAgICAgICAgICAkc2NvcGUuY2F0ZWdvcmllcyA9IGFuZ3VsYXIuY29weShjYXRlZ29yeUJhY2t1cCk7XG5cbiAgICAgICAgICAgIGluaXRDYXRlZ29yeUFycmF5KCk7XG5cbiAgICAgICAgICAgICRzY29wZS5pc0VkaXRpbmcgPSB1dGlscy5pc0RlZmluZWQoJHNjb3BlLmVkaXRFbnRpdHkuaWQpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW5pdGlhbGl6ZXMgY2F0ZWdvcnkgZmllbGRzIHdpdGggZW50aXR5IHZhbHVlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogTG9vcHMgdGhyb3VnaCBjYXRlZ29yeSBpbiBjYXRlZ29yaWVzIGFuZCBsb29wcyB0aHJvdWdoIGNhdGVnb3J5IGluIGVudGl0eS4gSWRlbnRpZmllc1xuICAgICAgICAgKiBjYXRlZ29yaWVzIGVuYWJsZWQgaW4gdGhlIGVudGl0eSBhbmQgc2V0cyBsb2NhbCBkaXNwbGF5IGRhdGEuIFRoaXMgaXMgYmVjYXVzZSB3ZSBjcmVhdGVkXG4gICAgICAgICAqIGEgYmFja3VwIG9mIGVudGl0eSBkYXRhIHNvIHRoYXQgdGhlIGFwaSBkYXRhIGlzIG5vdCB0YW1wZXJlZCB3aXRoIGRpcmVjdGx5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUT0RPOiByZXBsYWNlIHdpdGggYmV0dGVyIGRhdGEgc3RydWN0dXJlIGZvciBjYXRlZ29yaWVzLlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gaW5pdENhdGVnb3J5QXJyYXkoKSB7XG4gICAgICAgICAgICB2YXIgY2F0ZWdvcnksXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnlJbmRleCxcbiAgICAgICAgICAgICAgICBlbnRpdHlDYXRlZ29yeUluZGV4LFxuICAgICAgICAgICAgICAgIGVudGl0eUNhdGVnb3J5O1xuXG4gICAgICAgICAgICBmb3IgKGNhdGVnb3J5SW5kZXggaW4gJHNjb3BlLmNhdGVnb3JpZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5jYXRlZ29yaWVzLmhhc093blByb3BlcnR5KGNhdGVnb3J5SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRlZ29yeSA9ICRzY29wZS5jYXRlZ29yaWVzW2NhdGVnb3J5SW5kZXhdO1xuICAgICAgICAgICAgICAgIGZvciAoZW50aXR5Q2F0ZWdvcnlJbmRleCBpbiAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcy5oYXNPd25Qcm9wZXJ0eShlbnRpdHlDYXRlZ29yeUluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZW50aXR5Q2F0ZWdvcnkgPSAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzW2VudGl0eUNhdGVnb3J5SW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2F0ZWdvcnkuaWQgPT09IGVudGl0eUNhdGVnb3J5LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeS5lbmFibGVkID0gZW50aXR5Q2F0ZWdvcnkuZW5hYmxlZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJldHJpZXZlIENhdGVnb3JpZXMgZnJvbSBEQlxuICAgICAgICBjYXRlZ29yeVNlcnZpY2VcbiAgICAgICAgICAgIC5nZXRBbGwoKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUJhY2t1cCA9IGRhdGEuY2F0ZWdvcmllcztcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGVzIGJhY2t1cCBvZiBkYXRhIHVzaW5nIEFuZ3VsYXIgdG8gcHJldmVudCBhcGkgZGF0YSBmcm9tIGJlaW5nIHRhbXBlcmVkXG4gICAgICAgICAgICAgICAgLy8gZGlyZWN0bHlcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2F0ZWdvcmllcyA9IGFuZ3VsYXIuY29weShjYXRlZ29yeUJhY2t1cCk7XG4gICAgICAgICAgICAgICAgLy8gJHNjb3BlLmNhdGVnb3JpZXMgPSBkYXRhLmNhdGVnb3JpZXM7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBDb250cm9sbGVyLiRpbmplY3QgPSBbXG4gICAgICAgIFwiJHNjb3BlXCIsXG4gICAgICAgIFwiJGh0dHBcIixcbiAgICAgICAgXCIkdGltZW91dFwiLFxuICAgICAgICBcIl9cIixcbiAgICAgICAgXCJlbnRpdHlTZXJ2aWNlXCIsXG4gICAgICAgIFwiY2F0ZWdvcnlTZXJ2aWNlXCIsXG4gICAgICAgIFwibG9jYXRpb25TZXJ2aWNlXCIsXG4gICAgICAgIFwiY2dVdGlsU2VydmljZVwiXG4gICAgXTtcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoXCIpXG4gICAgICAgIC5jb250cm9sbGVyKFwiZWRpdEN0cmxcIiwgQ29udHJvbGxlcik7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNy8xNi5cbiAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBlZGl0RW50aXR5RGVwZW5kZW5jaWVzID0gW2VkaXRFbnRpdHlEaXJlY3RpdmVdO1xuXG4gICAgZnVuY3Rpb24gZWRpdEVudGl0eURpcmVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnanMvZWRpdC1lbnRpdHkvZWRpdC5odG1sJyxcbiAgICAgICAgICAgIHJlc3RyaWN0ICAgOiAnRScsXG4gICAgICAgICAgICBzY29wZSAgICAgIDoge1xuICAgICAgICAgICAgICAgICdlbnRpdHknICA6IFwiPVwiLFxuICAgICAgICAgICAgICAgICdlbnRpdGllcyc6IFwiPVwiLFxuICAgICAgICAgICAgICAgICdpc09wZW4nICA6IFwiPVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29udHJvbGxlciA6ICdlZGl0Q3RybCdcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuZGlyZWN0aXZlKCdlZGl0RW50aXR5JywgZWRpdEVudGl0eURlcGVuZGVuY2llcyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyLCAkKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBsaW5rRnVuY3Rpb24oc2NvcGUpIHtcblxuICAgICAgICBmdW5jdGlvbiBzY3JvbGwoKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9ICQodGhpcyk7XG4gICAgICAgICAgICBzZWxmLmNzcygnaGVpZ2h0JywgJzU1dmgnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrKCkge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSAkKHRoaXMpO1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5pbm5lckhlaWdodCAvIDMgPiBwYXJzZUludChzZWxmLmNzcygnaGVpZ2h0JykpKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jc3MoJ2hlaWdodCcsICc1NXZoJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGYuY3NzKCdoZWlnaHQnLCAnMzB2aCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRldGFpbHNQYW5lbDtcbiAgICAgICAgaWYgKHNjb3BlLm1vYmlsZSkge1xuICAgICAgICAgICAgZGV0YWlsc1BhbmVsID0gJChcIiNkZXRhaWxzLXBhbmVsXCIpO1xuICAgICAgICAgICAgZGV0YWlsc1BhbmVsLmNzcyhcImhlaWdodFwiLCBcIjMwdmhcIik7XG4gICAgICAgICAgICBkZXRhaWxzUGFuZWwuc2Nyb2xsVG9wKDApO1xuICAgICAgICAgICAgZGV0YWlsc1BhbmVsLnNjcm9sbChzY3JvbGwpO1xuICAgICAgICAgICAgZGV0YWlsc1BhbmVsLmNsaWNrKGNsaWNrKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZE1vYmlsZUV2ZW50cygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgICAgICBsaW5rOiBsaW5rRnVuY3Rpb25cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuZGlyZWN0aXZlKCdhZGRNb2JpbGVFdmVudHMnLCBbYWRkTW9iaWxlRXZlbnRzXSk7XG59KShhbmd1bGFyLCAkKTtcbiIsIihmdW5jdGlvbihhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBtb2RhbEN0cmwoJHNjb3BlLCAkbW9kYWxJbnN0YW5jZSkge1xuICAgICAgICAkc2NvcGUuY2xvc2VXaW5kb3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5jbG9zZSgpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdtb2RhbEN0cmwnLCBbJyRzY29wZScsICckbW9kYWxJbnN0YW5jZScsIG1vZGFsQ3RybF0pO1xuXG59KShhbmd1bGFyKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb25zdGFudCgnXycsIHdpbmRvdy5fKVxuICAgICAgICAuY29uZmlnKFsnJGxvY2F0aW9uUHJvdmlkZXInLCAnJGNvbXBpbGVQcm92aWRlcicsXG4gICAgICAgICAgICBmdW5jdGlvbiAoJGxvY2F0aW9uUHJvdmlkZXIsICRjb21waWxlUHJvdmlkZXIpIHtcbiAgICAgICAgICAgICAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgJGNvbXBpbGVQcm92aWRlci5kZWJ1Z0luZm9FbmFibGVkKHRydWUpO1xuICAgICAgICAgICAgfV0pXG4gICAgICAgIC5maWx0ZXIoJ3Rob3VzYW5kU3VmZml4JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChpbnB1dCwgZGVjaW1hbHMpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXhwLFxuICAgICAgICAgICAgICAgICAgICBzdWZmaXhlcyA9IFsnaycsICdNJywgJ0cnLCAnVCcsICdQJywgJ0UnXTtcblxuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuaXNOYU4oaW5wdXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChpbnB1dCA8IDEwMDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGV4cCA9IE1hdGguZmxvb3IoTWF0aC5sb2coaW5wdXQpIC8gTWF0aC5sb2coMTAwMCkpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIChpbnB1dCAvIE1hdGgucG93KDEwMDAsIGV4cCkpLnRvRml4ZWQoZGVjaW1hbHMpICsgc3VmZml4ZXNbZXhwIC0gMV07XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBob21lRGVwZW5kZW5jaWVzID0gW1xuICAgICAgICAnJHNjb3BlJyxcbiAgICAgICAgJyR0aW1lb3V0JyxcbiAgICAgICAgJ18nLFxuICAgICAgICAnZW50aXR5U2VydmljZScsXG4gICAgICAgICdjb25uZWN0aW9uU2VydmljZScsXG4gICAgICAgIGhvbWVDdHJsXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIGhvbWVDdHJsKCRzY29wZSwgJHRpbWVvdXQsIF8sIGVudGl0eVNlcnZpY2UsIGNvbm5lY3Rpb25TZXJ2aWNlKSB7XG4gICAgICAgICRzY29wZS5lbnRpdGllcyAgICAgICAgICAgICAgICAgPSBbXTtcbiAgICAgICAgJHNjb3BlLnNlYXJjaEl0ZW1zICAgICAgICAgICAgICA9IG51bGw7XG4gICAgICAgICRzY29wZS5jYXRlZ29yaWVzICAgICAgICAgICAgICAgPSBbXTtcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRMb2NhdGlvbiAgICAgICAgICA9IG51bGw7XG4gICAgICAgICRzY29wZS5jbGlja2VkTG9jYXRpb24gICAgICAgICAgPSB7fTtcbiAgICAgICAgJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiA9IG51bGw7XG4gICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5ICAgICAgICAgICAgPSB7fTtcbiAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ICAgICA9IG51bGw7XG4gICAgICAgICRzY29wZS5lZGl0aW5nICAgICAgICAgICAgICAgICAgPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLmFjdGlvbnMgICAgICAgICAgICAgICAgICA9IHsnaW50ZXJhY3RlZCc6IGZhbHNlfTtcbiAgICAgICAgJHNjb3BlLnNob3dzZWFyY2hNQiAgICAgICAgICAgICA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUuc2hvd0FuYWx5dGljcyAgICAgICAgICAgID0gZmFsc2U7XG4gICAgICAgICRzY29wZS5lbnRpdHlUeXBlcyAgICAgICAgICAgICAgPSBlbnRpdHlTZXJ2aWNlLmdldEVudGl0eVR5cGVzKCk7XG4gICAgICAgICRzY29wZS5jb25uZWN0aW9uVHlwZXMgICAgICAgICAgPSBjb25uZWN0aW9uU2VydmljZS5nZXRDb25uZWN0aW9uVHlwZXMoKTtcbiAgICAgICAgJHNjb3BlLnN0YXR1cyAgICAgICAgICAgICAgICAgICA9IHtcbiAgICAgICAgICAgIFwiaXNOZXR3b3JrU2hvd25cIjogdHJ1ZSxcbiAgICAgICAgICAgIFwibGljZW5zZVwiICAgICAgIDogdHJ1ZSxcbiAgICAgICAgICAgIFwibmV0d29ya0xvYWRpbmdcIjogdHJ1ZVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS50b2dnbGVBbmFseXRpY3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2NvcGUuc2hvd0FuYWx5dGljcyA9ICEkc2NvcGUuc2hvd0FuYWx5dGljcztcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm1pbkNvbm5lY3Rpb25zID0gJHNjb3BlLm1pbkNvbm5lY3Rpb25zID0gMjtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIC8vICRzY29wZS4kd2F0Y2goJ21pbkNvbm5lY3Rpb25zJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vICAgICAkc2NvcGUuJGJyb2FkY2FzdCgndHJpZ2dlck5ldHdvcmtEcmF3Jyk7XG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgICRzY29wZS4kd2F0Y2goJ21pbkNvbm5lY3Rpb25zJywgd2F0Y2hNaW5Db25uZWN0aW9uKTtcblxuICAgICAgICBmdW5jdGlvbiB3YXRjaE1pbkNvbm5lY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgndHJpZ2dlck5ldHdvcmtEcmF3Jyk7XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuY29ubmVjdGlvbkNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHNlbGYubWluQ29ubmVjdGlvbnMpO1xuICAgICAgICAgICAgJHNjb3BlLm1pbkNvbm5lY3Rpb25zID0gc2VsZi5taW5Db25uZWN0aW9ucztcbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCd0cmlnZ2VyTmV0d29ya0RyYXcnKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuaHlkZVBhcnRpYWxzID0gZnVuY3Rpb24gKGV4Y2VwdCkge1xuICAgICAgICAgICAgaWYgKGV4Y2VwdCA9PT0gXCJzZWFyY2hcIikge1xuICAgICAgICAgICAgICAgICRzY29wZS5lZGl0aW5nICAgICAgICAgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3NFbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV4Y2VwdCA9PT0gXCJzZXR0aW5nc1wiKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRpbmcgICAgICA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zaG93c2VhcmNoTUIgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXhjZXB0ID09PSBcImVkaXRcIikge1xuICAgICAgICAgICAgICAgICRzY29wZS5zZXR0aW5nc0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd3NlYXJjaE1CICAgID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRzY29wZS5lZGl0aW5nICAgICAgICAgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3NFbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3dzZWFyY2hNQiAgICA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNob3dTZWFyY2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2NvcGUuaHlkZVBhcnRpYWxzKFwic2VhcmNoXCIpO1xuICAgICAgICAgICAgJHNjb3BlLnNob3dzZWFyY2hNQiAgID0gISRzY29wZS5zaG93c2VhcmNoTUI7XG4gICAgICAgICAgICAvLyAkc2NvcGUuJGJyb2FkY2FzdCgnaGlkZUxpY2Vuc2UnKTtcbiAgICAgICAgICAgICRzY29wZS5zdGF0dXMubGljZW5zZSA9IGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS50b2dnbGVTZXR0aW5ncyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5oeWRlUGFydGlhbHMoXCJzZXR0aW5nc1wiKTtcbiAgICAgICAgICAgICRzY29wZS5zZXR0aW5nc0VuYWJsZWQgPSAhJHNjb3BlLnNldHRpbmdzRW5hYmxlZDtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc3RhcnRFZGl0ID0gZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRFbnRpdHkgPSBlbnRpdHk7XG4gICAgICAgICAgICBpZiAoJHNjb3BlLm1vYmlsZSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5oeWRlUGFydGlhbHMoXCJlZGl0XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHNjb3BlLmVkaXRpbmcgPSB0cnVlO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zd2l0Y2hWaWV3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gJHNjb3BlLiRicm9hZGNhc3QoJ3ZpZXdDaGFuZ2UnLCAhJHNjb3BlLnN0YXR1cy5pc05ldHdvcmtTaG93biA/ICdNYXAnIDogJ05ldHdvcmsnKTtcbiAgICAgICAgICAgIC8vICRzY29wZS5jaGFuZ2VWaWV3KCEkc2NvcGUuc3RhdHVzLmlzTmV0d29ya1Nob3duID8gJ01hcCcgOiAnTmV0d29yaycpO1xuICAgICAgICAgICAgJHNjb3BlLnN0YXR1cy5pc05ldHdvcmtTaG93biA9ICEkc2NvcGUuc3RhdHVzLmlzTmV0d29ya1Nob3duO1xuICAgICAgICAgICAgaWYgKCRzY29wZS5zdGF0dXMuaXNOZXR3b3JrU2hvd24pIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgndHJpZ2dlck5ldHdvcmtEcmF3Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgd2luZG93Lm1vYmlsZWNoZWNrICAgICA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjaGVjayAgPSBmYWxzZSxcbiAgICAgICAgICAgICAgICByZWdleCAgPSAvKGFuZHJvaWR8YmJcXGQrfG1lZWdvKS4rbW9iaWxlfGF2YW50Z298YmFkYVxcL3xibGFja2JlcnJ5fGJsYXplcnxjb21wYWx8ZWxhaW5lfGZlbm5lY3xoaXB0b3B8aWVtb2JpbGV8aXAoaG9uZXxvZCl8aXJpc3xraW5kbGV8bGdlIHxtYWVtb3xtaWRwfG1tcHxtb2JpbGUuK2ZpcmVmb3h8bmV0ZnJvbnR8b3BlcmEgbShvYnxpbilpfHBhbG0oIG9zKT98cGhvbmV8cChpeGl8cmUpXFwvfHBsdWNrZXJ8cG9ja2V0fHBzcHxzZXJpZXMoNHw2KTB8c3ltYmlhbnx0cmVvfHVwXFwuKGJyb3dzZXJ8bGluayl8dm9kYWZvbmV8d2FwfHdpbmRvd3MgY2V8eGRhfHhpaW5vL2ksXG4gICAgICAgICAgICAgICAgcmVnZXgyID0gLzEyMDd8NjMxMHw2NTkwfDNnc298NHRocHw1MFsxLTZdaXw3NzBzfDgwMnN8YSB3YXxhYmFjfGFjKGVyfG9vfHNcXC0pfGFpKGtvfHJuKXxhbChhdnxjYXxjbyl8YW1vaXxhbihleHxueXx5dyl8YXB0dXxhcihjaHxnbyl8YXModGV8dXMpfGF0dHd8YXUoZGl8XFwtbXxyIHxzICl8YXZhbnxiZShja3xsbHxucSl8YmkobGJ8cmQpfGJsKGFjfGF6KXxicihlfHYpd3xidW1ifGJ3XFwtKG58dSl8YzU1XFwvfGNhcGl8Y2N3YXxjZG1cXC18Y2VsbHxjaHRtfGNsZGN8Y21kXFwtfGNvKG1wfG5kKXxjcmF3fGRhKGl0fGxsfG5nKXxkYnRlfGRjXFwtc3xkZXZpfGRpY2F8ZG1vYnxkbyhjfHApb3xkcygxMnxcXC1kKXxlbCg0OXxhaSl8ZW0obDJ8dWwpfGVyKGljfGswKXxlc2w4fGV6KFs0LTddMHxvc3x3YXx6ZSl8ZmV0Y3xmbHkoXFwtfF8pfGcxIHV8ZzU2MHxnZW5lfGdmXFwtNXxnXFwtbW98Z28oXFwud3xvZCl8Z3IoYWR8dW4pfGhhaWV8aGNpdHxoZFxcLShtfHB8dCl8aGVpXFwtfGhpKHB0fHRhKXxocCggaXxpcCl8aHNcXC1jfGh0KGMoXFwtfCB8X3xhfGd8cHxzfHQpfHRwKXxodShhd3x0Yyl8aVxcLSgyMHxnb3xtYSl8aTIzMHxpYWMoIHxcXC18XFwvKXxpYnJvfGlkZWF8aWcwMXxpa29tfGltMWt8aW5ub3xpcGFxfGlyaXN8amEodHx2KWF8amJyb3xqZW11fGppZ3N8a2RkaXxrZWppfGtndCggfFxcLyl8a2xvbnxrcHQgfGt3Y1xcLXxreW8oY3xrKXxsZShub3x4aSl8bGcoIGd8XFwvKGt8bHx1KXw1MHw1NHxcXC1bYS13XSl8bGlid3xseW54fG0xXFwtd3xtM2dhfG01MFxcL3xtYSh0ZXx1aXx4byl8bWMoMDF8MjF8Y2EpfG1cXC1jcnxtZShyY3xyaSl8bWkobzh8b2F8dHMpfG1tZWZ8bW8oMDF8MDJ8Yml8ZGV8ZG98dChcXC18IHxvfHYpfHp6KXxtdCg1MHxwMXx2ICl8bXdicHxteXdhfG4xMFswLTJdfG4yMFsyLTNdfG4zMCgwfDIpfG41MCgwfDJ8NSl8bjcoMCgwfDEpfDEwKXxuZSgoY3xtKVxcLXxvbnx0Znx3Znx3Z3x3dCl8bm9rKDZ8aSl8bnpwaHxvMmltfG9wKHRpfHd2KXxvcmFufG93ZzF8cDgwMHxwYW4oYXxkfHQpfHBkeGd8cGcoMTN8XFwtKFsxLThdfGMpKXxwaGlsfHBpcmV8cGwoYXl8dWMpfHBuXFwtMnxwbyhja3xydHxzZSl8cHJveHxwc2lvfHB0XFwtZ3xxYVxcLWF8cWMoMDd8MTJ8MjF8MzJ8NjB8XFwtWzItN118aVxcLSl8cXRla3xyMzgwfHI2MDB8cmFrc3xyaW05fHJvKHZlfHpvKXxzNTVcXC98c2EoZ2V8bWF8bW18bXN8bnl8dmEpfHNjKDAxfGhcXC18b298cFxcLSl8c2RrXFwvfHNlKGMoXFwtfDB8MSl8NDd8bWN8bmR8cmkpfHNnaFxcLXxzaGFyfHNpZShcXC18bSl8c2tcXC0wfHNsKDQ1fGlkKXxzbShhbHxhcnxiM3xpdHx0NSl8c28oZnR8bnkpfHNwKDAxfGhcXC18dlxcLXx2ICl8c3koMDF8bWIpfHQyKDE4fDUwKXx0NigwMHwxMHwxOCl8dGEoZ3R8bGspfHRjbFxcLXx0ZGdcXC18dGVsKGl8bSl8dGltXFwtfHRcXC1tb3x0byhwbHxzaCl8dHMoNzB8bVxcLXxtM3xtNSl8dHhcXC05fHVwKFxcLmJ8ZzF8c2kpfHV0c3R8djQwMHx2NzUwfHZlcml8dmkocmd8dGUpfHZrKDQwfDVbMC0zXXxcXC12KXx2bTQwfHZvZGF8dnVsY3x2eCg1Mnw1M3w2MHw2MXw3MHw4MHw4MXw4M3w4NXw5OCl8dzNjKFxcLXwgKXx3ZWJjfHdoaXR8d2koZyB8bmN8bncpfHdtbGJ8d29udXx4NzAwfHlhc1xcLXx5b3VyfHpldG98enRlXFwtL2k7XG4gICAgICAgICAgICAoZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVnZXgudGVzdChhKSB8fCByZWdleDIudGVzdChhLnN1YnN0cigwLCA0KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKG5hdmlnYXRvci51c2VyQWdlbnQgfHwgbmF2aWdhdG9yLnZlbmRvciB8fCB3aW5kb3cub3BlcmEpO1xuICAgICAgICAgICAgcmV0dXJuIGNoZWNrO1xuICAgICAgICB9O1xuICAgICAgICAkc2NvcGUubW9iaWxlICAgICAgICAgID0gd2luZG93Lm1vYmlsZWNoZWNrKCk7XG4gICAgICAgICRzY29wZS5zZXR0aW5nc0VuYWJsZWQgPSAhJHNjb3BlLm1vYmlsZTtcblxuICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlbnRpdHlTZXJ2aWNlXG4gICAgICAgICAgICAgICAgLmdldEFsbCgpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVudGl0aWVzID0gZGF0YS5ub2RlcztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvY2F0aW9ucyAgID0gXy51bmlxKFxuICAgICAgICAgICAgICAgICAgICAgICAgXy5wbHVjayhfLmZsYXR0ZW4oXy5wbHVjaygkc2NvcGUuZW50aXRpZXMsICdsb2NhdGlvbnMnKSksICdsb2NhbGl0eScpKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgZW50aXRpZXNCeUxvY2F0aW9uID0gXy5tYXAobG9jYXRpb25zLCBmdW5jdGlvbiAobG9jKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmluZGluZ3MgPSBfLmZpbHRlcigkc2NvcGUuZW50aXRpZXMsIF8uZmxvdyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLnByb3BlcnR5KCdsb2NhdGlvbnMnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLnBhcnRpYWxSaWdodChfLmFueSwge2xvY2FsaXR5OiBsb2N9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSAgICA6IGxvYyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlICAgIDogJ2xvY2F0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRpdGllczogZmluZGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGljdCAgICA6IF8uemlwT2JqZWN0KF8ucGx1Y2soZmluZGluZ3MsICduYW1lJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8ucGx1Y2soZmluZGluZ3MsICdpbmRleCcpKVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlYXJjaEl0ZW1zID0gZW50aXRpZXNCeUxvY2F0aW9uLmNvbmNhdCgkc2NvcGUuZW50aXRpZXMpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmICgkc2NvcGUuZ2V0VVJMSUQoKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgLy8gU2V0IHRoZSBlbnRpdHkgdG8gdGhlIElEIGluIHRoZSBVUkwgaWYgaXQgZXhpc3RzLlxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgJHNjb3BlLnNldEVudGl0eUlEKCRzY29wZS5nZXRVUkxJRCgpKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3ZlcnZpZXdVcmwgPSAnanMvb3ZlcnZpZXcvb3ZlcnZpZXcuaHRtbCc7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCd0cmlnZ2VyTmV0d29ya0RyYXcnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgMTAwKTtcblxuICAgICAgICAkc2NvcGUub3ZlcnZpZXdVcmwgPSBudWxsO1xuXG4gICAgICAgICRzY29wZS5zZXRFbnRpdHkgICA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50TG9jYXRpb24gPSBudWxsO1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRFbnRpdHkgICA9IGVudGl0eTtcbiAgICAgICAgICAgIGlmICgkc2NvcGUuZWRpdGluZykge1xuICAgICAgICAgICAgICAgICRzY29wZS5zdG9wRWRpdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ2VudGl0eUNoYW5nZScpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZXRFbnRpdHlJRCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgJHNjb3BlLnNldEVudGl0eShfLmZpbmQoJHNjb3BlLmVudGl0aWVzLCB7J2lkJzogaWR9KSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNldExvY2F0aW9uID0gZnVuY3Rpb24gKGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudExvY2F0aW9uID0gbG9jYXRpb247XG4gICAgICAgICAgICBpZiAoJHNjb3BlLmVkaXRpbmcpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3RvcEVkaXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdpdGVtQ2hhbmdlJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNlbGVjdEl0ZW0gPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2xvY2F0aW9uJykge1xuICAgICAgICAgICAgICAgICRzY29wZS5zZXRMb2NhdGlvbihpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICRzY29wZVtpdGVtICUgMSA9PT0gMCA/ICdzZXRFbnRpdHlJRCcgOiAnc2V0RW50aXR5J10oaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2VsZWN0SXRlbScsIGl0ZW0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS4kb24oJ3NldEN1cnJlbnRFbnRpdHknLCBmdW5jdGlvbiAoZXZlbnQsIGFyZ3MpIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50RW50aXR5ID0gYXJncy52YWx1ZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHNjb3BlLiRvbignc2V0Q3VycmVudExvY2F0aW9uJywgZnVuY3Rpb24gKGV2ZW50LCBhcmdzKSB7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudExvY2F0aW9uID0gYXJncy52YWx1ZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHNjb3BlLnNldEVudGl0aWVzID0gZnVuY3Rpb24gKGVudGl0aWVzKSB7XG4gICAgICAgICAgICAkc2NvcGUuZW50aXRpZXMgPSBlbnRpdGllcztcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc3RvcEVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2NvcGUuZWRpdGluZyA9IGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS4kb24oXCJlZGl0RW50aXR5U3VjY2Vzc1wiLCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICRzY29wZS5zZXRFbnRpdGllcyhyZXNwb25zZS5ub2Rlcyk7XG4gICAgICAgICAgICAvLyAkc2NvcGUuc2V0RW50aXR5SUQoJHNjb3BlLmN1cnJlbnRFbnRpdHkuaWQpO1xuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3RyaWdnZXJOZXR3b3JrRHJhdycpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdob21lQ3RybCcsIGhvbWVEZXBlbmRlbmNpZXMpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNy8xNC8xNi5cbiAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBkZXBlbmRlbmNpZXMgPSBbXTtcblxuICAgIGZ1bmN0aW9uIGRpcmVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwicmVzdHJpY3RcIjogXCJFXCIsXG4gICAgICAgICAgICBcInRlbXBsYXRlVXJsXCI6IFwiL21hcC9tYXAuaHRtbFwiLFxuICAgICAgICAgICAgXCJjb250cm9sbGVyXCI6IFwibWFwQ3RybFwiXG4gICAgICAgIH07XG4gICAgfVxuICAgICAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoXCIpXG4gICAgICAgICAgICAuZGlyZWN0aXZlKFwibWFwXCIsIGRlcGVuZGVuY2llcyk7XG5cbn0pKGFuZ3VsYXIpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBDb250cm9sbGVyKCRzY29wZSwgJGZpbHRlciwgXywgY29ubmVjdGlvblNlcnZpY2UsIHV0aWxzKSB7XG4gICAgICAgIC8vIFRPRE86IE1ha2UgYSBoYXNobWFwIG9uIHRoZSBiYWNrZW5kIG9mIGlkIC0+IHBvc2l0aW9uLCB0aGVuIHVzZSBzb3VyY2U6XG4gICAgICAgIC8vIGVudGl0aWVzW21hcFtzb3VyY2VpZF1dIHRvIGdldCBub2Rlcy4gU2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xLzE2ODI0MzA4XG4gICAgICAgICRzY29wZS5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICAkc2NvcGUuY29ubmVjdGlvbnMgPSB7fTtcbiAgICAgICAgc3RhcnRMb2FkKCk7XG5cbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vY29kZXJ3YWxsLmNvbS9wL25naXNtYS9zYWZlLWFwcGx5LWluLWFuZ3VsYXItanNcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgdmFyIHBoYXNlID0gdGhpcy4kcm9vdC4kJHBoYXNlO1xuICAgICAgICAgICAgaWYgKHBoYXNlID09PSAnJGFwcGx5JyB8fCBwaGFzZSA9PT0gJyRkaWdlc3QnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZuICYmICh0eXBlb2YoZm4pID09PSAnZnVuY3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICBmbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kYXBwbHkoZm4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS4kb24oJ3RyaWdnZXJOZXR3b3JrRHJhdycsIHN0YXJ0TG9hZCk7XG5cbiAgICAgICAgJHNjb3BlLiRvbigndmlld0NoYW5nZScsIGZ1bmN0aW9uICh2aWV3T2JqKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh2aWV3T2JqKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGRyYXdOZXR3b3JrID0gZnVuY3Rpb24gKGVudGl0eUFycmF5LCBjb25uZWN0aW9uQXJyYXkpIHtcbiAgICAgICAgICAgICRzY29wZS5pc0xvYWRpbmcgPSBmYWxzZTtcblxuICAgICAgICAgICAgdmFyIHN2ZyA9IGQzLnNlbGVjdCgnI25ldHdvcmsnKTtcbiAgICAgIC8vICAgICAgIC5jbGFzc2VkKFwibmV0d29yay1jb250YWluZXJcIiwgdHJ1ZSlcbiAgICAgIC8vICAgICAgIC5hdHRyKFwicHJlc2VydmVBc3BlY3RSYXRpb1wiLCBcInhNaW5ZTWluIG1lZXRcIilcbiAgICAgIC8vIC5hdHRyKFwidmlld0JveFwiLCBcIjAgMCA2MDAgNDAwXCIgKTtcbiAgIC8vY2xhc3MgdG8gbWFrZSBpdCByZXNwb25zaXZlXG4gICAvLyAuY2xhc3NlZChcInN2Zy1jb250ZW50LXJlc3BvbnNpdmVcIiwgdHJ1ZSk7IFxuICAgICAgICAgICAgc3ZnLnNlbGVjdEFsbChcIipcIikucmVtb3ZlKCk7XG4gICAgICAgICAgICB2YXIgYm91bmRzID0gc3ZnLm5vZGUoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSBib3VuZHMuaGVpZ2h0O1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gYm91bmRzLndpZHRoO1xuICAgICAgICAgICAgdmFyIG9mZnNldFNjYWxlID0gNjtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0Tm9kZVNpemUgPSA3O1xuICAgICAgICAgICAgdmFyIG9mZnNldHMgPSB7XG4gICAgICAgICAgICAgICAgJ0luZGl2aWR1YWwnOiB7ICd4JzogMSwgJ3knOiAxIH0sXG4gICAgICAgICAgICAgICAgJ0Zvci1Qcm9maXQnOiB7ICd4JzogMSwgJ3knOiAtMSB9LFxuICAgICAgICAgICAgICAgICdOb24tUHJvZml0JzogeyAneCc6IC0xLCAneSc6IDEgfSxcbiAgICAgICAgICAgICAgICAnR292ZXJubWVudCc6IHsgJ3gnOiAtMSwgJ3knOiAtMSB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGxvd2VyQm91bmRSYWRpdXMgPSAxMDtcbiAgICAgICAgICAgIHZhciB1cHBlckJvdW5kUmFkaXVzID0gNTA7XG4gICAgICAgICAgICB2YXIgbWF4RW1wbG95ZWVzID0gZDMubWF4KGVudGl0eUFycmF5LCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoZWwuZW1wbG95ZWVzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIG1heEZvbGxvd2VycyA9IGQzLm1heChlbnRpdHlBcnJheSwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KGVsLmZvbGxvd2Vycyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBzY2FsZSA9IHtcbiAgICAgICAgICAgICAgICAnZW1wbG95ZWVzJzogZDMuc2NhbGUuc3FydCgpLmRvbWFpbihbMTAsIG1heEVtcGxveWVlc10pXG4gICAgICAgICAgICAgICAgICAgIC5yYW5nZShbbG93ZXJCb3VuZFJhZGl1cywgdXBwZXJCb3VuZFJhZGl1c10pLFxuICAgICAgICAgICAgICAgICdmb2xsb3dlcnMnOiBkMy5zY2FsZS5zcXJ0KCkuZG9tYWluKFsxMCwgbWF4Rm9sbG93ZXJzXSlcbiAgICAgICAgICAgICAgICAgICAgLnJhbmdlKFtsb3dlckJvdW5kUmFkaXVzLCB1cHBlckJvdW5kUmFkaXVzXSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgbGlua3MgPSB7fTtcbiAgICAgICAgICAgIHZhciBmb3JjZSA9IGQzLmxheW91dC5mb3JjZSgpXG4gICAgICAgICAgICAgICAgLnNpemUoW3dpZHRoLCBoZWlnaHRdKVxuICAgICAgICAgICAgICAgIC5ub2RlcyhlbnRpdHlBcnJheSlcbiAgICAgICAgICAgICAgICAubGlua3MoXy5mbGF0dGVuKF8udmFsdWVzKGNvbm5lY3Rpb25BcnJheSkpKVxuICAgICAgICAgICAgICAgIC5jaGFyZ2UoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuZW1wbG95ZWVzID8gLTIgKiBzY2FsZS5lbXBsb3llZXMoZC5lbXBsb3llZXMpIDogLTIwO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmxpbmtTdHJlbmd0aCgwKVxuICAgICAgICAgICAgICAgIC5saW5rRGlzdGFuY2UoNTApO1xuXG4gICAgICAgICAgICBfLmZvckVhY2goY29ubmVjdGlvbkFycmF5LCBmdW5jdGlvbiAoY29ubmVjdGlvbnMsIHR5cGUpIHtcbiAgICAgICAgICAgICAgICBsaW5rc1t0eXBlXSA9IHN2Zy5zZWxlY3RBbGwoJy5saW5rIC4nICsgdHlwZSArICctbGluaycpXG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKGNvbm5lY3Rpb25zKVxuICAgICAgICAgICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ2xpbmUnKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF1dGlscy5pc0RlZmluZWQoZC5zb3VyY2UpIHx8ICF1dGlscy5pc0RlZmluZWQoZC50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkLnR5cGUgPSB0eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdsaW5rICcgKyB0eXBlICsgJy1saW5rICcgKyBkLnNvdXJjZS50eXBlICsgJy1saW5rICcgKyBkLnRhcmdldC50eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAnLWxpbmsnO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgbm9kZSA9IHN2Zy5zZWxlY3RBbGwoJy5ub2RlJylcbiAgICAgICAgICAgICAgICAuZGF0YShlbnRpdHlBcnJheSlcbiAgICAgICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnbm9kZSAnICsgZC50eXBlICsgJy1ub2RlJztcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYWxsKGZvcmNlLmRyYWcpO1xuXG4gICAgICAgICAgICBub2RlLmFwcGVuZCgnY2lyY2xlJylcbiAgICAgICAgICAgICAgICAuYXR0cigncicsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmVtcGxveWVlcyA/IHNjYWxlWydlbXBsb3llZXMnXShkLmVtcGxveWVlcykgOiBkZWZhdWx0Tm9kZVNpemU7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG5vZGUuYXBwZW5kKCd0ZXh0JylcbiAgICAgICAgICAgICAgICAudGV4dChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5uaWNrbmFtZSA/IGQubmlja25hbWUgOiBkLm5hbWU7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYXR0cignZHgnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoLTAuMDY1ICogdGhpcy5nZXRDb21wdXRlZFRleHRMZW5ndGgoKSAvIDIpICsgJ2VtJztcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5hdHRyKCdkeScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgwLjA4ICogdGhpcy5wYXJlbnROb2RlLmdldEJCb3goKS5oZWlnaHQgLyAyICsgMC41KSArICdlbSc7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZvcmNlLm9uKCd0aWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBDbHVzdGVyIGluIGZvdXIgY29ybmVycyBiYXNlZCBvbiBvZmZzZXQuXG4gICAgICAgICAgICAgICAgdmFyIGsgPSBvZmZzZXRTY2FsZSAqIGUuYWxwaGE7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZS5hbHBoYSlcbiAgICAgICAgICAgICAgICBfLmZvckVhY2goZW50aXR5QXJyYXksIGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVudGl0eS54ICYmIG9mZnNldHNbZW50aXR5LnR5cGVdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHkueCArPSBvZmZzZXRzW2VudGl0eS50eXBlXS54ICogaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eS55ICs9IG9mZnNldHNbZW50aXR5LnR5cGVdLnkgKiBrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5LnggPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KHVwcGVyQm91bmRSYWRpdXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKHdpZHRoIC0gdXBwZXJCb3VuZFJhZGl1cywgZW50aXR5LngpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eS55ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heCh1cHBlckJvdW5kUmFkaXVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1pbihoZWlnaHQgLSB1cHBlckJvdW5kUmFkaXVzLCBlbnRpdHkueSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBfLmZvckVhY2gobGlua3MsIGZ1bmN0aW9uIChsaW5rKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MScsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuc291cmNlLng7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kxJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5zb3VyY2UueTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDInLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnRhcmdldC54O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5MicsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQudGFyZ2V0Lnk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBub2RlLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBkLnggKyAnLCcgKyBkLnkgKyAnKSc7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBzcGVlZEFuaW1hdGUgPSBmdW5jdGlvbiAodGlja3MpIHtcbiAgICAgICAgICAgICAgICAvLyBTcGVlZCB1cCB0aGUgaW5pdGlhbCBhbmltYXRpb24uXG4gICAgICAgICAgICAgICAgLy8gU2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2MTg5MTEwXG4gICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aWNrczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JjZS50aWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvcmNlLmFscGhhKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVuZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIGlmICghJHNjb3BlLm1vYmlsZSkge1xuICAgICAgICAgICAgLy8gICAgIHNwZWVkQW5pbWF0ZSg3KTtcbiAgICAgICAgICAgIC8vIH1cblxuICAgICAgICAgICAgLy8gc3BlZWQgdXAgYW5pbWF0aW9uIGZvciBtb2JpbGUgYW5kIGRlc2t0b3AgbmV0d29yayBncmFwaCByZW5kZXJpbmdcbiAgICAgICAgICAgIHNwZWVkQW5pbWF0ZSg3KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yY2Uuc3RhcnQoKTtcblxuICAgICAgICAgICAgLy8gSGFzaCBsaW5rZWQgbmVpZ2hib3JzIGZvciBlYXN5IGhvdmVyaW5nIGVmZmVjdHMuXG4gICAgICAgICAgICAvLyBTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvODc4MDI3N1xuICAgICAgICAgICAgdmFyIGxpbmtlZEJ5SW5kZXggPSB7fTtcbiAgICAgICAgICAgIF8uZm9yRWFjaChsaW5rcywgZnVuY3Rpb24gKGwpIHtcbiAgICAgICAgICAgICAgICBfLmZvckVhY2gobFswXSwgZnVuY3Rpb24gKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGNvbm5lY3Rpb24uX19kYXRhX18uc291cmNlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gY29ubmVjdGlvbi5fX2RhdGFfXy50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtlZEJ5SW5kZXhbc291cmNlLmluZGV4ICsgJywnICsgdGFyZ2V0LmluZGV4XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtlZEJ5SW5kZXhbdGFyZ2V0LmluZGV4ICsgJywnICsgc291cmNlLmluZGV4XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIG5laWdoYm9yaW5nID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGlua2VkQnlJbmRleFthLmluZGV4ICsgJywnICsgYi5pbmRleF0gfHwgYS5pbmRleCA9PT0gYi5pbmRleDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBmb2N1c25laWdoYm9ycyA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAvLyBBcHBseSAndW5mb2N1c2VkJyBjbGFzcyB0byBhbGwgbm9uLW5laWdoYm9ycy5cbiAgICAgICAgICAgICAgICAvLyBBcHBseSAnZm9jdXNlZCcgY2xhc3MgdG8gYWxsIG5laWdoYm9ycy5cbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBTZWUgaWYgaXQgY2FuIGJlIGRvbmUgd2l0aCBqdXN0IG9uZSBjbGFzcyBhbmQgOm5vdCguZm9jdXNlZCkgQ1NTIHNlbGVjdG9ycy5cbiAgICAgICAgICAgICAgICBub2RlXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZWlnaGJvcmluZyhlbnRpdHksIG4pO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhbmVpZ2hib3JpbmcoZW50aXR5LCBuKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBfLmZvckVhY2gobGlua3MsIGZ1bmN0aW9uIChsaW5rKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW50aXR5LmluZGV4ID09PSBvLnNvdXJjZS5pbmRleCB8fCBlbnRpdHkuaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPT09IG8udGFyZ2V0LmluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmdW5jdGlvbiAobykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhKGVudGl0eS5pbmRleCA9PT0gby5zb3VyY2UuaW5kZXggfHwgZW50aXR5LmluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPT09IG8udGFyZ2V0LmluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGZvY3VzID0gZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY3VycmVudEVudGl0eSAhPT0gZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zZXRFbnRpdHkoZW50aXR5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgICAgIGZvY3VzbmVpZ2hib3JzKGVudGl0eSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgdW5mb2N1cyA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAvL3ZhciB0cmFuc2l0aW9uZGVsYXkgPSA3NTtcbiAgICAgICAgICAgICAgICBub2RlXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGxpbmtzLCBmdW5jdGlvbiAobGluaykge1xuICAgICAgICAgICAgICAgICAgICBsaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBlbnRpdHkuZml4ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAvLyBSZXN0YXJ0IGQzIGFuaW1hdGlvbnMuXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICBmb3JjZS5yZXN1bWUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9UT0RPOiBTaG93IGdlbmVyaWMgZGV0YWlscyBhbmQgbm90IGluZGl2aWR1YWwgZW50aXR5IGRldGFpbHM/XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGhvdmVyVGltZXI7XG4gICAgICAgICAgICB2YXIgaG92ZXIgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgJiYgISRzY29wZS5lZGl0aW5nICYmICEkc2NvcGUuY3VycmVudExvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvdmVyVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgdW5ob3ZlciA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSAmJiAhJHNjb3BlLmN1cnJlbnRMb2NhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB1bmZvY3VzKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChob3ZlclRpbWVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBmb2N1c0xvY2F0aW9uID0gZnVuY3Rpb24gKGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgLy8gIElmIHRoZSBjdXJyZW50IGVudGl0eSBpcyBzaG93biBhbmQgaXQgZG9lc24ndCBtYXRjaCB0aGUgY2xpY2tlZCBub2RlLCB0aGVuIHNldFxuICAgICAgICAgICAgICAgIC8vIHRoZSBuZXcgbm9kZSB0byBjbGlja2VkLlxuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcblxuICAgICAgICAgICAgICAgIG5vZGUuY2xhc3NlZCgnZm9jdXNlZCcsIGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuLm5hbWUgaW4gbG9jYXRpb24uZGljdDtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhKG4ubmFtZSBpbiBsb2NhdGlvbi5kaWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBfLmZvckVhY2gobGlua3MsIGZ1bmN0aW9uIChsaW5rKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG8uc291cmNlLm5hbWUgaW4gbG9jYXRpb24uZGljdCAmJiBvLnRhcmdldC5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gbG9jYXRpb24uZGljdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEoby5zb3VyY2UubmFtZSBpbiBsb2NhdGlvbi5kaWN0KSB8fCAhKG8udGFyZ2V0Lm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gbG9jYXRpb24uZGljdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciB1bmZvY3VzTG9jYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgbm9kZVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChsaW5rcywgZnVuY3Rpb24gKGxpbmspIHtcbiAgICAgICAgICAgICAgICAgICAgbGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBmb3JjZS5yZXN1bWUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgaGlnaGxpZ2h0TG9jYXRpb24gPSBmdW5jdGlvbiAobG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd0xpY2Vuc2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgIHVuZm9jdXMoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24gIT09IGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHVuZm9jdXNMb2NhdGlvbigkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiA9IGxvY2F0aW9uO1xuICAgICAgICAgICAgICAgICAgICBmb2N1c0xvY2F0aW9uKGxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gRklYIEZPUiBMT0NBVElPTiBOT1QgSElHSExJR0hUSU5HIG9uIHNlYXJjaCBlbnRlcjpcbiAgICAgICAgICAgICAgICBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiA9PT0gbG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24gPSBsb2NhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzTG9jYXRpb24obG9jYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGQzLmV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbnRlcmFjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGNsaWNrID0gZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5zaG93TGljZW5zZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgaWYgKHV0aWxzLmlzRGVmaW5lZCgkc2NvcGUuY2xpY2tlZExvY2F0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodXRpbHMuaXNEZWZpbmVkKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bmZvY3VzTG9jYXRpb24oJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5lbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gIElmIHRoZSBwcmV2aW91cyBub2RlIGlzIGVxdWFsIHRvIHRoZSBuZXcgbm9kZSwgZG8gbm90aGluZy5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9PT0gZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRklYIEZPUiBTRUFSQ0ggTk9UIFdPUktJTkc6IGVudGl0eSB3YXMgbm90IGZvY3VzZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFmdGVyIHN3aXRjaGluZyB0byBzdGFydGxvYWQgZnVuY3Rpb24gZm9yIG5ldHdvcmsgZ3JhcGhcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgVW5mb2N1cyBvbiBwcmV2aW91cyBub2RlIGFuZCBmb2N1cyBvbiBuZXcgbm9kZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmZvY3VzKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSBlbnRpdHk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb2N1cyhlbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gU3RvcCBldmVudCBzbyB3ZSBkb24ndCBkZXRlY3QgYSBjbGljayBvbiB0aGUgYmFja2dyb3VuZC5cbiAgICAgICAgICAgICAgICAvLyBTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3EvMjI5NDE3OTZcbiAgICAgICAgICAgICAgICBpZiAoZDMuZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZDMuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBiYWNrZ3JvdW5kY2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHV0aWxzLmlzRGVmaW5lZCgkc2NvcGUuY2xpY2tlZExvY2F0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodXRpbHMuaXNEZWZpbmVkKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bmZvY3VzKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHV0aWxzLmlzRGVmaW5lZCgkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bmZvY3VzKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgICAgICAvL1RPRE86IFNob3cgZ2VuZXJpYyBkZXRhaWxzIGFuZCBub3QgaW5kaXZpZHVhbCBlbnRpdHkgZGV0YWlscy5cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgZGJsY2xpY2sgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlbnRpdHkuZml4ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LnggPSB3aWR0aCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS55ID0gaGVpZ2h0IC8gMjtcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LnB4ID0gd2lkdGggLyAyO1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHkucHkgPSBoZWlnaHQgLyAyO1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHkuZml4ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSBlbnRpdHk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdW5mb2N1cyhlbnRpdHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbnRlcmFjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBub2RlLm9uKCdtb3VzZW92ZXInLCBob3Zlcik7XG4gICAgICAgICAgICBub2RlLm9uKCdtb3VzZW91dCcsIHVuaG92ZXIpO1xuICAgICAgICAgICAgbm9kZS5vbignY2xpY2snLCBjbGljayk7XG4gICAgICAgICAgICBub2RlLm9uKCdkYmxjbGljaycsIGRibGNsaWNrKTtcbiAgICAgICAgICAgIHN2Zy5vbignY2xpY2snLCBiYWNrZ3JvdW5kY2xpY2spO1xuXG4gICAgICAgICAgICBub2RlXG4gICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3dlbGxjb25uZWN0ZWQnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5oYXNPd25Qcm9wZXJ0eSgnd2VsbGNvbm5lY3RlZCcpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkc2NvcGUuJG9uKCdjaGFuZ2VTaXplQnknLCBmdW5jdGlvbiAoZXZlbnQsIHNpemVCeSkge1xuICAgICAgICAgICAgICAgIHN2Zy5zZWxlY3RBbGwoJ2NpcmNsZScpXG4gICAgICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKDI1MClcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3InLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRbc2l6ZUJ5XSA/IHNjYWxlW3NpemVCeV0oZFtzaXplQnldKSA6IGRlZmF1bHROb2RlU2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICRzY29wZS4kb24oJ3RvZ2dsZUxpbmsnLCBmdW5jdGlvbiAoZXZlbnQsIGxpbmspIHtcbiAgICAgICAgICAgICAgICAvLyBsaW5rc1tsaW5rLm5hbWVdXG4gICAgICAgICAgICAgICAgLy8gLmNsYXNzZWQoeyd2aXNpYmxlJzogbGluay5lbmFibGVkLCAnaGlkZGVuJzogIWxpbmsuZW5hYmxlZH0pO1xuICAgICAgICAgICAgICAgIF8ubWFwKCRzY29wZS5lbnRpdHlUeXBlcywgZnVuY3Rpb24gKHZhbCwga2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHN2Z1xuICAgICAgICAgICAgICAgICAgICAgICAgLnNlbGVjdEFsbCgnLicgKyBrZXkgKyAnLWxpbmsnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd2aXNpYmxlJzogZnVuY3Rpb24gKGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ubmVjdGlvblR5cGUgZW5hYmxlZCwgY29ubmVjdGlvbiBzb3VyY2UgZW50aXR5IHR5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXMgZW5hYmxlZCwgY29ubmVjdGlvbiB0YXJnZXQgZW50aXR5IHR5cGUgaXMgZW5hYmxlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEkc2NvcGUuY29ubmVjdGlvblR5cGVzW2wudHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8ICgkc2NvcGUuZW50aXR5VHlwZXNbbC5zb3VyY2UudHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmICRzY29wZS5lbnRpdHlUeXBlc1tsLnRhcmdldC50eXBlXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaGlkZGVuJzogZnVuY3Rpb24gKGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgYW55IG9mIENvbm5lY3Rpb25UeXBlLCBzb3VyY2UgZW50aXR5IHR5cGUsIG9yIHRhcmdldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbnRpdHkgdHlwZSBhcmUgZGlzYWJsZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhJHNjb3BlLmNvbm5lY3Rpb25UeXBlc1tsLnR5cGVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCAoISRzY29wZS5lbnRpdHlUeXBlc1tsLnNvdXJjZS50eXBlXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgISRzY29wZS5lbnRpdHlUeXBlc1tsLnRhcmdldC50eXBlXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJHNjb3BlLiRvbigndG9nZ2xlTm9kZScsIGZ1bmN0aW9uIChldmVudCwgdHlwZSkge1xuICAgICAgICAgICAgICAgIHN2Z1xuICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCcuJyArIHR5cGUubmFtZSArICctbm9kZScpXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKHsgJ3Zpc2libGUnOiB0eXBlLmVuYWJsZWQsICdoaWRkZW4nOiAhdHlwZS5lbmFibGVkIH0pO1xuXG4gICAgICAgICAgICAgICAgc3ZnXG4gICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJy4nICsgdHlwZS5uYW1lICsgJy1saW5rJylcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3Zpc2libGUnOiBmdW5jdGlvbiAobCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbm5lY3Rpb25UeXBlIGVuYWJsZWQsIGNvbm5lY3Rpb24gc291cmNlIGVudGl0eSB0eXBlIGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW5hYmxlZCwgY29ubmVjdGlvbiB0YXJnZXQgZW50aXR5IHR5cGUgaXMgZW5hYmxlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmNvbm5lY3Rpb25UeXBlc1tsLnR5cGVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmICgkc2NvcGUuZW50aXR5VHlwZXNbbC5zb3VyY2UudHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgJHNjb3BlLmVudGl0eVR5cGVzW2wudGFyZ2V0LnR5cGVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAnaGlkZGVuJzogZnVuY3Rpb24gKGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBhbnkgb2YgQ29ubmVjdGlvblR5cGUsIHNvdXJjZSBlbnRpdHkgdHlwZSwgb3IgdGFyZ2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW50aXR5IHR5cGUgYXJlIGRpc2FibGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhJHNjb3BlLmNvbm5lY3Rpb25UeXBlc1tsLnR5cGVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8ICghJHNjb3BlLmVudGl0eVR5cGVzW2wuc291cmNlLnR5cGVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8ICEkc2NvcGUuZW50aXR5VHlwZXNbbC50YXJnZXQudHlwZV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICRzY29wZS4kb24oJ3NlbGVjdEl0ZW0nLCBmdW5jdGlvbiAoZXZlbnQsIGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnbG9jYXRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodExvY2F0aW9uKCRzY29wZS5jdXJyZW50TG9jYXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2soJHNjb3BlLmN1cnJlbnRFbnRpdHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIHN0YXJ0TG9hZCgpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkge1xuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJlZEVudGl0aWVzID0gJGZpbHRlcignZmlsdGVyJykoJHNjb3BlLmVudGl0aWVzLFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW50aXR5LmNvbGxhYm9yYXRpb25zLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID49ICRzY29wZS5taW5Db25uZWN0aW9ucztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkQ29ubmVjdGlvbnMgPSB7fTtcbiAgICAgICAgICAgICAgICBfLmZvckVhY2goXy5rZXlzKGRhdGEuY29ubmVjdGlvbnMpLCBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyAkc2NvcGUuY29ubmVjdGlvbnNbdHlwZV0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWRDb25uZWN0aW9uc1t0eXBlXSA9IFtdO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChkYXRhLmNvbm5lY3Rpb25zLCBmdW5jdGlvbiAoY29ubmVjdGlvbnMsIHR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgXy5mb3JFYWNoKGNvbm5lY3Rpb25zLCBmdW5jdGlvbiAoY29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZU5vZGUgPSBfLmZpbmQoZmlsdGVyZWRFbnRpdGllcywgeyAnaWQnOiBjb25uZWN0aW9uLnNvdXJjZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXROb2RlID0gXy5maW5kKGZpbHRlcmVkRW50aXRpZXMsIHsgJ2lkJzogY29ubmVjdGlvbi50YXJnZXQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISggdXRpbHMuaXNEZWZpbmVkKHNvdXJjZU5vZGUpICYmIHV0aWxzLmlzRGVmaW5lZCh0YXJnZXROb2RlKSApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZENvbm5lY3Rpb25zW3R5cGVdLnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyAnc291cmNlJzogc291cmNlTm9kZSwgJ3RhcmdldCc6IHRhcmdldE5vZGUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAkc2NvcGUuY29ubmVjdGlvbnNbdHlwZV0ucHVzaCh7J3NvdXJjZSc6IHNvdXJjZU5vZGUsICd0YXJnZXQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGFyZ2V0Tm9kZX0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBPbmx5IHNob3cgbGFiZWxzIG9uIHRvcCA1IG1vc3QgY29ubmVjdGVkIGVudGl0aWVzIGluaXRpYWxseS5cbiAgICAgICAgICAgICAgICBfLmZvckVhY2goXy5rZXlzKCRzY29wZS5lbnRpdHlUeXBlcyksIGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZpbmQgdGhlIHRvcCA1IG1vc3QtY29ubmVjdGVkIGVudGl0aWVzLlxuICAgICAgICAgICAgICAgICAgICB2YXIgdG9wNSA9IF8udGFrZVJpZ2h0KF8uc29ydEJ5KF8uZmlsdGVyKCRzY29wZS5lbnRpdGllcywgeyAndHlwZSc6IHR5cGUgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAnY29sbGFib3JhdGlvbnMubGVuZ3RoJyksIDUpO1xuICAgICAgICAgICAgICAgICAgICBfLmZvckVhY2godG9wNSwgZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5LndlbGxjb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGZpbHRlcmVkRW50aXRpZXMgPSBfLnNvcnRCeShmaWx0ZXJlZEVudGl0aWVzLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGUud2VsbGNvbm5lY3RlZCkgPyAxIDogMDtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGRyYXdOZXR3b3JrKGZpbHRlcmVkRW50aXRpZXMsIGZpbHRlcmVkQ29ubmVjdGlvbnMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25uZWN0aW9uU2VydmljZVxuICAgICAgICAgICAgICAgIC5nZXRBbGwoKVxuICAgICAgICAgICAgICAgIC50aGVuKHN1Y2Nlc3MpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHNjb3BlXCIsIFwiJGZpbHRlclwiLCBcIl9cIiwgXCJjb25uZWN0aW9uU2VydmljZVwiLCBcImNnVXRpbFNlcnZpY2VcIl07XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29udHJvbGxlcignbmV0d29ya0N0cmwnLCBDb250cm9sbGVyKTtcblxufSkoYW5ndWxhciwgUlRQKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNy8xMS8xNi5cbiAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBkZXBlbmRlbmNpZXMgPSBbXG4gICAgICAgIGRpcmVjdGl2ZVxuICAgIF07XG5cbiAgICBmdW5jdGlvbiBkaXJlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcInJlc3RyaWN0XCI6IFwiRVwiLFxuICAgICAgICAgICAgXCJ0ZW1wbGF0ZVVybFwiOiBcImpzL25ldHdvcmsvbmV0d29yay5odG1sXCIsXG4gICAgICAgICAgICBcImNvbnRyb2xsZXJcIjogXCJuZXR3b3JrQ3RybFwiXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJjaXZpYy1ncmFwaFwiKVxuICAgICAgICAuZGlyZWN0aXZlKFwibmV0d29ya1wiLCBkZXBlbmRlbmNpZXMpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNi8xNi5cbiAqL1xuKGZ1bmN0aW9uKGFuZ3VsYXIpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuZGlyZWN0aXZlKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RpY3Q6ICdFJyxcbiAgICAgICAgICAgIHJlcXVpcmU6ICc/bmdNb2RlbCcsXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIG5nTW9kZWwpIHtcbiAgICAgICAgICAgICAgICBpZiAoICd0eXBlJyBpbiBhdHRycyAmJiBhdHRycy50eXBlLnRvTG93ZXJDYXNlKCkgPT09ICdyYW5nZScgKSB7XG4gICAgICAgICAgICAgICAgICAgIG5nTW9kZWwuJHBhcnNlcnMucHVzaChwYXJzZUZsb2F0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7XG59KShhbmd1bGFyKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMTAvMTYuXG4gKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgY29udHJvbERlcGVuZGVuY2llcyA9IFtjb250cm9sRGlyZWN0aXZlXTtcblxuICAgIGZ1bmN0aW9uIGNvbnRyb2xEaXJlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2pzL2NvbnRyb2wvY29udHJvbHMuaHRtbCcsXG4gICAgICAgICAgICByZXN0cmljdCAgIDogJ0UnLFxuICAgICAgICAgICAgc2NvcGUgICAgICA6IHtcbiAgICAgICAgICAgICAgICB0b2dnbGVOZXR3b3JrIDogJz0nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgICA6ICdjb250cm9sQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXMgOiAnY29udHJvbCcsXG4gICAgICAgICAgICBiaW5kVG9Db250cm9sbGVyIDoge1xuICAgICAgICAgICAgICAgIG1pbkNvbm5lY3Rpb25zIDogXCI9XCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuZGlyZWN0aXZlKCdjb250cm9sJywgY29udHJvbERlcGVuZGVuY2llcyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBvdmVydmlld0N0cmwoJHNjb3BlLCBfKSB7XG4gICAgICAgICRzY29wZS5jYXRlZ29yaXplZEVudGl0aWVzID0ge307XG4gICAgICAgIF8uZm9yRWFjaChfLmtleXMoJHNjb3BlLmVudGl0eVR5cGVzKSwgZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICRzY29wZS5jYXRlZ29yaXplZEVudGl0aWVzW3R5cGVdID0gXy5maWx0ZXIoJHNjb3BlLmVudGl0aWVzLCB7J3R5cGUnOiB0eXBlfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdvdmVydmlld0N0cmwnLCBbJyRzY29wZScsICdfJywgb3ZlcnZpZXdDdHJsXSk7XG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBpc0RlZmluZWQobykge1xuICAgICAgICByZXR1cm4gISh0eXBlb2YgbyA9PT0gXCJ1bmRlZmluZWRcIiB8fCBvID09PSBudWxsKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc09iamVjdChvKSB7XG4gICAgICAgIHJldHVybiBpc0RlZmluZWQobykgJiYgIUFycmF5LmlzQXJyYXkobykgJiYgKHR5cGVvZiBvID09PSBcIm9iamVjdFwiKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRQcm9wZXJ0eUZyb21PYmoob2JqKSB7XG4gICAgICAgIHZhciBkZWZPYmogPSBpc0RlZmluZWQob2JqKSA/IG9iaiA6IHt9O1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAocHJvcGVydHksIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gaXNEZWZpbmVkKGRlZmF1bHRWYWx1ZSkgPyBkZWZhdWx0VmFsdWUgOiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIGlzRGVmaW5lZChkZWZPYmpbcHJvcGVydHldKVxuICAgICAgICAgICAgICAgID8gZGVmT2JqW3Byb3BlcnR5XVxuICAgICAgICAgICAgICAgIDogdmFsdWU7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9vcEFuZEluaXQobW9kZWxBcnJheSwgaW5pdE1vZGVsRnVuY3Rpb24pIHtcbiAgICAgICAgdmFyIG5ld0FycmF5ID0gQXJyYXkuaXNBcnJheShtb2RlbEFycmF5KVxuICAgICAgICAgICAgPyBtb2RlbEFycmF5LmZpbHRlcihpc09iamVjdCkubWFwKGluaXRNb2RlbEZ1bmN0aW9uKVxuICAgICAgICAgICAgOiBbXTtcblxuICAgICAgICByZXR1cm4gbmV3QXJyYXkuY29uY2F0KFtpbml0TW9kZWxGdW5jdGlvbigpXSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gU2VydmljZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiaXNEZWZpbmVkXCI6IGlzRGVmaW5lZCxcbiAgICAgICAgICAgIFwiaXNPYmplY3RcIjogaXNPYmplY3QsXG5cbiAgICAgICAgICAgIFwiZ2V0UHJvcGVydHlGcm9tT2JqXCI6IGdldFByb3BlcnR5RnJvbU9iaixcbiAgICAgICAgICAgIFwibG9vcEFuZEluaXRcIjogbG9vcEFuZEluaXRcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaC51dGlsXCIpXG4gICAgICAgIC5mYWN0b3J5KFwiY2dVdGlsU2VydmljZVwiLCBTZXJ2aWNlKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMS8xNi5cbiAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIGFuYWx5dGljc0N0cmwoJHNjb3BlKSB7XG5cbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29udHJvbGxlcignYW5hbHl0aWNzQ3RybCcsIFsnJHNjb3BlJywgYW5hbHl0aWNzQ3RybF0pO1xufSkoYW5ndWxhcik7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIENvbmZpZygkaHR0cFByb3ZpZGVyKSB7XG4gICAgICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bXCJYLVJlcXVlc3RlZC1XaXRoXCJdID0gXCJYTUxIdHRwUmVxdWVzdFwiO1xuICAgIH1cblxuICAgIENvbmZpZy4kaW5qZWN0ID0gW1wiJGh0dHBQcm92aWRlclwiXTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiY2l2aWMtZ3JhcGguYXBpXCIpLmNvbmZpZyhDb25maWcpO1xuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgYXBpVXJsID0gXCJodHRwczovL2FwaS5jaXZpY2dyYXBoLmlvL2FwaVwiO1xuICAgIC8vdmFyIGFwaVVybCA9IFwiL2FwaVwiO1xuXG4gICAgdmFyIGRlZmF1bHRIZWFkZXIgPSB7XG4gICAgICAgIC8vIFwiRXZlbnQtTmFtZVwiOiBcIlRlc3QtRXZlbnRcIlxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBTZXJ2aWNlKCRodHRwLCAkcSkge1xuICAgICAgICBmdW5jdGlvbiBsb2dBcGlFcnJvcihlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJSZWNpZXZlZCBhbiBlcnJvciBmcm9tIEFQSSB3aXRoIHRoaXMgbWVzc2FnZTogJU9cIiwgZXJyLmRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChlcnIpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdW53cmFwQW5ndWxhckh0dHAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0KHVybCwgcGFyYW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHBcbiAgICAgICAgICAgICAgICAuZ2V0KGFwaVVybCArIHVybCwgeyBcInBhcmFtc1wiOiBwYXJhbXMsIFwiaGVhZGVyc1wiOiBkZWZhdWx0SGVhZGVyIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4odW53cmFwQW5ndWxhckh0dHAsIGxvZ0FwaUVycm9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHBvc3QodXJsLCBkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHBcbiAgICAgICAgICAgICAgICAucG9zdChhcGlVcmwgKyB1cmwsIGRhdGEsIHsgXCJoZWFkZXJzXCI6IGRlZmF1bHRIZWFkZXIgfSlcbiAgICAgICAgICAgICAgICAudGhlbih1bndyYXBBbmd1bGFySHR0cCwgbG9nQXBpRXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiZ2V0XCI6IGdldCxcbiAgICAgICAgICAgIFwicG9zdFwiOiBwb3N0XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgU2VydmljZS4kaW5qZWN0ID0gW1wiJGh0dHBcIiwgXCIkcVwiXTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiY2l2aWMtZ3JhcGguYXBpXCIpLmZhY3RvcnkoXCJjZ0FwaUNhbGxlclwiLCBTZXJ2aWNlKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjcvMTYuXG4gKi9cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBTZXJ2aWNlKHV0aWxzKSB7XG4gICAgICAgIGZ1bmN0aW9uIExvY2F0aW9uKG9iaikge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgZ2V0UHJvcGVydHkgPSB1dGlscy5nZXRQcm9wZXJ0eUZyb21PYmoob2JqKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gYnVpbGRGb3JtYXR0ZWRBZGRyZXNzKCkge1xuICAgICAgICAgICAgICAgIHZhciBkZWZPYmogPSB1dGlscy5pc0RlZmluZWQob2JqKSA/IG9iaiA6IHt9O1xuICAgICAgICAgICAgICAgIHZhciBhZGRyZXNzTGluZSA9ICh1dGlscy5pc0RlZmluZWQoZGVmT2JqLmFkZHJlc3NfbGluZSkgPyBkZWZPYmouYWRkcmVzc19saW5lICsgJyAnIDogJycpO1xuICAgICAgICAgICAgICAgIHZhciBsb2NhbGl0eSA9ICh1dGlscy5pc0RlZmluZWQoZGVmT2JqLmxvY2FsaXR5KSA/IGRlZk9iai5sb2NhbGl0eSArICcsICcgOiAnJyk7XG4gICAgICAgICAgICAgICAgdmFyIGNvdW50cnlDb2RlID0gKHV0aWxzLmlzRGVmaW5lZChkZWZPYmouY291bnRyeV9jb2RlKSA/IGRlZk9iai5jb3VudHJ5X2NvZGUgKyAnICcgOiAnJyk7XG4gICAgICAgICAgICAgICAgdmFyIHBvc3RhbENvZGUgPSAodXRpbHMuaXNEZWZpbmVkKGRlZk9iai5wb3N0YWxfY29kZSkgPyBkZWZPYmoucG9zdGFsX2NvZGUgOiAnJyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gKGFkZHJlc3NMaW5lICsgbG9jYWxpdHkgKyBjb3VudHJ5Q29kZSArIHBvc3RhbENvZGUpLnRyaW0oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZi5pZCA9IGdldFByb3BlcnR5KFwiaWRcIik7XG4gICAgICAgICAgICBzZWxmLmFkZHJlc3NfbGluZSA9IGdldFByb3BlcnR5KFwiYWRkcmVzc19saW5lXCIpO1xuICAgICAgICAgICAgc2VsZi5sb2NhbGl0eSA9IGdldFByb3BlcnR5KFwibG9jYWxpdHlcIik7XG4gICAgICAgICAgICBzZWxmLmRpc3RyaWN0ID0gZ2V0UHJvcGVydHkoXCJkaXN0cmljdFwiKTtcbiAgICAgICAgICAgIHNlbGYucG9zdGFsX2NvZGUgPSBnZXRQcm9wZXJ0eShcInBvc3RhbF9jb2RlXCIpO1xuICAgICAgICAgICAgc2VsZi5jb3VudHJ5ID0gZ2V0UHJvcGVydHkoXCJjb3VudHJ5XCIpO1xuICAgICAgICAgICAgc2VsZi5jb3VudHJ5X2NvZGUgPSBnZXRQcm9wZXJ0eShcImNvdW50cnlfY29kZVwiKTtcbiAgICAgICAgICAgIHNlbGYuY29vcmRpbmF0ZXMgPSBnZXRQcm9wZXJ0eShcImNvb3JkaW5hdGVzXCIpO1xuXG4gICAgICAgICAgICAvLyBUT0RPOiBDb252ZXJ0IHRoaXMgdG8gYSBtZXRob2QgdGhhdCBidWlsZHMgYmFzZWQgb2ZmIG9mIHRoZSBjdXJyZW50IG9iamVjdCdzIHByb3BlcnRpZXMuXG4gICAgICAgICAgICAvLyBVbmxlc3MgdGhpcyBpcyBuZWVkZWQgZm9yIHRoZSBBUEkgc3BlY2lmaWNhbGx5LCB0aGVuIGhhdmUgdGhpcyBidWlsdCBpbiBhIHNpbWlsYXIgZnVuY3Rpb24gYXMgdGhlIG9uZSBpblxuICAgICAgICAgICAgLy8gRW50aXR5TW9kZWwgZm9yIGJ1aWxkaW5nIEFQSSBzcGVjaWZpYyBvYmplY3RzXG4gICAgICAgICAgICBzZWxmLmZvcm1hdHRlZEFkZHJlc3MgPSBidWlsZEZvcm1hdHRlZEFkZHJlc3MoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldExvY2F0aW9uTW9kZWwob2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IExvY2F0aW9uKG9iaik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJnZXRMb2NhdGlvbk1vZGVsXCI6IGdldExvY2F0aW9uTW9kZWxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBTZXJ2aWNlLiRpbmplY3QgPSBbXCJjZ1V0aWxTZXJ2aWNlXCJdO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdjaXZpYy1ncmFwaC5hcGknKVxuICAgICAgICAuZmFjdG9yeSgnbG9jYXRpb25TZXJ2aWNlJywgU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxuICovXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgZnVuY3Rpb24gZ2V0RW50aXR5VHlwZXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcIkdvdmVybm1lbnRcIjogdHJ1ZSxcbiAgICAgICAgICAgIFwiRm9yLVByb2ZpdFwiOiB0cnVlLFxuICAgICAgICAgICAgXCJOb24tUHJvZml0XCI6IHRydWUsXG4gICAgICAgICAgICBcIkluZGl2aWR1YWxcIjogdHJ1ZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEluZmx1ZW5jZVR5cGVzKCkge1xuICAgICAgICByZXR1cm4gW1wiTG9jYWxcIiwgXCJOYXRpb25hbFwiLCBcIkdsb2JhbFwiXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBTZXJ2aWNlKGFwaUNhbGxlciwgZnVuQ29ublNlcnZpY2UsIGNvbm5TZXJ2aWNlLCBmaW5hbmNlU2VydmljZSwgbG9jYXRpb25TZXJ2aWNlLCBjYXRlZ29yeVNlcnZpY2UsIHV0aWxzKSB7XG5cbiAgICAgICAgZnVuY3Rpb24gRW50aXR5KG9iaikge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGRlZk9iaiA9IHV0aWxzLmlzRGVmaW5lZChvYmopID8gb2JqIDoge307XG4gICAgICAgICAgICB2YXIgZ2V0UHJvcGVydHkgPSB1dGlscy5nZXRQcm9wZXJ0eUZyb21PYmoob2JqKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVEQk1vZGVsKCkge1xuICAgICAgICAgICAgICAgIHZhciBkYk1vZGVsID0gbmV3IEVudGl0eShzZWxmKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmxvY2F0aW9ucy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmxvY2F0aW9ucy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmdyYW50c19yZWNlaXZlZC5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmdyYW50c19yZWNlaXZlZC5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmdyYW50c19naXZlbi5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmdyYW50c19naXZlbi5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmludmVzdG1lbnRzX3JlY2VpdmVkLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuaW52ZXN0bWVudHNfcmVjZWl2ZWQucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5pbnZlc3RtZW50c19tYWRlLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuaW52ZXN0bWVudHNfbWFkZS5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmRhdGFfZ2l2ZW4ucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5kYXRhX2dpdmVuLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZGF0YV9yZWNlaXZlZC5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmRhdGFfcmVjZWl2ZWQucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5jb2xsYWJvcmF0aW9ucy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmNvbGxhYm9yYXRpb25zLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwua2V5X3Blb3BsZS5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmtleV9wZW9wbGUucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5lbXBsb3ltZW50cy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmVtcGxveW1lbnRzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwucmV2ZW51ZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5yZXZlbnVlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmV4cGVuc2VzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZXhwZW5zZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5jYXRlZ29yaWVzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuY2F0ZWdvcmllcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmRlc2NyaXB0aW9uID0gJyc7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZGJNb2RlbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZi5pZCA9IGdldFByb3BlcnR5KFwiaWRcIik7XG4gICAgICAgICAgICBzZWxmLm5hbWUgPSBnZXRQcm9wZXJ0eShcIm5hbWVcIik7XG4gICAgICAgICAgICBzZWxmLmluZmx1ZW5jZSA9IGdldFByb3BlcnR5KFwiaW5mbHVlbmNlXCIpO1xuICAgICAgICAgICAgc2VsZi50eXBlID0gZ2V0UHJvcGVydHkoXCJ0eXBlXCIpO1xuICAgICAgICAgICAgc2VsZi5uaWNrbmFtZSA9IGdldFByb3BlcnR5KFwibmlja25hbWVcIik7XG4gICAgICAgICAgICBzZWxmLnVybCA9IGdldFByb3BlcnR5KFwidXJsXCIpO1xuICAgICAgICAgICAgc2VsZi50d2l0dGVyX2hhbmRsZSA9IGdldFByb3BlcnR5KFwidHdpdHRlcl9oYW5kbGVcIik7XG4gICAgICAgICAgICBzZWxmLmVtcGxveWVlcyA9IGdldFByb3BlcnR5KFwiZW1wbG95ZWVzXCIpO1xuXG4gICAgICAgICAgICBzZWxmLmxvY2F0aW9ucyA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5sb2NhdGlvbnMsIGxvY2F0aW9uU2VydmljZS5nZXRMb2NhdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuZ3JhbnRzX3JlY2VpdmVkID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmdyYW50c19yZWNlaXZlZCwgZnVuQ29ublNlcnZpY2UuZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmludmVzdG1lbnRzX3JlY2VpdmVkID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmludmVzdG1lbnRzX3JlY2VpdmVkLCBmdW5Db25uU2VydmljZS5nZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuZ3JhbnRzX2dpdmVuID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmdyYW50c19naXZlbiwgZnVuQ29ublNlcnZpY2UuZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmludmVzdG1lbnRzX21hZGUgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouaW52ZXN0bWVudHNfbWFkZSwgZnVuQ29ublNlcnZpY2UuZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmRhdGFfZ2l2ZW4gPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouZGF0YV9naXZlbiwgY29ublNlcnZpY2UuZ2V0Q29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuZGF0YV9yZWNlaXZlZCA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5kYXRhX3JlY2VpdmVkLCBjb25uU2VydmljZS5nZXRDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5jb2xsYWJvcmF0aW9ucyA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5jb2xsYWJvcmF0aW9ucywgY29ublNlcnZpY2UuZ2V0Q29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYua2V5X3Blb3BsZSA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5rZXlfcGVvcGxlLCBjb25uU2VydmljZS5nZXRDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5lbXBsb3ltZW50cyA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5lbXBsb3ltZW50cywgY29ublNlcnZpY2UuZ2V0Q29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYucmV2ZW51ZXMgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmoucmV2ZW51ZXMsIGZpbmFuY2VTZXJ2aWNlLmdldEZpbmFuY2VNb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmV4cGVuc2VzID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmV4cGVuc2VzLCBmaW5hbmNlU2VydmljZS5nZXRGaW5hbmNlTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5jYXRlZ29yaWVzID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmNhdGVnb3JpZXMsIGNhdGVnb3J5U2VydmljZS5nZXRDYXRlZ29yeU1vZGVsKTtcblxuICAgICAgICAgICAgc2VsZi5nZW5lcmF0ZURCTW9kZWwgPSBnZW5lcmF0ZURCTW9kZWw7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRFbnRpdHlNb2RlbChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRW50aXR5KG9iaik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRBbGwoKSB7XG4gICAgICAgICAgICByZXR1cm4gYXBpQ2FsbGVyLmdldCgnL2VudGl0aWVzJyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzYXZlRW50aXR5KGVudGl0eSkge1xuICAgICAgICAgICAgcmV0dXJuIGFwaUNhbGxlci5wb3N0KFwiL3NhdmVcIiwgeyBcImVudGl0eVwiOiBlbnRpdHkgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJnZXRFbnRpdHlNb2RlbFwiOiBnZXRFbnRpdHlNb2RlbCxcbiAgICAgICAgICAgIFwiZ2V0RW50aXR5VHlwZXNcIjogZ2V0RW50aXR5VHlwZXMsXG4gICAgICAgICAgICBcImdldEluZmx1ZW5jZVR5cGVzXCI6IGdldEluZmx1ZW5jZVR5cGVzLFxuICAgICAgICAgICAgXCJnZXRBbGxcIjogZ2V0QWxsLFxuICAgICAgICAgICAgXCJzYXZlRW50aXR5XCI6IHNhdmVFbnRpdHlcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBTZXJ2aWNlLiRpbmplY3QgPSBbXG4gICAgICAgIFwiY2dBcGlDYWxsZXJcIixcbiAgICAgICAgXCJmdW5kaW5nQ29ubmVjdGlvblNlcnZpY2VcIixcbiAgICAgICAgXCJjb25uZWN0aW9uU2VydmljZVwiLFxuICAgICAgICBcImZpbmFuY2VTZXJ2aWNlXCIsXG4gICAgICAgIFwibG9jYXRpb25TZXJ2aWNlXCIsXG4gICAgICAgIFwiY2F0ZWdvcnlTZXJ2aWNlXCIsXG4gICAgICAgIFwiY2dVdGlsU2VydmljZVwiXG4gICAgXTtcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKVxuICAgICAgICAuZmFjdG9yeShcImVudGl0eVNlcnZpY2VcIiwgU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyLCBkMywgTCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBkZXBlbmRlbmNpZXMgPSBbXG4gICAgICAgICckc2NvcGUnLFxuICAgICAgICAnJHRpbWVvdXQnLFxuICAgICAgICAnbGVhZmxldERhdGEnLFxuICAgICAgICAnXycsXG4gICAgICAgICckZmlsdGVyJyxcbiAgICAgICAgbWFwQ3RybFxuICAgIF07XG5cbiAgICBmdW5jdGlvbiBtYXBDdHJsKCRzY29wZSwgJHRpbWVvdXQsIGxlYWZsZXREYXRhLCBfLCAkZmlsdGVyKSB7XG5cbiAgICAgICAgJHNjb3BlLm9wdGlvbnMgPSB7XG4gICAgICAgICAgICBjZW50ZXIgIDoge1xuICAgICAgICAgICAgICAgIGxhdCA6IDIwLjAwLFxuICAgICAgICAgICAgICAgIGxuZyA6IC00MC4wMCxcbiAgICAgICAgICAgICAgICB6b29tOiAzXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgICAgICB0aWxlTGF5ZXIgICAgICAgICA6ICdodHRwczovL2FwaS50aWxlcy5tYXBib3guY29tL3Y0L21hcGJveC5saWdodC97en0ve3h9L3t5fS5wbmc/YWNjZXNzX3Rva2VuPXBrLmV5SjFJam9pWkdGMmFXUnNjbTUwSWl3aVlTSTZJakEwTTJSa056TXpaV0ptTnpFek5HWXpNVGRoWVRFeFl6QXlabVU0WlRFMUluMC5UTllsRnRhMlZJdHJrbjRMMFo5QkpRJyxcbiAgICAgICAgICAgICAgICB0aWxlTGF5ZXJPcHRpb25zICA6IHtcbiAgICAgICAgICAgICAgICAgICAgZGV0ZWN0UmV0aW5hOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICByZXVzZVRpbGVzICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB6b29tQ29udHJvbCAgICAgICA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGF0dHJpYnV0aW9uQ29udHJvbDogZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9jb2RlcndhbGwuY29tL3Avbmdpc21hL3NhZmUtYXBwbHktaW4tYW5ndWxhci1qc1xuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5ID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICB2YXIgcGhhc2UgPSB0aGlzLiRyb290LiQkcGhhc2U7XG4gICAgICAgICAgICBpZiAocGhhc2UgPT09ICckYXBwbHknIHx8IHBoYXNlID09PSAnJGRpZ2VzdCcpIHtcbiAgICAgICAgICAgICAgICBpZiAoZm4gJiYgKHR5cGVvZihmbikgPT09ICdmdW5jdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRhcHBseShmbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNyZWF0ZVBpZUNoYXJ0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSAgID0gb3B0aW9ucy5kYXRhO1xuICAgICAgICAgICAgICAgIHZhciBwaWUgICAgPSBkMy5sYXlvdXQucGllKCkuc29ydChudWxsKS52YWx1ZShmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC52YWx1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgYXJjICAgID0gZDMuc3ZnLmFyYygpLm91dGVyUmFkaXVzKG9wdGlvbnMucikuaW5uZXJSYWRpdXMob3B0aW9ucy5yIC0gMTApO1xuICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBvcHRpb25zLnIgKyBvcHRpb25zLnN0cm9rZVdpZHRoO1xuICAgICAgICAgICAgICAgIHZhciB3ICAgICAgPSBjZW50ZXIgKiAyO1xuICAgICAgICAgICAgICAgIHZhciBoICAgICAgPSB3O1xuICAgICAgICAgICAgICAgIHZhciBzdmcgICAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoZDMubnMucHJlZml4LnN2ZywgJ3N2ZycpO1xuICAgICAgICAgICAgICAgIHZhciB2aXMgICAgPSBkMy5zZWxlY3Qoc3ZnKVxuICAgICAgICAgICAgICAgICAgICAuZGF0YShkYXRhKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAncGllY2hhcnQnKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLCB3KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgaCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgYXJjcyA9IHZpcy5zZWxlY3RBbGwoJy5hcmMnKVxuICAgICAgICAgICAgICAgICAgICAuZGF0YShwaWUoZGF0YSkpXG4gICAgICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdhcmMnKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgY2VudGVyICsgJywnICsgY2VudGVyICsgJyknKTtcblxuICAgICAgICAgICAgICAgIC8vIHZhciBtYXAgPSBMLm1hcGJveC5tYXAoJ21hcCcsICdleGFtcGxlcy5tYXAtOWlqdWsyNHknLCB7XG4gICAgICAgICAgICAgICAgLy8gICAgIG1pblpvb206IDEsXG4gICAgICAgICAgICAgICAgLy8gICAgIG1heFpvb206IDJcbiAgICAgICAgICAgICAgICAvLyB9KS5zZXRWaWV3KFs0MCwgLTc0LjUwXSwgOSk7XG5cbiAgICAgICAgICAgICAgICBhcmNzLmFwcGVuZCgncGF0aCcpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgYXJjKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuZGF0YS50eXBlICsgJy1hcmMnO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGFyY3MuYXBwZW5kKFwic3ZnOnRleHRcIilcbiAgICAgICAgICAgICAgICAgICAgLnRleHQoZnVuY3Rpb24gKGQsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMuY291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwieFwiLCAtNCAqIG9wdGlvbnMuY291bnQudG9TdHJpbmcoKS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiZHlcIiwgNSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImFyY1RleHRcIik7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93LlhNTFNlcmlhbGl6ZXIgPyAobmV3IHdpbmRvdy5YTUxTZXJpYWxpemVyKCkpLnNlcmlhbGl6ZVRvU3RyaW5nKHN2ZylcbiAgICAgICAgICAgICAgICAgICAgOiBzdmcueG1sID8gc3ZnLnhtbCA6ICcnO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbGVhZmxldERhdGEuZ2V0TWFwKCkudGhlbihmdW5jdGlvbiAobWFwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkRW50aXRpZXMgPSAkc2NvcGUuZW50aXRpZXM7XG5cbiAgICAgICAgICAgICAgICBtYXAuaW52YWxpZGF0ZVNpemUoKTtcblxuICAgICAgICAgICAgICAgIG5ldyBMLkNvbnRyb2wuWm9vbSh7cG9zaXRpb246ICd0b3ByaWdodCd9KS5hZGRUbyhtYXApO1xuICAgICAgICAgICAgICAgIEwuY29udHJvbC5sb2NhdGUoXG4gICAgICAgICAgICAgICAgICAgIHtwb3NpdGlvbjogJ3RvcHJpZ2h0Jywgc2hvd1BvcHVwOiBmYWxzZSwgaWNvbjogJ2ZhIGZhLWxvY2F0aW9uLWFycm93J31cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUbyhtYXApO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gY2x1c3Rlckljb24oY2x1c3Rlcikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRyZW4gICAgICAgPSBjbHVzdGVyLmdldEFsbENoaWxkTWFya2VycygpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG90YWwgICAgICAgICAgPSBjaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjbHVzdGVyTWFya2VycyA9IF8ucGx1Y2soY2hpbGRyZW4sICdvcHRpb25zJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb3VudHMgICAgICAgICA9IF8ubWFwKF8uY291bnRCeShjbHVzdGVyTWFya2VycywgJ3R5cGUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGNvdW50LCB0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyd0eXBlJzogdHlwZSwgJ3ZhbHVlJzogY291bnR9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHIgICAgICAgICAgICAgID0gMjg7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdHJva2VXaWR0aCAgICA9IDE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpY29uRGltICAgICAgICA9IChyICsgc3Ryb2tlV2lkdGgpICogMjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWwgICAgICAgICAgID0gY3JlYXRlUGllQ2hhcnQoXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZGF0YTogY291bnRzLCByOiByLCBzdHJva2VXaWR0aDogc3Ryb2tlV2lkdGgsIGNvdW50OiB0b3RhbH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEwuRGl2SWNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sICAgICA6IGh0bWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdtYXJrZXItY2x1c3RlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZSA6IG5ldyBMLnBvaW50KGljb25EaW0sIGljb25EaW0pXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbWFya2VySWNvbiAgPSB7XG4gICAgICAgICAgICAgICAgICAgICdOb24tUHJvZml0JzogTC5pY29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25VcmwgOiAnaW1nL21hcmtlci1ub25wcm9mLnN2ZycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZTogWzYwLCA2MF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICdGb3ItUHJvZml0JzogTC5pY29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25VcmwgOiAnaW1nL21hcmtlci1wcm9mLnN2ZycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZTogWzYwLCA2MF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICdJbmRpdmlkdWFsJzogTC5pY29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25VcmwgOiAnaW1nL21hcmtlci1pbmQuc3ZnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TaXplOiBbNjAsIDYwXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgJ0dvdmVybm1lbnQnOiBMLmljb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblVybCA6ICdpbWcvbWFya2VyLWdvdi5zdmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblNpemU6IFs2MCwgNjBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHZhciBtYXJrZXJzID0gTC5tYXJrZXJDbHVzdGVyR3JvdXAoe1xuXG4gICAgICAgICAgICAgICAgICAgIHNwaWRlcmZ5T25NYXhab29tOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzaG93Q292ZXJhZ2VPbkhvdmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNyZWF0ZUZ1bmN0aW9uOiBjbHVzdGVySWNvbixcbiAgICAgICAgICAgICAgICAgICAgbWF4Q2x1c3RlclJhZGl1czogMzAsXG4gICAgICAgICAgICAgICAgICAgIHNwaWRlcmZ5RGlzdGFuY2VNdWx0aXBsaWVyOiAxLjNcbiAgICAgICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gb3V0ZXJMb29wKGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBpbm5lckxvb3AobG9jKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV8uZXZlcnkobG9jLmNvb3JkaW5hdGVzKSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvYy5jb29yZGluYXRlc1swXS50b0ZpeGVkKDUpID09PSAnNDAuNzgyMDAnICYmIGxvYy5jb29yZGluYXRlc1sxXS50b0ZpeGVkKDUpID09PSAnLTczLjgzMTcwJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYy5jb29yZGluYXRlc1swXSA9IDQwLjc3MDY1O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYy5jb29yZGluYXRlc1sxXSA9IC03My45NzQwNjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtID0gTC5tYXJrZXIobG9jLmNvb3JkaW5hdGVzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogbWFya2VySWNvbltlbnRpdHkudHlwZV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RpdGxlJzogZW50aXR5Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2VudGl0eV9pZCc6IGVudGl0eS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWVzc2FnZSc6IGVudGl0eS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogZW50aXR5LnR5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Vycy5hZGRMYXllcihtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIF8uZm9yRWFjaChlbnRpdHkubG9jYXRpb25zLCBpbm5lckxvb3ApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiT3JpZ2luYWw6ICVPXCIsICRzY29wZS5lbnRpdGllcyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGaWx0ZXJlZDogJU9cIiwgZmlsdGVyZWRFbnRpdGllcyk7XG5cbiAgICAgICAgICAgICAgICBfLmZvckVhY2goZmlsdGVyZWRFbnRpdGllcywgb3V0ZXJMb29wKTtcbiAgICAgICAgICAgICAgICBtYXAuYWRkTGF5ZXIobWFya2Vycyk7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBvbkxvY2F0aW9uRXJyb3IobGVhZmxldEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobGVhZmxldEVycm9yLm1lc3NhZ2UgKyBcIiAgJU9cIiwgbGVhZmxldEVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBtYXAub24oJ2xvY2F0aW9uZXJyb3InLCBvbkxvY2F0aW9uRXJyb3IpO1xuICAgICAgICAgICAgICAgIC8vIG1hcC5sb2NhdGUoe3NldFZpZXc6IHRydWUsIG1heFpvb206IDExfSk7XG4gICAgICAgICAgICAgICAgbWFya2Vycy5vbignY2xpY2snLCBmdW5jdGlvbiAobWFya2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zZXRFbnRpdHlJRChtYXJrZXIubGF5ZXIub3B0aW9ucy5lbnRpdHlfaWQpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSAkc2NvcGUuY3VycmVudEVudGl0eTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCAgID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5zZXR0aW5nc0VuYWJsZWQgJiYgJHNjb3BlLm1vYmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRvZ2dsZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgbWFwLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCAgID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICRzY29wZS4kb24oJ3NlbGVjdEl0ZW0nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb29yZGluYXRlcyA9ICRzY29wZS5jdXJyZW50RW50aXR5LmxvY2F0aW9ucy5sZW5ndGggPiAwID8gXy5wbHVjayhcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jdXJyZW50RW50aXR5LmxvY2F0aW9ucywgJ2Nvb3JkaW5hdGVzJykgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29vcmRpbmF0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFwLnNldFZpZXcoY29vcmRpbmF0ZXNbMF0sIDExKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbnRlcmFjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG5cbiAgICAgICAgLmNvbnRyb2xsZXIoJ21hcEN0cmwnLCBkZXBlbmRlbmNpZXMpO1xufSkoYW5ndWxhciwgZDMsIEwpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBkZXRhaWxzQ3RybCgkc2NvcGUsIF8pIHtcbiAgICAgICAgJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0ID0ge1xuICAgICAgICAgICAgJ2tleV9wZW9wbGUnOiAzLFxuICAgICAgICAgICAgJ2dyYW50c19naXZlbic6IDMsXG4gICAgICAgICAgICAnZ3JhbnRzX3JlY2VpdmVkJzogMyxcbiAgICAgICAgICAgICdpbnZlc3RtZW50c19tYWRlJzogMyxcbiAgICAgICAgICAgICdpbnZlc3RtZW50c19yZWNlaXZlZCc6IDMsXG4gICAgICAgICAgICAnY29sbGFib3JhdGlvbnMnOiAzLFxuICAgICAgICAgICAgJ2VtcGxveW1lbnRzJzogMyxcbiAgICAgICAgICAgICdyZWxhdGlvbnMnOiAzLFxuICAgICAgICAgICAgJ2RhdGFfZ2l2ZW4nOiAzLFxuICAgICAgICAgICAgJ2RhdGFfcmVjZWl2ZWQnOiAzLFxuICAgICAgICAgICAgJ3JldmVudWVzJzogMyxcbiAgICAgICAgICAgICdleHBlbnNlcyc6IDNcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuaXRlbXNTaG93biA9IF8uY2xvbmUoJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0KTtcblxuICAgICAgICAkc2NvcGUuJG9uKCdlbnRpdHlDaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBSZXNldCBpdGVtcyBzaG93biBpbiBkZXRhaWxzIGxpc3QuXG4gICAgICAgICAgICAkc2NvcGUuaXRlbXNTaG93biA9IF8uY2xvbmUoJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0KTtcbiAgICAgICAgfSk7XG4gICAgICAgICRzY29wZS5zaG93TW9yZSA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAkc2NvcGUuaXRlbXNTaG93blt0eXBlXSA9ICRzY29wZS5jdXJyZW50RW50aXR5W3R5cGVdLmxlbmd0aDtcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLnNob3dMZXNzID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICRzY29wZS5pdGVtc1Nob3duW3R5cGVdID0gJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0W3R5cGVdO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdkZXRhaWxzQ3RybCcsIFsnJHNjb3BlJywgXCJfXCIsIGRldGFpbHNDdHJsXSk7XG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNy8xMC8xNi5cbiAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBjb250cm9sRGVwcyA9IFtcbiAgICAgICAgJ2VudGl0eVNlcnZpY2UnLFxuICAgICAgICAnY29ubmVjdGlvblNlcnZpY2UnLFxuICAgICAgICAnJHJvb3RTY29wZScsXG4gICAgICAgICdfJyxcbiAgICAgICAgJyRtb2RhbCcsXG4gICAgICAgIGNvbnRyb2xDdHJsXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIGNvbnRyb2xDdHJsKGVudGl0eVNlcnZpY2UsIGNvbm5lY3Rpb25TZXJ2aWNlLCAkcm9vdFNjb3BlLCBfLCAkbW9kYWwpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgdm0uZW50aXR5VHlwZXMgPSBlbnRpdHlTZXJ2aWNlLmdldEVudGl0eVR5cGVzKCk7XG4gICAgICAgIHZtLmNvbm5lY3Rpb25UeXBlcyA9IGNvbm5lY3Rpb25TZXJ2aWNlLmdldENvbm5lY3Rpb25UeXBlcygpO1xuICAgICAgICB2bS5zaXplQnlMaXN0ID0gW1xuICAgICAgICAgICAgeyduYW1lJzogJ0VtcGxveWVlcycsICd2YWx1ZSc6ICdlbXBsb3llZXMnfSxcbiAgICAgICAgICAgIHsnbmFtZSc6ICdUd2l0dGVyIEZvbGxvd2VycycsICd2YWx1ZSc6ICdmb2xsb3dlcnMnfVxuICAgICAgICBdO1xuICAgICAgICB2bS5zaXplQnkgPSAnZW1wbG95ZWVzJztcbiAgICAgICAgdm0uc2hvd1ZpZXcgPSB7XG4gICAgICAgICAgICAnTmV0d29yayc6IHRydWUsXG4gICAgICAgICAgICAnTWFwJzogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgdm0uc3dpdGNoVmlldyA9IHN3aXRjaFZpZXc7XG4gICAgICAgIHZtLmNoYW5nZVZpZXcgPSBmdW5jdGlvbiAodmlldykge1xuICAgICAgICAgICAgXy5mb3JFYWNoKF8ua2V5cyh2bS5zaG93VmlldyksIGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgdm0uc2hvd1ZpZXdbbmFtZV0gPSB2aWV3ID09PSBuYW1lO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3ZpZXdDaGFuZ2UnLCB2bS5zaG93Vmlldyk7XG4gICAgICAgIH07XG4gICAgICAgIHZtLnNob3dBYm91dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRtb2RhbC5vcGVuKHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb246IGZhbHNlLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29udHJvbC9hYm91dC5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnbW9kYWxDdHJsJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHZtLnRvZ2dsZU5vZGUgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCd0b2dnbGVOb2RlJywgeyduYW1lJzogdHlwZSwgJ2VuYWJsZWQnOiB2bS5lbnRpdHlUeXBlc1t0eXBlXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHZtLnRvZ2dsZUxpbmsgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCd0b2dnbGVMaW5rJywgeyduYW1lJzogdHlwZSwgJ2VuYWJsZWQnOiB2bS5jb25uZWN0aW9uVHlwZXNbdHlwZV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB2bS5jaGFuZ2VTaXplQnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ2NoYW5nZVNpemVCeScsIHZtLnNpemVCeSk7XG4gICAgICAgIH07XG4gICAgICAgIGZ1bmN0aW9uIHN3aXRjaFZpZXcoKSB7XG4gICAgICAgICAgICB2bS5jaGFuZ2VWaWV3KCF2bS50b2dnbGVOZXR3b3JrID8gJ01hcCcgOiAnTmV0d29yaycpO1xuICAgICAgICB9XG5cbiAgICAgICAgdm0uY2hhbmdlU2l6ZUJ5KCk7XG5cbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29udHJvbGxlcignY29udHJvbEN0cmwnLCBjb250cm9sRGVwcyk7XG5cbn0pKGFuZ3VsYXIpO1xuIl19
