!function(i){"use strict";var a=["ui.bootstrap","leaflet-directive","ngAnimate","templateCache","civic-graph.api","civic-graph.util"],c=["civic-graph.util"];i.module("civic-graph.util",[]),i.module("civic-graph.api",c),i.module("civic-graph",a)}(angular);
!function(t){"use strict";function a(){return{templateUrl:"js/analytic/analytics.html",restrict:"E",scope:{},controller:"analyticsCtrl"}}var c=[a];t.module("civic-graph").directive("analytics",c)}(angular);
!function(e){"use strict";function t(e,t){function i(e){var i=t.getPropertyFromObj(e);this.id=i("id"),this.name=i("name"),this.enabled=i("enable",!0)}function n(e){return new i(e)}function r(){return e.get("/categories")}return{getCategoryModel:n,getAll:r}}t.$inject=["cgApiCaller","cgUtilService"],e.module("civic-graph.api").factory("categoryService",t)}(angular);
!function(t){"use strict";function n(){return{Funding:!0,Data:!0,Employment:!0,Collaboration:!0}}function i(t,i){function o(t){var n=i.getPropertyFromObj(t);this.id=n("id"),this.name=n("name"),this.details=n("details"),this.entity=n("entity"),this.entity_id=n("entity_id")}function c(t){return new o(t)}function r(){return t.get(e)}return{getAll:r,getConnectionTypes:n,getConnectionModel:c}}var e="/connections";i.$inject=["cgApiCaller","cgUtilService"],t.module("civic-graph.api").factory("connectionService",i)}(angular);
!function(i){"use strict";function n(i){function n(n){var t=i.getPropertyFromObj(n);this.id=t("id"),this.year=t("year"),this.amount=t("amount",0)}function t(i){return new n(i)}return{getFinanceModel:t}}n.$inject=["cgUtilService"],i.module("civic-graph.api").factory("financeService",n)}(angular);
!function(n){"use strict";function t(n){function t(t){var i=n.getPropertyFromObj(t);this.id=i("id"),this.year=i("year"),this.amount=i("amount"),this.entity=i("entity","")}function i(n){return new t(n)}return{getFundingConnectionModel:i}}t.$inject=["cgUtilService"],n.module("civic-graph.api").factory("fundingConnectionService",t)}(angular);
!function(o){"use strict";function r(){return{templateUrl:"js/control/controls.html",restrict:"E",scope:{toggleNetwork:"="},controller:"controlCtrl",controllerAs:"control",bindToController:{minConnections:"="}}}var t=[r];o.module("civic-graph").directive("control",t)}(angular);
!function(e){"use strict";function t(t,i,n,o,s,d,c,a){function r(){var e,i,n,o;for(i in t.categories)if(t.categories.hasOwnProperty(i)){e=t.categories[i];for(n in t.editEntity.categories)t.editEntity.categories.hasOwnProperty(n)&&(o=t.editEntity.categories[n],e.id===o.id&&(e.enabled=o.enabled))}}t.isEditing=!1,t.editEntity=s.getEntityModel(t.entity),t.entityTypes=s.getEntityTypes(),t.influenceTypes=s.getInfluenceTypes();var u;t.categories=[],t.addressSearch=function(e){return i.jsonp("https://dev.virtualearth.net/REST/v1/Locations",{params:{query:e,key:"Ai58581yC-Sr7mcFbYTtUkS3ixE7f6ZuJnbFJCVI4hAtW1XoDEeZyidQz2gLCCyD",jsonp:"JSON_CALLBACK",include:"ciso2"}}).then(function(e){if(a.isDefined(e.data.resourceSets)&&e.data.resourceSets.length>0)return e.data.resourceSets[0].resources})},t.toggleCategory=function(e){if(0===t.editEntity.categories.length)t.editEntity.categories.push(e);else{var i=!1;for(var n in t.editEntity.categories)if(t.editEntity.categories.hasOwnProperty(n)){var o=t.editEntity.categories[n];if(o.id===e.id){i=!0,o.enabled=e.enabled;break}}i||t.editEntity.categories.push(e)}},t.setLocation=function(e,i){t.addressSearch(e.formattedAddress).then(function(n){if(a.isDefined(n[0])){var o=n[0],s=o.address,d=o.point;t.addLocation(i),e.address_line=a.isDefined(s.addressLine)?s.addressLine:"",e.locality=a.isDefined(s.locality)?s.locality:"",e.district=a.isDefined(s.adminDistrict)?s.adminDistrict:"",e.country=a.isDefined(s.countryRegion)?s.countryRegion:null,e.country_code=a.isDefined(s.countryRegionIso2)?s.countryRegionIso2:"",e.coordinates=a.isDefined(d.coordinates)?d.coordinates:null,e.postal_code=a.isDefined(s.postalCode)?s.postalCode:null}})},t.addLocation=function(e){e&&t.editEntity.locations.push(c.getLocationModel())},t.addKeyPerson=function(){o.some(t.editEntity.key_people,{name:"",id:null})||t.editEntity.key_people.push({name:"",id:null})},t.setFundingConnection=function(e,t){t.entity_id=e.id},t.addFundingConnection=function(e){o.some(e,{entity:""})||e.push({entity:"",amount:null,year:null,id:null})},t.setConnection=function(e,t){t.entity_id=e.id},t.addConnection=function(e){o.some(e,{entity:"",id:null})||e.push({entity:"",id:null,details:null})},t.addFinance=function(e){o.every(e,function(e){return e.amount>0&&e.year>1750})&&e.push({amount:null,year:null,id:null})},t.save=function(){function e(e){t.isSaving=!1,t.$emit("editEntitySuccess",e),t.cancelEdit()}function i(){t.isError=!0,n(function(){t.isError=!1},2e3)}t.isSaving=!0,s.saveEntity(t.editEntity.generateDBModel()).then(e,i)},t.cancelEdit=function(){t.isOpen=!1},t.$watch("entity",function(i,n){e.equals(i,n)||(t.editEntity=s.getEntityModel(i),t.categories=e.copy(u),r(),t.isEditing=a.isDefined(t.editEntity.id))}),d.getAll().then(function(i){u=i.categories,t.categories=e.copy(u)})}t.$inject=["$scope","$http","$timeout","_","entityService","categoryService","locationService","cgUtilService"],e.module("civic-graph").controller("editCtrl",t)}(angular);
!function(t){"use strict";function e(){return{templateUrl:"js/edit-entity/edit.html",restrict:"E",scope:{entity:"=",entities:"=",isOpen:"="},controller:"editCtrl"}}var i=[e];t.module("civic-graph").directive("editEntity",i)}(angular);
!function(o){"use strict";o.module("civic-graph").constant("_",window._).config(["$locationProvider","$compileProvider",function(o,n){o.html5Mode(!0),n.debugInfoEnabled(!0)}]).filter("thousandSuffix",function(){return function(o,n){var t,i=["k","M","G","T","P","E"];return window.isNaN(o)?null:o<1e3?o:(t=Math.floor(Math.log(o)/Math.log(1e3)),(o/Math.pow(1e3,t)).toFixed(n)+i[t-1])}})}(angular);
!function(t){"use strict";function i(t,i,e,n,o){function a(){t.$broadcast("triggerNetworkDraw")}t.entities=[],t.searchItems=null,t.categories=[],t.currentLocation=null,t.clickedLocation={},t.clickedLocation.location=null,t.clickedEntity={},t.clickedEntity.entity=null,t.editing=!1,t.actions={interacted:!1},t.showsearchMB=!1,t.showAnalytics=!1,t.entityTypes=n.getEntityTypes(),t.connectionTypes=o.getConnectionTypes(),t.status={isNetworkShown:!0,license:!0,networkLoading:!0},t.toggleAnalytics=function(){t.showAnalytics=!t.showAnalytics},this.minConnections=t.minConnections=2;var s=this;t.$watch("minConnections",a),t.connectionChange=function(){console.log(s.minConnections),t.minConnections=s.minConnections,t.$broadcast("triggerNetworkDraw")},t.hydePartials=function(i){"search"===i?(t.editing=!1,t.settingsEnabled=!1):"settings"===i?(t.editing=!1,t.showsearchMB=!1):"edit"===i?(t.settingsEnabled=!1,t.showsearchMB=!1):(t.editing=!1,t.settingsEnabled=!1,t.showsearchMB=!1)},t.showSearch=function(){t.hydePartials("search"),t.showsearchMB=!t.showsearchMB,t.status.license=!1},t.toggleSettings=function(){t.hydePartials("settings"),t.settingsEnabled=!t.settingsEnabled},t.startEdit=function(i){t.currentEntity=i,t.mobile&&t.hydePartials("edit"),t.editing=!0},t.switchView=function(){t.status.isNetworkShown=!t.status.isNetworkShown,t.status.isNetworkShown&&t.$broadcast("triggerNetworkDraw")},window.mobilecheck=function(){var t=!1,i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,e=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i;return function(n){(i.test(n)||e.test(n.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},t.mobile=window.mobilecheck(),t.settingsEnabled=!t.mobile,i(function(){n.getAll().then(function(i){t.entities=i.nodes;var n=e.uniq(e.pluck(e.flatten(e.pluck(t.entities,"locations")),"locality")),o=e.map(n,function(i){var n=e.filter(t.entities,e.flow(e.property("locations"),e.partialRight(e.any,{locality:i})));return{name:i,type:"location",entities:n,dict:e.zipObject(e.pluck(n,"name"),e.pluck(n,"index"))}});t.searchItems=o.concat(t.entities),t.overviewUrl="js/overview/overview.html",t.$broadcast("triggerNetworkDraw")})},100),t.overviewUrl=null,t.setEntity=function(i){t.currentLocation=null,t.currentEntity=i,t.editing&&t.stopEdit(),t.$broadcast("entityChange")},t.setEntityID=function(i){t.setEntity(e.find(t.entities,{id:i}))},t.setLocation=function(i){t.currentLocation=i,t.editing&&t.stopEdit(),t.$broadcast("itemChange")},t.selectItem=function(i){"location"===i.type?t.setLocation(i):t[i%1===0?"setEntityID":"setEntity"](i),t.$broadcast("selectItem",i)},t.$on("setCurrentEntity",function(i,e){t.currentEntity=e.value}),t.$on("setCurrentLocation",function(i,e){t.currentLocation=e.value}),t.setEntities=function(i){t.entities=i},t.stopEdit=function(){t.editing=!1},t.$on("editEntitySuccess",function(i){t.setEntities(i.nodes),t.$broadcast("triggerNetworkDraw")}),t.animationsEnabled=!0}var e=["$scope","$timeout","_","entityService","connectionService",i];t.module("civic-graph").controller("homeCtrl",e)}(angular);
!function(i){"use strict";var a=[];i.module("civic-graph").directive("map",a)}(angular);
!function(i,t){"use strict";function s(i){function s(){var i=t(this);i.css("height","55vh")}function c(){var i=t(this);window.innerHeight/3>parseInt(i.css("height"))?i.css("height","55vh"):i.css("height","30vh")}var e;i.mobile&&(e=t("#details-panel"),e.css("height","30vh"),e.scrollTop(0),e.scroll(s),e.click(c))}function c(){return{restrict:"A",link:s}}i.module("civic-graph").directive("addMobileEvents",[c])}(angular,$);
!function(o){"use strict";function c(o,c){o.closeWindow=function(){c.close()}}o.module("civic-graph").controller("modalCtrl",["$scope","$modalInstance",c])}(angular);
!function(e){"use strict";function t(e,t){e.categorizedEntities={},t.forEach(t.keys(e.entityTypes),function(i){e.categorizedEntities[i]=t.filter(e.entities,{type:i})})}e.module("civic-graph").controller("overviewCtrl",["$scope","_",t])}(angular);
!function(n){"use strict";function e(n,e,t,i,c){function o(){function o(i){var o=e("filter")(n.entities,function(e){return e.collaborations.length>=n.minConnections}),a={};t.forEach(t.keys(i.connections),function(n){a[n]=[]}),t.forEach(i.connections,function(n,e){t.forEach(n,function(n){var i=t.find(o,{id:n.source}),r=t.find(o,{id:n.target});c.isDefined(i)&&c.isDefined(r)&&a[e].push({source:i,target:r})})}),t.forEach(t.keys(n.entityTypes),function(e){var i=t.takeRight(t.sortBy(t.filter(n.entities,{type:e}),"collaborations.length"),5);t.forEach(i,function(n){n.wellconnected=!0})}),o=t.sortBy(o,function(n){return n.wellconnected?1:0}),r(o,a)}i.getAll().then(o)}n.isLoading=!0,n.connections={},o(),n.safeApply=function(n){var e=this.$root.$$phase;"$apply"===e||"$digest"===e?n&&"function"==typeof n&&n():this.$apply(n)},n.$on("triggerNetworkDraw",o),n.$on("viewChange",function(n){console.log(n)});var r=function(e,i){n.isLoading=!1;var o=d3.select("#network");o.selectAll("*").remove();var r=o.node().getBoundingClientRect(),a=r.height,s=r.width,l=6,u=7,d={Individual:{x:1,y:1},"For-Profit":{x:1,y:-1},"Non-Profit":{x:-1,y:1},Government:{x:-1,y:-1}},f=10,y=50,p=d3.max(e,function(n){return parseInt(n.employees)}),k=d3.max(e,function(n){return parseInt(n.followers)}),g={employees:d3.scale.sqrt().domain([10,p]).range([f,y]),followers:d3.scale.sqrt().domain([10,k]).range([f,y])},h={},m=d3.layout.force().size([s,a]).nodes(e).links(t.flatten(t.values(i))).charge(function(n){return n.employees?-2*g.employees(n.employees):-20}).linkStrength(0).linkDistance(50);t.forEach(i,function(n,e){h[e]=o.selectAll(".link ."+e+"-link").data(n).enter().append("line").attr("class",function(n){return c.isDefined(n.source)&&c.isDefined(n.target)?(n.type=e,"link "+e+"-link "+n.source.type+"-link "+n.target.type+"-link"):""})});var x=o.selectAll(".node").data(e).enter().append("g").attr("class",function(n){return"node "+n.type+"-node"}).call(m.drag);x.append("circle").attr("r",function(n){return n.employees?g.employees(n.employees):u}),x.append("text").text(function(n){return n.nickname?n.nickname:n.name}).attr("dx",function(){return-.065*this.getComputedTextLength()/2+"em"}).attr("dy",function(){return.08*this.parentNode.getBBox().height/2+.5+"em"}),m.on("tick",function(n){var i=l*n.alpha;t.forEach(e,function(n){n.x&&d[n.type]&&(n.x+=d[n.type].x*i,n.y+=d[n.type].y*i,n.x=Math.max(y,Math.min(s-y,n.x)),n.y=Math.max(y,Math.min(a-y,n.y)))}),t.forEach(h,function(n){n.attr("x1",function(n){return n.source.x}).attr("y1",function(n){return n.source.y}).attr("x2",function(n){return n.target.x}).attr("y2",function(n){return n.target.y})}),x.attr("transform",function(n){return"translate("+n.x+","+n.y+")"})});var E=function(n){requestAnimationFrame(function e(){for(var t=0;t<n;t++)m.tick();m.alpha()>0&&requestAnimationFrame(e)})};E(7),m.start();var v={};t.forEach(h,function(n){t.forEach(n[0],function(n){var e=n.__data__.source,t=n.__data__.target;v[e.index+","+t.index]=!0,v[t.index+","+e.index]=!0})});var L,A=function(n,e){return v[n.index+","+e.index]||n.index===e.index},T=function(n){x.classed("focused",function(e){return A(n,e)}).classed("unfocused",function(e){return!A(n,e)}),t.forEach(h,function(e){e.classed("focused",function(e){return n.index===e.source.index||n.index===e.target.index}).classed("unfocused",function(e){return!(n.index===e.source.index||n.index===e.target.index)})})},w=function(e){n.currentEntity!==e&&n.setEntity(e),n.safeApply(),T(e)},$=function(e){x.classed("focused",!1).classed("unfocused",!1),t.forEach(h,function(n){n.classed("focused",!1).classed("unfocused",!1)}),e.fixed=!1,n.clickedEntity.entity&&m.resume()},D=function(e){n.clickedEntity.entity||n.editing||n.currentLocation||(L=setTimeout(function(){w(e)},500)),n.actions.interacted=!0,n.safeApply()},_=function(e){n.clickedEntity.entity||n.currentLocation||($(e),clearTimeout(L)),n.actions.interacted=!0,n.safeApply()},b=function(e){n.safeApply(),x.classed("focused",function(n){return n.name in e.dict}).classed("unfocused",function(n){return!(n.name in e.dict)}),t.forEach(h,function(n){n.classed("focused",function(n){return n.source.name in e.dict&&n.target.name in e.dict}).classed("unfocused",function(n){return!(n.source.name in e.dict&&n.target.name in e.dict)})})},B=function(){x.classed("focused",!1).classed("unfocused",!1),t.forEach(h,function(n){n.classed("focused",!1).classed("unfocused",!1)}),n.clickedLocation.location&&m.resume()},P=function(e){n.showLicense=!1,n.clickedEntity.entity&&($(n.clickedEntity.entity),n.clickedEntity.entity=null),n.clickedLocation.location!==e?(B(n.clickedLocation.location),b(e)):n.clickedLocation.location===e&&(n.clickedLocation.location=e,b(e)),d3.event&&d3.event.stopPropagation(),n.actions.interacted=!0,n.safeApply()},C=function(e){n.showLicense=!1,c.isDefined(n.clickedLocation)&&(c.isDefined(n.clickedLocation.location)&&(B(n.clickedLocation.entity),n.clickedLocation.location=null),n.clickedEntity.entity===e?(n.clickedEntity.entity=null,w(e)):(n.clickedEntity.entity&&$(n.clickedEntity.entity),n.clickedEntity.entity=e,w(e))),d3.event&&d3.event.stopPropagation(),n.actions.interacted=!0,n.safeApply()},q=function(){c.isDefined(n.clickedLocation)&&(c.isDefined(n.clickedLocation.location)&&($(n.clickedLocation.location),n.clickedLocation.location=null),c.isDefined(n.clickedEntity.entity)&&($(n.clickedEntity.entity),n.clickedEntity.entity=null)),n.safeApply()},I=function(e){e.fixed?$(e):(e.x=s/2,e.y=a/2,e.px=s/2,e.py=a/2,e.fixed=!0,n.clickedEntity.entity=e),n.actions.interacted=!0,n.safeApply()};x.on("mouseover",D),x.on("mouseout",_),x.on("click",C),x.on("dblclick",I),o.on("click",q),x.classed("wellconnected",function(n){return n.hasOwnProperty("wellconnected")}),n.$on("changeSizeBy",function(n,e){o.selectAll("circle").transition().duration(250).attr("r",function(n){return n[e]?g[e](n[e]):u})}),n.$on("toggleLink",function(e,i){t.map(n.entityTypes,function(e,t){o.selectAll("."+t+"-link").classed({visible:function(e){return!n.connectionTypes[e.type]||n.entityTypes[e.source.type]&&n.entityTypes[e.target.type]},hidden:function(e){return!n.connectionTypes[e.type]||!n.entityTypes[e.source.type]||!n.entityTypes[e.target.type]}})})}),n.$on("toggleNode",function(e,t){o.selectAll("."+t.name+"-node").classed({visible:t.enabled,hidden:!t.enabled}),o.selectAll("."+t.name+"-link").classed({visible:function(e){return n.connectionTypes[e.type]&&n.entityTypes[e.source.type]&&n.entityTypes[e.target.type]},hidden:function(e){return!n.connectionTypes[e.type]||!n.entityTypes[e.source.type]||!n.entityTypes[e.target.type]}})}),n.$on("selectItem",function(e,t){"location"===t.type?P(n.currentLocation):C(n.currentEntity)})}}e.$inject=["$scope","$filter","_","connectionService","cgUtilService"],n.module("civic-graph").controller("networkCtrl",e)}(angular,RTP);
!function(r){"use strict";function t(){return{restrict:"E",templateUrl:"js/network/network.html",controller:"networkCtrl"}}var e=[t];r.module("civic-graph").directive("network",e)}(angular);
!function(e){"use strict";e.module("civic-graph").directive("input",function(){return{restict:"E",require:"?ngModel",link:function(e,r,t,i){"type"in t&&"range"===t.type.toLowerCase()&&i.$parsers.push(parseFloat)}}})}(angular);
!function(r){"use strict";function n(r){return!("undefined"==typeof r||null===r)}function t(r){return n(r)&&!Array.isArray(r)&&"object"==typeof r}function e(r){var t=n(r)?r:{};return function(r,e){var i=n(e)?e:null;return n(t[r])?t[r]:i}}function i(r,n){var e=Array.isArray(r)?r.filter(t).map(n):[];return e.concat([n()])}function u(){return{isDefined:n,isObject:t,getPropertyFromObj:e,loopAndInit:i}}r.module("civic-graph.util").factory("cgUtilService",u)}(angular);
!function(c){"use strict";function n(c){}c.module("civic-graph").controller("analyticsCtrl",["$scope",n])}(angular);
!function(e){"use strict";function i(e){function i(i){function t(){var t=e.isDefined(i)?i:{},o=e.isDefined(t.address_line)?t.address_line+" ":"",c=e.isDefined(t.locality)?t.locality+", ":"",n=e.isDefined(t.country_code)?t.country_code+" ":"",r=e.isDefined(t.postal_code)?t.postal_code:"";return(o+c+n+r).trim()}var o=this,c=e.getPropertyFromObj(i);o.id=c("id"),o.address_line=c("address_line"),o.locality=c("locality"),o.district=c("district"),o.postal_code=c("postal_code"),o.country=c("country"),o.country_code=c("country_code"),o.coordinates=c("coordinates"),o.formattedAddress=t()}function t(e){return new i(e)}return{getLocationModel:t}}i.$inject=["cgUtilService"],e.module("civic-graph.api").factory("locationService",i)}(angular);
!function(e){"use strict";function n(){return{Government:!0,"For-Profit":!0,"Non-Profit":!0,Individual:!0}}function o(){return["Local","National","Global"]}function t(e,t,i,p,r,a,c){function l(e){function n(){var e=new l(o);return e.locations.pop(),e.locations.pop(),e.grants_received.pop(),e.grants_received.pop(),e.grants_given.pop(),e.grants_given.pop(),e.investments_received.pop(),e.investments_received.pop(),e.investments_made.pop(),e.investments_made.pop(),e.data_given.pop(),e.data_given.pop(),e.data_received.pop(),e.data_received.pop(),e.collaborations.pop(),e.collaborations.pop(),e.key_people.pop(),e.key_people.pop(),e.employments.pop(),e.employments.pop(),e.revenues.pop(),e.revenues.pop(),e.expenses.pop(),e.expenses.pop(),e.categories.pop(),e.categories.pop(),e.description="",e}var o=this,d=c.isDefined(e)?e:{},s=c.getPropertyFromObj(e);o.id=s("id"),o.name=s("name"),o.influence=s("influence"),o.type=s("type"),o.nickname=s("nickname"),o.url=s("url"),o.twitter_handle=s("twitter_handle"),o.employees=s("employees"),o.locations=c.loopAndInit(d.locations,r.getLocationModel),o.grants_received=c.loopAndInit(d.grants_received,t.getFundingConnectionModel),o.investments_received=c.loopAndInit(d.investments_received,t.getFundingConnectionModel),o.grants_given=c.loopAndInit(d.grants_given,t.getFundingConnectionModel),o.investments_made=c.loopAndInit(d.investments_made,t.getFundingConnectionModel),o.data_given=c.loopAndInit(d.data_given,i.getConnectionModel),o.data_received=c.loopAndInit(d.data_received,i.getConnectionModel),o.collaborations=c.loopAndInit(d.collaborations,i.getConnectionModel),o.key_people=c.loopAndInit(d.key_people,i.getConnectionModel),o.employments=c.loopAndInit(d.employments,i.getConnectionModel),o.revenues=c.loopAndInit(d.revenues,p.getFinanceModel),o.expenses=c.loopAndInit(d.expenses,p.getFinanceModel),o.categories=c.loopAndInit(d.categories,a.getCategoryModel),o.generateDBModel=n}function d(e){return new l(e)}function s(){return e.get("/entities")}function g(n){return e.post("/save",{entity:n})}return{getEntityModel:d,getEntityTypes:n,getInfluenceTypes:o,getAll:s,saveEntity:g}}t.$inject=["cgApiCaller","fundingConnectionService","connectionService","financeService","locationService","categoryService","cgUtilService"],e.module("civic-graph.api").factory("entityService",t)}(angular);
!function(e){"use strict";function o(e,o,n,t,i){function c(){a.changeView(a.toggleNetwork?"Network":"Map")}var a=this;a.entityTypes=e.getEntityTypes(),a.connectionTypes=o.getConnectionTypes(),a.sizeByList=[{name:"Employees",value:"employees"},{name:"Twitter Followers",value:"followers"}],a.sizeBy="employees",a.showView={Network:!0,Map:!1},a.switchView=c,a.changeView=function(e){t.forEach(t.keys(a.showView),function(o){a.showView[o]=e===o}),n.$broadcast("viewChange",a.showView)},a.showAbout=function(){i.open({animation:!1,templateUrl:"control/about.html",controller:"modalCtrl"})},a.toggleNode=function(e){n.$broadcast("toggleNode",{name:e,enabled:a.entityTypes[e]})},a.toggleLink=function(e){n.$broadcast("toggleLink",{name:e,enabled:a.connectionTypes[e]})},a.changeSizeBy=function(){n.$broadcast("changeSizeBy",a.sizeBy)},a.changeSizeBy()}var n=["entityService","connectionService","$rootScope","_","$modal",o];e.module("civic-graph").controller("controlCtrl",n)}(angular);
!function(e){"use strict";function n(e,n){e.itemsShownDefault={key_people:3,grants_given:3,grants_received:3,investments_made:3,investments_received:3,collaborations:3,employments:3,relations:3,data_given:3,data_received:3,revenues:3,expenses:3},e.itemsShown=n.clone(e.itemsShownDefault),e.$on("entityChange",function(){e.itemsShown=n.clone(e.itemsShownDefault)}),e.showMore=function(n){e.itemsShown[n]=e.currentEntity[n].length},e.showLess=function(n){e.itemsShown[n]=e.itemsShownDefault[n]}}e.module("civic-graph").controller("detailsCtrl",["$scope","_",n])}(angular);
!function(t){"use strict";function e(t){t.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}e.$inject=["$httpProvider"],t.module("civic-graph.api").config(e)}(angular);
!function(t){"use strict";function r(t,r){function a(t){return console.error("Recieved an error from API with this message: %O",t.data),r.reject(t)}function i(t){return t.data}function c(r,c){return t.get(e+r,{params:c,headers:n}).then(i,a)}function o(r,c){return t.post(e+r,c,{headers:n}).then(i,a)}return{get:c,post:o}}var e="https://api.civicgraph.io/api",n={};r.$inject=["$http","$q"],t.module("civic-graph.api").factory("cgApiCaller",r)}(angular);
!function(t,e,n){"use strict";function i(t,i,o,r,a){t.options={center:{lat:20,lng:-40,zoom:3},defaults:{tileLayer:"https://api.tiles.mapbox.com/v4/mapbox.light/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZGF2aWRscm50IiwiYSI6IjA0M2RkNzMzZWJmNzEzNGYzMTdhYTExYzAyZmU4ZTE1In0.TNYlFta2VItrkn4L0Z9BJQ",tileLayerOptions:{detectRetina:!0,reuseTiles:!1},zoomControl:!1,attributionControl:!1}},i(function(){var i=function(t){var n=t.data,i=e.layout.pie().sort(null).value(function(t){return t.value}),o=e.svg.arc().outerRadius(t.r).innerRadius(t.r-10),r=t.r+t.strokeWidth,a=2*r,c=a,l=document.createElementNS(e.ns.prefix.svg,"svg"),s=e.select(l).data(n).attr("class","piechart").attr("width",a).attr("height",c),d=s.selectAll(".arc").data(i(n)).enter().append("g").attr("class","arc").attr("transform","translate("+r+","+r+")");return d.append("path").attr("d",o).attr("class",function(t){return t.data.type+"-arc"}),d.append("svg:text").text(function(e,n){if(0===n)return t.count}).attr("x",-4*t.count.toString().length).attr("dy",5).attr("class","arcText"),window.XMLSerializer?(new window.XMLSerializer).serializeToString(l):l.xml?l.xml:""};o.getMap().then(function(e){function o(t){var e=t.getAllChildMarkers(),o=e.length,a=r.pluck(e,"options"),c=r.map(r.countBy(a,"type"),function(t,e){return{type:e,value:t}}),l=28,s=1,d=2*(l+s),u=i({data:c,r:l,strokeWidth:s,count:o});return new n.DivIcon({html:u,className:"marker-cluster",iconSize:new n.point(d,d)})}function a(t){function e(e){if(r.every(e.coordinates)){"40.78200"===e.coordinates[0].toFixed(5)&&"-73.83170"===e.coordinates[1].toFixed(5)&&(e.coordinates[0]=40.77065,e.coordinates[1]=-73.97406);var i=n.marker(e.coordinates,{icon:s[t.type],title:t.name,entity_id:t.id,message:t.name,type:t.type});d.addLayer(i)}}r.forEach(t.locations,e)}function c(t){console.error(t.message+"  %O",t)}var l=t.entities;e.invalidateSize(),new n.Control.Zoom({position:"topright"}).addTo(e),n.control.locate({position:"topright",showPopup:!1,icon:"fa fa-location-arrow"}).addTo(e);var s={"Non-Profit":n.icon({iconUrl:"img/marker-nonprof.svg",iconSize:[60,60]}),"For-Profit":n.icon({iconUrl:"img/marker-prof.svg",iconSize:[60,60]}),Individual:n.icon({iconUrl:"img/marker-ind.svg",iconSize:[60,60]}),Government:n.icon({iconUrl:"img/marker-gov.svg",iconSize:[60,60]})},d=n.markerClusterGroup({spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,iconCreateFunction:o,maxClusterRadius:30,spiderfyDistanceMultiplier:1.3});console.log("Original: %O",t.entities),console.log("Filtered: %O",l),r.forEach(l,a),e.addLayer(d),e.on("locationerror",c),d.on("click",function(e){t.setEntityID(e.layer.options.entity_id),t.clickedEntity.entity=t.currentEntity,t.actions.interacted=!0,t.settingsEnabled&&t.mobile&&t.toggleSettings(),t.safeApply()}),e.on("click",function(){t.clickedEntity.entity=null,t.actions.interacted=!0,t.safeApply()}),t.$on("selectItem",function(){var n=t.currentEntity.locations.length>0?r.pluck(t.currentEntity.locations,"coordinates"):null;n.length>0&&e.setView(n[0],11),t.actions.interacted=!0,t.safeApply()})})})}var o=["$scope","$timeout","leafletData","_","$filter",i];t.module("civic-graph").controller("mapCtrl",o)}(angular,d3,L);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNpdmljLWdyYXBoLm1vZHVsZS5qcyIsImFuYWx5dGljL2FuYWx5dGljc0RpcmVjdGl2ZS5qcyIsImFwaS9jYXRlZ29yeS5zZXJ2aWNlLmpzIiwiYXBpL2Nvbm5lY3Rpb24uc2VydmljZS5qcyIsImFwaS9maW5hbmNlLnNlcnZpY2UuanMiLCJhcGkvZnVuZGluZ0Nvbm5lY3Rpb24uc2VydmljZS5qcyIsImNvbnRyb2wvY29udHJvbERpcmVjdGl2ZS5qcyIsImVkaXQtZW50aXR5L2VkaXRDdHJsLmpzIiwiZWRpdC1lbnRpdHkvZWRpdEVudGl0eURpcmVjdGl2ZS5qcyIsIm1haW4vYXBwLmpzIiwibWFpbi9ob21lQ3RybC5qcyIsIm1hcC9tYXBEaXJlY3RpdmUuanMiLCJleHRyYS9hZGRNb2JpbGVFdmVudHMuanMiLCJleHRyYS9tb2RhbEN0cmwuanMiLCJvdmVydmlldy9vdmVydmlld0N0cmwuanMiLCJuZXR3b3JrL25ldHdvcmtDdHJsLmpzIiwibmV0d29yay9uZXR3b3JrRGlyZWN0aXZlLmpzIiwibmV0d29yay9zbGlkZXJCYXIuanMiLCJ1dGlsL3NlcnZpY2UuanMiLCJhbmFseXRpYy9jb250cm9sbGVyL2FuYWx5dGljc0N0cmwuanMiLCJhcGkvZW50aXR5L2xvY2F0aW9uLnNlcnZpY2UuanMiLCJhcGkvZW50aXR5L3NlcnZpY2UuanMiLCJjb250cm9sL2NvbnRyb2xsZXIvY29udHJvbEN0cmwuanMiLCJkZXRhaWwvY29udHJvbGxlci9kZXRhaWxzQ3RybC5qcyIsImFwaS9hcGlDYWxsZXIvY29uZmlnLmpzIiwiYXBpL2FwaUNhbGxlci9zZXJ2aWNlLmpzIiwibWFwL2NvbnRyb2xsZXIvbWFwQ3RybC5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibWFpbkRlcGVuZGVuY3lMaXN0IiwiYXBpRGVwZW5kZW5jeUxpc3QiLCJtb2R1bGUiLCJhbmFseXRpY3NEaXJlY3RpdmUiLCJ0ZW1wbGF0ZVVybCIsInJlc3RyaWN0Iiwic2NvcGUiLCJjb250cm9sbGVyIiwiYW5hbHl0aWNzRGVwZW5kZW5jaWVzIiwiZGlyZWN0aXZlIiwiU2VydmljZSIsImFwaUNhbGxlciIsInV0aWxzIiwiQ2F0ZWdvcnkiLCJvYmoiLCJnZXRQcm9wZXJ0eSIsImdldFByb3BlcnR5RnJvbU9iaiIsInRoaXMiLCJpZCIsIm5hbWUiLCJlbmFibGVkIiwiZ2V0Q2F0ZWdvcnlNb2RlbCIsImdldEFsbCIsImdldCIsIiRpbmplY3QiLCJmYWN0b3J5IiwiZ2V0Q29ubmVjdGlvblR5cGVzIiwiRnVuZGluZyIsIkRhdGEiLCJFbXBsb3ltZW50IiwiQ29sbGFib3JhdGlvbiIsIkNvbm5lY3Rpb24iLCJkZXRhaWxzIiwiZW50aXR5IiwiZW50aXR5X2lkIiwiZ2V0Q29ubmVjdGlvbk1vZGVsIiwidXJsIiwiRmluYW5jZSIsInllYXIiLCJhbW91bnQiLCJnZXRGaW5hbmNlTW9kZWwiLCJGdW5kaW5nQ29ubmVjdGlvbiIsImdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwiLCJjb250cm9sRGlyZWN0aXZlIiwidG9nZ2xlTmV0d29yayIsImNvbnRyb2xsZXJBcyIsImJpbmRUb0NvbnRyb2xsZXIiLCJtaW5Db25uZWN0aW9ucyIsImNvbnRyb2xEZXBlbmRlbmNpZXMiLCJDb250cm9sbGVyIiwiJHNjb3BlIiwiJGh0dHAiLCIkdGltZW91dCIsIl8iLCJlbnRpdHlTZXJ2aWNlIiwiY2F0ZWdvcnlTZXJ2aWNlIiwibG9jYXRpb25TZXJ2aWNlIiwiaW5pdENhdGVnb3J5QXJyYXkiLCJjYXRlZ29yeSIsImNhdGVnb3J5SW5kZXgiLCJlbnRpdHlDYXRlZ29yeUluZGV4IiwiZW50aXR5Q2F0ZWdvcnkiLCJjYXRlZ29yaWVzIiwiaGFzT3duUHJvcGVydHkiLCJlZGl0RW50aXR5IiwiaXNFZGl0aW5nIiwiZ2V0RW50aXR5TW9kZWwiLCJlbnRpdHlUeXBlcyIsImdldEVudGl0eVR5cGVzIiwiaW5mbHVlbmNlVHlwZXMiLCJnZXRJbmZsdWVuY2VUeXBlcyIsImNhdGVnb3J5QmFja3VwIiwiYWRkcmVzc1NlYXJjaCIsInNlYXJjaCIsImpzb25wIiwicGFyYW1zIiwicXVlcnkiLCJrZXkiLCJpbmNsdWRlIiwidGhlbiIsInJlc3BvbnNlIiwiaXNEZWZpbmVkIiwiZGF0YSIsInJlc291cmNlU2V0cyIsImxlbmd0aCIsInJlc291cmNlcyIsInRvZ2dsZUNhdGVnb3J5IiwicHVzaCIsImZvdW5kIiwic2V0TG9jYXRpb24iLCJsb2NhdGlvbiIsImlzTGFzdCIsImZvcm1hdHRlZEFkZHJlc3MiLCJhcGlDYWxsUmVzdWx0IiwicmVzdWx0IiwiYWRkcmVzcyIsInBvaW50IiwiYWRkTG9jYXRpb24iLCJhZGRyZXNzX2xpbmUiLCJhZGRyZXNzTGluZSIsImxvY2FsaXR5IiwiZGlzdHJpY3QiLCJhZG1pbkRpc3RyaWN0IiwiY291bnRyeSIsImNvdW50cnlSZWdpb24iLCJjb3VudHJ5X2NvZGUiLCJjb3VudHJ5UmVnaW9uSXNvMiIsImNvb3JkaW5hdGVzIiwicG9zdGFsX2NvZGUiLCJwb3N0YWxDb2RlIiwibG9jYXRpb25zIiwiZ2V0TG9jYXRpb25Nb2RlbCIsImFkZEtleVBlcnNvbiIsInNvbWUiLCJrZXlfcGVvcGxlIiwic2V0RnVuZGluZ0Nvbm5lY3Rpb24iLCJmdW5kaW5nIiwiYWRkRnVuZGluZ0Nvbm5lY3Rpb24iLCJzZXRDb25uZWN0aW9uIiwiY29ubmVjdGlvbiIsImFkZENvbm5lY3Rpb24iLCJjb25uZWN0aW9ucyIsImFkZEZpbmFuY2UiLCJyZWNvcmRzIiwiZXZlcnkiLCJyIiwic2F2ZSIsInN1Y2Nlc3MiLCJpc1NhdmluZyIsIiRlbWl0IiwiY2FuY2VsRWRpdCIsImVycm9yIiwiaXNFcnJvciIsInNhdmVFbnRpdHkiLCJnZW5lcmF0ZURCTW9kZWwiLCJpc09wZW4iLCIkd2F0Y2giLCJuZXdWYWwiLCJvbGRWYWwiLCJlcXVhbHMiLCJjb3B5IiwiZWRpdEVudGl0eURpcmVjdGl2ZSIsImVudGl0aWVzIiwiZWRpdEVudGl0eURlcGVuZGVuY2llcyIsImNvbnN0YW50Iiwid2luZG93IiwiY29uZmlnIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCIkY29tcGlsZVByb3ZpZGVyIiwiaHRtbDVNb2RlIiwiZGVidWdJbmZvRW5hYmxlZCIsImZpbHRlciIsImlucHV0IiwiZGVjaW1hbHMiLCJleHAiLCJzdWZmaXhlcyIsImlzTmFOIiwiTWF0aCIsImZsb29yIiwibG9nIiwicG93IiwidG9GaXhlZCIsImhvbWVDdHJsIiwiY29ubmVjdGlvblNlcnZpY2UiLCJ3YXRjaE1pbkNvbm5lY3Rpb24iLCIkYnJvYWRjYXN0Iiwic2VhcmNoSXRlbXMiLCJjdXJyZW50TG9jYXRpb24iLCJjbGlja2VkTG9jYXRpb24iLCJjbGlja2VkRW50aXR5IiwiZWRpdGluZyIsImFjdGlvbnMiLCJpbnRlcmFjdGVkIiwic2hvd3NlYXJjaE1CIiwic2hvd0FuYWx5dGljcyIsImNvbm5lY3Rpb25UeXBlcyIsInN0YXR1cyIsImlzTmV0d29ya1Nob3duIiwibGljZW5zZSIsIm5ldHdvcmtMb2FkaW5nIiwidG9nZ2xlQW5hbHl0aWNzIiwic2VsZiIsImNvbm5lY3Rpb25DaGFuZ2UiLCJjb25zb2xlIiwiaHlkZVBhcnRpYWxzIiwiZXhjZXB0Iiwic2V0dGluZ3NFbmFibGVkIiwic2hvd1NlYXJjaCIsInRvZ2dsZVNldHRpbmdzIiwic3RhcnRFZGl0IiwiY3VycmVudEVudGl0eSIsIm1vYmlsZSIsInN3aXRjaFZpZXciLCJtb2JpbGVjaGVjayIsImNoZWNrIiwicmVnZXgiLCJyZWdleDIiLCJhIiwidGVzdCIsInN1YnN0ciIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInZlbmRvciIsIm9wZXJhIiwibm9kZXMiLCJ1bmlxIiwicGx1Y2siLCJmbGF0dGVuIiwiZW50aXRpZXNCeUxvY2F0aW9uIiwibWFwIiwibG9jIiwiZmluZGluZ3MiLCJmbG93IiwicHJvcGVydHkiLCJwYXJ0aWFsUmlnaHQiLCJhbnkiLCJ0eXBlIiwiZGljdCIsInppcE9iamVjdCIsImNvbmNhdCIsIm92ZXJ2aWV3VXJsIiwic2V0RW50aXR5Iiwic3RvcEVkaXQiLCJzZXRFbnRpdHlJRCIsImZpbmQiLCJzZWxlY3RJdGVtIiwiaXRlbSIsIiRvbiIsImV2ZW50IiwiYXJncyIsInZhbHVlIiwic2V0RW50aXRpZXMiLCJhbmltYXRpb25zRW5hYmxlZCIsImhvbWVEZXBlbmRlbmNpZXMiLCJkZXBlbmRlbmNpZXMiLCIkIiwibGlua0Z1bmN0aW9uIiwic2Nyb2xsIiwiY3NzIiwiY2xpY2siLCJpbm5lckhlaWdodCIsInBhcnNlSW50IiwiZGV0YWlsc1BhbmVsIiwic2Nyb2xsVG9wIiwiYWRkTW9iaWxlRXZlbnRzIiwibGluayIsIm1vZGFsQ3RybCIsIiRtb2RhbEluc3RhbmNlIiwiY2xvc2VXaW5kb3ciLCJjbG9zZSIsIm92ZXJ2aWV3Q3RybCIsImNhdGVnb3JpemVkRW50aXRpZXMiLCJmb3JFYWNoIiwia2V5cyIsIiRmaWx0ZXIiLCJzdGFydExvYWQiLCJmaWx0ZXJlZEVudGl0aWVzIiwiY29sbGFib3JhdGlvbnMiLCJmaWx0ZXJlZENvbm5lY3Rpb25zIiwic291cmNlTm9kZSIsInNvdXJjZSIsInRhcmdldE5vZGUiLCJ0YXJnZXQiLCJ0b3A1IiwidGFrZVJpZ2h0Iiwic29ydEJ5Iiwid2VsbGNvbm5lY3RlZCIsImUiLCJkcmF3TmV0d29yayIsImlzTG9hZGluZyIsInNhZmVBcHBseSIsImZuIiwicGhhc2UiLCIkcm9vdCIsIiQkcGhhc2UiLCIkYXBwbHkiLCJ2aWV3T2JqIiwiZW50aXR5QXJyYXkiLCJjb25uZWN0aW9uQXJyYXkiLCJzdmciLCJkMyIsInNlbGVjdCIsInNlbGVjdEFsbCIsInJlbW92ZSIsImJvdW5kcyIsIm5vZGUiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJoZWlnaHQiLCJ3aWR0aCIsIm9mZnNldFNjYWxlIiwiZGVmYXVsdE5vZGVTaXplIiwib2Zmc2V0cyIsIkluZGl2aWR1YWwiLCJ4IiwieSIsIkZvci1Qcm9maXQiLCJOb24tUHJvZml0IiwiR292ZXJubWVudCIsImxvd2VyQm91bmRSYWRpdXMiLCJ1cHBlckJvdW5kUmFkaXVzIiwibWF4RW1wbG95ZWVzIiwibWF4IiwiZWwiLCJlbXBsb3llZXMiLCJtYXhGb2xsb3dlcnMiLCJmb2xsb3dlcnMiLCJzY2FsZSIsInNxcnQiLCJkb21haW4iLCJyYW5nZSIsImxpbmtzIiwiZm9yY2UiLCJsYXlvdXQiLCJzaXplIiwidmFsdWVzIiwiY2hhcmdlIiwiZCIsImxpbmtTdHJlbmd0aCIsImxpbmtEaXN0YW5jZSIsImVudGVyIiwiYXBwZW5kIiwiYXR0ciIsImNhbGwiLCJkcmFnIiwidGV4dCIsIm5pY2tuYW1lIiwiZ2V0Q29tcHV0ZWRUZXh0TGVuZ3RoIiwicGFyZW50Tm9kZSIsImdldEJCb3giLCJvbiIsImsiLCJhbHBoYSIsIm1pbiIsInNwZWVkQW5pbWF0ZSIsInRpY2tzIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwicmVuZGVyIiwiaSIsInRpY2siLCJzdGFydCIsImxpbmtlZEJ5SW5kZXgiLCJsIiwiX19kYXRhX18iLCJpbmRleCIsImhvdmVyVGltZXIiLCJuZWlnaGJvcmluZyIsImIiLCJmb2N1c25laWdoYm9ycyIsImNsYXNzZWQiLCJuIiwibyIsImZvY3VzIiwidW5mb2N1cyIsImZpeGVkIiwicmVzdW1lIiwiaG92ZXIiLCJzZXRUaW1lb3V0IiwidW5ob3ZlciIsImNsZWFyVGltZW91dCIsImZvY3VzTG9jYXRpb24iLCJ1bmZvY3VzTG9jYXRpb24iLCJoaWdobGlnaHRMb2NhdGlvbiIsInNob3dMaWNlbnNlIiwic3RvcFByb3BhZ2F0aW9uIiwiYmFja2dyb3VuZGNsaWNrIiwiZGJsY2xpY2siLCJweCIsInB5Iiwic2l6ZUJ5IiwidHJhbnNpdGlvbiIsImR1cmF0aW9uIiwidmFsIiwidmlzaWJsZSIsImhpZGRlbiIsIlJUUCIsInJlc3RpY3QiLCJyZXF1aXJlIiwiZWxlbWVudCIsImF0dHJzIiwibmdNb2RlbCIsInRvTG93ZXJDYXNlIiwiJHBhcnNlcnMiLCJwYXJzZUZsb2F0IiwiaXNPYmplY3QiLCJBcnJheSIsImlzQXJyYXkiLCJkZWZPYmoiLCJkZWZhdWx0VmFsdWUiLCJsb29wQW5kSW5pdCIsIm1vZGVsQXJyYXkiLCJpbml0TW9kZWxGdW5jdGlvbiIsIm5ld0FycmF5IiwiYW5hbHl0aWNzQ3RybCIsIkxvY2F0aW9uIiwiYnVpbGRGb3JtYXR0ZWRBZGRyZXNzIiwiY291bnRyeUNvZGUiLCJ0cmltIiwiZnVuQ29ublNlcnZpY2UiLCJjb25uU2VydmljZSIsImZpbmFuY2VTZXJ2aWNlIiwiRW50aXR5IiwiZGJNb2RlbCIsInBvcCIsImdyYW50c19yZWNlaXZlZCIsImdyYW50c19naXZlbiIsImludmVzdG1lbnRzX3JlY2VpdmVkIiwiaW52ZXN0bWVudHNfbWFkZSIsImRhdGFfZ2l2ZW4iLCJkYXRhX3JlY2VpdmVkIiwiZW1wbG95bWVudHMiLCJyZXZlbnVlcyIsImV4cGVuc2VzIiwiZGVzY3JpcHRpb24iLCJpbmZsdWVuY2UiLCJ0d2l0dGVyX2hhbmRsZSIsInBvc3QiLCJjb250cm9sQ3RybCIsIiRyb290U2NvcGUiLCIkbW9kYWwiLCJ2bSIsImNoYW5nZVZpZXciLCJzaXplQnlMaXN0Iiwic2hvd1ZpZXciLCJOZXR3b3JrIiwiTWFwIiwidmlldyIsInNob3dBYm91dCIsIm9wZW4iLCJhbmltYXRpb24iLCJ0b2dnbGVOb2RlIiwidG9nZ2xlTGluayIsImNoYW5nZVNpemVCeSIsImNvbnRyb2xEZXBzIiwiZGV0YWlsc0N0cmwiLCJpdGVtc1Nob3duRGVmYXVsdCIsInJlbGF0aW9ucyIsIml0ZW1zU2hvd24iLCJjbG9uZSIsInNob3dNb3JlIiwic2hvd0xlc3MiLCJDb25maWciLCIkaHR0cFByb3ZpZGVyIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiY29tbW9uIiwiJHEiLCJsb2dBcGlFcnJvciIsImVyciIsInJlamVjdCIsInVud3JhcEFuZ3VsYXJIdHRwIiwiYXBpVXJsIiwiZGVmYXVsdEhlYWRlciIsIkwiLCJtYXBDdHJsIiwibGVhZmxldERhdGEiLCJvcHRpb25zIiwiY2VudGVyIiwibGF0IiwibG5nIiwiem9vbSIsInRpbGVMYXllciIsInRpbGVMYXllck9wdGlvbnMiLCJkZXRlY3RSZXRpbmEiLCJyZXVzZVRpbGVzIiwiem9vbUNvbnRyb2wiLCJhdHRyaWJ1dGlvbkNvbnRyb2wiLCJjcmVhdGVQaWVDaGFydCIsInBpZSIsInNvcnQiLCJhcmMiLCJvdXRlclJhZGl1cyIsImlubmVyUmFkaXVzIiwic3Ryb2tlV2lkdGgiLCJ3IiwiaCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwibnMiLCJwcmVmaXgiLCJ2aXMiLCJhcmNzIiwiY291bnQiLCJ0b1N0cmluZyIsIlhNTFNlcmlhbGl6ZXIiLCJzZXJpYWxpemVUb1N0cmluZyIsInhtbCIsImdldE1hcCIsImNsdXN0ZXJJY29uIiwiY2x1c3RlciIsImNoaWxkcmVuIiwiZ2V0QWxsQ2hpbGRNYXJrZXJzIiwidG90YWwiLCJjbHVzdGVyTWFya2VycyIsImNvdW50cyIsImNvdW50QnkiLCJpY29uRGltIiwiaHRtbCIsIkRpdkljb24iLCJjbGFzc05hbWUiLCJpY29uU2l6ZSIsIm91dGVyTG9vcCIsImlubmVyTG9vcCIsIm0iLCJtYXJrZXIiLCJpY29uIiwibWFya2VySWNvbiIsInRpdGxlIiwibWVzc2FnZSIsIm1hcmtlcnMiLCJhZGRMYXllciIsIm9uTG9jYXRpb25FcnJvciIsImxlYWZsZXRFcnJvciIsImludmFsaWRhdGVTaXplIiwiQ29udHJvbCIsIlpvb20iLCJwb3NpdGlvbiIsImFkZFRvIiwiY29udHJvbCIsImxvY2F0ZSIsInNob3dQb3B1cCIsImljb25VcmwiLCJtYXJrZXJDbHVzdGVyR3JvdXAiLCJzcGlkZXJmeU9uTWF4Wm9vbSIsInNob3dDb3ZlcmFnZU9uSG92ZXIiLCJpY29uQ3JlYXRlRnVuY3Rpb24iLCJtYXhDbHVzdGVyUmFkaXVzIiwic3BpZGVyZnlEaXN0YW5jZU11bHRpcGxpZXIiLCJsYXllciIsInNldFZpZXciXSwibWFwcGluZ3MiOiJDQUFBLFNBQVVBLEdBRU4sWUFFQSxJQUFJQyxJQUNBLGVBQ0Esb0JBQ0EsWUFDQSxnQkFDQSxrQkFDQSxvQkFHQUMsR0FBcUIsbUJBRXpCRixHQUFRRyxPQUFPLHVCQUNmSCxFQUFRRyxPQUFPLGtCQUFtQkQsR0FDbENGLEVBQVFH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R0FBSXhILEdBQWN6RCxFQUFPNEksY0FBY2hGLFVBQVUxQixPQUFTLEVBQUkvQixFQUFFeUosTUFDNUQ1SixFQUFPNEksY0FBY2hGLFVBQVcsZUFBaUIsSUFDakRILEdBQVl2QixPQUFTLEdBQ3JCNkgsRUFBSStULFFBQVFyYSxFQUFZLEdBQUksSUFFaEN6RCxFQUFPeUgsUUFBUUMsWUFBYSxFQUM1QjFILEVBQU80TixrQkE3THZCLEdBQUlwQyxJQUNBLFNBQ0EsV0FDQSxjQUNBLElBQ0EsVUFDQTJOLEVBNkxKdGMsR0FBUUcsT0FBTyxlQUVWSyxXQUFXLFVBQVdtTyxJQUM1QjNPLFFBQVN5UixHQUFJNEsiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbihhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgbWFpbkRlcGVuZGVuY3lMaXN0ID0gW1xuICAgICAgICBcInVpLmJvb3RzdHJhcFwiLFxuICAgICAgICBcImxlYWZsZXQtZGlyZWN0aXZlXCIsXG4gICAgICAgIFwibmdBbmltYXRlXCIsXG4gICAgICAgIFwidGVtcGxhdGVDYWNoZVwiLFxuICAgICAgICBcImNpdmljLWdyYXBoLmFwaVwiLFxuICAgICAgICBcImNpdmljLWdyYXBoLnV0aWxcIlxuICAgIF07XG5cbiAgICB2YXIgYXBpRGVwZW5kZW5jeUxpc3QgPSBbXCJjaXZpYy1ncmFwaC51dGlsXCJdO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJjaXZpYy1ncmFwaC51dGlsXCIsIFtdKTtcbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiLCBhcGlEZXBlbmRlbmN5TGlzdCk7XG4gICAgYW5ndWxhci5tb2R1bGUoXCJjaXZpYy1ncmFwaFwiLCBtYWluRGVwZW5kZW5jeUxpc3QpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNy8xLzE2LlxuICovXG5cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgYW5hbHl0aWNzRGVwZW5kZW5jaWVzID0gW2FuYWx5dGljc0RpcmVjdGl2ZV07XG5cbiAgICBmdW5jdGlvbiBhbmFseXRpY3NEaXJlY3RpdmUoKXtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnanMvYW5hbHl0aWMvYW5hbHl0aWNzLmh0bWwnLFxuICAgICAgICAgICAgcmVzdHJpY3QgICA6ICdFJyxcbiAgICAgICAgICAgIHNjb3BlICAgICAgOiB7fSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgICA6ICdhbmFseXRpY3NDdHJsJ1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2FuYWx5dGljcycsIGFuYWx5dGljc0RlcGVuZGVuY2llcyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI4LzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBTZXJ2aWNlKGFwaUNhbGxlciwgdXRpbHMpIHtcblxuICAgICAgICBmdW5jdGlvbiBDYXRlZ29yeShvYmopIHtcbiAgICAgICAgICAgIHZhciBnZXRQcm9wZXJ0eSA9IHV0aWxzLmdldFByb3BlcnR5RnJvbU9iaihvYmopO1xuXG4gICAgICAgICAgICB0aGlzLmlkID0gZ2V0UHJvcGVydHkoXCJpZFwiKTtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IGdldFByb3BlcnR5KFwibmFtZVwiKTtcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlZCA9IGdldFByb3BlcnR5KFwiZW5hYmxlXCIsIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Q2F0ZWdvcnlNb2RlbChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2F0ZWdvcnkob2JqKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEFsbCgpIHtcbiAgICAgICAgICAgIHJldHVybiBhcGlDYWxsZXIuZ2V0KFwiL2NhdGVnb3JpZXNcIik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJnZXRDYXRlZ29yeU1vZGVsXCI6IGdldENhdGVnb3J5TW9kZWwsXG4gICAgICAgICAgICBcImdldEFsbFwiOiBnZXRBbGxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBTZXJ2aWNlLiRpbmplY3QgPSBbXCJjZ0FwaUNhbGxlclwiLCBcImNnVXRpbFNlcnZpY2VcIl07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIilcbiAgICAgICAgLmZhY3RvcnkoXCJjYXRlZ29yeVNlcnZpY2VcIiwgU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxuICovXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIHVybCA9IFwiL2Nvbm5lY3Rpb25zXCI7XG5cbiAgICBmdW5jdGlvbiBnZXRDb25uZWN0aW9uVHlwZXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcIkZ1bmRpbmdcIjogdHJ1ZSxcbiAgICAgICAgICAgIFwiRGF0YVwiOiB0cnVlLFxuICAgICAgICAgICAgXCJFbXBsb3ltZW50XCI6IHRydWUsXG4gICAgICAgICAgICBcIkNvbGxhYm9yYXRpb25cIjogdHJ1ZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFNlcnZpY2UoYXBpQ2FsbGVyLCB1dGlscykge1xuXG4gICAgICAgIGZ1bmN0aW9uIENvbm5lY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICB2YXIgZ2V0UHJvcGVydHkgPSB1dGlscy5nZXRQcm9wZXJ0eUZyb21PYmoob2JqKTtcblxuICAgICAgICAgICAgdGhpcy5pZCA9IGdldFByb3BlcnR5KFwiaWRcIik7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBnZXRQcm9wZXJ0eShcIm5hbWVcIik7XG4gICAgICAgICAgICB0aGlzLmRldGFpbHMgPSBnZXRQcm9wZXJ0eShcImRldGFpbHNcIik7XG4gICAgICAgICAgICB0aGlzLmVudGl0eSA9IGdldFByb3BlcnR5KFwiZW50aXR5XCIpO1xuICAgICAgICAgICAgdGhpcy5lbnRpdHlfaWQgPSBnZXRQcm9wZXJ0eShcImVudGl0eV9pZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldENvbm5lY3Rpb25Nb2RlbChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ29ubmVjdGlvbihvYmopO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0QWxsKCkge1xuICAgICAgICAgICAgcmV0dXJuIGFwaUNhbGxlci5nZXQodXJsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcImdldEFsbFwiOiBnZXRBbGwsXG4gICAgICAgICAgICBcImdldENvbm5lY3Rpb25UeXBlc1wiOiBnZXRDb25uZWN0aW9uVHlwZXMsXG4gICAgICAgICAgICBcImdldENvbm5lY3Rpb25Nb2RlbFwiOiBnZXRDb25uZWN0aW9uTW9kZWxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBTZXJ2aWNlLiRpbmplY3QgPSBbXCJjZ0FwaUNhbGxlclwiLCBcImNnVXRpbFNlcnZpY2VcIl07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIilcbiAgICAgICAgLmZhY3RvcnkoXCJjb25uZWN0aW9uU2VydmljZVwiLCBTZXJ2aWNlKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjcvMTYuXG4gKi9cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBTZXJ2aWNlKHV0aWxzKSB7XG4gICAgICAgIGZ1bmN0aW9uIEZpbmFuY2Uob2JqKSB7XG4gICAgICAgICAgICB2YXIgZ2V0UHJvcGVydHkgPSB1dGlscy5nZXRQcm9wZXJ0eUZyb21PYmoob2JqKTtcblxuICAgICAgICAgICAgdGhpcy5pZCA9IGdldFByb3BlcnR5KFwiaWRcIik7XG4gICAgICAgICAgICB0aGlzLnllYXIgPSBnZXRQcm9wZXJ0eShcInllYXJcIik7XG4gICAgICAgICAgICB0aGlzLmFtb3VudCA9IGdldFByb3BlcnR5KFwiYW1vdW50XCIsIDApO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RmluYW5jZU1vZGVsKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBGaW5hbmNlKG9iaik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJnZXRGaW5hbmNlTW9kZWxcIjogZ2V0RmluYW5jZU1vZGVsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgU2VydmljZS4kaW5qZWN0ID0gW1wiY2dVdGlsU2VydmljZVwiXTtcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKVxuICAgICAgICAuZmFjdG9yeShcImZpbmFuY2VTZXJ2aWNlXCIsIFNlcnZpY2UpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNy8xNi5cbiAqL1xuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIFNlcnZpY2UodXRpbHMpIHtcblxuICAgICAgICBmdW5jdGlvbiBGdW5kaW5nQ29ubmVjdGlvbihvYmopIHtcbiAgICAgICAgICAgIHZhciBnZXRQcm9wZXJ0eSA9IHV0aWxzLmdldFByb3BlcnR5RnJvbU9iaihvYmopO1xuXG4gICAgICAgICAgICB0aGlzLmlkID0gZ2V0UHJvcGVydHkoXCJpZFwiKTtcbiAgICAgICAgICAgIHRoaXMueWVhciA9IGdldFByb3BlcnR5KFwieWVhclwiKTtcbiAgICAgICAgICAgIHRoaXMuYW1vdW50ID0gZ2V0UHJvcGVydHkoXCJhbW91bnRcIik7XG4gICAgICAgICAgICB0aGlzLmVudGl0eSA9IGdldFByb3BlcnR5KFwiZW50aXR5XCIsIFwiXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRnVuZGluZ0Nvbm5lY3Rpb24ob2JqKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcImdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWxcIjogZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIFNlcnZpY2UuJGluamVjdCA9IFtcImNnVXRpbFNlcnZpY2VcIl07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIilcbiAgICAgICAgLmZhY3RvcnkoXCJmdW5kaW5nQ29ubmVjdGlvblNlcnZpY2VcIiwgU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA3LzEwLzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGNvbnRyb2xEZXBlbmRlbmNpZXMgPSBbY29udHJvbERpcmVjdGl2ZV07XG5cbiAgICBmdW5jdGlvbiBjb250cm9sRGlyZWN0aXZlKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdqcy9jb250cm9sL2NvbnRyb2xzLmh0bWwnLFxuICAgICAgICAgICAgcmVzdHJpY3QgICA6ICdFJyxcbiAgICAgICAgICAgIHNjb3BlICAgICAgOiB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlTmV0d29yayA6ICc9JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb250cm9sbGVyICAgOiAnY29udHJvbEN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzIDogJ2NvbnRyb2wnLFxuICAgICAgICAgICAgYmluZFRvQ29udHJvbGxlciA6IHtcbiAgICAgICAgICAgICAgICBtaW5Db25uZWN0aW9ucyA6IFwiPVwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnY29udHJvbCcsIGNvbnRyb2xEZXBlbmRlbmNpZXMpO1xuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBDb250cm9sbGVyKCRzY29wZSwgJGh0dHAsICR0aW1lb3V0LCBfLCBlbnRpdHlTZXJ2aWNlLCBjYXRlZ29yeVNlcnZpY2UsIGxvY2F0aW9uU2VydmljZSwgdXRpbHMpIHtcbiAgICAgICAgJHNjb3BlLmlzRWRpdGluZyA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUuZWRpdEVudGl0eSA9IGVudGl0eVNlcnZpY2UuZ2V0RW50aXR5TW9kZWwoJHNjb3BlLmVudGl0eSk7XG4gICAgICAgICRzY29wZS5lbnRpdHlUeXBlcyA9IGVudGl0eVNlcnZpY2UuZ2V0RW50aXR5VHlwZXMoKTtcbiAgICAgICAgJHNjb3BlLmluZmx1ZW5jZVR5cGVzID0gZW50aXR5U2VydmljZS5nZXRJbmZsdWVuY2VUeXBlcygpO1xuXG4gICAgICAgIHZhciBjYXRlZ29yeUJhY2t1cDtcblxuICAgICAgICAkc2NvcGUuY2F0ZWdvcmllcyA9IFtdO1xuXG4gICAgICAgICRzY29wZS5hZGRyZXNzU2VhcmNoID0gZnVuY3Rpb24gKHNlYXJjaCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmpzb25wKCdodHRwczovL2Rldi52aXJ0dWFsZWFydGgubmV0L1JFU1QvdjEvTG9jYXRpb25zJywge1xuICAgICAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICBxdWVyeTogc2VhcmNoLFxuICAgICAgICAgICAgICAgICAgICBrZXk6ICdBaTU4NTgxeUMtU3I3bWNGYllUdFVrUzNpeEU3ZjZadUpuYkZKQ1ZJNGhBdFcxWG9ERWVaeWlkUXoyZ0xDQ3lEJyxcbiAgICAgICAgICAgICAgICAgICAgJ2pzb25wJzogJ0pTT05fQ0FMTEJBQ0snLFxuICAgICAgICAgICAgICAgICAgICAnaW5jbHVkZSc6ICdjaXNvMidcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodXRpbHMuaXNEZWZpbmVkKHJlc3BvbnNlLmRhdGEucmVzb3VyY2VTZXRzKSAmJiByZXNwb25zZS5kYXRhLnJlc291cmNlU2V0cy5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEucmVzb3VyY2VTZXRzWzBdLnJlc291cmNlcztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS50b2dnbGVDYXRlZ29yeSA9IGZ1bmN0aW9uIChjYXRlZ29yeSkge1xuICAgICAgICAgICAgaWYgKCRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcy5wdXNoKGNhdGVnb3J5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgY2F0ZWdvcnlJbmRleCBpbiAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcy5oYXNPd25Qcm9wZXJ0eShjYXRlZ29yeUluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGVudGl0eUNhdGVnb3J5ID0gJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllc1tjYXRlZ29yeUluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVudGl0eUNhdGVnb3J5LmlkID09PSBjYXRlZ29yeS5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5Q2F0ZWdvcnkuZW5hYmxlZCA9IGNhdGVnb3J5LmVuYWJsZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMucHVzaChjYXRlZ29yeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZXRMb2NhdGlvbiA9IGZ1bmN0aW9uIChsb2NhdGlvbiwgaXNMYXN0KSB7XG4gICAgICAgICAgICAkc2NvcGUuYWRkcmVzc1NlYXJjaChsb2NhdGlvbi5mb3JtYXR0ZWRBZGRyZXNzKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChhcGlDYWxsUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKCF1dGlscy5pc0RlZmluZWQoYXBpQ2FsbFJlc3VsdFswXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gYXBpQ2FsbFJlc3VsdFswXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgPSByZXN1bHQuYWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50ID0gcmVzdWx0LnBvaW50O1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkTG9jYXRpb24oaXNMYXN0KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBQYXJzZXMgQVBJIGNhbGwgcmVzdWx0XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmFkZHJlc3NfbGluZSA9IHV0aWxzLmlzRGVmaW5lZChhZGRyZXNzLmFkZHJlc3NMaW5lKSA/IGFkZHJlc3MuYWRkcmVzc0xpbmUgOiAnJztcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ubG9jYWxpdHkgPSB1dGlscy5pc0RlZmluZWQoYWRkcmVzcy5sb2NhbGl0eSkgPyBhZGRyZXNzLmxvY2FsaXR5IDogJyc7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmRpc3RyaWN0ID1cbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxzLmlzRGVmaW5lZChhZGRyZXNzLmFkbWluRGlzdHJpY3QpID8gYWRkcmVzcy5hZG1pbkRpc3RyaWN0IDogJyc7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmNvdW50cnkgPVxuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMuaXNEZWZpbmVkKGFkZHJlc3MuY291bnRyeVJlZ2lvbikgPyBhZGRyZXNzLmNvdW50cnlSZWdpb24gOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5jb3VudHJ5X2NvZGUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMuaXNEZWZpbmVkKGFkZHJlc3MuY291bnRyeVJlZ2lvbklzbzIpID8gYWRkcmVzcy5jb3VudHJ5UmVnaW9uSXNvMiA6ICcnO1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5jb29yZGluYXRlcyA9IHV0aWxzLmlzRGVmaW5lZChwb2ludC5jb29yZGluYXRlcykgPyBwb2ludC5jb29yZGluYXRlcyA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnBvc3RhbF9jb2RlID0gdXRpbHMuaXNEZWZpbmVkKGFkZHJlc3MucG9zdGFsQ29kZSkgPyBhZGRyZXNzLnBvc3RhbENvZGUgOiBudWxsO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5hZGRMb2NhdGlvbiA9IGZ1bmN0aW9uIChpc0xhc3QpIHtcbiAgICAgICAgICAgIGlmIChpc0xhc3QpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdEVudGl0eS5sb2NhdGlvbnMucHVzaChsb2NhdGlvblNlcnZpY2UuZ2V0TG9jYXRpb25Nb2RlbCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuYWRkS2V5UGVyc29uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gQWRkIGJsYW5rIGZpZWxkIHRvIGVkaXQgaWYgdGhlcmUgYXJlIG5vbmUuXG4gICAgICAgICAgICAvLyBXQVRDSCBPVVQhIFRPRE86IElmIHNvbWVvbmUgZGVsZXRlcyBhbiBvbGQgcGVyc29uLCBkZWxldGUgdGhlaXIgaWQgdG9vLlxuICAgICAgICAgICAgLy8gaS5lLiBtYWtlIHN1cmUgb2xkL2NsZWFyZWQgZm9ybSBmaWVsZHMgYXJlbid0IGJlaW5nIGVkaXRlZCBpbnRvIG5ldyBwZW9wbGUuXG4gICAgICAgICAgICBpZiAoIShfLnNvbWUoJHNjb3BlLmVkaXRFbnRpdHkua2V5X3Blb3BsZSwgeyduYW1lJzogJycsICdpZCc6IG51bGx9KSkpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdEVudGl0eS5rZXlfcGVvcGxlLnB1c2goeyduYW1lJzogJycsICdpZCc6IG51bGx9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2V0RnVuZGluZ0Nvbm5lY3Rpb24gPSBmdW5jdGlvbiAoZW50aXR5LCBmdW5kaW5nKSB7XG4gICAgICAgICAgICAvLyBBZGQgb3RoZXIgZW50aXR5J3MgaWQgdG8gdGhpcyBmaW5hbmNlIGNvbm5lY3Rpb24uXG4gICAgICAgICAgICBmdW5kaW5nLmVudGl0eV9pZCA9IGVudGl0eS5pZDtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuYWRkRnVuZGluZ0Nvbm5lY3Rpb24gPSBmdW5jdGlvbiAoZnVuZGluZykge1xuICAgICAgICAgICAgaWYgKCFfLnNvbWUoZnVuZGluZywgeydlbnRpdHknOiAnJ30pKSB7XG4gICAgICAgICAgICAgICAgLy8gTWF5YmUgc2V0IGFtb3VudCB0byAwIGluc3RlYWQgb2YgbnVsbD9cbiAgICAgICAgICAgICAgICBmdW5kaW5nLnB1c2goeydlbnRpdHknOiAnJywgJ2Ftb3VudCc6IG51bGwsICd5ZWFyJzogbnVsbCwgJ2lkJzogbnVsbH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZXRDb25uZWN0aW9uID0gZnVuY3Rpb24gKGVudGl0eSwgY29ubmVjdGlvbikge1xuICAgICAgICAgICAgY29ubmVjdGlvbi5lbnRpdHlfaWQgPSBlbnRpdHkuaWQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmFkZENvbm5lY3Rpb24gPSBmdW5jdGlvbiAoY29ubmVjdGlvbnMpIHtcbiAgICAgICAgICAgIC8vIEFkZCBhbiBlbXB0eSBjb25uZWN0aW9uIHRvIGVkaXQgaWYgbm9uZSBleGlzdC5cbiAgICAgICAgICAgIGlmICghXy5zb21lKGNvbm5lY3Rpb25zLCB7J2VudGl0eSc6ICcnLCAnaWQnOiBudWxsfSkpIHtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9ucy5wdXNoKHsnZW50aXR5JzogJycsICdpZCc6IG51bGwsICdkZXRhaWxzJzogbnVsbH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5hZGRGaW5hbmNlID0gZnVuY3Rpb24gKHJlY29yZHMpIHtcbiAgICAgICAgICAgIC8vIEFkZCBuZXcgZmluYW5jZSBmaWVsZCBpZiBhbGwgY3VycmVudCBmaWVsZHMgYXJlIHZhbGlkLlxuICAgICAgICAgICAgaWYgKF8uZXZlcnkocmVjb3JkcywgZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIuYW1vdW50ID4gMCAmJiByLnllYXIgPiAxNzUwO1xuICAgICAgICAgICAgICAgIH0pKSB7XG4gICAgICAgICAgICAgICAgcmVjb3Jkcy5wdXNoKHsnYW1vdW50JzogbnVsbCwgJ3llYXInOiBudWxsLCAnaWQnOiBudWxsfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2NvcGUuaXNTYXZpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmlzU2F2aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLiRlbWl0KFwiZWRpdEVudGl0eVN1Y2Nlc3NcIiwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIC8vIENhbGwgdG8gaG9tZUN0cmwncyBwYXJlbnQgc3RvcEVkaXQoKSB0byBjaGFuZ2UgdmlldyBiYWNrIGFuZCBhbnkgb3RoZXJcbiAgICAgICAgICAgICAgICAvLyBoaWdoLWxldmVsIGNoYW5nZXMuXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNhbmNlbEVkaXQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmlzRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmlzRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZW50aXR5U2VydmljZVxuICAgICAgICAgICAgICAgIC5zYXZlRW50aXR5KCRzY29wZS5lZGl0RW50aXR5LmdlbmVyYXRlREJNb2RlbCgpKVxuICAgICAgICAgICAgICAgIC50aGVuKHN1Y2Nlc3MsIGVycm9yKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuY2FuY2VsRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuJHdhdGNoKCdlbnRpdHknLCBmdW5jdGlvbiAobmV3VmFsLCBvbGRWYWwpIHtcbiAgICAgICAgICAgIGlmIChhbmd1bGFyLmVxdWFscyhuZXdWYWwsIG9sZFZhbCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5lZGl0RW50aXR5ID0gZW50aXR5U2VydmljZS5nZXRFbnRpdHlNb2RlbChuZXdWYWwpO1xuICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3JpZXMgPSBhbmd1bGFyLmNvcHkoY2F0ZWdvcnlCYWNrdXApO1xuXG4gICAgICAgICAgICBpbml0Q2F0ZWdvcnlBcnJheSgpO1xuXG4gICAgICAgICAgICAkc2NvcGUuaXNFZGl0aW5nID0gdXRpbHMuaXNEZWZpbmVkKCRzY29wZS5lZGl0RW50aXR5LmlkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXRpYWxpemVzIGNhdGVnb3J5IGZpZWxkcyB3aXRoIGVudGl0eSB2YWx1ZXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIExvb3BzIHRocm91Z2ggY2F0ZWdvcnkgaW4gY2F0ZWdvcmllcyBhbmQgbG9vcHMgdGhyb3VnaCBjYXRlZ29yeSBpbiBlbnRpdHkuIElkZW50aWZpZXNcbiAgICAgICAgICogY2F0ZWdvcmllcyBlbmFibGVkIGluIHRoZSBlbnRpdHkgYW5kIHNldHMgbG9jYWwgZGlzcGxheSBkYXRhLiBUaGlzIGlzIGJlY2F1c2Ugd2UgY3JlYXRlZFxuICAgICAgICAgKiBhIGJhY2t1cCBvZiBlbnRpdHkgZGF0YSBzbyB0aGF0IHRoZSBhcGkgZGF0YSBpcyBub3QgdGFtcGVyZWQgd2l0aCBkaXJlY3RseS5cbiAgICAgICAgICpcbiAgICAgICAgICogVE9ETzogcmVwbGFjZSB3aXRoIGJldHRlciBkYXRhIHN0cnVjdHVyZSBmb3IgY2F0ZWdvcmllcy5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGluaXRDYXRlZ29yeUFycmF5KCkge1xuICAgICAgICAgICAgdmFyIGNhdGVnb3J5LFxuICAgICAgICAgICAgICAgIGNhdGVnb3J5SW5kZXgsXG4gICAgICAgICAgICAgICAgZW50aXR5Q2F0ZWdvcnlJbmRleCxcbiAgICAgICAgICAgICAgICBlbnRpdHlDYXRlZ29yeTtcblxuICAgICAgICAgICAgZm9yIChjYXRlZ29yeUluZGV4IGluICRzY29wZS5jYXRlZ29yaWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuY2F0ZWdvcmllcy5oYXNPd25Qcm9wZXJ0eShjYXRlZ29yeUluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0ZWdvcnkgPSAkc2NvcGUuY2F0ZWdvcmllc1tjYXRlZ29yeUluZGV4XTtcbiAgICAgICAgICAgICAgICBmb3IgKGVudGl0eUNhdGVnb3J5SW5kZXggaW4gJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMuaGFzT3duUHJvcGVydHkoZW50aXR5Q2F0ZWdvcnlJbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eUNhdGVnb3J5ID0gJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllc1tlbnRpdHlDYXRlZ29yeUluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhdGVnb3J5LmlkID09PSBlbnRpdHlDYXRlZ29yeS5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnkuZW5hYmxlZCA9IGVudGl0eUNhdGVnb3J5LmVuYWJsZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXRyaWV2ZSBDYXRlZ29yaWVzIGZyb20gREJcbiAgICAgICAgY2F0ZWdvcnlTZXJ2aWNlXG4gICAgICAgICAgICAuZ2V0QWxsKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgY2F0ZWdvcnlCYWNrdXAgPSBkYXRhLmNhdGVnb3JpZXM7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlcyBiYWNrdXAgb2YgZGF0YSB1c2luZyBBbmd1bGFyIHRvIHByZXZlbnQgYXBpIGRhdGEgZnJvbSBiZWluZyB0YW1wZXJlZFxuICAgICAgICAgICAgICAgIC8vIGRpcmVjdGx5XG4gICAgICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3JpZXMgPSBhbmd1bGFyLmNvcHkoY2F0ZWdvcnlCYWNrdXApO1xuICAgICAgICAgICAgICAgIC8vICRzY29wZS5jYXRlZ29yaWVzID0gZGF0YS5jYXRlZ29yaWVzO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgQ29udHJvbGxlci4kaW5qZWN0ID0gW1xuICAgICAgICBcIiRzY29wZVwiLFxuICAgICAgICBcIiRodHRwXCIsXG4gICAgICAgIFwiJHRpbWVvdXRcIixcbiAgICAgICAgXCJfXCIsXG4gICAgICAgIFwiZW50aXR5U2VydmljZVwiLFxuICAgICAgICBcImNhdGVnb3J5U2VydmljZVwiLFxuICAgICAgICBcImxvY2F0aW9uU2VydmljZVwiLFxuICAgICAgICBcImNnVXRpbFNlcnZpY2VcIlxuICAgIF07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaFwiKVxuICAgICAgICAuY29udHJvbGxlcihcImVkaXRDdHJsXCIsIENvbnRyb2xsZXIpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICpcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjcvMTYuXG4gKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgZWRpdEVudGl0eURlcGVuZGVuY2llcyA9IFtlZGl0RW50aXR5RGlyZWN0aXZlXTtcblxuICAgIGZ1bmN0aW9uIGVkaXRFbnRpdHlEaXJlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2pzL2VkaXQtZW50aXR5L2VkaXQuaHRtbCcsXG4gICAgICAgICAgICByZXN0cmljdCAgIDogJ0UnLFxuICAgICAgICAgICAgc2NvcGUgICAgICA6IHtcbiAgICAgICAgICAgICAgICAnZW50aXR5JyAgOiBcIj1cIixcbiAgICAgICAgICAgICAgICAnZW50aXRpZXMnOiBcIj1cIixcbiAgICAgICAgICAgICAgICAnaXNPcGVuJyAgOiBcIj1cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnZWRpdEN0cmwnXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnZWRpdEVudGl0eScsIGVkaXRFbnRpdHlEZXBlbmRlbmNpZXMpO1xuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnN0YW50KCdfJywgd2luZG93Ll8pXG4gICAgICAgIC5jb25maWcoWyckbG9jYXRpb25Qcm92aWRlcicsICckY29tcGlsZVByb3ZpZGVyJyxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgkbG9jYXRpb25Qcm92aWRlciwgJGNvbXBpbGVQcm92aWRlcikge1xuICAgICAgICAgICAgICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAkY29tcGlsZVByb3ZpZGVyLmRlYnVnSW5mb0VuYWJsZWQodHJ1ZSk7XG4gICAgICAgICAgICB9XSlcbiAgICAgICAgLmZpbHRlcigndGhvdXNhbmRTdWZmaXgnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGlucHV0LCBkZWNpbWFscykge1xuICAgICAgICAgICAgICAgIHZhciBleHAsXG4gICAgICAgICAgICAgICAgICAgIHN1ZmZpeGVzID0gWydrJywgJ00nLCAnRycsICdUJywgJ1AnLCAnRSddO1xuXG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5pc05hTihpbnB1dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGlucHV0IDwgMTAwMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZXhwID0gTWF0aC5mbG9vcihNYXRoLmxvZyhpbnB1dCkgLyBNYXRoLmxvZygxMDAwKSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gKGlucHV0IC8gTWF0aC5wb3coMTAwMCwgZXhwKSkudG9GaXhlZChkZWNpbWFscykgKyBzdWZmaXhlc1tleHAgLSAxXTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGhvbWVEZXBlbmRlbmNpZXMgPSBbXG4gICAgICAgICckc2NvcGUnLFxuICAgICAgICAnJHRpbWVvdXQnLFxuICAgICAgICAnXycsXG4gICAgICAgICdlbnRpdHlTZXJ2aWNlJyxcbiAgICAgICAgJ2Nvbm5lY3Rpb25TZXJ2aWNlJyxcbiAgICAgICAgaG9tZUN0cmxcbiAgICBdO1xuXG4gICAgZnVuY3Rpb24gaG9tZUN0cmwoJHNjb3BlLCAkdGltZW91dCwgXywgZW50aXR5U2VydmljZSwgY29ubmVjdGlvblNlcnZpY2UpIHtcbiAgICAgICAgJHNjb3BlLmVudGl0aWVzICAgICAgICAgICAgICAgICA9IFtdO1xuICAgICAgICAkc2NvcGUuc2VhcmNoSXRlbXMgICAgICAgICAgICAgID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmNhdGVnb3JpZXMgICAgICAgICAgICAgICA9IFtdO1xuICAgICAgICAkc2NvcGUuY3VycmVudExvY2F0aW9uICAgICAgICAgID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmNsaWNrZWRMb2NhdGlvbiAgICAgICAgICA9IHt9O1xuICAgICAgICAkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkgICAgICAgICAgICA9IHt9O1xuICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgICAgID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmVkaXRpbmcgICAgICAgICAgICAgICAgICA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUuYWN0aW9ucyAgICAgICAgICAgICAgICAgID0geydpbnRlcmFjdGVkJzogZmFsc2V9O1xuICAgICAgICAkc2NvcGUuc2hvd3NlYXJjaE1CICAgICAgICAgICAgID0gZmFsc2U7XG4gICAgICAgICRzY29wZS5zaG93QW5hbHl0aWNzICAgICAgICAgICAgPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLmVudGl0eVR5cGVzICAgICAgICAgICAgICA9IGVudGl0eVNlcnZpY2UuZ2V0RW50aXR5VHlwZXMoKTtcbiAgICAgICAgJHNjb3BlLmNvbm5lY3Rpb25UeXBlcyAgICAgICAgICA9IGNvbm5lY3Rpb25TZXJ2aWNlLmdldENvbm5lY3Rpb25UeXBlcygpO1xuICAgICAgICAkc2NvcGUuc3RhdHVzICAgICAgICAgICAgICAgICAgID0ge1xuICAgICAgICAgICAgXCJpc05ldHdvcmtTaG93blwiOiB0cnVlLFxuICAgICAgICAgICAgXCJsaWNlbnNlXCIgICAgICAgOiB0cnVlLFxuICAgICAgICAgICAgXCJuZXR3b3JrTG9hZGluZ1wiOiB0cnVlXG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnRvZ2dsZUFuYWx5dGljcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5zaG93QW5hbHl0aWNzID0gISRzY29wZS5zaG93QW5hbHl0aWNzO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubWluQ29ubmVjdGlvbnMgPSAkc2NvcGUubWluQ29ubmVjdGlvbnMgPSAyO1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgLy8gJHNjb3BlLiR3YXRjaCgnbWluQ29ubmVjdGlvbnMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gICAgICRzY29wZS4kYnJvYWRjYXN0KCd0cmlnZ2VyTmV0d29ya0RyYXcnKTtcbiAgICAgICAgLy8gfSk7XG5cbiAgICAgICAgJHNjb3BlLiR3YXRjaCgnbWluQ29ubmVjdGlvbnMnLCB3YXRjaE1pbkNvbm5lY3Rpb24pO1xuXG4gICAgICAgIGZ1bmN0aW9uIHdhdGNoTWluQ29ubmVjdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCd0cmlnZ2VyTmV0d29ya0RyYXcnKTtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5jb25uZWN0aW9uQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coc2VsZi5taW5Db25uZWN0aW9ucyk7XG4gICAgICAgICAgICAkc2NvcGUubWluQ29ubmVjdGlvbnMgPSBzZWxmLm1pbkNvbm5lY3Rpb25zO1xuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3RyaWdnZXJOZXR3b3JrRHJhdycpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5oeWRlUGFydGlhbHMgPSBmdW5jdGlvbiAoZXhjZXB0KSB7XG4gICAgICAgICAgICBpZiAoZXhjZXB0ID09PSBcInNlYXJjaFwiKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRpbmcgICAgICAgICA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zZXR0aW5nc0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXhjZXB0ID09PSBcInNldHRpbmdzXCIpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdGluZyAgICAgID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3dzZWFyY2hNQiA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChleGNlcHQgPT09IFwiZWRpdFwiKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNldHRpbmdzRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zaG93c2VhcmNoTUIgICAgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRpbmcgICAgICAgICA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zZXR0aW5nc0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd3NlYXJjaE1CICAgID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2hvd1NlYXJjaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5oeWRlUGFydGlhbHMoXCJzZWFyY2hcIik7XG4gICAgICAgICAgICAkc2NvcGUuc2hvd3NlYXJjaE1CICAgPSAhJHNjb3BlLnNob3dzZWFyY2hNQjtcbiAgICAgICAgICAgIC8vICRzY29wZS4kYnJvYWRjYXN0KCdoaWRlTGljZW5zZScpO1xuICAgICAgICAgICAgJHNjb3BlLnN0YXR1cy5saWNlbnNlID0gZmFsc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnRvZ2dsZVNldHRpbmdzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLmh5ZGVQYXJ0aWFscyhcInNldHRpbmdzXCIpO1xuICAgICAgICAgICAgJHNjb3BlLnNldHRpbmdzRW5hYmxlZCA9ICEkc2NvcGUuc2V0dGluZ3NFbmFibGVkO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zdGFydEVkaXQgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudEVudGl0eSA9IGVudGl0eTtcbiAgICAgICAgICAgIGlmICgkc2NvcGUubW9iaWxlKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmh5ZGVQYXJ0aWFscyhcImVkaXRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc2NvcGUuZWRpdGluZyA9IHRydWU7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnN3aXRjaFZpZXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyAkc2NvcGUuJGJyb2FkY2FzdCgndmlld0NoYW5nZScsICEkc2NvcGUuc3RhdHVzLmlzTmV0d29ya1Nob3duID8gJ01hcCcgOiAnTmV0d29yaycpO1xuICAgICAgICAgICAgLy8gJHNjb3BlLmNoYW5nZVZpZXcoISRzY29wZS5zdGF0dXMuaXNOZXR3b3JrU2hvd24gPyAnTWFwJyA6ICdOZXR3b3JrJyk7XG4gICAgICAgICAgICAkc2NvcGUuc3RhdHVzLmlzTmV0d29ya1Nob3duID0gISRzY29wZS5zdGF0dXMuaXNOZXR3b3JrU2hvd247XG4gICAgICAgICAgICBpZiAoJHNjb3BlLnN0YXR1cy5pc05ldHdvcmtTaG93bikge1xuICAgICAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCd0cmlnZ2VyTmV0d29ya0RyYXcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB3aW5kb3cubW9iaWxlY2hlY2sgICAgID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNoZWNrICA9IGZhbHNlLFxuICAgICAgICAgICAgICAgIHJlZ2V4ICA9IC8oYW5kcm9pZHxiYlxcZCt8bWVlZ28pLittb2JpbGV8YXZhbnRnb3xiYWRhXFwvfGJsYWNrYmVycnl8YmxhemVyfGNvbXBhbHxlbGFpbmV8ZmVubmVjfGhpcHRvcHxpZW1vYmlsZXxpcChob25lfG9kKXxpcmlzfGtpbmRsZXxsZ2UgfG1hZW1vfG1pZHB8bW1wfG1vYmlsZS4rZmlyZWZveHxuZXRmcm9udHxvcGVyYSBtKG9ifGluKWl8cGFsbSggb3MpP3xwaG9uZXxwKGl4aXxyZSlcXC98cGx1Y2tlcnxwb2NrZXR8cHNwfHNlcmllcyg0fDYpMHxzeW1iaWFufHRyZW98dXBcXC4oYnJvd3NlcnxsaW5rKXx2b2RhZm9uZXx3YXB8d2luZG93cyBjZXx4ZGF8eGlpbm8vaSxcbiAgICAgICAgICAgICAgICByZWdleDIgPSAvMTIwN3w2MzEwfDY1OTB8M2dzb3w0dGhwfDUwWzEtNl1pfDc3MHN8ODAyc3xhIHdhfGFiYWN8YWMoZXJ8b298c1xcLSl8YWkoa298cm4pfGFsKGF2fGNhfGNvKXxhbW9pfGFuKGV4fG55fHl3KXxhcHR1fGFyKGNofGdvKXxhcyh0ZXx1cyl8YXR0d3xhdShkaXxcXC1tfHIgfHMgKXxhdmFufGJlKGNrfGxsfG5xKXxiaShsYnxyZCl8YmwoYWN8YXopfGJyKGV8dil3fGJ1bWJ8YndcXC0obnx1KXxjNTVcXC98Y2FwaXxjY3dhfGNkbVxcLXxjZWxsfGNodG18Y2xkY3xjbWRcXC18Y28obXB8bmQpfGNyYXd8ZGEoaXR8bGx8bmcpfGRidGV8ZGNcXC1zfGRldml8ZGljYXxkbW9ifGRvKGN8cClvfGRzKDEyfFxcLWQpfGVsKDQ5fGFpKXxlbShsMnx1bCl8ZXIoaWN8azApfGVzbDh8ZXooWzQtN10wfG9zfHdhfHplKXxmZXRjfGZseShcXC18Xyl8ZzEgdXxnNTYwfGdlbmV8Z2ZcXC01fGdcXC1tb3xnbyhcXC53fG9kKXxncihhZHx1bil8aGFpZXxoY2l0fGhkXFwtKG18cHx0KXxoZWlcXC18aGkocHR8dGEpfGhwKCBpfGlwKXxoc1xcLWN8aHQoYyhcXC18IHxffGF8Z3xwfHN8dCl8dHApfGh1KGF3fHRjKXxpXFwtKDIwfGdvfG1hKXxpMjMwfGlhYyggfFxcLXxcXC8pfGlicm98aWRlYXxpZzAxfGlrb218aW0xa3xpbm5vfGlwYXF8aXJpc3xqYSh0fHYpYXxqYnJvfGplbXV8amlnc3xrZGRpfGtlaml8a2d0KCB8XFwvKXxrbG9ufGtwdCB8a3djXFwtfGt5byhjfGspfGxlKG5vfHhpKXxsZyggZ3xcXC8oa3xsfHUpfDUwfDU0fFxcLVthLXddKXxsaWJ3fGx5bnh8bTFcXC13fG0zZ2F8bTUwXFwvfG1hKHRlfHVpfHhvKXxtYygwMXwyMXxjYSl8bVxcLWNyfG1lKHJjfHJpKXxtaShvOHxvYXx0cyl8bW1lZnxtbygwMXwwMnxiaXxkZXxkb3x0KFxcLXwgfG98dil8enopfG10KDUwfHAxfHYgKXxtd2JwfG15d2F8bjEwWzAtMl18bjIwWzItM118bjMwKDB8Mil8bjUwKDB8Mnw1KXxuNygwKDB8MSl8MTApfG5lKChjfG0pXFwtfG9ufHRmfHdmfHdnfHd0KXxub2soNnxpKXxuenBofG8yaW18b3AodGl8d3YpfG9yYW58b3dnMXxwODAwfHBhbihhfGR8dCl8cGR4Z3xwZygxM3xcXC0oWzEtOF18YykpfHBoaWx8cGlyZXxwbChheXx1Yyl8cG5cXC0yfHBvKGNrfHJ0fHNlKXxwcm94fHBzaW98cHRcXC1nfHFhXFwtYXxxYygwN3wxMnwyMXwzMnw2MHxcXC1bMi03XXxpXFwtKXxxdGVrfHIzODB8cjYwMHxyYWtzfHJpbTl8cm8odmV8em8pfHM1NVxcL3xzYShnZXxtYXxtbXxtc3xueXx2YSl8c2MoMDF8aFxcLXxvb3xwXFwtKXxzZGtcXC98c2UoYyhcXC18MHwxKXw0N3xtY3xuZHxyaSl8c2doXFwtfHNoYXJ8c2llKFxcLXxtKXxza1xcLTB8c2woNDV8aWQpfHNtKGFsfGFyfGIzfGl0fHQ1KXxzbyhmdHxueSl8c3AoMDF8aFxcLXx2XFwtfHYgKXxzeSgwMXxtYil8dDIoMTh8NTApfHQ2KDAwfDEwfDE4KXx0YShndHxsayl8dGNsXFwtfHRkZ1xcLXx0ZWwoaXxtKXx0aW1cXC18dFxcLW1vfHRvKHBsfHNoKXx0cyg3MHxtXFwtfG0zfG01KXx0eFxcLTl8dXAoXFwuYnxnMXxzaSl8dXRzdHx2NDAwfHY3NTB8dmVyaXx2aShyZ3x0ZSl8dmsoNDB8NVswLTNdfFxcLXYpfHZtNDB8dm9kYXx2dWxjfHZ4KDUyfDUzfDYwfDYxfDcwfDgwfDgxfDgzfDg1fDk4KXx3M2MoXFwtfCApfHdlYmN8d2hpdHx3aShnIHxuY3xudyl8d21sYnx3b251fHg3MDB8eWFzXFwtfHlvdXJ8emV0b3x6dGVcXC0vaTtcbiAgICAgICAgICAgIChmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgICAgIGlmIChyZWdleC50ZXN0KGEpIHx8IHJlZ2V4Mi50ZXN0KGEuc3Vic3RyKDAsIDQpKSkge1xuICAgICAgICAgICAgICAgICAgICBjaGVjayA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkobmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBuYXZpZ2F0b3IudmVuZG9yIHx8IHdpbmRvdy5vcGVyYSk7XG4gICAgICAgICAgICByZXR1cm4gY2hlY2s7XG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS5tb2JpbGUgICAgICAgICAgPSB3aW5kb3cubW9iaWxlY2hlY2soKTtcbiAgICAgICAgJHNjb3BlLnNldHRpbmdzRW5hYmxlZCA9ICEkc2NvcGUubW9iaWxlO1xuXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVudGl0eVNlcnZpY2VcbiAgICAgICAgICAgICAgICAuZ2V0QWxsKClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZW50aXRpZXMgPSBkYXRhLm5vZGVzO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYXRpb25zICAgPSBfLnVuaXEoXG4gICAgICAgICAgICAgICAgICAgICAgICBfLnBsdWNrKF8uZmxhdHRlbihfLnBsdWNrKCRzY29wZS5lbnRpdGllcywgJ2xvY2F0aW9ucycpKSwgJ2xvY2FsaXR5JykpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbnRpdGllc0J5TG9jYXRpb24gPSBfLm1hcChsb2NhdGlvbnMsIGZ1bmN0aW9uIChsb2MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaW5kaW5ncyA9IF8uZmlsdGVyKCRzY29wZS5lbnRpdGllcywgXy5mbG93KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8ucHJvcGVydHkoJ2xvY2F0aW9ucycpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8ucGFydGlhbFJpZ2h0KF8uYW55LCB7bG9jYWxpdHk6IGxvY30pXG4gICAgICAgICAgICAgICAgICAgICAgICApKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lICAgIDogbG9jLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgICAgOiAnbG9jYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0aWVzOiBmaW5kaW5ncyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWN0ICAgIDogXy56aXBPYmplY3QoXy5wbHVjayhmaW5kaW5ncywgJ25hbWUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5wbHVjayhmaW5kaW5ncywgJ2luZGV4JykpXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VhcmNoSXRlbXMgPSBlbnRpdGllc0J5TG9jYXRpb24uY29uY2F0KCRzY29wZS5lbnRpdGllcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgKCRzY29wZS5nZXRVUkxJRCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAvLyBTZXQgdGhlIGVudGl0eSB0byB0aGUgSUQgaW4gdGhlIFVSTCBpZiBpdCBleGlzdHMuXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAkc2NvcGUuc2V0RW50aXR5SUQoJHNjb3BlLmdldFVSTElEKCkpO1xuICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5vdmVydmlld1VybCA9ICdqcy9vdmVydmlldy9vdmVydmlldy5odG1sJztcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3RyaWdnZXJOZXR3b3JrRHJhdycpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCAxMDApO1xuXG4gICAgICAgICRzY29wZS5vdmVydmlld1VybCA9IG51bGw7XG5cbiAgICAgICAgJHNjb3BlLnNldEVudGl0eSAgID0gZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRMb2NhdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudEVudGl0eSAgID0gZW50aXR5O1xuICAgICAgICAgICAgaWYgKCRzY29wZS5lZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnN0b3BFZGl0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnZW50aXR5Q2hhbmdlJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNldEVudGl0eUlEID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICAkc2NvcGUuc2V0RW50aXR5KF8uZmluZCgkc2NvcGUuZW50aXRpZXMsIHsnaWQnOiBpZH0pKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2V0TG9jYXRpb24gPSBmdW5jdGlvbiAobG9jYXRpb24pIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50TG9jYXRpb24gPSBsb2NhdGlvbjtcbiAgICAgICAgICAgIGlmICgkc2NvcGUuZWRpdGluZykge1xuICAgICAgICAgICAgICAgICRzY29wZS5zdG9wRWRpdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ2l0ZW1DaGFuZ2UnKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2VsZWN0SXRlbSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnbG9jYXRpb24nKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNldExvY2F0aW9uKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlW2l0ZW0gJSAxID09PSAwID8gJ3NldEVudGl0eUlEJyA6ICdzZXRFbnRpdHknXShpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzZWxlY3RJdGVtJywgaXRlbSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLiRvbignc2V0Q3VycmVudEVudGl0eScsIGZ1bmN0aW9uIChldmVudCwgYXJncykge1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRFbnRpdHkgPSBhcmdzLnZhbHVlO1xuICAgICAgICB9KTtcblxuICAgICAgICAkc2NvcGUuJG9uKCdzZXRDdXJyZW50TG9jYXRpb24nLCBmdW5jdGlvbiAoZXZlbnQsIGFyZ3MpIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50TG9jYXRpb24gPSBhcmdzLnZhbHVlO1xuICAgICAgICB9KTtcblxuICAgICAgICAkc2NvcGUuc2V0RW50aXRpZXMgPSBmdW5jdGlvbiAoZW50aXRpZXMpIHtcbiAgICAgICAgICAgICRzY29wZS5lbnRpdGllcyA9IGVudGl0aWVzO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zdG9wRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5lZGl0aW5nID0gZmFsc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLiRvbihcImVkaXRFbnRpdHlTdWNjZXNzXCIsIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgJHNjb3BlLnNldEVudGl0aWVzKHJlc3BvbnNlLm5vZGVzKTtcbiAgICAgICAgICAgIC8vICRzY29wZS5zZXRFbnRpdHlJRCgkc2NvcGUuY3VycmVudEVudGl0eS5pZCk7XG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgndHJpZ2dlck5ldHdvcmtEcmF3Jyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRzY29wZS5hbmltYXRpb25zRW5hYmxlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ2hvbWVDdHJsJywgaG9tZURlcGVuZGVuY2llcyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA3LzE0LzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGRlcGVuZGVuY2llcyA9IFtdO1xuXG4gICAgZnVuY3Rpb24gZGlyZWN0aXZlKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJyZXN0cmljdFwiOiBcIkVcIixcbiAgICAgICAgICAgIFwidGVtcGxhdGVVcmxcIjogXCIvbWFwL21hcC5odG1sXCIsXG4gICAgICAgICAgICBcImNvbnRyb2xsZXJcIjogXCJtYXBDdHJsXCJcbiAgICAgICAgfTtcbiAgICB9XG4gICAgICAgIGFuZ3VsYXIubW9kdWxlKFwiY2l2aWMtZ3JhcGhcIilcbiAgICAgICAgICAgIC5kaXJlY3RpdmUoXCJtYXBcIiwgZGVwZW5kZW5jaWVzKTtcblxufSkoYW5ndWxhcik7IiwiKGZ1bmN0aW9uIChhbmd1bGFyLCAkKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBsaW5rRnVuY3Rpb24oc2NvcGUpIHtcblxuICAgICAgICBmdW5jdGlvbiBzY3JvbGwoKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9ICQodGhpcyk7XG4gICAgICAgICAgICBzZWxmLmNzcygnaGVpZ2h0JywgJzU1dmgnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrKCkge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSAkKHRoaXMpO1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5pbm5lckhlaWdodCAvIDMgPiBwYXJzZUludChzZWxmLmNzcygnaGVpZ2h0JykpKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jc3MoJ2hlaWdodCcsICc1NXZoJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGYuY3NzKCdoZWlnaHQnLCAnMzB2aCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRldGFpbHNQYW5lbDtcbiAgICAgICAgaWYgKHNjb3BlLm1vYmlsZSkge1xuICAgICAgICAgICAgZGV0YWlsc1BhbmVsID0gJChcIiNkZXRhaWxzLXBhbmVsXCIpO1xuICAgICAgICAgICAgZGV0YWlsc1BhbmVsLmNzcyhcImhlaWdodFwiLCBcIjMwdmhcIik7XG4gICAgICAgICAgICBkZXRhaWxzUGFuZWwuc2Nyb2xsVG9wKDApO1xuICAgICAgICAgICAgZGV0YWlsc1BhbmVsLnNjcm9sbChzY3JvbGwpO1xuICAgICAgICAgICAgZGV0YWlsc1BhbmVsLmNsaWNrKGNsaWNrKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZE1vYmlsZUV2ZW50cygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgICAgICBsaW5rOiBsaW5rRnVuY3Rpb25cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuZGlyZWN0aXZlKCdhZGRNb2JpbGVFdmVudHMnLCBbYWRkTW9iaWxlRXZlbnRzXSk7XG59KShhbmd1bGFyLCAkKTtcbiIsIihmdW5jdGlvbihhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBtb2RhbEN0cmwoJHNjb3BlLCAkbW9kYWxJbnN0YW5jZSkge1xuICAgICAgICAkc2NvcGUuY2xvc2VXaW5kb3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5jbG9zZSgpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdtb2RhbEN0cmwnLCBbJyRzY29wZScsICckbW9kYWxJbnN0YW5jZScsIG1vZGFsQ3RybF0pO1xuXG59KShhbmd1bGFyKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIG92ZXJ2aWV3Q3RybCgkc2NvcGUsIF8pIHtcbiAgICAgICAgJHNjb3BlLmNhdGVnb3JpemVkRW50aXRpZXMgPSB7fTtcbiAgICAgICAgXy5mb3JFYWNoKF8ua2V5cygkc2NvcGUuZW50aXR5VHlwZXMpLCBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3JpemVkRW50aXRpZXNbdHlwZV0gPSBfLmZpbHRlcigkc2NvcGUuZW50aXRpZXMsIHsndHlwZSc6IHR5cGV9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ292ZXJ2aWV3Q3RybCcsIFsnJHNjb3BlJywgJ18nLCBvdmVydmlld0N0cmxdKTtcbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIENvbnRyb2xsZXIoJHNjb3BlLCAkZmlsdGVyLCBfLCBjb25uZWN0aW9uU2VydmljZSwgdXRpbHMpIHtcbiAgICAgICAgLy8gVE9ETzogTWFrZSBhIGhhc2htYXAgb24gdGhlIGJhY2tlbmQgb2YgaWQgLT4gcG9zaXRpb24sIHRoZW4gdXNlIHNvdXJjZTpcbiAgICAgICAgLy8gZW50aXRpZXNbbWFwW3NvdXJjZWlkXV0gdG8gZ2V0IG5vZGVzLiBTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3EvMTY4MjQzMDhcbiAgICAgICAgJHNjb3BlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgICRzY29wZS5jb25uZWN0aW9ucyA9IHt9O1xuICAgICAgICBzdGFydExvYWQoKTtcblxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9jb2RlcndhbGwuY29tL3Avbmdpc21hL3NhZmUtYXBwbHktaW4tYW5ndWxhci1qc1xuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5ID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICB2YXIgcGhhc2UgPSB0aGlzLiRyb290LiQkcGhhc2U7XG4gICAgICAgICAgICBpZiAocGhhc2UgPT09ICckYXBwbHknIHx8IHBoYXNlID09PSAnJGRpZ2VzdCcpIHtcbiAgICAgICAgICAgICAgICBpZiAoZm4gJiYgKHR5cGVvZihmbikgPT09ICdmdW5jdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRhcHBseShmbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLiRvbigndHJpZ2dlck5ldHdvcmtEcmF3Jywgc3RhcnRMb2FkKTtcblxuICAgICAgICAkc2NvcGUuJG9uKCd2aWV3Q2hhbmdlJywgZnVuY3Rpb24gKHZpZXdPYmopIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZpZXdPYmopO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgZHJhd05ldHdvcmsgPSBmdW5jdGlvbiAoZW50aXR5QXJyYXksIGNvbm5lY3Rpb25BcnJheSkge1xuICAgICAgICAgICAgJHNjb3BlLmlzTG9hZGluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICB2YXIgc3ZnID0gZDMuc2VsZWN0KCcjbmV0d29yaycpO1xuICAgICAgLy8gICAgICAgLmNsYXNzZWQoXCJuZXR3b3JrLWNvbnRhaW5lclwiLCB0cnVlKVxuICAgICAgLy8gICAgICAgLmF0dHIoXCJwcmVzZXJ2ZUFzcGVjdFJhdGlvXCIsIFwieE1pbllNaW4gbWVldFwiKVxuICAgICAgLy8gLmF0dHIoXCJ2aWV3Qm94XCIsIFwiMCAwIDYwMCA0MDBcIiApO1xuICAgLy9jbGFzcyB0byBtYWtlIGl0IHJlc3BvbnNpdmVcbiAgIC8vIC5jbGFzc2VkKFwic3ZnLWNvbnRlbnQtcmVzcG9uc2l2ZVwiLCB0cnVlKTsgXG4gICAgICAgICAgICBzdmcuc2VsZWN0QWxsKFwiKlwiKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIHZhciBib3VuZHMgPSBzdmcubm9kZSgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IGJvdW5kcy5oZWlnaHQ7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSBib3VuZHMud2lkdGg7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0U2NhbGUgPSA2O1xuICAgICAgICAgICAgdmFyIGRlZmF1bHROb2RlU2l6ZSA9IDc7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0cyA9IHtcbiAgICAgICAgICAgICAgICAnSW5kaXZpZHVhbCc6IHsgJ3gnOiAxLCAneSc6IDEgfSxcbiAgICAgICAgICAgICAgICAnRm9yLVByb2ZpdCc6IHsgJ3gnOiAxLCAneSc6IC0xIH0sXG4gICAgICAgICAgICAgICAgJ05vbi1Qcm9maXQnOiB7ICd4JzogLTEsICd5JzogMSB9LFxuICAgICAgICAgICAgICAgICdHb3Zlcm5tZW50JzogeyAneCc6IC0xLCAneSc6IC0xIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgbG93ZXJCb3VuZFJhZGl1cyA9IDEwO1xuICAgICAgICAgICAgdmFyIHVwcGVyQm91bmRSYWRpdXMgPSA1MDtcbiAgICAgICAgICAgIHZhciBtYXhFbXBsb3llZXMgPSBkMy5tYXgoZW50aXR5QXJyYXksIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUludChlbC5lbXBsb3llZXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgbWF4Rm9sbG93ZXJzID0gZDMubWF4KGVudGl0eUFycmF5LCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoZWwuZm9sbG93ZXJzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIHNjYWxlID0ge1xuICAgICAgICAgICAgICAgICdlbXBsb3llZXMnOiBkMy5zY2FsZS5zcXJ0KCkuZG9tYWluKFsxMCwgbWF4RW1wbG95ZWVzXSlcbiAgICAgICAgICAgICAgICAgICAgLnJhbmdlKFtsb3dlckJvdW5kUmFkaXVzLCB1cHBlckJvdW5kUmFkaXVzXSksXG4gICAgICAgICAgICAgICAgJ2ZvbGxvd2Vycyc6IGQzLnNjYWxlLnNxcnQoKS5kb21haW4oWzEwLCBtYXhGb2xsb3dlcnNdKVxuICAgICAgICAgICAgICAgICAgICAucmFuZ2UoW2xvd2VyQm91bmRSYWRpdXMsIHVwcGVyQm91bmRSYWRpdXNdKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBsaW5rcyA9IHt9O1xuICAgICAgICAgICAgdmFyIGZvcmNlID0gZDMubGF5b3V0LmZvcmNlKClcbiAgICAgICAgICAgICAgICAuc2l6ZShbd2lkdGgsIGhlaWdodF0pXG4gICAgICAgICAgICAgICAgLm5vZGVzKGVudGl0eUFycmF5KVxuICAgICAgICAgICAgICAgIC5saW5rcyhfLmZsYXR0ZW4oXy52YWx1ZXMoY29ubmVjdGlvbkFycmF5KSkpXG4gICAgICAgICAgICAgICAgLmNoYXJnZShmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5lbXBsb3llZXMgPyAtMiAqIHNjYWxlLmVtcGxveWVlcyhkLmVtcGxveWVlcykgOiAtMjA7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAubGlua1N0cmVuZ3RoKDApXG4gICAgICAgICAgICAgICAgLmxpbmtEaXN0YW5jZSg1MCk7XG5cbiAgICAgICAgICAgIF8uZm9yRWFjaChjb25uZWN0aW9uQXJyYXksIGZ1bmN0aW9uIChjb25uZWN0aW9ucywgdHlwZSkge1xuICAgICAgICAgICAgICAgIGxpbmtzW3R5cGVdID0gc3ZnLnNlbGVjdEFsbCgnLmxpbmsgLicgKyB0eXBlICsgJy1saW5rJylcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEoY29ubmVjdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgnbGluZScpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXV0aWxzLmlzRGVmaW5lZChkLnNvdXJjZSkgfHwgIXV0aWxzLmlzRGVmaW5lZChkLnRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGQudHlwZSA9IHR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2xpbmsgJyArIHR5cGUgKyAnLWxpbmsgJyArIGQuc291cmNlLnR5cGUgKyAnLWxpbmsgJyArIGQudGFyZ2V0LnR5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArICctbGluayc7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBub2RlID0gc3ZnLnNlbGVjdEFsbCgnLm5vZGUnKVxuICAgICAgICAgICAgICAgIC5kYXRhKGVudGl0eUFycmF5KVxuICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdub2RlICcgKyBkLnR5cGUgKyAnLW5vZGUnO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhbGwoZm9yY2UuZHJhZyk7XG5cbiAgICAgICAgICAgIG5vZGUuYXBwZW5kKCdjaXJjbGUnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdyJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuZW1wbG95ZWVzID8gc2NhbGVbJ2VtcGxveWVlcyddKGQuZW1wbG95ZWVzKSA6IGRlZmF1bHROb2RlU2l6ZTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbm9kZS5hcHBlbmQoJ3RleHQnKVxuICAgICAgICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLm5pY2tuYW1lID8gZC5uaWNrbmFtZSA6IGQubmFtZTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5hdHRyKCdkeCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgtMC4wNjUgKiB0aGlzLmdldENvbXB1dGVkVGV4dExlbmd0aCgpIC8gMikgKyAnZW0nO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2R5JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKDAuMDggKiB0aGlzLnBhcmVudE5vZGUuZ2V0QkJveCgpLmhlaWdodCAvIDIgKyAwLjUpICsgJ2VtJztcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZm9yY2Uub24oJ3RpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIC8vIENsdXN0ZXIgaW4gZm91ciBjb3JuZXJzIGJhc2VkIG9uIG9mZnNldC5cbiAgICAgICAgICAgICAgICB2YXIgayA9IG9mZnNldFNjYWxlICogZS5hbHBoYTtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlLmFscGhhKVxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChlbnRpdHlBcnJheSwgZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW50aXR5LnggJiYgb2Zmc2V0c1tlbnRpdHkudHlwZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eS54ICs9IG9mZnNldHNbZW50aXR5LnR5cGVdLnggKiBrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5LnkgKz0gb2Zmc2V0c1tlbnRpdHkudHlwZV0ueSAqIGs7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHkueCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgodXBwZXJCb3VuZFJhZGl1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5taW4od2lkdGggLSB1cHBlckJvdW5kUmFkaXVzLCBlbnRpdHkueCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5LnkgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KHVwcGVyQm91bmRSYWRpdXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKGhlaWdodCAtIHVwcGVyQm91bmRSYWRpdXMsIGVudGl0eS55KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChsaW5rcywgZnVuY3Rpb24gKGxpbmspIHtcbiAgICAgICAgICAgICAgICAgICAgbGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gxJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5zb3VyY2UueDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneTEnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnNvdXJjZS55O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MicsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQudGFyZ2V0Lng7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kyJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC50YXJnZXQueTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIG5vZGUuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIGQueCArICcsJyArIGQueSArICcpJztcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIHNwZWVkQW5pbWF0ZSA9IGZ1bmN0aW9uICh0aWNrcykge1xuICAgICAgICAgICAgICAgIC8vIFNwZWVkIHVwIHRoZSBpbml0aWFsIGFuaW1hdGlvbi5cbiAgICAgICAgICAgICAgICAvLyBTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjYxODkxMTBcbiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRpY2tzOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmNlLnRpY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZm9yY2UuYWxwaGEoKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShyZW5kZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gaWYgKCEkc2NvcGUubW9iaWxlKSB7XG4gICAgICAgICAgICAvLyAgICAgc3BlZWRBbmltYXRlKDcpO1xuICAgICAgICAgICAgLy8gfVxuXG4gICAgICAgICAgICAvLyBzcGVlZCB1cCBhbmltYXRpb24gZm9yIG1vYmlsZSBhbmQgZGVza3RvcCBuZXR3b3JrIGdyYXBoIHJlbmRlcmluZ1xuICAgICAgICAgICAgc3BlZWRBbmltYXRlKDcpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3JjZS5zdGFydCgpO1xuXG4gICAgICAgICAgICAvLyBIYXNoIGxpbmtlZCBuZWlnaGJvcnMgZm9yIGVhc3kgaG92ZXJpbmcgZWZmZWN0cy5cbiAgICAgICAgICAgIC8vIFNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS84NzgwMjc3XG4gICAgICAgICAgICB2YXIgbGlua2VkQnlJbmRleCA9IHt9O1xuICAgICAgICAgICAgXy5mb3JFYWNoKGxpbmtzLCBmdW5jdGlvbiAobCkge1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChsWzBdLCBmdW5jdGlvbiAoY29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gY29ubmVjdGlvbi5fX2RhdGFfXy5zb3VyY2U7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBjb25uZWN0aW9uLl9fZGF0YV9fLnRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgbGlua2VkQnlJbmRleFtzb3VyY2UuaW5kZXggKyAnLCcgKyB0YXJnZXQuaW5kZXhdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgbGlua2VkQnlJbmRleFt0YXJnZXQuaW5kZXggKyAnLCcgKyBzb3VyY2UuaW5kZXhdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgbmVpZ2hib3JpbmcgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgICAgIHJldHVybiBsaW5rZWRCeUluZGV4W2EuaW5kZXggKyAnLCcgKyBiLmluZGV4XSB8fCBhLmluZGV4ID09PSBiLmluZGV4O1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGZvY3VzbmVpZ2hib3JzID0gZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgICAgIC8vIEFwcGx5ICd1bmZvY3VzZWQnIGNsYXNzIHRvIGFsbCBub24tbmVpZ2hib3JzLlxuICAgICAgICAgICAgICAgIC8vIEFwcGx5ICdmb2N1c2VkJyBjbGFzcyB0byBhbGwgbmVpZ2hib3JzLlxuICAgICAgICAgICAgICAgIC8vIFRPRE86IFNlZSBpZiBpdCBjYW4gYmUgZG9uZSB3aXRoIGp1c3Qgb25lIGNsYXNzIGFuZCA6bm90KC5mb2N1c2VkKSBDU1Mgc2VsZWN0b3JzLlxuICAgICAgICAgICAgICAgIG5vZGVcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5laWdoYm9yaW5nKGVudGl0eSwgbik7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFuZWlnaGJvcmluZyhlbnRpdHksIG4pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChsaW5rcywgZnVuY3Rpb24gKGxpbmspIHtcbiAgICAgICAgICAgICAgICAgICAgbGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmdW5jdGlvbiAobykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRpdHkuaW5kZXggPT09IG8uc291cmNlLmluZGV4IHx8IGVudGl0eS5pbmRleFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9PT0gby50YXJnZXQuaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEoZW50aXR5LmluZGV4ID09PSBvLnNvdXJjZS5pbmRleCB8fCBlbnRpdHkuaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA9PT0gby50YXJnZXQuaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgZm9jdXMgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jdXJyZW50RW50aXR5ICE9PSBlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNldEVudGl0eShlbnRpdHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICAgICAgZm9jdXNuZWlnaGJvcnMoZW50aXR5KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciB1bmZvY3VzID0gZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgICAgIC8vdmFyIHRyYW5zaXRpb25kZWxheSA9IDc1O1xuICAgICAgICAgICAgICAgIG5vZGVcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBfLmZvckVhY2gobGlua3MsIGZ1bmN0aW9uIChsaW5rKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGVudGl0eS5maXhlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIC8vIFJlc3RhcnQgZDMgYW5pbWF0aW9ucy5cbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcmNlLnJlc3VtZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL1RPRE86IFNob3cgZ2VuZXJpYyBkZXRhaWxzIGFuZCBub3QgaW5kaXZpZHVhbCBlbnRpdHkgZGV0YWlscz9cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgaG92ZXJUaW1lcjtcbiAgICAgICAgICAgIHZhciBob3ZlciA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSAmJiAhJHNjb3BlLmVkaXRpbmcgJiYgISRzY29wZS5jdXJyZW50TG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgaG92ZXJUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXMoZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciB1bmhvdmVyID0gZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ICYmICEkc2NvcGUuY3VycmVudExvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHVuZm9jdXMoZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGhvdmVyVGltZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbnRlcmFjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGZvY3VzTG9jYXRpb24gPSBmdW5jdGlvbiAobG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICAvLyAgSWYgdGhlIGN1cnJlbnQgZW50aXR5IGlzIHNob3duIGFuZCBpdCBkb2Vzbid0IG1hdGNoIHRoZSBjbGlja2VkIG5vZGUsIHRoZW4gc2V0XG4gICAgICAgICAgICAgICAgLy8gdGhlIG5ldyBub2RlIHRvIGNsaWNrZWQuXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuXG4gICAgICAgICAgICAgICAgbm9kZS5jbGFzc2VkKCdmb2N1c2VkJywgZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4ubmFtZSBpbiBsb2NhdGlvbi5kaWN0O1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEobi5uYW1lIGluIGxvY2F0aW9uLmRpY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChsaW5rcywgZnVuY3Rpb24gKGxpbmspIHtcbiAgICAgICAgICAgICAgICAgICAgbGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmdW5jdGlvbiAobykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoby5zb3VyY2UubmFtZSBpbiBsb2NhdGlvbi5kaWN0ICYmIG8udGFyZ2V0Lm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbiBsb2NhdGlvbi5kaWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShvLnNvdXJjZS5uYW1lIGluIGxvY2F0aW9uLmRpY3QpIHx8ICEoby50YXJnZXQubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbiBsb2NhdGlvbi5kaWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIHVuZm9jdXNMb2NhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBub2RlXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGxpbmtzLCBmdW5jdGlvbiAobGluaykge1xuICAgICAgICAgICAgICAgICAgICBsaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcmNlLnJlc3VtZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBoaWdobGlnaHRMb2NhdGlvbiA9IGZ1bmN0aW9uIChsb2NhdGlvbikge1xuICAgICAgICAgICAgICAgICRzY29wZS5zaG93TGljZW5zZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgdW5mb2N1cygkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiAhPT0gbG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdW5mb2N1c0xvY2F0aW9uKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAvLyAkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uID0gbG9jYXRpb247XG4gICAgICAgICAgICAgICAgICAgIGZvY3VzTG9jYXRpb24obG9jYXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBGSVggRk9SIExPQ0FUSU9OIE5PVCBISUdITElHSFRJTkcgb24gc2VhcmNoIGVudGVyOlxuICAgICAgICAgICAgICAgIGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uID09PSBsb2NhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiA9IGxvY2F0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNMb2NhdGlvbihsb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZDMuZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZDMuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgY2xpY2sgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3dMaWNlbnNlID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBpZiAodXRpbHMuaXNEZWZpbmVkKCRzY29wZS5jbGlja2VkTG9jYXRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1dGlscy5pc0RlZmluZWQoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuZm9jdXNMb2NhdGlvbigkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyAgSWYgdGhlIHByZXZpb3VzIG5vZGUgaXMgZXF1YWwgdG8gdGhlIG5ldyBub2RlLCBkbyBub3RoaW5nLlxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ID09PSBlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGSVggRk9SIFNFQVJDSCBOT1QgV09SS0lORzogZW50aXR5IHdhcyBub3QgZm9jdXNlZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWZ0ZXIgc3dpdGNoaW5nIHRvIHN0YXJ0bG9hZCBmdW5jdGlvbiBmb3IgbmV0d29yayBncmFwaFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXMoZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICBVbmZvY3VzIG9uIHByZXZpb3VzIG5vZGUgYW5kIGZvY3VzIG9uIG5ldyBub2RlLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZm9jdXMoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9IGVudGl0eTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTdG9wIGV2ZW50IHNvIHdlIGRvbid0IGRldGVjdCBhIGNsaWNrIG9uIHRoZSBiYWNrZ3JvdW5kLlxuICAgICAgICAgICAgICAgIC8vIFNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcS8yMjk0MTc5NlxuICAgICAgICAgICAgICAgIGlmIChkMy5ldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBkMy5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGJhY2tncm91bmRjbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAodXRpbHMuaXNEZWZpbmVkKCRzY29wZS5jbGlja2VkTG9jYXRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1dGlscy5pc0RlZmluZWQoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuZm9jdXMoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodXRpbHMuaXNEZWZpbmVkKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuZm9jdXMoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgICAgIC8vVE9ETzogU2hvdyBnZW5lcmljIGRldGFpbHMgYW5kIG5vdCBpbmRpdmlkdWFsIGVudGl0eSBkZXRhaWxzLlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBkYmxjbGljayA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVudGl0eS5maXhlZCkge1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHkueCA9IHdpZHRoIC8gMjtcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LnkgPSBoZWlnaHQgLyAyO1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHkucHggPSB3aWR0aCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5weSA9IGhlaWdodCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5maXhlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9IGVudGl0eTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB1bmZvY3VzKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIG5vZGUub24oJ21vdXNlb3ZlcicsIGhvdmVyKTtcbiAgICAgICAgICAgIG5vZGUub24oJ21vdXNlb3V0JywgdW5ob3Zlcik7XG4gICAgICAgICAgICBub2RlLm9uKCdjbGljaycsIGNsaWNrKTtcbiAgICAgICAgICAgIG5vZGUub24oJ2RibGNsaWNrJywgZGJsY2xpY2spO1xuICAgICAgICAgICAgc3ZnLm9uKCdjbGljaycsIGJhY2tncm91bmRjbGljayk7XG5cbiAgICAgICAgICAgIG5vZGVcbiAgICAgICAgICAgICAgICAuY2xhc3NlZCgnd2VsbGNvbm5lY3RlZCcsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmhhc093blByb3BlcnR5KCd3ZWxsY29ubmVjdGVkJyk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICRzY29wZS4kb24oJ2NoYW5nZVNpemVCeScsIGZ1bmN0aW9uIChldmVudCwgc2l6ZUJ5KSB7XG4gICAgICAgICAgICAgICAgc3ZnLnNlbGVjdEFsbCgnY2lyY2xlJylcbiAgICAgICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oMjUwKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cigncicsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZFtzaXplQnldID8gc2NhbGVbc2l6ZUJ5XShkW3NpemVCeV0pIDogZGVmYXVsdE5vZGVTaXplO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJHNjb3BlLiRvbigndG9nZ2xlTGluaycsIGZ1bmN0aW9uIChldmVudCwgbGluaykge1xuICAgICAgICAgICAgICAgIC8vIGxpbmtzW2xpbmsubmFtZV1cbiAgICAgICAgICAgICAgICAvLyAuY2xhc3NlZCh7J3Zpc2libGUnOiBsaW5rLmVuYWJsZWQsICdoaWRkZW4nOiAhbGluay5lbmFibGVkfSk7XG4gICAgICAgICAgICAgICAgXy5tYXAoJHNjb3BlLmVudGl0eVR5cGVzLCBmdW5jdGlvbiAodmFsLCBrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgc3ZnXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCcuJyArIGtleSArICctbGluaycpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Zpc2libGUnOiBmdW5jdGlvbiAobCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb25uZWN0aW9uVHlwZSBlbmFibGVkLCBjb25uZWN0aW9uIHNvdXJjZSBlbnRpdHkgdHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpcyBlbmFibGVkLCBjb25uZWN0aW9uIHRhcmdldCBlbnRpdHkgdHlwZSBpcyBlbmFibGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gISRzY29wZS5jb25uZWN0aW9uVHlwZXNbbC50eXBlXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgKCRzY29wZS5lbnRpdHlUeXBlc1tsLnNvdXJjZS50eXBlXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgJHNjb3BlLmVudGl0eVR5cGVzW2wudGFyZ2V0LnR5cGVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoaWRkZW4nOiBmdW5jdGlvbiAobCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBhbnkgb2YgQ29ubmVjdGlvblR5cGUsIHNvdXJjZSBlbnRpdHkgdHlwZSwgb3IgdGFyZ2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVudGl0eSB0eXBlIGFyZSBkaXNhYmxlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEkc2NvcGUuY29ubmVjdGlvblR5cGVzW2wudHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8ICghJHNjb3BlLmVudGl0eVR5cGVzW2wuc291cmNlLnR5cGVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCAhJHNjb3BlLmVudGl0eVR5cGVzW2wudGFyZ2V0LnR5cGVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkc2NvcGUuJG9uKCd0b2dnbGVOb2RlJywgZnVuY3Rpb24gKGV2ZW50LCB0eXBlKSB7XG4gICAgICAgICAgICAgICAgc3ZnXG4gICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJy4nICsgdHlwZS5uYW1lICsgJy1ub2RlJylcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoeyAndmlzaWJsZSc6IHR5cGUuZW5hYmxlZCwgJ2hpZGRlbic6ICF0eXBlLmVuYWJsZWQgfSk7XG5cbiAgICAgICAgICAgICAgICBzdmdcbiAgICAgICAgICAgICAgICAgICAgLnNlbGVjdEFsbCgnLicgKyB0eXBlLm5hbWUgKyAnLWxpbmsnKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAndmlzaWJsZSc6IGZ1bmN0aW9uIChsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ubmVjdGlvblR5cGUgZW5hYmxlZCwgY29ubmVjdGlvbiBzb3VyY2UgZW50aXR5IHR5cGUgaXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbmFibGVkLCBjb25uZWN0aW9uIHRhcmdldCBlbnRpdHkgdHlwZSBpcyBlbmFibGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUuY29ubmVjdGlvblR5cGVzW2wudHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgKCRzY29wZS5lbnRpdHlUeXBlc1tsLnNvdXJjZS50eXBlXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiAkc2NvcGUuZW50aXR5VHlwZXNbbC50YXJnZXQudHlwZV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdoaWRkZW4nOiBmdW5jdGlvbiAobCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGFueSBvZiBDb25uZWN0aW9uVHlwZSwgc291cmNlIGVudGl0eSB0eXBlLCBvciB0YXJnZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbnRpdHkgdHlwZSBhcmUgZGlzYWJsZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEkc2NvcGUuY29ubmVjdGlvblR5cGVzW2wudHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgKCEkc2NvcGUuZW50aXR5VHlwZXNbbC5zb3VyY2UudHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgISRzY29wZS5lbnRpdHlUeXBlc1tsLnRhcmdldC50eXBlXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJHNjb3BlLiRvbignc2VsZWN0SXRlbScsIGZ1bmN0aW9uIChldmVudCwgaXRlbSkge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdsb2NhdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0TG9jYXRpb24oJHNjb3BlLmN1cnJlbnRMb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjbGljaygkc2NvcGUuY3VycmVudEVudGl0eSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gc3RhcnRMb2FkKCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gc3VjY2VzcyhkYXRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkRW50aXRpZXMgPSAkZmlsdGVyKCdmaWx0ZXInKSgkc2NvcGUuZW50aXRpZXMsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRpdHkuY29sbGFib3JhdGlvbnMubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPj0gJHNjb3BlLm1pbkNvbm5lY3Rpb25zO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWRDb25uZWN0aW9ucyA9IHt9O1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChfLmtleXMoZGF0YS5jb25uZWN0aW9ucyksIGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICRzY29wZS5jb25uZWN0aW9uc1t0eXBlXSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZENvbm5lY3Rpb25zW3R5cGVdID0gW107XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGRhdGEuY29ubmVjdGlvbnMsIGZ1bmN0aW9uIChjb25uZWN0aW9ucywgdHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBfLmZvckVhY2goY29ubmVjdGlvbnMsIGZ1bmN0aW9uIChjb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlTm9kZSA9IF8uZmluZChmaWx0ZXJlZEVudGl0aWVzLCB7ICdpZCc6IGNvbm5lY3Rpb24uc291cmNlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldE5vZGUgPSBfLmZpbmQoZmlsdGVyZWRFbnRpdGllcywgeyAnaWQnOiBjb25uZWN0aW9uLnRhcmdldCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKCB1dGlscy5pc0RlZmluZWQoc291cmNlTm9kZSkgJiYgdXRpbHMuaXNEZWZpbmVkKHRhcmdldE5vZGUpICkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkQ29ubmVjdGlvbnNbdHlwZV0ucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ICdzb3VyY2UnOiBzb3VyY2VOb2RlLCAndGFyZ2V0JzogdGFyZ2V0Tm9kZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICRzY29wZS5jb25uZWN0aW9uc1t0eXBlXS5wdXNoKHsnc291cmNlJzogc291cmNlTm9kZSwgJ3RhcmdldCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0YXJnZXROb2RlfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgc2hvdyBsYWJlbHMgb24gdG9wIDUgbW9zdCBjb25uZWN0ZWQgZW50aXRpZXMgaW5pdGlhbGx5LlxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChfLmtleXMoJHNjb3BlLmVudGl0eVR5cGVzKSwgZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgdG9wIDUgbW9zdC1jb25uZWN0ZWQgZW50aXRpZXMuXG4gICAgICAgICAgICAgICAgICAgIHZhciB0b3A1ID0gXy50YWtlUmlnaHQoXy5zb3J0QnkoXy5maWx0ZXIoJHNjb3BlLmVudGl0aWVzLCB7ICd0eXBlJzogdHlwZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdjb2xsYWJvcmF0aW9ucy5sZW5ndGgnKSwgNSk7XG4gICAgICAgICAgICAgICAgICAgIF8uZm9yRWFjaCh0b3A1LCBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHkud2VsbGNvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgZmlsdGVyZWRFbnRpdGllcyA9IF8uc29ydEJ5KGZpbHRlcmVkRW50aXRpZXMsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoZS53ZWxsY29ubmVjdGVkKSA/IDEgOiAwO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgZHJhd05ldHdvcmsoZmlsdGVyZWRFbnRpdGllcywgZmlsdGVyZWRDb25uZWN0aW9ucyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbm5lY3Rpb25TZXJ2aWNlXG4gICAgICAgICAgICAgICAgLmdldEFsbCgpXG4gICAgICAgICAgICAgICAgLnRoZW4oc3VjY2Vzcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBDb250cm9sbGVyLiRpbmplY3QgPSBbXCIkc2NvcGVcIiwgXCIkZmlsdGVyXCIsIFwiX1wiLCBcImNvbm5lY3Rpb25TZXJ2aWNlXCIsIFwiY2dVdGlsU2VydmljZVwiXTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb250cm9sbGVyKCduZXR3b3JrQ3RybCcsIENvbnRyb2xsZXIpO1xuXG59KShhbmd1bGFyLCBSVFApO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA3LzExLzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGRlcGVuZGVuY2llcyA9IFtcbiAgICAgICAgZGlyZWN0aXZlXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIGRpcmVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwicmVzdHJpY3RcIjogXCJFXCIsXG4gICAgICAgICAgICBcInRlbXBsYXRlVXJsXCI6IFwianMvbmV0d29yay9uZXR3b3JrLmh0bWxcIixcbiAgICAgICAgICAgIFwiY29udHJvbGxlclwiOiBcIm5ldHdvcmtDdHJsXCJcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoXCIpXG4gICAgICAgIC5kaXJlY3RpdmUoXCJuZXR3b3JrXCIsIGRlcGVuZGVuY2llcyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI2LzE2LlxuICovXG4oZnVuY3Rpb24oYW5ndWxhcikge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2lucHV0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdGljdDogJ0UnLFxuICAgICAgICAgICAgcmVxdWlyZTogJz9uZ01vZGVsJyxcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmdNb2RlbCkge1xuICAgICAgICAgICAgICAgIGlmICggJ3R5cGUnIGluIGF0dHJzICYmIGF0dHJzLnR5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ3JhbmdlJyApIHtcbiAgICAgICAgICAgICAgICAgICAgbmdNb2RlbC4kcGFyc2Vycy5wdXNoKHBhcnNlRmxvYXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KTtcbn0pKGFuZ3VsYXIpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBpc0RlZmluZWQobykge1xuICAgICAgICByZXR1cm4gISh0eXBlb2YgbyA9PT0gXCJ1bmRlZmluZWRcIiB8fCBvID09PSBudWxsKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc09iamVjdChvKSB7XG4gICAgICAgIHJldHVybiBpc0RlZmluZWQobykgJiYgIUFycmF5LmlzQXJyYXkobykgJiYgKHR5cGVvZiBvID09PSBcIm9iamVjdFwiKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRQcm9wZXJ0eUZyb21PYmoob2JqKSB7XG4gICAgICAgIHZhciBkZWZPYmogPSBpc0RlZmluZWQob2JqKSA/IG9iaiA6IHt9O1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAocHJvcGVydHksIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gaXNEZWZpbmVkKGRlZmF1bHRWYWx1ZSkgPyBkZWZhdWx0VmFsdWUgOiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIGlzRGVmaW5lZChkZWZPYmpbcHJvcGVydHldKVxuICAgICAgICAgICAgICAgID8gZGVmT2JqW3Byb3BlcnR5XVxuICAgICAgICAgICAgICAgIDogdmFsdWU7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9vcEFuZEluaXQobW9kZWxBcnJheSwgaW5pdE1vZGVsRnVuY3Rpb24pIHtcbiAgICAgICAgdmFyIG5ld0FycmF5ID0gQXJyYXkuaXNBcnJheShtb2RlbEFycmF5KVxuICAgICAgICAgICAgPyBtb2RlbEFycmF5LmZpbHRlcihpc09iamVjdCkubWFwKGluaXRNb2RlbEZ1bmN0aW9uKVxuICAgICAgICAgICAgOiBbXTtcblxuICAgICAgICByZXR1cm4gbmV3QXJyYXkuY29uY2F0KFtpbml0TW9kZWxGdW5jdGlvbigpXSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gU2VydmljZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiaXNEZWZpbmVkXCI6IGlzRGVmaW5lZCxcbiAgICAgICAgICAgIFwiaXNPYmplY3RcIjogaXNPYmplY3QsXG5cbiAgICAgICAgICAgIFwiZ2V0UHJvcGVydHlGcm9tT2JqXCI6IGdldFByb3BlcnR5RnJvbU9iaixcbiAgICAgICAgICAgIFwibG9vcEFuZEluaXRcIjogbG9vcEFuZEluaXRcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaC51dGlsXCIpXG4gICAgICAgIC5mYWN0b3J5KFwiY2dVdGlsU2VydmljZVwiLCBTZXJ2aWNlKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMS8xNi5cbiAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIGFuYWx5dGljc0N0cmwoJHNjb3BlKSB7XG5cbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29udHJvbGxlcignYW5hbHl0aWNzQ3RybCcsIFsnJHNjb3BlJywgYW5hbHl0aWNzQ3RybF0pO1xufSkoYW5ndWxhcik7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxuICovXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgZnVuY3Rpb24gU2VydmljZSh1dGlscykge1xuICAgICAgICBmdW5jdGlvbiBMb2NhdGlvbihvYmopIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIGdldFByb3BlcnR5ID0gdXRpbHMuZ2V0UHJvcGVydHlGcm9tT2JqKG9iaik7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkRm9ybWF0dGVkQWRkcmVzcygpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVmT2JqID0gdXRpbHMuaXNEZWZpbmVkKG9iaikgPyBvYmogOiB7fTtcbiAgICAgICAgICAgICAgICB2YXIgYWRkcmVzc0xpbmUgPSAodXRpbHMuaXNEZWZpbmVkKGRlZk9iai5hZGRyZXNzX2xpbmUpID8gZGVmT2JqLmFkZHJlc3NfbGluZSArICcgJyA6ICcnKTtcbiAgICAgICAgICAgICAgICB2YXIgbG9jYWxpdHkgPSAodXRpbHMuaXNEZWZpbmVkKGRlZk9iai5sb2NhbGl0eSkgPyBkZWZPYmoubG9jYWxpdHkgKyAnLCAnIDogJycpO1xuICAgICAgICAgICAgICAgIHZhciBjb3VudHJ5Q29kZSA9ICh1dGlscy5pc0RlZmluZWQoZGVmT2JqLmNvdW50cnlfY29kZSkgPyBkZWZPYmouY291bnRyeV9jb2RlICsgJyAnIDogJycpO1xuICAgICAgICAgICAgICAgIHZhciBwb3N0YWxDb2RlID0gKHV0aWxzLmlzRGVmaW5lZChkZWZPYmoucG9zdGFsX2NvZGUpID8gZGVmT2JqLnBvc3RhbF9jb2RlIDogJycpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIChhZGRyZXNzTGluZSArIGxvY2FsaXR5ICsgY291bnRyeUNvZGUgKyBwb3N0YWxDb2RlKS50cmltKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGYuaWQgPSBnZXRQcm9wZXJ0eShcImlkXCIpO1xuICAgICAgICAgICAgc2VsZi5hZGRyZXNzX2xpbmUgPSBnZXRQcm9wZXJ0eShcImFkZHJlc3NfbGluZVwiKTtcbiAgICAgICAgICAgIHNlbGYubG9jYWxpdHkgPSBnZXRQcm9wZXJ0eShcImxvY2FsaXR5XCIpO1xuICAgICAgICAgICAgc2VsZi5kaXN0cmljdCA9IGdldFByb3BlcnR5KFwiZGlzdHJpY3RcIik7XG4gICAgICAgICAgICBzZWxmLnBvc3RhbF9jb2RlID0gZ2V0UHJvcGVydHkoXCJwb3N0YWxfY29kZVwiKTtcbiAgICAgICAgICAgIHNlbGYuY291bnRyeSA9IGdldFByb3BlcnR5KFwiY291bnRyeVwiKTtcbiAgICAgICAgICAgIHNlbGYuY291bnRyeV9jb2RlID0gZ2V0UHJvcGVydHkoXCJjb3VudHJ5X2NvZGVcIik7XG4gICAgICAgICAgICBzZWxmLmNvb3JkaW5hdGVzID0gZ2V0UHJvcGVydHkoXCJjb29yZGluYXRlc1wiKTtcblxuICAgICAgICAgICAgLy8gVE9ETzogQ29udmVydCB0aGlzIHRvIGEgbWV0aG9kIHRoYXQgYnVpbGRzIGJhc2VkIG9mZiBvZiB0aGUgY3VycmVudCBvYmplY3QncyBwcm9wZXJ0aWVzLlxuICAgICAgICAgICAgLy8gVW5sZXNzIHRoaXMgaXMgbmVlZGVkIGZvciB0aGUgQVBJIHNwZWNpZmljYWxseSwgdGhlbiBoYXZlIHRoaXMgYnVpbHQgaW4gYSBzaW1pbGFyIGZ1bmN0aW9uIGFzIHRoZSBvbmUgaW5cbiAgICAgICAgICAgIC8vIEVudGl0eU1vZGVsIGZvciBidWlsZGluZyBBUEkgc3BlY2lmaWMgb2JqZWN0c1xuICAgICAgICAgICAgc2VsZi5mb3JtYXR0ZWRBZGRyZXNzID0gYnVpbGRGb3JtYXR0ZWRBZGRyZXNzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRMb2NhdGlvbk1vZGVsKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBMb2NhdGlvbihvYmopO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiZ2V0TG9jYXRpb25Nb2RlbFwiOiBnZXRMb2NhdGlvbk1vZGVsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgU2VydmljZS4kaW5qZWN0ID0gW1wiY2dVdGlsU2VydmljZVwiXTtcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnY2l2aWMtZ3JhcGguYXBpJylcbiAgICAgICAgLmZhY3RvcnkoJ2xvY2F0aW9uU2VydmljZScsIFNlcnZpY2UpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNy8xNi5cbiAqL1xuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIGdldEVudGl0eVR5cGVzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJHb3Zlcm5tZW50XCI6IHRydWUsXG4gICAgICAgICAgICBcIkZvci1Qcm9maXRcIjogdHJ1ZSxcbiAgICAgICAgICAgIFwiTm9uLVByb2ZpdFwiOiB0cnVlLFxuICAgICAgICAgICAgXCJJbmRpdmlkdWFsXCI6IHRydWVcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRJbmZsdWVuY2VUeXBlcygpIHtcbiAgICAgICAgcmV0dXJuIFtcIkxvY2FsXCIsIFwiTmF0aW9uYWxcIiwgXCJHbG9iYWxcIl07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gU2VydmljZShhcGlDYWxsZXIsIGZ1bkNvbm5TZXJ2aWNlLCBjb25uU2VydmljZSwgZmluYW5jZVNlcnZpY2UsIGxvY2F0aW9uU2VydmljZSwgY2F0ZWdvcnlTZXJ2aWNlLCB1dGlscykge1xuXG4gICAgICAgIGZ1bmN0aW9uIEVudGl0eShvYmopIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIHZhciBkZWZPYmogPSB1dGlscy5pc0RlZmluZWQob2JqKSA/IG9iaiA6IHt9O1xuICAgICAgICAgICAgdmFyIGdldFByb3BlcnR5ID0gdXRpbHMuZ2V0UHJvcGVydHlGcm9tT2JqKG9iaik7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlREJNb2RlbCgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGJNb2RlbCA9IG5ldyBFbnRpdHkoc2VsZik7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5sb2NhdGlvbnMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5sb2NhdGlvbnMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5ncmFudHNfcmVjZWl2ZWQucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5ncmFudHNfcmVjZWl2ZWQucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5ncmFudHNfZ2l2ZW4ucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5ncmFudHNfZ2l2ZW4ucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5pbnZlc3RtZW50c19yZWNlaXZlZC5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmludmVzdG1lbnRzX3JlY2VpdmVkLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuaW52ZXN0bWVudHNfbWFkZS5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmludmVzdG1lbnRzX21hZGUucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5kYXRhX2dpdmVuLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZGF0YV9naXZlbi5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmRhdGFfcmVjZWl2ZWQucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5kYXRhX3JlY2VpdmVkLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuY29sbGFib3JhdGlvbnMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5jb2xsYWJvcmF0aW9ucy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmtleV9wZW9wbGUucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5rZXlfcGVvcGxlLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZW1wbG95bWVudHMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5lbXBsb3ltZW50cy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLnJldmVudWVzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwucmV2ZW51ZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5leHBlbnNlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmV4cGVuc2VzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuY2F0ZWdvcmllcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmNhdGVnb3JpZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5kZXNjcmlwdGlvbiA9ICcnO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRiTW9kZWw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGYuaWQgPSBnZXRQcm9wZXJ0eShcImlkXCIpO1xuICAgICAgICAgICAgc2VsZi5uYW1lID0gZ2V0UHJvcGVydHkoXCJuYW1lXCIpO1xuICAgICAgICAgICAgc2VsZi5pbmZsdWVuY2UgPSBnZXRQcm9wZXJ0eShcImluZmx1ZW5jZVwiKTtcbiAgICAgICAgICAgIHNlbGYudHlwZSA9IGdldFByb3BlcnR5KFwidHlwZVwiKTtcbiAgICAgICAgICAgIHNlbGYubmlja25hbWUgPSBnZXRQcm9wZXJ0eShcIm5pY2tuYW1lXCIpO1xuICAgICAgICAgICAgc2VsZi51cmwgPSBnZXRQcm9wZXJ0eShcInVybFwiKTtcbiAgICAgICAgICAgIHNlbGYudHdpdHRlcl9oYW5kbGUgPSBnZXRQcm9wZXJ0eShcInR3aXR0ZXJfaGFuZGxlXCIpO1xuICAgICAgICAgICAgc2VsZi5lbXBsb3llZXMgPSBnZXRQcm9wZXJ0eShcImVtcGxveWVlc1wiKTtcblxuICAgICAgICAgICAgc2VsZi5sb2NhdGlvbnMgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmoubG9jYXRpb25zLCBsb2NhdGlvblNlcnZpY2UuZ2V0TG9jYXRpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmdyYW50c19yZWNlaXZlZCA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5ncmFudHNfcmVjZWl2ZWQsIGZ1bkNvbm5TZXJ2aWNlLmdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5pbnZlc3RtZW50c19yZWNlaXZlZCA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5pbnZlc3RtZW50c19yZWNlaXZlZCwgZnVuQ29ublNlcnZpY2UuZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmdyYW50c19naXZlbiA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5ncmFudHNfZ2l2ZW4sIGZ1bkNvbm5TZXJ2aWNlLmdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5pbnZlc3RtZW50c19tYWRlID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmludmVzdG1lbnRzX21hZGUsIGZ1bkNvbm5TZXJ2aWNlLmdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5kYXRhX2dpdmVuID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmRhdGFfZ2l2ZW4sIGNvbm5TZXJ2aWNlLmdldENvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmRhdGFfcmVjZWl2ZWQgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouZGF0YV9yZWNlaXZlZCwgY29ublNlcnZpY2UuZ2V0Q29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuY29sbGFib3JhdGlvbnMgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouY29sbGFib3JhdGlvbnMsIGNvbm5TZXJ2aWNlLmdldENvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmtleV9wZW9wbGUgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmoua2V5X3Blb3BsZSwgY29ublNlcnZpY2UuZ2V0Q29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuZW1wbG95bWVudHMgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouZW1wbG95bWVudHMsIGNvbm5TZXJ2aWNlLmdldENvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLnJldmVudWVzID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLnJldmVudWVzLCBmaW5hbmNlU2VydmljZS5nZXRGaW5hbmNlTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5leHBlbnNlcyA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5leHBlbnNlcywgZmluYW5jZVNlcnZpY2UuZ2V0RmluYW5jZU1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuY2F0ZWdvcmllcyA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5jYXRlZ29yaWVzLCBjYXRlZ29yeVNlcnZpY2UuZ2V0Q2F0ZWdvcnlNb2RlbCk7XG5cbiAgICAgICAgICAgIHNlbGYuZ2VuZXJhdGVEQk1vZGVsID0gZ2VuZXJhdGVEQk1vZGVsO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RW50aXR5TW9kZWwob2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEVudGl0eShvYmopO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0QWxsKCkge1xuICAgICAgICAgICAgcmV0dXJuIGFwaUNhbGxlci5nZXQoJy9lbnRpdGllcycpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2F2ZUVudGl0eShlbnRpdHkpIHtcbiAgICAgICAgICAgIHJldHVybiBhcGlDYWxsZXIucG9zdChcIi9zYXZlXCIsIHsgXCJlbnRpdHlcIjogZW50aXR5IH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiZ2V0RW50aXR5TW9kZWxcIjogZ2V0RW50aXR5TW9kZWwsXG4gICAgICAgICAgICBcImdldEVudGl0eVR5cGVzXCI6IGdldEVudGl0eVR5cGVzLFxuICAgICAgICAgICAgXCJnZXRJbmZsdWVuY2VUeXBlc1wiOiBnZXRJbmZsdWVuY2VUeXBlcyxcbiAgICAgICAgICAgIFwiZ2V0QWxsXCI6IGdldEFsbCxcbiAgICAgICAgICAgIFwic2F2ZUVudGl0eVwiOiBzYXZlRW50aXR5XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgU2VydmljZS4kaW5qZWN0ID0gW1xuICAgICAgICBcImNnQXBpQ2FsbGVyXCIsXG4gICAgICAgIFwiZnVuZGluZ0Nvbm5lY3Rpb25TZXJ2aWNlXCIsXG4gICAgICAgIFwiY29ubmVjdGlvblNlcnZpY2VcIixcbiAgICAgICAgXCJmaW5hbmNlU2VydmljZVwiLFxuICAgICAgICBcImxvY2F0aW9uU2VydmljZVwiLFxuICAgICAgICBcImNhdGVnb3J5U2VydmljZVwiLFxuICAgICAgICBcImNnVXRpbFNlcnZpY2VcIlxuICAgIF07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIilcbiAgICAgICAgLmZhY3RvcnkoXCJlbnRpdHlTZXJ2aWNlXCIsIFNlcnZpY2UpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNy8xMC8xNi5cbiAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBjb250cm9sRGVwcyA9IFtcbiAgICAgICAgJ2VudGl0eVNlcnZpY2UnLFxuICAgICAgICAnY29ubmVjdGlvblNlcnZpY2UnLFxuICAgICAgICAnJHJvb3RTY29wZScsXG4gICAgICAgICdfJyxcbiAgICAgICAgJyRtb2RhbCcsXG4gICAgICAgIGNvbnRyb2xDdHJsXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIGNvbnRyb2xDdHJsKGVudGl0eVNlcnZpY2UsIGNvbm5lY3Rpb25TZXJ2aWNlLCAkcm9vdFNjb3BlLCBfLCAkbW9kYWwpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgdm0uZW50aXR5VHlwZXMgPSBlbnRpdHlTZXJ2aWNlLmdldEVudGl0eVR5cGVzKCk7XG4gICAgICAgIHZtLmNvbm5lY3Rpb25UeXBlcyA9IGNvbm5lY3Rpb25TZXJ2aWNlLmdldENvbm5lY3Rpb25UeXBlcygpO1xuICAgICAgICB2bS5zaXplQnlMaXN0ID0gW1xuICAgICAgICAgICAgeyduYW1lJzogJ0VtcGxveWVlcycsICd2YWx1ZSc6ICdlbXBsb3llZXMnfSxcbiAgICAgICAgICAgIHsnbmFtZSc6ICdUd2l0dGVyIEZvbGxvd2VycycsICd2YWx1ZSc6ICdmb2xsb3dlcnMnfVxuICAgICAgICBdO1xuICAgICAgICB2bS5zaXplQnkgPSAnZW1wbG95ZWVzJztcbiAgICAgICAgdm0uc2hvd1ZpZXcgPSB7XG4gICAgICAgICAgICAnTmV0d29yayc6IHRydWUsXG4gICAgICAgICAgICAnTWFwJzogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgdm0uc3dpdGNoVmlldyA9IHN3aXRjaFZpZXc7XG4gICAgICAgIHZtLmNoYW5nZVZpZXcgPSBmdW5jdGlvbiAodmlldykge1xuICAgICAgICAgICAgXy5mb3JFYWNoKF8ua2V5cyh2bS5zaG93VmlldyksIGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgdm0uc2hvd1ZpZXdbbmFtZV0gPSB2aWV3ID09PSBuYW1lO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3ZpZXdDaGFuZ2UnLCB2bS5zaG93Vmlldyk7XG4gICAgICAgIH07XG4gICAgICAgIHZtLnNob3dBYm91dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRtb2RhbC5vcGVuKHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb246IGZhbHNlLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29udHJvbC9hYm91dC5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnbW9kYWxDdHJsJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHZtLnRvZ2dsZU5vZGUgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCd0b2dnbGVOb2RlJywgeyduYW1lJzogdHlwZSwgJ2VuYWJsZWQnOiB2bS5lbnRpdHlUeXBlc1t0eXBlXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHZtLnRvZ2dsZUxpbmsgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCd0b2dnbGVMaW5rJywgeyduYW1lJzogdHlwZSwgJ2VuYWJsZWQnOiB2bS5jb25uZWN0aW9uVHlwZXNbdHlwZV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB2bS5jaGFuZ2VTaXplQnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ2NoYW5nZVNpemVCeScsIHZtLnNpemVCeSk7XG4gICAgICAgIH07XG4gICAgICAgIGZ1bmN0aW9uIHN3aXRjaFZpZXcoKSB7XG4gICAgICAgICAgICB2bS5jaGFuZ2VWaWV3KCF2bS50b2dnbGVOZXR3b3JrID8gJ01hcCcgOiAnTmV0d29yaycpO1xuICAgICAgICB9XG5cbiAgICAgICAgdm0uY2hhbmdlU2l6ZUJ5KCk7XG5cbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29udHJvbGxlcignY29udHJvbEN0cmwnLCBjb250cm9sRGVwcyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBkZXRhaWxzQ3RybCgkc2NvcGUsIF8pIHtcbiAgICAgICAgJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0ID0ge1xuICAgICAgICAgICAgJ2tleV9wZW9wbGUnOiAzLFxuICAgICAgICAgICAgJ2dyYW50c19naXZlbic6IDMsXG4gICAgICAgICAgICAnZ3JhbnRzX3JlY2VpdmVkJzogMyxcbiAgICAgICAgICAgICdpbnZlc3RtZW50c19tYWRlJzogMyxcbiAgICAgICAgICAgICdpbnZlc3RtZW50c19yZWNlaXZlZCc6IDMsXG4gICAgICAgICAgICAnY29sbGFib3JhdGlvbnMnOiAzLFxuICAgICAgICAgICAgJ2VtcGxveW1lbnRzJzogMyxcbiAgICAgICAgICAgICdyZWxhdGlvbnMnOiAzLFxuICAgICAgICAgICAgJ2RhdGFfZ2l2ZW4nOiAzLFxuICAgICAgICAgICAgJ2RhdGFfcmVjZWl2ZWQnOiAzLFxuICAgICAgICAgICAgJ3JldmVudWVzJzogMyxcbiAgICAgICAgICAgICdleHBlbnNlcyc6IDNcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuaXRlbXNTaG93biA9IF8uY2xvbmUoJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0KTtcblxuICAgICAgICAkc2NvcGUuJG9uKCdlbnRpdHlDaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBSZXNldCBpdGVtcyBzaG93biBpbiBkZXRhaWxzIGxpc3QuXG4gICAgICAgICAgICAkc2NvcGUuaXRlbXNTaG93biA9IF8uY2xvbmUoJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0KTtcbiAgICAgICAgfSk7XG4gICAgICAgICRzY29wZS5zaG93TW9yZSA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAkc2NvcGUuaXRlbXNTaG93blt0eXBlXSA9ICRzY29wZS5jdXJyZW50RW50aXR5W3R5cGVdLmxlbmd0aDtcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLnNob3dMZXNzID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICRzY29wZS5pdGVtc1Nob3duW3R5cGVdID0gJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0W3R5cGVdO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdkZXRhaWxzQ3RybCcsIFsnJHNjb3BlJywgXCJfXCIsIGRldGFpbHNDdHJsXSk7XG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBDb25maWcoJGh0dHBQcm92aWRlcikge1xuICAgICAgICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXSA9IFwiWE1MSHR0cFJlcXVlc3RcIjtcbiAgICB9XG5cbiAgICBDb25maWcuJGluamVjdCA9IFtcIiRodHRwUHJvdmlkZXJcIl07XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKS5jb25maWcoQ29uZmlnKTtcblxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIGFwaVVybCA9IFwiaHR0cHM6Ly9hcGkuY2l2aWNncmFwaC5pby9hcGlcIjtcbiAgICAvL3ZhciBhcGlVcmwgPSBcIi9hcGlcIjtcblxuICAgIHZhciBkZWZhdWx0SGVhZGVyID0ge1xuICAgICAgICAvLyBcIkV2ZW50LU5hbWVcIjogXCJUZXN0LUV2ZW50XCJcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gU2VydmljZSgkaHR0cCwgJHEpIHtcbiAgICAgICAgZnVuY3Rpb24gbG9nQXBpRXJyb3IoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiUmVjaWV2ZWQgYW4gZXJyb3IgZnJvbSBBUEkgd2l0aCB0aGlzIG1lc3NhZ2U6ICVPXCIsIGVyci5kYXRhKTtcbiAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoZXJyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVud3JhcEFuZ3VsYXJIdHRwKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldCh1cmwsIHBhcmFtcykge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwXG4gICAgICAgICAgICAgICAgLmdldChhcGlVcmwgKyB1cmwsIHsgXCJwYXJhbXNcIjogcGFyYW1zLCBcImhlYWRlcnNcIjogZGVmYXVsdEhlYWRlciB9KVxuICAgICAgICAgICAgICAgIC50aGVuKHVud3JhcEFuZ3VsYXJIdHRwLCBsb2dBcGlFcnJvcik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBwb3N0KHVybCwgZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwXG4gICAgICAgICAgICAgICAgLnBvc3QoYXBpVXJsICsgdXJsLCBkYXRhLCB7IFwiaGVhZGVyc1wiOiBkZWZhdWx0SGVhZGVyIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4odW53cmFwQW5ndWxhckh0dHAsIGxvZ0FwaUVycm9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcImdldFwiOiBnZXQsXG4gICAgICAgICAgICBcInBvc3RcIjogcG9zdFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIFNlcnZpY2UuJGluamVjdCA9IFtcIiRodHRwXCIsIFwiJHFcIl07XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKS5mYWN0b3J5KFwiY2dBcGlDYWxsZXJcIiwgU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyLCBkMywgTCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBkZXBlbmRlbmNpZXMgPSBbXG4gICAgICAgICckc2NvcGUnLFxuICAgICAgICAnJHRpbWVvdXQnLFxuICAgICAgICAnbGVhZmxldERhdGEnLFxuICAgICAgICAnXycsXG4gICAgICAgICckZmlsdGVyJyxcbiAgICAgICAgbWFwQ3RybFxuICAgIF07XG5cbiAgICBmdW5jdGlvbiBtYXBDdHJsKCRzY29wZSwgJHRpbWVvdXQsIGxlYWZsZXREYXRhLCBfLCAkZmlsdGVyKSB7XG5cbiAgICAgICAgJHNjb3BlLm9wdGlvbnMgPSB7XG4gICAgICAgICAgICBjZW50ZXIgIDoge1xuICAgICAgICAgICAgICAgIGxhdCA6IDIwLjAwLFxuICAgICAgICAgICAgICAgIGxuZyA6IC00MC4wMCxcbiAgICAgICAgICAgICAgICB6b29tOiAzXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgICAgICB0aWxlTGF5ZXIgICAgICAgICA6ICdodHRwczovL2FwaS50aWxlcy5tYXBib3guY29tL3Y0L21hcGJveC5saWdodC97en0ve3h9L3t5fS5wbmc/YWNjZXNzX3Rva2VuPXBrLmV5SjFJam9pWkdGMmFXUnNjbTUwSWl3aVlTSTZJakEwTTJSa056TXpaV0ptTnpFek5HWXpNVGRoWVRFeFl6QXlabVU0WlRFMUluMC5UTllsRnRhMlZJdHJrbjRMMFo5QkpRJyxcbiAgICAgICAgICAgICAgICB0aWxlTGF5ZXJPcHRpb25zICA6IHtcbiAgICAgICAgICAgICAgICAgICAgZGV0ZWN0UmV0aW5hOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICByZXVzZVRpbGVzICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB6b29tQ29udHJvbCAgICAgICA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGF0dHJpYnV0aW9uQ29udHJvbDogZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY3JlYXRlUGllQ2hhcnQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhICAgPSBvcHRpb25zLmRhdGE7XG4gICAgICAgICAgICAgICAgdmFyIHBpZSAgICA9IGQzLmxheW91dC5waWUoKS5zb3J0KG51bGwpLnZhbHVlKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnZhbHVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZhciBhcmMgICAgPSBkMy5zdmcuYXJjKCkub3V0ZXJSYWRpdXMob3B0aW9ucy5yKS5pbm5lclJhZGl1cyhvcHRpb25zLnIgLSAxMCk7XG4gICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IG9wdGlvbnMuciArIG9wdGlvbnMuc3Ryb2tlV2lkdGg7XG4gICAgICAgICAgICAgICAgdmFyIHcgICAgICA9IGNlbnRlciAqIDI7XG4gICAgICAgICAgICAgICAgdmFyIGggICAgICA9IHc7XG4gICAgICAgICAgICAgICAgdmFyIHN2ZyAgICA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhkMy5ucy5wcmVmaXguc3ZnLCAnc3ZnJyk7XG4gICAgICAgICAgICAgICAgdmFyIHZpcyAgICA9IGQzLnNlbGVjdChzdmcpXG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKGRhdGEpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdwaWVjaGFydCcpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHcpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBoKTtcblxuICAgICAgICAgICAgICAgIHZhciBhcmNzID0gdmlzLnNlbGVjdEFsbCgnLmFyYycpXG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKHBpZShkYXRhKSlcbiAgICAgICAgICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKCdnJylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2FyYycpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBjZW50ZXIgKyAnLCcgKyBjZW50ZXIgKyAnKScpO1xuXG4gICAgICAgICAgICAgICAgLy8gdmFyIG1hcCA9IEwubWFwYm94Lm1hcCgnbWFwJywgJ2V4YW1wbGVzLm1hcC05aWp1azI0eScsIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgbWluWm9vbTogMSxcbiAgICAgICAgICAgICAgICAvLyAgICAgbWF4Wm9vbTogMlxuICAgICAgICAgICAgICAgIC8vIH0pLnNldFZpZXcoWzQwLCAtNzQuNTBdLCA5KTtcblxuICAgICAgICAgICAgICAgIGFyY3MuYXBwZW5kKCdwYXRoJylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCBhcmMpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5kYXRhLnR5cGUgKyAnLWFyYyc7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgYXJjcy5hcHBlbmQoXCJzdmc6dGV4dFwiKVxuICAgICAgICAgICAgICAgICAgICAudGV4dChmdW5jdGlvbiAoZCwgaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5jb3VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIC00ICogb3B0aW9ucy5jb3VudC50b1N0cmluZygpLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJkeVwiLCA1KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiYXJjVGV4dFwiKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB3aW5kb3cuWE1MU2VyaWFsaXplciA/IChuZXcgd2luZG93LlhNTFNlcmlhbGl6ZXIoKSkuc2VyaWFsaXplVG9TdHJpbmcoc3ZnKVxuICAgICAgICAgICAgICAgICAgICA6IHN2Zy54bWwgPyBzdmcueG1sIDogJyc7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBsZWFmbGV0RGF0YS5nZXRNYXAoKS50aGVuKGZ1bmN0aW9uIChtYXApIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWRFbnRpdGllcyA9ICRzY29wZS5lbnRpdGllcztcblxuICAgICAgICAgICAgICAgIG1hcC5pbnZhbGlkYXRlU2l6ZSgpO1xuXG4gICAgICAgICAgICAgICAgbmV3IEwuQ29udHJvbC5ab29tKHtwb3NpdGlvbjogJ3RvcHJpZ2h0J30pLmFkZFRvKG1hcCk7XG4gICAgICAgICAgICAgICAgTC5jb250cm9sLmxvY2F0ZShcbiAgICAgICAgICAgICAgICAgICAge3Bvc2l0aW9uOiAndG9wcmlnaHQnLCBzaG93UG9wdXA6IGZhbHNlLCBpY29uOiAnZmEgZmEtbG9jYXRpb24tYXJyb3cnfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRvKG1hcCk7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjbHVzdGVySWNvbihjbHVzdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZHJlbiAgICAgICA9IGNsdXN0ZXIuZ2V0QWxsQ2hpbGRNYXJrZXJzKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b3RhbCAgICAgICAgICA9IGNoaWxkcmVuLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNsdXN0ZXJNYXJrZXJzID0gXy5wbHVjayhjaGlsZHJlbiwgJ29wdGlvbnMnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50cyAgICAgICAgID0gXy5tYXAoXy5jb3VudEJ5KGNsdXN0ZXJNYXJrZXJzLCAndHlwZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoY291bnQsIHR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7J3R5cGUnOiB0eXBlLCAndmFsdWUnOiBjb3VudH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgciAgICAgICAgICAgICAgPSAyODtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0cm9rZVdpZHRoICAgID0gMTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGljb25EaW0gICAgICAgID0gKHIgKyBzdHJva2VXaWR0aCkgKiAyO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaHRtbCAgICAgICAgICAgPSBjcmVhdGVQaWVDaGFydChcbiAgICAgICAgICAgICAgICAgICAgICAgIHtkYXRhOiBjb3VudHMsIHI6IHIsIHN0cm9rZVdpZHRoOiBzdHJva2VXaWR0aCwgY291bnQ6IHRvdGFsfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTC5EaXZJY29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgICAgIDogaHRtbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ21hcmtlci1jbHVzdGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb25TaXplIDogbmV3IEwucG9pbnQoaWNvbkRpbSwgaWNvbkRpbSlcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBtYXJrZXJJY29uICA9IHtcbiAgICAgICAgICAgICAgICAgICAgJ05vbi1Qcm9maXQnOiBMLmljb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblVybCA6ICdpbWcvbWFya2VyLW5vbnByb2Yuc3ZnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TaXplOiBbNjAsIDYwXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgJ0Zvci1Qcm9maXQnOiBMLmljb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblVybCA6ICdpbWcvbWFya2VyLXByb2Yuc3ZnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TaXplOiBbNjAsIDYwXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgJ0luZGl2aWR1YWwnOiBMLmljb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblVybCA6ICdpbWcvbWFya2VyLWluZC5zdmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblNpemU6IFs2MCwgNjBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAnR292ZXJubWVudCc6IEwuaWNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uVXJsIDogJ2ltZy9tYXJrZXItZ292LnN2ZycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZTogWzYwLCA2MF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgdmFyIG1hcmtlcnMgPSBMLm1hcmtlckNsdXN0ZXJHcm91cCh7XG5cbiAgICAgICAgICAgICAgICAgICAgc3BpZGVyZnlPbk1heFpvb206IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHNob3dDb3ZlcmFnZU9uSG92ZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpY29uQ3JlYXRlRnVuY3Rpb246IGNsdXN0ZXJJY29uLFxuICAgICAgICAgICAgICAgICAgICBtYXhDbHVzdGVyUmFkaXVzOiAzMCxcbiAgICAgICAgICAgICAgICAgICAgc3BpZGVyZnlEaXN0YW5jZU11bHRpcGxpZXI6IDEuM1xuICAgICAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBvdXRlckxvb3AoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGlubmVyTG9vcChsb2MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghXy5ldmVyeShsb2MuY29vcmRpbmF0ZXMpKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jLmNvb3JkaW5hdGVzWzBdLnRvRml4ZWQoNSkgPT09ICc0MC43ODIwMCcgJiYgbG9jLmNvb3JkaW5hdGVzWzFdLnRvRml4ZWQoNSkgPT09ICctNzMuODMxNzAnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jLmNvb3JkaW5hdGVzWzBdID0gNDAuNzcwNjU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jLmNvb3JkaW5hdGVzWzFdID0gLTczLjk3NDA2O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSBMLm1hcmtlcihsb2MuY29vcmRpbmF0ZXMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBtYXJrZXJJY29uW2VudGl0eS50eXBlXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGl0bGUnOiBlbnRpdHkubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZW50aXR5X2lkJzogZW50aXR5LmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtZXNzYWdlJzogZW50aXR5Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiBlbnRpdHkudHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzLmFkZExheWVyKG0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgXy5mb3JFYWNoKGVudGl0eS5sb2NhdGlvbnMsIGlubmVyTG9vcCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJPcmlnaW5hbDogJU9cIiwgJHNjb3BlLmVudGl0aWVzKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZpbHRlcmVkOiAlT1wiLCBmaWx0ZXJlZEVudGl0aWVzKTtcblxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChmaWx0ZXJlZEVudGl0aWVzLCBvdXRlckxvb3ApO1xuICAgICAgICAgICAgICAgIG1hcC5hZGRMYXllcihtYXJrZXJzKTtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9uTG9jYXRpb25FcnJvcihsZWFmbGV0RXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihsZWFmbGV0RXJyb3IubWVzc2FnZSArIFwiICAlT1wiLCBsZWFmbGV0RXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG1hcC5vbignbG9jYXRpb25lcnJvcicsIG9uTG9jYXRpb25FcnJvcik7XG4gICAgICAgICAgICAgICAgLy8gbWFwLmxvY2F0ZSh7c2V0VmlldzogdHJ1ZSwgbWF4Wm9vbTogMTF9KTtcbiAgICAgICAgICAgICAgICBtYXJrZXJzLm9uKCdjbGljaycsIGZ1bmN0aW9uIChtYXJrZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNldEVudGl0eUlEKG1hcmtlci5sYXllci5vcHRpb25zLmVudGl0eV9pZCk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9ICRzY29wZS5jdXJyZW50RW50aXR5O1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbnRlcmFjdGVkICAgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnNldHRpbmdzRW5hYmxlZCAmJiAkc2NvcGUubW9iaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudG9nZ2xlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBtYXAub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbnRlcmFjdGVkICAgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLiRvbignc2VsZWN0SXRlbScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gJHNjb3BlLmN1cnJlbnRFbnRpdHkubG9jYXRpb25zLmxlbmd0aCA+IDAgPyBfLnBsdWNrKFxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRFbnRpdHkubG9jYXRpb25zLCAnY29vcmRpbmF0ZXMnKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb29yZGluYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXAuc2V0Vmlldyhjb29yZGluYXRlc1swXSwgMTEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcblxuICAgICAgICAuY29udHJvbGxlcignbWFwQ3RybCcsIGRlcGVuZGVuY2llcyk7XG59KShhbmd1bGFyLCBkMywgTCk7XG4iXX0=
