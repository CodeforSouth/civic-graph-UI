!function(e){"use strict";var t=["ui.bootstrap","leaflet-directive","ngAnimate","templateCache"];e.module("civic-graph",t)}(angular);
!function(t){"use strict";function a(){return{templateUrl:"js/analytic/analytics.html",restrict:"E",scope:{},controller:"analyticsCtrl"}}var c=[a];t.module("civic-graph").directive("analytics",c)}(angular);
!function(o){"use strict";function r(){return{templateUrl:"js/control/controls.html",restrict:"E",scope:{toggleNetwork:"="},controller:"controlCtrl",controllerAs:"control",bindToController:{minConnections:"="}}}var t=[r];o.module("civic-graph").directive("control",t)}(angular);
!function(t){"use strict";function e(){return{templateUrl:"js/edit-entity/edit.html",restrict:"E",scope:{entity:"=",entities:"=",isOpen:"="},controller:"editCtrl"}}var i=[e];t.module("civic-graph").directive("editEntity",i)}(angular);
!function(i,t){"use strict";function s(i){function s(){var i=t(this);i.css("height","55vh")}function c(){var i=t(this);window.innerHeight/3>parseInt(i.css("height"))?i.css("height","55vh"):i.css("height","30vh")}var e;i.mobile&&(e=t("#details-panel"),e.css("height","30vh"),e.scrollTop(0),e.scroll(s),e.click(c))}function c(){return{restrict:"A",link:s}}i.module("civic-graph").directive("addMobileEvents",[c])}(angular,$);
!function(o){"use strict";function c(o,c){o.closeWindow=function(){c.close()}}o.module("civic-graph").controller("modalCtrl",["$scope","$modalInstance",c])}(angular);
!function(i){"use strict";var a=[];i.module("civic-graph").directive("map",a)}(angular);
!function(t){"use strict";t.module("civic-graph").constant("_",window._).constant("config",{apiHost:"https://api.civicgraph.io/"}).config(["$locationProvider","$httpProvider","$compileProvider",function(t,o,i){t.html5Mode(!0),o.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",i.debugInfoEnabled(!0)}]).filter("thousandSuffix",function(){return function(t,o){var i,n=["k","M","G","T","P","E"];return window.isNaN(t)?null:t<1e3?t:(i=Math.floor(Math.log(t)/Math.log(1e3)),(t/Math.pow(1e3,i)).toFixed(o)+n[i-1])}})}(angular);
!function(t){"use strict";function i(t,i,e,n,o,s){t.entities=[],t.searchItems=null,t.categories=[],t.currentLocation=null,t.clickedLocation={},t.clickedLocation.location=null,t.clickedEntity={},t.clickedEntity.entity=null,t.editing=!1,t.actions={interacted:!1},t.showsearchMB=!1,t.showAnalytics=!1,t.entityTypes=n.getEntityTypes(),t.connectionTypes=o.getConnectionTypes(),t.status={isNetworkShown:!0,license:!0,networkLoading:!0},t.toggleAnalytics=function(){t.showAnalytics=!t.showAnalytics},this.minConnections=t.minConnections=2;var a=this;t.$watch("minConnections",function(){t.$broadcast("entitiesLoaded")}),t.connectionChange=function(){console.log(a.minConnections),t.minConnections=a.minConnections,t.$broadcast("entitiesLoaded")},t.hydePartials=function(i){"search"===i?(t.editing=!1,t.settingsEnabled=!1):"settings"===i?(t.editing=!1,t.showsearchMB=!1):"edit"===i?(t.settingsEnabled=!1,t.showsearchMB=!1):(t.editing=!1,t.settingsEnabled=!1,t.showsearchMB=!1)},t.showSearch=function(){t.hydePartials("search"),t.showsearchMB=!t.showsearchMB,t.status.license=!1},t.toggleSettings=function(){t.hydePartials("settings"),t.settingsEnabled=!t.settingsEnabled},t.startEdit=function(i){t.currentEntity=i,t.mobile&&t.hydePartials("edit"),t.editing=!0},t.switchView=function(){t.status.isNetworkShown=!t.status.isNetworkShown},window.mobilecheck=function(){var t=!1,i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,e=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i;return function(n){(i.test(n)||e.test(n.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},t.mobile=window.mobilecheck(),t.settingsEnabled=!t.mobile,setTimeout(function(){i.get(s.apiHost+"api/entities").success(function(i){t.entities=i.nodes;var n=e.uniq(e.pluck(e.flatten(e.pluck(t.entities,"locations")),"locality")),o=e.map(n,function(i){var n=e.filter(t.entities,e.flow(e.property("locations"),e.partialRight(e.any,{locality:i})));return{name:i,type:"location",entities:n,dict:e.zipObject(e.pluck(n,"name"),e.pluck(n,"index"))}});t.searchItems=o.concat(t.entities),t.overviewUrl="js/overview/overview.html",t.$broadcast("entitiesLoaded")})},100),t.overviewUrl=null,t.setEntity=function(i){t.currentLocation=null,t.currentEntity=i,t.editing&&t.stopEdit(),t.$broadcast("entityChange")},t.setEntityID=function(i){t.setEntity(e.find(t.entities,{id:i}))},t.setLocation=function(i){t.currentLocation=i,t.editing&&t.stopEdit(),t.$broadcast("itemChange")},t.selectItem=function(i){"location"===i.type?t.setLocation(i):t[i%1===0?"setEntityID":"setEntity"](i),t.$broadcast("selectItem",i)},t.$on("setCurrentEntity",function(i,e){t.currentEntity=e.value}),t.$on("setCurrentLocation",function(i,e){t.currentLocation=e.value}),t.setEntities=function(i){t.entities=i},t.stopEdit=function(){t.editing=!1},t.$on("editEntitySuccess",function(i){t.setEntities(i.nodes),t.$broadcast("entitiesLoaded")}),t.animationsEnabled=!0}var e=["$scope","$http","_","entityService","connectionService","config",i];t.module("civic-graph").controller("homeCtrl",e)}(angular);
!function(r){"use strict";function t(){return{restrict:"E",templateUrl:"js/network/network.html",controller:"networkCtrl"}}var e=[t];r.module("civic-graph").directive("network",e)}(angular);
!function(e){"use strict";e.module("civic-graph").directive("input",function(){return{restict:"E",require:"?ngModel",link:function(e,r,t,i){"type"in t&&"range"===t.type.toLowerCase()&&i.$parsers.push(parseFloat)}}})}(angular);
!function(e){"use strict";function t(e,t){e.categorizedEntities={},t.forEach(t.keys(e.entityTypes),function(i){e.categorizedEntities[i]=t.filter(e.entities,{type:i})})}e.module("civic-graph").controller("overviewCtrl",["$scope","_",t])}(angular);
!function(c){"use strict";function n(c){}c.module("civic-graph").controller("analyticsCtrl",["$scope",n])}(angular);
!function(e){"use strict";function n(e,n){e.itemsShownDefault={key_people:3,grants_given:3,grants_received:3,investments_made:3,investments_received:3,collaborations:3,employments:3,relations:3,data_given:3,data_received:3,revenues:3,expenses:3},e.itemsShown=n.clone(e.itemsShownDefault),e.$on("entityChange",function(){e.itemsShown=n.clone(e.itemsShownDefault)}),e.showMore=function(n){e.itemsShown[n]=e.currentEntity[n].length},e.showLess=function(n){e.itemsShown[n]=e.itemsShownDefault[n]}}e.module("civic-graph").controller("detailsCtrl",["$scope","_",n])}(angular);
!function(e){"use strict";function o(e,o,n,t,i){function c(){a.changeView(a.toggleNetwork?"Network":"Map")}var a=this;a.entityTypes=e.getEntityTypes(),a.connectionTypes=o.getConnectionTypes(),a.sizeByList=[{name:"Employees",value:"employees"},{name:"Twitter Followers",value:"followers"}],a.sizeBy="employees",a.showView={Network:!0,Map:!1},a.switchView=c,a.changeView=function(e){t.forEach(t.keys(a.showView),function(o){a.showView[o]=e===o}),console.log("this happened"),n.$broadcast("viewChange",a.showView)},a.showAbout=function(){i.open({animation:!1,templateUrl:"control/about.html",controller:"modalCtrl"})},a.toggleNode=function(e){n.$broadcast("toggleNode",{name:e,enabled:a.entityTypes[e]})},a.toggleLink=function(e){n.$broadcast("toggleLink",{name:e,enabled:a.connectionTypes[e]})},a.changeSizeBy=function(){n.$broadcast("changeSizeBy",a.sizeBy)},a.changeSizeBy()}var n=["entityService","connectionService","$rootScope","_","$modal",o];e.module("civic-graph").controller("controlCtrl",n)}(angular);
!function(t){"use strict";function e(t){return void 0!==t&&null!==t}function i(i,n,o,s,c,a,r){function d(){var t,e,n,o;for(e in i.categories)if(i.categories.hasOwnProperty(e)){t=i.categories[e];for(n in i.editEntity.categories)i.editEntity.categories.hasOwnProperty(n)&&(o=i.editEntity.categories[n],t.id===o.id&&(t.enabled=o.enabled))}}i.isEditing=!1,i.editEntity=c.getEntityModel(i.entity),i.entityTypes=c.getEntityTypes(),i.influenceTypes=c.getInfluenceTypes();var u;i.categories=[],i.addressSearch=function(t){return n.jsonp("https://dev.virtualearth.net/REST/v1/Locations",{params:{query:t,key:"Ai58581yC-Sr7mcFbYTtUkS3ixE7f6ZuJnbFJCVI4hAtW1XoDEeZyidQz2gLCCyD",jsonp:"JSON_CALLBACK",include:"ciso2"}}).then(function(t){if(e(t.data.resourceSets)&&t.data.resourceSets.length>0)return t.data.resourceSets[0].resources})},i.toggleCategory=function(t){if(0===i.editEntity.categories.length)i.editEntity.categories.push(t);else{var e=!1;for(var n in i.editEntity.categories)if(i.editEntity.categories.hasOwnProperty(n)){var o=i.editEntity.categories[n];if(o.id===t.id){e=!0,o.enabled=t.enabled;break}}e||i.editEntity.categories.push(t)}},i.setLocation=function(t,n){i.addressSearch(t.formattedAddress).then(function(o){var s=o[0],c=s.address,a=s.point;i.addLocation(n),t.address_line=e(c.addressLine)?c.addressLine:"",t.locality=e(c.locality)?c.locality:"",t.district=e(c.adminDistrict)?c.adminDistrict:"",t.country=e(c.countryRegion)?c.countryRegion:null,t.country_code=e(c.countryRegionIso2)?c.countryRegionIso2:"",t.coordinates=e(a.coordinates)?a.coordinates:null,t.postal_code=e(c.postalCode)?c.postalCode:null})},i.addLocation=function(t){t&&i.editEntity.locations.push(a.getLocationModel())},i.addKeyPerson=function(){s.some(i.editEntity.key_people,{name:"",id:null})||i.editEntity.key_people.push({name:"",id:null})},i.setFundingConnection=function(t,e){e.entity_id=t.id},i.addFundingConnection=function(t){s.some(t,{entity:""})||t.push({entity:"",amount:null,year:null,id:null})},i.setConnection=function(t,e){e.entity_id=t.id},i.addConnection=function(t){s.some(t,{entity:"",id:null})||t.push({entity:"",id:null,details:null})},i.addFinance=function(t){s.every(t,function(t){return t.amount>0&&t.year>1750})&&t.push({amount:null,year:null,id:null})},i.save=function(){i.isSaving=!0,console.log(i.editEntity.generateDBModel()),n.post(r.apiHost+"api/save",{entity:i.editEntity.generateDBModel()}).success(function(t){i.isSaving=!1,i.$emit("editEntitySuccess",t),i.cancelEdit()}).error(function(){i.isError=!0,o(function(){i.isError=!1},2e3)})},i.cancelEdit=function(){i.isOpen=!1},i.$watch("entity",function(n,o){t.equals(n,o)||(console.log(i.entity),i.editEntity=c.getEntityModel(n),i.categories=t.copy(u),d(),i.isEditing=e(i.editEntity.id))}),n.get(r.apiHost+"api/categories").success(function(e){u=e.categories,i.categories=t.copy(u)})}var n=["$scope","$http","$timeout","_","entityService","locationService","config",i];t.module("civic-graph").controller("editCtrl",n)}(angular);
!function(n){"use strict";function e(){function n(n){return void 0!==n&&null!==n}function e(e){var i=n(e)?e:{};this.name=n(i.name)?i.name:null,this.enabled=!n(i.enable)||i.enabled,this.id=n(i.id)?i.id:null}this.getCategoryModel=function(n){return new e(n)}}var i=[e];n.module("civic-graph").service("categoryService",i)}(angular);
!function(n){"use strict";function t(n){return void 0!==n&&null!==n}function i(){function n(n){var i=t(n);this.entity=i&&t(n.entity)?n.entity:null,this.id=i&&t(n.id)?n.id:null,this.details=i&&t(n.details)?n.details:null,this.name=i&&t(n.name)?n.name:null,this.entity_id=i&&t(n.entity_id)?n.entity_id:null}this.getConnectionModel=function(t){return new n(t)},this.getConnectionTypes=function(){return l}}var e=[i],l={Funding:!0,Data:!0,Employment:!0,Collaboration:!0};n.module("civic-graph").service("connectionService",e)}(angular);
!function(e){"use strict";function n(n,t,i,o,s){function p(e){return void 0!==e&&null!==e}function r(n,t){if(!p(n)&&!e.isArray(n))return[t()];var i,o,s=[];for(i in n)n.hasOwnProperty(i)&&(o=n[i],e.isObject(o)&&s.push(t(o)));return s.push(t()),s}function a(e){var l=this,c=p(e)?e:{};this.id=p(c.id)?c.id:null,this.name=p(c.name)?c.name:null,this.locations=r(c.locations,o.getLocationModel),this.influence=p(c.influence)?c.influence:null,this.grants_received=r(c.grants_received,n.getFundingConnectionModel),this.investments_received=r(c.investments_received,n.getFundingConnectionModel),this.grants_given=r(c.grants_given,n.getFundingConnectionModel),this.investments_made=r(c.investments_made,n.getFundingConnectionModel),this.data_given=r(c.data_given,t.getConnectionModel),this.data_received=r(c.data_received,t.getConnectionModel),this.collaborations=r(c.collaborations,t.getConnectionModel),this.key_people=r(c.key_people,t.getConnectionModel),this.employments=r(c.employments,t.getConnectionModel),this.revenues=r(c.revenues,i.getFinanceModel),this.expenses=r(c.expenses,i.getFinanceModel),this.categories=r(c.categories,s.getCategoryModel),this.type=p(c.type)?c.type:null,this.nickname=p(c.nickname)?c.nickname:null,this.url=p(c.url)?c.url:null,this.twitter_handle=p(c.twitter_handle)?c.twitter_handle:null,this.employees=p(c.employees)?c.employees:null,this.generateDBModel=function(){var e=new a(l);return e.locations.pop(),e.locations.pop(),e.grants_received.pop(),e.grants_received.pop(),e.grants_given.pop(),e.grants_given.pop(),e.investments_received.pop(),e.investments_received.pop(),e.investments_made.pop(),e.investments_made.pop(),e.data_given.pop(),e.data_given.pop(),e.data_received.pop(),e.data_received.pop(),e.collaborations.pop(),e.collaborations.pop(),e.key_people.pop(),e.key_people.pop(),e.employments.pop(),e.employments.pop(),e.revenues.pop(),e.revenues.pop(),e.expenses.pop(),e.expenses.pop(),e.categories.pop(),e.categories.pop(),e.description="",console.log(e),e}}var l={Government:!0,"For-Profit":!0,"Non-Profit":!0,Individual:!0},c=["Local","National","Global"];this.getEntityModel=function(e){return new a(e)},this.getEntityTypes=function(){return l},this.getInfluenceTypes=function(){return c}}var t=["fundingConnectionService","connectionService","financeService","locationService","categoryService",n];e.module("civic-graph").service("entityService",t)}(angular);
!function(n){"use strict";function i(n){return void 0!==n&&null!==n}function t(){function n(n){var t=i(n)?n:{};this.amount=i(t.amount)&&t.amount>=0?t.amount:0,this.year=i(t.year)&&t.year>=1750?t.year:null,this.id=i(t.id)?t.id:null}this.getFinanceModel=function(i){return new n(i)}}var e=[t];n.module("civic-graph").service("financeService",e)}(angular);
!function(n){"use strict";function i(n){return void 0!==n&&null!==n}function t(){function n(n){var t=i(n);this.entity=t&&i(n.entity)?n.entity:"",this.amount=t&&i(n.amount)?n.amount:null,this.year=t&&i(n.year)?n.year:null,this.id=t&&i(n.id)?n.id:null}this.getFundingConnectionModel=function(i){return new n(i)}}var e=[t];n.module("civic-graph").service("fundingConnectionService",e)}(angular);
!function(t){"use strict";function i(){function t(t){return void 0!==t&&null!==t}function i(i){var s=t(i)?i:{};this.address_line=t(s.address_line)?s.address_line:null,this.locality=t(s.locality)?s.locality:null,this.district=t(s.district)?s.district:null,this.postal_code=t(s.postal_code)?s.postal_code:null,this.country=t(s.country)?s.country:null,this.country_code=t(s.country_code)?s.country_code:null,this.coordinates=t(s.coordinates)?s.coordinates:null,this.id=t(s.id)?s.id:null,this.formattedAddress=(t(this.address_line)?this.address_line+" ":"")+(t(this.locality)?this.locality+", ":"")+(t(this.country_code)?this.country_code+" ":"")+(t(this.postal_code)?this.postal_code:""),this.formattedAddress=this.formattedAddress.trim()}this.getLocationModel=function(t){return new i(t)}}var s=[i];t.module("civic-graph").service("locationService",s)}(angular);
!function(t,e,n){"use strict";function i(t,i,o,r,a){t.options={center:{lat:20,lng:-40,zoom:3},defaults:{tileLayer:"https://api.tiles.mapbox.com/v4/mapbox.light/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZGF2aWRscm50IiwiYSI6IjA0M2RkNzMzZWJmNzEzNGYzMTdhYTExYzAyZmU4ZTE1In0.TNYlFta2VItrkn4L0Z9BJQ",tileLayerOptions:{detectRetina:!0,reuseTiles:!1},zoomControl:!1,attributionControl:!1}},i(function(){var i=function(t){var n=t.data,i=e.layout.pie().sort(null).value(function(t){return t.value}),o=e.svg.arc().outerRadius(t.r).innerRadius(t.r-10),r=t.r+t.strokeWidth,a=2*r,c=a,l=document.createElementNS(e.ns.prefix.svg,"svg"),s=e.select(l).data(n).attr("class","piechart").attr("width",a).attr("height",c),u=s.selectAll(".arc").data(i(n)).enter().append("g").attr("class","arc").attr("transform","translate("+r+","+r+")");return u.append("path").attr("d",o).attr("class",function(t){return t.data.type+"-arc"}),u.append("svg:text").text(function(e,n){if(0===n)return t.count}).attr("x",-4*t.count.toString().length).attr("dy",5).attr("class","arcText"),window.XMLSerializer?(new window.XMLSerializer).serializeToString(l):l.xml?l.xml:""};o.getMap().then(function(e){function o(t){var e=t.getAllChildMarkers(),o=e.length,a=r.pluck(e,"options"),c=r.map(r.countBy(a,"type"),function(t,e){return{type:e,value:t}}),l=28,s=1,u=2*(l+s),d=i({data:c,r:l,strokeWidth:s,count:o});return new n.DivIcon({html:d,className:"marker-cluster",iconSize:new n.point(u,u)})}function c(t){function e(e){if(r.every(e.coordinates)){"40.78200"===e.coordinates[0].toFixed(5)&&"-73.83170"===e.coordinates[1].toFixed(5)&&(e.coordinates[0]=40.77065,e.coordinates[1]=-73.97406);var i=n.marker(e.coordinates,{icon:u[t.type],title:t.name,entity_id:t.id,message:t.name,type:t.type});d.addLayer(i)}}r.forEach(t.locations,e)}function l(t){console.error(t.message+"  %O",t)}var s=a("filter")(t.entities,function(t){return t.collaborations.length>0});e.invalidateSize(),new n.Control.Zoom({position:"topright"}).addTo(e),n.control.locate({position:"topright",showPopup:!1,icon:"fa fa-location-arrow"}).addTo(e);var u={"Non-Profit":n.icon({iconUrl:"img/marker-nonprof.svg",iconSize:[60,60]}),"For-Profit":n.icon({iconUrl:"img/marker-prof.svg",iconSize:[60,60]}),Individual:n.icon({iconUrl:"img/marker-ind.svg",iconSize:[60,60]}),Government:n.icon({iconUrl:"img/marker-gov.svg",iconSize:[60,60]})},d=n.markerClusterGroup({spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,iconCreateFunction:o,maxClusterRadius:30,spiderfyDistanceMultiplier:1.3});console.log("Original: %O",t.entities),console.log("Filtered: %O",s),r.forEach(s,c),e.addLayer(d),e.on("locationerror",l),d.on("click",function(e){t.setEntityID(e.layer.options.entity_id),t.clickedEntity.entity=t.currentEntity,t.actions.interacted=!0,t.settingsEnabled&&t.mobile&&t.toggleSettings(),t.safeApply()}),e.on("click",function(){t.clickedEntity.entity=null,t.actions.interacted=!0,t.safeApply()}),t.$on("selectItem",function(){var n=t.currentEntity.locations.length>0?r.pluck(t.currentEntity.locations,"coordinates"):null;n.length>0&&e.setView(n[0],11),t.actions.interacted=!0,t.safeApply()})})})}var o=["$scope","$timeout","leafletData","_","$filter",i];t.module("civic-graph").controller("mapCtrl",o)}(angular,d3,L);
!function(n,t){"use strict";function e(n){return void 0!==n&&null!==n}function i(n,t,i,c,o){n.isLoading=!0,n.connections={},n.safeApply=function(n){var t=this.$root.$$phase;"$apply"===t||"$digest"===t?n&&"function"==typeof n&&n():this.$apply(n)},n.$on("entitiesLoaded",function(r){r.targetScope;t.get(o.apiHost+"api/connections").success(function(t){var o=c("filter")(n.entities,function(t){return t.collaborations.length>=n.minConnections}),r={};i.forEach(i.keys(t.connections),function(n){r[n]=[]}),i.forEach(t.connections,function(n,t){i.forEach(n,function(n){var c=i.find(o,{id:n.source}),a=i.find(o,{id:n.target});e(c)&&e(a)&&r[t].push({source:c,target:a})})}),i.forEach(i.keys(n.entityTypes),function(t){var e=i.takeRight(i.sortBy(i.filter(n.entities,{type:t}),"collaborations.length"),5);i.forEach(e,function(n){n.wellconnected=!0})}),o=i.sortBy(o,function(n){return n.wellconnected?1:0}),a(o,r)})}),n.$on("viewChange",function(n){console.log(n)});var a=function(t,c){n.isLoading=!1;var o=d3.select("#network");o.selectAll("*").remove();var a=o.node().getBoundingClientRect(),r=a.height,s=a.width,l=6,u=7,d={Individual:{x:1,y:1},"For-Profit":{x:1,y:-1},"Non-Profit":{x:-1,y:1},Government:{x:-1,y:-1}},f=10,y=50,p=d3.max(t,function(n){return parseInt(n.employees)}),k=d3.max(t,function(n){return parseInt(n.followers)}),g={employees:d3.scale.sqrt().domain([10,p]).range([f,y]),followers:d3.scale.sqrt().domain([10,k]).range([f,y])},m={},h=d3.layout.force().size([s,r]).nodes(t).links(i.flatten(i.values(c))).charge(function(n){return n.employees?-2*g.employees(n.employees):-20}).linkStrength(0).linkDistance(50);i.forEach(c,function(n,t){m[t]=o.selectAll(".link ."+t+"-link").data(n).enter().append("line").attr("class",function(n){return e(n.source)&&e(n.target)?(n.type=t,"link "+t+"-link "+n.source.type+"-link "+n.target.type+"-link"):""})});var x=o.selectAll(".node").data(t).enter().append("g").attr("class",function(n){return"node "+n.type+"-node"}).call(h.drag);x.append("circle").attr("r",function(n){return n.employees?g.employees(n.employees):u}),x.append("text").text(function(n){return n.nickname?n.nickname:n.name}).attr("dx",function(){return-.065*this.getComputedTextLength()/2+"em"}).attr("dy",function(){return.08*this.parentNode.getBBox().height/2+.5+"em"}),h.on("tick",function(n){var e=l*n.alpha;i.forEach(t,function(n){n.x&&d[n.type]&&(n.x+=d[n.type].x*e,n.y+=d[n.type].y*e,n.x=Math.max(y,Math.min(s-y,n.x)),n.y=Math.max(y,Math.min(r-y,n.y)))}),i.forEach(m,function(n){n.attr("x1",function(n){return n.source.x}).attr("y1",function(n){return n.source.y}).attr("x2",function(n){return n.target.x}).attr("y2",function(n){return n.target.y})}),x.attr("transform",function(n){return"translate("+n.x+","+n.y+")"})});var E=function(n){requestAnimationFrame(function t(){for(var e=0;e<n;e++)h.tick();h.alpha()>0&&requestAnimationFrame(t)})};n.mobile||E(7),h.start();var v={};i.forEach(m,function(n){i.forEach(n[0],function(n){var t=n.__data__.source,e=n.__data__.target;v[t.index+","+e.index]=!0,v[e.index+","+t.index]=!0})});var L,A=function(n,t){return v[n.index+","+t.index]||n.index===t.index},T=function(n){x.classed("focused",function(t){return A(n,t)}).classed("unfocused",function(t){return!A(n,t)}),i.forEach(m,function(t){t.classed("focused",function(t){return n.index===t.source.index||n.index===t.target.index}).classed("unfocused",function(t){return!(n.index===t.source.index||n.index===t.target.index)})})},$=function(t){n.currentEntity!==t&&n.setEntity(t),n.safeApply(),T(t)},w=function(t){x.classed("focused",!1).classed("unfocused",!1),i.forEach(m,function(n){n.classed("focused",!1).classed("unfocused",!1)}),t.fixed=!1,n.clickedEntity.entity&&h.resume()},b=function(t){n.clickedEntity.entity||n.editing||n.currentLocation||(L=setTimeout(function(){$(t)},500)),n.actions.interacted=!0,n.safeApply()},_=function(t){n.clickedEntity.entity||n.currentLocation||(w(t),clearTimeout(L)),n.actions.interacted=!0,n.safeApply()},B=function(t){n.safeApply(),x.classed("focused",function(n){return n.name in t.dict}).classed("unfocused",function(n){return!(n.name in t.dict)}),i.forEach(m,function(n){n.classed("focused",function(n){return n.source.name in t.dict&&n.target.name in t.dict}).classed("unfocused",function(n){return!(n.source.name in t.dict&&n.target.name in t.dict)})})},P=function(){x.classed("focused",!1).classed("unfocused",!1),i.forEach(m,function(n){n.classed("focused",!1).classed("unfocused",!1)}),n.clickedLocation.location&&h.resume()},C=function(t){n.showLicense=!1,n.clickedEntity.entity&&(w(n.clickedEntity.entity),n.clickedEntity.entity=null),n.clickedLocation.location!==t&&(P(n.clickedLocation.location),n.clickedLocation.location=t,B(t)),d3.event&&d3.event.stopPropagation(),n.actions.interacted=!0,n.safeApply()},q=function(t){n.showLicense=!1,e(n.clickedLocation)&&(e(n.clickedLocation.location)&&(P(n.clickedLocation.entity),n.clickedLocation.location=null),n.clickedEntity.entity===t?n.clickedEntity.entity=null:(n.clickedEntity.entity&&w(n.clickedEntity.entity),n.clickedEntity.entity=t,$(t))),d3.event&&d3.event.stopPropagation(),n.actions.interacted=!0,n.safeApply()},I=function(){e(n.clickedLocation)&&(e(n.clickedLocation.location)&&(w(n.clickedLocation.location),n.clickedLocation.location=null),e(n.clickedEntity.entity)&&(w(n.clickedEntity.entity),n.clickedEntity.entity=null)),n.safeApply()},M=function(t){t.fixed?w(t):(t.x=s/2,t.y=r/2,t.px=s/2,t.py=r/2,t.fixed=!0,n.clickedEntity.entity=t),n.actions.interacted=!0,n.safeApply()};x.on("mouseover",b),x.on("mouseout",_),x.on("click",q),x.on("dblclick",M),o.on("click",I),x.classed("wellconnected",function(n){return n.hasOwnProperty("wellconnected")}),n.$on("changeSizeBy",function(n,t){o.selectAll("circle").transition().duration(250).attr("r",function(n){return n[t]?g[t](n[t]):u})}),n.$on("toggleLink",function(t,e){i.map(n.entityTypes,function(t,e){o.selectAll("."+e+"-link").classed({visible:function(t){return!n.connectionTypes[t.type]||n.entityTypes[t.source.type]&&n.entityTypes[t.target.type]},hidden:function(t){return!n.connectionTypes[t.type]||!n.entityTypes[t.source.type]||!n.entityTypes[t.target.type]}})})}),n.$on("toggleNode",function(t,e){o.selectAll("."+e.name+"-node").classed({visible:e.enabled,hidden:!e.enabled}),o.selectAll("."+e.name+"-link").classed({visible:function(t){return n.connectionTypes[t.type]&&n.entityTypes[t.source.type]&&n.entityTypes[t.target.type]},hidden:function(t){return!n.connectionTypes[t.type]||!n.entityTypes[t.source.type]||!n.entityTypes[t.target.type]}})}),n.$on("selectItem",function(t,e){"location"===e.type?C(n.currentLocation):q(n.currentEntity)})}}var c=["$scope","$http","_","$filter","config",i];n.module("civic-graph").controller("networkCtrl",c)}(angular,RTP);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNpdmljLWdyYXBoLm1vZHVsZS5qcyIsImFuYWx5dGljL2FuYWx5dGljc0RpcmVjdGl2ZS5qcyIsImNvbnRyb2wvY29udHJvbERpcmVjdGl2ZS5qcyIsImVkaXQtZW50aXR5L2VkaXRFbnRpdHlEaXJlY3RpdmUuanMiLCJleHRyYS9hZGRNb2JpbGVFdmVudHMuanMiLCJleHRyYS9tb2RhbEN0cmwuanMiLCJtYXAvbWFwRGlyZWN0aXZlLmpzIiwibWFpbi9hcHAuanMiLCJtYWluL2hvbWVDdHJsLmpzIiwibmV0d29yay9uZXR3b3JrRGlyZWN0aXZlLmpzIiwibmV0d29yay9zbGlkZXJCYXIuanMiLCJvdmVydmlldy9vdmVydmlld0N0cmwuanMiLCJhbmFseXRpYy9jb250cm9sbGVyL2FuYWx5dGljc0N0cmwuanMiLCJkZXRhaWwvY29udHJvbGxlci9kZXRhaWxzQ3RybC5qcyIsImNvbnRyb2wvY29udHJvbGxlci9jb250cm9sQ3RybC5qcyIsImVkaXQtZW50aXR5L2NvbnRyb2xsZXIvZWRpdEN0cmwuanMiLCJlZGl0LWVudGl0eS9zZXJ2aWNlL2NhdGVnb3J5U2VydmljZS5qcyIsImVkaXQtZW50aXR5L3NlcnZpY2UvY29ubmVjdGlvblNlcnZpY2UuanMiLCJlZGl0LWVudGl0eS9zZXJ2aWNlL2VudGl0eVNlcnZpY2UuanMiLCJlZGl0LWVudGl0eS9zZXJ2aWNlL2ZpbmFuY2VTZXJ2aWNlLmpzIiwiZWRpdC1lbnRpdHkvc2VydmljZS9mdW5kaW5nQ29ubmVjdGlvblNlcnZpY2UuanMiLCJlZGl0LWVudGl0eS9zZXJ2aWNlL2xvY2F0aW9uU2VydmljZS5qcyIsIm1hcC9jb250cm9sbGVyL21hcEN0cmwuanMiLCJuZXR3b3JrL2NvbnRyb2xsZXIvbmV0d29ya0N0cmwuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1haW5EZXBlbmRlbmNpZXMiLCJtb2R1bGUiLCJhbmFseXRpY3NEaXJlY3RpdmUiLCJ0ZW1wbGF0ZVVybCIsInJlc3RyaWN0Iiwic2NvcGUiLCJjb250cm9sbGVyIiwiYW5hbHl0aWNzRGVwZW5kZW5jaWVzIiwiZGlyZWN0aXZlIiwiY29udHJvbERpcmVjdGl2ZSIsInRvZ2dsZU5ldHdvcmsiLCJjb250cm9sbGVyQXMiLCJiaW5kVG9Db250cm9sbGVyIiwibWluQ29ubmVjdGlvbnMiLCJjb250cm9sRGVwZW5kZW5jaWVzIiwiZWRpdEVudGl0eURpcmVjdGl2ZSIsImVudGl0eSIsImVudGl0aWVzIiwiaXNPcGVuIiwiZWRpdEVudGl0eURlcGVuZGVuY2llcyIsIiQiLCJsaW5rRnVuY3Rpb24iLCJzY3JvbGwiLCJzZWxmIiwidGhpcyIsImNzcyIsImNsaWNrIiwid2luZG93IiwiaW5uZXJIZWlnaHQiLCJwYXJzZUludCIsImRldGFpbHNQYW5lbCIsIm1vYmlsZSIsInNjcm9sbFRvcCIsImFkZE1vYmlsZUV2ZW50cyIsImxpbmsiLCJtb2RhbEN0cmwiLCIkc2NvcGUiLCIkbW9kYWxJbnN0YW5jZSIsImNsb3NlV2luZG93IiwiY2xvc2UiLCJkZXBlbmRlbmNpZXMiLCJjb25zdGFudCIsIl8iLCJhcGlIb3N0IiwiY29uZmlnIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCIkaHR0cFByb3ZpZGVyIiwiJGNvbXBpbGVQcm92aWRlciIsImh0bWw1TW9kZSIsImRlZmF1bHRzIiwiaGVhZGVycyIsImNvbW1vbiIsImRlYnVnSW5mb0VuYWJsZWQiLCJmaWx0ZXIiLCJpbnB1dCIsImRlY2ltYWxzIiwiZXhwIiwic3VmZml4ZXMiLCJpc05hTiIsIk1hdGgiLCJmbG9vciIsImxvZyIsInBvdyIsInRvRml4ZWQiLCJob21lQ3RybCIsIiRodHRwIiwiZW50aXR5U2VydmljZSIsImNvbm5lY3Rpb25TZXJ2aWNlIiwic2VhcmNoSXRlbXMiLCJjYXRlZ29yaWVzIiwiY3VycmVudExvY2F0aW9uIiwiY2xpY2tlZExvY2F0aW9uIiwibG9jYXRpb24iLCJjbGlja2VkRW50aXR5IiwiZWRpdGluZyIsImFjdGlvbnMiLCJpbnRlcmFjdGVkIiwic2hvd3NlYXJjaE1CIiwic2hvd0FuYWx5dGljcyIsImVudGl0eVR5cGVzIiwiZ2V0RW50aXR5VHlwZXMiLCJjb25uZWN0aW9uVHlwZXMiLCJnZXRDb25uZWN0aW9uVHlwZXMiLCJzdGF0dXMiLCJpc05ldHdvcmtTaG93biIsImxpY2Vuc2UiLCJuZXR3b3JrTG9hZGluZyIsInRvZ2dsZUFuYWx5dGljcyIsIiR3YXRjaCIsIiRicm9hZGNhc3QiLCJjb25uZWN0aW9uQ2hhbmdlIiwiY29uc29sZSIsImh5ZGVQYXJ0aWFscyIsImV4Y2VwdCIsInNldHRpbmdzRW5hYmxlZCIsInNob3dTZWFyY2giLCJ0b2dnbGVTZXR0aW5ncyIsInN0YXJ0RWRpdCIsImN1cnJlbnRFbnRpdHkiLCJzd2l0Y2hWaWV3IiwibW9iaWxlY2hlY2siLCJjaGVjayIsInJlZ2V4IiwicmVnZXgyIiwiYSIsInRlc3QiLCJzdWJzdHIiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ2ZW5kb3IiLCJvcGVyYSIsInNldFRpbWVvdXQiLCJnZXQiLCJzdWNjZXNzIiwiZGF0YSIsIm5vZGVzIiwibG9jYXRpb25zIiwidW5pcSIsInBsdWNrIiwiZmxhdHRlbiIsImVudGl0aWVzQnlMb2NhdGlvbiIsIm1hcCIsImxvYyIsImZpbmRpbmdzIiwiZmxvdyIsInByb3BlcnR5IiwicGFydGlhbFJpZ2h0IiwiYW55IiwibG9jYWxpdHkiLCJuYW1lIiwidHlwZSIsImRpY3QiLCJ6aXBPYmplY3QiLCJjb25jYXQiLCJvdmVydmlld1VybCIsInNldEVudGl0eSIsInN0b3BFZGl0Iiwic2V0RW50aXR5SUQiLCJpZCIsImZpbmQiLCJzZXRMb2NhdGlvbiIsInNlbGVjdEl0ZW0iLCJpdGVtIiwiJG9uIiwiZXZlbnQiLCJhcmdzIiwidmFsdWUiLCJzZXRFbnRpdGllcyIsInJlc3BvbnNlIiwiYW5pbWF0aW9uc0VuYWJsZWQiLCJob21lRGVwZW5kZW5jaWVzIiwicmVzdGljdCIsInJlcXVpcmUiLCJlbGVtZW50IiwiYXR0cnMiLCJuZ01vZGVsIiwidG9Mb3dlckNhc2UiLCIkcGFyc2VycyIsInB1c2giLCJwYXJzZUZsb2F0Iiwib3ZlcnZpZXdDdHJsIiwiY2F0ZWdvcml6ZWRFbnRpdGllcyIsImZvckVhY2giLCJrZXlzIiwiYW5hbHl0aWNzQ3RybCIsImRldGFpbHNDdHJsIiwiaXRlbXNTaG93bkRlZmF1bHQiLCJrZXlfcGVvcGxlIiwiZ3JhbnRzX2dpdmVuIiwiZ3JhbnRzX3JlY2VpdmVkIiwiaW52ZXN0bWVudHNfbWFkZSIsImludmVzdG1lbnRzX3JlY2VpdmVkIiwiY29sbGFib3JhdGlvbnMiLCJlbXBsb3ltZW50cyIsInJlbGF0aW9ucyIsImRhdGFfZ2l2ZW4iLCJkYXRhX3JlY2VpdmVkIiwicmV2ZW51ZXMiLCJleHBlbnNlcyIsIml0ZW1zU2hvd24iLCJjbG9uZSIsInNob3dNb3JlIiwibGVuZ3RoIiwic2hvd0xlc3MiLCJjb250cm9sQ3RybCIsIiRyb290U2NvcGUiLCIkbW9kYWwiLCJ2bSIsImNoYW5nZVZpZXciLCJzaXplQnlMaXN0Iiwic2l6ZUJ5Iiwic2hvd1ZpZXciLCJOZXR3b3JrIiwiTWFwIiwidmlldyIsInNob3dBYm91dCIsIm9wZW4iLCJhbmltYXRpb24iLCJ0b2dnbGVOb2RlIiwiZW5hYmxlZCIsInRvZ2dsZUxpbmsiLCJjaGFuZ2VTaXplQnkiLCJjb250cm9sRGVwcyIsImlzRGVmIiwib2JqIiwidW5kZWZpbmVkIiwiZWRpdEN0cmwiLCIkdGltZW91dCIsImxvY2F0aW9uU2VydmljZSIsImluaXRDYXRlZ29yeUFycmF5IiwiY2F0ZWdvcnkiLCJjYXRlZ29yeUluZGV4IiwiZW50aXR5Q2F0ZWdvcnlJbmRleCIsImVudGl0eUNhdGVnb3J5IiwiaGFzT3duUHJvcGVydHkiLCJlZGl0RW50aXR5IiwiaXNFZGl0aW5nIiwiZ2V0RW50aXR5TW9kZWwiLCJpbmZsdWVuY2VUeXBlcyIsImdldEluZmx1ZW5jZVR5cGVzIiwiY2F0ZWdvcnlCYWNrdXAiLCJhZGRyZXNzU2VhcmNoIiwic2VhcmNoIiwianNvbnAiLCJwYXJhbXMiLCJxdWVyeSIsImtleSIsImluY2x1ZGUiLCJ0aGVuIiwicmVzb3VyY2VTZXRzIiwicmVzb3VyY2VzIiwidG9nZ2xlQ2F0ZWdvcnkiLCJmb3VuZCIsImlzTGFzdCIsImZvcm1hdHRlZEFkZHJlc3MiLCJhcGlDYWxsUmVzdWx0IiwicmVzdWx0IiwiYWRkcmVzcyIsInBvaW50IiwiYWRkTG9jYXRpb24iLCJhZGRyZXNzX2xpbmUiLCJhZGRyZXNzTGluZSIsImRpc3RyaWN0IiwiYWRtaW5EaXN0cmljdCIsImNvdW50cnkiLCJjb3VudHJ5UmVnaW9uIiwiY291bnRyeV9jb2RlIiwiY291bnRyeVJlZ2lvbklzbzIiLCJjb29yZGluYXRlcyIsInBvc3RhbF9jb2RlIiwicG9zdGFsQ29kZSIsImdldExvY2F0aW9uTW9kZWwiLCJhZGRLZXlQZXJzb24iLCJzb21lIiwic2V0RnVuZGluZ0Nvbm5lY3Rpb24iLCJmdW5kaW5nIiwiZW50aXR5X2lkIiwiYWRkRnVuZGluZ0Nvbm5lY3Rpb24iLCJhbW91bnQiLCJ5ZWFyIiwic2V0Q29ubmVjdGlvbiIsImNvbm5lY3Rpb24iLCJhZGRDb25uZWN0aW9uIiwiY29ubmVjdGlvbnMiLCJkZXRhaWxzIiwiYWRkRmluYW5jZSIsInJlY29yZHMiLCJldmVyeSIsInIiLCJzYXZlIiwiaXNTYXZpbmciLCJnZW5lcmF0ZURCTW9kZWwiLCJwb3N0IiwiJGVtaXQiLCJjYW5jZWxFZGl0IiwiZXJyb3IiLCJpc0Vycm9yIiwibmV3VmFsIiwib2xkVmFsIiwiZXF1YWxzIiwiY29weSIsImVkaXRDb250cm9sbGVyRGVwcyIsIkNhdGVnb3J5U2VydmljZSIsIm8iLCJDYXRlZ29yeSIsImRlZk9iaiIsImVuYWJsZSIsImdldENhdGVnb3J5TW9kZWwiLCJjYXRlZ29yeVNlcnZpY2VEZXBlbmRlbmNpZXMiLCJzZXJ2aWNlIiwiQ29ubmVjdGlvbnMiLCJDb25uZWN0aW9uIiwib2JqSXNEZWYiLCJnZXRDb25uZWN0aW9uTW9kZWwiLCJGdW5kaW5nIiwiRGF0YSIsIkVtcGxveW1lbnQiLCJDb2xsYWJvcmF0aW9uIiwiRW50aXR5U2VydmljZSIsImZ1bmRpbmdDb25uZWN0aW9uU2VydmljZSIsImZpbmFuY2VTZXJ2aWNlIiwiY2F0ZWdvcnlTZXJ2aWNlIiwibG9vcEFuZEluaXQiLCJtb2RlbEFycmF5IiwiaW5pdE1vZGVsRnVuY3Rpb24iLCJpc0FycmF5IiwiYXJyYXlJbmRleCIsImFycmF5VmFsdWUiLCJuZXdNb2RlbEFycmF5IiwiaXNPYmplY3QiLCJFbnRpdHkiLCJpbmZsdWVuY2UiLCJnZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsIiwiZ2V0RmluYW5jZU1vZGVsIiwibmlja25hbWUiLCJ1cmwiLCJ0d2l0dGVyX2hhbmRsZSIsImVtcGxveWVlcyIsImRiTW9kZWwiLCJwb3AiLCJkZXNjcmlwdGlvbiIsIkdvdmVybm1lbnQiLCJGb3ItUHJvZml0IiwiTm9uLVByb2ZpdCIsIkluZGl2aWR1YWwiLCJlbnRpdHlTZXJ2aWNlRGVwZW5kZW5jaWVzIiwiRmluYW5jZVNlcnZpY2UiLCJGaW5hbmNlIiwiRnVuZGluZ0Nvbm5lY3Rpb25zIiwiRnVuZGluZ0Nvbm5lY3Rpb24iLCJmdW5kaW5nQ29ubmVjdGlvblNlcnZpY2VEZXBlbmRlbmNpZXMiLCJMb2NhdGlvblNlcnZpY2UiLCJMb2NhdGlvbiIsInRyaW0iLCJsb2NhdGlvblNlcnZpY2VEZXBlbmRlbmNpZXMiLCJkMyIsIkwiLCJtYXBDdHJsIiwibGVhZmxldERhdGEiLCIkZmlsdGVyIiwib3B0aW9ucyIsImNlbnRlciIsImxhdCIsImxuZyIsInpvb20iLCJ0aWxlTGF5ZXIiLCJ0aWxlTGF5ZXJPcHRpb25zIiwiZGV0ZWN0UmV0aW5hIiwicmV1c2VUaWxlcyIsInpvb21Db250cm9sIiwiYXR0cmlidXRpb25Db250cm9sIiwiY3JlYXRlUGllQ2hhcnQiLCJwaWUiLCJsYXlvdXQiLCJzb3J0IiwiZCIsImFyYyIsInN2ZyIsIm91dGVyUmFkaXVzIiwiaW5uZXJSYWRpdXMiLCJzdHJva2VXaWR0aCIsInciLCJoIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50TlMiLCJucyIsInByZWZpeCIsInZpcyIsInNlbGVjdCIsImF0dHIiLCJhcmNzIiwic2VsZWN0QWxsIiwiZW50ZXIiLCJhcHBlbmQiLCJ0ZXh0IiwiaSIsImNvdW50IiwidG9TdHJpbmciLCJYTUxTZXJpYWxpemVyIiwic2VyaWFsaXplVG9TdHJpbmciLCJ4bWwiLCJnZXRNYXAiLCJjbHVzdGVySWNvbiIsImNsdXN0ZXIiLCJjaGlsZHJlbiIsImdldEFsbENoaWxkTWFya2VycyIsInRvdGFsIiwiY2x1c3Rlck1hcmtlcnMiLCJjb3VudHMiLCJjb3VudEJ5IiwiaWNvbkRpbSIsImh0bWwiLCJEaXZJY29uIiwiY2xhc3NOYW1lIiwiaWNvblNpemUiLCJvdXRlckxvb3AiLCJpbm5lckxvb3AiLCJtIiwibWFya2VyIiwiaWNvbiIsIm1hcmtlckljb24iLCJ0aXRsZSIsIm1lc3NhZ2UiLCJtYXJrZXJzIiwiYWRkTGF5ZXIiLCJvbkxvY2F0aW9uRXJyb3IiLCJsZWFmbGV0RXJyb3IiLCJmaWx0ZXJlZEVudGl0aWVzIiwiaW52YWxpZGF0ZVNpemUiLCJDb250cm9sIiwiWm9vbSIsInBvc2l0aW9uIiwiYWRkVG8iLCJjb250cm9sIiwibG9jYXRlIiwic2hvd1BvcHVwIiwiaWNvblVybCIsIm1hcmtlckNsdXN0ZXJHcm91cCIsInNwaWRlcmZ5T25NYXhab29tIiwic2hvd0NvdmVyYWdlT25Ib3ZlciIsImljb25DcmVhdGVGdW5jdGlvbiIsIm1heENsdXN0ZXJSYWRpdXMiLCJzcGlkZXJmeURpc3RhbmNlTXVsdGlwbGllciIsIm9uIiwibGF5ZXIiLCJzYWZlQXBwbHkiLCJzZXRWaWV3IiwiUlRQIiwibmV0d29ya0N0cmwiLCJpc0xvYWRpbmciLCJmbiIsInBoYXNlIiwiJHJvb3QiLCIkJHBoYXNlIiwiJGFwcGx5IiwidGFyZ2V0U2NvcGUiLCJmaWx0ZXJlZENvbm5lY3Rpb25zIiwic291cmNlTm9kZSIsInNvdXJjZSIsInRhcmdldE5vZGUiLCJ0YXJnZXQiLCJ0b3A1IiwidGFrZVJpZ2h0Iiwic29ydEJ5Iiwid2VsbGNvbm5lY3RlZCIsImUiLCJkcmF3TmV0d29yayIsInZpZXdPYmoiLCJlbnRpdHlBcnJheSIsImNvbm5lY3Rpb25BcnJheSIsInJlbW92ZSIsImJvdW5kcyIsIm5vZGUiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJoZWlnaHQiLCJ3aWR0aCIsIm9mZnNldFNjYWxlIiwiZGVmYXVsdE5vZGVTaXplIiwib2Zmc2V0cyIsIngiLCJ5IiwibG93ZXJCb3VuZFJhZGl1cyIsInVwcGVyQm91bmRSYWRpdXMiLCJtYXhFbXBsb3llZXMiLCJtYXgiLCJlbCIsIm1heEZvbGxvd2VycyIsImZvbGxvd2VycyIsInNjYWxlIiwic3FydCIsImRvbWFpbiIsInJhbmdlIiwibGlua3MiLCJmb3JjZSIsInNpemUiLCJ2YWx1ZXMiLCJjaGFyZ2UiLCJsaW5rU3RyZW5ndGgiLCJsaW5rRGlzdGFuY2UiLCJjYWxsIiwiZHJhZyIsImdldENvbXB1dGVkVGV4dExlbmd0aCIsInBhcmVudE5vZGUiLCJnZXRCQm94IiwiayIsImFscGhhIiwibWluIiwic3BlZWRBbmltYXRlIiwidGlja3MiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJyZW5kZXIiLCJ0aWNrIiwic3RhcnQiLCJsaW5rZWRCeUluZGV4IiwibCIsIl9fZGF0YV9fIiwiaW5kZXgiLCJob3ZlclRpbWVyIiwibmVpZ2hib3JpbmciLCJiIiwiZm9jdXNuZWlnaGJvcnMiLCJjbGFzc2VkIiwibiIsImZvY3VzIiwidW5mb2N1cyIsImZpeGVkIiwicmVzdW1lIiwiaG92ZXIiLCJ1bmhvdmVyIiwiY2xlYXJUaW1lb3V0IiwiZm9jdXNMb2NhdGlvbiIsInVuZm9jdXNMb2NhdGlvbiIsImhpZ2hsaWdodExvY2F0aW9uIiwic2hvd0xpY2Vuc2UiLCJzdG9wUHJvcGFnYXRpb24iLCJiYWNrZ3JvdW5kY2xpY2siLCJkYmxjbGljayIsInB4IiwicHkiLCJ0cmFuc2l0aW9uIiwiZHVyYXRpb24iLCJ2YWwiLCJ2aXNpYmxlIiwiaGlkZGVuIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFVQSxHQUVOLFlBRUEsSUFBSUMsSUFDQSxlQUNBLG9CQUNBLFlBQ0EsZ0JBR0pE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LEVBQU82QyxnQkFBZ0I2WixFQUFFNVcsUUFDckI5RixFQUFPMkMsWUFBWStaLEVBQUV4RCxPQUFPcFQsUUFDN0I5RixFQUFPMkMsWUFBWStaLEVBQUV0RCxPQUFPdFQsV0FNaEU5RixFQUFPMkcsSUFBSSxhQUFjLFNBQVVDLEVBQU9GLEdBQ3BCLGFBQWRBLEVBQUtaLEtBQ0w4WCxFQUFrQjVkLEVBQU9rQyxpQkFHekI1QyxFQUFNVSxFQUFPOEQsa0JBemU3QixHQUFJMUQsSUFDQSxTQUNBLFFBQ0EsSUFDQSxVQUNBLFNBQ0FvWSxFQXllSjdhLEdBQVFFLE9BQU8sZUFDVkssV0FBVyxjQUFla0MsSUFFaEN6QyxRQUFTNGEiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbihhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgbWFpbkRlcGVuZGVuY2llcyA9IFtcbiAgICAgICAgJ3VpLmJvb3RzdHJhcCcsXG4gICAgICAgICdsZWFmbGV0LWRpcmVjdGl2ZScsXG4gICAgICAgICduZ0FuaW1hdGUnLFxuICAgICAgICAndGVtcGxhdGVDYWNoZSdcbiAgICBdO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJywgbWFpbkRlcGVuZGVuY2llcyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA3LzEvMTYuXG4gKi9cblxuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBhbmFseXRpY3NEZXBlbmRlbmNpZXMgPSBbYW5hbHl0aWNzRGlyZWN0aXZlXTtcblxuICAgIGZ1bmN0aW9uIGFuYWx5dGljc0RpcmVjdGl2ZSgpe1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdqcy9hbmFseXRpYy9hbmFseXRpY3MuaHRtbCcsXG4gICAgICAgICAgICByZXN0cmljdCAgIDogJ0UnLFxuICAgICAgICAgICAgc2NvcGUgICAgICA6IHt9LFxuICAgICAgICAgICAgY29udHJvbGxlciAgIDogJ2FuYWx5dGljc0N0cmwnXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnYW5hbHl0aWNzJywgYW5hbHl0aWNzRGVwZW5kZW5jaWVzKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMTAvMTYuXG4gKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgY29udHJvbERlcGVuZGVuY2llcyA9IFtjb250cm9sRGlyZWN0aXZlXTtcblxuICAgIGZ1bmN0aW9uIGNvbnRyb2xEaXJlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2pzL2NvbnRyb2wvY29udHJvbHMuaHRtbCcsXG4gICAgICAgICAgICByZXN0cmljdCAgIDogJ0UnLFxuICAgICAgICAgICAgc2NvcGUgICAgICA6IHtcbiAgICAgICAgICAgICAgICB0b2dnbGVOZXR3b3JrIDogJz0nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgICA6ICdjb250cm9sQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXMgOiAnY29udHJvbCcsXG4gICAgICAgICAgICBiaW5kVG9Db250cm9sbGVyIDoge1xuICAgICAgICAgICAgICAgIG1pbkNvbm5lY3Rpb25zIDogXCI9XCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuZGlyZWN0aXZlKCdjb250cm9sJywgY29udHJvbERlcGVuZGVuY2llcyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNy8xNi5cbiAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBlZGl0RW50aXR5RGVwZW5kZW5jaWVzID0gW2VkaXRFbnRpdHlEaXJlY3RpdmVdO1xuXG4gICAgZnVuY3Rpb24gZWRpdEVudGl0eURpcmVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnanMvZWRpdC1lbnRpdHkvZWRpdC5odG1sJyxcbiAgICAgICAgICAgIHJlc3RyaWN0ICAgOiAnRScsXG4gICAgICAgICAgICBzY29wZSAgICAgIDoge1xuICAgICAgICAgICAgICAgICdlbnRpdHknICA6IFwiPVwiLFxuICAgICAgICAgICAgICAgICdlbnRpdGllcyc6IFwiPVwiLFxuICAgICAgICAgICAgICAgICdpc09wZW4nICA6IFwiPVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29udHJvbGxlciA6ICdlZGl0Q3RybCdcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuZGlyZWN0aXZlKCdlZGl0RW50aXR5JywgZWRpdEVudGl0eURlcGVuZGVuY2llcyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyLCAkKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBsaW5rRnVuY3Rpb24oc2NvcGUpIHtcblxuICAgICAgICBmdW5jdGlvbiBzY3JvbGwoKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9ICQodGhpcyk7XG4gICAgICAgICAgICBzZWxmLmNzcygnaGVpZ2h0JywgJzU1dmgnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrKCkge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSAkKHRoaXMpO1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5pbm5lckhlaWdodCAvIDMgPiBwYXJzZUludChzZWxmLmNzcygnaGVpZ2h0JykpKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jc3MoJ2hlaWdodCcsICc1NXZoJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGYuY3NzKCdoZWlnaHQnLCAnMzB2aCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRldGFpbHNQYW5lbDtcbiAgICAgICAgaWYgKHNjb3BlLm1vYmlsZSkge1xuICAgICAgICAgICAgZGV0YWlsc1BhbmVsID0gJChcIiNkZXRhaWxzLXBhbmVsXCIpO1xuICAgICAgICAgICAgZGV0YWlsc1BhbmVsLmNzcyhcImhlaWdodFwiLCBcIjMwdmhcIik7XG4gICAgICAgICAgICBkZXRhaWxzUGFuZWwuc2Nyb2xsVG9wKDApO1xuICAgICAgICAgICAgZGV0YWlsc1BhbmVsLnNjcm9sbChzY3JvbGwpO1xuICAgICAgICAgICAgZGV0YWlsc1BhbmVsLmNsaWNrKGNsaWNrKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZE1vYmlsZUV2ZW50cygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgICAgICBsaW5rOiBsaW5rRnVuY3Rpb25cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuZGlyZWN0aXZlKCdhZGRNb2JpbGVFdmVudHMnLCBbYWRkTW9iaWxlRXZlbnRzXSk7XG59KShhbmd1bGFyLCAkKTtcbiIsIihmdW5jdGlvbihhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBtb2RhbEN0cmwoJHNjb3BlLCAkbW9kYWxJbnN0YW5jZSkge1xuICAgICAgICAkc2NvcGUuY2xvc2VXaW5kb3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5jbG9zZSgpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdtb2RhbEN0cmwnLCBbJyRzY29wZScsICckbW9kYWxJbnN0YW5jZScsIG1vZGFsQ3RybF0pO1xuXG59KShhbmd1bGFyKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMTQvMTYuXG4gKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgZGVwZW5kZW5jaWVzID0gW107XG5cbiAgICBmdW5jdGlvbiBkaXJlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcInJlc3RyaWN0XCI6IFwiRVwiLFxuICAgICAgICAgICAgXCJ0ZW1wbGF0ZVVybFwiOiBcIi9tYXAvbWFwLmh0bWxcIixcbiAgICAgICAgICAgIFwiY29udHJvbGxlclwiOiBcIm1hcEN0cmxcIlxuICAgICAgICB9O1xuICAgIH1cbiAgICAgICAgYW5ndWxhci5tb2R1bGUoXCJjaXZpYy1ncmFwaFwiKVxuICAgICAgICAgICAgLmRpcmVjdGl2ZShcIm1hcFwiLCBkZXBlbmRlbmNpZXMpO1xuXG59KShhbmd1bGFyKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb25zdGFudCgnXycsIHdpbmRvdy5fKVxuICAgICAgICAuY29uc3RhbnQoJ2NvbmZpZycsIHtcbiAgICAgICAgICAgIGFwaUhvc3Q6ICdodHRwczovL2FwaS5jaXZpY2dyYXBoLmlvLydcbiAgICAgICAgfSlcbiAgICAgICAgLmNvbmZpZyhbJyRsb2NhdGlvblByb3ZpZGVyJywgJyRodHRwUHJvdmlkZXInLCAnJGNvbXBpbGVQcm92aWRlcicsXG4gICAgICAgICAgICBmdW5jdGlvbiAoJGxvY2F0aW9uUHJvdmlkZXIsICRodHRwUHJvdmlkZXIsICRjb21waWxlUHJvdmlkZXIpIHtcbiAgICAgICAgICAgICAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnWC1SZXF1ZXN0ZWQtV2l0aCddID0gJ1hNTEh0dHBSZXF1ZXN0JztcbiAgICAgICAgICAgICAgICAvLyAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydFdmVudC1OYW1lJ10gPSAnVGVzdF9FdmVudCc7XG4gICAgICAgICAgICAgICAgJGNvbXBpbGVQcm92aWRlci5kZWJ1Z0luZm9FbmFibGVkKHRydWUpO1xuICAgICAgICAgICAgfV0pXG4gICAgICAgIC5maWx0ZXIoJ3Rob3VzYW5kU3VmZml4JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChpbnB1dCwgZGVjaW1hbHMpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXhwLFxuICAgICAgICAgICAgICAgICAgICBzdWZmaXhlcyA9IFsnaycsICdNJywgJ0cnLCAnVCcsICdQJywgJ0UnXTtcblxuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuaXNOYU4oaW5wdXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChpbnB1dCA8IDEwMDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGV4cCA9IE1hdGguZmxvb3IoTWF0aC5sb2coaW5wdXQpIC8gTWF0aC5sb2coMTAwMCkpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIChpbnB1dCAvIE1hdGgucG93KDEwMDAsIGV4cCkpLnRvRml4ZWQoZGVjaW1hbHMpICsgc3VmZml4ZXNbZXhwIC0gMV07XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBob21lRGVwZW5kZW5jaWVzID0gW1xuICAgICAgICAnJHNjb3BlJyxcbiAgICAgICAgJyRodHRwJyxcbiAgICAgICAgJ18nLFxuICAgICAgICAnZW50aXR5U2VydmljZScsXG4gICAgICAgICdjb25uZWN0aW9uU2VydmljZScsXG4gICAgICAgICdjb25maWcnLFxuICAgICAgICBob21lQ3RybFxuICAgIF07XG5cbiAgICBmdW5jdGlvbiBob21lQ3RybCgkc2NvcGUsICRodHRwLCBfLCBlbnRpdHlTZXJ2aWNlLCBjb25uZWN0aW9uU2VydmljZSwgY29uZmlnKSB7XG4gICAgICAgICRzY29wZS5lbnRpdGllcyAgICAgICAgICAgICAgICAgPSBbXTtcbiAgICAgICAgJHNjb3BlLnNlYXJjaEl0ZW1zICAgICAgICAgICAgICA9IG51bGw7XG4gICAgICAgICRzY29wZS5jYXRlZ29yaWVzICAgICAgICAgICAgICAgPSBbXTtcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRMb2NhdGlvbiAgICAgICAgICA9IG51bGw7XG4gICAgICAgICRzY29wZS5jbGlja2VkTG9jYXRpb24gICAgICAgICAgPSB7fTtcbiAgICAgICAgJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiA9IG51bGw7XG4gICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5ICAgICAgICAgICAgPSB7fTtcbiAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ICAgICA9IG51bGw7XG4gICAgICAgICRzY29wZS5lZGl0aW5nICAgICAgICAgICAgICAgICAgPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLmFjdGlvbnMgICAgICAgICAgICAgICAgICA9IHsnaW50ZXJhY3RlZCc6IGZhbHNlfTtcbiAgICAgICAgJHNjb3BlLnNob3dzZWFyY2hNQiAgICAgICAgICAgICA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUuc2hvd0FuYWx5dGljcyAgICAgICAgICAgID0gZmFsc2U7XG4gICAgICAgICRzY29wZS5lbnRpdHlUeXBlcyAgICAgICAgICAgICAgPSBlbnRpdHlTZXJ2aWNlLmdldEVudGl0eVR5cGVzKCk7XG4gICAgICAgICRzY29wZS5jb25uZWN0aW9uVHlwZXMgICAgICAgICAgPSBjb25uZWN0aW9uU2VydmljZS5nZXRDb25uZWN0aW9uVHlwZXMoKTtcbiAgICAgICAgJHNjb3BlLnN0YXR1cyAgICAgICAgICAgICAgICAgICA9IHtcbiAgICAgICAgICAgIFwiaXNOZXR3b3JrU2hvd25cIjogdHJ1ZSxcbiAgICAgICAgICAgIFwibGljZW5zZVwiICAgICAgIDogdHJ1ZSxcbiAgICAgICAgICAgIFwibmV0d29ya0xvYWRpbmdcIjogdHJ1ZVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS50b2dnbGVBbmFseXRpY3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2NvcGUuc2hvd0FuYWx5dGljcyA9ICEkc2NvcGUuc2hvd0FuYWx5dGljcztcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm1pbkNvbm5lY3Rpb25zID0gJHNjb3BlLm1pbkNvbm5lY3Rpb25zID0gMjtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICRzY29wZS4kd2F0Y2goJ21pbkNvbm5lY3Rpb25zJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnZW50aXRpZXNMb2FkZWQnKTtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICAkc2NvcGUuY29ubmVjdGlvbkNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHNlbGYubWluQ29ubmVjdGlvbnMpO1xuICAgICAgICAgICAgJHNjb3BlLm1pbkNvbm5lY3Rpb25zID0gc2VsZi5taW5Db25uZWN0aW9ucztcbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdlbnRpdGllc0xvYWRlZCcpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5oeWRlUGFydGlhbHMgPSBmdW5jdGlvbiAoZXhjZXB0KSB7XG4gICAgICAgICAgICBpZiAoZXhjZXB0ID09PSBcInNlYXJjaFwiKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRpbmcgICAgICAgICA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zZXR0aW5nc0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXhjZXB0ID09PSBcInNldHRpbmdzXCIpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdGluZyAgICAgID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3dzZWFyY2hNQiA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChleGNlcHQgPT09IFwiZWRpdFwiKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNldHRpbmdzRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zaG93c2VhcmNoTUIgICAgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRpbmcgICAgICAgICA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zZXR0aW5nc0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd3NlYXJjaE1CICAgID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2hvd1NlYXJjaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5oeWRlUGFydGlhbHMoXCJzZWFyY2hcIik7XG4gICAgICAgICAgICAkc2NvcGUuc2hvd3NlYXJjaE1CICAgPSAhJHNjb3BlLnNob3dzZWFyY2hNQjtcbiAgICAgICAgICAgIC8vICRzY29wZS4kYnJvYWRjYXN0KCdoaWRlTGljZW5zZScpO1xuICAgICAgICAgICAgJHNjb3BlLnN0YXR1cy5saWNlbnNlID0gZmFsc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnRvZ2dsZVNldHRpbmdzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLmh5ZGVQYXJ0aWFscyhcInNldHRpbmdzXCIpO1xuICAgICAgICAgICAgJHNjb3BlLnNldHRpbmdzRW5hYmxlZCA9ICEkc2NvcGUuc2V0dGluZ3NFbmFibGVkO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zdGFydEVkaXQgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudEVudGl0eSA9IGVudGl0eTtcbiAgICAgICAgICAgIGlmICgkc2NvcGUubW9iaWxlKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmh5ZGVQYXJ0aWFscyhcImVkaXRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc2NvcGUuZWRpdGluZyA9IHRydWU7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnN3aXRjaFZpZXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyAkc2NvcGUuJGJyb2FkY2FzdCgndmlld0NoYW5nZScsICEkc2NvcGUuc3RhdHVzLmlzTmV0d29ya1Nob3duID8gJ01hcCcgOiAnTmV0d29yaycpO1xuICAgICAgICAgICAgLy8gJHNjb3BlLmNoYW5nZVZpZXcoISRzY29wZS5zdGF0dXMuaXNOZXR3b3JrU2hvd24gPyAnTWFwJyA6ICdOZXR3b3JrJyk7XG4gICAgICAgICAgICAkc2NvcGUuc3RhdHVzLmlzTmV0d29ya1Nob3duID0gISRzY29wZS5zdGF0dXMuaXNOZXR3b3JrU2hvd247XG4gICAgICAgIH07XG5cbiAgICAgICAgd2luZG93Lm1vYmlsZWNoZWNrICAgICA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjaGVjayAgPSBmYWxzZSxcbiAgICAgICAgICAgICAgICByZWdleCAgPSAvKGFuZHJvaWR8YmJcXGQrfG1lZWdvKS4rbW9iaWxlfGF2YW50Z298YmFkYVxcL3xibGFja2JlcnJ5fGJsYXplcnxjb21wYWx8ZWxhaW5lfGZlbm5lY3xoaXB0b3B8aWVtb2JpbGV8aXAoaG9uZXxvZCl8aXJpc3xraW5kbGV8bGdlIHxtYWVtb3xtaWRwfG1tcHxtb2JpbGUuK2ZpcmVmb3h8bmV0ZnJvbnR8b3BlcmEgbShvYnxpbilpfHBhbG0oIG9zKT98cGhvbmV8cChpeGl8cmUpXFwvfHBsdWNrZXJ8cG9ja2V0fHBzcHxzZXJpZXMoNHw2KTB8c3ltYmlhbnx0cmVvfHVwXFwuKGJyb3dzZXJ8bGluayl8dm9kYWZvbmV8d2FwfHdpbmRvd3MgY2V8eGRhfHhpaW5vL2ksXG4gICAgICAgICAgICAgICAgcmVnZXgyID0gLzEyMDd8NjMxMHw2NTkwfDNnc298NHRocHw1MFsxLTZdaXw3NzBzfDgwMnN8YSB3YXxhYmFjfGFjKGVyfG9vfHNcXC0pfGFpKGtvfHJuKXxhbChhdnxjYXxjbyl8YW1vaXxhbihleHxueXx5dyl8YXB0dXxhcihjaHxnbyl8YXModGV8dXMpfGF0dHd8YXUoZGl8XFwtbXxyIHxzICl8YXZhbnxiZShja3xsbHxucSl8YmkobGJ8cmQpfGJsKGFjfGF6KXxicihlfHYpd3xidW1ifGJ3XFwtKG58dSl8YzU1XFwvfGNhcGl8Y2N3YXxjZG1cXC18Y2VsbHxjaHRtfGNsZGN8Y21kXFwtfGNvKG1wfG5kKXxjcmF3fGRhKGl0fGxsfG5nKXxkYnRlfGRjXFwtc3xkZXZpfGRpY2F8ZG1vYnxkbyhjfHApb3xkcygxMnxcXC1kKXxlbCg0OXxhaSl8ZW0obDJ8dWwpfGVyKGljfGswKXxlc2w4fGV6KFs0LTddMHxvc3x3YXx6ZSl8ZmV0Y3xmbHkoXFwtfF8pfGcxIHV8ZzU2MHxnZW5lfGdmXFwtNXxnXFwtbW98Z28oXFwud3xvZCl8Z3IoYWR8dW4pfGhhaWV8aGNpdHxoZFxcLShtfHB8dCl8aGVpXFwtfGhpKHB0fHRhKXxocCggaXxpcCl8aHNcXC1jfGh0KGMoXFwtfCB8X3xhfGd8cHxzfHQpfHRwKXxodShhd3x0Yyl8aVxcLSgyMHxnb3xtYSl8aTIzMHxpYWMoIHxcXC18XFwvKXxpYnJvfGlkZWF8aWcwMXxpa29tfGltMWt8aW5ub3xpcGFxfGlyaXN8amEodHx2KWF8amJyb3xqZW11fGppZ3N8a2RkaXxrZWppfGtndCggfFxcLyl8a2xvbnxrcHQgfGt3Y1xcLXxreW8oY3xrKXxsZShub3x4aSl8bGcoIGd8XFwvKGt8bHx1KXw1MHw1NHxcXC1bYS13XSl8bGlid3xseW54fG0xXFwtd3xtM2dhfG01MFxcL3xtYSh0ZXx1aXx4byl8bWMoMDF8MjF8Y2EpfG1cXC1jcnxtZShyY3xyaSl8bWkobzh8b2F8dHMpfG1tZWZ8bW8oMDF8MDJ8Yml8ZGV8ZG98dChcXC18IHxvfHYpfHp6KXxtdCg1MHxwMXx2ICl8bXdicHxteXdhfG4xMFswLTJdfG4yMFsyLTNdfG4zMCgwfDIpfG41MCgwfDJ8NSl8bjcoMCgwfDEpfDEwKXxuZSgoY3xtKVxcLXxvbnx0Znx3Znx3Z3x3dCl8bm9rKDZ8aSl8bnpwaHxvMmltfG9wKHRpfHd2KXxvcmFufG93ZzF8cDgwMHxwYW4oYXxkfHQpfHBkeGd8cGcoMTN8XFwtKFsxLThdfGMpKXxwaGlsfHBpcmV8cGwoYXl8dWMpfHBuXFwtMnxwbyhja3xydHxzZSl8cHJveHxwc2lvfHB0XFwtZ3xxYVxcLWF8cWMoMDd8MTJ8MjF8MzJ8NjB8XFwtWzItN118aVxcLSl8cXRla3xyMzgwfHI2MDB8cmFrc3xyaW05fHJvKHZlfHpvKXxzNTVcXC98c2EoZ2V8bWF8bW18bXN8bnl8dmEpfHNjKDAxfGhcXC18b298cFxcLSl8c2RrXFwvfHNlKGMoXFwtfDB8MSl8NDd8bWN8bmR8cmkpfHNnaFxcLXxzaGFyfHNpZShcXC18bSl8c2tcXC0wfHNsKDQ1fGlkKXxzbShhbHxhcnxiM3xpdHx0NSl8c28oZnR8bnkpfHNwKDAxfGhcXC18dlxcLXx2ICl8c3koMDF8bWIpfHQyKDE4fDUwKXx0NigwMHwxMHwxOCl8dGEoZ3R8bGspfHRjbFxcLXx0ZGdcXC18dGVsKGl8bSl8dGltXFwtfHRcXC1tb3x0byhwbHxzaCl8dHMoNzB8bVxcLXxtM3xtNSl8dHhcXC05fHVwKFxcLmJ8ZzF8c2kpfHV0c3R8djQwMHx2NzUwfHZlcml8dmkocmd8dGUpfHZrKDQwfDVbMC0zXXxcXC12KXx2bTQwfHZvZGF8dnVsY3x2eCg1Mnw1M3w2MHw2MXw3MHw4MHw4MXw4M3w4NXw5OCl8dzNjKFxcLXwgKXx3ZWJjfHdoaXR8d2koZyB8bmN8bncpfHdtbGJ8d29udXx4NzAwfHlhc1xcLXx5b3VyfHpldG98enRlXFwtL2k7XG4gICAgICAgICAgICAoZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVnZXgudGVzdChhKSB8fCByZWdleDIudGVzdChhLnN1YnN0cigwLCA0KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKG5hdmlnYXRvci51c2VyQWdlbnQgfHwgbmF2aWdhdG9yLnZlbmRvciB8fCB3aW5kb3cub3BlcmEpO1xuICAgICAgICAgICAgcmV0dXJuIGNoZWNrO1xuICAgICAgICB9O1xuICAgICAgICAkc2NvcGUubW9iaWxlICAgICAgICAgID0gd2luZG93Lm1vYmlsZWNoZWNrKCk7XG4gICAgICAgICRzY29wZS5zZXR0aW5nc0VuYWJsZWQgPSAhJHNjb3BlLm1vYmlsZTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRodHRwLmdldChjb25maWcuYXBpSG9zdCArICdhcGkvZW50aXRpZXMnKVxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lbnRpdGllcyA9IGRhdGEubm9kZXM7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbnMgICA9IF8udW5pcShcbiAgICAgICAgICAgICAgICAgICAgICAgIF8ucGx1Y2soXy5mbGF0dGVuKF8ucGx1Y2soJHNjb3BlLmVudGl0aWVzLCAnbG9jYXRpb25zJykpLCAnbG9jYWxpdHknKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGVudGl0aWVzQnlMb2NhdGlvbiA9IF8ubWFwKGxvY2F0aW9ucywgZnVuY3Rpb24gKGxvYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbmRpbmdzID0gXy5maWx0ZXIoJHNjb3BlLmVudGl0aWVzLCBfLmZsb3coXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5wcm9wZXJ0eSgnbG9jYXRpb25zJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5wYXJ0aWFsUmlnaHQoXy5hbnksIHtsb2NhbGl0eTogbG9jfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgICAgOiBsb2MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSAgICA6ICdsb2NhdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50aXRpZXM6IGZpbmRpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpY3QgICAgOiBfLnppcE9iamVjdChfLnBsdWNrKGZpbmRpbmdzLCAnbmFtZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLnBsdWNrKGZpbmRpbmdzLCAnaW5kZXgnKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zZWFyY2hJdGVtcyA9IGVudGl0aWVzQnlMb2NhdGlvbi5jb25jYXQoJHNjb3BlLmVudGl0aWVzKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBpZiAoJHNjb3BlLmdldFVSTElEKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIC8vIFNldCB0aGUgZW50aXR5IHRvIHRoZSBJRCBpbiB0aGUgVVJMIGlmIGl0IGV4aXN0cy5cbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICRzY29wZS5zZXRFbnRpdHlJRCgkc2NvcGUuZ2V0VVJMSUQoKSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm92ZXJ2aWV3VXJsID0gJ2pzL292ZXJ2aWV3L292ZXJ2aWV3Lmh0bWwnO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnZW50aXRpZXNMb2FkZWQnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgMTAwKTtcblxuICAgICAgICAkc2NvcGUub3ZlcnZpZXdVcmwgPSBudWxsO1xuXG4gICAgICAgICRzY29wZS5zZXRFbnRpdHkgICA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50TG9jYXRpb24gPSBudWxsO1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRFbnRpdHkgICA9IGVudGl0eTtcbiAgICAgICAgICAgIGlmICgkc2NvcGUuZWRpdGluZykge1xuICAgICAgICAgICAgICAgICRzY29wZS5zdG9wRWRpdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ2VudGl0eUNoYW5nZScpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZXRFbnRpdHlJRCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgJHNjb3BlLnNldEVudGl0eShfLmZpbmQoJHNjb3BlLmVudGl0aWVzLCB7J2lkJzogaWR9KSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNldExvY2F0aW9uID0gZnVuY3Rpb24gKGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudExvY2F0aW9uID0gbG9jYXRpb247XG4gICAgICAgICAgICBpZiAoJHNjb3BlLmVkaXRpbmcpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3RvcEVkaXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdpdGVtQ2hhbmdlJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNlbGVjdEl0ZW0gPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2xvY2F0aW9uJykge1xuICAgICAgICAgICAgICAgICRzY29wZS5zZXRMb2NhdGlvbihpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICRzY29wZVtpdGVtICUgMSA9PT0gMCA/ICdzZXRFbnRpdHlJRCcgOiAnc2V0RW50aXR5J10oaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2VsZWN0SXRlbScsIGl0ZW0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS4kb24oJ3NldEN1cnJlbnRFbnRpdHknLCBmdW5jdGlvbiAoZXZlbnQsIGFyZ3MpIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50RW50aXR5ID0gYXJncy52YWx1ZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHNjb3BlLiRvbignc2V0Q3VycmVudExvY2F0aW9uJywgZnVuY3Rpb24gKGV2ZW50LCBhcmdzKSB7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudExvY2F0aW9uID0gYXJncy52YWx1ZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHNjb3BlLnNldEVudGl0aWVzID0gZnVuY3Rpb24gKGVudGl0aWVzKSB7XG4gICAgICAgICAgICAkc2NvcGUuZW50aXRpZXMgPSBlbnRpdGllcztcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc3RvcEVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2NvcGUuZWRpdGluZyA9IGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS4kb24oXCJlZGl0RW50aXR5U3VjY2Vzc1wiLCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICRzY29wZS5zZXRFbnRpdGllcyhyZXNwb25zZS5ub2Rlcyk7XG4gICAgICAgICAgICAvLyAkc2NvcGUuc2V0RW50aXR5SUQoJHNjb3BlLmN1cnJlbnRFbnRpdHkuaWQpO1xuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ2VudGl0aWVzTG9hZGVkJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRzY29wZS5hbmltYXRpb25zRW5hYmxlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ2hvbWVDdHJsJywgaG9tZURlcGVuZGVuY2llcyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA3LzExLzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGRlcGVuZGVuY2llcyA9IFtcbiAgICAgICAgZGlyZWN0aXZlXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIGRpcmVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwicmVzdHJpY3RcIjogXCJFXCIsXG4gICAgICAgICAgICBcInRlbXBsYXRlVXJsXCI6IFwianMvbmV0d29yay9uZXR3b3JrLmh0bWxcIixcbiAgICAgICAgICAgIFwiY29udHJvbGxlclwiOiBcIm5ldHdvcmtDdHJsXCJcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoXCIpXG4gICAgICAgIC5kaXJlY3RpdmUoXCJuZXR3b3JrXCIsIGRlcGVuZGVuY2llcyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI2LzE2LlxuICovXG4oZnVuY3Rpb24oYW5ndWxhcikge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2lucHV0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdGljdDogJ0UnLFxuICAgICAgICAgICAgcmVxdWlyZTogJz9uZ01vZGVsJyxcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmdNb2RlbCkge1xuICAgICAgICAgICAgICAgIGlmICggJ3R5cGUnIGluIGF0dHJzICYmIGF0dHJzLnR5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ3JhbmdlJyApIHtcbiAgICAgICAgICAgICAgICAgICAgbmdNb2RlbC4kcGFyc2Vycy5wdXNoKHBhcnNlRmxvYXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KTtcbn0pKGFuZ3VsYXIpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gb3ZlcnZpZXdDdHJsKCRzY29wZSwgXykge1xuICAgICAgICAkc2NvcGUuY2F0ZWdvcml6ZWRFbnRpdGllcyA9IHt9O1xuICAgICAgICBfLmZvckVhY2goXy5rZXlzKCRzY29wZS5lbnRpdHlUeXBlcyksIGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAkc2NvcGUuY2F0ZWdvcml6ZWRFbnRpdGllc1t0eXBlXSA9IF8uZmlsdGVyKCRzY29wZS5lbnRpdGllcywgeyd0eXBlJzogdHlwZX0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29udHJvbGxlcignb3ZlcnZpZXdDdHJsJywgWyckc2NvcGUnLCAnXycsIG92ZXJ2aWV3Q3RybF0pO1xufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMS8xNi5cbiAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIGFuYWx5dGljc0N0cmwoJHNjb3BlKSB7XG5cbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29udHJvbGxlcignYW5hbHl0aWNzQ3RybCcsIFsnJHNjb3BlJywgYW5hbHl0aWNzQ3RybF0pO1xufSkoYW5ndWxhcik7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBkZXRhaWxzQ3RybCgkc2NvcGUsIF8pIHtcbiAgICAgICAgJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0ID0ge1xuICAgICAgICAgICAgJ2tleV9wZW9wbGUnOiAzLFxuICAgICAgICAgICAgJ2dyYW50c19naXZlbic6IDMsXG4gICAgICAgICAgICAnZ3JhbnRzX3JlY2VpdmVkJzogMyxcbiAgICAgICAgICAgICdpbnZlc3RtZW50c19tYWRlJzogMyxcbiAgICAgICAgICAgICdpbnZlc3RtZW50c19yZWNlaXZlZCc6IDMsXG4gICAgICAgICAgICAnY29sbGFib3JhdGlvbnMnOiAzLFxuICAgICAgICAgICAgJ2VtcGxveW1lbnRzJzogMyxcbiAgICAgICAgICAgICdyZWxhdGlvbnMnOiAzLFxuICAgICAgICAgICAgJ2RhdGFfZ2l2ZW4nOiAzLFxuICAgICAgICAgICAgJ2RhdGFfcmVjZWl2ZWQnOiAzLFxuICAgICAgICAgICAgJ3JldmVudWVzJzogMyxcbiAgICAgICAgICAgICdleHBlbnNlcyc6IDNcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuaXRlbXNTaG93biA9IF8uY2xvbmUoJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0KTtcblxuICAgICAgICAkc2NvcGUuJG9uKCdlbnRpdHlDaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBSZXNldCBpdGVtcyBzaG93biBpbiBkZXRhaWxzIGxpc3QuXG4gICAgICAgICAgICAkc2NvcGUuaXRlbXNTaG93biA9IF8uY2xvbmUoJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0KTtcbiAgICAgICAgfSk7XG4gICAgICAgICRzY29wZS5zaG93TW9yZSA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAkc2NvcGUuaXRlbXNTaG93blt0eXBlXSA9ICRzY29wZS5jdXJyZW50RW50aXR5W3R5cGVdLmxlbmd0aDtcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLnNob3dMZXNzID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICRzY29wZS5pdGVtc1Nob3duW3R5cGVdID0gJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0W3R5cGVdO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdkZXRhaWxzQ3RybCcsIFsnJHNjb3BlJywgXCJfXCIsIGRldGFpbHNDdHJsXSk7XG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNy8xMC8xNi5cbiAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBjb250cm9sRGVwcyA9IFtcbiAgICAgICAgJ2VudGl0eVNlcnZpY2UnLFxuICAgICAgICAnY29ubmVjdGlvblNlcnZpY2UnLFxuICAgICAgICAnJHJvb3RTY29wZScsXG4gICAgICAgICdfJyxcbiAgICAgICAgJyRtb2RhbCcsXG4gICAgICAgIGNvbnRyb2xDdHJsXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIGNvbnRyb2xDdHJsKGVudGl0eVNlcnZpY2UsIGNvbm5lY3Rpb25TZXJ2aWNlLCAkcm9vdFNjb3BlLCBfLCAkbW9kYWwpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgdm0uZW50aXR5VHlwZXMgPSBlbnRpdHlTZXJ2aWNlLmdldEVudGl0eVR5cGVzKCk7XG4gICAgICAgIHZtLmNvbm5lY3Rpb25UeXBlcyA9IGNvbm5lY3Rpb25TZXJ2aWNlLmdldENvbm5lY3Rpb25UeXBlcygpO1xuICAgICAgICB2bS5zaXplQnlMaXN0ID0gW1xuICAgICAgICAgICAgeyduYW1lJzogJ0VtcGxveWVlcycsICd2YWx1ZSc6ICdlbXBsb3llZXMnfSxcbiAgICAgICAgICAgIHsnbmFtZSc6ICdUd2l0dGVyIEZvbGxvd2VycycsICd2YWx1ZSc6ICdmb2xsb3dlcnMnfVxuICAgICAgICBdO1xuICAgICAgICB2bS5zaXplQnkgPSAnZW1wbG95ZWVzJztcbiAgICAgICAgdm0uc2hvd1ZpZXcgPSB7XG4gICAgICAgICAgICAnTmV0d29yayc6IHRydWUsXG4gICAgICAgICAgICAnTWFwJzogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgdm0uc3dpdGNoVmlldyA9IHN3aXRjaFZpZXc7XG4gICAgICAgIHZtLmNoYW5nZVZpZXcgPSBmdW5jdGlvbiAodmlldykge1xuICAgICAgICAgICAgXy5mb3JFYWNoKF8ua2V5cyh2bS5zaG93VmlldyksIGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgdm0uc2hvd1ZpZXdbbmFtZV0gPSB2aWV3ID09PSBuYW1lO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygndGhpcyBoYXBwZW5lZCcpO1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCd2aWV3Q2hhbmdlJywgdm0uc2hvd1ZpZXcpO1xuICAgICAgICB9O1xuICAgICAgICB2bS5zaG93QWJvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkbW9kYWwub3Blbih7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbnRyb2wvYWJvdXQuaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ21vZGFsQ3RybCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB2bS50b2dnbGVOb2RlID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgndG9nZ2xlTm9kZScsIHsnbmFtZSc6IHR5cGUsICdlbmFibGVkJzogdm0uZW50aXR5VHlwZXNbdHlwZV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB2bS50b2dnbGVMaW5rID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgndG9nZ2xlTGluaycsIHsnbmFtZSc6IHR5cGUsICdlbmFibGVkJzogdm0uY29ubmVjdGlvblR5cGVzW3R5cGVdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdm0uY2hhbmdlU2l6ZUJ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdjaGFuZ2VTaXplQnknLCB2bS5zaXplQnkpO1xuICAgICAgICB9O1xuICAgICAgICBmdW5jdGlvbiBzd2l0Y2hWaWV3KCkge1xuICAgICAgICAgICAgdm0uY2hhbmdlVmlldyghdm0udG9nZ2xlTmV0d29yayA/ICdNYXAnIDogJ05ldHdvcmsnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZtLmNoYW5nZVNpemVCeSgpO1xuXG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ2NvbnRyb2xDdHJsJywgY29udHJvbERlcHMpO1xuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGVkaXRDb250cm9sbGVyRGVwcyA9IFtcbiAgICAgICAgJyRzY29wZScsXG4gICAgICAgICckaHR0cCcsXG4gICAgICAgICckdGltZW91dCcsXG4gICAgICAgICdfJyxcbiAgICAgICAgJ2VudGl0eVNlcnZpY2UnLFxuICAgICAgICAnbG9jYXRpb25TZXJ2aWNlJyxcbiAgICAgICAgJ2NvbmZpZycsXG4gICAgICAgIGVkaXRDdHJsXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIGlzRGVmKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqICE9PSB1bmRlZmluZWQgJiYgb2JqICE9PSBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVkaXRDdHJsKCRzY29wZSwgJGh0dHAsICR0aW1lb3V0LCBfLCBlbnRpdHlTZXJ2aWNlLCBsb2NhdGlvblNlcnZpY2UsIGNvbmZpZykge1xuICAgICAgICAkc2NvcGUuaXNFZGl0aW5nID0gZmFsc2U7XG4gICAgICAgICRzY29wZS5lZGl0RW50aXR5ID0gZW50aXR5U2VydmljZS5nZXRFbnRpdHlNb2RlbCgkc2NvcGUuZW50aXR5KTtcbiAgICAgICAgJHNjb3BlLmVudGl0eVR5cGVzID0gZW50aXR5U2VydmljZS5nZXRFbnRpdHlUeXBlcygpO1xuICAgICAgICAkc2NvcGUuaW5mbHVlbmNlVHlwZXMgPSBlbnRpdHlTZXJ2aWNlLmdldEluZmx1ZW5jZVR5cGVzKCk7XG5cbiAgICAgICAgdmFyIGNhdGVnb3J5QmFja3VwO1xuXG4gICAgICAgICRzY29wZS5jYXRlZ29yaWVzID0gW107XG5cbiAgICAgICAgJHNjb3BlLmFkZHJlc3NTZWFyY2ggPSBmdW5jdGlvbiAoc2VhcmNoKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuanNvbnAoJ2h0dHBzOi8vZGV2LnZpcnR1YWxlYXJ0aC5uZXQvUkVTVC92MS9Mb2NhdGlvbnMnLCB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBzZWFyY2gsXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ0FpNTg1ODF5Qy1TcjdtY0ZiWVR0VWtTM2l4RTdmNlp1Sm5iRkpDVkk0aEF0VzFYb0RFZVp5aWRRejJnTENDeUQnLFxuICAgICAgICAgICAgICAgICAgICAnanNvbnAnOiAnSlNPTl9DQUxMQkFDSycsXG4gICAgICAgICAgICAgICAgICAgICdpbmNsdWRlJzogJ2Npc28yJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0RlZihyZXNwb25zZS5kYXRhLnJlc291cmNlU2V0cykgJiYgcmVzcG9uc2UuZGF0YS5yZXNvdXJjZVNldHMubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLnJlc291cmNlU2V0c1swXS5yZXNvdXJjZXM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUudG9nZ2xlQ2F0ZWdvcnkgPSBmdW5jdGlvbiAoY2F0ZWdvcnkpIHtcbiAgICAgICAgICAgIGlmICgkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMucHVzaChjYXRlZ29yeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGNhdGVnb3J5SW5kZXggaW4gJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMuaGFzT3duUHJvcGVydHkoY2F0ZWdvcnlJbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbnRpdHlDYXRlZ29yeSA9ICRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXNbY2F0ZWdvcnlJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbnRpdHlDYXRlZ29yeS5pZCA9PT0gY2F0ZWdvcnkuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eUNhdGVnb3J5LmVuYWJsZWQgPSBjYXRlZ29yeS5lbmFibGVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzLnB1c2goY2F0ZWdvcnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2V0TG9jYXRpb24gPSBmdW5jdGlvbiAobG9jYXRpb24sIGlzTGFzdCkge1xuICAgICAgICAgICAgJHNjb3BlLmFkZHJlc3NTZWFyY2gobG9jYXRpb24uZm9ybWF0dGVkQWRkcmVzcylcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoYXBpQ2FsbFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gYXBpQ2FsbFJlc3VsdFswXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgPSByZXN1bHQuYWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50ID0gcmVzdWx0LnBvaW50O1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkTG9jYXRpb24oaXNMYXN0KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBQYXJzZXMgQVBJIGNhbGwgcmVzdWx0XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmFkZHJlc3NfbGluZSA9IGlzRGVmKGFkZHJlc3MuYWRkcmVzc0xpbmUpID8gYWRkcmVzcy5hZGRyZXNzTGluZSA6ICcnO1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5sb2NhbGl0eSA9IGlzRGVmKGFkZHJlc3MubG9jYWxpdHkpID8gYWRkcmVzcy5sb2NhbGl0eSA6ICcnO1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5kaXN0cmljdCA9XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0RlZihhZGRyZXNzLmFkbWluRGlzdHJpY3QpID8gYWRkcmVzcy5hZG1pbkRpc3RyaWN0IDogJyc7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmNvdW50cnkgPVxuICAgICAgICAgICAgICAgICAgICAgICAgaXNEZWYoYWRkcmVzcy5jb3VudHJ5UmVnaW9uKSA/IGFkZHJlc3MuY291bnRyeVJlZ2lvbiA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmNvdW50cnlfY29kZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0RlZihhZGRyZXNzLmNvdW50cnlSZWdpb25Jc28yKSA/IGFkZHJlc3MuY291bnRyeVJlZ2lvbklzbzIgOiAnJztcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uY29vcmRpbmF0ZXMgPSBpc0RlZihwb2ludC5jb29yZGluYXRlcykgPyBwb2ludC5jb29yZGluYXRlcyA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnBvc3RhbF9jb2RlID0gaXNEZWYoYWRkcmVzcy5wb3N0YWxDb2RlKSA/IGFkZHJlc3MucG9zdGFsQ29kZSA6IG51bGw7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmFkZExvY2F0aW9uID0gZnVuY3Rpb24gKGlzTGFzdCkge1xuICAgICAgICAgICAgaWYgKGlzTGFzdCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5lZGl0RW50aXR5LmxvY2F0aW9ucy5wdXNoKGxvY2F0aW9uU2VydmljZS5nZXRMb2NhdGlvbk1vZGVsKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5hZGRLZXlQZXJzb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBBZGQgYmxhbmsgZmllbGQgdG8gZWRpdCBpZiB0aGVyZSBhcmUgbm9uZS5cbiAgICAgICAgICAgIC8vIFdBVENIIE9VVCEgVE9ETzogSWYgc29tZW9uZSBkZWxldGVzIGFuIG9sZCBwZXJzb24sIGRlbGV0ZSB0aGVpciBpZCB0b28uXG4gICAgICAgICAgICAvLyBpLmUuIG1ha2Ugc3VyZSBvbGQvY2xlYXJlZCBmb3JtIGZpZWxkcyBhcmVuJ3QgYmVpbmcgZWRpdGVkIGludG8gbmV3IHBlb3BsZS5cbiAgICAgICAgICAgIGlmICghKF8uc29tZSgkc2NvcGUuZWRpdEVudGl0eS5rZXlfcGVvcGxlLCB7J25hbWUnOiAnJywgJ2lkJzogbnVsbH0pKSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5lZGl0RW50aXR5LmtleV9wZW9wbGUucHVzaCh7J25hbWUnOiAnJywgJ2lkJzogbnVsbH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZXRGdW5kaW5nQ29ubmVjdGlvbiA9IGZ1bmN0aW9uIChlbnRpdHksIGZ1bmRpbmcpIHtcbiAgICAgICAgICAgIC8vIEFkZCBvdGhlciBlbnRpdHkncyBpZCB0byB0aGlzIGZpbmFuY2UgY29ubmVjdGlvbi5cbiAgICAgICAgICAgIGZ1bmRpbmcuZW50aXR5X2lkID0gZW50aXR5LmlkO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5hZGRGdW5kaW5nQ29ubmVjdGlvbiA9IGZ1bmN0aW9uIChmdW5kaW5nKSB7XG4gICAgICAgICAgICBpZiAoIV8uc29tZShmdW5kaW5nLCB7J2VudGl0eSc6ICcnfSkpIHtcbiAgICAgICAgICAgICAgICAvLyBNYXliZSBzZXQgYW1vdW50IHRvIDAgaW5zdGVhZCBvZiBudWxsP1xuICAgICAgICAgICAgICAgIGZ1bmRpbmcucHVzaCh7J2VudGl0eSc6ICcnLCAnYW1vdW50JzogbnVsbCwgJ3llYXInOiBudWxsLCAnaWQnOiBudWxsfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNldENvbm5lY3Rpb24gPSBmdW5jdGlvbiAoZW50aXR5LCBjb25uZWN0aW9uKSB7XG4gICAgICAgICAgICBjb25uZWN0aW9uLmVudGl0eV9pZCA9IGVudGl0eS5pZDtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuYWRkQ29ubmVjdGlvbiA9IGZ1bmN0aW9uIChjb25uZWN0aW9ucykge1xuICAgICAgICAgICAgLy8gQWRkIGFuIGVtcHR5IGNvbm5lY3Rpb24gdG8gZWRpdCBpZiBub25lIGV4aXN0LlxuICAgICAgICAgICAgaWYgKCFfLnNvbWUoY29ubmVjdGlvbnMsIHsnZW50aXR5JzogJycsICdpZCc6IG51bGx9KSkge1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25zLnB1c2goeydlbnRpdHknOiAnJywgJ2lkJzogbnVsbCwgJ2RldGFpbHMnOiBudWxsfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmFkZEZpbmFuY2UgPSBmdW5jdGlvbiAocmVjb3Jkcykge1xuICAgICAgICAgICAgLy8gQWRkIG5ldyBmaW5hbmNlIGZpZWxkIGlmIGFsbCBjdXJyZW50IGZpZWxkcyBhcmUgdmFsaWQuXG4gICAgICAgICAgICBpZiAoXy5ldmVyeShyZWNvcmRzLCBmdW5jdGlvbiAocikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gci5hbW91bnQgPiAwICYmIHIueWVhciA+IDE3NTA7XG4gICAgICAgICAgICAgICAgfSkpIHtcbiAgICAgICAgICAgICAgICByZWNvcmRzLnB1c2goeydhbW91bnQnOiBudWxsLCAneWVhcic6IG51bGwsICdpZCc6IG51bGx9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5pc1NhdmluZyA9IHRydWU7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuZWRpdEVudGl0eS5nZW5lcmF0ZURCTW9kZWwoKSk7XG5cbiAgICAgICAgICAgICRodHRwLnBvc3QoY29uZmlnLmFwaUhvc3QgKyAnYXBpL3NhdmUnLCB7J2VudGl0eSc6ICRzY29wZS5lZGl0RW50aXR5LmdlbmVyYXRlREJNb2RlbCgpfSlcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmlzU2F2aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS4kZW1pdChcImVkaXRFbnRpdHlTdWNjZXNzXCIsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2FsbCB0byBob21lQ3RybCdzIHBhcmVudCBzdG9wRWRpdCgpIHRvIGNoYW5nZSB2aWV3IGJhY2sgYW5kIGFueSBvdGhlclxuICAgICAgICAgICAgICAgICAgICAvLyBoaWdoLWxldmVsIGNoYW5nZXMuXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jYW5jZWxFZGl0KCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXNFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pc0Vycm9yID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5jYW5jZWxFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS4kd2F0Y2goJ2VudGl0eScsIGZ1bmN0aW9uIChuZXdWYWwsIG9sZFZhbCkge1xuICAgICAgICAgICAgaWYgKGFuZ3VsYXIuZXF1YWxzKG5ld1ZhbCwgb2xkVmFsKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmVudGl0eSk7XG5cbiAgICAgICAgICAgICRzY29wZS5lZGl0RW50aXR5ID0gZW50aXR5U2VydmljZS5nZXRFbnRpdHlNb2RlbChuZXdWYWwpO1xuICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3JpZXMgPSBhbmd1bGFyLmNvcHkoY2F0ZWdvcnlCYWNrdXApO1xuXG4gICAgICAgICAgICBpbml0Q2F0ZWdvcnlBcnJheSgpO1xuXG4gICAgICAgICAgICAkc2NvcGUuaXNFZGl0aW5nID0gaXNEZWYoJHNjb3BlLmVkaXRFbnRpdHkuaWQpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW5pdGlhbGl6ZXMgY2F0ZWdvcnkgZmllbGRzIHdpdGggZW50aXR5IHZhbHVlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogTG9vcHMgdGhyb3VnaCBjYXRlZ29yeSBpbiBjYXRlZ29yaWVzIGFuZCBsb29wcyB0aHJvdWdoIGNhdGVnb3J5IGluIGVudGl0eS4gSWRlbnRpZmllc1xuICAgICAgICAgKiBjYXRlZ29yaWVzIGVuYWJsZWQgaW4gdGhlIGVudGl0eSBhbmQgc2V0cyBsb2NhbCBkaXNwbGF5IGRhdGEuIFRoaXMgaXMgYmVjYXVzZSB3ZSBjcmVhdGVkXG4gICAgICAgICAqIGEgYmFja3VwIG9mIGVudGl0eSBkYXRhIHNvIHRoYXQgdGhlIGFwaSBkYXRhIGlzIG5vdCB0YW1wZXJlZCB3aXRoIGRpcmVjdGx5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUT0RPOiByZXBsYWNlIHdpdGggYmV0dGVyIGRhdGEgc3RydWN0dXJlIGZvciBjYXRlZ29yaWVzLlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gaW5pdENhdGVnb3J5QXJyYXkoKSB7XG4gICAgICAgICAgICB2YXIgY2F0ZWdvcnksXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnlJbmRleCxcbiAgICAgICAgICAgICAgICBlbnRpdHlDYXRlZ29yeUluZGV4LFxuICAgICAgICAgICAgICAgIGVudGl0eUNhdGVnb3J5O1xuXG4gICAgICAgICAgICBmb3IgKGNhdGVnb3J5SW5kZXggaW4gJHNjb3BlLmNhdGVnb3JpZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5jYXRlZ29yaWVzLmhhc093blByb3BlcnR5KGNhdGVnb3J5SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRlZ29yeSA9ICRzY29wZS5jYXRlZ29yaWVzW2NhdGVnb3J5SW5kZXhdO1xuICAgICAgICAgICAgICAgIGZvciAoZW50aXR5Q2F0ZWdvcnlJbmRleCBpbiAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcy5oYXNPd25Qcm9wZXJ0eShlbnRpdHlDYXRlZ29yeUluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZW50aXR5Q2F0ZWdvcnkgPSAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzW2VudGl0eUNhdGVnb3J5SW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2F0ZWdvcnkuaWQgPT09IGVudGl0eUNhdGVnb3J5LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeS5lbmFibGVkID0gZW50aXR5Q2F0ZWdvcnkuZW5hYmxlZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJldHJpZXZlIENhdGVnb3JpZXMgZnJvbSBEQlxuICAgICAgICAkaHR0cC5nZXQoY29uZmlnLmFwaUhvc3QgKyAnYXBpL2NhdGVnb3JpZXMnKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUJhY2t1cCA9IGRhdGEuY2F0ZWdvcmllcztcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGVzIGJhY2t1cCBvZiBkYXRhIHVzaW5nIEFuZ3VsYXIgdG8gcHJldmVudCBhcGkgZGF0YSBmcm9tIGJlaW5nIHRhbXBlcmVkXG4gICAgICAgICAgICAgICAgLy8gZGlyZWN0bHlcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2F0ZWdvcmllcyA9IGFuZ3VsYXIuY29weShjYXRlZ29yeUJhY2t1cCk7XG4gICAgICAgICAgICAgICAgLy8gJHNjb3BlLmNhdGVnb3JpZXMgPSBkYXRhLmNhdGVnb3JpZXM7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29udHJvbGxlcignZWRpdEN0cmwnLCBlZGl0Q29udHJvbGxlckRlcHMpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yOC8xNi5cbiAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBjYXRlZ29yeVNlcnZpY2VEZXBlbmRlbmNpZXMgPSBbXG4gICAgICAgIENhdGVnb3J5U2VydmljZVxuICAgIF07XG5cbiAgICBmdW5jdGlvbiBDYXRlZ29yeVNlcnZpY2UoKSB7XG5cbiAgICAgICAgZnVuY3Rpb24gaXNEZWYobykgeyByZXR1cm4gbyAhPT0gdW5kZWZpbmVkICYmIG8gIT09IG51bGw7IH1cblxuICAgICAgICBmdW5jdGlvbiBDYXRlZ29yeShvYmopIHtcbiAgICAgICAgICAgIHZhciBkZWZPYmogPSBpc0RlZihvYmopID8gb2JqIDoge307XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSAoaXNEZWYoZGVmT2JqLm5hbWUpID8gZGVmT2JqLm5hbWUgOiBudWxsKTtcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlZCA9IChpc0RlZihkZWZPYmouZW5hYmxlKSA/IGRlZk9iai5lbmFibGVkIDogdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmlkID0gKGlzRGVmKGRlZk9iai5pZCkgPyBkZWZPYmouaWQgOiBudWxsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZ2V0Q2F0ZWdvcnlNb2RlbCA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDYXRlZ29yeShvYmopO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5zZXJ2aWNlKCdjYXRlZ29yeVNlcnZpY2UnLCBjYXRlZ29yeVNlcnZpY2VEZXBlbmRlbmNpZXMpO1xuXG59KShhbmd1bGFyKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjcvMTYuXG4gKi9cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGNvbm5lY3Rpb25TZXJ2aWNlID0gW0Nvbm5lY3Rpb25zXTtcbiAgICB2YXIgY29ubmVjdGlvblR5cGVzID0ge1xuICAgICAgICAnRnVuZGluZyc6IHRydWUsXG4gICAgICAgICdEYXRhJzogdHJ1ZSxcbiAgICAgICAgJ0VtcGxveW1lbnQnOiB0cnVlLFxuICAgICAgICAnQ29sbGFib3JhdGlvbic6IHRydWVcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gaXNEZWYobykge1xuICAgICAgICByZXR1cm4gbyAhPT0gdW5kZWZpbmVkICYmIG8gIT09IG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gQ29ubmVjdGlvbnMoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENvbm5lY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICB2YXIgb2JqSXNEZWYgPSBpc0RlZihvYmopO1xuICAgICAgICAgICAgdGhpcy5lbnRpdHkgPSAob2JqSXNEZWYgJiYgaXNEZWYob2JqLmVudGl0eSkgPyBvYmouZW50aXR5IDogbnVsbCk7XG4gICAgICAgICAgICB0aGlzLmlkID0gKG9iaklzRGVmICYmIGlzRGVmKG9iai5pZCkgPyBvYmouaWQgOiBudWxsKTtcbiAgICAgICAgICAgIHRoaXMuZGV0YWlscyA9IChvYmpJc0RlZiAmJiBpc0RlZihvYmouZGV0YWlscykgPyBvYmouZGV0YWlscyA6IG51bGwpO1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gKG9iaklzRGVmICYmIGlzRGVmKG9iai5uYW1lKSA/IG9iai5uYW1lOiBudWxsKTtcbiAgICAgICAgICAgIHRoaXMuZW50aXR5X2lkID0gKG9iaklzRGVmICYmIGlzRGVmKG9iai5lbnRpdHlfaWQpID8gb2JqLmVudGl0eV9pZDogbnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmdldENvbm5lY3Rpb25Nb2RlbCA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ29ubmVjdGlvbihvYmopO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZ2V0Q29ubmVjdGlvblR5cGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb25UeXBlcztcbiAgICAgICAgfTtcbiAgICB9XG5cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5zZXJ2aWNlKCdjb25uZWN0aW9uU2VydmljZScsIGNvbm5lY3Rpb25TZXJ2aWNlKTtcblxufSkoYW5ndWxhcik7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGVudGl0eVNlcnZpY2VEZXBlbmRlbmNpZXMgPSBbXG4gICAgICAgICdmdW5kaW5nQ29ubmVjdGlvblNlcnZpY2UnLFxuICAgICAgICAnY29ubmVjdGlvblNlcnZpY2UnLFxuICAgICAgICAnZmluYW5jZVNlcnZpY2UnLFxuICAgICAgICAnbG9jYXRpb25TZXJ2aWNlJyxcbiAgICAgICAgJ2NhdGVnb3J5U2VydmljZScsXG4gICAgICAgIEVudGl0eVNlcnZpY2VcbiAgICBdO1xuXG4gICAgZnVuY3Rpb24gRW50aXR5U2VydmljZShmdW5kaW5nQ29ubmVjdGlvblNlcnZpY2UsIGNvbm5lY3Rpb25TZXJ2aWNlLCBmaW5hbmNlU2VydmljZSwgbG9jYXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlTZXJ2aWNlXG4gICAgKSB7XG5cbiAgICAgICAgdmFyIGVudGl0eVR5cGVzID0ge1xuICAgICAgICAgICAgJ0dvdmVybm1lbnQnOiB0cnVlLFxuICAgICAgICAgICAgJ0Zvci1Qcm9maXQnOiB0cnVlLFxuICAgICAgICAgICAgJ05vbi1Qcm9maXQnOiB0cnVlLFxuICAgICAgICAgICAgJ0luZGl2aWR1YWwnOiB0cnVlXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGluZmx1ZW5jZVR5cGVzID0gW1xuICAgICAgICAgICAgJ0xvY2FsJyxcbiAgICAgICAgICAgICdOYXRpb25hbCcsXG4gICAgICAgICAgICAnR2xvYmFsJ1xuICAgICAgICBdO1xuXG4gICAgICAgIGZ1bmN0aW9uIGlzRGVmKG8pIHtcbiAgICAgICAgICAgIHJldHVybiBvICE9PSB1bmRlZmluZWQgJiYgbyAhPT0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGxvb3BBbmRJbml0KG1vZGVsQXJyYXksIGluaXRNb2RlbEZ1bmN0aW9uKSB7XG4gICAgICAgICAgICBpZiggISggaXNEZWYobW9kZWxBcnJheSkgfHwgYW5ndWxhci5pc0FycmF5KG1vZGVsQXJyYXkpICkgKSByZXR1cm4gW2luaXRNb2RlbEZ1bmN0aW9uKCldO1xuICAgICAgICAgICAgdmFyIGFycmF5SW5kZXgsXG4gICAgICAgICAgICAgICAgYXJyYXlWYWx1ZSxcbiAgICAgICAgICAgICAgICBuZXdNb2RlbEFycmF5ID0gW107XG5cbiAgICAgICAgICAgIGZvciAoIGFycmF5SW5kZXggaW4gbW9kZWxBcnJheSApIHtcbiAgICAgICAgICAgICAgICBpZighbW9kZWxBcnJheS5oYXNPd25Qcm9wZXJ0eShhcnJheUluZGV4KSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgYXJyYXlWYWx1ZSA9IG1vZGVsQXJyYXlbYXJyYXlJbmRleF07XG5cbiAgICAgICAgICAgICAgICBpZighYW5ndWxhci5pc09iamVjdChhcnJheVZhbHVlKSkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICBuZXdNb2RlbEFycmF5LnB1c2goaW5pdE1vZGVsRnVuY3Rpb24oYXJyYXlWYWx1ZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3TW9kZWxBcnJheS5wdXNoKGluaXRNb2RlbEZ1bmN0aW9uKCkpO1xuXG4gICAgICAgICAgICByZXR1cm4gbmV3TW9kZWxBcnJheTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIEVudGl0eShvYmopIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIHZhciBkZWZPYmogPSBpc0RlZihvYmopID8gb2JqIDoge307XG4gICAgICAgICAgICAvLyBUT0RPOiBEbyBhIGxvb3AgdG8gZ2VuZXJhdGUgdGhlc2UgbG9jYXRpb25zIGFzIG1vZGVscywgaW4gb3JkZXIgdG8gdXNlIHRoZSBmdW5jdGlvbnMgaW4gbW9kZWxcbiAgICAgICAgICAgIC8vIHRoaXMubG9jYXRpb25zID0gKGlzRGVmKGRlZk9iai5sb2NhdGlvbnMpID8gZGVmT2JqLmxvY2F0aW9ucyA6IFtsb2NhdGlvblNlcnZpY2UuZ2V0TG9jYXRpb25Nb2RlbCgpXSk7XG4gICAgICAgICAgICAvLyBUT0RPOiBEbyB0aGlzIGZvciBldmVyeSBhcnJheSBpbiB0aGlzIG1vZGVsXG4gICAgICAgICAgICB0aGlzLmlkID0gKGlzRGVmKGRlZk9iai5pZCkgPyBkZWZPYmouaWQgOiBudWxsKTtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IChpc0RlZihkZWZPYmoubmFtZSkgPyBkZWZPYmoubmFtZSA6IG51bGwpO1xuICAgICAgICAgICAgdGhpcy5sb2NhdGlvbnMgPSBsb29wQW5kSW5pdChkZWZPYmoubG9jYXRpb25zLCBsb2NhdGlvblNlcnZpY2UuZ2V0TG9jYXRpb25Nb2RlbCk7XG4gICAgICAgICAgICB0aGlzLmluZmx1ZW5jZSA9IChpc0RlZihkZWZPYmouaW5mbHVlbmNlKSA/IGRlZk9iai5pbmZsdWVuY2UgOiBudWxsKTtcbiAgICAgICAgICAgIHRoaXMuZ3JhbnRzX3JlY2VpdmVkID0gbG9vcEFuZEluaXQoZGVmT2JqLmdyYW50c19yZWNlaXZlZCwgZnVuZGluZ0Nvbm5lY3Rpb25TZXJ2aWNlLmdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgdGhpcy5pbnZlc3RtZW50c19yZWNlaXZlZCA9IGxvb3BBbmRJbml0KGRlZk9iai5pbnZlc3RtZW50c19yZWNlaXZlZCwgZnVuZGluZ0Nvbm5lY3Rpb25TZXJ2aWNlLmdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgdGhpcy5ncmFudHNfZ2l2ZW4gPSBsb29wQW5kSW5pdChkZWZPYmouZ3JhbnRzX2dpdmVuLCBmdW5kaW5nQ29ubmVjdGlvblNlcnZpY2UuZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICB0aGlzLmludmVzdG1lbnRzX21hZGUgPSBsb29wQW5kSW5pdChkZWZPYmouaW52ZXN0bWVudHNfbWFkZSwgZnVuZGluZ0Nvbm5lY3Rpb25TZXJ2aWNlLmdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgdGhpcy5kYXRhX2dpdmVuID0gbG9vcEFuZEluaXQoZGVmT2JqLmRhdGFfZ2l2ZW4sIGNvbm5lY3Rpb25TZXJ2aWNlLmdldENvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICB0aGlzLmRhdGFfcmVjZWl2ZWQgPSBsb29wQW5kSW5pdChkZWZPYmouZGF0YV9yZWNlaXZlZCwgY29ubmVjdGlvblNlcnZpY2UuZ2V0Q29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHRoaXMuY29sbGFib3JhdGlvbnMgPSBsb29wQW5kSW5pdChkZWZPYmouY29sbGFib3JhdGlvbnMsIGNvbm5lY3Rpb25TZXJ2aWNlLmdldENvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICB0aGlzLmtleV9wZW9wbGUgPSBsb29wQW5kSW5pdChkZWZPYmoua2V5X3Blb3BsZSwgY29ubmVjdGlvblNlcnZpY2UuZ2V0Q29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHRoaXMuZW1wbG95bWVudHMgPSBsb29wQW5kSW5pdChkZWZPYmouZW1wbG95bWVudHMsIGNvbm5lY3Rpb25TZXJ2aWNlLmdldENvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICB0aGlzLnJldmVudWVzID0gbG9vcEFuZEluaXQoZGVmT2JqLnJldmVudWVzLCBmaW5hbmNlU2VydmljZS5nZXRGaW5hbmNlTW9kZWwpO1xuICAgICAgICAgICAgdGhpcy5leHBlbnNlcyA9IGxvb3BBbmRJbml0KGRlZk9iai5leHBlbnNlcywgZmluYW5jZVNlcnZpY2UuZ2V0RmluYW5jZU1vZGVsKTtcbiAgICAgICAgICAgIHRoaXMuY2F0ZWdvcmllcyA9IGxvb3BBbmRJbml0KGRlZk9iai5jYXRlZ29yaWVzLCBjYXRlZ29yeVNlcnZpY2UuZ2V0Q2F0ZWdvcnlNb2RlbCk7XG4gICAgICAgICAgICB0aGlzLnR5cGUgPSAoaXNEZWYoZGVmT2JqLnR5cGUpID8gZGVmT2JqLnR5cGUgOiBudWxsKTtcbiAgICAgICAgICAgIHRoaXMubmlja25hbWUgPSAoaXNEZWYoZGVmT2JqLm5pY2tuYW1lKSA/IGRlZk9iai5uaWNrbmFtZSA6IG51bGwpO1xuICAgICAgICAgICAgdGhpcy51cmwgPSAoaXNEZWYoZGVmT2JqLnVybCkgPyBkZWZPYmoudXJsIDogbnVsbCk7XG4gICAgICAgICAgICB0aGlzLnR3aXR0ZXJfaGFuZGxlID0gKGlzRGVmKGRlZk9iai50d2l0dGVyX2hhbmRsZSkgPyBkZWZPYmoudHdpdHRlcl9oYW5kbGUgOiBudWxsKTtcbiAgICAgICAgICAgIHRoaXMuZW1wbG95ZWVzID0gKGlzRGVmKGRlZk9iai5lbXBsb3llZXMpID8gZGVmT2JqLmVtcGxveWVlcyA6IG51bGwpO1xuICAgICAgICAgICAgLy8gdGhpcy5yZWxhdGlvbnMgPSBsb29wQW5kSW5pdChkZWZPYmoucmVsYXRpb25zLCBjb25uZWN0aW9uU2VydmljZS5nZXRDb25uZWN0aW9uTW9kZWwpO1xuXG5cbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVEQk1vZGVsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRiTW9kZWwgPSBuZXcgRW50aXR5KHNlbGYpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwubG9jYXRpb25zLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwubG9jYXRpb25zLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZ3JhbnRzX3JlY2VpdmVkLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZ3JhbnRzX3JlY2VpdmVkLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZ3JhbnRzX2dpdmVuLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZ3JhbnRzX2dpdmVuLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuaW52ZXN0bWVudHNfcmVjZWl2ZWQucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5pbnZlc3RtZW50c19yZWNlaXZlZC5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmludmVzdG1lbnRzX21hZGUucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5pbnZlc3RtZW50c19tYWRlLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZGF0YV9naXZlbi5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmRhdGFfZ2l2ZW4ucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5kYXRhX3JlY2VpdmVkLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZGF0YV9yZWNlaXZlZC5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmNvbGxhYm9yYXRpb25zLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuY29sbGFib3JhdGlvbnMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5rZXlfcGVvcGxlLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwua2V5X3Blb3BsZS5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmVtcGxveW1lbnRzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZW1wbG95bWVudHMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5yZXZlbnVlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLnJldmVudWVzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZXhwZW5zZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5leHBlbnNlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmNhdGVnb3JpZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5jYXRlZ29yaWVzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZGVzY3JpcHRpb24gPSAnJztcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYk1vZGVsKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBkYk1vZGVsO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5nZXRFbnRpdHlNb2RlbCA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRW50aXR5KG9iaik7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXRFbnRpdHlUeXBlcyA9IGZ1bmN0aW9uICgpe1xuICAgICAgICAgICAgcmV0dXJuIGVudGl0eVR5cGVzO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZ2V0SW5mbHVlbmNlVHlwZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5mbHVlbmNlVHlwZXM7XG4gICAgICAgIH07XG5cbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuc2VydmljZSgnZW50aXR5U2VydmljZScsIGVudGl0eVNlcnZpY2VEZXBlbmRlbmNpZXMpO1xuXG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGZpbmFuY2VTZXJ2aWNlID0gW0ZpbmFuY2VTZXJ2aWNlXTtcblxuICAgIGZ1bmN0aW9uIGlzRGVmKG8pIHtcbiAgICAgICAgcmV0dXJuIG8gIT09IHVuZGVmaW5lZCAmJiBvICE9PSBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIEZpbmFuY2VTZXJ2aWNlKCkge1xuICAgICAgICBmdW5jdGlvbiBGaW5hbmNlKG9iaikge1xuICAgICAgICAgICAgdmFyIGRlZk9iaiA9IGlzRGVmKG9iaikgPyBvYmogOiB7fTtcbiAgICAgICAgICAgIHRoaXMuYW1vdW50ID0gKGlzRGVmKGRlZk9iai5hbW91bnQpICYmIGRlZk9iai5hbW91bnQgPj0gMCA/IGRlZk9iai5hbW91bnQgOiAwKTtcbiAgICAgICAgICAgIHRoaXMueWVhciA9IChpc0RlZihkZWZPYmoueWVhcikgJiYgZGVmT2JqLnllYXIgPj0gMTc1MCA/IGRlZk9iai55ZWFyIDogbnVsbCk7XG4gICAgICAgICAgICB0aGlzLmlkID0gKGlzRGVmKGRlZk9iai5pZCkgPyBkZWZPYmouaWQgOiBudWxsKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5nZXRGaW5hbmNlTW9kZWwgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZpbmFuY2Uob2JqKTtcbiAgICAgICAgfTtcbiAgICB9XG5cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5zZXJ2aWNlKCdmaW5hbmNlU2VydmljZScsIGZpbmFuY2VTZXJ2aWNlKTtcblxufSkoYW5ndWxhcik7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxuICovXG5cbihmdW5jdGlvbihhbmd1bGFyKXtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBmdW5kaW5nQ29ubmVjdGlvblNlcnZpY2VEZXBlbmRlbmNpZXMgPSBbRnVuZGluZ0Nvbm5lY3Rpb25zXTtcblxuICAgIGZ1bmN0aW9uIGlzRGVmKG8pIHsgcmV0dXJuIG8gIT09IHVuZGVmaW5lZCAmJiBvICE9PSBudWxsOyB9XG5cbiAgICBmdW5jdGlvbiBGdW5kaW5nQ29ubmVjdGlvbnMoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEZ1bmRpbmdDb25uZWN0aW9uKG9iaikge1xuICAgICAgICAgICAgdmFyIG9iaklzRGVmID0gaXNEZWYob2JqKTtcbiAgICAgICAgICAgIHRoaXMuZW50aXR5ID0gKG9iaklzRGVmICYmIGlzRGVmKG9iai5lbnRpdHkpID8gb2JqLmVudGl0eSA6ICcnKTtcbiAgICAgICAgICAgIHRoaXMuYW1vdW50ID0gKG9iaklzRGVmICYmIGlzRGVmKG9iai5hbW91bnQpID8gb2JqLmFtb3VudDogbnVsbCk7XG4gICAgICAgICAgICB0aGlzLnllYXIgPSAob2JqSXNEZWYgJiYgaXNEZWYob2JqLnllYXIpID8gb2JqLnllYXIgOiBudWxsKTtcbiAgICAgICAgICAgIHRoaXMuaWQgPSAob2JqSXNEZWYgJiYgaXNEZWYob2JqLmlkKSA/IG9iai5pZCA6IG51bGwpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5nZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsID0gZnVuY3Rpb24ob2JqKXtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRnVuZGluZ0Nvbm5lY3Rpb24ob2JqKTtcbiAgICAgICAgfTtcblxuXG5cbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuc2VydmljZSgnZnVuZGluZ0Nvbm5lY3Rpb25TZXJ2aWNlJywgZnVuZGluZ0Nvbm5lY3Rpb25TZXJ2aWNlRGVwZW5kZW5jaWVzKTtcblxuXG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGxvY2F0aW9uU2VydmljZURlcGVuZGVuY2llcyA9IFtMb2NhdGlvblNlcnZpY2VdO1xuXG5cblxuICAgIGZ1bmN0aW9uIExvY2F0aW9uU2VydmljZSgpe1xuXG4gICAgICAgIGZ1bmN0aW9uIGlzRGVmKG8pIHtcbiAgICAgICAgICAgIHJldHVybiBvICE9PSB1bmRlZmluZWQgJiYgbyAhPT0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIExvY2F0aW9uKG9iaikge1xuICAgICAgICAgICAgdmFyIGRlZk9iaiA9IGlzRGVmKG9iaikgPyBvYmogOiB7fTtcbiAgICAgICAgICAgIHRoaXMuYWRkcmVzc19saW5lID0gKGlzRGVmKGRlZk9iai5hZGRyZXNzX2xpbmUpID8gZGVmT2JqLmFkZHJlc3NfbGluZSA6IG51bGwpO1xuICAgICAgICAgICAgdGhpcy5sb2NhbGl0eSA9IChpc0RlZihkZWZPYmoubG9jYWxpdHkpID8gZGVmT2JqLmxvY2FsaXR5IDogbnVsbCk7XG4gICAgICAgICAgICB0aGlzLmRpc3RyaWN0ID0gKGlzRGVmKGRlZk9iai5kaXN0cmljdCkgPyBkZWZPYmouZGlzdHJpY3QgOiBudWxsKTtcbiAgICAgICAgICAgIHRoaXMucG9zdGFsX2NvZGUgPSAoaXNEZWYoZGVmT2JqLnBvc3RhbF9jb2RlKSA/IGRlZk9iai5wb3N0YWxfY29kZSA6IG51bGwpO1xuICAgICAgICAgICAgdGhpcy5jb3VudHJ5ID0gKGlzRGVmKGRlZk9iai5jb3VudHJ5KSA/IGRlZk9iai5jb3VudHJ5IDogbnVsbCk7XG4gICAgICAgICAgICB0aGlzLmNvdW50cnlfY29kZSA9IChpc0RlZihkZWZPYmouY291bnRyeV9jb2RlKSA/IGRlZk9iai5jb3VudHJ5X2NvZGUgOiBudWxsKTtcbiAgICAgICAgICAgIHRoaXMuY29vcmRpbmF0ZXMgPSAoaXNEZWYoZGVmT2JqLmNvb3JkaW5hdGVzKSA/IGRlZk9iai5jb29yZGluYXRlcyA6IG51bGwpO1xuICAgICAgICAgICAgdGhpcy5pZCA9IChpc0RlZihkZWZPYmouaWQpID8gZGVmT2JqLmlkIDogbnVsbCk7XG4gICAgICAgICAgICB0aGlzLmZvcm1hdHRlZEFkZHJlc3MgPSAoaXNEZWYodGhpcy5hZGRyZXNzX2xpbmUpID8gdGhpcy5hZGRyZXNzX2xpbmUgKyAgJyAnIDogJycpXG4gICAgICAgICAgICAgICAgKyAoaXNEZWYodGhpcy5sb2NhbGl0eSkgPyB0aGlzLmxvY2FsaXR5ICsgJywgJyA6ICcnKVxuICAgICAgICAgICAgICAgICsgKGlzRGVmKHRoaXMuY291bnRyeV9jb2RlKSA/IHRoaXMuY291bnRyeV9jb2RlICsgJyAnIDogJycpXG4gICAgICAgICAgICAgICAgKyAoaXNEZWYodGhpcy5wb3N0YWxfY29kZSkgPyB0aGlzLnBvc3RhbF9jb2RlIDogJycpO1xuICAgICAgICAgICAgdGhpcy5mb3JtYXR0ZWRBZGRyZXNzID0gdGhpcy5mb3JtYXR0ZWRBZGRyZXNzLnRyaW0oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZ2V0TG9jYXRpb25Nb2RlbCA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBMb2NhdGlvbihvYmopO1xuICAgICAgICB9O1xuXG4gICAgfVxuXG5cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5zZXJ2aWNlKCdsb2NhdGlvblNlcnZpY2UnLCBsb2NhdGlvblNlcnZpY2VEZXBlbmRlbmNpZXMpO1xuXG59KShhbmd1bGFyKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIsIGQzLCBMKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGRlcGVuZGVuY2llcyA9IFtcbiAgICAgICAgJyRzY29wZScsXG4gICAgICAgICckdGltZW91dCcsXG4gICAgICAgICdsZWFmbGV0RGF0YScsXG4gICAgICAgICdfJyxcbiAgICAgICAgJyRmaWx0ZXInLFxuICAgICAgICBtYXBDdHJsXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIG1hcEN0cmwoJHNjb3BlLCAkdGltZW91dCwgbGVhZmxldERhdGEsIF8sICRmaWx0ZXIpIHtcblxuICAgICAgICAkc2NvcGUub3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGNlbnRlciAgOiB7XG4gICAgICAgICAgICAgICAgbGF0IDogMjAuMDAsXG4gICAgICAgICAgICAgICAgbG5nIDogLTQwLjAwLFxuICAgICAgICAgICAgICAgIHpvb206IDNcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgICAgIHRpbGVMYXllciAgICAgICAgIDogJ2h0dHBzOi8vYXBpLnRpbGVzLm1hcGJveC5jb20vdjQvbWFwYm94LmxpZ2h0L3t6fS97eH0ve3l9LnBuZz9hY2Nlc3NfdG9rZW49cGsuZXlKMUlqb2laR0YyYVdSc2NtNTBJaXdpWVNJNklqQTBNMlJrTnpNelpXSm1OekV6TkdZek1UZGhZVEV4WXpBeVptVTRaVEUxSW4wLlROWWxGdGEyVkl0cmtuNEwwWjlCSlEnLFxuICAgICAgICAgICAgICAgIHRpbGVMYXllck9wdGlvbnMgIDoge1xuICAgICAgICAgICAgICAgICAgICBkZXRlY3RSZXRpbmE6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHJldXNlVGlsZXMgIDogZmFsc2VcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHpvb21Db250cm9sICAgICAgIDogZmFsc2UsXG4gICAgICAgICAgICAgICAgYXR0cmlidXRpb25Db250cm9sOiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjcmVhdGVQaWVDaGFydCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgICA9IG9wdGlvbnMuZGF0YTtcbiAgICAgICAgICAgICAgICB2YXIgcGllICAgID0gZDMubGF5b3V0LnBpZSgpLnNvcnQobnVsbCkudmFsdWUoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQudmFsdWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyIGFyYyAgICA9IGQzLnN2Zy5hcmMoKS5vdXRlclJhZGl1cyhvcHRpb25zLnIpLmlubmVyUmFkaXVzKG9wdGlvbnMuciAtIDEwKTtcbiAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gb3B0aW9ucy5yICsgb3B0aW9ucy5zdHJva2VXaWR0aDtcbiAgICAgICAgICAgICAgICB2YXIgdyAgICAgID0gY2VudGVyICogMjtcbiAgICAgICAgICAgICAgICB2YXIgaCAgICAgID0gdztcbiAgICAgICAgICAgICAgICB2YXIgc3ZnICAgID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGQzLm5zLnByZWZpeC5zdmcsICdzdmcnKTtcbiAgICAgICAgICAgICAgICB2YXIgdmlzICAgID0gZDMuc2VsZWN0KHN2ZylcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEoZGF0YSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3BpZWNoYXJ0JylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgdylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGgpO1xuXG4gICAgICAgICAgICAgICAgdmFyIGFyY3MgPSB2aXMuc2VsZWN0QWxsKCcuYXJjJylcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEocGllKGRhdGEpKVxuICAgICAgICAgICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnYXJjJylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIGNlbnRlciArICcsJyArIGNlbnRlciArICcpJyk7XG5cbiAgICAgICAgICAgICAgICAvLyB2YXIgbWFwID0gTC5tYXBib3gubWFwKCdtYXAnLCAnZXhhbXBsZXMubWFwLTlpanVrMjR5Jywge1xuICAgICAgICAgICAgICAgIC8vICAgICBtaW5ab29tOiAxLFxuICAgICAgICAgICAgICAgIC8vICAgICBtYXhab29tOiAyXG4gICAgICAgICAgICAgICAgLy8gfSkuc2V0VmlldyhbNDAsIC03NC41MF0sIDkpO1xuXG4gICAgICAgICAgICAgICAgYXJjcy5hcHBlbmQoJ3BhdGgnKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsIGFyYylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmRhdGEudHlwZSArICctYXJjJztcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBhcmNzLmFwcGVuZChcInN2Zzp0ZXh0XCIpXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uIChkLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zLmNvdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcInhcIiwgLTQgKiBvcHRpb25zLmNvdW50LnRvU3RyaW5nKCkubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcImR5XCIsIDUpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJhcmNUZXh0XCIpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5YTUxTZXJpYWxpemVyID8gKG5ldyB3aW5kb3cuWE1MU2VyaWFsaXplcigpKS5zZXJpYWxpemVUb1N0cmluZyhzdmcpXG4gICAgICAgICAgICAgICAgICAgIDogc3ZnLnhtbCA/IHN2Zy54bWwgOiAnJztcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGxlYWZsZXREYXRhLmdldE1hcCgpLnRoZW4oZnVuY3Rpb24gKG1hcCkge1xuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJlZEVudGl0aWVzID0gJGZpbHRlcignZmlsdGVyJykoJHNjb3BlLmVudGl0aWVzLFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRpdHkuY29sbGFib3JhdGlvbnMubGVuZ3RoID4gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBtYXAuaW52YWxpZGF0ZVNpemUoKTtcblxuICAgICAgICAgICAgICAgIG5ldyBMLkNvbnRyb2wuWm9vbSh7cG9zaXRpb246ICd0b3ByaWdodCd9KS5hZGRUbyhtYXApO1xuICAgICAgICAgICAgICAgIEwuY29udHJvbC5sb2NhdGUoXG4gICAgICAgICAgICAgICAgICAgIHtwb3NpdGlvbjogJ3RvcHJpZ2h0Jywgc2hvd1BvcHVwOiBmYWxzZSwgaWNvbjogJ2ZhIGZhLWxvY2F0aW9uLWFycm93J31cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUbyhtYXApO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gY2x1c3Rlckljb24oY2x1c3Rlcikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRyZW4gICAgICAgPSBjbHVzdGVyLmdldEFsbENoaWxkTWFya2VycygpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG90YWwgICAgICAgICAgPSBjaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjbHVzdGVyTWFya2VycyA9IF8ucGx1Y2soY2hpbGRyZW4sICdvcHRpb25zJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb3VudHMgICAgICAgICA9IF8ubWFwKF8uY291bnRCeShjbHVzdGVyTWFya2VycywgJ3R5cGUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGNvdW50LCB0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyd0eXBlJzogdHlwZSwgJ3ZhbHVlJzogY291bnR9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHIgICAgICAgICAgICAgID0gMjg7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdHJva2VXaWR0aCAgICA9IDE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpY29uRGltICAgICAgICA9IChyICsgc3Ryb2tlV2lkdGgpICogMjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWwgICAgICAgICAgID0gY3JlYXRlUGllQ2hhcnQoXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZGF0YTogY291bnRzLCByOiByLCBzdHJva2VXaWR0aDogc3Ryb2tlV2lkdGgsIGNvdW50OiB0b3RhbH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEwuRGl2SWNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sICAgICA6IGh0bWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdtYXJrZXItY2x1c3RlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZSA6IG5ldyBMLnBvaW50KGljb25EaW0sIGljb25EaW0pXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbWFya2VySWNvbiAgPSB7XG4gICAgICAgICAgICAgICAgICAgICdOb24tUHJvZml0JzogTC5pY29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25VcmwgOiAnaW1nL21hcmtlci1ub25wcm9mLnN2ZycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZTogWzYwLCA2MF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICdGb3ItUHJvZml0JzogTC5pY29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25VcmwgOiAnaW1nL21hcmtlci1wcm9mLnN2ZycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZTogWzYwLCA2MF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICdJbmRpdmlkdWFsJzogTC5pY29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25VcmwgOiAnaW1nL21hcmtlci1pbmQuc3ZnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TaXplOiBbNjAsIDYwXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgJ0dvdmVybm1lbnQnOiBMLmljb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblVybCA6ICdpbWcvbWFya2VyLWdvdi5zdmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblNpemU6IFs2MCwgNjBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHZhciBtYXJrZXJzID0gTC5tYXJrZXJDbHVzdGVyR3JvdXAoe1xuXG4gICAgICAgICAgICAgICAgICAgIHNwaWRlcmZ5T25NYXhab29tOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzaG93Q292ZXJhZ2VPbkhvdmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNyZWF0ZUZ1bmN0aW9uOiBjbHVzdGVySWNvbixcbiAgICAgICAgICAgICAgICAgICAgbWF4Q2x1c3RlclJhZGl1czogMzAsXG4gICAgICAgICAgICAgICAgICAgIHNwaWRlcmZ5RGlzdGFuY2VNdWx0aXBsaWVyOiAxLjNcbiAgICAgICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gb3V0ZXJMb29wKGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBpbm5lckxvb3AobG9jKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV8uZXZlcnkobG9jLmNvb3JkaW5hdGVzKSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvYy5jb29yZGluYXRlc1swXS50b0ZpeGVkKDUpID09PSAnNDAuNzgyMDAnICYmIGxvYy5jb29yZGluYXRlc1sxXS50b0ZpeGVkKDUpID09PSAnLTczLjgzMTcwJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYy5jb29yZGluYXRlc1swXSA9IDQwLjc3MDY1O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYy5jb29yZGluYXRlc1sxXSA9IC03My45NzQwNjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtID0gTC5tYXJrZXIobG9jLmNvb3JkaW5hdGVzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogbWFya2VySWNvbltlbnRpdHkudHlwZV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RpdGxlJzogZW50aXR5Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2VudGl0eV9pZCc6IGVudGl0eS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWVzc2FnZSc6IGVudGl0eS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogZW50aXR5LnR5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Vycy5hZGRMYXllcihtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIF8uZm9yRWFjaChlbnRpdHkubG9jYXRpb25zLCBpbm5lckxvb3ApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiT3JpZ2luYWw6ICVPXCIsICRzY29wZS5lbnRpdGllcyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGaWx0ZXJlZDogJU9cIiwgZmlsdGVyZWRFbnRpdGllcyk7XG5cbiAgICAgICAgICAgICAgICBfLmZvckVhY2goZmlsdGVyZWRFbnRpdGllcywgb3V0ZXJMb29wKTtcbiAgICAgICAgICAgICAgICBtYXAuYWRkTGF5ZXIobWFya2Vycyk7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBvbkxvY2F0aW9uRXJyb3IobGVhZmxldEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobGVhZmxldEVycm9yLm1lc3NhZ2UgKyBcIiAgJU9cIiwgbGVhZmxldEVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBtYXAub24oJ2xvY2F0aW9uZXJyb3InLCBvbkxvY2F0aW9uRXJyb3IpO1xuICAgICAgICAgICAgICAgIC8vIG1hcC5sb2NhdGUoe3NldFZpZXc6IHRydWUsIG1heFpvb206IDExfSk7XG4gICAgICAgICAgICAgICAgbWFya2Vycy5vbignY2xpY2snLCBmdW5jdGlvbiAobWFya2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zZXRFbnRpdHlJRChtYXJrZXIubGF5ZXIub3B0aW9ucy5lbnRpdHlfaWQpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSAkc2NvcGUuY3VycmVudEVudGl0eTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCAgID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5zZXR0aW5nc0VuYWJsZWQgJiYgJHNjb3BlLm1vYmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRvZ2dsZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgbWFwLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCAgID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICRzY29wZS4kb24oJ3NlbGVjdEl0ZW0nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb29yZGluYXRlcyA9ICRzY29wZS5jdXJyZW50RW50aXR5LmxvY2F0aW9ucy5sZW5ndGggPiAwID8gXy5wbHVjayhcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jdXJyZW50RW50aXR5LmxvY2F0aW9ucywgJ2Nvb3JkaW5hdGVzJykgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29vcmRpbmF0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFwLnNldFZpZXcoY29vcmRpbmF0ZXNbMF0sIDExKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbnRlcmFjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG5cbiAgICAgICAgLmNvbnRyb2xsZXIoJ21hcEN0cmwnLCBkZXBlbmRlbmNpZXMpO1xufSkoYW5ndWxhciwgZDMsIEwpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyLCBSVFApIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBkZXBlbmRlbmNpZXMgPSBbXG4gICAgICAgICckc2NvcGUnLFxuICAgICAgICAnJGh0dHAnLFxuICAgICAgICAnXycsXG4gICAgICAgICckZmlsdGVyJyxcbiAgICAgICAgJ2NvbmZpZycsXG4gICAgICAgIG5ldHdvcmtDdHJsXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIGlzRGVmKG8pIHtcbiAgICAgICAgcmV0dXJuIG8gIT09IHVuZGVmaW5lZCAmJiBvICE9PSBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5ldHdvcmtDdHJsKCRzY29wZSwgJGh0dHAsIF8sICRmaWx0ZXIsIGNvbmZpZykge1xuICAgICAgICAvLyBUT0RPOiBNYWtlIGEgaGFzaG1hcCBvbiB0aGUgYmFja2VuZCBvZiBpZCAtPiBwb3NpdGlvbiwgdGhlbiB1c2Ugc291cmNlOlxuICAgICAgICAvLyBlbnRpdGllc1ttYXBbc291cmNlaWRdXSB0byBnZXQgbm9kZXMuIFNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcS8xNjgyNDMwOFxuICAgICAgICAkc2NvcGUuaXNMb2FkaW5nICAgPSB0cnVlO1xuICAgICAgICAkc2NvcGUuY29ubmVjdGlvbnMgPSB7fTtcblxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9jb2RlcndhbGwuY29tL3Avbmdpc21hL3NhZmUtYXBwbHktaW4tYW5ndWxhci1qc1xuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5ID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICB2YXIgcGhhc2UgPSB0aGlzLiRyb290LiQkcGhhc2U7XG4gICAgICAgICAgICBpZiAocGhhc2UgPT09ICckYXBwbHknIHx8IHBoYXNlID09PSAnJGRpZ2VzdCcpIHtcbiAgICAgICAgICAgICAgICBpZiAoZm4gJiYgKHR5cGVvZihmbikgPT09ICdmdW5jdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRhcHBseShmbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLiRvbignZW50aXRpZXNMb2FkZWQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXRTY29wZSA9IGV2ZW50LnRhcmdldFNjb3BlO1xuICAgICAgICAgICAgJGh0dHAuZ2V0KGNvbmZpZy5hcGlIb3N0ICsgJ2FwaS9jb25uZWN0aW9ucycpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWRFbnRpdGllcyAgICA9ICRmaWx0ZXIoJ2ZpbHRlcicpKCRzY29wZS5lbnRpdGllcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW50aXR5LmNvbGxhYm9yYXRpb25zLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PSAkc2NvcGUubWluQ29ubmVjdGlvbnM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWRDb25uZWN0aW9ucyA9IHt9O1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChfLmtleXMoZGF0YS5jb25uZWN0aW9ucyksIGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICRzY29wZS5jb25uZWN0aW9uc1t0eXBlXSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZENvbm5lY3Rpb25zW3R5cGVdID0gW107XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGRhdGEuY29ubmVjdGlvbnMsIGZ1bmN0aW9uIChjb25uZWN0aW9ucywgdHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBfLmZvckVhY2goY29ubmVjdGlvbnMsIGZ1bmN0aW9uIChjb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlTm9kZSA9IF8uZmluZChmaWx0ZXJlZEVudGl0aWVzLCB7J2lkJzogY29ubmVjdGlvbi5zb3VyY2V9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXROb2RlID0gXy5maW5kKGZpbHRlcmVkRW50aXRpZXMsIHsnaWQnOiBjb25uZWN0aW9uLnRhcmdldH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoIGlzRGVmKHNvdXJjZU5vZGUpICYmIGlzRGVmKHRhcmdldE5vZGUpICkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkQ29ubmVjdGlvbnNbdHlwZV0ucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7J3NvdXJjZSc6IHNvdXJjZU5vZGUsICd0YXJnZXQnOiB0YXJnZXROb2RlfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAkc2NvcGUuY29ubmVjdGlvbnNbdHlwZV0ucHVzaCh7J3NvdXJjZSc6IHNvdXJjZU5vZGUsICd0YXJnZXQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGFyZ2V0Tm9kZX0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBPbmx5IHNob3cgbGFiZWxzIG9uIHRvcCA1IG1vc3QgY29ubmVjdGVkIGVudGl0aWVzIGluaXRpYWxseS5cbiAgICAgICAgICAgICAgICBfLmZvckVhY2goXy5rZXlzKCRzY29wZS5lbnRpdHlUeXBlcyksIGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZpbmQgdGhlIHRvcCA1IG1vc3QtY29ubmVjdGVkIGVudGl0aWVzLlxuICAgICAgICAgICAgICAgICAgICB2YXIgdG9wNSA9IF8udGFrZVJpZ2h0KF8uc29ydEJ5KF8uZmlsdGVyKCRzY29wZS5lbnRpdGllcywgeyd0eXBlJzogdHlwZX0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjb2xsYWJvcmF0aW9ucy5sZW5ndGgnKSwgNSk7XG4gICAgICAgICAgICAgICAgICAgIF8uZm9yRWFjaCh0b3A1LCBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHkud2VsbGNvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgZmlsdGVyZWRFbnRpdGllcyA9IF8uc29ydEJ5KGZpbHRlcmVkRW50aXRpZXMsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoZS53ZWxsY29ubmVjdGVkKSA/IDEgOiAwO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgZHJhd05ldHdvcmsoZmlsdGVyZWRFbnRpdGllcywgZmlsdGVyZWRDb25uZWN0aW9ucyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHNjb3BlLiRvbigndmlld0NoYW5nZScsIGZ1bmN0aW9uICh2aWV3T2JqKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh2aWV3T2JqKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGRyYXdOZXR3b3JrID0gZnVuY3Rpb24gKGVudGl0eUFycmF5LCBjb25uZWN0aW9uQXJyYXkpIHtcbiAgICAgICAgICAgICRzY29wZS5pc0xvYWRpbmcgPSBmYWxzZTtcblxuICAgICAgICAgICAgdmFyIHN2ZyA9IGQzLnNlbGVjdCgnI25ldHdvcmsnKTtcbiAgICAgICAgICAgIHN2Zy5zZWxlY3RBbGwoXCIqXCIpLnJlbW92ZSgpO1xuICAgICAgICAgICAgdmFyIGJvdW5kcyAgICAgICAgICAgPSBzdmcubm9kZSgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdmFyIGhlaWdodCAgICAgICAgICAgPSBib3VuZHMuaGVpZ2h0O1xuICAgICAgICAgICAgdmFyIHdpZHRoICAgICAgICAgICAgPSBib3VuZHMud2lkdGg7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0U2NhbGUgICAgICA9IDY7XG4gICAgICAgICAgICB2YXIgZGVmYXVsdE5vZGVTaXplICA9IDc7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0cyAgICAgICAgICA9IHtcbiAgICAgICAgICAgICAgICAnSW5kaXZpZHVhbCc6IHsneCc6IDEsICd5JzogMX0sXG4gICAgICAgICAgICAgICAgJ0Zvci1Qcm9maXQnOiB7J3gnOiAxLCAneSc6IC0xfSxcbiAgICAgICAgICAgICAgICAnTm9uLVByb2ZpdCc6IHsneCc6IC0xLCAneSc6IDF9LFxuICAgICAgICAgICAgICAgICdHb3Zlcm5tZW50Jzogeyd4JzogLTEsICd5JzogLTF9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGxvd2VyQm91bmRSYWRpdXMgPSAxMDtcbiAgICAgICAgICAgIHZhciB1cHBlckJvdW5kUmFkaXVzID0gNTA7XG4gICAgICAgICAgICB2YXIgbWF4RW1wbG95ZWVzICAgICA9IGQzLm1heChlbnRpdHlBcnJheSwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KGVsLmVtcGxveWVlcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBtYXhGb2xsb3dlcnMgICAgID0gZDMubWF4KGVudGl0eUFycmF5LCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoZWwuZm9sbG93ZXJzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIHNjYWxlICAgICAgICAgICAgPSB7XG4gICAgICAgICAgICAgICAgJ2VtcGxveWVlcyc6IGQzLnNjYWxlLnNxcnQoKS5kb21haW4oWzEwLCBtYXhFbXBsb3llZXNdKVxuICAgICAgICAgICAgICAgICAgICAucmFuZ2UoW2xvd2VyQm91bmRSYWRpdXMsIHVwcGVyQm91bmRSYWRpdXNdKSxcbiAgICAgICAgICAgICAgICAnZm9sbG93ZXJzJzogZDMuc2NhbGUuc3FydCgpLmRvbWFpbihbMTAsIG1heEZvbGxvd2Vyc10pXG4gICAgICAgICAgICAgICAgICAgIC5yYW5nZShbbG93ZXJCb3VuZFJhZGl1cywgdXBwZXJCb3VuZFJhZGl1c10pXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGxpbmtzICAgICAgICAgICAgPSB7fTtcbiAgICAgICAgICAgIHZhciBmb3JjZSAgICAgICAgICAgID0gZDMubGF5b3V0LmZvcmNlKClcbiAgICAgICAgICAgICAgICAuc2l6ZShbd2lkdGgsIGhlaWdodF0pXG4gICAgICAgICAgICAgICAgLm5vZGVzKGVudGl0eUFycmF5KVxuICAgICAgICAgICAgICAgIC5saW5rcyhfLmZsYXR0ZW4oXy52YWx1ZXMoY29ubmVjdGlvbkFycmF5KSkpXG4gICAgICAgICAgICAgICAgLmNoYXJnZShmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5lbXBsb3llZXMgPyAtMiAqIHNjYWxlLmVtcGxveWVlcyhkLmVtcGxveWVlcykgOiAtMjA7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAubGlua1N0cmVuZ3RoKDApXG4gICAgICAgICAgICAgICAgLmxpbmtEaXN0YW5jZSg1MCk7XG5cbiAgICAgICAgICAgIF8uZm9yRWFjaChjb25uZWN0aW9uQXJyYXksIGZ1bmN0aW9uIChjb25uZWN0aW9ucywgdHlwZSkge1xuICAgICAgICAgICAgICAgIGxpbmtzW3R5cGVdID0gc3ZnLnNlbGVjdEFsbCgnLmxpbmsgLicgKyB0eXBlICsgJy1saW5rJylcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEoY29ubmVjdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgnbGluZScpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzRGVmKGQuc291cmNlKSB8fCAhaXNEZWYoZC50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkLnR5cGUgPSB0eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdsaW5rICcgKyB0eXBlICsgJy1saW5rICcgKyBkLnNvdXJjZS50eXBlICsgJy1saW5rICcgKyBkLnRhcmdldC50eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAnLWxpbmsnO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgbm9kZSA9IHN2Zy5zZWxlY3RBbGwoJy5ub2RlJylcbiAgICAgICAgICAgICAgICAuZGF0YShlbnRpdHlBcnJheSlcbiAgICAgICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnbm9kZSAnICsgZC50eXBlICsgJy1ub2RlJztcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYWxsKGZvcmNlLmRyYWcpO1xuXG4gICAgICAgICAgICBub2RlLmFwcGVuZCgnY2lyY2xlJylcbiAgICAgICAgICAgICAgICAuYXR0cigncicsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmVtcGxveWVlcyA/IHNjYWxlWydlbXBsb3llZXMnXShkLmVtcGxveWVlcykgOiBkZWZhdWx0Tm9kZVNpemU7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG5vZGUuYXBwZW5kKCd0ZXh0JylcbiAgICAgICAgICAgICAgICAudGV4dChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5uaWNrbmFtZSA/IGQubmlja25hbWUgOiBkLm5hbWU7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYXR0cignZHgnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoLTAuMDY1ICogdGhpcy5nZXRDb21wdXRlZFRleHRMZW5ndGgoKSAvIDIpICsgJ2VtJztcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5hdHRyKCdkeScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgwLjA4ICogdGhpcy5wYXJlbnROb2RlLmdldEJCb3goKS5oZWlnaHQgLyAyICsgMC41KSArICdlbSc7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZvcmNlLm9uKCd0aWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBDbHVzdGVyIGluIGZvdXIgY29ybmVycyBiYXNlZCBvbiBvZmZzZXQuXG4gICAgICAgICAgICAgICAgdmFyIGsgPSBvZmZzZXRTY2FsZSAqIGUuYWxwaGE7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZS5hbHBoYSlcbiAgICAgICAgICAgICAgICBfLmZvckVhY2goZW50aXR5QXJyYXksIGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVudGl0eS54ICYmIG9mZnNldHNbZW50aXR5LnR5cGVdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHkueCArPSBvZmZzZXRzW2VudGl0eS50eXBlXS54ICogaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eS55ICs9IG9mZnNldHNbZW50aXR5LnR5cGVdLnkgKiBrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5LnggPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KHVwcGVyQm91bmRSYWRpdXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5taW4od2lkdGggLSB1cHBlckJvdW5kUmFkaXVzLCBlbnRpdHkueCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5LnkgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KHVwcGVyQm91bmRSYWRpdXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5taW4oaGVpZ2h0IC0gdXBwZXJCb3VuZFJhZGl1cywgZW50aXR5LnkpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGxpbmtzLCBmdW5jdGlvbiAobGluaykge1xuICAgICAgICAgICAgICAgICAgICBsaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDEnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnNvdXJjZS54O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5MScsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuc291cmNlLnk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gyJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC50YXJnZXQueDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneTInLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnRhcmdldC55O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgbm9kZS5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgZC54ICsgJywnICsgZC55ICsgJyknO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgc3BlZWRBbmltYXRlID0gZnVuY3Rpb24gKHRpY2tzKSB7XG4gICAgICAgICAgICAgICAgLy8gU3BlZWQgdXAgdGhlIGluaXRpYWwgYW5pbWF0aW9uLlxuICAgICAgICAgICAgICAgIC8vIFNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNjE4OTExMFxuICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGlja3M7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yY2UudGljaygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb3JjZS5hbHBoYSgpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlbmRlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoISRzY29wZS5tb2JpbGUpIHtcbiAgICAgICAgICAgICAgICBzcGVlZEFuaW1hdGUoNyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3JjZS5zdGFydCgpO1xuXG4gICAgICAgICAgICAvLyBIYXNoIGxpbmtlZCBuZWlnaGJvcnMgZm9yIGVhc3kgaG92ZXJpbmcgZWZmZWN0cy5cbiAgICAgICAgICAgIC8vIFNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS84NzgwMjc3XG4gICAgICAgICAgICB2YXIgbGlua2VkQnlJbmRleCA9IHt9O1xuICAgICAgICAgICAgXy5mb3JFYWNoKGxpbmtzLCBmdW5jdGlvbiAobCkge1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChsWzBdLCBmdW5jdGlvbiAoY29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBjb25uZWN0aW9uLl9fZGF0YV9fLnNvdXJjZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gY29ubmVjdGlvbi5fX2RhdGFfXy50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtlZEJ5SW5kZXhbc291cmNlLmluZGV4ICsgJywnICsgdGFyZ2V0LmluZGV4XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtlZEJ5SW5kZXhbdGFyZ2V0LmluZGV4ICsgJywnICsgc291cmNlLmluZGV4XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIG5laWdoYm9yaW5nID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGlua2VkQnlJbmRleFthLmluZGV4ICsgJywnICsgYi5pbmRleF0gfHwgYS5pbmRleCA9PT0gYi5pbmRleDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBmb2N1c25laWdoYm9ycyA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAvLyBBcHBseSAndW5mb2N1c2VkJyBjbGFzcyB0byBhbGwgbm9uLW5laWdoYm9ycy5cbiAgICAgICAgICAgICAgICAvLyBBcHBseSAnZm9jdXNlZCcgY2xhc3MgdG8gYWxsIG5laWdoYm9ycy5cbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBTZWUgaWYgaXQgY2FuIGJlIGRvbmUgd2l0aCBqdXN0IG9uZSBjbGFzcyBhbmQgOm5vdCguZm9jdXNlZCkgQ1NTIHNlbGVjdG9ycy5cbiAgICAgICAgICAgICAgICBub2RlXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZWlnaGJvcmluZyhlbnRpdHksIG4pO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhbmVpZ2hib3JpbmcoZW50aXR5LCBuKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBfLmZvckVhY2gobGlua3MsIGZ1bmN0aW9uIChsaW5rKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW50aXR5LmluZGV4ID09PSBvLnNvdXJjZS5pbmRleCB8fCBlbnRpdHkuaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9PT0gby50YXJnZXQuaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEoZW50aXR5LmluZGV4ID09PSBvLnNvdXJjZS5pbmRleCB8fCBlbnRpdHkuaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID09PSBvLnRhcmdldC5pbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBmb2N1cyA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmN1cnJlbnRFbnRpdHkgIT09IGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2V0RW50aXR5KGVudGl0eSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgICAgICBmb2N1c25laWdoYm9ycyhlbnRpdHkpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIHVuZm9jdXMgICAgICAgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgLy92YXIgdHJhbnNpdGlvbmRlbGF5ID0gNzU7XG4gICAgICAgICAgICAgICAgbm9kZVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChsaW5rcywgZnVuY3Rpb24gKGxpbmspIHtcbiAgICAgICAgICAgICAgICAgICAgbGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZW50aXR5LmZpeGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgLy8gUmVzdGFydCBkMyBhbmltYXRpb25zLlxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yY2UucmVzdW1lKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vVE9ETzogU2hvdyBnZW5lcmljIGRldGFpbHMgYW5kIG5vdCBpbmRpdmlkdWFsIGVudGl0eSBkZXRhaWxzP1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBob3ZlclRpbWVyO1xuICAgICAgICAgICAgdmFyIGhvdmVyICAgICAgICAgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgJiYgISRzY29wZS5lZGl0aW5nICYmICEkc2NvcGUuY3VycmVudExvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvdmVyVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgdW5ob3ZlciAgICAgICA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSAmJiAhJHNjb3BlLmN1cnJlbnRMb2NhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB1bmZvY3VzKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChob3ZlclRpbWVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBmb2N1c0xvY2F0aW9uID0gZnVuY3Rpb24gKGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgLy8gIElmIHRoZSBjdXJyZW50IGVudGl0eSBpcyBzaG93biBhbmQgaXQgZG9lc24ndCBtYXRjaCB0aGUgY2xpY2tlZCBub2RlLCB0aGVuIHNldFxuICAgICAgICAgICAgICAgIC8vIHRoZSBuZXcgbm9kZSB0byBjbGlja2VkLlxuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcblxuICAgICAgICAgICAgICAgIG5vZGUuY2xhc3NlZCgnZm9jdXNlZCcsIGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5uYW1lIGluIGxvY2F0aW9uLmRpY3Q7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEobi5uYW1lIGluIGxvY2F0aW9uLmRpY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChsaW5rcywgZnVuY3Rpb24gKGxpbmspIHtcbiAgICAgICAgICAgICAgICAgICAgbGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmdW5jdGlvbiAobykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoby5zb3VyY2UubmFtZSBpbiBsb2NhdGlvbi5kaWN0ICYmIG8udGFyZ2V0Lm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbiBsb2NhdGlvbi5kaWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShvLnNvdXJjZS5uYW1lIGluIGxvY2F0aW9uLmRpY3QpIHx8ICEoby50YXJnZXQubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbiBsb2NhdGlvbi5kaWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIHVuZm9jdXNMb2NhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBub2RlXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGxpbmtzLCBmdW5jdGlvbiAobGluaykge1xuICAgICAgICAgICAgICAgICAgICBsaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcmNlLnJlc3VtZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBoaWdobGlnaHRMb2NhdGlvbiA9IGZ1bmN0aW9uIChsb2NhdGlvbikge1xuICAgICAgICAgICAgICAgICRzY29wZS5zaG93TGljZW5zZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgdW5mb2N1cygkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiAhPT0gbG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdW5mb2N1c0xvY2F0aW9uKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uID0gbG9jYXRpb247XG4gICAgICAgICAgICAgICAgICAgIGZvY3VzTG9jYXRpb24obG9jYXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZDMuZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZDMuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgY2xpY2sgICAgICAgICAgICAgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3dMaWNlbnNlID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNEZWYoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRGVmKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bmZvY3VzTG9jYXRpb24oJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5lbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gIElmIHRoZSBwcmV2aW91cyBub2RlIGlzIGVxdWFsIHRvIHRoZSBuZXcgbm9kZSwgZG8gbm90aGluZy5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9PT0gZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gIFVuZm9jdXMgb24gcHJldmlvdXMgbm9kZSBhbmQgZm9jdXMgb24gbmV3IG5vZGUuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5mb2N1cygkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ID0gZW50aXR5O1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXMoZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFN0b3AgZXZlbnQgc28gd2UgZG9uJ3QgZGV0ZWN0IGEgY2xpY2sgb24gdGhlIGJhY2tncm91bmQuXG4gICAgICAgICAgICAgICAgLy8gU2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xLzIyOTQxNzk2XG4gICAgICAgICAgICAgICAgaWYgKGQzLmV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbnRlcmFjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgYmFja2dyb3VuZGNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChpc0RlZigkc2NvcGUuY2xpY2tlZExvY2F0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNEZWYoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuZm9jdXMoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNEZWYoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5mb2N1cygkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICAgICAgLy9UT0RPOiBTaG93IGdlbmVyaWMgZGV0YWlscyBhbmQgbm90IGluZGl2aWR1YWwgZW50aXR5IGRldGFpbHMuXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGRibGNsaWNrICAgICAgICA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVudGl0eS5maXhlZCkge1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHkueCAgICAgICAgICAgICAgICAgICAgPSB3aWR0aCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS55ICAgICAgICAgICAgICAgICAgICA9IGhlaWdodCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5weCAgICAgICAgICAgICAgICAgICA9IHdpZHRoIC8gMjtcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LnB5ICAgICAgICAgICAgICAgICAgID0gaGVpZ2h0IC8gMjtcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LmZpeGVkICAgICAgICAgICAgICAgID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ID0gZW50aXR5O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHVuZm9jdXMoZW50aXR5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbm9kZS5vbignbW91c2VvdmVyJywgaG92ZXIpO1xuICAgICAgICAgICAgbm9kZS5vbignbW91c2VvdXQnLCB1bmhvdmVyKTtcbiAgICAgICAgICAgIG5vZGUub24oJ2NsaWNrJywgY2xpY2spO1xuICAgICAgICAgICAgbm9kZS5vbignZGJsY2xpY2snLCBkYmxjbGljayk7XG4gICAgICAgICAgICBzdmcub24oJ2NsaWNrJywgYmFja2dyb3VuZGNsaWNrKTtcblxuICAgICAgICAgICAgbm9kZVxuICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd3ZWxsY29ubmVjdGVkJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuaGFzT3duUHJvcGVydHkoJ3dlbGxjb25uZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJHNjb3BlLiRvbignY2hhbmdlU2l6ZUJ5JywgZnVuY3Rpb24gKGV2ZW50LCBzaXplQnkpIHtcbiAgICAgICAgICAgICAgICBzdmcuc2VsZWN0QWxsKCdjaXJjbGUnKVxuICAgICAgICAgICAgICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbigyNTApXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdyJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkW3NpemVCeV0gPyBzY2FsZVtzaXplQnldKGRbc2l6ZUJ5XSkgOiBkZWZhdWx0Tm9kZVNpemU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkc2NvcGUuJG9uKCd0b2dnbGVMaW5rJywgZnVuY3Rpb24gKGV2ZW50LCBsaW5rKSB7XG4gICAgICAgICAgICAgICAgLy8gbGlua3NbbGluay5uYW1lXVxuICAgICAgICAgICAgICAgIC8vIC5jbGFzc2VkKHsndmlzaWJsZSc6IGxpbmsuZW5hYmxlZCwgJ2hpZGRlbic6ICFsaW5rLmVuYWJsZWR9KTtcbiAgICAgICAgICAgICAgICBfLm1hcCgkc2NvcGUuZW50aXR5VHlwZXMsIGZ1bmN0aW9uICh2YWwsIGtleSkge1xuICAgICAgICAgICAgICAgICAgICBzdmdcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJy4nICsga2V5ICsgJy1saW5rJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndmlzaWJsZSc6IGZ1bmN0aW9uIChsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbm5lY3Rpb25UeXBlIGVuYWJsZWQsIGNvbm5lY3Rpb24gc291cmNlIGVudGl0eSB0eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGVuYWJsZWQsIGNvbm5lY3Rpb24gdGFyZ2V0IGVudGl0eSB0eXBlIGlzIGVuYWJsZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhJHNjb3BlLmNvbm5lY3Rpb25UeXBlc1tsLnR5cGVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCAoJHNjb3BlLmVudGl0eVR5cGVzW2wuc291cmNlLnR5cGVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgJHNjb3BlLmVudGl0eVR5cGVzW2wudGFyZ2V0LnR5cGVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoaWRkZW4nIDogZnVuY3Rpb24gKGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgYW55IG9mIENvbm5lY3Rpb25UeXBlLCBzb3VyY2UgZW50aXR5IHR5cGUsIG9yIHRhcmdldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbnRpdHkgdHlwZSBhcmUgZGlzYWJsZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhJHNjb3BlLmNvbm5lY3Rpb25UeXBlc1tsLnR5cGVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCAoISRzY29wZS5lbnRpdHlUeXBlc1tsLnNvdXJjZS50eXBlXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgISRzY29wZS5lbnRpdHlUeXBlc1tsLnRhcmdldC50eXBlXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJHNjb3BlLiRvbigndG9nZ2xlTm9kZScsIGZ1bmN0aW9uIChldmVudCwgdHlwZSkge1xuICAgICAgICAgICAgICAgIHN2Z1xuICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCcuJyArIHR5cGUubmFtZSArICctbm9kZScpXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKHsndmlzaWJsZSc6IHR5cGUuZW5hYmxlZCwgJ2hpZGRlbic6ICF0eXBlLmVuYWJsZWR9KTtcblxuICAgICAgICAgICAgICAgIHN2Z1xuICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCcuJyArIHR5cGUubmFtZSArICctbGluaycpXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd2aXNpYmxlJzogZnVuY3Rpb24gKGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb25uZWN0aW9uVHlwZSBlbmFibGVkLCBjb25uZWN0aW9uIHNvdXJjZSBlbnRpdHkgdHlwZSBpc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVuYWJsZWQsIGNvbm5lY3Rpb24gdGFyZ2V0IGVudGl0eSB0eXBlIGlzIGVuYWJsZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS5jb25uZWN0aW9uVHlwZXNbbC50eXBlXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiAoJHNjb3BlLmVudGl0eVR5cGVzW2wuc291cmNlLnR5cGVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmICRzY29wZS5lbnRpdHlUeXBlc1tsLnRhcmdldC50eXBlXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hpZGRlbicgOiBmdW5jdGlvbiAobCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGFueSBvZiBDb25uZWN0aW9uVHlwZSwgc291cmNlIGVudGl0eSB0eXBlLCBvciB0YXJnZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbnRpdHkgdHlwZSBhcmUgZGlzYWJsZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEkc2NvcGUuY29ubmVjdGlvblR5cGVzW2wudHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgKCEkc2NvcGUuZW50aXR5VHlwZXNbbC5zb3VyY2UudHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgISRzY29wZS5lbnRpdHlUeXBlc1tsLnRhcmdldC50eXBlXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJHNjb3BlLiRvbignc2VsZWN0SXRlbScsIGZ1bmN0aW9uIChldmVudCwgaXRlbSkge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdsb2NhdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0TG9jYXRpb24oJHNjb3BlLmN1cnJlbnRMb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjbGljaygkc2NvcGUuY3VycmVudEVudGl0eSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ25ldHdvcmtDdHJsJywgZGVwZW5kZW5jaWVzKTtcblxufSkoYW5ndWxhciwgUlRQKTtcbiJdfQ==
