!function(i){"use strict";var a=["ui.bootstrap","leaflet-directive","ngAnimate","templateCache","civic-graph.api","civic-graph.util"],c=["civic-graph.util"];i.module("civic-graph.util",[]),i.module("civic-graph.api",c),i.module("civic-graph",a)}(angular);
!function(t){"use strict";function a(){return{templateUrl:"js/analytic/analytics.html",restrict:"E",scope:{},controller:"analyticsCtrl"}}var c=[a];t.module("civic-graph").directive("analytics",c)}(angular);
!function(e){"use strict";function t(e,t){function i(e){var i=t.getPropertyFromObj(e);this.id=i("id"),this.name=i("name"),this.enabled=i("enable",!0)}function n(e){return new i(e)}function r(){return e.get("/categories")}return{getCategoryModel:n,getAll:r}}t.$inject=["cgApiCaller","cgUtilService"],e.module("civic-graph.api").factory("categoryService",t)}(angular);
!function(t){"use strict";function n(){return{Funding:!0,Data:!0,Employment:!0,Collaboration:!0}}function i(t,i){function o(t){var n=i.getPropertyFromObj(t);this.id=n("id"),this.name=n("name"),this.details=n("details"),this.entity=n("entity"),this.entity_id=n("entity_id")}function c(t){return new o(t)}function r(){return t.get(e)}return{getAll:r,getConnectionTypes:n,getConnectionModel:c}}var e="/connections";i.$inject=["cgApiCaller","cgUtilService"],t.module("civic-graph.api").factory("connectionService",i)}(angular);
!function(i){"use strict";function n(i){function n(n){var t=i.getPropertyFromObj(n);this.id=t("id"),this.year=t("year"),this.amount=t("amount",0)}function t(i){return new n(i)}return{getFinanceModel:t}}n.$inject=["cgUtilService"],i.module("civic-graph.api").factory("financeService",n)}(angular);
!function(n){"use strict";function t(n){function t(t){var i=n.getPropertyFromObj(t);this.id=i("id"),this.year=i("year"),this.amount=i("amount"),this.entity=i("entity","")}function i(n){return new t(n)}return{getFundingConnectionModel:i}}t.$inject=["cgUtilService"],n.module("civic-graph.api").factory("fundingConnectionService",t)}(angular);
!function(i,t){"use strict";function s(i){function s(){var i=t(this);i.css("height","55vh")}function c(){var i=t(this);window.innerHeight/3>parseInt(i.css("height"))?i.css("height","55vh"):i.css("height","30vh")}var e;i.mobile&&(e=t("#details-panel"),e.css("height","30vh"),e.scrollTop(0),e.scroll(s),e.click(c))}function c(){return{restrict:"A",link:s}}i.module("civic-graph").directive("addMobileEvents",[c])}(angular,$);
!function(o){"use strict";function c(o,c){o.closeWindow=function(){c.close()}}o.module("civic-graph").controller("modalCtrl",["$scope","$modalInstance",c])}(angular);
!function(e){"use strict";function t(t,i,n,o,s,d,c,a){function r(){var e,i,n,o;for(i in t.categories)if(t.categories.hasOwnProperty(i)){e=t.categories[i];for(n in t.editEntity.categories)t.editEntity.categories.hasOwnProperty(n)&&(o=t.editEntity.categories[n],e.id===o.id&&(e.enabled=o.enabled))}}t.isEditing=!1,t.editEntity=s.getEntityModel(t.entity),t.entityTypes=s.getEntityTypes(),t.influenceTypes=s.getInfluenceTypes();var u;t.categories=[],t.addressSearch=function(e){return i.jsonp("https://dev.virtualearth.net/REST/v1/Locations",{params:{query:e,key:"Ai58581yC-Sr7mcFbYTtUkS3ixE7f6ZuJnbFJCVI4hAtW1XoDEeZyidQz2gLCCyD",jsonp:"JSON_CALLBACK",include:"ciso2"}}).then(function(e){if(a.isDefined(e.data.resourceSets)&&e.data.resourceSets.length>0)return e.data.resourceSets[0].resources})},t.toggleCategory=function(e){if(0===t.editEntity.categories.length)t.editEntity.categories.push(e);else{var i=!1;for(var n in t.editEntity.categories)if(t.editEntity.categories.hasOwnProperty(n)){var o=t.editEntity.categories[n];if(o.id===e.id){i=!0,o.enabled=e.enabled;break}}i||t.editEntity.categories.push(e)}},t.setLocation=function(e,i){t.addressSearch(e.formattedAddress).then(function(n){if(a.isDefined(n[0])){var o=n[0],s=o.address,d=o.point;t.addLocation(i),e.address_line=a.isDefined(s.addressLine)?s.addressLine:"",e.locality=a.isDefined(s.locality)?s.locality:"",e.district=a.isDefined(s.adminDistrict)?s.adminDistrict:"",e.country=a.isDefined(s.countryRegion)?s.countryRegion:null,e.country_code=a.isDefined(s.countryRegionIso2)?s.countryRegionIso2:"",e.coordinates=a.isDefined(d.coordinates)?d.coordinates:null,e.postal_code=a.isDefined(s.postalCode)?s.postalCode:null}})},t.addLocation=function(e){e&&t.editEntity.locations.push(c.getLocationModel())},t.addKeyPerson=function(){o.some(t.editEntity.key_people,{name:"",id:null})||t.editEntity.key_people.push({name:"",id:null})},t.setFundingConnection=function(e,t){t.entity_id=e.id},t.addFundingConnection=function(e){o.some(e,{entity:""})||e.push({entity:"",amount:null,year:null,id:null})},t.setConnection=function(e,t){t.entity_id=e.id},t.addConnection=function(e){o.some(e,{entity:"",id:null})||e.push({entity:"",id:null,details:null})},t.addFinance=function(e){o.every(e,function(e){return e.amount>0&&e.year>1750})&&e.push({amount:null,year:null,id:null})},t.save=function(){function e(e){t.isSaving=!1,t.$emit("editEntitySuccess",e),t.cancelEdit()}function i(){t.isError=!0,n(function(){t.isError=!1},2e3)}t.isSaving=!0,s.saveEntity(t.editEntity.generateDBModel()).then(e,i)},t.cancelEdit=function(){t.isOpen=!1},t.$watch("entity",function(i,n){e.equals(i,n)||(t.editEntity=s.getEntityModel(i),t.categories=e.copy(u),r(),t.isEditing=a.isDefined(t.editEntity.id))}),d.getAll().then(function(i){u=i.categories,t.categories=e.copy(u)})}t.$inject=["$scope","$http","$timeout","_","entityService","categoryService","locationService","cgUtilService"],e.module("civic-graph").controller("editCtrl",t)}(angular);
!function(t){"use strict";function e(){return{templateUrl:"js/edit-entity/edit.html",restrict:"E",scope:{entity:"=",entities:"=",isOpen:"="},controller:"editCtrl"}}var i=[e];t.module("civic-graph").directive("editEntity",i)}(angular);
!function(o){"use strict";o.module("civic-graph").constant("_",window._).config(["$locationProvider","$compileProvider",function(o,n){o.html5Mode(!0),n.debugInfoEnabled(!0)}]).filter("thousandSuffix",function(){return function(o,n){var t,i=["k","M","G","T","P","E"];return window.isNaN(o)?null:o<1e3?o:(t=Math.floor(Math.log(o)/Math.log(1e3)),(o/Math.pow(1e3,t)).toFixed(n)+i[t-1])}})}(angular);
!function(t){"use strict";function i(t,i,e,n,o){t.entities=[],t.searchItems=null,t.categories=[],t.currentLocation=null,t.clickedLocation={},t.clickedLocation.location=null,t.clickedEntity={},t.clickedEntity.entity=null,t.editing=!1,t.actions={interacted:!1},t.showsearchMB=!1,t.showAnalytics=!1,t.entityTypes=n.getEntityTypes(),t.connectionTypes=o.getConnectionTypes(),t.status={isNetworkShown:!0,license:!0,networkLoading:!0},t.toggleAnalytics=function(){t.showAnalytics=!t.showAnalytics},this.minConnections=t.minConnections=2;var a=this;t.$watch("minConnections",function(){t.$broadcast("triggerNetworkDraw")}),t.connectionChange=function(){console.log(a.minConnections),t.minConnections=a.minConnections,t.$broadcast("triggerNetworkDraw")},t.hydePartials=function(i){"search"===i?(t.editing=!1,t.settingsEnabled=!1):"settings"===i?(t.editing=!1,t.showsearchMB=!1):"edit"===i?(t.settingsEnabled=!1,t.showsearchMB=!1):(t.editing=!1,t.settingsEnabled=!1,t.showsearchMB=!1)},t.showSearch=function(){t.hydePartials("search"),t.showsearchMB=!t.showsearchMB,t.status.license=!1},t.toggleSettings=function(){t.hydePartials("settings"),t.settingsEnabled=!t.settingsEnabled},t.startEdit=function(i){t.currentEntity=i,t.mobile&&t.hydePartials("edit"),t.editing=!0},t.switchView=function(){t.status.isNetworkShown=!t.status.isNetworkShown,t.status.isNetworkShown&&t.$broadcast("triggerNetworkDraw")},window.mobilecheck=function(){var t=!1,i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,e=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i;return function(n){(i.test(n)||e.test(n.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},t.mobile=window.mobilecheck(),t.settingsEnabled=!t.mobile,i(function(){n.getAll().then(function(i){t.entities=i.nodes;var n=e.uniq(e.pluck(e.flatten(e.pluck(t.entities,"locations")),"locality")),o=e.map(n,function(i){var n=e.filter(t.entities,e.flow(e.property("locations"),e.partialRight(e.any,{locality:i})));return{name:i,type:"location",entities:n,dict:e.zipObject(e.pluck(n,"name"),e.pluck(n,"index"))}});t.searchItems=o.concat(t.entities),t.overviewUrl="js/overview/overview.html",t.$broadcast("triggerNetworkDraw")})},100),t.overviewUrl=null,t.setEntity=function(i){t.currentLocation=null,t.currentEntity=i,t.editing&&t.stopEdit(),t.$broadcast("entityChange")},t.setEntityID=function(i){t.setEntity(e.find(t.entities,{id:i}))},t.setLocation=function(i){t.currentLocation=i,t.editing&&t.stopEdit(),t.$broadcast("itemChange")},t.selectItem=function(i){"location"===i.type?t.setLocation(i):t[i%1===0?"setEntityID":"setEntity"](i),t.$broadcast("selectItem",i)},t.$on("setCurrentEntity",function(i,e){t.currentEntity=e.value}),t.$on("setCurrentLocation",function(i,e){t.currentLocation=e.value}),t.setEntities=function(i){t.entities=i},t.stopEdit=function(){t.editing=!1},t.$on("editEntitySuccess",function(i){t.setEntities(i.nodes),t.$broadcast("triggerNetworkDraw")}),t.animationsEnabled=!0}var e=["$scope","$timeout","_","entityService","connectionService",i];t.module("civic-graph").controller("homeCtrl",e)}(angular);
!function(i){"use strict";var a=[];i.module("civic-graph").directive("map",a)}(angular);
!function(e){"use strict";function t(e,t){e.categorizedEntities={},t.forEach(t.keys(e.entityTypes),function(i){e.categorizedEntities[i]=t.filter(e.entities,{type:i})})}e.module("civic-graph").controller("overviewCtrl",["$scope","_",t])}(angular);
!function(e){"use strict";function n(e,n,t,i,c){function o(){function o(i){var o=n("filter")(e.entities,function(n){return n.collaborations.length>=e.minConnections}),a={};t.forEach(t.keys(i.connections),function(e){a[e]=[]}),t.forEach(i.connections,function(e,n){t.forEach(e,function(e){var i=t.find(o,{id:e.source}),r=t.find(o,{id:e.target});c.isDefined(i)&&c.isDefined(r)&&a[n].push({source:i,target:r})})}),t.forEach(t.keys(e.entityTypes),function(n){var i=t.takeRight(t.sortBy(t.filter(e.entities,{type:n}),"collaborations.length"),5);t.forEach(i,function(e){e.wellconnected=!0})}),o=t.sortBy(o,function(e){return e.wellconnected?1:0}),r(o,a)}i.getAll().then(o)}e.isLoading=!0,e.connections={},o(),e.safeApply=function(e){var n=this.$root.$$phase;"$apply"===n||"$digest"===n?e&&"function"==typeof e&&e():this.$apply(e)},e.$on("triggerNetworkDraw",o),e.$on("viewChange",function(e){console.log(e)});var r=function(n,i){e.isLoading=!1;var o=d3.select("#network");o.selectAll("*").remove();var r=o.node().getBoundingClientRect(),a=r.height,s=r.width,l=6,u=7,d={Individual:{x:1,y:1},"For-Profit":{x:1,y:-1},"Non-Profit":{x:-1,y:1},Government:{x:-1,y:-1}},f=10,y=50,p=d3.max(n,function(e){return parseInt(e.employees)}),k=d3.max(n,function(e){return parseInt(e.followers)}),g={employees:d3.scale.sqrt().domain([10,p]).range([f,y]),followers:d3.scale.sqrt().domain([10,k]).range([f,y])},m={},h=d3.layout.force().size([s,a]).nodes(n).links(t.flatten(t.values(i))).charge(function(e){return e.employees?-2*g.employees(e.employees):-20}).linkStrength(0).linkDistance(50);t.forEach(i,function(e,n){m[n]=o.selectAll(".link ."+n+"-link").data(e).enter().append("line").attr("class",function(e){return c.isDefined(e.source)&&c.isDefined(e.target)?(e.type=n,"link "+n+"-link "+e.source.type+"-link "+e.target.type+"-link"):""})});var x=o.selectAll(".node").data(n).enter().append("g").attr("class",function(e){return"node "+e.type+"-node"}).call(h.drag);x.append("circle").attr("r",function(e){return e.employees?g.employees(e.employees):u}),x.append("text").text(function(e){return e.nickname?e.nickname:e.name}).attr("dx",function(){return-.065*this.getComputedTextLength()/2+"em"}).attr("dy",function(){return.08*this.parentNode.getBBox().height/2+.5+"em"}),h.on("tick",function(e){var i=l*e.alpha;t.forEach(n,function(e){e.x&&d[e.type]&&(e.x+=d[e.type].x*i,e.y+=d[e.type].y*i,e.x=Math.max(y,Math.min(s-y,e.x)),e.y=Math.max(y,Math.min(a-y,e.y)))}),t.forEach(m,function(e){e.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y})}),x.attr("transform",function(e){return"translate("+e.x+","+e.y+")"})});var E=function(e){requestAnimationFrame(function n(){for(var t=0;t<e;t++)h.tick();h.alpha()>0&&requestAnimationFrame(n)})};e.mobile||E(7),h.start();var v={};t.forEach(m,function(e){t.forEach(e[0],function(e){var n=e.__data__.source,t=e.__data__.target;v[n.index+","+t.index]=!0,v[t.index+","+n.index]=!0})});var L,A=function(e,n){return v[e.index+","+n.index]||e.index===n.index},T=function(e){x.classed("focused",function(n){return A(e,n)}).classed("unfocused",function(n){return!A(e,n)}),t.forEach(m,function(n){n.classed("focused",function(n){return e.index===n.source.index||e.index===n.target.index}).classed("unfocused",function(n){return!(e.index===n.source.index||e.index===n.target.index)})})},w=function(n){e.currentEntity!==n&&e.setEntity(n),e.safeApply(),T(n)},$=function(n){x.classed("focused",!1).classed("unfocused",!1),t.forEach(m,function(e){e.classed("focused",!1).classed("unfocused",!1)}),n.fixed=!1,e.clickedEntity.entity&&h.resume()},D=function(n){e.clickedEntity.entity||e.editing||e.currentLocation||(L=setTimeout(function(){w(n)},500)),e.actions.interacted=!0,e.safeApply()},b=function(n){e.clickedEntity.entity||e.currentLocation||($(n),clearTimeout(L)),e.actions.interacted=!0,e.safeApply()},_=function(n){e.safeApply(),x.classed("focused",function(e){return e.name in n.dict}).classed("unfocused",function(e){return!(e.name in n.dict)}),t.forEach(m,function(e){e.classed("focused",function(e){return e.source.name in n.dict&&e.target.name in n.dict}).classed("unfocused",function(e){return!(e.source.name in n.dict&&e.target.name in n.dict)})})},B=function(){x.classed("focused",!1).classed("unfocused",!1),t.forEach(m,function(e){e.classed("focused",!1).classed("unfocused",!1)}),e.clickedLocation.location&&h.resume()},P=function(n){e.showLicense=!1,e.clickedEntity.entity&&($(e.clickedEntity.entity),e.clickedEntity.entity=null),e.clickedLocation.location!==n?(B(e.clickedLocation.location),_(n)):e.clickedLocation.location===n&&(e.clickedLocation.location=n,_(n)),d3.event&&d3.event.stopPropagation(),e.actions.interacted=!0,e.safeApply()},C=function(n){e.showLicense=!1,c.isDefined(e.clickedLocation)&&(c.isDefined(e.clickedLocation.location)&&(B(e.clickedLocation.entity),e.clickedLocation.location=null),e.clickedEntity.entity===n?(e.clickedEntity.entity=null,w(n)):(e.clickedEntity.entity&&$(e.clickedEntity.entity),e.clickedEntity.entity=n,w(n))),d3.event&&d3.event.stopPropagation(),e.actions.interacted=!0,e.safeApply()},q=function(){c.isDefined(e.clickedLocation)&&(c.isDefined(e.clickedLocation.location)&&($(e.clickedLocation.location),e.clickedLocation.location=null),c.isDefined(e.clickedEntity.entity)&&($(e.clickedEntity.entity),e.clickedEntity.entity=null)),e.safeApply()},I=function(n){n.fixed?$(n):(n.x=s/2,n.y=a/2,n.px=s/2,n.py=a/2,n.fixed=!0,e.clickedEntity.entity=n),e.actions.interacted=!0,e.safeApply()};x.on("mouseover",D),x.on("mouseout",b),x.on("click",C),x.on("dblclick",I),o.on("click",q),x.classed("wellconnected",function(e){return e.hasOwnProperty("wellconnected")}),e.$on("changeSizeBy",function(e,n){o.selectAll("circle").transition().duration(250).attr("r",function(e){return e[n]?g[n](e[n]):u})}),e.$on("toggleLink",function(n,i){t.map(e.entityTypes,function(n,t){o.selectAll("."+t+"-link").classed({visible:function(n){return!e.connectionTypes[n.type]||e.entityTypes[n.source.type]&&e.entityTypes[n.target.type]},hidden:function(n){return!e.connectionTypes[n.type]||!e.entityTypes[n.source.type]||!e.entityTypes[n.target.type]}})})}),e.$on("toggleNode",function(n,t){o.selectAll("."+t.name+"-node").classed({visible:t.enabled,hidden:!t.enabled}),o.selectAll("."+t.name+"-link").classed({visible:function(n){return e.connectionTypes[n.type]&&e.entityTypes[n.source.type]&&e.entityTypes[n.target.type]},hidden:function(n){return!e.connectionTypes[n.type]||!e.entityTypes[n.source.type]||!e.entityTypes[n.target.type]}})}),e.$on("selectItem",function(n,t){"location"===t.type?P(e.currentLocation):C(e.currentEntity)})}}n.$inject=["$scope","$filter","_","connectionService","cgUtilService"],e.module("civic-graph").controller("networkCtrl",n)}(angular,RTP);
!function(r){"use strict";function t(){return{restrict:"E",templateUrl:"js/network/network.html",controller:"networkCtrl"}}var e=[t];r.module("civic-graph").directive("network",e)}(angular);
!function(e){"use strict";e.module("civic-graph").directive("input",function(){return{restict:"E",require:"?ngModel",link:function(e,r,t,i){"type"in t&&"range"===t.type.toLowerCase()&&i.$parsers.push(parseFloat)}}})}(angular);
!function(r){"use strict";function n(r){return!("undefined"==typeof r||null===r)}function t(r){return n(r)&&!Array.isArray(r)&&"object"==typeof r}function e(r){var t=n(r)?r:{};return function(r,e){var i=n(e)?e:null;return n(t[r])?t[r]:i}}function i(r,n){var e=Array.isArray(r)?r.filter(t).map(n):[];return e.concat([n()])}function u(){return{isDefined:n,isObject:t,getPropertyFromObj:e,loopAndInit:i}}r.module("civic-graph.util").factory("cgUtilService",u)}(angular);
!function(o){"use strict";function r(){return{templateUrl:"js/control/controls.html",restrict:"E",scope:{toggleNetwork:"="},controller:"controlCtrl",controllerAs:"control",bindToController:{minConnections:"="}}}var t=[r];o.module("civic-graph").directive("control",t)}(angular);
!function(c){"use strict";function n(c){}c.module("civic-graph").controller("analyticsCtrl",["$scope",n])}(angular);
!function(e){"use strict";function n(e,n){e.itemsShownDefault={key_people:3,grants_given:3,grants_received:3,investments_made:3,investments_received:3,collaborations:3,employments:3,relations:3,data_given:3,data_received:3,revenues:3,expenses:3},e.itemsShown=n.clone(e.itemsShownDefault),e.$on("entityChange",function(){e.itemsShown=n.clone(e.itemsShownDefault)}),e.showMore=function(n){e.itemsShown[n]=e.currentEntity[n].length},e.showLess=function(n){e.itemsShown[n]=e.itemsShownDefault[n]}}e.module("civic-graph").controller("detailsCtrl",["$scope","_",n])}(angular);
!function(e){"use strict";function i(e){function i(i){function t(){var t=e.isDefined(i)?i:{},o=e.isDefined(t.address_line)?t.address_line+" ":"",c=e.isDefined(t.locality)?t.locality+", ":"",n=e.isDefined(t.country_code)?t.country_code+" ":"",r=e.isDefined(t.postal_code)?t.postal_code:"";return(o+c+n+r).trim()}var o=this,c=e.getPropertyFromObj(i);o.id=c("id"),o.address_line=c("address_line"),o.locality=c("locality"),o.district=c("district"),o.postal_code=c("postal_code"),o.country=c("country"),o.country_code=c("country_code"),o.coordinates=c("coordinates"),o.formattedAddress=t()}function t(e){return new i(e)}return{getLocationModel:t}}i.$inject=["cgUtilService"],e.module("civic-graph.api").factory("locationService",i)}(angular);
!function(e){"use strict";function n(){return{Government:!0,"For-Profit":!0,"Non-Profit":!0,Individual:!0}}function o(){return["Local","National","Global"]}function t(e,t,i,p,r,a,c){function l(e){function n(){var e=new l(o);return e.locations.pop(),e.locations.pop(),e.grants_received.pop(),e.grants_received.pop(),e.grants_given.pop(),e.grants_given.pop(),e.investments_received.pop(),e.investments_received.pop(),e.investments_made.pop(),e.investments_made.pop(),e.data_given.pop(),e.data_given.pop(),e.data_received.pop(),e.data_received.pop(),e.collaborations.pop(),e.collaborations.pop(),e.key_people.pop(),e.key_people.pop(),e.employments.pop(),e.employments.pop(),e.revenues.pop(),e.revenues.pop(),e.expenses.pop(),e.expenses.pop(),e.categories.pop(),e.categories.pop(),e.description="",e}var o=this,d=c.isDefined(e)?e:{},s=c.getPropertyFromObj(e);o.id=s("id"),o.name=s("name"),o.influence=s("influence"),o.type=s("type"),o.nickname=s("nickname"),o.url=s("url"),o.twitter_handle=s("twitter_handle"),o.employees=s("employees"),o.locations=c.loopAndInit(d.locations,r.getLocationModel),o.grants_received=c.loopAndInit(d.grants_received,t.getFundingConnectionModel),o.investments_received=c.loopAndInit(d.investments_received,t.getFundingConnectionModel),o.grants_given=c.loopAndInit(d.grants_given,t.getFundingConnectionModel),o.investments_made=c.loopAndInit(d.investments_made,t.getFundingConnectionModel),o.data_given=c.loopAndInit(d.data_given,i.getConnectionModel),o.data_received=c.loopAndInit(d.data_received,i.getConnectionModel),o.collaborations=c.loopAndInit(d.collaborations,i.getConnectionModel),o.key_people=c.loopAndInit(d.key_people,i.getConnectionModel),o.employments=c.loopAndInit(d.employments,i.getConnectionModel),o.revenues=c.loopAndInit(d.revenues,p.getFinanceModel),o.expenses=c.loopAndInit(d.expenses,p.getFinanceModel),o.categories=c.loopAndInit(d.categories,a.getCategoryModel),o.generateDBModel=n}function d(e){return new l(e)}function s(){return e.get("/entities")}function g(n){return e.post("/save",{entity:n})}return{getEntityModel:d,getEntityTypes:n,getInfluenceTypes:o,getAll:s,saveEntity:g}}t.$inject=["cgApiCaller","fundingConnectionService","connectionService","financeService","locationService","categoryService","cgUtilService"],e.module("civic-graph.api").factory("entityService",t)}(angular);
!function(t){"use strict";function e(t){t.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}e.$inject=["$httpProvider"],t.module("civic-graph.api").config(e)}(angular);
!function(t){"use strict";function r(t,r){function a(t){return console.error("Recieved an error from API with this message: %O",t.data),r.reject(t)}function i(t){return t.data}function c(r,c){return t.get(e+r,{params:c,headers:n}).then(i,a)}function o(r,c){return t.post(e+r,c,{headers:n}).then(i,a)}return{get:c,post:o}}var e="https://api.civicgraph.io/api",n={};r.$inject=["$http","$q"],t.module("civic-graph.api").factory("cgApiCaller",r)}(angular);
!function(t,e,n){"use strict";function i(t,i,o,r,a){t.options={center:{lat:20,lng:-40,zoom:3},defaults:{tileLayer:"https://api.tiles.mapbox.com/v4/mapbox.light/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZGF2aWRscm50IiwiYSI6IjA0M2RkNzMzZWJmNzEzNGYzMTdhYTExYzAyZmU4ZTE1In0.TNYlFta2VItrkn4L0Z9BJQ",tileLayerOptions:{detectRetina:!0,reuseTiles:!1},zoomControl:!1,attributionControl:!1}},i(function(){var i=function(t){var n=t.data,i=e.layout.pie().sort(null).value(function(t){return t.value}),o=e.svg.arc().outerRadius(t.r).innerRadius(t.r-10),r=t.r+t.strokeWidth,a=2*r,c=a,l=document.createElementNS(e.ns.prefix.svg,"svg"),s=e.select(l).data(n).attr("class","piechart").attr("width",a).attr("height",c),d=s.selectAll(".arc").data(i(n)).enter().append("g").attr("class","arc").attr("transform","translate("+r+","+r+")");return d.append("path").attr("d",o).attr("class",function(t){return t.data.type+"-arc"}),d.append("svg:text").text(function(e,n){if(0===n)return t.count}).attr("x",-4*t.count.toString().length).attr("dy",5).attr("class","arcText"),window.XMLSerializer?(new window.XMLSerializer).serializeToString(l):l.xml?l.xml:""};o.getMap().then(function(e){function o(t){var e=t.getAllChildMarkers(),o=e.length,a=r.pluck(e,"options"),c=r.map(r.countBy(a,"type"),function(t,e){return{type:e,value:t}}),l=28,s=1,d=2*(l+s),u=i({data:c,r:l,strokeWidth:s,count:o});return new n.DivIcon({html:u,className:"marker-cluster",iconSize:new n.point(d,d)})}function a(t){function e(e){if(r.every(e.coordinates)){"40.78200"===e.coordinates[0].toFixed(5)&&"-73.83170"===e.coordinates[1].toFixed(5)&&(e.coordinates[0]=40.77065,e.coordinates[1]=-73.97406);var i=n.marker(e.coordinates,{icon:s[t.type],title:t.name,entity_id:t.id,message:t.name,type:t.type});d.addLayer(i)}}r.forEach(t.locations,e)}function c(t){console.error(t.message+"  %O",t)}var l=t.entities;e.invalidateSize(),new n.Control.Zoom({position:"topright"}).addTo(e),n.control.locate({position:"topright",showPopup:!1,icon:"fa fa-location-arrow"}).addTo(e);var s={"Non-Profit":n.icon({iconUrl:"img/marker-nonprof.svg",iconSize:[60,60]}),"For-Profit":n.icon({iconUrl:"img/marker-prof.svg",iconSize:[60,60]}),Individual:n.icon({iconUrl:"img/marker-ind.svg",iconSize:[60,60]}),Government:n.icon({iconUrl:"img/marker-gov.svg",iconSize:[60,60]})},d=n.markerClusterGroup({spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,iconCreateFunction:o,maxClusterRadius:30,spiderfyDistanceMultiplier:1.3});console.log("Original: %O",t.entities),console.log("Filtered: %O",l),r.forEach(l,a),e.addLayer(d),e.on("locationerror",c),d.on("click",function(e){t.setEntityID(e.layer.options.entity_id),t.clickedEntity.entity=t.currentEntity,t.actions.interacted=!0,t.settingsEnabled&&t.mobile&&t.toggleSettings(),t.safeApply()}),e.on("click",function(){t.clickedEntity.entity=null,t.actions.interacted=!0,t.safeApply()}),t.$on("selectItem",function(){var n=t.currentEntity.locations.length>0?r.pluck(t.currentEntity.locations,"coordinates"):null;n.length>0&&e.setView(n[0],11),t.actions.interacted=!0,t.safeApply()})})})}var o=["$scope","$timeout","leafletData","_","$filter",i];t.module("civic-graph").controller("mapCtrl",o)}(angular,d3,L);
!function(e){"use strict";function o(e,o,n,t,i){function c(){a.changeView(a.toggleNetwork?"Network":"Map")}var a=this;a.entityTypes=e.getEntityTypes(),a.connectionTypes=o.getConnectionTypes(),a.sizeByList=[{name:"Employees",value:"employees"},{name:"Twitter Followers",value:"followers"}],a.sizeBy="employees",a.showView={Network:!0,Map:!1},a.switchView=c,a.changeView=function(e){t.forEach(t.keys(a.showView),function(o){a.showView[o]=e===o}),n.$broadcast("viewChange",a.showView)},a.showAbout=function(){i.open({animation:!1,templateUrl:"control/about.html",controller:"modalCtrl"})},a.toggleNode=function(e){n.$broadcast("toggleNode",{name:e,enabled:a.entityTypes[e]})},a.toggleLink=function(e){n.$broadcast("toggleLink",{name:e,enabled:a.connectionTypes[e]})},a.changeSizeBy=function(){n.$broadcast("changeSizeBy",a.sizeBy)},a.changeSizeBy()}var n=["entityService","connectionService","$rootScope","_","$modal",o];e.module("civic-graph").controller("controlCtrl",n)}(angular);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNpdmljLWdyYXBoLm1vZHVsZS5qcyIsImFuYWx5dGljL2FuYWx5dGljc0RpcmVjdGl2ZS5qcyIsImFwaS9jYXRlZ29yeS5zZXJ2aWNlLmpzIiwiYXBpL2Nvbm5lY3Rpb24uc2VydmljZS5qcyIsImFwaS9maW5hbmNlLnNlcnZpY2UuanMiLCJhcGkvZnVuZGluZ0Nvbm5lY3Rpb24uc2VydmljZS5qcyIsImV4dHJhL2FkZE1vYmlsZUV2ZW50cy5qcyIsImV4dHJhL21vZGFsQ3RybC5qcyIsImVkaXQtZW50aXR5L2VkaXRDdHJsLmpzIiwiZWRpdC1lbnRpdHkvZWRpdEVudGl0eURpcmVjdGl2ZS5qcyIsIm1haW4vYXBwLmpzIiwibWFpbi9ob21lQ3RybC5qcyIsIm1hcC9tYXBEaXJlY3RpdmUuanMiLCJvdmVydmlldy9vdmVydmlld0N0cmwuanMiLCJuZXR3b3JrL25ldHdvcmtDdHJsLmpzIiwibmV0d29yay9uZXR3b3JrRGlyZWN0aXZlLmpzIiwibmV0d29yay9zbGlkZXJCYXIuanMiLCJ1dGlsL3NlcnZpY2UuanMiLCJjb250cm9sL2NvbnRyb2xEaXJlY3RpdmUuanMiLCJhbmFseXRpYy9jb250cm9sbGVyL2FuYWx5dGljc0N0cmwuanMiLCJkZXRhaWwvY29udHJvbGxlci9kZXRhaWxzQ3RybC5qcyIsImFwaS9lbnRpdHkvbG9jYXRpb24uc2VydmljZS5qcyIsImFwaS9lbnRpdHkvc2VydmljZS5qcyIsImFwaS9hcGlDYWxsZXIvY29uZmlnLmpzIiwiYXBpL2FwaUNhbGxlci9zZXJ2aWNlLmpzIiwibWFwL2NvbnRyb2xsZXIvbWFwQ3RybC5qcyIsImNvbnRyb2wvY29udHJvbGxlci9jb250cm9sQ3RybC5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibWFpbkRlcGVuZGVuY3lMaXN0IiwiYXBpRGVwZW5kZW5jeUxpc3QiLCJtb2R1bGUiLCJhbmFseXRpY3NEaXJlY3RpdmUiLCJ0ZW1wbGF0ZVVybCIsInJlc3RyaWN0Iiwic2NvcGUiLCJjb250cm9sbGVyIiwiYW5hbHl0aWNzRGVwZW5kZW5jaWVzIiwiZGlyZWN0aXZlIiwiU2VydmljZSIsImFwaUNhbGxlciIsInV0aWxzIiwiQ2F0ZWdvcnkiLCJvYmoiLCJnZXRQcm9wZXJ0eSIsImdldFByb3BlcnR5RnJvbU9iaiIsInRoaXMiLCJpZCIsIm5hbWUiLCJlbmFibGVkIiwiZ2V0Q2F0ZWdvcnlNb2RlbCIsImdldEFsbCIsImdldCIsIiRpbmplY3QiLCJmYWN0b3J5IiwiZ2V0Q29ubmVjdGlvblR5cGVzIiwiRnVuZGluZyIsIkRhdGEiLCJFbXBsb3ltZW50IiwiQ29sbGFib3JhdGlvbiIsIkNvbm5lY3Rpb24iLCJkZXRhaWxzIiwiZW50aXR5IiwiZW50aXR5X2lkIiwiZ2V0Q29ubmVjdGlvbk1vZGVsIiwidXJsIiwiRmluYW5jZSIsInllYXIiLCJhbW91bnQiLCJnZXRGaW5hbmNlTW9kZWwiLCJGdW5kaW5nQ29ubmVjdGlvbiIsImdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwiLCIkIiwibGlua0Z1bmN0aW9uIiwic2Nyb2xsIiwic2VsZiIsImNzcyIsImNsaWNrIiwid2luZG93IiwiaW5uZXJIZWlnaHQiLCJwYXJzZUludCIsImRldGFpbHNQYW5lbCIsIm1vYmlsZSIsInNjcm9sbFRvcCIsImFkZE1vYmlsZUV2ZW50cyIsImxpbmsiLCJtb2RhbEN0cmwiLCIkc2NvcGUiLCIkbW9kYWxJbnN0YW5jZSIsImNsb3NlV2luZG93IiwiY2xvc2UiLCJDb250cm9sbGVyIiwiJGh0dHAiLCIkdGltZW91dCIsIl8iLCJlbnRpdHlTZXJ2aWNlIiwiY2F0ZWdvcnlTZXJ2aWNlIiwibG9jYXRpb25TZXJ2aWNlIiwiaW5pdENhdGVnb3J5QXJyYXkiLCJjYXRlZ29yeSIsImNhdGVnb3J5SW5kZXgiLCJlbnRpdHlDYXRlZ29yeUluZGV4IiwiZW50aXR5Q2F0ZWdvcnkiLCJjYXRlZ29yaWVzIiwiaGFzT3duUHJvcGVydHkiLCJlZGl0RW50aXR5IiwiaXNFZGl0aW5nIiwiZ2V0RW50aXR5TW9kZWwiLCJlbnRpdHlUeXBlcyIsImdldEVudGl0eVR5cGVzIiwiaW5mbHVlbmNlVHlwZXMiLCJnZXRJbmZsdWVuY2VUeXBlcyIsImNhdGVnb3J5QmFja3VwIiwiYWRkcmVzc1NlYXJjaCIsInNlYXJjaCIsImpzb25wIiwicGFyYW1zIiwicXVlcnkiLCJrZXkiLCJpbmNsdWRlIiwidGhlbiIsInJlc3BvbnNlIiwiaXNEZWZpbmVkIiwiZGF0YSIsInJlc291cmNlU2V0cyIsImxlbmd0aCIsInJlc291cmNlcyIsInRvZ2dsZUNhdGVnb3J5IiwicHVzaCIsImZvdW5kIiwic2V0TG9jYXRpb24iLCJsb2NhdGlvbiIsImlzTGFzdCIsImZvcm1hdHRlZEFkZHJlc3MiLCJhcGlDYWxsUmVzdWx0IiwicmVzdWx0IiwiYWRkcmVzcyIsInBvaW50IiwiYWRkTG9jYXRpb24iLCJhZGRyZXNzX2xpbmUiLCJhZGRyZXNzTGluZSIsImxvY2FsaXR5IiwiZGlzdHJpY3QiLCJhZG1pbkRpc3RyaWN0IiwiY291bnRyeSIsImNvdW50cnlSZWdpb24iLCJjb3VudHJ5X2NvZGUiLCJjb3VudHJ5UmVnaW9uSXNvMiIsImNvb3JkaW5hdGVzIiwicG9zdGFsX2NvZGUiLCJwb3N0YWxDb2RlIiwibG9jYXRpb25zIiwiZ2V0TG9jYXRpb25Nb2RlbCIsImFkZEtleVBlcnNvbiIsInNvbWUiLCJrZXlfcGVvcGxlIiwic2V0RnVuZGluZ0Nvbm5lY3Rpb24iLCJmdW5kaW5nIiwiYWRkRnVuZGluZ0Nvbm5lY3Rpb24iLCJzZXRDb25uZWN0aW9uIiwiY29ubmVjdGlvbiIsImFkZENvbm5lY3Rpb24iLCJjb25uZWN0aW9ucyIsImFkZEZpbmFuY2UiLCJyZWNvcmRzIiwiZXZlcnkiLCJyIiwic2F2ZSIsInN1Y2Nlc3MiLCJpc1NhdmluZyIsIiRlbWl0IiwiY2FuY2VsRWRpdCIsImVycm9yIiwiaXNFcnJvciIsInNhdmVFbnRpdHkiLCJnZW5lcmF0ZURCTW9kZWwiLCJpc09wZW4iLCIkd2F0Y2giLCJuZXdWYWwiLCJvbGRWYWwiLCJlcXVhbHMiLCJjb3B5IiwiZWRpdEVudGl0eURpcmVjdGl2ZSIsImVudGl0aWVzIiwiZWRpdEVudGl0eURlcGVuZGVuY2llcyIsImNvbnN0YW50IiwiY29uZmlnIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCIkY29tcGlsZVByb3ZpZGVyIiwiaHRtbDVNb2RlIiwiZGVidWdJbmZvRW5hYmxlZCIsImZpbHRlciIsImlucHV0IiwiZGVjaW1hbHMiLCJleHAiLCJzdWZmaXhlcyIsImlzTmFOIiwiTWF0aCIsImZsb29yIiwibG9nIiwicG93IiwidG9GaXhlZCIsImhvbWVDdHJsIiwiY29ubmVjdGlvblNlcnZpY2UiLCJzZWFyY2hJdGVtcyIsImN1cnJlbnRMb2NhdGlvbiIsImNsaWNrZWRMb2NhdGlvbiIsImNsaWNrZWRFbnRpdHkiLCJlZGl0aW5nIiwiYWN0aW9ucyIsImludGVyYWN0ZWQiLCJzaG93c2VhcmNoTUIiLCJzaG93QW5hbHl0aWNzIiwiY29ubmVjdGlvblR5cGVzIiwic3RhdHVzIiwiaXNOZXR3b3JrU2hvd24iLCJsaWNlbnNlIiwibmV0d29ya0xvYWRpbmciLCJ0b2dnbGVBbmFseXRpY3MiLCJtaW5Db25uZWN0aW9ucyIsIiRicm9hZGNhc3QiLCJjb25uZWN0aW9uQ2hhbmdlIiwiY29uc29sZSIsImh5ZGVQYXJ0aWFscyIsImV4Y2VwdCIsInNldHRpbmdzRW5hYmxlZCIsInNob3dTZWFyY2giLCJ0b2dnbGVTZXR0aW5ncyIsInN0YXJ0RWRpdCIsImN1cnJlbnRFbnRpdHkiLCJzd2l0Y2hWaWV3IiwibW9iaWxlY2hlY2siLCJjaGVjayIsInJlZ2V4IiwicmVnZXgyIiwiYSIsInRlc3QiLCJzdWJzdHIiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ2ZW5kb3IiLCJvcGVyYSIsIm5vZGVzIiwidW5pcSIsInBsdWNrIiwiZmxhdHRlbiIsImVudGl0aWVzQnlMb2NhdGlvbiIsIm1hcCIsImxvYyIsImZpbmRpbmdzIiwiZmxvdyIsInByb3BlcnR5IiwicGFydGlhbFJpZ2h0IiwiYW55IiwidHlwZSIsImRpY3QiLCJ6aXBPYmplY3QiLCJjb25jYXQiLCJvdmVydmlld1VybCIsInNldEVudGl0eSIsInN0b3BFZGl0Iiwic2V0RW50aXR5SUQiLCJmaW5kIiwic2VsZWN0SXRlbSIsIml0ZW0iLCIkb24iLCJldmVudCIsImFyZ3MiLCJ2YWx1ZSIsInNldEVudGl0aWVzIiwiYW5pbWF0aW9uc0VuYWJsZWQiLCJob21lRGVwZW5kZW5jaWVzIiwiZGVwZW5kZW5jaWVzIiwib3ZlcnZpZXdDdHJsIiwiY2F0ZWdvcml6ZWRFbnRpdGllcyIsImZvckVhY2giLCJrZXlzIiwiJGZpbHRlciIsInN0YXJ0TG9hZCIsImZpbHRlcmVkRW50aXRpZXMiLCJjb2xsYWJvcmF0aW9ucyIsImZpbHRlcmVkQ29ubmVjdGlvbnMiLCJzb3VyY2VOb2RlIiwic291cmNlIiwidGFyZ2V0Tm9kZSIsInRhcmdldCIsInRvcDUiLCJ0YWtlUmlnaHQiLCJzb3J0QnkiLCJ3ZWxsY29ubmVjdGVkIiwiZSIsImRyYXdOZXR3b3JrIiwiaXNMb2FkaW5nIiwic2FmZUFwcGx5IiwiZm4iLCJwaGFzZSIsIiRyb290IiwiJCRwaGFzZSIsIiRhcHBseSIsInZpZXdPYmoiLCJlbnRpdHlBcnJheSIsImNvbm5lY3Rpb25BcnJheSIsInN2ZyIsImQzIiwic2VsZWN0Iiwic2VsZWN0QWxsIiwicmVtb3ZlIiwiYm91bmRzIiwibm9kZSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImhlaWdodCIsIndpZHRoIiwib2Zmc2V0U2NhbGUiLCJkZWZhdWx0Tm9kZVNpemUiLCJvZmZzZXRzIiwiSW5kaXZpZHVhbCIsIngiLCJ5IiwiRm9yLVByb2ZpdCIsIk5vbi1Qcm9maXQiLCJHb3Zlcm5tZW50IiwibG93ZXJCb3VuZFJhZGl1cyIsInVwcGVyQm91bmRSYWRpdXMiLCJtYXhFbXBsb3llZXMiLCJtYXgiLCJlbCIsImVtcGxveWVlcyIsIm1heEZvbGxvd2VycyIsImZvbGxvd2VycyIsInNjYWxlIiwic3FydCIsImRvbWFpbiIsInJhbmdlIiwibGlua3MiLCJmb3JjZSIsImxheW91dCIsInNpemUiLCJ2YWx1ZXMiLCJjaGFyZ2UiLCJkIiwibGlua1N0cmVuZ3RoIiwibGlua0Rpc3RhbmNlIiwiZW50ZXIiLCJhcHBlbmQiLCJhdHRyIiwiY2FsbCIsImRyYWciLCJ0ZXh0Iiwibmlja25hbWUiLCJnZXRDb21wdXRlZFRleHRMZW5ndGgiLCJwYXJlbnROb2RlIiwiZ2V0QkJveCIsIm9uIiwiayIsImFscGhhIiwibWluIiwic3BlZWRBbmltYXRlIiwidGlja3MiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJyZW5kZXIiLCJpIiwidGljayIsInN0YXJ0IiwibGlua2VkQnlJbmRleCIsImwiLCJfX2RhdGFfXyIsImluZGV4IiwiaG92ZXJUaW1lciIsIm5laWdoYm9yaW5nIiwiYiIsImZvY3VzbmVpZ2hib3JzIiwiY2xhc3NlZCIsIm4iLCJvIiwiZm9jdXMiLCJ1bmZvY3VzIiwiZml4ZWQiLCJyZXN1bWUiLCJob3ZlciIsInNldFRpbWVvdXQiLCJ1bmhvdmVyIiwiY2xlYXJUaW1lb3V0IiwiZm9jdXNMb2NhdGlvbiIsInVuZm9jdXNMb2NhdGlvbiIsImhpZ2hsaWdodExvY2F0aW9uIiwic2hvd0xpY2Vuc2UiLCJzdG9wUHJvcGFnYXRpb24iLCJiYWNrZ3JvdW5kY2xpY2siLCJkYmxjbGljayIsInB4IiwicHkiLCJzaXplQnkiLCJ0cmFuc2l0aW9uIiwiZHVyYXRpb24iLCJ2YWwiLCJ2aXNpYmxlIiwiaGlkZGVuIiwiUlRQIiwicmVzdGljdCIsInJlcXVpcmUiLCJlbGVtZW50IiwiYXR0cnMiLCJuZ01vZGVsIiwidG9Mb3dlckNhc2UiLCIkcGFyc2VycyIsInBhcnNlRmxvYXQiLCJpc09iamVjdCIsIkFycmF5IiwiaXNBcnJheSIsImRlZk9iaiIsImRlZmF1bHRWYWx1ZSIsImxvb3BBbmRJbml0IiwibW9kZWxBcnJheSIsImluaXRNb2RlbEZ1bmN0aW9uIiwibmV3QXJyYXkiLCJjb250cm9sRGlyZWN0aXZlIiwidG9nZ2xlTmV0d29yayIsImNvbnRyb2xsZXJBcyIsImJpbmRUb0NvbnRyb2xsZXIiLCJjb250cm9sRGVwZW5kZW5jaWVzIiwiYW5hbHl0aWNzQ3RybCIsImRldGFpbHNDdHJsIiwiaXRlbXNTaG93bkRlZmF1bHQiLCJncmFudHNfZ2l2ZW4iLCJncmFudHNfcmVjZWl2ZWQiLCJpbnZlc3RtZW50c19tYWRlIiwiaW52ZXN0bWVudHNfcmVjZWl2ZWQiLCJlbXBsb3ltZW50cyIsInJlbGF0aW9ucyIsImRhdGFfZ2l2ZW4iLCJkYXRhX3JlY2VpdmVkIiwicmV2ZW51ZXMiLCJleHBlbnNlcyIsIml0ZW1zU2hvd24iLCJjbG9uZSIsInNob3dNb3JlIiwic2hvd0xlc3MiLCJMb2NhdGlvbiIsImJ1aWxkRm9ybWF0dGVkQWRkcmVzcyIsImNvdW50cnlDb2RlIiwidHJpbSIsImZ1bkNvbm5TZXJ2aWNlIiwiY29ublNlcnZpY2UiLCJmaW5hbmNlU2VydmljZSIsIkVudGl0eSIsImRiTW9kZWwiLCJwb3AiLCJkZXNjcmlwdGlvbiIsImluZmx1ZW5jZSIsInR3aXR0ZXJfaGFuZGxlIiwicG9zdCIsIkNvbmZpZyIsIiRodHRwUHJvdmlkZXIiLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iLCIkcSIsImxvZ0FwaUVycm9yIiwiZXJyIiwicmVqZWN0IiwidW53cmFwQW5ndWxhckh0dHAiLCJhcGlVcmwiLCJkZWZhdWx0SGVhZGVyIiwiTCIsIm1hcEN0cmwiLCJsZWFmbGV0RGF0YSIsIm9wdGlvbnMiLCJjZW50ZXIiLCJsYXQiLCJsbmciLCJ6b29tIiwidGlsZUxheWVyIiwidGlsZUxheWVyT3B0aW9ucyIsImRldGVjdFJldGluYSIsInJldXNlVGlsZXMiLCJ6b29tQ29udHJvbCIsImF0dHJpYnV0aW9uQ29udHJvbCIsImNyZWF0ZVBpZUNoYXJ0IiwicGllIiwic29ydCIsImFyYyIsIm91dGVyUmFkaXVzIiwiaW5uZXJSYWRpdXMiLCJzdHJva2VXaWR0aCIsInciLCJoIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50TlMiLCJucyIsInByZWZpeCIsInZpcyIsImFyY3MiLCJjb3VudCIsInRvU3RyaW5nIiwiWE1MU2VyaWFsaXplciIsInNlcmlhbGl6ZVRvU3RyaW5nIiwieG1sIiwiZ2V0TWFwIiwiY2x1c3Rlckljb24iLCJjbHVzdGVyIiwiY2hpbGRyZW4iLCJnZXRBbGxDaGlsZE1hcmtlcnMiLCJ0b3RhbCIsImNsdXN0ZXJNYXJrZXJzIiwiY291bnRzIiwiY291bnRCeSIsImljb25EaW0iLCJodG1sIiwiRGl2SWNvbiIsImNsYXNzTmFtZSIsImljb25TaXplIiwib3V0ZXJMb29wIiwiaW5uZXJMb29wIiwibSIsIm1hcmtlciIsImljb24iLCJtYXJrZXJJY29uIiwidGl0bGUiLCJtZXNzYWdlIiwibWFya2VycyIsImFkZExheWVyIiwib25Mb2NhdGlvbkVycm9yIiwibGVhZmxldEVycm9yIiwiaW52YWxpZGF0ZVNpemUiLCJDb250cm9sIiwiWm9vbSIsInBvc2l0aW9uIiwiYWRkVG8iLCJjb250cm9sIiwibG9jYXRlIiwic2hvd1BvcHVwIiwiaWNvblVybCIsIm1hcmtlckNsdXN0ZXJHcm91cCIsInNwaWRlcmZ5T25NYXhab29tIiwic2hvd0NvdmVyYWdlT25Ib3ZlciIsImljb25DcmVhdGVGdW5jdGlvbiIsIm1heENsdXN0ZXJSYWRpdXMiLCJzcGlkZXJmeURpc3RhbmNlTXVsdGlwbGllciIsImxheWVyIiwic2V0VmlldyIsImNvbnRyb2xDdHJsIiwiJHJvb3RTY29wZSIsIiRtb2RhbCIsInZtIiwiY2hhbmdlVmlldyIsInNpemVCeUxpc3QiLCJzaG93VmlldyIsIk5ldHdvcmsiLCJNYXAiLCJ2aWV3Iiwic2hvd0Fib3V0Iiwib3BlbiIsImFuaW1hdGlvbiIsInRvZ2dsZU5vZGUiLCJ0b2dnbGVMaW5rIiwiY2hhbmdlU2l6ZUJ5IiwiY29udHJvbERlcHMiXSwibWFwcGluZ3MiOiJDQUFBLFNBQVVBLEdBRU4sWUFFQSxJQUFJQyxJQUNBLGVBQ0Esb0JBQ0EsWUFDQSxnQkFDQSxrQkFDQSxvQkFHQUMsR0FBcUIsbUJBRXpCRixHQUFRRyxPQUFPLHVCQUNmSCxFQUFRRyxPQUFPLGtCQUFtQkQsR0FDbENGLEVBQVFHLE9BQU8sY0FBZUYsSUFFL0JEO0ND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QUFXLGNBQWU1SyxLQUFROE0sRUFBTTdNLFFBQVc4ZSxFQUFHbmIsWUFBWWtKLE1BR2pGaVMsRUFBR1csV0FBYSxTQUFVNVMsR0FDdEIrUixFQUFXalUsV0FBVyxjQUFlNUssS0FBUThNLEVBQU03TSxRQUFXOGUsRUFBRzFVLGdCQUFnQnlDLE1BR3JGaVMsRUFBR1ksYUFBZSxXQUNkZCxFQUFXalUsV0FBVyxlQUFnQm1VLEVBQUd4SixTQU03Q3dKLEVBQUdZLGVBbkRQLEdBQUlDLElBQ0EsZ0JBQ0Esb0JBQ0EsYUFDQSxJQUNBLFNBQ0FoQixFQWlESmhnQixHQUFRRyxPQUFPLGVBQ1ZLLFdBQVcsY0FBZXdnQixJQUVoQ2hoQiIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBtYWluRGVwZW5kZW5jeUxpc3QgPSBbXG4gICAgICAgIFwidWkuYm9vdHN0cmFwXCIsXG4gICAgICAgIFwibGVhZmxldC1kaXJlY3RpdmVcIixcbiAgICAgICAgXCJuZ0FuaW1hdGVcIixcbiAgICAgICAgXCJ0ZW1wbGF0ZUNhY2hlXCIsXG4gICAgICAgIFwiY2l2aWMtZ3JhcGguYXBpXCIsXG4gICAgICAgIFwiY2l2aWMtZ3JhcGgudXRpbFwiXG4gICAgXTtcblxuICAgIHZhciBhcGlEZXBlbmRlbmN5TGlzdCA9IFtcImNpdmljLWdyYXBoLnV0aWxcIl07XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoLnV0aWxcIiwgW10pO1xuICAgIGFuZ3VsYXIubW9kdWxlKFwiY2l2aWMtZ3JhcGguYXBpXCIsIGFwaURlcGVuZGVuY3lMaXN0KTtcbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoXCIsIG1haW5EZXBlbmRlbmN5TGlzdCk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA3LzEvMTYuXG4gKi9cblxuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBhbmFseXRpY3NEZXBlbmRlbmNpZXMgPSBbYW5hbHl0aWNzRGlyZWN0aXZlXTtcblxuICAgIGZ1bmN0aW9uIGFuYWx5dGljc0RpcmVjdGl2ZSgpe1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdqcy9hbmFseXRpYy9hbmFseXRpY3MuaHRtbCcsXG4gICAgICAgICAgICByZXN0cmljdCAgIDogJ0UnLFxuICAgICAgICAgICAgc2NvcGUgICAgICA6IHt9LFxuICAgICAgICAgICAgY29udHJvbGxlciAgIDogJ2FuYWx5dGljc0N0cmwnXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnYW5hbHl0aWNzJywgYW5hbHl0aWNzRGVwZW5kZW5jaWVzKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjgvMTYuXG4gKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIFNlcnZpY2UoYXBpQ2FsbGVyLCB1dGlscykge1xuXG4gICAgICAgIGZ1bmN0aW9uIENhdGVnb3J5KG9iaikge1xuICAgICAgICAgICAgdmFyIGdldFByb3BlcnR5ID0gdXRpbHMuZ2V0UHJvcGVydHlGcm9tT2JqKG9iaik7XG5cbiAgICAgICAgICAgIHRoaXMuaWQgPSBnZXRQcm9wZXJ0eShcImlkXCIpO1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gZ2V0UHJvcGVydHkoXCJuYW1lXCIpO1xuICAgICAgICAgICAgdGhpcy5lbmFibGVkID0gZ2V0UHJvcGVydHkoXCJlbmFibGVcIiwgdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRDYXRlZ29yeU1vZGVsKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDYXRlZ29yeShvYmopO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0QWxsKCkge1xuICAgICAgICAgICAgcmV0dXJuIGFwaUNhbGxlci5nZXQoXCIvY2F0ZWdvcmllc1wiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcImdldENhdGVnb3J5TW9kZWxcIjogZ2V0Q2F0ZWdvcnlNb2RlbCxcbiAgICAgICAgICAgIFwiZ2V0QWxsXCI6IGdldEFsbFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIFNlcnZpY2UuJGluamVjdCA9IFtcImNnQXBpQ2FsbGVyXCIsIFwiY2dVdGlsU2VydmljZVwiXTtcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKVxuICAgICAgICAuZmFjdG9yeShcImNhdGVnb3J5U2VydmljZVwiLCBTZXJ2aWNlKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjcvMTYuXG4gKi9cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgdXJsID0gXCIvY29ubmVjdGlvbnNcIjtcblxuICAgIGZ1bmN0aW9uIGdldENvbm5lY3Rpb25UeXBlcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiRnVuZGluZ1wiOiB0cnVlLFxuICAgICAgICAgICAgXCJEYXRhXCI6IHRydWUsXG4gICAgICAgICAgICBcIkVtcGxveW1lbnRcIjogdHJ1ZSxcbiAgICAgICAgICAgIFwiQ29sbGFib3JhdGlvblwiOiB0cnVlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gU2VydmljZShhcGlDYWxsZXIsIHV0aWxzKSB7XG5cbiAgICAgICAgZnVuY3Rpb24gQ29ubmVjdGlvbihvYmopIHtcbiAgICAgICAgICAgIHZhciBnZXRQcm9wZXJ0eSA9IHV0aWxzLmdldFByb3BlcnR5RnJvbU9iaihvYmopO1xuXG4gICAgICAgICAgICB0aGlzLmlkID0gZ2V0UHJvcGVydHkoXCJpZFwiKTtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IGdldFByb3BlcnR5KFwibmFtZVwiKTtcbiAgICAgICAgICAgIHRoaXMuZGV0YWlscyA9IGdldFByb3BlcnR5KFwiZGV0YWlsc1wiKTtcbiAgICAgICAgICAgIHRoaXMuZW50aXR5ID0gZ2V0UHJvcGVydHkoXCJlbnRpdHlcIik7XG4gICAgICAgICAgICB0aGlzLmVudGl0eV9pZCA9IGdldFByb3BlcnR5KFwiZW50aXR5X2lkXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Q29ubmVjdGlvbk1vZGVsKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDb25uZWN0aW9uKG9iaik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRBbGwoKSB7XG4gICAgICAgICAgICByZXR1cm4gYXBpQ2FsbGVyLmdldCh1cmwpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiZ2V0QWxsXCI6IGdldEFsbCxcbiAgICAgICAgICAgIFwiZ2V0Q29ubmVjdGlvblR5cGVzXCI6IGdldENvbm5lY3Rpb25UeXBlcyxcbiAgICAgICAgICAgIFwiZ2V0Q29ubmVjdGlvbk1vZGVsXCI6IGdldENvbm5lY3Rpb25Nb2RlbFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIFNlcnZpY2UuJGluamVjdCA9IFtcImNnQXBpQ2FsbGVyXCIsIFwiY2dVdGlsU2VydmljZVwiXTtcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKVxuICAgICAgICAuZmFjdG9yeShcImNvbm5lY3Rpb25TZXJ2aWNlXCIsIFNlcnZpY2UpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNy8xNi5cbiAqL1xuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIFNlcnZpY2UodXRpbHMpIHtcbiAgICAgICAgZnVuY3Rpb24gRmluYW5jZShvYmopIHtcbiAgICAgICAgICAgIHZhciBnZXRQcm9wZXJ0eSA9IHV0aWxzLmdldFByb3BlcnR5RnJvbU9iaihvYmopO1xuXG4gICAgICAgICAgICB0aGlzLmlkID0gZ2V0UHJvcGVydHkoXCJpZFwiKTtcbiAgICAgICAgICAgIHRoaXMueWVhciA9IGdldFByb3BlcnR5KFwieWVhclwiKTtcbiAgICAgICAgICAgIHRoaXMuYW1vdW50ID0gZ2V0UHJvcGVydHkoXCJhbW91bnRcIiwgMCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRGaW5hbmNlTW9kZWwob2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZpbmFuY2Uob2JqKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcImdldEZpbmFuY2VNb2RlbFwiOiBnZXRGaW5hbmNlTW9kZWxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBTZXJ2aWNlLiRpbmplY3QgPSBbXCJjZ1V0aWxTZXJ2aWNlXCJdO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKFwiY2l2aWMtZ3JhcGguYXBpXCIpXG4gICAgICAgIC5mYWN0b3J5KFwiZmluYW5jZVNlcnZpY2VcIiwgU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxuICovXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgZnVuY3Rpb24gU2VydmljZSh1dGlscykge1xuXG4gICAgICAgIGZ1bmN0aW9uIEZ1bmRpbmdDb25uZWN0aW9uKG9iaikge1xuICAgICAgICAgICAgdmFyIGdldFByb3BlcnR5ID0gdXRpbHMuZ2V0UHJvcGVydHlGcm9tT2JqKG9iaik7XG5cbiAgICAgICAgICAgIHRoaXMuaWQgPSBnZXRQcm9wZXJ0eShcImlkXCIpO1xuICAgICAgICAgICAgdGhpcy55ZWFyID0gZ2V0UHJvcGVydHkoXCJ5ZWFyXCIpO1xuICAgICAgICAgICAgdGhpcy5hbW91bnQgPSBnZXRQcm9wZXJ0eShcImFtb3VudFwiKTtcbiAgICAgICAgICAgIHRoaXMuZW50aXR5ID0gZ2V0UHJvcGVydHkoXCJlbnRpdHlcIiwgXCJcIik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBGdW5kaW5nQ29ubmVjdGlvbihvYmopO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbFwiOiBnZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgU2VydmljZS4kaW5qZWN0ID0gW1wiY2dVdGlsU2VydmljZVwiXTtcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKVxuICAgICAgICAuZmFjdG9yeShcImZ1bmRpbmdDb25uZWN0aW9uU2VydmljZVwiLCBTZXJ2aWNlKTtcblxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIsICQpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIGxpbmtGdW5jdGlvbihzY29wZSkge1xuXG4gICAgICAgIGZ1bmN0aW9uIHNjcm9sbCgpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gJCh0aGlzKTtcbiAgICAgICAgICAgIHNlbGYuY3NzKCdoZWlnaHQnLCAnNTV2aCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY2xpY2soKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9ICQodGhpcyk7XG4gICAgICAgICAgICBpZiAod2luZG93LmlubmVySGVpZ2h0IC8gMyA+IHBhcnNlSW50KHNlbGYuY3NzKCdoZWlnaHQnKSkpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmNzcygnaGVpZ2h0JywgJzU1dmgnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jc3MoJ2hlaWdodCcsICczMHZoJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGV0YWlsc1BhbmVsO1xuICAgICAgICBpZiAoc2NvcGUubW9iaWxlKSB7XG4gICAgICAgICAgICBkZXRhaWxzUGFuZWwgPSAkKFwiI2RldGFpbHMtcGFuZWxcIik7XG4gICAgICAgICAgICBkZXRhaWxzUGFuZWwuY3NzKFwiaGVpZ2h0XCIsIFwiMzB2aFwiKTtcbiAgICAgICAgICAgIGRldGFpbHNQYW5lbC5zY3JvbGxUb3AoMCk7XG4gICAgICAgICAgICBkZXRhaWxzUGFuZWwuc2Nyb2xsKHNjcm9sbCk7XG4gICAgICAgICAgICBkZXRhaWxzUGFuZWwuY2xpY2soY2xpY2spO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkTW9iaWxlRXZlbnRzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgICAgIGxpbms6IGxpbmtGdW5jdGlvblxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2FkZE1vYmlsZUV2ZW50cycsIFthZGRNb2JpbGVFdmVudHNdKTtcbn0pKGFuZ3VsYXIsICQpO1xuIiwiKGZ1bmN0aW9uKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIG1vZGFsQ3RybCgkc2NvcGUsICRtb2RhbEluc3RhbmNlKSB7XG4gICAgICAgICRzY29wZS5jbG9zZVdpbmRvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRtb2RhbEluc3RhbmNlLmNsb3NlKCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ21vZGFsQ3RybCcsIFsnJHNjb3BlJywgJyRtb2RhbEluc3RhbmNlJywgbW9kYWxDdHJsXSk7XG5cbn0pKGFuZ3VsYXIpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBDb250cm9sbGVyKCRzY29wZSwgJGh0dHAsICR0aW1lb3V0LCBfLCBlbnRpdHlTZXJ2aWNlLCBjYXRlZ29yeVNlcnZpY2UsIGxvY2F0aW9uU2VydmljZSwgdXRpbHMpIHtcbiAgICAgICAgJHNjb3BlLmlzRWRpdGluZyA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUuZWRpdEVudGl0eSA9IGVudGl0eVNlcnZpY2UuZ2V0RW50aXR5TW9kZWwoJHNjb3BlLmVudGl0eSk7XG4gICAgICAgICRzY29wZS5lbnRpdHlUeXBlcyA9IGVudGl0eVNlcnZpY2UuZ2V0RW50aXR5VHlwZXMoKTtcbiAgICAgICAgJHNjb3BlLmluZmx1ZW5jZVR5cGVzID0gZW50aXR5U2VydmljZS5nZXRJbmZsdWVuY2VUeXBlcygpO1xuXG4gICAgICAgIHZhciBjYXRlZ29yeUJhY2t1cDtcblxuICAgICAgICAkc2NvcGUuY2F0ZWdvcmllcyA9IFtdO1xuXG4gICAgICAgICRzY29wZS5hZGRyZXNzU2VhcmNoID0gZnVuY3Rpb24gKHNlYXJjaCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmpzb25wKCdodHRwczovL2Rldi52aXJ0dWFsZWFydGgubmV0L1JFU1QvdjEvTG9jYXRpb25zJywge1xuICAgICAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICBxdWVyeTogc2VhcmNoLFxuICAgICAgICAgICAgICAgICAgICBrZXk6ICdBaTU4NTgxeUMtU3I3bWNGYllUdFVrUzNpeEU3ZjZadUpuYkZKQ1ZJNGhBdFcxWG9ERWVaeWlkUXoyZ0xDQ3lEJyxcbiAgICAgICAgICAgICAgICAgICAgJ2pzb25wJzogJ0pTT05fQ0FMTEJBQ0snLFxuICAgICAgICAgICAgICAgICAgICAnaW5jbHVkZSc6ICdjaXNvMidcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodXRpbHMuaXNEZWZpbmVkKHJlc3BvbnNlLmRhdGEucmVzb3VyY2VTZXRzKSAmJiByZXNwb25zZS5kYXRhLnJlc291cmNlU2V0cy5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEucmVzb3VyY2VTZXRzWzBdLnJlc291cmNlcztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS50b2dnbGVDYXRlZ29yeSA9IGZ1bmN0aW9uIChjYXRlZ29yeSkge1xuICAgICAgICAgICAgaWYgKCRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcy5wdXNoKGNhdGVnb3J5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgY2F0ZWdvcnlJbmRleCBpbiAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcy5oYXNPd25Qcm9wZXJ0eShjYXRlZ29yeUluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGVudGl0eUNhdGVnb3J5ID0gJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllc1tjYXRlZ29yeUluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVudGl0eUNhdGVnb3J5LmlkID09PSBjYXRlZ29yeS5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5Q2F0ZWdvcnkuZW5hYmxlZCA9IGNhdGVnb3J5LmVuYWJsZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMucHVzaChjYXRlZ29yeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZXRMb2NhdGlvbiA9IGZ1bmN0aW9uIChsb2NhdGlvbiwgaXNMYXN0KSB7XG4gICAgICAgICAgICAkc2NvcGUuYWRkcmVzc1NlYXJjaChsb2NhdGlvbi5mb3JtYXR0ZWRBZGRyZXNzKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChhcGlDYWxsUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKCF1dGlscy5pc0RlZmluZWQoYXBpQ2FsbFJlc3VsdFswXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gYXBpQ2FsbFJlc3VsdFswXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgPSByZXN1bHQuYWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50ID0gcmVzdWx0LnBvaW50O1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkTG9jYXRpb24oaXNMYXN0KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBQYXJzZXMgQVBJIGNhbGwgcmVzdWx0XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmFkZHJlc3NfbGluZSA9IHV0aWxzLmlzRGVmaW5lZChhZGRyZXNzLmFkZHJlc3NMaW5lKSA/IGFkZHJlc3MuYWRkcmVzc0xpbmUgOiAnJztcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ubG9jYWxpdHkgPSB1dGlscy5pc0RlZmluZWQoYWRkcmVzcy5sb2NhbGl0eSkgPyBhZGRyZXNzLmxvY2FsaXR5IDogJyc7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmRpc3RyaWN0ID1cbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxzLmlzRGVmaW5lZChhZGRyZXNzLmFkbWluRGlzdHJpY3QpID8gYWRkcmVzcy5hZG1pbkRpc3RyaWN0IDogJyc7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmNvdW50cnkgPVxuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMuaXNEZWZpbmVkKGFkZHJlc3MuY291bnRyeVJlZ2lvbikgPyBhZGRyZXNzLmNvdW50cnlSZWdpb24gOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5jb3VudHJ5X2NvZGUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMuaXNEZWZpbmVkKGFkZHJlc3MuY291bnRyeVJlZ2lvbklzbzIpID8gYWRkcmVzcy5jb3VudHJ5UmVnaW9uSXNvMiA6ICcnO1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5jb29yZGluYXRlcyA9IHV0aWxzLmlzRGVmaW5lZChwb2ludC5jb29yZGluYXRlcykgPyBwb2ludC5jb29yZGluYXRlcyA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnBvc3RhbF9jb2RlID0gdXRpbHMuaXNEZWZpbmVkKGFkZHJlc3MucG9zdGFsQ29kZSkgPyBhZGRyZXNzLnBvc3RhbENvZGUgOiBudWxsO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5hZGRMb2NhdGlvbiA9IGZ1bmN0aW9uIChpc0xhc3QpIHtcbiAgICAgICAgICAgIGlmIChpc0xhc3QpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdEVudGl0eS5sb2NhdGlvbnMucHVzaChsb2NhdGlvblNlcnZpY2UuZ2V0TG9jYXRpb25Nb2RlbCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuYWRkS2V5UGVyc29uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gQWRkIGJsYW5rIGZpZWxkIHRvIGVkaXQgaWYgdGhlcmUgYXJlIG5vbmUuXG4gICAgICAgICAgICAvLyBXQVRDSCBPVVQhIFRPRE86IElmIHNvbWVvbmUgZGVsZXRlcyBhbiBvbGQgcGVyc29uLCBkZWxldGUgdGhlaXIgaWQgdG9vLlxuICAgICAgICAgICAgLy8gaS5lLiBtYWtlIHN1cmUgb2xkL2NsZWFyZWQgZm9ybSBmaWVsZHMgYXJlbid0IGJlaW5nIGVkaXRlZCBpbnRvIG5ldyBwZW9wbGUuXG4gICAgICAgICAgICBpZiAoIShfLnNvbWUoJHNjb3BlLmVkaXRFbnRpdHkua2V5X3Blb3BsZSwgeyduYW1lJzogJycsICdpZCc6IG51bGx9KSkpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdEVudGl0eS5rZXlfcGVvcGxlLnB1c2goeyduYW1lJzogJycsICdpZCc6IG51bGx9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2V0RnVuZGluZ0Nvbm5lY3Rpb24gPSBmdW5jdGlvbiAoZW50aXR5LCBmdW5kaW5nKSB7XG4gICAgICAgICAgICAvLyBBZGQgb3RoZXIgZW50aXR5J3MgaWQgdG8gdGhpcyBmaW5hbmNlIGNvbm5lY3Rpb24uXG4gICAgICAgICAgICBmdW5kaW5nLmVudGl0eV9pZCA9IGVudGl0eS5pZDtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuYWRkRnVuZGluZ0Nvbm5lY3Rpb24gPSBmdW5jdGlvbiAoZnVuZGluZykge1xuICAgICAgICAgICAgaWYgKCFfLnNvbWUoZnVuZGluZywgeydlbnRpdHknOiAnJ30pKSB7XG4gICAgICAgICAgICAgICAgLy8gTWF5YmUgc2V0IGFtb3VudCB0byAwIGluc3RlYWQgb2YgbnVsbD9cbiAgICAgICAgICAgICAgICBmdW5kaW5nLnB1c2goeydlbnRpdHknOiAnJywgJ2Ftb3VudCc6IG51bGwsICd5ZWFyJzogbnVsbCwgJ2lkJzogbnVsbH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZXRDb25uZWN0aW9uID0gZnVuY3Rpb24gKGVudGl0eSwgY29ubmVjdGlvbikge1xuICAgICAgICAgICAgY29ubmVjdGlvbi5lbnRpdHlfaWQgPSBlbnRpdHkuaWQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmFkZENvbm5lY3Rpb24gPSBmdW5jdGlvbiAoY29ubmVjdGlvbnMpIHtcbiAgICAgICAgICAgIC8vIEFkZCBhbiBlbXB0eSBjb25uZWN0aW9uIHRvIGVkaXQgaWYgbm9uZSBleGlzdC5cbiAgICAgICAgICAgIGlmICghXy5zb21lKGNvbm5lY3Rpb25zLCB7J2VudGl0eSc6ICcnLCAnaWQnOiBudWxsfSkpIHtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9ucy5wdXNoKHsnZW50aXR5JzogJycsICdpZCc6IG51bGwsICdkZXRhaWxzJzogbnVsbH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5hZGRGaW5hbmNlID0gZnVuY3Rpb24gKHJlY29yZHMpIHtcbiAgICAgICAgICAgIC8vIEFkZCBuZXcgZmluYW5jZSBmaWVsZCBpZiBhbGwgY3VycmVudCBmaWVsZHMgYXJlIHZhbGlkLlxuICAgICAgICAgICAgaWYgKF8uZXZlcnkocmVjb3JkcywgZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIuYW1vdW50ID4gMCAmJiByLnllYXIgPiAxNzUwO1xuICAgICAgICAgICAgICAgIH0pKSB7XG4gICAgICAgICAgICAgICAgcmVjb3Jkcy5wdXNoKHsnYW1vdW50JzogbnVsbCwgJ3llYXInOiBudWxsLCAnaWQnOiBudWxsfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2NvcGUuaXNTYXZpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmlzU2F2aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLiRlbWl0KFwiZWRpdEVudGl0eVN1Y2Nlc3NcIiwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIC8vIENhbGwgdG8gaG9tZUN0cmwncyBwYXJlbnQgc3RvcEVkaXQoKSB0byBjaGFuZ2UgdmlldyBiYWNrIGFuZCBhbnkgb3RoZXJcbiAgICAgICAgICAgICAgICAvLyBoaWdoLWxldmVsIGNoYW5nZXMuXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNhbmNlbEVkaXQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmlzRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmlzRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZW50aXR5U2VydmljZVxuICAgICAgICAgICAgICAgIC5zYXZlRW50aXR5KCRzY29wZS5lZGl0RW50aXR5LmdlbmVyYXRlREJNb2RlbCgpKVxuICAgICAgICAgICAgICAgIC50aGVuKHN1Y2Nlc3MsIGVycm9yKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuY2FuY2VsRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuJHdhdGNoKCdlbnRpdHknLCBmdW5jdGlvbiAobmV3VmFsLCBvbGRWYWwpIHtcbiAgICAgICAgICAgIGlmIChhbmd1bGFyLmVxdWFscyhuZXdWYWwsIG9sZFZhbCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5lZGl0RW50aXR5ID0gZW50aXR5U2VydmljZS5nZXRFbnRpdHlNb2RlbChuZXdWYWwpO1xuICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3JpZXMgPSBhbmd1bGFyLmNvcHkoY2F0ZWdvcnlCYWNrdXApO1xuXG4gICAgICAgICAgICBpbml0Q2F0ZWdvcnlBcnJheSgpO1xuXG4gICAgICAgICAgICAkc2NvcGUuaXNFZGl0aW5nID0gdXRpbHMuaXNEZWZpbmVkKCRzY29wZS5lZGl0RW50aXR5LmlkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXRpYWxpemVzIGNhdGVnb3J5IGZpZWxkcyB3aXRoIGVudGl0eSB2YWx1ZXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIExvb3BzIHRocm91Z2ggY2F0ZWdvcnkgaW4gY2F0ZWdvcmllcyBhbmQgbG9vcHMgdGhyb3VnaCBjYXRlZ29yeSBpbiBlbnRpdHkuIElkZW50aWZpZXNcbiAgICAgICAgICogY2F0ZWdvcmllcyBlbmFibGVkIGluIHRoZSBlbnRpdHkgYW5kIHNldHMgbG9jYWwgZGlzcGxheSBkYXRhLiBUaGlzIGlzIGJlY2F1c2Ugd2UgY3JlYXRlZFxuICAgICAgICAgKiBhIGJhY2t1cCBvZiBlbnRpdHkgZGF0YSBzbyB0aGF0IHRoZSBhcGkgZGF0YSBpcyBub3QgdGFtcGVyZWQgd2l0aCBkaXJlY3RseS5cbiAgICAgICAgICpcbiAgICAgICAgICogVE9ETzogcmVwbGFjZSB3aXRoIGJldHRlciBkYXRhIHN0cnVjdHVyZSBmb3IgY2F0ZWdvcmllcy5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGluaXRDYXRlZ29yeUFycmF5KCkge1xuICAgICAgICAgICAgdmFyIGNhdGVnb3J5LFxuICAgICAgICAgICAgICAgIGNhdGVnb3J5SW5kZXgsXG4gICAgICAgICAgICAgICAgZW50aXR5Q2F0ZWdvcnlJbmRleCxcbiAgICAgICAgICAgICAgICBlbnRpdHlDYXRlZ29yeTtcblxuICAgICAgICAgICAgZm9yIChjYXRlZ29yeUluZGV4IGluICRzY29wZS5jYXRlZ29yaWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuY2F0ZWdvcmllcy5oYXNPd25Qcm9wZXJ0eShjYXRlZ29yeUluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0ZWdvcnkgPSAkc2NvcGUuY2F0ZWdvcmllc1tjYXRlZ29yeUluZGV4XTtcbiAgICAgICAgICAgICAgICBmb3IgKGVudGl0eUNhdGVnb3J5SW5kZXggaW4gJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMuaGFzT3duUHJvcGVydHkoZW50aXR5Q2F0ZWdvcnlJbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eUNhdGVnb3J5ID0gJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllc1tlbnRpdHlDYXRlZ29yeUluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhdGVnb3J5LmlkID09PSBlbnRpdHlDYXRlZ29yeS5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnkuZW5hYmxlZCA9IGVudGl0eUNhdGVnb3J5LmVuYWJsZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXRyaWV2ZSBDYXRlZ29yaWVzIGZyb20gREJcbiAgICAgICAgY2F0ZWdvcnlTZXJ2aWNlXG4gICAgICAgICAgICAuZ2V0QWxsKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgY2F0ZWdvcnlCYWNrdXAgPSBkYXRhLmNhdGVnb3JpZXM7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlcyBiYWNrdXAgb2YgZGF0YSB1c2luZyBBbmd1bGFyIHRvIHByZXZlbnQgYXBpIGRhdGEgZnJvbSBiZWluZyB0YW1wZXJlZFxuICAgICAgICAgICAgICAgIC8vIGRpcmVjdGx5XG4gICAgICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3JpZXMgPSBhbmd1bGFyLmNvcHkoY2F0ZWdvcnlCYWNrdXApO1xuICAgICAgICAgICAgICAgIC8vICRzY29wZS5jYXRlZ29yaWVzID0gZGF0YS5jYXRlZ29yaWVzO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgQ29udHJvbGxlci4kaW5qZWN0ID0gW1xuICAgICAgICBcIiRzY29wZVwiLFxuICAgICAgICBcIiRodHRwXCIsXG4gICAgICAgIFwiJHRpbWVvdXRcIixcbiAgICAgICAgXCJfXCIsXG4gICAgICAgIFwiZW50aXR5U2VydmljZVwiLFxuICAgICAgICBcImNhdGVnb3J5U2VydmljZVwiLFxuICAgICAgICBcImxvY2F0aW9uU2VydmljZVwiLFxuICAgICAgICBcImNnVXRpbFNlcnZpY2VcIlxuICAgIF07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaFwiKVxuICAgICAgICAuY29udHJvbGxlcihcImVkaXRDdHJsXCIsIENvbnRyb2xsZXIpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICpcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjcvMTYuXG4gKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgZWRpdEVudGl0eURlcGVuZGVuY2llcyA9IFtlZGl0RW50aXR5RGlyZWN0aXZlXTtcblxuICAgIGZ1bmN0aW9uIGVkaXRFbnRpdHlEaXJlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2pzL2VkaXQtZW50aXR5L2VkaXQuaHRtbCcsXG4gICAgICAgICAgICByZXN0cmljdCAgIDogJ0UnLFxuICAgICAgICAgICAgc2NvcGUgICAgICA6IHtcbiAgICAgICAgICAgICAgICAnZW50aXR5JyAgOiBcIj1cIixcbiAgICAgICAgICAgICAgICAnZW50aXRpZXMnOiBcIj1cIixcbiAgICAgICAgICAgICAgICAnaXNPcGVuJyAgOiBcIj1cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnZWRpdEN0cmwnXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnZWRpdEVudGl0eScsIGVkaXRFbnRpdHlEZXBlbmRlbmNpZXMpO1xuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnN0YW50KCdfJywgd2luZG93Ll8pXG4gICAgICAgIC5jb25maWcoWyckbG9jYXRpb25Qcm92aWRlcicsICckY29tcGlsZVByb3ZpZGVyJyxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgkbG9jYXRpb25Qcm92aWRlciwgJGNvbXBpbGVQcm92aWRlcikge1xuICAgICAgICAgICAgICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAkY29tcGlsZVByb3ZpZGVyLmRlYnVnSW5mb0VuYWJsZWQodHJ1ZSk7XG4gICAgICAgICAgICB9XSlcbiAgICAgICAgLmZpbHRlcigndGhvdXNhbmRTdWZmaXgnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGlucHV0LCBkZWNpbWFscykge1xuICAgICAgICAgICAgICAgIHZhciBleHAsXG4gICAgICAgICAgICAgICAgICAgIHN1ZmZpeGVzID0gWydrJywgJ00nLCAnRycsICdUJywgJ1AnLCAnRSddO1xuXG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5pc05hTihpbnB1dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGlucHV0IDwgMTAwMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZXhwID0gTWF0aC5mbG9vcihNYXRoLmxvZyhpbnB1dCkgLyBNYXRoLmxvZygxMDAwKSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gKGlucHV0IC8gTWF0aC5wb3coMTAwMCwgZXhwKSkudG9GaXhlZChkZWNpbWFscykgKyBzdWZmaXhlc1tleHAgLSAxXTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGhvbWVEZXBlbmRlbmNpZXMgPSBbXG4gICAgICAgICckc2NvcGUnLFxuICAgICAgICAnJHRpbWVvdXQnLFxuICAgICAgICAnXycsXG4gICAgICAgICdlbnRpdHlTZXJ2aWNlJyxcbiAgICAgICAgJ2Nvbm5lY3Rpb25TZXJ2aWNlJyxcbiAgICAgICAgaG9tZUN0cmxcbiAgICBdO1xuXG4gICAgZnVuY3Rpb24gaG9tZUN0cmwoJHNjb3BlLCAkdGltZW91dCwgXywgZW50aXR5U2VydmljZSwgY29ubmVjdGlvblNlcnZpY2UpIHtcbiAgICAgICAgJHNjb3BlLmVudGl0aWVzICAgICAgICAgICAgICAgICA9IFtdO1xuICAgICAgICAkc2NvcGUuc2VhcmNoSXRlbXMgICAgICAgICAgICAgID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmNhdGVnb3JpZXMgICAgICAgICAgICAgICA9IFtdO1xuICAgICAgICAkc2NvcGUuY3VycmVudExvY2F0aW9uICAgICAgICAgID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmNsaWNrZWRMb2NhdGlvbiAgICAgICAgICA9IHt9O1xuICAgICAgICAkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkgICAgICAgICAgICA9IHt9O1xuICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgICAgID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmVkaXRpbmcgICAgICAgICAgICAgICAgICA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUuYWN0aW9ucyAgICAgICAgICAgICAgICAgID0geydpbnRlcmFjdGVkJzogZmFsc2V9O1xuICAgICAgICAkc2NvcGUuc2hvd3NlYXJjaE1CICAgICAgICAgICAgID0gZmFsc2U7XG4gICAgICAgICRzY29wZS5zaG93QW5hbHl0aWNzICAgICAgICAgICAgPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLmVudGl0eVR5cGVzICAgICAgICAgICAgICA9IGVudGl0eVNlcnZpY2UuZ2V0RW50aXR5VHlwZXMoKTtcbiAgICAgICAgJHNjb3BlLmNvbm5lY3Rpb25UeXBlcyAgICAgICAgICA9IGNvbm5lY3Rpb25TZXJ2aWNlLmdldENvbm5lY3Rpb25UeXBlcygpO1xuICAgICAgICAkc2NvcGUuc3RhdHVzICAgICAgICAgICAgICAgICAgID0ge1xuICAgICAgICAgICAgXCJpc05ldHdvcmtTaG93blwiOiB0cnVlLFxuICAgICAgICAgICAgXCJsaWNlbnNlXCIgICAgICAgOiB0cnVlLFxuICAgICAgICAgICAgXCJuZXR3b3JrTG9hZGluZ1wiOiB0cnVlXG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnRvZ2dsZUFuYWx5dGljcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5zaG93QW5hbHl0aWNzID0gISRzY29wZS5zaG93QW5hbHl0aWNzO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubWluQ29ubmVjdGlvbnMgPSAkc2NvcGUubWluQ29ubmVjdGlvbnMgPSAyO1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgJHNjb3BlLiR3YXRjaCgnbWluQ29ubmVjdGlvbnMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCd0cmlnZ2VyTmV0d29ya0RyYXcnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHNjb3BlLmNvbm5lY3Rpb25DaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzZWxmLm1pbkNvbm5lY3Rpb25zKTtcbiAgICAgICAgICAgICRzY29wZS5taW5Db25uZWN0aW9ucyA9IHNlbGYubWluQ29ubmVjdGlvbnM7XG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgndHJpZ2dlck5ldHdvcmtEcmF3Jyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmh5ZGVQYXJ0aWFscyA9IGZ1bmN0aW9uIChleGNlcHQpIHtcbiAgICAgICAgICAgIGlmIChleGNlcHQgPT09IFwic2VhcmNoXCIpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdGluZyAgICAgICAgID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNldHRpbmdzRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChleGNlcHQgPT09IFwic2V0dGluZ3NcIikge1xuICAgICAgICAgICAgICAgICRzY29wZS5lZGl0aW5nICAgICAgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd3NlYXJjaE1CID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV4Y2VwdCA9PT0gXCJlZGl0XCIpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3NFbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3dzZWFyY2hNQiAgICA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdGluZyAgICAgICAgID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNldHRpbmdzRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zaG93c2VhcmNoTUIgICAgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zaG93U2VhcmNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLmh5ZGVQYXJ0aWFscyhcInNlYXJjaFwiKTtcbiAgICAgICAgICAgICRzY29wZS5zaG93c2VhcmNoTUIgICA9ICEkc2NvcGUuc2hvd3NlYXJjaE1CO1xuICAgICAgICAgICAgLy8gJHNjb3BlLiRicm9hZGNhc3QoJ2hpZGVMaWNlbnNlJyk7XG4gICAgICAgICAgICAkc2NvcGUuc3RhdHVzLmxpY2Vuc2UgPSBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUudG9nZ2xlU2V0dGluZ3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2NvcGUuaHlkZVBhcnRpYWxzKFwic2V0dGluZ3NcIik7XG4gICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3NFbmFibGVkID0gISRzY29wZS5zZXR0aW5nc0VuYWJsZWQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnN0YXJ0RWRpdCA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50RW50aXR5ID0gZW50aXR5O1xuICAgICAgICAgICAgaWYgKCRzY29wZS5tb2JpbGUpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuaHlkZVBhcnRpYWxzKFwiZWRpdFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRzY29wZS5lZGl0aW5nID0gdHJ1ZTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc3dpdGNoVmlldyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vICRzY29wZS4kYnJvYWRjYXN0KCd2aWV3Q2hhbmdlJywgISRzY29wZS5zdGF0dXMuaXNOZXR3b3JrU2hvd24gPyAnTWFwJyA6ICdOZXR3b3JrJyk7XG4gICAgICAgICAgICAvLyAkc2NvcGUuY2hhbmdlVmlldyghJHNjb3BlLnN0YXR1cy5pc05ldHdvcmtTaG93biA/ICdNYXAnIDogJ05ldHdvcmsnKTtcbiAgICAgICAgICAgICRzY29wZS5zdGF0dXMuaXNOZXR3b3JrU2hvd24gPSAhJHNjb3BlLnN0YXR1cy5pc05ldHdvcmtTaG93bjtcbiAgICAgICAgICAgIGlmICgkc2NvcGUuc3RhdHVzLmlzTmV0d29ya1Nob3duKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3RyaWdnZXJOZXR3b3JrRHJhdycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHdpbmRvdy5tb2JpbGVjaGVjayAgICAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY2hlY2sgID0gZmFsc2UsXG4gICAgICAgICAgICAgICAgcmVnZXggID0gLyhhbmRyb2lkfGJiXFxkK3xtZWVnbykuK21vYmlsZXxhdmFudGdvfGJhZGFcXC98YmxhY2tiZXJyeXxibGF6ZXJ8Y29tcGFsfGVsYWluZXxmZW5uZWN8aGlwdG9wfGllbW9iaWxlfGlwKGhvbmV8b2QpfGlyaXN8a2luZGxlfGxnZSB8bWFlbW98bWlkcHxtbXB8bW9iaWxlLitmaXJlZm94fG5ldGZyb250fG9wZXJhIG0ob2J8aW4paXxwYWxtKCBvcyk/fHBob25lfHAoaXhpfHJlKVxcL3xwbHVja2VyfHBvY2tldHxwc3B8c2VyaWVzKDR8NikwfHN5bWJpYW58dHJlb3x1cFxcLihicm93c2VyfGxpbmspfHZvZGFmb25lfHdhcHx3aW5kb3dzIGNlfHhkYXx4aWluby9pLFxuICAgICAgICAgICAgICAgIHJlZ2V4MiA9IC8xMjA3fDYzMTB8NjU5MHwzZ3NvfDR0aHB8NTBbMS02XWl8Nzcwc3w4MDJzfGEgd2F8YWJhY3xhYyhlcnxvb3xzXFwtKXxhaShrb3xybil8YWwoYXZ8Y2F8Y28pfGFtb2l8YW4oZXh8bnl8eXcpfGFwdHV8YXIoY2h8Z28pfGFzKHRlfHVzKXxhdHR3fGF1KGRpfFxcLW18ciB8cyApfGF2YW58YmUoY2t8bGx8bnEpfGJpKGxifHJkKXxibChhY3xheil8YnIoZXx2KXd8YnVtYnxid1xcLShufHUpfGM1NVxcL3xjYXBpfGNjd2F8Y2RtXFwtfGNlbGx8Y2h0bXxjbGRjfGNtZFxcLXxjbyhtcHxuZCl8Y3Jhd3xkYShpdHxsbHxuZyl8ZGJ0ZXxkY1xcLXN8ZGV2aXxkaWNhfGRtb2J8ZG8oY3xwKW98ZHMoMTJ8XFwtZCl8ZWwoNDl8YWkpfGVtKGwyfHVsKXxlcihpY3xrMCl8ZXNsOHxleihbNC03XTB8b3N8d2F8emUpfGZldGN8Zmx5KFxcLXxfKXxnMSB1fGc1NjB8Z2VuZXxnZlxcLTV8Z1xcLW1vfGdvKFxcLnd8b2QpfGdyKGFkfHVuKXxoYWllfGhjaXR8aGRcXC0obXxwfHQpfGhlaVxcLXxoaShwdHx0YSl8aHAoIGl8aXApfGhzXFwtY3xodChjKFxcLXwgfF98YXxnfHB8c3x0KXx0cCl8aHUoYXd8dGMpfGlcXC0oMjB8Z298bWEpfGkyMzB8aWFjKCB8XFwtfFxcLyl8aWJyb3xpZGVhfGlnMDF8aWtvbXxpbTFrfGlubm98aXBhcXxpcmlzfGphKHR8dilhfGpicm98amVtdXxqaWdzfGtkZGl8a2VqaXxrZ3QoIHxcXC8pfGtsb258a3B0IHxrd2NcXC18a3lvKGN8ayl8bGUobm98eGkpfGxnKCBnfFxcLyhrfGx8dSl8NTB8NTR8XFwtW2Etd10pfGxpYnd8bHlueHxtMVxcLXd8bTNnYXxtNTBcXC98bWEodGV8dWl8eG8pfG1jKDAxfDIxfGNhKXxtXFwtY3J8bWUocmN8cmkpfG1pKG84fG9hfHRzKXxtbWVmfG1vKDAxfDAyfGJpfGRlfGRvfHQoXFwtfCB8b3x2KXx6eil8bXQoNTB8cDF8diApfG13YnB8bXl3YXxuMTBbMC0yXXxuMjBbMi0zXXxuMzAoMHwyKXxuNTAoMHwyfDUpfG43KDAoMHwxKXwxMCl8bmUoKGN8bSlcXC18b258dGZ8d2Z8d2d8d3QpfG5vayg2fGkpfG56cGh8bzJpbXxvcCh0aXx3dil8b3Jhbnxvd2cxfHA4MDB8cGFuKGF8ZHx0KXxwZHhnfHBnKDEzfFxcLShbMS04XXxjKSl8cGhpbHxwaXJlfHBsKGF5fHVjKXxwblxcLTJ8cG8oY2t8cnR8c2UpfHByb3h8cHNpb3xwdFxcLWd8cWFcXC1hfHFjKDA3fDEyfDIxfDMyfDYwfFxcLVsyLTddfGlcXC0pfHF0ZWt8cjM4MHxyNjAwfHJha3N8cmltOXxybyh2ZXx6byl8czU1XFwvfHNhKGdlfG1hfG1tfG1zfG55fHZhKXxzYygwMXxoXFwtfG9vfHBcXC0pfHNka1xcL3xzZShjKFxcLXwwfDEpfDQ3fG1jfG5kfHJpKXxzZ2hcXC18c2hhcnxzaWUoXFwtfG0pfHNrXFwtMHxzbCg0NXxpZCl8c20oYWx8YXJ8YjN8aXR8dDUpfHNvKGZ0fG55KXxzcCgwMXxoXFwtfHZcXC18diApfHN5KDAxfG1iKXx0MigxOHw1MCl8dDYoMDB8MTB8MTgpfHRhKGd0fGxrKXx0Y2xcXC18dGRnXFwtfHRlbChpfG0pfHRpbVxcLXx0XFwtbW98dG8ocGx8c2gpfHRzKDcwfG1cXC18bTN8bTUpfHR4XFwtOXx1cChcXC5ifGcxfHNpKXx1dHN0fHY0MDB8djc1MHx2ZXJpfHZpKHJnfHRlKXx2ayg0MHw1WzAtM118XFwtdil8dm00MHx2b2RhfHZ1bGN8dngoNTJ8NTN8NjB8NjF8NzB8ODB8ODF8ODN8ODV8OTgpfHczYyhcXC18ICl8d2ViY3x3aGl0fHdpKGcgfG5jfG53KXx3bWxifHdvbnV8eDcwMHx5YXNcXC18eW91cnx6ZXRvfHp0ZVxcLS9pO1xuICAgICAgICAgICAgKGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlZ2V4LnRlc3QoYSkgfHwgcmVnZXgyLnRlc3QoYS5zdWJzdHIoMCwgNCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KShuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvci52ZW5kb3IgfHwgd2luZG93Lm9wZXJhKTtcbiAgICAgICAgICAgIHJldHVybiBjaGVjaztcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLm1vYmlsZSAgICAgICAgICA9IHdpbmRvdy5tb2JpbGVjaGVjaygpO1xuICAgICAgICAkc2NvcGUuc2V0dGluZ3NFbmFibGVkID0gISRzY29wZS5tb2JpbGU7XG5cbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZW50aXR5U2VydmljZVxuICAgICAgICAgICAgICAgIC5nZXRBbGwoKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lbnRpdGllcyA9IGRhdGEubm9kZXM7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbnMgICA9IF8udW5pcShcbiAgICAgICAgICAgICAgICAgICAgICAgIF8ucGx1Y2soXy5mbGF0dGVuKF8ucGx1Y2soJHNjb3BlLmVudGl0aWVzLCAnbG9jYXRpb25zJykpLCAnbG9jYWxpdHknKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGVudGl0aWVzQnlMb2NhdGlvbiA9IF8ubWFwKGxvY2F0aW9ucywgZnVuY3Rpb24gKGxvYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbmRpbmdzID0gXy5maWx0ZXIoJHNjb3BlLmVudGl0aWVzLCBfLmZsb3coXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5wcm9wZXJ0eSgnbG9jYXRpb25zJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5wYXJ0aWFsUmlnaHQoXy5hbnksIHtsb2NhbGl0eTogbG9jfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgICAgOiBsb2MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSAgICA6ICdsb2NhdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50aXRpZXM6IGZpbmRpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpY3QgICAgOiBfLnppcE9iamVjdChfLnBsdWNrKGZpbmRpbmdzLCAnbmFtZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLnBsdWNrKGZpbmRpbmdzLCAnaW5kZXgnKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zZWFyY2hJdGVtcyA9IGVudGl0aWVzQnlMb2NhdGlvbi5jb25jYXQoJHNjb3BlLmVudGl0aWVzKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBpZiAoJHNjb3BlLmdldFVSTElEKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIC8vIFNldCB0aGUgZW50aXR5IHRvIHRoZSBJRCBpbiB0aGUgVVJMIGlmIGl0IGV4aXN0cy5cbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICRzY29wZS5zZXRFbnRpdHlJRCgkc2NvcGUuZ2V0VVJMSUQoKSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm92ZXJ2aWV3VXJsID0gJ2pzL292ZXJ2aWV3L292ZXJ2aWV3Lmh0bWwnO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgndHJpZ2dlck5ldHdvcmtEcmF3Jyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIDEwMCk7XG5cbiAgICAgICAgJHNjb3BlLm92ZXJ2aWV3VXJsID0gbnVsbDtcblxuICAgICAgICAkc2NvcGUuc2V0RW50aXR5ICAgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudExvY2F0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50RW50aXR5ICAgPSBlbnRpdHk7XG4gICAgICAgICAgICBpZiAoJHNjb3BlLmVkaXRpbmcpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3RvcEVkaXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdlbnRpdHlDaGFuZ2UnKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2V0RW50aXR5SUQgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgICRzY29wZS5zZXRFbnRpdHkoXy5maW5kKCRzY29wZS5lbnRpdGllcywgeydpZCc6IGlkfSkpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZXRMb2NhdGlvbiA9IGZ1bmN0aW9uIChsb2NhdGlvbikge1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRMb2NhdGlvbiA9IGxvY2F0aW9uO1xuICAgICAgICAgICAgaWYgKCRzY29wZS5lZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnN0b3BFZGl0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnaXRlbUNoYW5nZScpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZWxlY3RJdGVtID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdsb2NhdGlvbicpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2V0TG9jYXRpb24oaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAkc2NvcGVbaXRlbSAlIDEgPT09IDAgPyAnc2V0RW50aXR5SUQnIDogJ3NldEVudGl0eSddKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3NlbGVjdEl0ZW0nLCBpdGVtKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuJG9uKCdzZXRDdXJyZW50RW50aXR5JywgZnVuY3Rpb24gKGV2ZW50LCBhcmdzKSB7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudEVudGl0eSA9IGFyZ3MudmFsdWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRzY29wZS4kb24oJ3NldEN1cnJlbnRMb2NhdGlvbicsIGZ1bmN0aW9uIChldmVudCwgYXJncykge1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRMb2NhdGlvbiA9IGFyZ3MudmFsdWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRzY29wZS5zZXRFbnRpdGllcyA9IGZ1bmN0aW9uIChlbnRpdGllcykge1xuICAgICAgICAgICAgJHNjb3BlLmVudGl0aWVzID0gZW50aXRpZXM7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnN0b3BFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLmVkaXRpbmcgPSBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuJG9uKFwiZWRpdEVudGl0eVN1Y2Nlc3NcIiwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAkc2NvcGUuc2V0RW50aXRpZXMocmVzcG9uc2Uubm9kZXMpO1xuICAgICAgICAgICAgLy8gJHNjb3BlLnNldEVudGl0eUlEKCRzY29wZS5jdXJyZW50RW50aXR5LmlkKTtcbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCd0cmlnZ2VyTmV0d29ya0RyYXcnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29udHJvbGxlcignaG9tZUN0cmwnLCBob21lRGVwZW5kZW5jaWVzKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMTQvMTYuXG4gKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgZGVwZW5kZW5jaWVzID0gW107XG5cbiAgICBmdW5jdGlvbiBkaXJlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcInJlc3RyaWN0XCI6IFwiRVwiLFxuICAgICAgICAgICAgXCJ0ZW1wbGF0ZVVybFwiOiBcIi9tYXAvbWFwLmh0bWxcIixcbiAgICAgICAgICAgIFwiY29udHJvbGxlclwiOiBcIm1hcEN0cmxcIlxuICAgICAgICB9O1xuICAgIH1cbiAgICAgICAgYW5ndWxhci5tb2R1bGUoXCJjaXZpYy1ncmFwaFwiKVxuICAgICAgICAgICAgLmRpcmVjdGl2ZShcIm1hcFwiLCBkZXBlbmRlbmNpZXMpO1xuXG59KShhbmd1bGFyKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIG92ZXJ2aWV3Q3RybCgkc2NvcGUsIF8pIHtcbiAgICAgICAgJHNjb3BlLmNhdGVnb3JpemVkRW50aXRpZXMgPSB7fTtcbiAgICAgICAgXy5mb3JFYWNoKF8ua2V5cygkc2NvcGUuZW50aXR5VHlwZXMpLCBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3JpemVkRW50aXRpZXNbdHlwZV0gPSBfLmZpbHRlcigkc2NvcGUuZW50aXRpZXMsIHsndHlwZSc6IHR5cGV9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ292ZXJ2aWV3Q3RybCcsIFsnJHNjb3BlJywgJ18nLCBvdmVydmlld0N0cmxdKTtcbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIENvbnRyb2xsZXIoJHNjb3BlLCAkZmlsdGVyLCBfLCBjb25uZWN0aW9uU2VydmljZSwgdXRpbHMpIHtcbiAgICAgICAgLy8gVE9ETzogTWFrZSBhIGhhc2htYXAgb24gdGhlIGJhY2tlbmQgb2YgaWQgLT4gcG9zaXRpb24sIHRoZW4gdXNlIHNvdXJjZTpcbiAgICAgICAgLy8gZW50aXRpZXNbbWFwW3NvdXJjZWlkXV0gdG8gZ2V0IG5vZGVzLiBTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3EvMTY4MjQzMDhcbiAgICAgICAgJHNjb3BlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgICRzY29wZS5jb25uZWN0aW9ucyA9IHt9O1xuICAgICAgICBzdGFydExvYWQoKTtcblxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9jb2RlcndhbGwuY29tL3Avbmdpc21hL3NhZmUtYXBwbHktaW4tYW5ndWxhci1qc1xuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5ID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICB2YXIgcGhhc2UgPSB0aGlzLiRyb290LiQkcGhhc2U7XG4gICAgICAgICAgICBpZiAocGhhc2UgPT09ICckYXBwbHknIHx8IHBoYXNlID09PSAnJGRpZ2VzdCcpIHtcbiAgICAgICAgICAgICAgICBpZiAoZm4gJiYgKHR5cGVvZihmbikgPT09ICdmdW5jdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRhcHBseShmbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLiRvbigndHJpZ2dlck5ldHdvcmtEcmF3Jywgc3RhcnRMb2FkKTtcblxuICAgICAgICAkc2NvcGUuJG9uKCd2aWV3Q2hhbmdlJywgZnVuY3Rpb24gKHZpZXdPYmopIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZpZXdPYmopO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgZHJhd05ldHdvcmsgPSBmdW5jdGlvbiAoZW50aXR5QXJyYXksIGNvbm5lY3Rpb25BcnJheSkge1xuICAgICAgICAgICAgJHNjb3BlLmlzTG9hZGluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICB2YXIgc3ZnID0gZDMuc2VsZWN0KCcjbmV0d29yaycpO1xuICAgICAgICAgICAgc3ZnLnNlbGVjdEFsbChcIipcIikucmVtb3ZlKCk7XG4gICAgICAgICAgICB2YXIgYm91bmRzID0gc3ZnLm5vZGUoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSBib3VuZHMuaGVpZ2h0O1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gYm91bmRzLndpZHRoO1xuICAgICAgICAgICAgdmFyIG9mZnNldFNjYWxlID0gNjtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0Tm9kZVNpemUgPSA3O1xuICAgICAgICAgICAgdmFyIG9mZnNldHMgPSB7XG4gICAgICAgICAgICAgICAgJ0luZGl2aWR1YWwnOiB7ICd4JzogMSwgJ3knOiAxIH0sXG4gICAgICAgICAgICAgICAgJ0Zvci1Qcm9maXQnOiB7ICd4JzogMSwgJ3knOiAtMSB9LFxuICAgICAgICAgICAgICAgICdOb24tUHJvZml0JzogeyAneCc6IC0xLCAneSc6IDEgfSxcbiAgICAgICAgICAgICAgICAnR292ZXJubWVudCc6IHsgJ3gnOiAtMSwgJ3knOiAtMSB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGxvd2VyQm91bmRSYWRpdXMgPSAxMDtcbiAgICAgICAgICAgIHZhciB1cHBlckJvdW5kUmFkaXVzID0gNTA7XG4gICAgICAgICAgICB2YXIgbWF4RW1wbG95ZWVzID0gZDMubWF4KGVudGl0eUFycmF5LCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoZWwuZW1wbG95ZWVzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIG1heEZvbGxvd2VycyA9IGQzLm1heChlbnRpdHlBcnJheSwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KGVsLmZvbGxvd2Vycyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBzY2FsZSA9IHtcbiAgICAgICAgICAgICAgICAnZW1wbG95ZWVzJzogZDMuc2NhbGUuc3FydCgpLmRvbWFpbihbMTAsIG1heEVtcGxveWVlc10pXG4gICAgICAgICAgICAgICAgICAgIC5yYW5nZShbbG93ZXJCb3VuZFJhZGl1cywgdXBwZXJCb3VuZFJhZGl1c10pLFxuICAgICAgICAgICAgICAgICdmb2xsb3dlcnMnOiBkMy5zY2FsZS5zcXJ0KCkuZG9tYWluKFsxMCwgbWF4Rm9sbG93ZXJzXSlcbiAgICAgICAgICAgICAgICAgICAgLnJhbmdlKFtsb3dlckJvdW5kUmFkaXVzLCB1cHBlckJvdW5kUmFkaXVzXSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgbGlua3MgPSB7fTtcbiAgICAgICAgICAgIHZhciBmb3JjZSA9IGQzLmxheW91dC5mb3JjZSgpXG4gICAgICAgICAgICAgICAgLnNpemUoW3dpZHRoLCBoZWlnaHRdKVxuICAgICAgICAgICAgICAgIC5ub2RlcyhlbnRpdHlBcnJheSlcbiAgICAgICAgICAgICAgICAubGlua3MoXy5mbGF0dGVuKF8udmFsdWVzKGNvbm5lY3Rpb25BcnJheSkpKVxuICAgICAgICAgICAgICAgIC5jaGFyZ2UoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuZW1wbG95ZWVzID8gLTIgKiBzY2FsZS5lbXBsb3llZXMoZC5lbXBsb3llZXMpIDogLTIwO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmxpbmtTdHJlbmd0aCgwKVxuICAgICAgICAgICAgICAgIC5saW5rRGlzdGFuY2UoNTApO1xuXG4gICAgICAgICAgICBfLmZvckVhY2goY29ubmVjdGlvbkFycmF5LCBmdW5jdGlvbiAoY29ubmVjdGlvbnMsIHR5cGUpIHtcbiAgICAgICAgICAgICAgICBsaW5rc1t0eXBlXSA9IHN2Zy5zZWxlY3RBbGwoJy5saW5rIC4nICsgdHlwZSArICctbGluaycpXG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKGNvbm5lY3Rpb25zKVxuICAgICAgICAgICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ2xpbmUnKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF1dGlscy5pc0RlZmluZWQoZC5zb3VyY2UpIHx8ICF1dGlscy5pc0RlZmluZWQoZC50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkLnR5cGUgPSB0eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdsaW5rICcgKyB0eXBlICsgJy1saW5rICcgKyBkLnNvdXJjZS50eXBlICsgJy1saW5rICcgKyBkLnRhcmdldC50eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAnLWxpbmsnO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgbm9kZSA9IHN2Zy5zZWxlY3RBbGwoJy5ub2RlJylcbiAgICAgICAgICAgICAgICAuZGF0YShlbnRpdHlBcnJheSlcbiAgICAgICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnbm9kZSAnICsgZC50eXBlICsgJy1ub2RlJztcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYWxsKGZvcmNlLmRyYWcpO1xuXG4gICAgICAgICAgICBub2RlLmFwcGVuZCgnY2lyY2xlJylcbiAgICAgICAgICAgICAgICAuYXR0cigncicsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmVtcGxveWVlcyA/IHNjYWxlWydlbXBsb3llZXMnXShkLmVtcGxveWVlcykgOiBkZWZhdWx0Tm9kZVNpemU7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG5vZGUuYXBwZW5kKCd0ZXh0JylcbiAgICAgICAgICAgICAgICAudGV4dChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5uaWNrbmFtZSA/IGQubmlja25hbWUgOiBkLm5hbWU7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYXR0cignZHgnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoLTAuMDY1ICogdGhpcy5nZXRDb21wdXRlZFRleHRMZW5ndGgoKSAvIDIpICsgJ2VtJztcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5hdHRyKCdkeScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgwLjA4ICogdGhpcy5wYXJlbnROb2RlLmdldEJCb3goKS5oZWlnaHQgLyAyICsgMC41KSArICdlbSc7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZvcmNlLm9uKCd0aWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBDbHVzdGVyIGluIGZvdXIgY29ybmVycyBiYXNlZCBvbiBvZmZzZXQuXG4gICAgICAgICAgICAgICAgdmFyIGsgPSBvZmZzZXRTY2FsZSAqIGUuYWxwaGE7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZS5hbHBoYSlcbiAgICAgICAgICAgICAgICBfLmZvckVhY2goZW50aXR5QXJyYXksIGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVudGl0eS54ICYmIG9mZnNldHNbZW50aXR5LnR5cGVdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHkueCArPSBvZmZzZXRzW2VudGl0eS50eXBlXS54ICogaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eS55ICs9IG9mZnNldHNbZW50aXR5LnR5cGVdLnkgKiBrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5LnggPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KHVwcGVyQm91bmRSYWRpdXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKHdpZHRoIC0gdXBwZXJCb3VuZFJhZGl1cywgZW50aXR5LngpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eS55ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heCh1cHBlckJvdW5kUmFkaXVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1pbihoZWlnaHQgLSB1cHBlckJvdW5kUmFkaXVzLCBlbnRpdHkueSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBfLmZvckVhY2gobGlua3MsIGZ1bmN0aW9uIChsaW5rKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MScsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuc291cmNlLng7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kxJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5zb3VyY2UueTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDInLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnRhcmdldC54O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5MicsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQudGFyZ2V0Lnk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBub2RlLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBkLnggKyAnLCcgKyBkLnkgKyAnKSc7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBzcGVlZEFuaW1hdGUgPSBmdW5jdGlvbiAodGlja3MpIHtcbiAgICAgICAgICAgICAgICAvLyBTcGVlZCB1cCB0aGUgaW5pdGlhbCBhbmltYXRpb24uXG4gICAgICAgICAgICAgICAgLy8gU2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2MTg5MTEwXG4gICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aWNrczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JjZS50aWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvcmNlLmFscGhhKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVuZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICghJHNjb3BlLm1vYmlsZSkge1xuICAgICAgICAgICAgICAgIHNwZWVkQW5pbWF0ZSg3KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvcmNlLnN0YXJ0KCk7XG5cbiAgICAgICAgICAgIC8vIEhhc2ggbGlua2VkIG5laWdoYm9ycyBmb3IgZWFzeSBob3ZlcmluZyBlZmZlY3RzLlxuICAgICAgICAgICAgLy8gU2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzg3ODAyNzdcbiAgICAgICAgICAgIHZhciBsaW5rZWRCeUluZGV4ID0ge307XG4gICAgICAgICAgICBfLmZvckVhY2gobGlua3MsIGZ1bmN0aW9uIChsKSB7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGxbMF0sIGZ1bmN0aW9uIChjb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSBjb25uZWN0aW9uLl9fZGF0YV9fLnNvdXJjZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGNvbm5lY3Rpb24uX19kYXRhX18udGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICBsaW5rZWRCeUluZGV4W3NvdXJjZS5pbmRleCArICcsJyArIHRhcmdldC5pbmRleF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBsaW5rZWRCeUluZGV4W3RhcmdldC5pbmRleCArICcsJyArIHNvdXJjZS5pbmRleF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBuZWlnaGJvcmluZyA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpbmtlZEJ5SW5kZXhbYS5pbmRleCArICcsJyArIGIuaW5kZXhdIHx8IGEuaW5kZXggPT09IGIuaW5kZXg7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgZm9jdXNuZWlnaGJvcnMgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgLy8gQXBwbHkgJ3VuZm9jdXNlZCcgY2xhc3MgdG8gYWxsIG5vbi1uZWlnaGJvcnMuXG4gICAgICAgICAgICAgICAgLy8gQXBwbHkgJ2ZvY3VzZWQnIGNsYXNzIHRvIGFsbCBuZWlnaGJvcnMuXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogU2VlIGlmIGl0IGNhbiBiZSBkb25lIHdpdGgganVzdCBvbmUgY2xhc3MgYW5kIDpub3QoLmZvY3VzZWQpIENTUyBzZWxlY3RvcnMuXG4gICAgICAgICAgICAgICAgbm9kZVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmVpZ2hib3JpbmcoZW50aXR5LCBuKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIW5laWdoYm9yaW5nKGVudGl0eSwgbik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGxpbmtzLCBmdW5jdGlvbiAobGluaykge1xuICAgICAgICAgICAgICAgICAgICBsaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVudGl0eS5pbmRleCA9PT0gby5zb3VyY2UuaW5kZXggfHwgZW50aXR5LmluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID09PSBvLnRhcmdldC5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShlbnRpdHkuaW5kZXggPT09IG8uc291cmNlLmluZGV4IHx8IGVudGl0eS5pbmRleFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID09PSBvLnRhcmdldC5pbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBmb2N1cyA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmN1cnJlbnRFbnRpdHkgIT09IGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2V0RW50aXR5KGVudGl0eSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgICAgICBmb2N1c25laWdoYm9ycyhlbnRpdHkpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIHVuZm9jdXMgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgLy92YXIgdHJhbnNpdGlvbmRlbGF5ID0gNzU7XG4gICAgICAgICAgICAgICAgbm9kZVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChsaW5rcywgZnVuY3Rpb24gKGxpbmspIHtcbiAgICAgICAgICAgICAgICAgICAgbGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZW50aXR5LmZpeGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgLy8gUmVzdGFydCBkMyBhbmltYXRpb25zLlxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yY2UucmVzdW1lKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vVE9ETzogU2hvdyBnZW5lcmljIGRldGFpbHMgYW5kIG5vdCBpbmRpdmlkdWFsIGVudGl0eSBkZXRhaWxzP1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBob3ZlclRpbWVyO1xuICAgICAgICAgICAgdmFyIGhvdmVyID0gZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ICYmICEkc2NvcGUuZWRpdGluZyAmJiAhJHNjb3BlLmN1cnJlbnRMb2NhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBob3ZlclRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb2N1cyhlbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbnRlcmFjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIHVuaG92ZXIgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgJiYgISRzY29wZS5jdXJyZW50TG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdW5mb2N1cyhlbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaG92ZXJUaW1lcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgZm9jdXNMb2NhdGlvbiA9IGZ1bmN0aW9uIChsb2NhdGlvbikge1xuICAgICAgICAgICAgICAgIC8vICBJZiB0aGUgY3VycmVudCBlbnRpdHkgaXMgc2hvd24gYW5kIGl0IGRvZXNuJ3QgbWF0Y2ggdGhlIGNsaWNrZWQgbm9kZSwgdGhlbiBzZXRcbiAgICAgICAgICAgICAgICAvLyB0aGUgbmV3IG5vZGUgdG8gY2xpY2tlZC5cbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG5cbiAgICAgICAgICAgICAgICBub2RlLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5uYW1lIGluIGxvY2F0aW9uLmRpY3Q7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShuLm5hbWUgaW4gbG9jYXRpb24uZGljdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGxpbmtzLCBmdW5jdGlvbiAobGluaykge1xuICAgICAgICAgICAgICAgICAgICBsaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChvLnNvdXJjZS5uYW1lIGluIGxvY2F0aW9uLmRpY3QgJiYgby50YXJnZXQubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluIGxvY2F0aW9uLmRpY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmdW5jdGlvbiAobykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhKG8uc291cmNlLm5hbWUgaW4gbG9jYXRpb24uZGljdCkgfHwgIShvLnRhcmdldC5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluIGxvY2F0aW9uLmRpY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgdW5mb2N1c0xvY2F0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIG5vZGVcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBfLmZvckVhY2gobGlua3MsIGZ1bmN0aW9uIChsaW5rKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yY2UucmVzdW1lKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGhpZ2hsaWdodExvY2F0aW9uID0gZnVuY3Rpb24gKGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3dMaWNlbnNlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICB1bmZvY3VzKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uICE9PSBsb2NhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB1bmZvY3VzTG9jYXRpb24oJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIC8vICRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24gPSBsb2NhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgZm9jdXNMb2NhdGlvbihsb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEZJWCBGT1IgTE9DQVRJT04gTk9UIEhJR0hMSUdIVElORyBvbiBzZWFyY2ggZW50ZXI6XG4gICAgICAgICAgICAgICAgZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24gPT09IGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uID0gbG9jYXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICBmb2N1c0xvY2F0aW9uKGxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChkMy5ldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBkMy5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBjbGljayA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd0xpY2Vuc2UgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIGlmICh1dGlscy5pc0RlZmluZWQoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHV0aWxzLmlzRGVmaW5lZCgkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5mb2N1c0xvY2F0aW9uKCRzY29wZS5jbGlja2VkTG9jYXRpb24uZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vICBJZiB0aGUgcHJldmlvdXMgbm9kZSBpcyBlcXVhbCB0byB0aGUgbmV3IG5vZGUsIGRvIG5vdGhpbmcuXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPT09IGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZJWCBGT1IgU0VBUkNIIE5PVCBXT1JLSU5HOiBlbnRpdHkgd2FzIG5vdCBmb2N1c2VkXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhZnRlciBzd2l0Y2hpbmcgdG8gc3RhcnRsb2FkIGZ1bmN0aW9uIGZvciBuZXR3b3JrIGdyYXBoXG4gICAgICAgICAgICAgICAgICAgICAgICBmb2N1cyhlbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gIFVuZm9jdXMgb24gcHJldmlvdXMgbm9kZSBhbmQgZm9jdXMgb24gbmV3IG5vZGUuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5mb2N1cygkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ID0gZW50aXR5O1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXMoZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFN0b3AgZXZlbnQgc28gd2UgZG9uJ3QgZGV0ZWN0IGEgY2xpY2sgb24gdGhlIGJhY2tncm91bmQuXG4gICAgICAgICAgICAgICAgLy8gU2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xLzIyOTQxNzk2XG4gICAgICAgICAgICAgICAgaWYgKGQzLmV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbnRlcmFjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgYmFja2dyb3VuZGNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICh1dGlscy5pc0RlZmluZWQoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHV0aWxzLmlzRGVmaW5lZCgkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5mb2N1cygkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh1dGlscy5pc0RlZmluZWQoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5mb2N1cygkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICAgICAgLy9UT0RPOiBTaG93IGdlbmVyaWMgZGV0YWlscyBhbmQgbm90IGluZGl2aWR1YWwgZW50aXR5IGRldGFpbHMuXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGRibGNsaWNrID0gZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgICAgIGlmICghZW50aXR5LmZpeGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS54ID0gd2lkdGggLyAyO1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHkueSA9IGhlaWdodCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5weCA9IHdpZHRoIC8gMjtcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LnB5ID0gaGVpZ2h0IC8gMjtcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LmZpeGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ID0gZW50aXR5O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHVuZm9jdXMoZW50aXR5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbm9kZS5vbignbW91c2VvdmVyJywgaG92ZXIpO1xuICAgICAgICAgICAgbm9kZS5vbignbW91c2VvdXQnLCB1bmhvdmVyKTtcbiAgICAgICAgICAgIG5vZGUub24oJ2NsaWNrJywgY2xpY2spO1xuICAgICAgICAgICAgbm9kZS5vbignZGJsY2xpY2snLCBkYmxjbGljayk7XG4gICAgICAgICAgICBzdmcub24oJ2NsaWNrJywgYmFja2dyb3VuZGNsaWNrKTtcblxuICAgICAgICAgICAgbm9kZVxuICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd3ZWxsY29ubmVjdGVkJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuaGFzT3duUHJvcGVydHkoJ3dlbGxjb25uZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJHNjb3BlLiRvbignY2hhbmdlU2l6ZUJ5JywgZnVuY3Rpb24gKGV2ZW50LCBzaXplQnkpIHtcbiAgICAgICAgICAgICAgICBzdmcuc2VsZWN0QWxsKCdjaXJjbGUnKVxuICAgICAgICAgICAgICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbigyNTApXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdyJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkW3NpemVCeV0gPyBzY2FsZVtzaXplQnldKGRbc2l6ZUJ5XSkgOiBkZWZhdWx0Tm9kZVNpemU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkc2NvcGUuJG9uKCd0b2dnbGVMaW5rJywgZnVuY3Rpb24gKGV2ZW50LCBsaW5rKSB7XG4gICAgICAgICAgICAgICAgLy8gbGlua3NbbGluay5uYW1lXVxuICAgICAgICAgICAgICAgIC8vIC5jbGFzc2VkKHsndmlzaWJsZSc6IGxpbmsuZW5hYmxlZCwgJ2hpZGRlbic6ICFsaW5rLmVuYWJsZWR9KTtcbiAgICAgICAgICAgICAgICBfLm1hcCgkc2NvcGUuZW50aXR5VHlwZXMsIGZ1bmN0aW9uICh2YWwsIGtleSkge1xuICAgICAgICAgICAgICAgICAgICBzdmdcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJy4nICsga2V5ICsgJy1saW5rJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndmlzaWJsZSc6IGZ1bmN0aW9uIChsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbm5lY3Rpb25UeXBlIGVuYWJsZWQsIGNvbm5lY3Rpb24gc291cmNlIGVudGl0eSB0eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGVuYWJsZWQsIGNvbm5lY3Rpb24gdGFyZ2V0IGVudGl0eSB0eXBlIGlzIGVuYWJsZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhJHNjb3BlLmNvbm5lY3Rpb25UeXBlc1tsLnR5cGVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCAoJHNjb3BlLmVudGl0eVR5cGVzW2wuc291cmNlLnR5cGVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiAkc2NvcGUuZW50aXR5VHlwZXNbbC50YXJnZXQudHlwZV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hpZGRlbic6IGZ1bmN0aW9uIChsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGFueSBvZiBDb25uZWN0aW9uVHlwZSwgc291cmNlIGVudGl0eSB0eXBlLCBvciB0YXJnZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW50aXR5IHR5cGUgYXJlIGRpc2FibGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gISRzY29wZS5jb25uZWN0aW9uVHlwZXNbbC50eXBlXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgKCEkc2NvcGUuZW50aXR5VHlwZXNbbC5zb3VyY2UudHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8ICEkc2NvcGUuZW50aXR5VHlwZXNbbC50YXJnZXQudHlwZV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICRzY29wZS4kb24oJ3RvZ2dsZU5vZGUnLCBmdW5jdGlvbiAoZXZlbnQsIHR5cGUpIHtcbiAgICAgICAgICAgICAgICBzdmdcbiAgICAgICAgICAgICAgICAgICAgLnNlbGVjdEFsbCgnLicgKyB0eXBlLm5hbWUgKyAnLW5vZGUnKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCh7ICd2aXNpYmxlJzogdHlwZS5lbmFibGVkLCAnaGlkZGVuJzogIXR5cGUuZW5hYmxlZCB9KTtcblxuICAgICAgICAgICAgICAgIHN2Z1xuICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCcuJyArIHR5cGUubmFtZSArICctbGluaycpXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd2aXNpYmxlJzogZnVuY3Rpb24gKGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb25uZWN0aW9uVHlwZSBlbmFibGVkLCBjb25uZWN0aW9uIHNvdXJjZSBlbnRpdHkgdHlwZSBpc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVuYWJsZWQsIGNvbm5lY3Rpb24gdGFyZ2V0IGVudGl0eSB0eXBlIGlzIGVuYWJsZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS5jb25uZWN0aW9uVHlwZXNbbC50eXBlXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiAoJHNjb3BlLmVudGl0eVR5cGVzW2wuc291cmNlLnR5cGVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmICRzY29wZS5lbnRpdHlUeXBlc1tsLnRhcmdldC50eXBlXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2hpZGRlbic6IGZ1bmN0aW9uIChsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgYW55IG9mIENvbm5lY3Rpb25UeXBlLCBzb3VyY2UgZW50aXR5IHR5cGUsIG9yIHRhcmdldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVudGl0eSB0eXBlIGFyZSBkaXNhYmxlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gISRzY29wZS5jb25uZWN0aW9uVHlwZXNbbC50eXBlXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCAoISRzY29wZS5lbnRpdHlUeXBlc1tsLnNvdXJjZS50eXBlXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCAhJHNjb3BlLmVudGl0eVR5cGVzW2wudGFyZ2V0LnR5cGVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkc2NvcGUuJG9uKCdzZWxlY3RJdGVtJywgZnVuY3Rpb24gKGV2ZW50LCBpdGVtKSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2xvY2F0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRMb2NhdGlvbigkc2NvcGUuY3VycmVudExvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrKCRzY29wZS5jdXJyZW50RW50aXR5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBzdGFydExvYWQoKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBzdWNjZXNzKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWRFbnRpdGllcyA9ICRmaWx0ZXIoJ2ZpbHRlcicpKCRzY29wZS5lbnRpdGllcyxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVudGl0eS5jb2xsYWJvcmF0aW9ucy5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PSAkc2NvcGUubWluQ29ubmVjdGlvbnM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJlZENvbm5lY3Rpb25zID0ge307XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKF8ua2V5cyhkYXRhLmNvbm5lY3Rpb25zKSwgZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gJHNjb3BlLmNvbm5lY3Rpb25zW3R5cGVdID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkQ29ubmVjdGlvbnNbdHlwZV0gPSBbXTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBfLmZvckVhY2goZGF0YS5jb25uZWN0aW9ucywgZnVuY3Rpb24gKGNvbm5lY3Rpb25zLCB0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIF8uZm9yRWFjaChjb25uZWN0aW9ucywgZnVuY3Rpb24gKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2VOb2RlID0gXy5maW5kKGZpbHRlcmVkRW50aXRpZXMsIHsgJ2lkJzogY29ubmVjdGlvbi5zb3VyY2UgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0Tm9kZSA9IF8uZmluZChmaWx0ZXJlZEVudGl0aWVzLCB7ICdpZCc6IGNvbm5lY3Rpb24udGFyZ2V0IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoIHV0aWxzLmlzRGVmaW5lZChzb3VyY2VOb2RlKSAmJiB1dGlscy5pc0RlZmluZWQodGFyZ2V0Tm9kZSkgKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWRDb25uZWN0aW9uc1t0eXBlXS5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgJ3NvdXJjZSc6IHNvdXJjZU5vZGUsICd0YXJnZXQnOiB0YXJnZXROb2RlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gJHNjb3BlLmNvbm5lY3Rpb25zW3R5cGVdLnB1c2goeydzb3VyY2UnOiBzb3VyY2VOb2RlLCAndGFyZ2V0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRhcmdldE5vZGV9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gT25seSBzaG93IGxhYmVscyBvbiB0b3AgNSBtb3N0IGNvbm5lY3RlZCBlbnRpdGllcyBpbml0aWFsbHkuXG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKF8ua2V5cygkc2NvcGUuZW50aXR5VHlwZXMpLCBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBGaW5kIHRoZSB0b3AgNSBtb3N0LWNvbm5lY3RlZCBlbnRpdGllcy5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvcDUgPSBfLnRha2VSaWdodChfLnNvcnRCeShfLmZpbHRlcigkc2NvcGUuZW50aXRpZXMsIHsgJ3R5cGUnOiB0eXBlIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2NvbGxhYm9yYXRpb25zLmxlbmd0aCcpLCA1KTtcbiAgICAgICAgICAgICAgICAgICAgXy5mb3JFYWNoKHRvcDUsIGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eS53ZWxsY29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBmaWx0ZXJlZEVudGl0aWVzID0gXy5zb3J0QnkoZmlsdGVyZWRFbnRpdGllcywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlLndlbGxjb25uZWN0ZWQpID8gMSA6IDA7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBkcmF3TmV0d29yayhmaWx0ZXJlZEVudGl0aWVzLCBmaWx0ZXJlZENvbm5lY3Rpb25zKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29ubmVjdGlvblNlcnZpY2VcbiAgICAgICAgICAgICAgICAuZ2V0QWxsKClcbiAgICAgICAgICAgICAgICAudGhlbihzdWNjZXNzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIENvbnRyb2xsZXIuJGluamVjdCA9IFtcIiRzY29wZVwiLCBcIiRmaWx0ZXJcIiwgXCJfXCIsIFwiY29ubmVjdGlvblNlcnZpY2VcIiwgXCJjZ1V0aWxTZXJ2aWNlXCJdO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ25ldHdvcmtDdHJsJywgQ29udHJvbGxlcik7XG5cbn0pKGFuZ3VsYXIsIFJUUCk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMTEvMTYuXG4gKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgZGVwZW5kZW5jaWVzID0gW1xuICAgICAgICBkaXJlY3RpdmVcbiAgICBdO1xuXG4gICAgZnVuY3Rpb24gZGlyZWN0aXZlKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJyZXN0cmljdFwiOiBcIkVcIixcbiAgICAgICAgICAgIFwidGVtcGxhdGVVcmxcIjogXCJqcy9uZXR3b3JrL25ldHdvcmsuaHRtbFwiLFxuICAgICAgICAgICAgXCJjb250cm9sbGVyXCI6IFwibmV0d29ya0N0cmxcIlxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiY2l2aWMtZ3JhcGhcIilcbiAgICAgICAgLmRpcmVjdGl2ZShcIm5ldHdvcmtcIiwgZGVwZW5kZW5jaWVzKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjYvMTYuXG4gKi9cbihmdW5jdGlvbihhbmd1bGFyKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnaW5wdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0aWN0OiAnRScsXG4gICAgICAgICAgICByZXF1aXJlOiAnP25nTW9kZWwnLFxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBuZ01vZGVsKSB7XG4gICAgICAgICAgICAgICAgaWYgKCAndHlwZScgaW4gYXR0cnMgJiYgYXR0cnMudHlwZS50b0xvd2VyQ2FzZSgpID09PSAncmFuZ2UnICkge1xuICAgICAgICAgICAgICAgICAgICBuZ01vZGVsLiRwYXJzZXJzLnB1c2gocGFyc2VGbG9hdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pO1xufSkoYW5ndWxhcik7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIGlzRGVmaW5lZChvKSB7XG4gICAgICAgIHJldHVybiAhKHR5cGVvZiBvID09PSBcInVuZGVmaW5lZFwiIHx8IG8gPT09IG51bGwpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzT2JqZWN0KG8pIHtcbiAgICAgICAgcmV0dXJuIGlzRGVmaW5lZChvKSAmJiAhQXJyYXkuaXNBcnJheShvKSAmJiAodHlwZW9mIG8gPT09IFwib2JqZWN0XCIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFByb3BlcnR5RnJvbU9iaihvYmopIHtcbiAgICAgICAgdmFyIGRlZk9iaiA9IGlzRGVmaW5lZChvYmopID8gb2JqIDoge307XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChwcm9wZXJ0eSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBpc0RlZmluZWQoZGVmYXVsdFZhbHVlKSA/IGRlZmF1bHRWYWx1ZSA6IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gaXNEZWZpbmVkKGRlZk9ialtwcm9wZXJ0eV0pXG4gICAgICAgICAgICAgICAgPyBkZWZPYmpbcHJvcGVydHldXG4gICAgICAgICAgICAgICAgOiB2YWx1ZTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb29wQW5kSW5pdChtb2RlbEFycmF5LCBpbml0TW9kZWxGdW5jdGlvbikge1xuICAgICAgICB2YXIgbmV3QXJyYXkgPSBBcnJheS5pc0FycmF5KG1vZGVsQXJyYXkpXG4gICAgICAgICAgICA/IG1vZGVsQXJyYXkuZmlsdGVyKGlzT2JqZWN0KS5tYXAoaW5pdE1vZGVsRnVuY3Rpb24pXG4gICAgICAgICAgICA6IFtdO1xuXG4gICAgICAgIHJldHVybiBuZXdBcnJheS5jb25jYXQoW2luaXRNb2RlbEZ1bmN0aW9uKCldKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBTZXJ2aWNlKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJpc0RlZmluZWRcIjogaXNEZWZpbmVkLFxuICAgICAgICAgICAgXCJpc09iamVjdFwiOiBpc09iamVjdCxcblxuICAgICAgICAgICAgXCJnZXRQcm9wZXJ0eUZyb21PYmpcIjogZ2V0UHJvcGVydHlGcm9tT2JqLFxuICAgICAgICAgICAgXCJsb29wQW5kSW5pdFwiOiBsb29wQW5kSW5pdFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoLnV0aWxcIilcbiAgICAgICAgLmZhY3RvcnkoXCJjZ1V0aWxTZXJ2aWNlXCIsIFNlcnZpY2UpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNy8xMC8xNi5cbiAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBjb250cm9sRGVwZW5kZW5jaWVzID0gW2NvbnRyb2xEaXJlY3RpdmVdO1xuXG4gICAgZnVuY3Rpb24gY29udHJvbERpcmVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnanMvY29udHJvbC9jb250cm9scy5odG1sJyxcbiAgICAgICAgICAgIHJlc3RyaWN0ICAgOiAnRScsXG4gICAgICAgICAgICBzY29wZSAgICAgIDoge1xuICAgICAgICAgICAgICAgIHRvZ2dsZU5ldHdvcmsgOiAnPScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29udHJvbGxlciAgIDogJ2NvbnRyb2xDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBcyA6ICdjb250cm9sJyxcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXIgOiB7XG4gICAgICAgICAgICAgICAgbWluQ29ubmVjdGlvbnMgOiBcIj1cIlxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2NvbnRyb2wnLCBjb250cm9sRGVwZW5kZW5jaWVzKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMS8xNi5cbiAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIGFuYWx5dGljc0N0cmwoJHNjb3BlKSB7XG5cbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29udHJvbGxlcignYW5hbHl0aWNzQ3RybCcsIFsnJHNjb3BlJywgYW5hbHl0aWNzQ3RybF0pO1xufSkoYW5ndWxhcik7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBkZXRhaWxzQ3RybCgkc2NvcGUsIF8pIHtcbiAgICAgICAgJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0ID0ge1xuICAgICAgICAgICAgJ2tleV9wZW9wbGUnOiAzLFxuICAgICAgICAgICAgJ2dyYW50c19naXZlbic6IDMsXG4gICAgICAgICAgICAnZ3JhbnRzX3JlY2VpdmVkJzogMyxcbiAgICAgICAgICAgICdpbnZlc3RtZW50c19tYWRlJzogMyxcbiAgICAgICAgICAgICdpbnZlc3RtZW50c19yZWNlaXZlZCc6IDMsXG4gICAgICAgICAgICAnY29sbGFib3JhdGlvbnMnOiAzLFxuICAgICAgICAgICAgJ2VtcGxveW1lbnRzJzogMyxcbiAgICAgICAgICAgICdyZWxhdGlvbnMnOiAzLFxuICAgICAgICAgICAgJ2RhdGFfZ2l2ZW4nOiAzLFxuICAgICAgICAgICAgJ2RhdGFfcmVjZWl2ZWQnOiAzLFxuICAgICAgICAgICAgJ3JldmVudWVzJzogMyxcbiAgICAgICAgICAgICdleHBlbnNlcyc6IDNcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuaXRlbXNTaG93biA9IF8uY2xvbmUoJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0KTtcblxuICAgICAgICAkc2NvcGUuJG9uKCdlbnRpdHlDaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBSZXNldCBpdGVtcyBzaG93biBpbiBkZXRhaWxzIGxpc3QuXG4gICAgICAgICAgICAkc2NvcGUuaXRlbXNTaG93biA9IF8uY2xvbmUoJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0KTtcbiAgICAgICAgfSk7XG4gICAgICAgICRzY29wZS5zaG93TW9yZSA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAkc2NvcGUuaXRlbXNTaG93blt0eXBlXSA9ICRzY29wZS5jdXJyZW50RW50aXR5W3R5cGVdLmxlbmd0aDtcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLnNob3dMZXNzID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICRzY29wZS5pdGVtc1Nob3duW3R5cGVdID0gJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0W3R5cGVdO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdkZXRhaWxzQ3RybCcsIFsnJHNjb3BlJywgXCJfXCIsIGRldGFpbHNDdHJsXSk7XG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNy8xNi5cbiAqL1xuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIFNlcnZpY2UodXRpbHMpIHtcbiAgICAgICAgZnVuY3Rpb24gTG9jYXRpb24ob2JqKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBnZXRQcm9wZXJ0eSA9IHV0aWxzLmdldFByb3BlcnR5RnJvbU9iaihvYmopO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBidWlsZEZvcm1hdHRlZEFkZHJlc3MoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlZk9iaiA9IHV0aWxzLmlzRGVmaW5lZChvYmopID8gb2JqIDoge307XG4gICAgICAgICAgICAgICAgdmFyIGFkZHJlc3NMaW5lID0gKHV0aWxzLmlzRGVmaW5lZChkZWZPYmouYWRkcmVzc19saW5lKSA/IGRlZk9iai5hZGRyZXNzX2xpbmUgKyAnICcgOiAnJyk7XG4gICAgICAgICAgICAgICAgdmFyIGxvY2FsaXR5ID0gKHV0aWxzLmlzRGVmaW5lZChkZWZPYmoubG9jYWxpdHkpID8gZGVmT2JqLmxvY2FsaXR5ICsgJywgJyA6ICcnKTtcbiAgICAgICAgICAgICAgICB2YXIgY291bnRyeUNvZGUgPSAodXRpbHMuaXNEZWZpbmVkKGRlZk9iai5jb3VudHJ5X2NvZGUpID8gZGVmT2JqLmNvdW50cnlfY29kZSArICcgJyA6ICcnKTtcbiAgICAgICAgICAgICAgICB2YXIgcG9zdGFsQ29kZSA9ICh1dGlscy5pc0RlZmluZWQoZGVmT2JqLnBvc3RhbF9jb2RlKSA/IGRlZk9iai5wb3N0YWxfY29kZSA6ICcnKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiAoYWRkcmVzc0xpbmUgKyBsb2NhbGl0eSArIGNvdW50cnlDb2RlICsgcG9zdGFsQ29kZSkudHJpbSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWxmLmlkID0gZ2V0UHJvcGVydHkoXCJpZFwiKTtcbiAgICAgICAgICAgIHNlbGYuYWRkcmVzc19saW5lID0gZ2V0UHJvcGVydHkoXCJhZGRyZXNzX2xpbmVcIik7XG4gICAgICAgICAgICBzZWxmLmxvY2FsaXR5ID0gZ2V0UHJvcGVydHkoXCJsb2NhbGl0eVwiKTtcbiAgICAgICAgICAgIHNlbGYuZGlzdHJpY3QgPSBnZXRQcm9wZXJ0eShcImRpc3RyaWN0XCIpO1xuICAgICAgICAgICAgc2VsZi5wb3N0YWxfY29kZSA9IGdldFByb3BlcnR5KFwicG9zdGFsX2NvZGVcIik7XG4gICAgICAgICAgICBzZWxmLmNvdW50cnkgPSBnZXRQcm9wZXJ0eShcImNvdW50cnlcIik7XG4gICAgICAgICAgICBzZWxmLmNvdW50cnlfY29kZSA9IGdldFByb3BlcnR5KFwiY291bnRyeV9jb2RlXCIpO1xuICAgICAgICAgICAgc2VsZi5jb29yZGluYXRlcyA9IGdldFByb3BlcnR5KFwiY29vcmRpbmF0ZXNcIik7XG5cbiAgICAgICAgICAgIC8vIFRPRE86IENvbnZlcnQgdGhpcyB0byBhIG1ldGhvZCB0aGF0IGJ1aWxkcyBiYXNlZCBvZmYgb2YgdGhlIGN1cnJlbnQgb2JqZWN0J3MgcHJvcGVydGllcy5cbiAgICAgICAgICAgIC8vIFVubGVzcyB0aGlzIGlzIG5lZWRlZCBmb3IgdGhlIEFQSSBzcGVjaWZpY2FsbHksIHRoZW4gaGF2ZSB0aGlzIGJ1aWx0IGluIGEgc2ltaWxhciBmdW5jdGlvbiBhcyB0aGUgb25lIGluXG4gICAgICAgICAgICAvLyBFbnRpdHlNb2RlbCBmb3IgYnVpbGRpbmcgQVBJIHNwZWNpZmljIG9iamVjdHNcbiAgICAgICAgICAgIHNlbGYuZm9ybWF0dGVkQWRkcmVzcyA9IGJ1aWxkRm9ybWF0dGVkQWRkcmVzcygpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0TG9jYXRpb25Nb2RlbChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTG9jYXRpb24ob2JqKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcImdldExvY2F0aW9uTW9kZWxcIjogZ2V0TG9jYXRpb25Nb2RlbFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIFNlcnZpY2UuJGluamVjdCA9IFtcImNnVXRpbFNlcnZpY2VcIl07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2NpdmljLWdyYXBoLmFwaScpXG4gICAgICAgIC5mYWN0b3J5KCdsb2NhdGlvblNlcnZpY2UnLCBTZXJ2aWNlKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjcvMTYuXG4gKi9cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBnZXRFbnRpdHlUeXBlcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiR292ZXJubWVudFwiOiB0cnVlLFxuICAgICAgICAgICAgXCJGb3ItUHJvZml0XCI6IHRydWUsXG4gICAgICAgICAgICBcIk5vbi1Qcm9maXRcIjogdHJ1ZSxcbiAgICAgICAgICAgIFwiSW5kaXZpZHVhbFwiOiB0cnVlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0SW5mbHVlbmNlVHlwZXMoKSB7XG4gICAgICAgIHJldHVybiBbXCJMb2NhbFwiLCBcIk5hdGlvbmFsXCIsIFwiR2xvYmFsXCJdO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFNlcnZpY2UoYXBpQ2FsbGVyLCBmdW5Db25uU2VydmljZSwgY29ublNlcnZpY2UsIGZpbmFuY2VTZXJ2aWNlLCBsb2NhdGlvblNlcnZpY2UsIGNhdGVnb3J5U2VydmljZSwgdXRpbHMpIHtcblxuICAgICAgICBmdW5jdGlvbiBFbnRpdHkob2JqKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZGVmT2JqID0gdXRpbHMuaXNEZWZpbmVkKG9iaikgPyBvYmogOiB7fTtcbiAgICAgICAgICAgIHZhciBnZXRQcm9wZXJ0eSA9IHV0aWxzLmdldFByb3BlcnR5RnJvbU9iaihvYmopO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZURCTW9kZWwoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRiTW9kZWwgPSBuZXcgRW50aXR5KHNlbGYpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwubG9jYXRpb25zLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwubG9jYXRpb25zLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZ3JhbnRzX3JlY2VpdmVkLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZ3JhbnRzX3JlY2VpdmVkLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZ3JhbnRzX2dpdmVuLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZ3JhbnRzX2dpdmVuLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuaW52ZXN0bWVudHNfcmVjZWl2ZWQucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5pbnZlc3RtZW50c19yZWNlaXZlZC5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmludmVzdG1lbnRzX21hZGUucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5pbnZlc3RtZW50c19tYWRlLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZGF0YV9naXZlbi5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmRhdGFfZ2l2ZW4ucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5kYXRhX3JlY2VpdmVkLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZGF0YV9yZWNlaXZlZC5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmNvbGxhYm9yYXRpb25zLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuY29sbGFib3JhdGlvbnMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5rZXlfcGVvcGxlLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwua2V5X3Blb3BsZS5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmVtcGxveW1lbnRzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZW1wbG95bWVudHMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5yZXZlbnVlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLnJldmVudWVzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZXhwZW5zZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5leHBlbnNlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmNhdGVnb3JpZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5jYXRlZ29yaWVzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZGVzY3JpcHRpb24gPSAnJztcblxuICAgICAgICAgICAgICAgIHJldHVybiBkYk1vZGVsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWxmLmlkID0gZ2V0UHJvcGVydHkoXCJpZFwiKTtcbiAgICAgICAgICAgIHNlbGYubmFtZSA9IGdldFByb3BlcnR5KFwibmFtZVwiKTtcbiAgICAgICAgICAgIHNlbGYuaW5mbHVlbmNlID0gZ2V0UHJvcGVydHkoXCJpbmZsdWVuY2VcIik7XG4gICAgICAgICAgICBzZWxmLnR5cGUgPSBnZXRQcm9wZXJ0eShcInR5cGVcIik7XG4gICAgICAgICAgICBzZWxmLm5pY2tuYW1lID0gZ2V0UHJvcGVydHkoXCJuaWNrbmFtZVwiKTtcbiAgICAgICAgICAgIHNlbGYudXJsID0gZ2V0UHJvcGVydHkoXCJ1cmxcIik7XG4gICAgICAgICAgICBzZWxmLnR3aXR0ZXJfaGFuZGxlID0gZ2V0UHJvcGVydHkoXCJ0d2l0dGVyX2hhbmRsZVwiKTtcbiAgICAgICAgICAgIHNlbGYuZW1wbG95ZWVzID0gZ2V0UHJvcGVydHkoXCJlbXBsb3llZXNcIik7XG5cbiAgICAgICAgICAgIHNlbGYubG9jYXRpb25zID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmxvY2F0aW9ucywgbG9jYXRpb25TZXJ2aWNlLmdldExvY2F0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5ncmFudHNfcmVjZWl2ZWQgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouZ3JhbnRzX3JlY2VpdmVkLCBmdW5Db25uU2VydmljZS5nZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuaW52ZXN0bWVudHNfcmVjZWl2ZWQgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouaW52ZXN0bWVudHNfcmVjZWl2ZWQsIGZ1bkNvbm5TZXJ2aWNlLmdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5ncmFudHNfZ2l2ZW4gPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouZ3JhbnRzX2dpdmVuLCBmdW5Db25uU2VydmljZS5nZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuaW52ZXN0bWVudHNfbWFkZSA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5pbnZlc3RtZW50c19tYWRlLCBmdW5Db25uU2VydmljZS5nZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuZGF0YV9naXZlbiA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5kYXRhX2dpdmVuLCBjb25uU2VydmljZS5nZXRDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5kYXRhX3JlY2VpdmVkID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmRhdGFfcmVjZWl2ZWQsIGNvbm5TZXJ2aWNlLmdldENvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmNvbGxhYm9yYXRpb25zID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmNvbGxhYm9yYXRpb25zLCBjb25uU2VydmljZS5nZXRDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5rZXlfcGVvcGxlID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmtleV9wZW9wbGUsIGNvbm5TZXJ2aWNlLmdldENvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmVtcGxveW1lbnRzID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmVtcGxveW1lbnRzLCBjb25uU2VydmljZS5nZXRDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5yZXZlbnVlcyA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5yZXZlbnVlcywgZmluYW5jZVNlcnZpY2UuZ2V0RmluYW5jZU1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuZXhwZW5zZXMgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouZXhwZW5zZXMsIGZpbmFuY2VTZXJ2aWNlLmdldEZpbmFuY2VNb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmNhdGVnb3JpZXMgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouY2F0ZWdvcmllcywgY2F0ZWdvcnlTZXJ2aWNlLmdldENhdGVnb3J5TW9kZWwpO1xuXG4gICAgICAgICAgICBzZWxmLmdlbmVyYXRlREJNb2RlbCA9IGdlbmVyYXRlREJNb2RlbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEVudGl0eU1vZGVsKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFbnRpdHkob2JqKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEFsbCgpIHtcbiAgICAgICAgICAgIHJldHVybiBhcGlDYWxsZXIuZ2V0KCcvZW50aXRpZXMnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNhdmVFbnRpdHkoZW50aXR5KSB7XG4gICAgICAgICAgICByZXR1cm4gYXBpQ2FsbGVyLnBvc3QoXCIvc2F2ZVwiLCB7IFwiZW50aXR5XCI6IGVudGl0eSB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcImdldEVudGl0eU1vZGVsXCI6IGdldEVudGl0eU1vZGVsLFxuICAgICAgICAgICAgXCJnZXRFbnRpdHlUeXBlc1wiOiBnZXRFbnRpdHlUeXBlcyxcbiAgICAgICAgICAgIFwiZ2V0SW5mbHVlbmNlVHlwZXNcIjogZ2V0SW5mbHVlbmNlVHlwZXMsXG4gICAgICAgICAgICBcImdldEFsbFwiOiBnZXRBbGwsXG4gICAgICAgICAgICBcInNhdmVFbnRpdHlcIjogc2F2ZUVudGl0eVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIFNlcnZpY2UuJGluamVjdCA9IFtcbiAgICAgICAgXCJjZ0FwaUNhbGxlclwiLFxuICAgICAgICBcImZ1bmRpbmdDb25uZWN0aW9uU2VydmljZVwiLFxuICAgICAgICBcImNvbm5lY3Rpb25TZXJ2aWNlXCIsXG4gICAgICAgIFwiZmluYW5jZVNlcnZpY2VcIixcbiAgICAgICAgXCJsb2NhdGlvblNlcnZpY2VcIixcbiAgICAgICAgXCJjYXRlZ29yeVNlcnZpY2VcIixcbiAgICAgICAgXCJjZ1V0aWxTZXJ2aWNlXCJcbiAgICBdO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKFwiY2l2aWMtZ3JhcGguYXBpXCIpXG4gICAgICAgIC5mYWN0b3J5KFwiZW50aXR5U2VydmljZVwiLCBTZXJ2aWNlKTtcblxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgZnVuY3Rpb24gQ29uZmlnKCRodHRwUHJvdmlkZXIpIHtcbiAgICAgICAgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbltcIlgtUmVxdWVzdGVkLVdpdGhcIl0gPSBcIlhNTEh0dHBSZXF1ZXN0XCI7XG4gICAgfVxuXG4gICAgQ29uZmlnLiRpbmplY3QgPSBbXCIkaHR0cFByb3ZpZGVyXCJdO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIikuY29uZmlnKENvbmZpZyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBhcGlVcmwgPSBcImh0dHBzOi8vYXBpLmNpdmljZ3JhcGguaW8vYXBpXCI7XG4gICAgLy92YXIgYXBpVXJsID0gXCIvYXBpXCI7XG5cbiAgICB2YXIgZGVmYXVsdEhlYWRlciA9IHtcbiAgICAgICAgLy8gXCJFdmVudC1OYW1lXCI6IFwiVGVzdC1FdmVudFwiXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIFNlcnZpY2UoJGh0dHAsICRxKSB7XG4gICAgICAgIGZ1bmN0aW9uIGxvZ0FwaUVycm9yKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlJlY2lldmVkIGFuIGVycm9yIGZyb20gQVBJIHdpdGggdGhpcyBtZXNzYWdlOiAlT1wiLCBlcnIuZGF0YSk7XG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KGVycik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1bndyYXBBbmd1bGFySHR0cChyZXNwb25zZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXQodXJsLCBwYXJhbXMpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cFxuICAgICAgICAgICAgICAgIC5nZXQoYXBpVXJsICsgdXJsLCB7IFwicGFyYW1zXCI6IHBhcmFtcywgXCJoZWFkZXJzXCI6IGRlZmF1bHRIZWFkZXIgfSlcbiAgICAgICAgICAgICAgICAudGhlbih1bndyYXBBbmd1bGFySHR0cCwgbG9nQXBpRXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcG9zdCh1cmwsIGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cFxuICAgICAgICAgICAgICAgIC5wb3N0KGFwaVVybCArIHVybCwgZGF0YSwgeyBcImhlYWRlcnNcIjogZGVmYXVsdEhlYWRlciB9KVxuICAgICAgICAgICAgICAgIC50aGVuKHVud3JhcEFuZ3VsYXJIdHRwLCBsb2dBcGlFcnJvcik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJnZXRcIjogZ2V0LFxuICAgICAgICAgICAgXCJwb3N0XCI6IHBvc3RcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBTZXJ2aWNlLiRpbmplY3QgPSBbXCIkaHR0cFwiLCBcIiRxXCJdO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIikuZmFjdG9yeShcImNnQXBpQ2FsbGVyXCIsIFNlcnZpY2UpO1xuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhciwgZDMsIEwpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgZGVwZW5kZW5jaWVzID0gW1xuICAgICAgICAnJHNjb3BlJyxcbiAgICAgICAgJyR0aW1lb3V0JyxcbiAgICAgICAgJ2xlYWZsZXREYXRhJyxcbiAgICAgICAgJ18nLFxuICAgICAgICAnJGZpbHRlcicsXG4gICAgICAgIG1hcEN0cmxcbiAgICBdO1xuXG4gICAgZnVuY3Rpb24gbWFwQ3RybCgkc2NvcGUsICR0aW1lb3V0LCBsZWFmbGV0RGF0YSwgXywgJGZpbHRlcikge1xuXG4gICAgICAgICRzY29wZS5vcHRpb25zID0ge1xuICAgICAgICAgICAgY2VudGVyICA6IHtcbiAgICAgICAgICAgICAgICBsYXQgOiAyMC4wMCxcbiAgICAgICAgICAgICAgICBsbmcgOiAtNDAuMDAsXG4gICAgICAgICAgICAgICAgem9vbTogM1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICAgICAgdGlsZUxheWVyICAgICAgICAgOiAnaHR0cHM6Ly9hcGkudGlsZXMubWFwYm94LmNvbS92NC9tYXBib3gubGlnaHQve3p9L3t4fS97eX0ucG5nP2FjY2Vzc190b2tlbj1way5leUoxSWpvaVpHRjJhV1JzY201MElpd2lZU0k2SWpBME0yUmtOek16WldKbU56RXpOR1l6TVRkaFlURXhZekF5Wm1VNFpURTFJbjAuVE5ZbEZ0YTJWSXRya240TDBaOUJKUScsXG4gICAgICAgICAgICAgICAgdGlsZUxheWVyT3B0aW9ucyAgOiB7XG4gICAgICAgICAgICAgICAgICAgIGRldGVjdFJldGluYTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgcmV1c2VUaWxlcyAgOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgem9vbUNvbnRyb2wgICAgICAgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGlvbkNvbnRyb2w6IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNyZWF0ZVBpZUNoYXJ0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSAgID0gb3B0aW9ucy5kYXRhO1xuICAgICAgICAgICAgICAgIHZhciBwaWUgICAgPSBkMy5sYXlvdXQucGllKCkuc29ydChudWxsKS52YWx1ZShmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC52YWx1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgYXJjICAgID0gZDMuc3ZnLmFyYygpLm91dGVyUmFkaXVzKG9wdGlvbnMucikuaW5uZXJSYWRpdXMob3B0aW9ucy5yIC0gMTApO1xuICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBvcHRpb25zLnIgKyBvcHRpb25zLnN0cm9rZVdpZHRoO1xuICAgICAgICAgICAgICAgIHZhciB3ICAgICAgPSBjZW50ZXIgKiAyO1xuICAgICAgICAgICAgICAgIHZhciBoICAgICAgPSB3O1xuICAgICAgICAgICAgICAgIHZhciBzdmcgICAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoZDMubnMucHJlZml4LnN2ZywgJ3N2ZycpO1xuICAgICAgICAgICAgICAgIHZhciB2aXMgICAgPSBkMy5zZWxlY3Qoc3ZnKVxuICAgICAgICAgICAgICAgICAgICAuZGF0YShkYXRhKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAncGllY2hhcnQnKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLCB3KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgaCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgYXJjcyA9IHZpcy5zZWxlY3RBbGwoJy5hcmMnKVxuICAgICAgICAgICAgICAgICAgICAuZGF0YShwaWUoZGF0YSkpXG4gICAgICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdhcmMnKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgY2VudGVyICsgJywnICsgY2VudGVyICsgJyknKTtcblxuICAgICAgICAgICAgICAgIC8vIHZhciBtYXAgPSBMLm1hcGJveC5tYXAoJ21hcCcsICdleGFtcGxlcy5tYXAtOWlqdWsyNHknLCB7XG4gICAgICAgICAgICAgICAgLy8gICAgIG1pblpvb206IDEsXG4gICAgICAgICAgICAgICAgLy8gICAgIG1heFpvb206IDJcbiAgICAgICAgICAgICAgICAvLyB9KS5zZXRWaWV3KFs0MCwgLTc0LjUwXSwgOSk7XG5cbiAgICAgICAgICAgICAgICBhcmNzLmFwcGVuZCgncGF0aCcpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgYXJjKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuZGF0YS50eXBlICsgJy1hcmMnO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGFyY3MuYXBwZW5kKFwic3ZnOnRleHRcIilcbiAgICAgICAgICAgICAgICAgICAgLnRleHQoZnVuY3Rpb24gKGQsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMuY291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwieFwiLCAtNCAqIG9wdGlvbnMuY291bnQudG9TdHJpbmcoKS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiZHlcIiwgNSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImFyY1RleHRcIik7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93LlhNTFNlcmlhbGl6ZXIgPyAobmV3IHdpbmRvdy5YTUxTZXJpYWxpemVyKCkpLnNlcmlhbGl6ZVRvU3RyaW5nKHN2ZylcbiAgICAgICAgICAgICAgICAgICAgOiBzdmcueG1sID8gc3ZnLnhtbCA6ICcnO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbGVhZmxldERhdGEuZ2V0TWFwKCkudGhlbihmdW5jdGlvbiAobWFwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkRW50aXRpZXMgPSAkc2NvcGUuZW50aXRpZXM7XG5cbiAgICAgICAgICAgICAgICBtYXAuaW52YWxpZGF0ZVNpemUoKTtcblxuICAgICAgICAgICAgICAgIG5ldyBMLkNvbnRyb2wuWm9vbSh7cG9zaXRpb246ICd0b3ByaWdodCd9KS5hZGRUbyhtYXApO1xuICAgICAgICAgICAgICAgIEwuY29udHJvbC5sb2NhdGUoXG4gICAgICAgICAgICAgICAgICAgIHtwb3NpdGlvbjogJ3RvcHJpZ2h0Jywgc2hvd1BvcHVwOiBmYWxzZSwgaWNvbjogJ2ZhIGZhLWxvY2F0aW9uLWFycm93J31cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUbyhtYXApO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gY2x1c3Rlckljb24oY2x1c3Rlcikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRyZW4gICAgICAgPSBjbHVzdGVyLmdldEFsbENoaWxkTWFya2VycygpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG90YWwgICAgICAgICAgPSBjaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjbHVzdGVyTWFya2VycyA9IF8ucGx1Y2soY2hpbGRyZW4sICdvcHRpb25zJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb3VudHMgICAgICAgICA9IF8ubWFwKF8uY291bnRCeShjbHVzdGVyTWFya2VycywgJ3R5cGUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGNvdW50LCB0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyd0eXBlJzogdHlwZSwgJ3ZhbHVlJzogY291bnR9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHIgICAgICAgICAgICAgID0gMjg7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdHJva2VXaWR0aCAgICA9IDE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpY29uRGltICAgICAgICA9IChyICsgc3Ryb2tlV2lkdGgpICogMjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWwgICAgICAgICAgID0gY3JlYXRlUGllQ2hhcnQoXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZGF0YTogY291bnRzLCByOiByLCBzdHJva2VXaWR0aDogc3Ryb2tlV2lkdGgsIGNvdW50OiB0b3RhbH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEwuRGl2SWNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sICAgICA6IGh0bWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdtYXJrZXItY2x1c3RlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZSA6IG5ldyBMLnBvaW50KGljb25EaW0sIGljb25EaW0pXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbWFya2VySWNvbiAgPSB7XG4gICAgICAgICAgICAgICAgICAgICdOb24tUHJvZml0JzogTC5pY29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25VcmwgOiAnaW1nL21hcmtlci1ub25wcm9mLnN2ZycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZTogWzYwLCA2MF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICdGb3ItUHJvZml0JzogTC5pY29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25VcmwgOiAnaW1nL21hcmtlci1wcm9mLnN2ZycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZTogWzYwLCA2MF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICdJbmRpdmlkdWFsJzogTC5pY29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25VcmwgOiAnaW1nL21hcmtlci1pbmQuc3ZnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TaXplOiBbNjAsIDYwXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgJ0dvdmVybm1lbnQnOiBMLmljb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblVybCA6ICdpbWcvbWFya2VyLWdvdi5zdmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblNpemU6IFs2MCwgNjBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHZhciBtYXJrZXJzID0gTC5tYXJrZXJDbHVzdGVyR3JvdXAoe1xuXG4gICAgICAgICAgICAgICAgICAgIHNwaWRlcmZ5T25NYXhab29tOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzaG93Q292ZXJhZ2VPbkhvdmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNyZWF0ZUZ1bmN0aW9uOiBjbHVzdGVySWNvbixcbiAgICAgICAgICAgICAgICAgICAgbWF4Q2x1c3RlclJhZGl1czogMzAsXG4gICAgICAgICAgICAgICAgICAgIHNwaWRlcmZ5RGlzdGFuY2VNdWx0aXBsaWVyOiAxLjNcbiAgICAgICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gb3V0ZXJMb29wKGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBpbm5lckxvb3AobG9jKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV8uZXZlcnkobG9jLmNvb3JkaW5hdGVzKSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvYy5jb29yZGluYXRlc1swXS50b0ZpeGVkKDUpID09PSAnNDAuNzgyMDAnICYmIGxvYy5jb29yZGluYXRlc1sxXS50b0ZpeGVkKDUpID09PSAnLTczLjgzMTcwJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYy5jb29yZGluYXRlc1swXSA9IDQwLjc3MDY1O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYy5jb29yZGluYXRlc1sxXSA9IC03My45NzQwNjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtID0gTC5tYXJrZXIobG9jLmNvb3JkaW5hdGVzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogbWFya2VySWNvbltlbnRpdHkudHlwZV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RpdGxlJzogZW50aXR5Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2VudGl0eV9pZCc6IGVudGl0eS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWVzc2FnZSc6IGVudGl0eS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogZW50aXR5LnR5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Vycy5hZGRMYXllcihtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIF8uZm9yRWFjaChlbnRpdHkubG9jYXRpb25zLCBpbm5lckxvb3ApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiT3JpZ2luYWw6ICVPXCIsICRzY29wZS5lbnRpdGllcyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGaWx0ZXJlZDogJU9cIiwgZmlsdGVyZWRFbnRpdGllcyk7XG5cbiAgICAgICAgICAgICAgICBfLmZvckVhY2goZmlsdGVyZWRFbnRpdGllcywgb3V0ZXJMb29wKTtcbiAgICAgICAgICAgICAgICBtYXAuYWRkTGF5ZXIobWFya2Vycyk7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBvbkxvY2F0aW9uRXJyb3IobGVhZmxldEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobGVhZmxldEVycm9yLm1lc3NhZ2UgKyBcIiAgJU9cIiwgbGVhZmxldEVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBtYXAub24oJ2xvY2F0aW9uZXJyb3InLCBvbkxvY2F0aW9uRXJyb3IpO1xuICAgICAgICAgICAgICAgIC8vIG1hcC5sb2NhdGUoe3NldFZpZXc6IHRydWUsIG1heFpvb206IDExfSk7XG4gICAgICAgICAgICAgICAgbWFya2Vycy5vbignY2xpY2snLCBmdW5jdGlvbiAobWFya2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zZXRFbnRpdHlJRChtYXJrZXIubGF5ZXIub3B0aW9ucy5lbnRpdHlfaWQpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSAkc2NvcGUuY3VycmVudEVudGl0eTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCAgID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5zZXR0aW5nc0VuYWJsZWQgJiYgJHNjb3BlLm1vYmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRvZ2dsZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgbWFwLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCAgID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICRzY29wZS4kb24oJ3NlbGVjdEl0ZW0nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb29yZGluYXRlcyA9ICRzY29wZS5jdXJyZW50RW50aXR5LmxvY2F0aW9ucy5sZW5ndGggPiAwID8gXy5wbHVjayhcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jdXJyZW50RW50aXR5LmxvY2F0aW9ucywgJ2Nvb3JkaW5hdGVzJykgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29vcmRpbmF0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFwLnNldFZpZXcoY29vcmRpbmF0ZXNbMF0sIDExKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbnRlcmFjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG5cbiAgICAgICAgLmNvbnRyb2xsZXIoJ21hcEN0cmwnLCBkZXBlbmRlbmNpZXMpO1xufSkoYW5ndWxhciwgZDMsIEwpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA3LzEwLzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGNvbnRyb2xEZXBzID0gW1xuICAgICAgICAnZW50aXR5U2VydmljZScsXG4gICAgICAgICdjb25uZWN0aW9uU2VydmljZScsXG4gICAgICAgICckcm9vdFNjb3BlJyxcbiAgICAgICAgJ18nLFxuICAgICAgICAnJG1vZGFsJyxcbiAgICAgICAgY29udHJvbEN0cmxcbiAgICBdO1xuXG4gICAgZnVuY3Rpb24gY29udHJvbEN0cmwoZW50aXR5U2VydmljZSwgY29ubmVjdGlvblNlcnZpY2UsICRyb290U2NvcGUsIF8sICRtb2RhbCkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2bS5lbnRpdHlUeXBlcyA9IGVudGl0eVNlcnZpY2UuZ2V0RW50aXR5VHlwZXMoKTtcbiAgICAgICAgdm0uY29ubmVjdGlvblR5cGVzID0gY29ubmVjdGlvblNlcnZpY2UuZ2V0Q29ubmVjdGlvblR5cGVzKCk7XG4gICAgICAgIHZtLnNpemVCeUxpc3QgPSBbXG4gICAgICAgICAgICB7J25hbWUnOiAnRW1wbG95ZWVzJywgJ3ZhbHVlJzogJ2VtcGxveWVlcyd9LFxuICAgICAgICAgICAgeyduYW1lJzogJ1R3aXR0ZXIgRm9sbG93ZXJzJywgJ3ZhbHVlJzogJ2ZvbGxvd2Vycyd9XG4gICAgICAgIF07XG4gICAgICAgIHZtLnNpemVCeSA9ICdlbXBsb3llZXMnO1xuICAgICAgICB2bS5zaG93VmlldyA9IHtcbiAgICAgICAgICAgICdOZXR3b3JrJzogdHJ1ZSxcbiAgICAgICAgICAgICdNYXAnOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICB2bS5zd2l0Y2hWaWV3ID0gc3dpdGNoVmlldztcbiAgICAgICAgdm0uY2hhbmdlVmlldyA9IGZ1bmN0aW9uICh2aWV3KSB7XG4gICAgICAgICAgICBfLmZvckVhY2goXy5rZXlzKHZtLnNob3dWaWV3KSwgZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgICAgICB2bS5zaG93Vmlld1tuYW1lXSA9IHZpZXcgPT09IG5hbWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgndmlld0NoYW5nZScsIHZtLnNob3dWaWV3KTtcbiAgICAgICAgfTtcbiAgICAgICAgdm0uc2hvd0Fib3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJG1vZGFsLm9wZW4oe1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb250cm9sL2Fib3V0Lmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdtb2RhbEN0cmwnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdm0udG9nZ2xlTm9kZSA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3RvZ2dsZU5vZGUnLCB7J25hbWUnOiB0eXBlLCAnZW5hYmxlZCc6IHZtLmVudGl0eVR5cGVzW3R5cGVdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdm0udG9nZ2xlTGluayA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3RvZ2dsZUxpbmsnLCB7J25hbWUnOiB0eXBlLCAnZW5hYmxlZCc6IHZtLmNvbm5lY3Rpb25UeXBlc1t0eXBlXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHZtLmNoYW5nZVNpemVCeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnY2hhbmdlU2l6ZUJ5Jywgdm0uc2l6ZUJ5KTtcbiAgICAgICAgfTtcbiAgICAgICAgZnVuY3Rpb24gc3dpdGNoVmlldygpIHtcbiAgICAgICAgICAgIHZtLmNoYW5nZVZpZXcoIXZtLnRvZ2dsZU5ldHdvcmsgPyAnTWFwJyA6ICdOZXR3b3JrJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2bS5jaGFuZ2VTaXplQnkoKTtcblxuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdjb250cm9sQ3RybCcsIGNvbnRyb2xEZXBzKTtcblxufSkoYW5ndWxhcik7XG4iXX0=
