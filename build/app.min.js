!function(i){"use strict";var c=["ui.bootstrap","leaflet-directive","ngAnimate","templateCache","civic-graph.util","civic-graph.api","civic-graph.network"],a=["civic-graph.util"],r=["civic-graph.util","civic-graph.api"];i.module("civic-graph.util",[]),i.module("civic-graph.api",a),i.module("civic-graph.network",r),i.module("civic-graph",c)}(angular);
!function(t){"use strict";function a(){return{templateUrl:"js/analytic/analytics.html",restrict:"E",scope:{},controller:"analyticsCtrl"}}var c=[a];t.module("civic-graph").directive("analytics",c)}(angular);
!function(e){"use strict";function n(e,n,t,o,i,c,r){var l=this;l.entityTypes=c.getEntityTypes(),l.connectionTypes=r.getConnectionTypes(),l.currentView=o.getCurrentView(),l.sizeBy=i.sizeBy(),l.minConnection=i.minConnection(),l.sizeByList=[{name:"Employees",value:"employees"},{name:"Twitter Followers",value:"followers"}],l.changeMinConnection=function(){i.minConnection(l.minConnection)},l.changeView=function(){o.setCurrentView(l.currentView)},l.showAbout=function(){n.open({animation:!1,templateUrl:"control/about.html",controller:"modalCtrl"})},l.toggleLink=function(n){e.$broadcast("toggleLink",{name:n,enabled:l.connectionTypes[n]})},l.changeSizeBy=function(){i.sizeBy(l.sizeBy)}}function t(){return{templateUrl:"js/control/control.template.html",restrict:"E",scope:{toggleNetwork:"="},controller:n,controllerAs:"control",bindToController:!0}}n.$inject=["$rootScope","$uibModal","_","cgMainService","cgNetworkService","entityService","connectionService"],e.module("civic-graph").directive("control",t)}(angular);
!function(e){"use strict";function t(e,t){function i(e){var i=t.getPropertyFromObj(e);this.id=i("id"),this.name=i("name"),this.enabled=i("enable",!0)}function n(e){return new i(e)}function r(){return e.get("/categories")}return{getCategoryModel:n,getAll:r}}t.$inject=["cgApiCaller","cgUtilService"],e.module("civic-graph.api").factory("categoryService",t)}(angular);
!function(t){"use strict";function n(){return o}function i(t,i){function o(t){var n=i.getPropertyFromObj(t);this.id=n("id"),this.name=n("name"),this.details=n("details"),this.entity=n("entity"),this.entity_id=n("entity_id")}function c(t){return new o(t)}function r(){return t.get(e)}return{getAll:r,getConnectionTypes:n,getConnectionModel:c}}var e="/connections",o={Funding:!0,Data:!0,Employment:!0,Collaboration:!0};i.$inject=["cgApiCaller","cgUtilService"],t.module("civic-graph.api").factory("connectionService",i)}(angular);
!function(i){"use strict";function n(i){function n(n){var t=i.getPropertyFromObj(n);this.id=t("id"),this.year=t("year"),this.amount=t("amount",0)}function t(i){return new n(i)}return{getFinanceModel:t}}n.$inject=["cgUtilService"],i.module("civic-graph.api").factory("financeService",n)}(angular);
!function(n){"use strict";function t(n){function t(t){var i=n.getPropertyFromObj(t);this.id=i("id"),this.year=i("year"),this.amount=i("amount"),this.entity=i("entity","")}function i(n){return new t(n)}return{getFundingConnectionModel:i}}t.$inject=["cgUtilService"],n.module("civic-graph.api").factory("fundingConnectionService",t)}(angular);
!function(t){"use strict";function e(){return{key_people:3,grants_given:3,grants_received:3,investments_made:3,investments_received:3,collaborations:3,employments:3,relations:3,data_given:3,data_received:3,revenues:3,expenses:3}}function n(t,n,i,r){function c(t){n.startEdit(t)}function s(e){t.itemsShown[e]=n.getCurrentEntity()[e].length}function o(e){t.itemsShown[e]=t.itemsShownDefault[e]}function a(n){t.currentEntity=n,t.itemsShown=e()}function u(t){n.setCurrentEntity(i.isObject(t)?t:r.find(n.getEntityList(),{id:t}))}t.isMobile=n.mobileCheck(),t.itemsShownDefault=e(),t.itemsShown=e(),t.currentEntity=n.getCurrentEntity(),t.emitStartEditEvent=c,t.showMore=s,t.showLess=o,t.selectItem=u,t.$on("cg.current-entity.update",function(t,e){a(e)})}function i(){return{restrict:"E",templateUrl:"js/detail/details.template.html",controller:n}}n.$inject=["$scope","cgMainService","cgUtilService","_"],t.module("civic-graph").directive("cgDetailPane",i)}(angular);
!function(i,t){"use strict";function s(i){function s(){var i=t(this);i.css("height","55vh")}function c(){var i=t(this);window.innerHeight/3>parseInt(i.css("height"))?i.css("height","55vh"):i.css("height","30vh")}var e;i.mobile&&(e=t("#details-panel"),e.css("height","30vh"),e.scrollTop(0),e.scroll(s),e.click(c))}function c(){return{restrict:"A",link:s}}i.module("civic-graph").directive("addMobileEvents",[c])}(angular,$);
!function(o){"use strict";function c(o,c){o.closeWindow=function(){c.close()}}o.module("civic-graph").controller("modalCtrl",["$scope","$modalInstance",c])}(angular);
!function(e){"use strict";function t(t,i,n,o,r,s,c,d,a){function u(){t.isEditing=a.isDefined(r.getCurrentEntity()),t.entities=r.getEntityList(),t.editEntity=s.getEntityModel(r.getCurrentEntity()),t.entityTypes=s.getEntityTypes(),t.influenceTypes=s.getInfluenceTypes(),t.categories=[],_?(t.categories=_,L()):c.getAll().then(function(i){_=i.categories,t.categories=e.copy(_),L()})}function l(e){return i.jsonp("https://dev.virtualearth.net/REST/v1/Locations",{params:{query:e,key:"Ai58581yC-Sr7mcFbYTtUkS3ixE7f6ZuJnbFJCVI4hAtW1XoDEeZyidQz2gLCCyD",jsonp:"JSON_CALLBACK",include:"ciso2"}}).then(function(e){if(a.isDefined(e.data.resourceSets)&&e.data.resourceSets.length>0)return e.data.resourceSets[0].resources})}function y(e){if(0===t.editEntity.categories.length)t.editEntity.categories.push(e);else{var i=!1;for(var n in t.editEntity.categories)if(t.editEntity.categories.hasOwnProperty(n)){var o=t.editEntity.categories[n];if(o.id===e.id){i=!0,o.enabled=e.enabled;break}}i||t.editEntity.categories.push(e)}}function f(e,t){l(e.formattedAddress).then(function(i){if(a.isDefined(i[0])){var n=i[0],o=n.address,r=n.point;g(t),e.address_line=a.isDefined(o.addressLine)?o.addressLine:"",e.locality=a.isDefined(o.locality)?o.locality:"",e.district=a.isDefined(o.adminDistrict)?o.adminDistrict:"",e.country=a.isDefined(o.countryRegion)?o.countryRegion:null,e.country_code=a.isDefined(o.countryRegionIso2)?o.countryRegionIso2:"",e.coordinates=a.isDefined(r.coordinates)?r.coordinates:null,e.postal_code=a.isDefined(o.postalCode)?o.postalCode:null}})}function g(e){e&&t.editEntity.locations.push(d.getLocationModel())}function p(){o.some(t.editEntity.key_people,{name:"",id:null})||t.editEntity.key_people.push({name:"",id:null})}function E(e,t){t.entity_id=e.id}function h(e){o.some(e,{entity:""})||e.push({entity:"",amount:null,year:null,id:null})}function v(e,t){t.entity_id=e.id}function m(e){o.some(e,{entity:"",id:null})||e.push({entity:"",id:null,details:null})}function S(e){o.every(e,function(e){return e.amount>0&&e.year>1750})&&e.push({amount:null,year:null,id:null})}function C(){function e(e){t.isSaving=!1,t.$emit("editEntitySuccess",e),D()}function i(){t.isError=!0,n(function(){t.isError=!1},2e3)}t.isSaving=!0,s.saveEntity(t.editEntity.generateDBModel()).then(e,i)}function D(){r.stopEdit()}function L(){var e,i,n,o;for(i in t.categories)if(t.categories.hasOwnProperty(i)){e=t.categories[i];for(n in t.editEntity.categories)t.editEntity.categories.hasOwnProperty(n)&&(o=t.editEntity.categories[n],e.id===o.id&&(e.enabled=o.enabled))}}var _;u(),t.$on("cg.current-entity.update",u),t.addressSearch=l,t.toggleCategory=y,t.setLocation=f,t.addLocation=g,t.addKeyPerson=p,t.setFundingConnection=E,t.addFundingConnection=h,t.setConnection=v,t.addConnection=m,t.addFinance=S,t.save=C,t.cancelEdit=D}function i(){return{restrict:"E",templateUrl:"js/edit-entity/editEntity.template.html",controller:t,scope:{}}}t.$inject=["$scope","$http","$timeout","_","cgMainService","entityService","categoryService","locationService","cgUtilService"],e.module("civic-graph").directive("editEntity",i)}(angular);
!function(o){"use strict";o.module("civic-graph").constant("_",window._).config(["$locationProvider","$compileProvider",function(o,n){o.html5Mode(!0),n.debugInfoEnabled(!0)}]).filter("thousandSuffix",function(){return function(o,n){var t,i=["k","M","G","T","P","E"];return window.isNaN(o)?null:o<1e3?o:(t=Math.floor(Math.log(o)/Math.log(1e3)),(o/Math.pow(1e3,t)).toFixed(n)+i[t-1])}})}(angular);
!function(t){"use strict";function e(t,e,n,s,i,c,o){function r(t){return e(function(e){setTimeout(e,t)})}function a(e){switch(e){case"search":t.settingsEnabled=!1;break;case"settings":t.showsearchMB=!1;break;case"edit":t.settingsEnabled=!1,t.showsearchMB=!1;break;default:t.settingsEnabled=!1,t.showsearchMB=!1}}function l(){a("search"),t.showsearchMB=!t.showsearchMB,t.status.license=!1}function u(){a("settings"),t.settingsEnabled=!t.settingsEnabled}function h(){b.isMobile&&a("edit")}function d(){t.status.isNetworkShown=!t.status.isNetworkShown,t.status.isNetworkShown&&t.$broadcast("triggerNetworkDraw")}function g(e){t.entities=e}function w(e){g(e.nodes),t.$broadcast("triggerNetworkDraw")}var b=this;b.currentEntity=null,b.isMobile=i.mobileCheck(),b.isEdit=i.getIsEdit,t.searchItems=null,t.clickedEntity={entity:null},t.showsearchMB=!1,t.status={isNetworkShown:!0,license:!0,networkLoading:!0},t.settingsEnabled=!b.isMobile,t.showSearch=l,t.toggleSettings=u,t.startEdit=h,t.switchView=d,t.$on("cg.current-entity.update",function(t,e){b.currentEntity=e}),t.$on("editEntitySuccess",w),t.$on("cg.start-edit",h),r(1e3).then(function(){return e.all([c.getAll(),o.getAll()])}).then(function(e){i.setEntityList(e[0].nodes),t.searchItems=e[0].nodes,i.setConnectionObj(e[1].connections),t.$broadcast("cg.data-loaded")})}e.$inject=["$scope","$q","_","cgUtilService","cgMainService","entityService","connectionService"],t.module("civic-graph").controller("homeCtrl",e)}(angular);
!function(t){"use strict";function i(t,i,e,n){function o(){return v}function a(i){e.isEqual(v,i)||(v=i,t.$broadcast("cg.current-entity.update",v))}function r(){var t=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series([46])0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,e=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br([ev])w|bumb|bw-([nu])|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do([cp])o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly([-_])|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-([mpt])|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c([- _agpst])|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac([ -\/])|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja([tv])a|jbro|jemu|jigs|kddi|keji|kgt([ \/])|klon|kpt |kwc-|kyo([ck])|le(no|xi)|lg( g|\/([klu])|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t([- ov])|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30([02])|n50([025])|n7(0([01])|10)|ne(([cm])-|on|tf|wf|wg|wt)|nok([6i])|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan([adt])|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c([-01])|47|mc|nd|ri)|sgh-|shar|sie([-m])|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel([im])|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c([- ])|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i,n=i.navigator.userAgent||i.navigator.vendor||i.opera;return t.test(n)||e.test(n.substr(0,4))}function c(){return y}function s(t){Array.isArray(t)&&(y=t)}function m(){return x}function p(t){n.isObject(t)&&(x=t)}function u(){return h}function d(t){n.isString(t)&&f.includes(t)&&(h=t)}function l(){return k}function g(i){k||(k=!0,a(i),t.$broadcast("cg.start-edit"))}function b(){k&&(k=!1,t.$broadcast("cg.stop-edit"))}var w=this,v=null,k=!1,f=["network","map"],h="network",y=[],x={};w.getCurrentEntity=o,w.setCurrentEntity=a,w.mobileCheck=r,w.getEntityList=c,w.setEntityList=s,w.getConnectionObj=m,w.setConnectionObj=p,w.getCurrentView=u,w.setCurrentView=d,w.getIsEdit=l,w.startEdit=g,w.stopEdit=b}i.$inject=["$rootScope","$window","_","cgUtilService"],t.module("civic-graph").service("cgMainService",i)}(angular);
!function(t){"use strict";function e(t,e){return function(i){return i[t]===e}}function i(t,i,n){function r(t){n.setCurrentEntity(t)}function c(){t.categorizedEntities=Object.keys(u).reduce(function(t,i){var r={};return r[i]=n.getEntityList().filter(e("type",i)),Object.assign({},t,r)},{})}var u=i.getEntityTypes();t.categorizedEntities={},t.updateCurrentEntity=r,t.$watch(n.getEntityList,c)}function n(){return{restrict:"E",templateUrl:"js/overview/overview.template.html",controller:i}}i.$inject=["$scope","entityService","cgMainService"],t.module("civic-graph").directive("cgOverviewPane",n)}(angular);
!function(r){"use strict";function n(r){return!("undefined"==typeof r||null===r)}function t(r){return n(r)&&!Array.isArray(r)&&"object"==typeof r}function i(r){return n(r)&&"string"==typeof r}function e(r){var i=t(r)?r:{};return function(r,t){var e=n(t)?t:null;return n(i[r])?i[r]:e}}function u(r,n){var i=Array.isArray(r)?r.filter(t).map(n):[];return i.concat([n()])}function o(){return{isDefined:n,isObject:t,isString:i,getPropertyFromObj:e,loopAndInit:u}}r.module("civic-graph.util").factory("cgUtilService",o)}(angular);
!function(c){"use strict";function n(c){}c.module("civic-graph").controller("analyticsCtrl",["$scope",n])}(angular);
!function(t){"use strict";function e(t){t.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}e.$inject=["$httpProvider"],t.module("civic-graph.api").config(e)}(angular);
!function(t){"use strict";function r(t,r){function a(t){return console.error("Recieved an error from API with this message: %O",t.data),r.reject(t)}function i(t){return t.data}function c(r,c){return t.get(e+r,{params:c,headers:n}).then(i,a)}function o(r,c){return t.post(e+r,c,{headers:n}).then(i,a)}return{get:c,post:o}}var e="https://api.civicgraph.io/api",n={};r.$inject=["$http","$q"],t.module("civic-graph.api").factory("cgApiCaller",r)}(angular);
!function(t,e,o){"use strict";function r(t,r,n,i){function a(){t.options={center:{lat:20,lng:-40,zoom:3},defaults:{tileLayer:"https://api.tiles.mapbox.com/v4/mapbox.light/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZGF2aWRscm50IiwiYSI6IjA0M2RkNzMzZWJmNzEzNGYzMTdhYTExYzAyZmU4ZTE1In0.TNYlFta2VItrkn4L0Z9BJQ",tileLayerOptions:{detectRetina:!0,reuseTiles:!1},zoomControl:!1,attributionControl:!1}},n.getMap().then(s)}function c(t){var o=t.data,r=e.layout.pie().sort(null).value(function(t){return t.value}),n=e.svg.arc().outerRadius(t.r).innerRadius(t.r-10),i=t.r+t.strokeWidth,a=2*i,c=a,s=document.createElementNS(e.ns.prefix.svg,"svg"),l=e.select(s).data(o).attr("class","piechart").attr("width",a).attr("height",c),d=l.selectAll(".arc").data(r(o)).enter().append("g").attr("class","arc").attr("transform","translate("+i+","+i+")");return d.append("path").attr("d",n).attr("class",function(t){return t.data.type+"-arc"}),d.append("svg:text").text(function(e,o){if(0===o)return t.count}).attr("x",-4*t.count.toString().length).attr("dy",5).attr("class","arcText"),window.XMLSerializer?(new window.XMLSerializer).serializeToString(s):s.xml?s.xml:""}function s(t){function e(t){var e=t.getAllChildMarkers(),n=e.length,i=r.pluck(e,"options"),a=r.map(r.countBy(i,"type"),function(t,e){return{type:e,value:t}}),s=28,l=1,d=2*(s+l),u=c({data:a,r:s,strokeWidth:l,count:n});return new o.DivIcon({html:u,className:"marker-cluster",iconSize:new o.point(d,d)})}function n(t){function e(e){if(r.every(e.coordinates)){"40.78200"===e.coordinates[0].toFixed(5)&&"-73.83170"===e.coordinates[1].toFixed(5)&&(e.coordinates[0]=40.77065,e.coordinates[1]=-73.97406);var n=o.marker(e.coordinates,{icon:l[t.type],title:t.name,entity_id:t.id,message:t.name,type:t.type});d.addLayer(n)}}r.forEach(t.locations,e)}function a(t){console.error(t.message+"  %O",t)}var s=i.getEntityList();t.invalidateSize(),new o.Control.Zoom({position:"topright"}).addTo(t),new o.Control.Locate({position:"topright",showPopup:!1,icon:"fa fa-location-arrow"}).addTo(t);var l={"Non-Profit":o.icon({iconUrl:"img/marker-nonprof.svg",iconSize:[60,60]}),"For-Profit":o.icon({iconUrl:"img/marker-prof.svg",iconSize:[60,60]}),Individual:o.icon({iconUrl:"img/marker-ind.svg",iconSize:[60,60]}),Government:o.icon({iconUrl:"img/marker-gov.svg",iconSize:[60,60]})},d=o.markerClusterGroup({spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,iconCreateFunction:e,maxClusterRadius:30,spiderfyDistanceMultiplier:1.3});r.forEach(s,n),t.addLayer(d),t.on("locationerror",a)}a(),t.$on("cg.data-loaded",a)}function n(){return{restrict:"E",templateUrl:"js/component/map/map.template.html",controller:r}}r.$inject=["$scope","_","leafletData","cgMainService"],t.module("civic-graph").directive("cgMap",n)}(angular,d3,L);
!function(e){"use strict";function i(e){function i(i){function t(){var t=e.isDefined(i)?i:{},o=e.isDefined(t.address_line)?t.address_line+" ":"",c=e.isDefined(t.locality)?t.locality+", ":"",n=e.isDefined(t.country_code)?t.country_code+" ":"",r=e.isDefined(t.postal_code)?t.postal_code:"";return(o+c+n+r).trim()}var o=this,c=e.getPropertyFromObj(i);o.id=c("id"),o.address_line=c("address_line"),o.locality=c("locality"),o.district=c("district"),o.postal_code=c("postal_code"),o.country=c("country"),o.country_code=c("country_code"),o.coordinates=c("coordinates"),o.formattedAddress=t()}function t(e){return new i(e)}return{getLocationModel:t}}i.$inject=["cgUtilService"],e.module("civic-graph.api").factory("locationService",i)}(angular);
!function(e){"use strict";function n(){return["Local","National","Global"]}function o(e,o,i,p,r,a,c){function l(e){function n(){var e=new l(t);return e.locations.pop(),e.locations.pop(),e.grants_received.pop(),e.grants_received.pop(),e.grants_given.pop(),e.grants_given.pop(),e.investments_received.pop(),e.investments_received.pop(),e.investments_made.pop(),e.investments_made.pop(),e.data_given.pop(),e.data_given.pop(),e.data_received.pop(),e.data_received.pop(),e.collaborations.pop(),e.collaborations.pop(),e.key_people.pop(),e.key_people.pop(),e.employments.pop(),e.employments.pop(),e.revenues.pop(),e.revenues.pop(),e.expenses.pop(),e.expenses.pop(),e.categories.pop(),e.categories.pop(),e.description="",e}var t=this,d=c.isDefined(e)?e:{},s=c.getPropertyFromObj(e);t.id=s("id"),t.name=s("name"),t.influence=s("influence"),t.type=s("type"),t.nickname=s("nickname"),t.url=s("url"),t.twitter_handle=s("twitter_handle"),t.employees=s("employees"),t.locations=c.loopAndInit(d.locations,r.getLocationModel),t.grants_received=c.loopAndInit(d.grants_received,o.getFundingConnectionModel),t.investments_received=c.loopAndInit(d.investments_received,o.getFundingConnectionModel),t.grants_given=c.loopAndInit(d.grants_given,o.getFundingConnectionModel),t.investments_made=c.loopAndInit(d.investments_made,o.getFundingConnectionModel),t.data_given=c.loopAndInit(d.data_given,i.getConnectionModel),t.data_received=c.loopAndInit(d.data_received,i.getConnectionModel),t.collaborations=c.loopAndInit(d.collaborations,i.getConnectionModel),t.key_people=c.loopAndInit(d.key_people,i.getConnectionModel),t.employments=c.loopAndInit(d.employments,i.getConnectionModel),t.revenues=c.loopAndInit(d.revenues,p.getFinanceModel),t.expenses=c.loopAndInit(d.expenses,p.getFinanceModel),t.categories=c.loopAndInit(d.categories,a.getCategoryModel),t.generateDBModel=n}function d(e){return new l(e)}function s(){return e.get("/entities")}function g(n){return e.post("/save",{entity:n})}return{getEntityModel:d,getInfluenceTypes:n,getAll:s,saveEntity:g,getEntityTypes:function(){return t}}}var t={Government:!0,"For-Profit":!0,"Non-Profit":!0,Individual:!0};o.$inject=["cgApiCaller","fundingConnectionService","connectionService","financeService","locationService","categoryService","cgUtilService"],e.module("civic-graph.api").factory("entityService",o)}(angular);
!function(n,t){"use strict";function e(n){return a(n.select("svg"))&&n.select("svg").remove(),n.append("svg").attr("height","100vh").attr("width","100%")}function r(n){return function(e){function r(t){var e=t.value[n];return isFinite(e)&&a(e)?e:0}var i=10,u=50,c=t.max(e,r);return function(e){return t.scale.sqrt().domain([5,c]).range([i,u])(e.value[n])}}}function i(n){function t(n){return n/3}function e(n){return n-t(n)}return{Individual:{x:t(n.width),y:t(n.height)},"For-Profit":{x:t(n.width),y:e(n.height)},"Non-Profit":{x:e(n.width),y:t(n.height)},Government:{x:e(n.width),y:e(n.height)}}}function u(n){return function(t){var e=r(n)(t);return function(t){return a(t.value[n])?-2*e(t):-20}}}function c(n){return function(){return n()}}function o(o,f,s,d,l){function g(g,h){function v(){function t(){return n.element(o)[0].innerWidth}function e(){return n.element(o)[0].innerHeight}return[e(),t()]}function p(){g.$apply()}function y(n,t){n!==t&&(E&&E(),m(l.getGraphData()))}function x(n){a(n)&&(k=r(n),w=u(n))}function m(n){function r(t){n.nodeList.map(function(n){return n.value}).filter(function(n){return f.isEqual(t,n)}).forEach(o)}function u(n,e){return t.layout.force().size([e.width,e.height]).nodes(n.nodeList).links(n.linkList).linkStrength(0).linkDistance(50).charge(D).start()}function c(n){function e(n){return a(n)?m(n):i}function r(n){function e(){s.isDefined(t.event)&&(t.event.preventDefault(),t.event.stopPropagation()),n.selected=!0,l(n)}g.$apply(e)}var i=10,u=y.selectAll(".node").data(n).enter().append("g").attr("class",function(n){return"node "+n.value.type+"-node"}).on("click",r).call(C.drag);return u.append("circle").attr("r",e),u.append("text").text(function(n){return a(n.value.nickname)?n.value.nickname:n.value.name}).attr("dx",function(){return-.065*this.getComputedTextLength()/2+"em"}).attr("dy",function(){return.08*this.parentNode.getBBox().height/2+.5+"em"}),u}function o(t){function e(n){return function(t){return n.source===t.index||n.target===t.index}}function r(t){return function(r){return t.index===r.index||s.isDefined(n.linkList.find(e(t)))}}G.classed("focused",r(t)).classed("unfocused",f.negate(r(t))),B.classed("focused",e(t)).classed("unfocused",f.negate(e))}function l(n){if(s.isDefined(d.getCurrentEntity())){if(f.isEqual(d.getCurrentEntity(),n.value))return;v(n)}d.setCurrentEntity(n.value),o(n)}function h(){s.isDefined(d.getCurrentEntity())&&(v(),d.setCurrentEntity(null))}function v(t){G.classed("focused",!1).classed("unfocused",!1),B.classed("focused",!1).classed("unfocused",!1),s.isDefined(t)?t.fixed=!1:n.nodeList.forEach(function(n){n.fixed=!1}),s.isDefined(d.getCurrentEntity())&&C.resume()}function p(n){function t(n){function t(n){return e[n.target.id]||e[n.target.id]&&null!==e[n.target.id].find(function(t){return t===n.source.id})}var e=n.map(function(n){return{source:n.source.id,target:n.target.id}}).reduce(function(n,t){return n[t.source]?n[t.source].push(t.target):n[t.source]=[t.target],n},{});return n.filter(t)}var e=t(n);return y.selectAll(".link").data(e).enter().append("line").attr("class",function(n){return"link "+n.type+"-link "})}var y=e(L);if(y.on("click",function(){g.$apply(h)}),0===n.nodeList.length)return void console.debug("Node list is empty, not drawing a graph");var x=y.node().getBoundingClientRect(),m=k(n.nodeList),D=w(n.nodeList),$=i(x),C=u(n,x),B=p(n.linkList),G=c(n.nodeList);C.on("tick",function(t){function e(){var e=.1*t.alpha;B.attr("x1",function(n){return n.source.x}).attr("y1",function(n){return n.source.y}).attr("x2",function(n){return n.target.x}).attr("y2",function(n){return n.target.y}),n.nodeList.forEach(function(n){n.y+=($[n.value.type].y-n.y)*e,n.x+=($[n.value.type].x-n.x)*e}),G.attr("transform",function(n){return"translate("+n.x+","+n.y+")"})}g.$apply(e)}),E=g.$on("cg.current-entity.update",function(n,t){r(t)})}var k,w,E,L=t.select(h[0]);o.onresize=f.debounce(p),g.$watch(c(l.sizeBy),x),g.$watchGroup([c(l.minConnection),c(l.sizeBy)],y),g.$watchCollection(f.debounce(v),y),g.$watch(l.getGraphData,y,!0)}return a=s.isDefined,{restrict:"E",link:g}}var a;o.$inject=["$window","_","cgUtilService","cgMainService","cgNetworkService"],n.module("civic-graph.network").directive("cgNetworkGraph",o)}(angular,d3);
!function(n){"use strict";function t(n){return function(t){return n[t.type]}}function e(n){return function(t){return t.value.collaborations.length>=n}}function r(n){return{id:n.id,value:n}}function i(n){return function(t){return t.id===n}}function c(n,c,u,o){function f(t){return n.isString(t)&&(y=t),y}function a(n){return isFinite(n)&&n>=0&&(d=n),d}function s(n){return Array.isArray(n)?n.filter(t(u.getEntityTypes())).map(r).filter(e(d)):[]}function g(e,r){function c(t){var c=r[t];return c.map(function(n){var r=e.findIndex(i(n.source)),c=e.findIndex(i(n.target));return{source:r,target:c,type:t}}).filter(n.isDefined)}function u(t){function e(e){return n.isDefined(t[e])&&t[e]!==-1}return e("source")&&e("target")}function f(n,t){return n.concat(t)}return Object.keys(r).map(c).reduce(f,[]).filter(u).filter(t(o.getConnectionTypes()))}function l(){var n=c.getConnectionObj(),t=s(c.getEntityList());return{nodeList:t,linkList:g(t,n)}}var v=this,d=5,y="employees";v.getGraphData=l,v.sizeBy=f,v.minConnection=a}c.$inject=["cgUtilService","cgMainService","entityService","connectionService"],n.module("civic-graph.network").service("cgNetworkService",c)}(angular);
!function(e){"use strict";function t(e,t){var n=this;n.isLoading=!0,n.getCurrentView=t.getCurrentView,n.isMobile=t.mobileCheck(),e.$on("cg.data-loaded",function(){n.isLoading=!1})}function n(){return{restrict:"E",templateUrl:"js/layout/centralColumn/centralColumn.template.html",controller:t,controllerAs:"central",scope:{}}}t.$inject=["$scope","cgMainService"],e.module("civic-graph").directive("centralColumn",n)}(angular,d3);
!function(e){"use strict";e.module("civic-graph").directive("input",function(){return{restict:"E",require:"?ngModel",link:function(e,r,t,i){"type"in t&&"range"===t.type.toLowerCase()&&i.$parsers.push(parseFloat)}}})}(angular);
!function(t){"use strict";function i(t,i){function e(){i.startEdit()}var r=this;r.isMobile=i.mobileCheck(),r.emitStartCreateEntity=e,r.isEdit=i.getIsEdit,t.$on("cg.current-entity.update",function(t,i){r.currentEntity=i})}function e(){return{restrict:"E",templateUrl:"js/layout/rightColumn/rightColumn.template.html",controller:i,controllerAs:"right",scope:{}}}i.$inject=["$scope","cgMainService"],t.module("civic-graph").directive("rightColumn",e)}(angular,d3);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNpdmljLWdyYXBoLm1vZHVsZS5qcyIsImFuYWx5dGljL2FuYWx5dGljc0RpcmVjdGl2ZS5qcyIsImNvbnRyb2wvY29udHJvbC5qcyIsImFwaS9jYXRlZ29yeS5zZXJ2aWNlLmpzIiwiYXBpL2Nvbm5lY3Rpb24uc2VydmljZS5qcyIsImFwaS9maW5hbmNlLnNlcnZpY2UuanMiLCJhcGkvZnVuZGluZ0Nvbm5lY3Rpb24uc2VydmljZS5qcyIsImRldGFpbC9kZXRhaWxzLmpzIiwiZXh0cmEvYWRkTW9iaWxlRXZlbnRzLmpzIiwiZXh0cmEvbW9kYWxDdHJsLmpzIiwiZWRpdC1lbnRpdHkvZWRpdEVudGl0eS5qcyIsIm1haW4vYXBwLmpzIiwibWFpbi9ob21lQ3RybC5qcyIsIm1haW4vc2VydmljZS5qcyIsIm92ZXJ2aWV3L292ZXJ2aWV3LmpzIiwidXRpbC9zZXJ2aWNlLmpzIiwiYW5hbHl0aWMvY29udHJvbGxlci9hbmFseXRpY3NDdHJsLmpzIiwiYXBpL2FwaUNhbGxlci9jb25maWcuanMiLCJhcGkvYXBpQ2FsbGVyL3NlcnZpY2UuanMiLCJjb21wb25lbnQvbWFwL21hcC5qcyIsImFwaS9lbnRpdHkvbG9jYXRpb24uc2VydmljZS5qcyIsImFwaS9lbnRpdHkvc2VydmljZS5qcyIsImNvbXBvbmVudC9uZXR3b3JrL2dyYXBoLmpzIiwiY29tcG9uZW50L25ldHdvcmsvbmV0d29yay5zZXJ2aWNlLmpzIiwibGF5b3V0L2NlbnRyYWxDb2x1bW4vaW5kZXguanMiLCJsYXlvdXQvY2VudHJhbENvbHVtbi9zbGlkZXJCYXIuanMiLCJsYXlvdXQvcmlnaHRDb2x1bW4vaW5kZXguanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1haW5EZXBlbmRlbmN5TGlzdCIsImFwaURlcGVuZGVuY3lMaXN0IiwibmV0d29ya0RlcGVuZGVuY3lMaXN0IiwibW9kdWxlIiwiYW5hbHl0aWNzRGlyZWN0aXZlIiwidGVtcGxhdGVVcmwiLCJyZXN0cmljdCIsInNjb3BlIiwiY29udHJvbGxlciIsImFuYWx5dGljc0RlcGVuZGVuY2llcyIsImRpcmVjdGl2ZSIsIkNvbnRyb2xsZXIiLCIkcm9vdFNjb3BlIiwiJG1vZGFsIiwiXyIsImNnU2VydmljZSIsIm5ldHdvcmtTZXJ2aWNlIiwiZW50aXR5U2VydmljZSIsImNvbm5lY3Rpb25TZXJ2aWNlIiwidm0iLCJ0aGlzIiwiZW50aXR5VHlwZXMiLCJnZXRFbnRpdHlUeXBlcyIsImNvbm5lY3Rpb25UeXBlcyIsImdldENvbm5lY3Rpb25UeXBlcyIsImN1cnJlbnRWaWV3IiwiZ2V0Q3VycmVudFZpZXciLCJzaXplQnkiLCJtaW5Db25uZWN0aW9uIiwic2l6ZUJ5TGlzdCIsIm5hbWUiLCJ2YWx1ZSIsImNoYW5nZU1pbkNvbm5lY3Rpb24iLCJjaGFuZ2VWaWV3Iiwic2V0Q3VycmVudFZpZXciLCJzaG93QWJvdXQiLCJvcGVuIiwiYW5pbWF0aW9uIiwidG9nZ2xlTGluayIsInR5cGUiLCIkYnJvYWRjYXN0IiwiZW5hYmxlZCIsImNoYW5nZVNpemVCeSIsIkRpcmVjdGl2ZSIsInRvZ2dsZU5ldHdvcmsiLCJjb250cm9sbGVyQXMiLCJiaW5kVG9Db250cm9sbGVyIiwiJGluamVjdCIsIlNlcnZpY2UiLCJhcGlDYWxsZXIiLCJ1dGlscyIsIkNhdGVnb3J5Iiwib2JqIiwiZ2V0UHJvcGVydHkiLCJnZXRQcm9wZXJ0eUZyb21PYmoiLCJpZCIsImdldENhdGVnb3J5TW9kZWwiLCJnZXRBbGwiLCJnZXQiLCJmYWN0b3J5IiwiY29ubmVjdGlvblR5cGVPYmoiLCJDb25uZWN0aW9uIiwiZGV0YWlscyIsImVudGl0eSIsImVudGl0eV9pZCIsImdldENvbm5lY3Rpb25Nb2RlbCIsInVybCIsIkZ1bmRpbmciLCJEYXRhIiwiRW1wbG95bWVudCIsIkNvbGxhYm9yYXRpb24iLCJGaW5hbmNlIiwieWVhciIsImFtb3VudCIsImdldEZpbmFuY2VNb2RlbCIsIkZ1bmRpbmdDb25uZWN0aW9uIiwiZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbCIsImdldEl0ZW1zU2hvd25EZWZhdWx0Iiwia2V5X3Blb3BsZSIsImdyYW50c19naXZlbiIsImdyYW50c19yZWNlaXZlZCIsImludmVzdG1lbnRzX21hZGUiLCJpbnZlc3RtZW50c19yZWNlaXZlZCIsImNvbGxhYm9yYXRpb25zIiwiZW1wbG95bWVudHMiLCJyZWxhdGlvbnMiLCJkYXRhX2dpdmVuIiwiZGF0YV9yZWNlaXZlZCIsInJldmVudWVzIiwiZXhwZW5zZXMiLCIkc2NvcGUiLCJlbWl0U3RhcnRFZGl0RXZlbnQiLCJzdGFydEVkaXQiLCJzaG93TW9yZSIsIml0ZW1zU2hvd24iLCJnZXRDdXJyZW50RW50aXR5IiwibGVuZ3RoIiwic2hvd0xlc3MiLCJpdGVtc1Nob3duRGVmYXVsdCIsIm9uQ3VycmVudEVudGl0eVVwZGF0ZSIsImN1cnJlbnRFbnRpdHkiLCJzZWxlY3RJdGVtIiwiaXRlbSIsInNldEN1cnJlbnRFbnRpdHkiLCJpc09iamVjdCIsImZpbmQiLCJnZXRFbnRpdHlMaXN0IiwiaXNNb2JpbGUiLCJtb2JpbGVDaGVjayIsIiRvbiIsImV2ZW50IiwiYXJncyIsIiQiLCJsaW5rRnVuY3Rpb24iLCJzY3JvbGwiLCJzZWxmIiwiY3NzIiwiY2xpY2siLCJ3aW5kb3ciLCJpbm5lckhlaWdodCIsInBhcnNlSW50IiwiZGV0YWlsc1BhbmVsIiwibW9iaWxlIiwic2Nyb2xsVG9wIiwiYWRkTW9iaWxlRXZlbnRzIiwibGluayIsIm1vZGFsQ3RybCIsIiRtb2RhbEluc3RhbmNlIiwiY2xvc2VXaW5kb3ciLCJjbG9zZSIsIiRodHRwIiwiJHRpbWVvdXQiLCJjYXRlZ29yeVNlcnZpY2UiLCJsb2NhdGlvblNlcnZpY2UiLCJhY3RpdmF0ZSIsImlzRWRpdGluZyIsImlzRGVmaW5lZCIsImVudGl0aWVzIiwiZWRpdEVudGl0eSIsImdldEVudGl0eU1vZGVsIiwiaW5mbHVlbmNlVHlwZXMiLCJnZXRJbmZsdWVuY2VUeXBlcyIsImNhdGVnb3JpZXMiLCJjYXRlZ29yeUJhY2t1cCIsImluaXRDYXRlZ29yeUFycmF5IiwidGhlbiIsImRhdGEiLCJjb3B5IiwiYWRkcmVzc1NlYXJjaCIsInNlYXJjaCIsImpzb25wIiwicGFyYW1zIiwicXVlcnkiLCJrZXkiLCJpbmNsdWRlIiwicmVzcG9uc2UiLCJyZXNvdXJjZVNldHMiLCJyZXNvdXJjZXMiLCJ0b2dnbGVDYXRlZ29yeSIsImNhdGVnb3J5IiwicHVzaCIsImZvdW5kIiwiY2F0ZWdvcnlJbmRleCIsImhhc093blByb3BlcnR5IiwiZW50aXR5Q2F0ZWdvcnkiLCJzZXRMb2NhdGlvbiIsImxvY2F0aW9uIiwiaXNMYXN0IiwiZm9ybWF0dGVkQWRkcmVzcyIsImFwaUNhbGxSZXN1bHQiLCJyZXN1bHQiLCJhZGRyZXNzIiwicG9pbnQiLCJhZGRMb2NhdGlvbiIsImFkZHJlc3NfbGluZSIsImFkZHJlc3NMaW5lIiwibG9jYWxpdHkiLCJkaXN0cmljdCIsImFkbWluRGlzdHJpY3QiLCJjb3VudHJ5IiwiY291bnRyeVJlZ2lvbiIsImNvdW50cnlfY29kZSIsImNvdW50cnlSZWdpb25Jc28yIiwiY29vcmRpbmF0ZXMiLCJwb3N0YWxfY29kZSIsInBvc3RhbENvZGUiLCJsb2NhdGlvbnMiLCJnZXRMb2NhdGlvbk1vZGVsIiwiYWRkS2V5UGVyc29uIiwic29tZSIsInNldEZ1bmRpbmdDb25uZWN0aW9uIiwiZnVuZGluZyIsImFkZEZ1bmRpbmdDb25uZWN0aW9uIiwic2V0Q29ubmVjdGlvbiIsImNvbm5lY3Rpb24iLCJhZGRDb25uZWN0aW9uIiwiY29ubmVjdGlvbnMiLCJhZGRGaW5hbmNlIiwicmVjb3JkcyIsImV2ZXJ5IiwiciIsInNhdmUiLCJzdWNjZXNzIiwiaXNTYXZpbmciLCIkZW1pdCIsImNhbmNlbEVkaXQiLCJlcnJvciIsImlzRXJyb3IiLCJzYXZlRW50aXR5IiwiZ2VuZXJhdGVEQk1vZGVsIiwic3RvcEVkaXQiLCJlbnRpdHlDYXRlZ29yeUluZGV4IiwiY29uc3RhbnQiLCJjb25maWciLCIkbG9jYXRpb25Qcm92aWRlciIsIiRjb21waWxlUHJvdmlkZXIiLCJodG1sNU1vZGUiLCJkZWJ1Z0luZm9FbmFibGVkIiwiZmlsdGVyIiwiaW5wdXQiLCJkZWNpbWFscyIsImV4cCIsInN1ZmZpeGVzIiwiaXNOYU4iLCJNYXRoIiwiZmxvb3IiLCJsb2ciLCJwb3ciLCJ0b0ZpeGVkIiwiJHEiLCJ3YWl0IiwibXMiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImh5ZGVQYXJ0aWFscyIsImV4Y2VwdCIsInNldHRpbmdzRW5hYmxlZCIsInNob3dzZWFyY2hNQiIsInNob3dTZWFyY2giLCJzdGF0dXMiLCJsaWNlbnNlIiwidG9nZ2xlU2V0dGluZ3MiLCJzd2l0Y2hWaWV3IiwiaXNOZXR3b3JrU2hvd24iLCJzZXRFbnRpdGllcyIsIm9uRWRpdEVudGl0eVN1Y2Nlc3MiLCJub2RlcyIsImlzRWRpdCIsImdldElzRWRpdCIsInNlYXJjaEl0ZW1zIiwiY2xpY2tlZEVudGl0eSIsIm5ldHdvcmtMb2FkaW5nIiwiYWxsIiwicmVzcG9uc2VMaXN0Iiwic2V0RW50aXR5TGlzdCIsInNldENvbm5lY3Rpb25PYmoiLCIkd2luZG93IiwiX2N1cnJlbnRFbnRpdHkiLCJvIiwiaXNFcXVhbCIsInJlZ2V4IiwicmVnZXgyIiwiYWdlbnRDaGVjayIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInZlbmRvciIsIm9wZXJhIiwidGVzdCIsInN1YnN0ciIsImVudGl0eUxpc3QiLCJhIiwiQXJyYXkiLCJpc0FycmF5IiwiZ2V0Q29ubmVjdGlvbk9iaiIsImNvbm5lY3Rpb25PYmoiLCJzIiwiaXNTdHJpbmciLCJhdmFpbGFibGVWaWV3cyIsImluY2x1ZGVzIiwic2VydmljZSIsImZpbHRlckJ5UHJvcGVydHkiLCJlIiwidXBkYXRlQ3VycmVudEVudGl0eSIsIndhdGNoRW50aXR5TGlzdCIsImNhdGVnb3JpemVkRW50aXRpZXMiLCJPYmplY3QiLCJrZXlzIiwicmVkdWNlIiwiYXNzaWduIiwiJHdhdGNoIiwiZGVmT2JqIiwicHJvcGVydHkiLCJkZWZhdWx0VmFsdWUiLCJsb29wQW5kSW5pdCIsIm1vZGVsQXJyYXkiLCJpbml0TW9kZWxGdW5jdGlvbiIsIm5ld0FycmF5IiwibWFwIiwiY29uY2F0IiwiYW5hbHl0aWNzQ3RybCIsIkNvbmZpZyIsIiRodHRwUHJvdmlkZXIiLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iLCJsb2dBcGlFcnJvciIsImVyciIsImNvbnNvbGUiLCJyZWplY3QiLCJ1bndyYXBBbmd1bGFySHR0cCIsImFwaVVybCIsImRlZmF1bHRIZWFkZXIiLCJwb3N0IiwiZDMiLCJMIiwibGVhZmxldERhdGEiLCJvcHRpb25zIiwiY2VudGVyIiwibGF0IiwibG5nIiwiem9vbSIsInRpbGVMYXllciIsInRpbGVMYXllck9wdGlvbnMiLCJkZXRlY3RSZXRpbmEiLCJyZXVzZVRpbGVzIiwiem9vbUNvbnRyb2wiLCJhdHRyaWJ1dGlvbkNvbnRyb2wiLCJnZXRNYXAiLCJoYW5kbGVMZWFmbGV0RGF0YSIsImNyZWF0ZVBpZUNoYXJ0IiwicGllIiwibGF5b3V0Iiwic29ydCIsImQiLCJhcmMiLCJzdmciLCJvdXRlclJhZGl1cyIsImlubmVyUmFkaXVzIiwic3Ryb2tlV2lkdGgiLCJ3IiwiaCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwibnMiLCJwcmVmaXgiLCJ2aXMiLCJzZWxlY3QiLCJhdHRyIiwiYXJjcyIsInNlbGVjdEFsbCIsImVudGVyIiwiYXBwZW5kIiwidGV4dCIsImkiLCJjb3VudCIsInRvU3RyaW5nIiwiWE1MU2VyaWFsaXplciIsInNlcmlhbGl6ZVRvU3RyaW5nIiwieG1sIiwiY2x1c3Rlckljb24iLCJjbHVzdGVyIiwiY2hpbGRyZW4iLCJnZXRBbGxDaGlsZE1hcmtlcnMiLCJ0b3RhbCIsImNsdXN0ZXJNYXJrZXJzIiwicGx1Y2siLCJjb3VudHMiLCJjb3VudEJ5IiwiaWNvbkRpbSIsImh0bWwiLCJEaXZJY29uIiwiY2xhc3NOYW1lIiwiaWNvblNpemUiLCJvdXRlckxvb3AiLCJpbm5lckxvb3AiLCJsb2MiLCJtIiwibWFya2VyIiwiaWNvbiIsIm1hcmtlckljb24iLCJ0aXRsZSIsIm1lc3NhZ2UiLCJtYXJrZXJzIiwiYWRkTGF5ZXIiLCJmb3JFYWNoIiwib25Mb2NhdGlvbkVycm9yIiwibGVhZmxldEVycm9yIiwiZmlsdGVyZWRFbnRpdGllcyIsImludmFsaWRhdGVTaXplIiwiQ29udHJvbCIsIlpvb20iLCJwb3NpdGlvbiIsImFkZFRvIiwiTG9jYXRlIiwic2hvd1BvcHVwIiwiTm9uLVByb2ZpdCIsImljb25VcmwiLCJGb3ItUHJvZml0IiwiSW5kaXZpZHVhbCIsIkdvdmVybm1lbnQiLCJtYXJrZXJDbHVzdGVyR3JvdXAiLCJzcGlkZXJmeU9uTWF4Wm9vbSIsInNob3dDb3ZlcmFnZU9uSG92ZXIiLCJpY29uQ3JlYXRlRnVuY3Rpb24iLCJtYXhDbHVzdGVyUmFkaXVzIiwic3BpZGVyZnlEaXN0YW5jZU11bHRpcGxpZXIiLCJvbiIsIkxvY2F0aW9uIiwiYnVpbGRGb3JtYXR0ZWRBZGRyZXNzIiwiY291bnRyeUNvZGUiLCJ0cmltIiwiZnVuQ29ublNlcnZpY2UiLCJjb25uU2VydmljZSIsImZpbmFuY2VTZXJ2aWNlIiwiRW50aXR5IiwiZGJNb2RlbCIsInBvcCIsImRlc2NyaXB0aW9uIiwiaW5mbHVlbmNlIiwibmlja25hbWUiLCJ0d2l0dGVyX2hhbmRsZSIsImVtcGxveWVlcyIsImVudGl0eVR5cGVPYmoiLCJidWlsZFN2Z0VsZW1lbnQiLCJyb290IiwicmVtb3ZlIiwiYnVpbGRTY2FsZUZ1bmN0aW9uIiwibm9kZUxpc3QiLCJnZXRHcmFwaE9ialBhcmFtIiwidiIsImlzRmluaXRlIiwibG93ZXJCb3VuZFJhZGl1cyIsInVwcGVyQm91bmRSYWRpdXMiLCJtYXhOb2RlUGFyYW0iLCJtYXgiLCJzY2FsZSIsInNxcnQiLCJkb21haW4iLCJyYW5nZSIsImJ1aWxkRm9jaSIsImJvdW5kcyIsInBlcmNlbnRhZ2VPZkJvdW5kYXJ5IiwicmVzdE9mQm91bmRhcnkiLCJ4Iiwid2lkdGgiLCJ5IiwiaGVpZ2h0IiwiYnVpbGRDaGFyZ2VGdW5jdGlvbiIsInNpemVCeVNjYWxlIiwid3JhcEZuIiwiZm4iLCJMaW5rRm4iLCJlbGVtZW50IiwiZ2V0V2luZG93Qm94IiwiZ2V0V2luZG93V2lkdGgiLCJpbm5lcldpZHRoIiwiZ2V0V2luZG93SGVpZ2h0Iiwib25XaW5kb3dSZXNpemUiLCIkYXBwbHkiLCJydW4iLCJuIiwiY3VycmVudEVudGl0eUxpc3RlbmVyIiwicmVuZGVyIiwiZ2V0R3JhcGhEYXRhIiwid2F0Y2hTaXplQnkiLCJuZXdTaXplQnkiLCJfYnVpbGRTY2FsZUZ1bmN0aW9uIiwiX2J1aWxkQ2hhcmdlRnVuY3Rpb24iLCJncmFwaERhdGEiLCJmb2N1c0N1cnJlbnRFbnRpdHkiLCJmb2N1c05laWdoYm9ycyIsImJ1aWxkRm9yY2VMYXlvdXQiLCJmb3JjZSIsInNpemUiLCJsaW5rcyIsImxpbmtMaXN0IiwibGlua1N0cmVuZ3RoIiwibGlua0Rpc3RhbmNlIiwiY2hhcmdlIiwiY2FsY3VsYXRlQ2hhcmdlIiwic3RhcnQiLCJkcmF3Tm9kZSIsImdldENpcmNsZVJhZGl1cyIsImRlZmF1bHRTaXplIiwiY2xpY2tFdmVudCIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwic2VsZWN0ZWQiLCJmb2N1cyIsIm5vZGUiLCJjYWxsIiwiZm9yY2VMYXlvdXQiLCJkcmFnIiwiZ2V0Q29tcHV0ZWRUZXh0TGVuZ3RoIiwicGFyZW50Tm9kZSIsImdldEJCb3giLCJjb21wYXJlQWdhaW5zdENvbm5lY3Rpb25PYmoiLCJjIiwic291cmNlIiwiaW5kZXgiLCJ0YXJnZXQiLCJuZWlnaGJvcmluZyIsImIiLCJjbGFzc2VkIiwibmVnYXRlIiwidW5Gb2N1cyIsImJhY2tncm91bmRDbGljayIsImZpeGVkIiwicmVzdW1lIiwiZHJhd0Nvbm5lY3Rpb24iLCJjb25uZWN0aW9uTGlzdCIsInJlbW92ZVJlZHVuZGFudENvbm5lY3Rpb25Gcm9tTGlzdCIsImNvbkxpc3QiLCJmaW5kSW5JZE1hcCIsImlkTWFwIiwic0lkIiwiZmlsdGVyZWQiLCJsIiwiZGVidWciLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJmb2NpIiwidGljayIsImsiLCJhbHBoYSIsIm9ucmVzaXplIiwiZGVib3VuY2UiLCIkd2F0Y2hHcm91cCIsIiR3YXRjaENvbGxlY3Rpb24iLCJmaWx0ZXJCeUJvb2xlYW5NYXAiLCJmaWx0ZXJCeU1pbkNvbm5lY3Rpb24iLCJjb252ZXJ0RW50aXR5VG9HcmFwaE5vZGUiLCJmaW5kQnlJZCIsImZpbmRUaGlzIiwiX3NpemVCeSIsIl9taW5Db25uZWN0aW9uIiwiZ2V0R3JhcGhOb2RlTGlzdCIsImdldEdyYXBoTGlua0xpc3QiLCJidWlsZENvbm5lY3Rpb25PYmplY3QiLCJzb3VyY2VOb2RlIiwiZmluZEluZGV4IiwidGFyZ2V0Tm9kZSIsImZpbHRlckNvbm5lY3Rpb25XaXRoTWlzc2luZ0VudGl0eSIsImNoZWNrUHJvcGVydHkiLCJwcm9wIiwicmVkdWNlQXJyYXlPZkFycmF5IiwiYXJyIiwiaXNMb2FkaW5nIiwicmVzdGljdCIsInJlcXVpcmUiLCJhdHRycyIsIm5nTW9kZWwiLCJ0b0xvd2VyQ2FzZSIsIiRwYXJzZXJzIiwicGFyc2VGbG9hdCIsImVtaXRTdGFydENyZWF0ZUVudGl0eSJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBVUEsR0FFTixZQUVBLElBQUlDLElBQ0EsZUFDQSxvQkFDQSxZQUNBLGdCQUNBLG1CQUNBLGtCQUNBLHVCQUdBQyxHQUFxQixvQkFFckJDLEdBQ0EsbUJBQ0Esa0JBR0pILEdBQVFJLE9BQU8sdUJBQ2ZKLEVBQVFJLE9BQU8sa0JBQW1CRixHQUNsQ0YsRUFBUUksT0FBTyxzQkFBdUJELEdBQ3RDSCxFQUFRSSxPQUFPLGNBQWVILElBRS9CRDtDQ3JCSCxTQUFXQSxHQUVQLFlBSUEsU0FBU0ssS0FDTCxPQUNJQyxZQUFhLDZCQUNiQyxTQUFhLElBQ2JDLFNBQ0FDLFdBQWUsaUJBUHZCLEdBQUlDLElBQXlCTCxFQVc3QkwsR0FBUUksT0FBTyxlQUNWTyxVQUFVLFlBQWFELElBRTdCVjtDQ25CSCxTQUFXQSxHQUVQLFlBRUEsU0FBU1ksR0FBV0MsRUFBWUMsRUFBUUMsRUFBR0MsRUFBV0MsRUFBZ0JDLEVBQWVDLEdBQ2pGLEdBQUlDLEdBQUtDLElBRVRELEdBQUdFLFlBQWNKLEVBQWNLLGlCQUMvQkgsRUFBR0ksZ0JBQWtCTCxFQUFrQk0scUJBQ3ZDTCxFQUFHTSxZQUFjVixFQUFVVyxpQkFFM0JQLEVBQUdRLE9BQVNYLEVBQWVXLFNBQzNCUixFQUFHUyxjQUFnQlosRUFBZVksZ0JBRWxDVCxFQUFHVSxhQUNHQyxLQUFRLFlBQWFDLE1BQVMsY0FDOUJELEtBQVEsb0JBQXFCQyxNQUFTLGNBRzVDWixFQUFHYSxvQkFBc0IsV0FDckJoQixFQUFlWSxjQUFjVCxFQUFHUyxnQkFHcENULEVBQUdjLFdBQWEsV0FDWmxCLEVBQVVtQixlQUFlZixFQUFHTSxjQUdoQ04sRUFBR2dCLFVBQVksV0FDWHRCLEVBQU91QixNQUNIQyxXQUFXLEVBQ1hoQyxZQUFhLHFCQUNiRyxXQUFZLGVBSXBCVyxFQUFHbUIsV0FBYSxTQUFVQyxHQUN0QjNCLEVBQVc0QixXQUFXLGNBQ2xCVixLQUFRUyxFQUFNRSxRQUFXdEIsRUFBR0ksZ0JBQWdCZ0IsTUFJcERwQixFQUFHdUIsYUFBZSxXQUNkMUIsRUFBZVcsT0FBT1IsRUFBR1EsU0FjakMsUUFBU2dCLEtBQ0wsT0FDSXRDLFlBQWEsbUNBQ2JDLFNBQWEsSUFDYkMsT0FDSXFDLGNBQWdCLEtBRXBCcEMsV0FBZUcsRUFDZmtDLGFBQWUsVUFDZkMsa0JBQW1CLEdBbkIzQm5DLEVBQVdvQyxTQUNQLGFBQ0EsWUFDQSxJQUNBLGdCQUNBLG1CQUNBLGdCQUNBLHFCQWdCSmhELEVBQ0tJLE9BQU8sZUFDUE8sVUFBVSxVQUFXaUMsSUFFM0I1QztDQ3pFSCxTQUFXQSxHQUVQLFlBRUEsU0FBU2lELEdBQVFDLEVBQVdDLEdBRXhCLFFBQVNDLEdBQVNDLEdBQ2QsR0FBSUMsR0FBY0gsRUFBTUksbUJBQW1CRixFQUUzQ2hDLE1BQUttQyxHQUFLRixFQUFZLE1BQ3RCakMsS0FBS1UsS0FBT3VCLEVBQVksUUFDeEJqQyxLQUFLcUIsUUFBVVksRUFBWSxVQUFVLEdBR3pDLFFBQVNHLEdBQWlCSixHQUN0QixNQUFPLElBQUlELEdBQVNDLEdBR3hCLFFBQVNLLEtBQ0wsTUFBT1IsR0FBVVMsSUFBSSxlQUd6QixPQUNJRixpQkFBb0JBLEVBQ3BCQyxPQUFVQSxHQUlsQlQsRUFBUUQsU0FBVyxjQUFlLGlCQUVsQ2hELEVBQ0tJLE9BQU8sbUJBQ1B3RCxRQUFRLGtCQUFtQlgsSUFFakNqRDtDQ25DSCxTQUFXQSxHQUVQLFlBV0EsU0FBU3lCLEtBQ0wsTUFBT29DLEdBR1gsUUFBU1osR0FBUUMsRUFBV0MsR0FFeEIsUUFBU1csR0FBV1QsR0FDaEIsR0FBSUMsR0FBY0gsRUFBTUksbUJBQW1CRixFQUUzQ2hDLE1BQUttQyxHQUFLRixFQUFZLE1BQ3RCakMsS0FBS1UsS0FBT3VCLEVBQVksUUFDeEJqQyxLQUFLMEMsUUFBVVQsRUFBWSxXQUMzQmpDLEtBQUsyQyxPQUFTVixFQUFZLFVBQzFCakMsS0FBSzRDLFVBQVlYLEVBQVksYUFHakMsUUFBU1ksR0FBbUJiLEdBQ3hCLE1BQU8sSUFBSVMsR0FBV1QsR0FHMUIsUUFBU0ssS0FDTCxNQUFPUixHQUFVUyxJQUFJUSxHQUd6QixPQUNJVCxPQUFVQSxFQUNWakMsbUJBQXNCQSxFQUN0QnlDLG1CQUFzQkEsR0FwQzlCLEdBQUlDLEdBQU0sZUFFTk4sR0FDQU8sU0FBVyxFQUNYQyxNQUFRLEVBQ1JDLFlBQWMsRUFDZEMsZUFBaUIsRUFrQ3JCdEIsR0FBUUQsU0FBVyxjQUFlLGlCQUVsQ2hELEVBQ0tJLE9BQU8sbUJBQ1B3RCxRQUFRLG9CQUFxQlgsSUFFbkNqRDtDQ2xESCxTQUFXQSxHQUVQLFlBRUEsU0FBU2lELEdBQVFFLEdBQ2IsUUFBU3FCLEdBQVFuQixHQUNiLEdBQUlDLEdBQWNILEVBQU1JLG1CQUFtQkYsRUFFM0NoQyxNQUFLbUMsR0FBS0YsRUFBWSxNQUN0QmpDLEtBQUtvRCxLQUFPbkIsRUFBWSxRQUN4QmpDLEtBQUtxRCxPQUFTcEIsRUFBWSxTQUFVLEdBR3hDLFFBQVNxQixHQUFnQnRCLEdBQ3JCLE1BQU8sSUFBSW1CLEdBQVFuQixHQUd2QixPQUNJc0IsZ0JBQW1CQSxHQUkzQjFCLEVBQVFELFNBQVcsaUJBRW5CaEQsRUFDS0ksT0FBTyxtQkFDUHdELFFBQVEsaUJBQWtCWCxJQUVoQ2pEO0NDNUJILFNBQVdBLEdBRVAsWUFFQSxTQUFTaUQsR0FBUUUsR0FFYixRQUFTeUIsR0FBa0J2QixHQUN2QixHQUFJQyxHQUFjSCxFQUFNSSxtQkFBbUJGLEVBRTNDaEMsTUFBS21DLEdBQUtGLEVBQVksTUFDdEJqQyxLQUFLb0QsS0FBT25CLEVBQVksUUFDeEJqQyxLQUFLcUQsT0FBU3BCLEVBQVksVUFDMUJqQyxLQUFLMkMsT0FBU1YsRUFBWSxTQUFVLElBR3hDLFFBQVN1QixHQUEwQnhCLEdBQy9CLE1BQU8sSUFBSXVCLEdBQWtCdkIsR0FHakMsT0FDSXdCLDBCQUE2QkEsR0FJckM1QixFQUFRRCxTQUFXLGlCQUVuQmhELEVBQ0tJLE9BQU8sbUJBQ1B3RCxRQUFRLDJCQUE0QlgsSUFFMUNqRDtDQ2pDSCxTQUFXQSxHQUVQLFlBRUEsU0FBUzhFLEtBQ0wsT0FDSUMsV0FBYyxFQUNkQyxhQUFnQixFQUNoQkMsZ0JBQW1CLEVBQ25CQyxpQkFBb0IsRUFDcEJDLHFCQUF3QixFQUN4QkMsZUFBa0IsRUFDbEJDLFlBQWUsRUFDZkMsVUFBYSxFQUNiQyxXQUFjLEVBQ2RDLGNBQWlCLEVBQ2pCQyxTQUFZLEVBQ1pDLFNBQVksR0FJcEIsUUFBUzlFLEdBQVkrRSxFQUFRM0UsRUFBV21DLEVBQU9wQyxHQWEzQyxRQUFTNkUsR0FBb0I1QixHQUN6QmhELEVBQVU2RSxVQUFVN0IsR0FHeEIsUUFBUzhCLEdBQVV0RCxHQUNmbUQsRUFBT0ksV0FBWXZELEdBQVN4QixFQUFVZ0YsbUJBQW9CeEQsR0FBT3lELE9BR3JFLFFBQVNDLEdBQVUxRCxHQUNmbUQsRUFBT0ksV0FBWXZELEdBQVNtRCxFQUFPUSxrQkFBbUIzRCxHQUcxRCxRQUFTNEQsR0FBdUJDLEdBQzVCVixFQUFPVSxjQUFnQkEsRUFFdkJWLEVBQU9JLFdBQWFqQixJQUd4QixRQUFTd0IsR0FBWUMsR0FDakJ2RixFQUFVd0YsaUJBQ05yRCxFQUFNc0QsU0FBU0YsR0FDVEEsRUFDQXhGLEVBQUUyRixLQUFLMUYsRUFBVTJGLGlCQUFtQm5ELEdBQU0rQyxLQWxDeERaLEVBQU9pQixTQUFXNUYsRUFBVTZGLGNBQzVCbEIsRUFBT1Esa0JBQW9CckIsSUFDM0JhLEVBQU9JLFdBQWFqQixJQUNwQmEsRUFBT1UsY0FBZ0JyRixFQUFVZ0YsbUJBRWpDTCxFQUFPQyxtQkFBcUJBLEVBQzVCRCxFQUFPRyxTQUFXQSxFQUNsQkgsRUFBT08sU0FBV0EsRUFDbEJQLEVBQU9XLFdBQWFBLEVBRXBCWCxFQUFPbUIsSUFBSSwyQkFBNEIsU0FBVUMsRUFBT0MsR0FBUVosRUFBc0JZLEtBZ0MxRixRQUFTcEUsS0FDTCxPQUNJckMsU0FBVSxJQUNWRCxZQUFhLGtDQUNiRyxXQUFZRyxHQU5wQkEsRUFBV29DLFNBQVksU0FBVSxnQkFBaUIsZ0JBQWlCLEtBVW5FaEQsRUFDS0ksT0FBTyxlQUNQTyxVQUFVLGVBQWdCaUMsSUFHaEM1QztDQzdFSCxTQUFXQSxFQUFTaUgsR0FFaEIsWUFFQSxTQUFTQyxHQUFhMUcsR0FFbEIsUUFBUzJHLEtBQ0wsR0FBSUMsR0FBT0gsRUFBRTVGLEtBQ2IrRixHQUFLQyxJQUFJLFNBQVUsUUFHdkIsUUFBU0MsS0FDTCxHQUFJRixHQUFPSCxFQUFFNUYsS0FDVGtHLFFBQU9DLFlBQWMsRUFBSUMsU0FBU0wsRUFBS0MsSUFBSSxXQUMzQ0QsRUFBS0MsSUFBSSxTQUFVLFFBRW5CRCxFQUFLQyxJQUFJLFNBQVUsUUFJM0IsR0FBSUssRUFDQWxILEdBQU1tSCxTQUNORCxFQUFlVCxFQUFFLGtCQUNqQlMsRUFBYUwsSUFBSSxTQUFVLFFBQzNCSyxFQUFhRSxVQUFVLEdBQ3ZCRixFQUFhUCxPQUFPQSxHQUNwQk8sRUFBYUosTUFBTUEsSUFJM0IsUUFBU08sS0FDTCxPQUNJdEgsU0FBVSxJQUNWdUgsS0FBTVosR0FJZGxILEVBQVFJLE9BQU8sZUFDVk8sVUFBVSxtQkFBb0JrSCxLQUNwQzdILFFBQVNpSDtDQ3ZDWixTQUFVakgsR0FFTixZQUVBLFNBQVMrSCxHQUFVcEMsRUFBUXFDLEdBQ3ZCckMsRUFBT3NDLFlBQWMsV0FDakJELEVBQWVFLFNBSXZCbEksRUFBUUksT0FBTyxlQUNWSyxXQUFXLGFBQWMsU0FBVSxpQkFBa0JzSCxLQUUzRC9IO0NDYkgsU0FBV0EsR0FFUCxZQUVBLFNBQVNZLEdBQVkrRSxFQUFRd0MsRUFBT0MsRUFBVXJILEVBQUdDLEVBQVdFLEVBQWVtSCxFQUFpQkMsRUFBaUJuRixHQUt6RyxRQUFTb0YsS0FDTDVDLEVBQU82QyxVQUFZckYsRUFBTXNGLFVBQVV6SCxFQUFVZ0Ysb0JBQzdDTCxFQUFPK0MsU0FBVzFILEVBQVUyRixnQkFDNUJoQixFQUFPZ0QsV0FBYXpILEVBQWMwSCxlQUFlNUgsRUFBVWdGLG9CQUMzREwsRUFBT3JFLFlBQWNKLEVBQWNLLGlCQUNuQ29FLEVBQU9rRCxlQUFpQjNILEVBQWM0SCxvQkFDdENuRCxFQUFPb0QsY0FHREMsR0FhRnJELEVBQU9vRCxXQUFhQyxFQUNwQkMsS0FiQVosRUFDSzNFLFNBQ0F3RixLQUFLLFNBQVVDLEdBQ1pILEVBQWlCRyxFQUFLSixXQUd0QnBELEVBQU9vRCxXQUFhL0ksRUFBUW9KLEtBQUtKLEdBRWpDQyxNQXdCaEIsUUFBU0ksR0FBZUMsR0FDcEIsTUFBT25CLEdBQU1vQixNQUFNLGtEQUNmQyxRQUNJQyxNQUFPSCxFQUNQSSxJQUFLLG1FQUNMSCxNQUFTLGdCQUNUSSxRQUFXLFdBR05ULEtBQUssU0FBVVUsR0FDWixHQUFLekcsRUFBTXNGLFVBQVVtQixFQUFTVCxLQUFLVSxlQUFpQkQsRUFBU1QsS0FBS1UsYUFBYTVELE9BQ3pCLEVBQ2xELE1BQU8yRCxHQUFTVCxLQUFLVSxhQUFjLEdBQUlDLFlBSy9ELFFBQVNDLEdBQWdCQyxHQUNyQixHQUE2QyxJQUF4Q3JFLEVBQU9nRCxXQUFXSSxXQUFXOUMsT0FDOUJOLEVBQU9nRCxXQUFXSSxXQUFXa0IsS0FBS0QsT0FFakMsQ0FDRCxHQUFJRSxJQUFRLENBRVosS0FBTSxHQUFJQyxLQUFpQnhFLEdBQU9nRCxXQUFXSSxXQUN6QyxHQUFNcEQsRUFBT2dELFdBQVdJLFdBQVdxQixlQUFlRCxHQUFsRCxDQUdBLEdBQUlFLEdBQWlCMUUsRUFBT2dELFdBQVdJLFdBQVlvQixFQUNuRCxJQUFLRSxFQUFlN0csS0FBT3dHLEVBQVN4RyxHQUFLLENBQ3JDMEcsR0FBUSxFQUNSRyxFQUFlM0gsUUFBVXNILEVBQVN0SCxPQUNsQyxRQUdGd0gsR0FDRnZFLEVBQU9nRCxXQUFXSSxXQUFXa0IsS0FBS0QsSUFLOUMsUUFBU00sR0FBYUMsRUFBVUMsR0FDNUJuQixFQUFja0IsRUFBU0Usa0JBQ2xCdkIsS0FBSyxTQUFVd0IsR0FDWixHQUFNdkgsRUFBTXNGLFVBQVVpQyxFQUFlLElBQXJDLENBR0EsR0FBSUMsR0FBVUQsRUFBZSxHQUN6QkUsRUFBVUQsRUFBT0MsUUFDakJDLEVBQVVGLEVBQU9FLEtBQ3JCQyxHQUFZTixHQUdaRCxFQUFTUSxhQUFlNUgsRUFBTXNGLFVBQVVtQyxFQUFRSSxhQUFlSixFQUFRSSxZQUFjLEdBQ3JGVCxFQUFTVSxTQUFXOUgsRUFBTXNGLFVBQVVtQyxFQUFRSyxVQUFZTCxFQUFRSyxTQUFXLEdBQzNFVixFQUFTVyxTQUNML0gsRUFBTXNGLFVBQVVtQyxFQUFRTyxlQUFpQlAsRUFBUU8sY0FBZ0IsR0FDckVaLEVBQVNhLFFBQ0xqSSxFQUFNc0YsVUFBVW1DLEVBQVFTLGVBQWlCVCxFQUFRUyxjQUFnQixLQUNyRWQsRUFBU2UsYUFDTG5JLEVBQU1zRixVQUFVbUMsRUFBUVcsbUJBQXFCWCxFQUFRVyxrQkFBb0IsR0FDN0VoQixFQUFTaUIsWUFBY3JJLEVBQU1zRixVQUFVb0MsRUFBTVcsYUFBZVgsRUFBTVcsWUFBYyxLQUNoRmpCLEVBQVNrQixZQUFjdEksRUFBTXNGLFVBQVVtQyxFQUFRYyxZQUFjZCxFQUFRYyxXQUFhLFFBSTlGLFFBQVNaLEdBQWFOLEdBQ2JBLEdBQ0Q3RSxFQUFPZ0QsV0FBV2dELFVBQVUxQixLQUFLM0IsRUFBZ0JzRCxvQkFJekQsUUFBU0MsS0FJRTlLLEVBQUUrSyxLQUFLbkcsRUFBT2dELFdBQVc1RCxZQUFjaEQsS0FBUSxHQUFJeUIsR0FBTSxRQUM1RG1DLEVBQU9nRCxXQUFXNUQsV0FBV2tGLE1BQU9sSSxLQUFRLEdBQUl5QixHQUFNLE9BSTlELFFBQVN1SSxHQUFzQi9ILEVBQVFnSSxHQUVuQ0EsRUFBUS9ILFVBQVlELEVBQU9SLEdBRy9CLFFBQVN5SSxHQUFzQkQsR0FDckJqTCxFQUFFK0ssS0FBS0UsR0FBV2hJLE9BQVUsTUFFOUJnSSxFQUFRL0IsTUFBT2pHLE9BQVUsR0FBSVUsT0FBVSxLQUFNRCxLQUFRLEtBQU1qQixHQUFNLE9BSXpFLFFBQVMwSSxHQUFlbEksRUFBUW1JLEdBQzVCQSxFQUFXbEksVUFBWUQsRUFBT1IsR0FHbEMsUUFBUzRJLEdBQWVDLEdBRWR0TCxFQUFFK0ssS0FBS08sR0FBZXJJLE9BQVUsR0FBSVIsR0FBTSxRQUM1QzZJLEVBQVlwQyxNQUFPakcsT0FBVSxHQUFJUixHQUFNLEtBQU1PLFFBQVcsT0FJaEUsUUFBU3VJLEdBQVlDLEdBRVp4TCxFQUFFeUwsTUFBTUQsRUFBUyxTQUFVRSxHQUN4QixNQUFPQSxHQUFFL0gsT0FBUyxHQUFLK0gsRUFBRWhJLEtBQU8sUUFFcEM4SCxFQUFRdEMsTUFBT3ZGLE9BQVUsS0FBTUQsS0FBUSxLQUFNakIsR0FBTSxPQUkzRCxRQUFTa0osS0FHTCxRQUFTQyxHQUFTL0MsR0FDZGpFLEVBQU9pSCxVQUFXLEVBQ2xCakgsRUFBT2tILE1BQU0sb0JBQXFCakQsR0FDbENrRCxJQUdKLFFBQVNDLEtBQ0xwSCxFQUFPcUgsU0FBVSxFQUNqQjVFLEVBQVMsV0FDTHpDLEVBQU9xSCxTQUFVLEdBQ2xCLEtBWlBySCxFQUFPaUgsVUFBVyxFQWVsQjFMLEVBQ0srTCxXQUFXdEgsRUFBT2dELFdBQVd1RSxtQkFDN0JoRSxLQUFLeUQsRUFBU0ksR0FHdkIsUUFBU0QsS0FDTDlMLEVBQVVtTSxXQVlkLFFBQVNsRSxLQUNMLEdBQUllLEdBQ0FHLEVBQ0FpRCxFQUNBL0MsQ0FFSixLQUFNRixJQUFpQnhFLEdBQU9vRCxXQUMxQixHQUFNcEQsRUFBT29ELFdBQVdxQixlQUFlRCxHQUF2QyxDQUdBSCxFQUFXckUsRUFBT29ELFdBQVlvQixFQUM5QixLQUFNaUQsSUFBdUJ6SCxHQUFPZ0QsV0FBV0ksV0FDckNwRCxFQUFPZ0QsV0FBV0ksV0FBV3FCLGVBQWVnRCxLQUdsRC9DLEVBQWlCMUUsRUFBT2dELFdBQVdJLFdBQVlxRSxHQUMxQ3BELEVBQVN4RyxLQUFPNkcsRUFBZTdHLEtBQ2hDd0csRUFBU3RILFFBQVUySCxFQUFlM0gsV0FsTmxELEdBQUlzRyxFQUVKVCxLQTZCQTVDLEVBQU9tQixJQUFJLDJCQUE0QnlCLEdBRXZDNUMsRUFBTzBELGNBQWdCQSxFQUN2QjFELEVBQU9vRSxlQUFpQkEsRUFDeEJwRSxFQUFPMkUsWUFBY0EsRUFDckIzRSxFQUFPbUYsWUFBY0EsRUFDckJuRixFQUFPa0csYUFBZUEsRUFDdEJsRyxFQUFPb0cscUJBQXVCQSxFQUM5QnBHLEVBQU9zRyxxQkFBdUJBLEVBQzlCdEcsRUFBT3VHLGNBQWdCQSxFQUN2QnZHLEVBQU95RyxjQUFnQkEsRUFDdkJ6RyxFQUFPMkcsV0FBYUEsRUFDcEIzRyxFQUFPK0csS0FBT0EsRUFDZC9HLEVBQU9tSCxXQUFhQSxFQXlMeEIsUUFBU2xLLEtBQ0wsT0FDSXJDLFNBQVUsSUFDVkQsWUFBYSwwQ0FDYkcsV0FBWUcsRUFDWkosVUFqQlJJLEVBQVdvQyxTQUNQLFNBQ0EsUUFDQSxXQUNBLElBQ0EsZ0JBQ0EsZ0JBQ0Esa0JBQ0Esa0JBQ0EsaUJBWUpoRCxFQUNLSSxPQUFPLGVBQ1BPLFVBQVUsYUFBY2lDLElBRTlCNUM7Q0N2UEgsU0FBV0EsR0FFUCxZQUVBQSxHQUFRSSxPQUFPLGVBQ1ZpTixTQUFTLElBQUs5RixPQUFPeEcsR0FDckJ1TSxRQUFRLG9CQUFxQixtQkFDMUIsU0FBVUMsRUFBbUJDLEdBQ3pCRCxFQUFrQkUsV0FBVSxHQUM1QkQsRUFBaUJFLGtCQUFpQixNQUV6Q0MsT0FBTyxpQkFBa0IsV0FDdEIsTUFBTyxVQUFVQyxFQUFPQyxHQUNwQixHQUFJQyxHQUNBQyxHQUFZLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUV6QyxPQUFJeEcsUUFBT3lHLE1BQU1KLEdBQ04sS0FHUEEsRUFBUSxJQUNEQSxHQUdYRSxFQUFNRyxLQUFLQyxNQUFNRCxLQUFLRSxJQUFJUCxHQUFTSyxLQUFLRSxJQUFJLE9BRXBDUCxFQUFRSyxLQUFLRyxJQUFJLElBQU1OLElBQU1PLFFBQVFSLEdBQVlFLEVBQVNELEVBQU0sUUFJckY5TjtDQzlCSCxTQUFXQSxHQUVQLFlBRUEsU0FBU1ksR0FBWStFLEVBQVEySSxFQUFJdk4sRUFBR29DLEVBQU9uQyxFQUFXRSxFQUFlQyxHQUNqRSxRQUFTb04sR0FBTUMsR0FDWCxNQUFPRixHQUFHLFNBQVVHLEdBQVdDLFdBQVdELEVBQVNELEtBK0N2RCxRQUFTRyxHQUFjQyxHQUNuQixPQUFRQSxHQUNKLElBQUssU0FDRGpKLEVBQU9rSixpQkFBa0IsQ0FDekIsTUFDSixLQUFLLFdBQ0RsSixFQUFPbUosY0FBZSxDQUN0QixNQUNKLEtBQUssT0FDRG5KLEVBQU9rSixpQkFBa0IsRUFDekJsSixFQUFPbUosY0FBZSxDQUN0QixNQUNKLFNBQ0luSixFQUFPa0osaUJBQWtCLEVBQ3pCbEosRUFBT21KLGNBQWUsR0FLbEMsUUFBU0MsS0FDTEosRUFBYSxVQUNiaEosRUFBT21KLGNBQWdCbkosRUFBT21KLGFBRTlCbkosRUFBT3FKLE9BQU9DLFNBQVUsRUFHNUIsUUFBU0MsS0FDTFAsRUFBYSxZQUNiaEosRUFBT2tKLGlCQUFtQmxKLEVBQU9rSixnQkFHckMsUUFBU2hKLEtBQ0F6RSxFQUFHd0YsVUFDSitILEVBQWEsUUFJckIsUUFBU1EsS0FDTHhKLEVBQU9xSixPQUFPSSxnQkFBa0J6SixFQUFPcUosT0FBT0ksZUFDekN6SixFQUFPcUosT0FBT0ksZ0JBQ2Z6SixFQUFPbEQsV0FBVyxzQkFJMUIsUUFBUzRNLEdBQWEzRyxHQUNsQi9DLEVBQU8rQyxTQUFXQSxFQUd0QixRQUFTNEcsR0FBcUIxRixHQUMxQnlGLEVBQVl6RixFQUFTMkYsT0FDckI1SixFQUFPbEQsV0FBVyxzQkE5RnRCLEdBQUlyQixHQUFLQyxJQUdURCxHQUFHaUYsY0FBZ0IsS0FFbkJqRixFQUFHd0YsU0FBVzVGLEVBQVU2RixjQUV4QnpGLEVBQUdvTyxPQUFTeE8sRUFBVXlPLFVBRXRCOUosRUFBTytKLFlBQWMsS0FDckIvSixFQUFPZ0ssZUFBa0IzTCxPQUFRLE1BQ2pDMkIsRUFBT21KLGNBQWUsRUFDdEJuSixFQUFPcUosUUFDSEksZ0JBQWtCLEVBQ2xCSCxTQUFXLEVBQ1hXLGdCQUFrQixHQUV0QmpLLEVBQU9rSixpQkFBbUJ6TixFQUFHd0YsU0FFN0JqQixFQUFPb0osV0FBYUEsRUFDcEJwSixFQUFPdUosZUFBaUJBLEVBQ3hCdkosRUFBT0UsVUFBWUEsRUFDbkJGLEVBQU93SixXQUFhQSxFQUVwQnhKLEVBQU9tQixJQUFJLDJCQUE0QixTQUFVQyxFQUFPQyxHQUFRNUYsRUFBR2lGLGNBQWdCVyxJQUNuRnJCLEVBQU9tQixJQUFJLG9CQUFxQndJLEdBQ2hDM0osRUFBT21CLElBQUksZ0JBQWlCakIsR0FLNUIwSSxFQUFLLEtBQ0FyRixLQUFLLFdBQ0YsTUFBT29GLEdBQUd1QixLQUFNM08sRUFBY3dDLFNBQVV2QyxFQUFrQnVDLGFBRTdEd0YsS0FBSyxTQUFVNEcsR0FDWjlPLEVBQVUrTyxjQUFjRCxFQUFjLEdBQUlQLE9BQzFDNUosRUFBTytKLFlBQWNJLEVBQWMsR0FBSVAsTUFFdkN2TyxFQUFVZ1AsaUJBQWlCRixFQUFjLEdBQUl6RCxhQUU3QzFHLEVBQU9sRCxXQUFXLG9CQTBEOUI3QixFQUFXb0MsU0FDUCxTQUNBLEtBQ0EsSUFDQSxnQkFDQSxnQkFDQSxnQkFDQSxxQkFHSmhELEVBQVFJLE9BQU8sZUFDUEssV0FBVyxXQUFZRyxJQUVoQ1o7Q0N6SEgsU0FBV0EsR0FFUCxZQVNBLFNBQVNpRCxHQUFTcEMsRUFBWW9QLEVBQVNsUCxFQUFHb0MsR0FhdEMsUUFBUzZDLEtBQXNCLE1BQU9rSyxHQUV0QyxRQUFTMUosR0FBa0IySixHQUNqQnBQLEVBQUVxUCxRQUFRRixFQUFnQkMsS0FDNUJELEVBQWlCQyxFQUNqQnRQLEVBQVc0QixXQUFXLDJCQUE0QnlOLElBSTFELFFBQVNySixLQUNMLEdBQUl3SixHQUFRLDRUQUNSQyxFQUFTLG9pREFDVEMsRUFBYU4sRUFBUU8sVUFBVUMsV0FBYVIsRUFBUU8sVUFBVUUsUUFBVVQsRUFBUVUsS0FFcEYsT0FBT04sR0FBTU8sS0FBS0wsSUFBZUQsRUFBT00sS0FBS0wsRUFBV00sT0FBTyxFQUFHLElBR3RFLFFBQVNsSyxLQUFtQixNQUFPbUssR0FFbkMsUUFBU2YsR0FBZWdCLEdBQ2ZDLE1BQU1DLFFBQVFGLEtBQ2ZELEVBQWFDLEdBS3JCLFFBQVNHLEtBQXNCLE1BQU9DLEdBRXRDLFFBQVNuQixHQUFrQkcsR0FDbEJoTixFQUFNc0QsU0FBUzBKLEtBQ2hCZ0IsRUFBZ0JoQixHQUl4QixRQUFTeE8sS0FBb0IsTUFBT0QsR0FFcEMsUUFBU1MsR0FBZ0JpUCxHQUNoQmpPLEVBQU1rTyxTQUFTRCxJQUFNRSxFQUFlQyxTQUFTSCxLQUM5QzFQLEVBQWMwUCxHQUl0QixRQUFTM0IsS0FDTCxNQUFPRCxHQUdYLFFBQVMzSixHQUFVN0IsR0FDWHdMLElBQ0FBLEdBQVMsRUFDVGhKLEVBQWlCeEMsR0FDakJuRCxFQUFXNEIsV0FBVyxrQkFJOUIsUUFBUzBLLEtBQ0ZxQyxJQUNDQSxHQUFTLEVBQ1QzTyxFQUFXNEIsV0FBVyxpQkFyRTlCLEdBQUkyRSxHQUFPL0YsS0FFUDZPLEVBQWlCLEtBRWpCVixHQUFTLEVBRVQ4QixHQUFtQixVQUFXLE9BQzlCNVAsRUFBYyxVQUVkb1AsS0FDQUssSUErREovSixHQUFLcEIsaUJBQW1CQSxFQUN4Qm9CLEVBQUtaLGlCQUFtQkEsRUFDeEJZLEVBQUtQLFlBQWNBLEVBQ25CTyxFQUFLVCxjQUFnQkEsRUFDckJTLEVBQUsySSxjQUFnQkEsRUFDckIzSSxFQUFLOEosaUJBQW1CQSxFQUN4QjlKLEVBQUs0SSxpQkFBbUJBLEVBQ3hCNUksRUFBS3pGLGVBQWlCQSxFQUN0QnlGLEVBQUtqRixlQUFpQkEsRUFDdEJpRixFQUFLcUksVUFBWUEsRUFDakJySSxFQUFLdkIsVUFBWUEsRUFDakJ1QixFQUFLK0YsU0FBV0EsRUFHcEJsSyxFQUFRRCxTQUFZLGFBQWMsVUFBVyxJQUFLLGlCQUVsRGhELEVBQ0tJLE9BQU8sZUFDUG9SLFFBQVEsZ0JBQWlCdk8sSUFFL0JqRDtDQ3pHSCxTQUFXQSxHQUVQLFlBRUEsU0FBU3lSLEdBQWtCL0gsRUFBSzFILEdBQzVCLE1BQU8sVUFBVTBQLEdBQ2IsTUFBT0EsR0FBR2hJLEtBQVUxSCxHQUk1QixRQUFTcEIsR0FBWStFLEVBQVF6RSxFQUFlRixHQVN4QyxRQUFTMlEsR0FBcUIzTixHQUFVaEQsRUFBVXdGLGlCQUFpQnhDLEdBRW5FLFFBQVM0TixLQUNMak0sRUFBT2tNLG9CQUFzQkMsT0FDeEJDLEtBQUt6USxHQUNMMFEsT0FBTyxTQUFVckgsRUFBUW5JLEdBQ3RCLEdBQUlhLEtBRUosT0FEQUEsR0FBS2IsR0FBU3hCLEVBQVUyRixnQkFBZ0JnSCxPQUFPOEQsRUFBaUIsT0FBUWpQLElBQ2pFc1AsT0FBT0csVUFBV3RILEVBQVF0SCxRQWhCN0MsR0FBSS9CLEdBQWNKLEVBQWNLLGdCQUVoQ29FLEdBQU9rTSx1QkFFUGxNLEVBQU9nTSxvQkFBc0JBLEVBRTdCaE0sRUFBT3VNLE9BQU9sUixFQUFVMkYsY0FBZWlMLEdBaUIzQyxRQUFTaFAsS0FDTCxPQUNJckMsU0FBVSxJQUNWRCxZQUFhLHFDQUNiRyxXQUFZRyxHQU5wQkEsRUFBV29DLFNBQVksU0FBVSxnQkFBaUIsaUJBVWxEaEQsRUFDS0ksT0FBTyxlQUNQTyxVQUFVLGlCQUFrQmlDLElBR2xDNUM7Q0MvQ0gsU0FBV0EsR0FFUCxZQWdCQSxTQUFTeUksR0FBVTBILEdBQ2YsUUFBc0IsbUJBQU5BLElBQTJCLE9BQU5BLEdBUXpDLFFBQVMxSixHQUFTMEosR0FDZCxNQUFPMUgsR0FBVTBILEtBQU9hLE1BQU1DLFFBQVFkLElBQW9CLGdCQUFOQSxHQVF4RCxRQUFTa0IsR0FBU2xCLEdBQ2QsTUFBTzFILEdBQVUwSCxJQUFtQixnQkFBTkEsR0FRbEMsUUFBUzVNLEdBQW1CRixHQUN4QixHQUFJOE8sR0FBUzFMLEVBQVNwRCxHQUFPQSxJQUU3QixPQUFPLFVBQVUrTyxFQUFVQyxHQUN2QixHQUFJclEsR0FBUXlHLEVBQVU0SixHQUFnQkEsRUFBZSxJQUNyRCxPQUFPNUosR0FBVTBKLEVBQU9DLElBQ2xCRCxFQUFPQyxHQUNQcFEsR0FXZCxRQUFTc1EsR0FBWUMsRUFBWUMsR0FDN0IsR0FBSUMsR0FBV3pCLE1BQU1DLFFBQVFzQixHQUN2QkEsRUFBVzVFLE9BQU9sSCxHQUFVaU0sSUFBSUYsS0FHdEMsT0FBT0MsR0FBU0UsUUFBUUgsTUFPNUIsUUFBU3ZQLEtBQ0wsT0FDSXdGLFVBQWFBLEVBQ2JoQyxTQUFZQSxFQUNaNEssU0FBWUEsRUFFWjlOLG1CQUFzQkEsRUFDdEIrTyxZQUFlQSxHQUl2QnRTLEVBQ0tJLE9BQU8sb0JBQ1B3RCxRQUFRLGdCQUFpQlgsSUFFL0JqRDtDQ3RGSCxTQUFXQSxHQUVQLFlBRUEsU0FBUzRTLEdBQWNqTixJQUl2QjNGLEVBQVFJLE9BQU8sZUFDVkssV0FBVyxpQkFBa0IsU0FBVW1TLEtBQzdDNVM7Q0NkSCxTQUFXQSxHQUVQLFlBRUEsU0FBUzZTLEdBQU9DLEdBQ1pBLEVBQWNDLFNBQVNDLFFBQVFDLE9BQU8sb0JBQXNCLGlCQUdoRUosRUFBTzdQLFNBQVcsaUJBRWxCaEQsRUFBUUksT0FBTyxtQkFBbUJrTixPQUFPdUYsSUFFMUM3UztDQ1pILFNBQVdBLEdBRVAsWUFTQSxTQUFTaUQsR0FBUWtGLEVBQU9tRyxHQUNwQixRQUFTNEUsR0FBWUMsR0FFakIsTUFEQUMsU0FBUXJHLE1BQU0sbURBQW9Eb0csRUFBSWhLLE1BQy9EbUYsRUFBRytFLE9BQU9GLEdBR3JCLFFBQVNHLEdBQWtCMUosR0FDdkIsTUFBT0EsR0FBU1QsS0FHcEIsUUFBU3hGLEdBQUlRLEVBQUtxRixHQUNkLE1BQU9yQixHQUNGeEUsSUFBSTRQLEVBQVNwUCxHQUFPcUYsT0FBVUEsRUFBUXdKLFFBQVdRLElBQ2pEdEssS0FBS29LLEVBQW1CSixHQUdqQyxRQUFTTyxHQUFLdFAsRUFBS2dGLEdBQ2YsTUFBT2hCLEdBQ0ZzTCxLQUFLRixFQUFTcFAsRUFBS2dGLEdBQVE2SixRQUFXUSxJQUN0Q3RLLEtBQUtvSyxFQUFtQkosR0FHakMsT0FDSXZQLElBQU9BLEVBQ1A4UCxLQUFRQSxHQS9CaEIsR0FBSUYsR0FBUyxnQ0FHVEMsSUFnQ0p2USxHQUFRRCxTQUFXLFFBQVMsTUFFNUJoRCxFQUFRSSxPQUFPLG1CQUFtQndELFFBQVEsY0FBZVgsSUFFMURqRDtDQzNDSCxTQUFXQSxFQUFTMFQsRUFBSUMsR0FDcEIsWUFFQSxTQUFTL1MsR0FBVytFLEVBQVE1RSxFQUFHNlMsRUFBYTVTLEdBTXhDLFFBQVN1SCxLQUNMNUMsRUFBT2tPLFNBQ0hDLFFBQ0lDLElBQU0sR0FDTkMsUUFDQUMsS0FBTSxHQUVWbEIsVUFDSW1CLFVBQW9CLGtMQUNwQkMsa0JBQ0lDLGNBQWMsRUFDZEMsWUFBYyxHQUVsQkMsYUFBb0IsRUFDcEJDLG9CQUFvQixJQUk1QlgsRUFBWVksU0FBU3RMLEtBQUt1TCxHQUc5QixRQUFTQyxHQUFlYixHQUNwQixHQUFJMUssR0FBUzBLLEVBQVExSyxLQUNqQndMLEVBQVNqQixFQUFHa0IsT0FDWEQsTUFDQUUsS0FBSyxNQUNMN1MsTUFBTSxTQUFVOFMsR0FDYixNQUFPQSxHQUFFOVMsUUFHYitTLEVBQVNyQixFQUFHc0IsSUFBSUQsTUFBTUUsWUFBWXBCLEVBQVFwSCxHQUFHeUksWUFBWXJCLEVBQVFwSCxFQUFJLElBQ3JFcUgsRUFBU0QsRUFBUXBILEVBQUlvSCxFQUFRc0IsWUFDN0JDLEVBQWtCLEVBQVR0QixFQUNUdUIsRUFBU0QsRUFDVEosRUFBU00sU0FBU0MsZ0JBQWdCN0IsRUFBRzhCLEdBQUdDLE9BQU9ULElBQUssT0FDcERVLEVBQVNoQyxFQUFHaUMsT0FBT1gsR0FDbEI3TCxLQUFLQSxHQUNMeU0sS0FBSyxRQUFTLFlBQ2RBLEtBQUssUUFBU1IsR0FDZFEsS0FBSyxTQUFVUCxHQUVoQlEsRUFBT0gsRUFBSUksVUFBVSxRQUNwQjNNLEtBQUt3TCxFQUFJeEwsSUFDVDRNLFFBQVFDLE9BQU8sS0FDZkosS0FBSyxRQUFTLE9BQ2RBLEtBQUssWUFBYSxhQUFlOUIsRUFBUyxJQUFNQSxFQUFTLElBa0I5RCxPQWhCQStCLEdBQUtHLE9BQU8sUUFDUEosS0FBSyxJQUFLYixHQUNWYSxLQUFLLFFBQVMsU0FBVWQsR0FDckIsTUFBT0EsR0FBRTNMLEtBQUszRyxLQUFPLFNBRzdCcVQsRUFBS0csT0FBTyxZQUNQQyxLQUFLLFNBQVVuQixFQUFHb0IsR0FDZixHQUFVLElBQU5BLEVBQ0EsTUFBT3JDLEdBQVFzQyxRQUd0QlAsS0FBSyxPQUFVL0IsRUFBUXNDLE1BQU1DLFdBQVduUSxRQUN4QzJQLEtBQUssS0FBTSxHQUNYQSxLQUFLLFFBQVMsV0FFWnJPLE9BQU84TyxlQUNSLEdBQUs5TyxRQUFPOE8sZUFBaUJDLGtCQUFrQnRCLEdBQzNDQSxFQUFPLElBQ1BBLEVBQUl1QixJQUNKLEdBSWQsUUFBUzlCLEdBQWtCL0IsR0FhdkIsUUFBUzhELEdBQVlDLEdBQ2pCLEdBQUlDLEdBQWlCRCxFQUFRRSxxQkFDekJDLEVBQWlCRixFQUFTelEsT0FDMUI0USxFQUFpQjlWLEVBQUUrVixNQUFNSixFQUFVLFdBQ25DSyxFQUFpQmhXLEVBQUUyUixJQUNuQjNSLEVBQUVpVyxRQUFRSCxFQUFnQixRQUMxQixTQUFVVixFQUFPM1QsR0FDYixPQUFRQSxLQUFRQSxFQUFNUixNQUFTbVUsS0FJbkMxSixFQUFpQixHQUNqQjBJLEVBQWlCLEVBQ2pCOEIsRUFBcUMsR0FBbkJ4SyxFQUFJMEksR0FDdEIrQixFQUFpQnhDLEdBQ2hCdkwsS0FBTTROLEVBQVF0SyxFQUFHQSxFQUFHMEksWUFBYUEsRUFBYWdCLE1BQU9TLEdBRzFELE9BQU8sSUFBSWpELEdBQUV3RCxTQUNURCxLQUFXQSxFQUNYRSxVQUFXLGlCQUNYQyxTQUFXLEdBQUkxRCxHQUFFOUksTUFBTW9NLEVBQVNBLEtBOEJ4QyxRQUFTSyxHQUFVdFQsR0FDZixRQUFTdVQsR0FBVUMsR0FDZixHQUFLelcsRUFBRXlMLE1BQU1nTCxFQUFJaE0sYUFBakIsQ0FDc0MsYUFBbENnTSxFQUFJaE0sWUFBWSxHQUFHNkMsUUFBUSxJQUF1RCxjQUFsQ21KLEVBQUloTSxZQUFZLEdBQUc2QyxRQUFRLEtBQzNFbUosRUFBSWhNLFlBQVksR0FBSyxTQUNyQmdNLEVBQUloTSxZQUFZLGFBRXBCLElBQUlpTSxHQUFJOUQsRUFBRStELE9BQU9GLEVBQUloTSxhQUNqQm1NLEtBQU1DLEVBQVc1VCxFQUFPeEIsTUFDeEJxVixNQUFTN1QsRUFBT2pDLEtBQ2hCa0MsVUFBYUQsRUFBT1IsR0FDcEJzVSxRQUFXOVQsRUFBT2pDLEtBQ2xCUyxLQUFRd0IsRUFBT3hCLE1BRW5CdVYsR0FBUUMsU0FBU1AsSUFHckIxVyxFQUFFa1gsUUFBUWpVLEVBQU8ySCxVQUFXNEwsR0FNaEMsUUFBU1csR0FBZ0JDLEdBQ3JCL0UsUUFBUXJHLE1BQU1vTCxFQUFhTCxRQUFVLE9BQVFLLEdBdkZqRCxHQUFJQyxHQUFtQnBYLEVBQVUyRixlQUVqQytMLEdBQUkyRixpQkFFSixHQUFJMUUsR0FBRTJFLFFBQ0RDLE1BQU1DLFNBQVUsYUFDaEJDLE1BQU0vRixHQUVYLEdBQUlpQixHQUFFMkUsUUFDREksUUFBUUYsU0FBVSxXQUFZRyxXQUFXLEVBQU9oQixLQUFNLHlCQUN0RGMsTUFBTS9GLEVBMEJYLElBQUlrRixJQUNBZ0IsYUFBY2pGLEVBQUVnRSxNQUNaa0IsUUFBVSx5QkFDVnhCLFVBQVcsR0FBSSxNQUVuQnlCLGFBQWNuRixFQUFFZ0UsTUFDWmtCLFFBQVUsc0JBQ1Z4QixVQUFXLEdBQUksTUFFbkIwQixXQUFjcEYsRUFBRWdFLE1BQ1prQixRQUFVLHFCQUNWeEIsVUFBVyxHQUFJLE1BRW5CMkIsV0FBY3JGLEVBQUVnRSxNQUNaa0IsUUFBVSxxQkFDVnhCLFVBQVcsR0FBSSxPQUluQlUsRUFBVXBFLEVBQUVzRixvQkFDWkMsbUJBQW1CLEVBQ25CQyxxQkFBcUIsRUFDckJDLG1CQUFvQjVDLEVBQ3BCNkMsaUJBQWtCLEdBQ2xCQywyQkFBNEIsS0F1QmhDdlksR0FBRWtYLFFBQVFHLEVBQWtCZCxHQUM1QjVFLEVBQUlzRixTQUFTRCxHQU1ickYsRUFBSTZHLEdBQUcsZ0JBQWlCckIsR0F0SzVCM1AsSUFFQTVDLEVBQU9tQixJQUFJLGlCQUFrQnlCLEdBd01qQyxRQUFTM0YsS0FDTCxPQUNJckMsU0FBWSxJQUNaRCxZQUFlLHFDQUNmRyxXQUFjRyxHQVh0QkEsRUFBV29DLFNBQ1AsU0FDQSxJQUNBLGNBQ0EsaUJBV0poRCxFQUNLSSxPQUFPLGVBQ1BPLFVBQVUsUUFBU2lDLElBQ3pCNUMsUUFBUzBULEdBQUlDO0NDdk5oQixTQUFXM1QsR0FFUCxZQUVBLFNBQVNpRCxHQUFRRSxHQUNiLFFBQVNxVyxHQUFTblcsR0FLZCxRQUFTb1csS0FDTCxHQUFJdEgsR0FBU2hQLEVBQU1zRixVQUFVcEYsR0FBT0EsS0FDaEMySCxFQUFlN0gsRUFBTXNGLFVBQVUwSixFQUFPcEgsY0FBZ0JvSCxFQUFPcEgsYUFBZSxJQUFNLEdBQ2xGRSxFQUFZOUgsRUFBTXNGLFVBQVUwSixFQUFPbEgsVUFBWWtILEVBQU9sSCxTQUFXLEtBQU8sR0FDeEV5TyxFQUFldlcsRUFBTXNGLFVBQVUwSixFQUFPN0csY0FBZ0I2RyxFQUFPN0csYUFBZSxJQUFNLEdBQ2xGSSxFQUFjdkksRUFBTXNGLFVBQVUwSixFQUFPMUcsYUFBZTBHLEVBQU8xRyxZQUFjLEVBRTdFLFFBQVFULEVBQWNDLEVBQVd5TyxFQUFjaE8sR0FBWWlPLE9BWC9ELEdBQUl2UyxHQUFPL0YsS0FFUGlDLEVBQWNILEVBQU1JLG1CQUFtQkYsRUFZM0MrRCxHQUFLNUQsR0FBS0YsRUFBWSxNQUN0QjhELEVBQUsyRCxhQUFlekgsRUFBWSxnQkFDaEM4RCxFQUFLNkQsU0FBVzNILEVBQVksWUFDNUI4RCxFQUFLOEQsU0FBVzVILEVBQVksWUFDNUI4RCxFQUFLcUUsWUFBY25JLEVBQVksZUFDL0I4RCxFQUFLZ0UsUUFBVTlILEVBQVksV0FDM0I4RCxFQUFLa0UsYUFBZWhJLEVBQVksZ0JBQ2hDOEQsRUFBS29FLFlBQWNsSSxFQUFZLGVBSy9COEQsRUFBS3FELGlCQUFtQmdQLElBRzVCLFFBQVM3TixHQUFpQnZJLEdBQ3RCLE1BQU8sSUFBSW1XLEdBQVNuVyxHQUd4QixPQUNJdUksaUJBQW9CQSxHQUk1QjNJLEVBQVFELFNBQVcsaUJBRW5CaEQsRUFDS0ksT0FBTyxtQkFDUHdELFFBQVEsa0JBQW1CWCxJQUVqQ2pEO0NDbERILFNBQVdBLEdBRVAsWUEyQkEsU0FBUzhJLEtBQ0wsT0FBUSxRQUFTLFdBQVksVUFjakMsUUFBUzdGLEdBQVFDLEVBQVcwVyxFQUFnQkMsRUFBYUMsRUFBZ0J4UixFQUFpQkQsRUFBaUJsRixHQUV2RyxRQUFTNFcsR0FBTzFXLEdBS1osUUFBUzZKLEtBQ0wsR0FBSThNLEdBQVUsR0FBSUQsR0FBTzNTLEVBNkJ6QixPQTVCQTRTLEdBQVFyTyxVQUFVc08sTUFDbEJELEVBQVFyTyxVQUFVc08sTUFDbEJELEVBQVEvVSxnQkFBZ0JnVixNQUN4QkQsRUFBUS9VLGdCQUFnQmdWLE1BQ3hCRCxFQUFRaFYsYUFBYWlWLE1BQ3JCRCxFQUFRaFYsYUFBYWlWLE1BQ3JCRCxFQUFRN1UscUJBQXFCOFUsTUFDN0JELEVBQVE3VSxxQkFBcUI4VSxNQUM3QkQsRUFBUTlVLGlCQUFpQitVLE1BQ3pCRCxFQUFROVUsaUJBQWlCK1UsTUFDekJELEVBQVF6VSxXQUFXMFUsTUFDbkJELEVBQVF6VSxXQUFXMFUsTUFDbkJELEVBQVF4VSxjQUFjeVUsTUFDdEJELEVBQVF4VSxjQUFjeVUsTUFDdEJELEVBQVE1VSxlQUFlNlUsTUFDdkJELEVBQVE1VSxlQUFlNlUsTUFDdkJELEVBQVFqVixXQUFXa1YsTUFDbkJELEVBQVFqVixXQUFXa1YsTUFDbkJELEVBQVEzVSxZQUFZNFUsTUFDcEJELEVBQVEzVSxZQUFZNFUsTUFDcEJELEVBQVF2VSxTQUFTd1UsTUFDakJELEVBQVF2VSxTQUFTd1UsTUFDakJELEVBQVF0VSxTQUFTdVUsTUFDakJELEVBQVF0VSxTQUFTdVUsTUFDakJELEVBQVFqUixXQUFXa1IsTUFDbkJELEVBQVFqUixXQUFXa1IsTUFDbkJELEVBQVFFLFlBQWMsR0FFZkYsRUFsQ1gsR0FBSTVTLEdBQU8vRixLQUNQOFEsRUFBU2hQLEVBQU1zRixVQUFVcEYsR0FBT0EsS0FDaENDLEVBQWNILEVBQU1JLG1CQUFtQkYsRUFtQzNDK0QsR0FBSzVELEdBQUtGLEVBQVksTUFDdEI4RCxFQUFLckYsS0FBT3VCLEVBQVksUUFDeEI4RCxFQUFLK1MsVUFBWTdXLEVBQVksYUFDN0I4RCxFQUFLNUUsS0FBT2MsRUFBWSxRQUN4QjhELEVBQUtnVCxTQUFXOVcsRUFBWSxZQUM1QjhELEVBQUtqRCxJQUFNYixFQUFZLE9BQ3ZCOEQsRUFBS2lULGVBQWlCL1csRUFBWSxrQkFDbEM4RCxFQUFLa1QsVUFBWWhYLEVBQVksYUFFN0I4RCxFQUFLdUUsVUFBWXhJLEVBQU1tUCxZQUFZSCxFQUFPeEcsVUFBV3JELEVBQWdCc0Qsa0JBQ3JFeEUsRUFBS25DLGdCQUFrQjlCLEVBQU1tUCxZQUFZSCxFQUFPbE4sZ0JBQWlCMlUsRUFBZS9VLDJCQUNoRnVDLEVBQUtqQyxxQkFBdUJoQyxFQUFNbVAsWUFBWUgsRUFBT2hOLHFCQUFzQnlVLEVBQWUvVSwyQkFDMUZ1QyxFQUFLcEMsYUFBZTdCLEVBQU1tUCxZQUFZSCxFQUFPbk4sYUFBYzRVLEVBQWUvVSwyQkFDMUV1QyxFQUFLbEMsaUJBQW1CL0IsRUFBTW1QLFlBQVlILEVBQU9qTixpQkFBa0IwVSxFQUFlL1UsMkJBQ2xGdUMsRUFBSzdCLFdBQWFwQyxFQUFNbVAsWUFBWUgsRUFBTzVNLFdBQVlzVSxFQUFZM1Ysb0JBQ25Fa0QsRUFBSzVCLGNBQWdCckMsRUFBTW1QLFlBQVlILEVBQU8zTSxjQUFlcVUsRUFBWTNWLG9CQUN6RWtELEVBQUtoQyxlQUFpQmpDLEVBQU1tUCxZQUFZSCxFQUFPL00sZUFBZ0J5VSxFQUFZM1Ysb0JBQzNFa0QsRUFBS3JDLFdBQWE1QixFQUFNbVAsWUFBWUgsRUFBT3BOLFdBQVk4VSxFQUFZM1Ysb0JBQ25Fa0QsRUFBSy9CLFlBQWNsQyxFQUFNbVAsWUFBWUgsRUFBTzlNLFlBQWF3VSxFQUFZM1Ysb0JBQ3JFa0QsRUFBSzNCLFNBQVd0QyxFQUFNbVAsWUFBWUgsRUFBTzFNLFNBQVVxVSxFQUFlblYsaUJBQ2xFeUMsRUFBSzFCLFNBQVd2QyxFQUFNbVAsWUFBWUgsRUFBT3pNLFNBQVVvVSxFQUFlblYsaUJBQ2xFeUMsRUFBSzJCLFdBQWE1RixFQUFNbVAsWUFBWUgsRUFBT3BKLFdBQVlWLEVBQWdCNUUsa0JBRXZFMkQsRUFBSzhGLGdCQUFrQkEsRUFHM0IsUUFBU3RFLEdBQWV2RixHQUNwQixNQUFPLElBQUkwVyxHQUFPMVcsR0FHdEIsUUFBU0ssS0FDTCxNQUFPUixHQUFVUyxJQUFJLGFBR3pCLFFBQVNzSixHQUFXakosR0FDaEIsTUFBT2QsR0FBVXVRLEtBQUssU0FBV3pQLE9BQVVBLElBRy9DLE9BQ0k0RSxlQUFrQkEsRUFDbEJFLGtCQUFxQkEsRUFDckJwRixPQUFVQSxFQUNWdUosV0FBY0EsRUFFZDFMLGVBQWtCLFdBQ2QsTUFBT2daLEtBM0duQixHQUFJQSxJQUNBdkIsWUFBYyxFQUNkRixjQUFjLEVBQ2RGLGNBQWMsRUFDZEcsWUFBYyxFQTRHbEI5VixHQUFRRCxTQUNKLGNBQ0EsMkJBQ0Esb0JBQ0EsaUJBQ0Esa0JBQ0Esa0JBQ0EsaUJBR0poRCxFQUNLSSxPQUFPLG1CQUNQd0QsUUFBUSxnQkFBaUJYLElBRS9CakQ7Q0N2SkgsU0FBV0EsRUFBUzBULEdBRWhCLFlBZUEsU0FBUzhHLEdBQWlCQyxHQU10QixNQUpLaFMsR0FBVWdTLEVBQUs5RSxPQUFPLFNBQ3ZCOEUsRUFBSzlFLE9BQU8sT0FBTytFLFNBR2hCRCxFQUNGekUsT0FBTyxPQUNQSixLQUFLLFNBQVUsU0FDZkEsS0FBSyxRQUFTLFFBY3ZCLFFBQVMrRSxHQUFvQi9ZLEdBQ3pCLE1BQU8sVUFBVWdaLEdBS2IsUUFBU0MsR0FBa0IvRixHQUN2QixHQUFJZ0csR0FBSWhHLEVBQUU5UyxNQUFPSixFQUNqQixPQUFPbVosVUFBU0QsSUFBTXJTLEVBQVVxUyxHQUFLQSxFQUFJLEVBTjdDLEdBQUlFLEdBQW1CLEdBQ25CQyxFQUFtQixHQUNuQkMsRUFBZXhILEVBQUd5SCxJQUFJUCxFQUFVQyxFQU9wQyxPQUFPLFVBQVV4WCxHQUNiLE1BQU9xUSxHQUFHMEgsTUFDQUMsT0FDQUMsUUFBUyxFQUFHSixJQUNaSyxPQUFRUCxFQUFrQkMsSUFBb0I1WCxFQUFJckIsTUFBT0osTUFnQi9FLFFBQVM0WixHQUFXQyxHQUNoQixRQUFTQyxHQUFzQlosR0FDM0IsTUFBT0EsR0FBSSxFQUdmLFFBQVNhLEdBQWdCYixHQUNyQixNQUFPQSxHQUFJWSxFQUFxQlosR0FHcEMsT0FDSS9CLFlBQ0k2QyxFQUFLRixFQUFxQkQsRUFBT0ksT0FDakNDLEVBQUtKLEVBQXFCRCxFQUFPTSxTQUVyQ2pELGNBQ0k4QyxFQUFLRixFQUFxQkQsRUFBT0ksT0FDakNDLEVBQUtILEVBQWVGLEVBQU9NLFNBRS9CbkQsY0FDSWdELEVBQUtELEVBQWVGLEVBQU9JLE9BQzNCQyxFQUFLSixFQUFxQkQsRUFBT00sU0FFckMvQyxZQUNJNEMsRUFBS0QsRUFBZUYsRUFBT0ksT0FDM0JDLEVBQUtILEVBQWVGLEVBQU9NLFVBY3ZDLFFBQVNDLEdBQXFCcGEsR0FDMUIsTUFBTyxVQUFVZ1osR0FDYixHQUFJcUIsR0FBY3RCLEVBQW1CL1ksR0FBUWdaLEVBRTdDLE9BQU8sVUFBVTlGLEdBQ2IsTUFBT3JNLEdBQVVxTSxFQUFFOVMsTUFBT0osT0FDZnFhLEVBQVluSCxTQWNuQyxRQUFTb0gsR0FBUUMsR0FBTSxNQUFPLFlBQWMsTUFBT0EsTUFFbkQsUUFBU3ZaLEdBQVdxTixFQUFTbFAsRUFBR29DLEVBQU9uQyxFQUFXQyxHQWM5QyxRQUFTbWIsR0FBUTViLEVBQU82YixHQXVDcEIsUUFBU0MsS0FFTCxRQUFTQyxLQUNMLE1BQU92YyxHQUFRcWMsUUFBUXBNLEdBQVUsR0FBSXVNLFdBR3pDLFFBQVNDLEtBQ0wsTUFBT3pjLEdBQVFxYyxRQUFRcE0sR0FBVSxHQUFJekksWUFHekMsT0FBU2lWLElBQW1CRixLQVFoQyxRQUFTRyxLQUNMbGMsRUFBTW1jLFNBU1YsUUFBU0MsR0FBS0MsRUFBRzFNLEdBQ1IwTSxJQUFNMU0sSUFJTjJNLEdBQ0RBLElBR0pDLEVBQU85YixFQUFlK2IsaUJBUzFCLFFBQVNDLEdBQWFDLEdBQ1p6VSxFQUFVeVUsS0FHaEJDLEVBQXNCeEMsRUFBbUJ1QyxHQUN6Q0UsRUFBdUJwQixFQUFvQmtCLElBUS9DLFFBQVNILEdBQVFNLEdBZ0ZiLFFBQVNDLEdBQW9CalgsR0FDekJnWCxFQUNLekMsU0FDQWxJLElBQUksU0FBVXJQLEdBQU8sTUFBT0EsR0FBSXJCLFFBQ2hDMkwsT0FBTyxTQUFVM0osR0FBVSxNQUFPakQsR0FBRXFQLFFBQVEvSixFQUFlckMsS0FDM0RpVSxRQUFRc0YsR0FZakIsUUFBU0MsR0FBa0JyVSxFQUFNc1MsR0FDN0IsTUFBTy9ILEdBQUdrQixPQUNBNkksUUFDQUMsTUFBT2pDLEVBQU9JLE1BQU9KLEVBQU9NLFNBQzVCeE0sTUFBTXBHLEVBQUt5UixVQUNYK0MsTUFBTXhVLEVBQUt5VSxVQUVYQyxhQUFhLEdBRWJDLGFBQWEsSUFDYkMsT0FBT0MsR0FHUEMsUUFRZCxRQUFTQyxHQUFVdEQsR0FHZixRQUFTdUQsR0FBaUJ0QixHQUN0QixNQUFPcFUsR0FBVW9VLEdBQUtaLEVBQVlZLEdBQUt1QixFQUkzQyxRQUFTQyxHQUFZaGIsR0FDakIsUUFBU2lFLEtBQ0FuRSxFQUFNc0YsVUFBVWlMLEVBQUczTSxTQUNwQjJNLEVBQUczTSxNQUFNdVgsaUJBQ1Q1SyxFQUFHM00sTUFBTXdYLG1CQUVibGIsRUFBSW1iLFVBQVcsRUFDZkMsRUFBTXBiLEdBR1Y3QyxFQUFNbWMsT0FBT3JWLEdBakJqQixHQUFJOFcsR0FBYyxHQW9CZE0sRUFBTzFKLEVBQ05jLFVBQVUsU0FDVjNNLEtBQUt5UixHQUNMN0UsUUFBUUMsT0FBTyxLQUVmSixLQUFLLFFBQVMsU0FBVWQsR0FBSyxNQUFPLFFBQVVBLEVBQUU5UyxNQUFNUSxLQUFPLFVBQzdEK1csR0FBRyxRQUFTOEUsR0FDWk0sS0FBS0MsRUFBWUMsS0FjdEIsT0FYQUgsR0FBSzFJLE9BQU8sVUFDUEosS0FBSyxJQUFLdUksR0FLZk8sRUFBSzFJLE9BQU8sUUFDUEMsS0FBSyxTQUFVbkIsR0FBSyxNQUFPck0sR0FBVXFNLEVBQUU5UyxNQUFNb1ksVUFBWXRGLEVBQUU5UyxNQUFNb1ksU0FBV3RGLEVBQUU5UyxNQUFNRCxPQUNwRjZULEtBQUssS0FBTSxXQUFjLFlBQWlCdlUsS0FBS3lkLHdCQUEwQixFQUFLLE9BQzlFbEosS0FBSyxLQUFNLFdBQWMsTUFBUSxJQUFPdlUsS0FBSzBkLFdBQVdDLFVBQVVqRCxPQUFTLEVBQUksR0FBTyxPQUVwRjJDLEVBVVgsUUFBU25CLEdBQWdCdlosR0FDckIsUUFBU2liLEdBQTZCbkssR0FDbEMsTUFBTyxVQUFVb0ssR0FDYixNQUFPcEssR0FBRXFLLFNBQVdELEVBQUVFLE9BQVN0SyxFQUFFdUssU0FBV0gsRUFBRUUsT0FJdEQsUUFBU0UsR0FBYXZPLEdBQ2xCLE1BQU8sVUFBVXdPLEdBQ2IsTUFBT3hPLEdBQUVxTyxRQUFVRyxFQUFFSCxPQUNYamMsRUFBTXNGLFVBQVU0VSxFQUFVTyxTQUFTbFgsS0FBS3VZLEVBQTRCbE8sTUFPdEYyTixFQUNLYyxRQUFRLFVBQVdGLEVBQVl0YixJQUMvQndiLFFBQVEsWUFBYXplLEVBQUUwZSxPQUFPSCxFQUFZdGIsS0FFL0NtSSxFQUNLcVQsUUFBUSxVQUFXUCxFQUE0QmpiLElBQy9Dd2IsUUFBUSxZQUFhemUsRUFBRTBlLE9BQU9SLElBUXZDLFFBQVNSLEdBQU96YSxHQUNaLEdBQUtiLEVBQU1zRixVQUFVekgsRUFBVWdGLG9CQUFzQixDQUVqRCxHQUFLakYsRUFBRXFQLFFBQVFwUCxFQUFVZ0YsbUJBQW9CaEMsRUFBT2hDLE9BQ2hELE1BSUEwZCxHQUFRMWIsR0FJaEJoRCxFQUFVd0YsaUJBQWlCeEMsRUFBT2hDLE9BRWxDdWIsRUFBZXZaLEdBTW5CLFFBQVMyYixLQUNDeGMsRUFBTXNGLFVBQVV6SCxFQUFVZ0Ysc0JBSWhDMFosSUFDQTFlLEVBQVV3RixpQkFBaUIsT0FXL0IsUUFBU2taLEdBQVMxYixHQUNkMGEsRUFDS2MsUUFBUSxXQUFXLEdBQ25CQSxRQUFRLGFBQWEsR0FFMUJyVCxFQUNLcVQsUUFBUSxXQUFXLEdBQ25CQSxRQUFRLGFBQWEsR0FFckJyYyxFQUFNc0YsVUFBVXpFLEdBQ2pCQSxFQUFPNGIsT0FBUSxFQUdmdkMsRUFBVXpDLFNBQVMzQyxRQUFRLFNBQVVuRCxHQUNqQ0EsRUFBRThLLE9BQVEsSUFLYnpjLEVBQU1zRixVQUFVekgsRUFBVWdGLHFCQUMzQjRZLEVBQVlpQixTQVVwQixRQUFTQyxHQUFnQkMsR0FLckIsUUFBU0MsR0FBbUNDLEdBeUJ4QyxRQUFTQyxHQUFhN2MsR0FDbEIsTUFBTzhjLEdBQU85YyxFQUFJZ2MsT0FBTzdiLEtBRWQyYyxFQUFPOWMsRUFBSWdjLE9BQU83YixLQUVpRCxPQURoRTJjLEVBQU85YyxFQUFJZ2MsT0FBTzdiLElBQ2JrRCxLQUFLLFNBQVUwWixHQUFPLE1BQU9BLEtBQVEvYyxFQUFJOGIsT0FBTzNiLEtBMUJ2RSxHQUFJMmMsR0FBUUYsRUFDUHZOLElBQ0csU0FBVXJQLEdBQ04sT0FBUzhiLE9BQVE5YixFQUFJOGIsT0FBTzNiLEdBQUk2YixPQUFRaGMsRUFBSWdjLE9BQU83YixNQUcxRHdPLE9BQ0csU0FBVXJILEVBQVF0SCxHQU9kLE1BTktzSCxHQUFRdEgsRUFBSThiLFFBQ2J4VSxFQUFRdEgsRUFBSThiLFFBQVNsVixLQUFLNUcsRUFBSWdjLFFBRzlCMVUsRUFBUXRILEVBQUk4YixTQUFhOWIsRUFBSWdjLFFBRTFCMVUsTUFnQm5CLE9BQU9zVixHQUFRdFMsT0FBT3VTLEdBRzFCLEdBQUlHLEdBQVdMLEVBQWtDRCxFQUNqRCxPQUFPL0ssR0FDRmMsVUFBVSxTQUNWM00sS0FBS2tYLEdBQ0x0SyxRQUFRQyxPQUFPLFFBQ2ZKLEtBQUssUUFBUyxTQUFVMEssR0FBSyxNQUFPLFFBQVVBLEVBQUU5ZCxLQUFPLFdBelRoRSxHQUFJd1MsR0FBTXdGLEVBQWdCQyxFQUsxQixJQUhBekYsRUFBSXVFLEdBQUcsUUFBUyxXQUFjL1ksRUFBTW1jLE9BQU9nRCxLQUdSLElBQTlCdEMsRUFBVXpDLFNBQVMzVSxPQUVwQixXQURBbU4sU0FBUW1OLE1BQU0sMENBS2xCLElBQUk5RSxHQUFTekcsRUFBSTBKLE9BQU84Qix3QkFHcEJ2RSxFQUFja0IsRUFBb0JFLEVBQVV6QyxVQUM1Q29ELEVBQWtCWixFQUFxQkMsRUFBVXpDLFVBR2pENkYsRUFBT2pGLEVBQVVDLEdBR2pCbUQsRUFBY3BCLEVBQWlCSCxFQUFXNUIsR0FNMUN0UCxFQUFhMlQsRUFBZXpDLEVBQVVPLFVBRXRDYyxFQUFPUixFQUFTYixFQUFVekMsU0FNOUJnRSxHQUFZckYsR0FBRyxPQUFRLFNBQVV4UyxHQUM3QixRQUFTMlosS0FDTCxHQUFJQyxHQUFJLEdBQU01WixFQUFNNlosS0FFcEJ6VSxHQUNLeUosS0FBSyxLQUFNLFNBQVVkLEdBQ2xCLE1BQU9BLEdBQUVxSyxPQUFPdkQsSUFFbkJoRyxLQUFLLEtBQU0sU0FBVWQsR0FDbEIsTUFBT0EsR0FBRXFLLE9BQU9yRCxJQUVuQmxHLEtBQUssS0FBTSxTQUFVZCxHQUNsQixNQUFPQSxHQUFFdUssT0FBT3pELElBRW5CaEcsS0FBSyxLQUFNLFNBQVVkLEdBQ2xCLE1BQU9BLEdBQUV1SyxPQUFPdkQsSUFHeEJ1QixFQUFVekMsU0FBUzNDLFFBQVEsU0FBVW5ELEdBQ2pDQSxFQUFFZ0gsSUFBTTJFLEVBQU0zTCxFQUFFOVMsTUFBTVEsTUFBT3NaLEVBQUloSCxFQUFFZ0gsR0FBSzZFLEVBQ3hDN0wsRUFBRThHLElBQU02RSxFQUFNM0wsRUFBRTlTLE1BQU1RLE1BQU9vWixFQUFJOUcsRUFBRThHLEdBQUsrRSxJQUc1Q2pDLEVBQUs5SSxLQUFLLFlBQWEsU0FBVWQsR0FDN0IsTUFBTyxhQUFlQSxFQUFFOEcsRUFBSSxJQUFNOUcsRUFBRWdILEVBQUksTUFJaER0YixFQUFNbWMsT0FBTytELEtBSWpCNUQsRUFBd0J0YyxFQUFNc0csSUFDMUIsMkJBQ0EsU0FBVUMsRUFBT0MsR0FBUXNXLEVBQW1CdFcsS0F2S3BELEdBR0ltVyxHQUNBQyxFQUtBTixFQVRBckMsRUFBTy9HLEVBQUdpQyxPQUFPMEcsRUFBUyxHQVk5QnBNLEdBQVE0USxTQUFXOWYsRUFBRStmLFNBQVNwRSxHQUk5QmxjLEVBQU0wUixPQUFPZ0ssRUFBT2piLEVBQWVXLFFBQVNxYixHQUk1Q3pjLEVBQU11Z0IsYUFBYzdFLEVBQU9qYixFQUFlWSxlQUFnQnFhLEVBQU9qYixFQUFlVyxTQUFXZ2IsR0FJM0ZwYyxFQUFNd2dCLGlCQUFpQmpnQixFQUFFK2YsU0FBU3hFLEdBQWVNLEdBSWpEcGMsRUFBTTBSLE9BQU9qUixFQUFlK2IsYUFBY0osR0FBSyxHQW9ZbkQsTUE5YUFuVSxHQUFZdEYsRUFBTXNGLFdBK2FkbEksU0FBWSxJQUNadUgsS0FBUXNVLEdBampCaEIsR0FBSTNULEVBcWpCSjdGLEdBQVVJLFNBQ04sVUFDQSxJQUNBLGdCQUNBLGdCQUNBLG9CQUdKaEQsRUFDS0ksT0FBTyx1QkFDUE8sVUFBVSxpQkFBa0JpQyxJQUVsQzVDLFFBQVMwVDtDQ3JrQlosU0FBVzFULEdBQ1AsWUFJQSxTQUFTaWhCLEdBQW1Cdk8sR0FDeEIsTUFBTyxVQUFTb0ksR0FDWixNQUFPcEksR0FBSW9JLEVBQUV0WSxPQUlyQixRQUFTMGUsR0FBc0JyZixHQUMzQixNQUFPLFVBQVVtQyxHQUNiLE1BQU9BLEdBQU9oQyxNQUFNb0QsZUFBZWEsUUFBVXBFLEdBSXJELFFBQVNzZixHQUF5Qm5kLEdBQzlCLE9BQ0lSLEdBQU1RLEVBQU9SLEdBQ2J4QixNQUFTZ0MsR0FJakIsUUFBU29kLEdBQVNDLEdBQ2QsTUFBTyxVQUFVdk0sR0FDYixNQUFPQSxHQUFFdFIsS0FBTzZkLEdBSXhCLFFBQVNwZSxHQUFRRSxFQUFPbkMsRUFBV0UsRUFBZUMsR0FNOUMsUUFBU1MsR0FBT3VPLEdBS1osTUFKR2hOLEdBQU1rTyxTQUFTbEIsS0FDZG1SLEVBQVVuUixHQUdQbVIsRUFHWCxRQUFTemYsR0FBY3NPLEdBS25CLE1BSkc0SyxVQUFTNUssSUFBTUEsR0FBSyxJQUNuQm9SLEVBQWlCcFIsR0FHZG9SLEVBR1gsUUFBU0MsR0FBaUIxUSxHQUN0QixNQUFLRSxPQUFNQyxRQUFRSCxHQUlaQSxFQUNGbkQsT0FBT3NULEVBQW1CL2YsRUFBY0ssbUJBQ3hDbVIsSUFBSXlPLEdBQ0p4VCxPQUFPdVQsRUFBc0JLLE9BR3RDLFFBQVNFLEdBQWlCN0csRUFBVXpKLEdBQ2hDLFFBQVN1USxHQUFzQmhZLEdBQzNCLEdBQUkyQyxHQUFjOEUsRUFBY3pILEVBQ2hDLE9BQU8yQyxHQUNGcUcsSUFBSSxTQUFVdkcsR0FDWCxHQUFJd1YsR0FBYS9HLEVBQVNnSCxVQUFVUixFQUFTalYsRUFBV2dULFNBQ3BEMEMsRUFBYWpILEVBQVNnSCxVQUFVUixFQUFTalYsRUFBV2tULFFBQ3hELFFBQVNGLE9BQVV3QyxFQUFZdEMsT0FBVXdDLEVBQVlyZixLQUFNa0gsS0FFOURpRSxPQUFPeEssRUFBTXNGLFdBR3RCLFFBQVNxWixHQUFrQzNWLEdBQ3ZDLFFBQVM0VixHQUFjQyxHQUNuQixNQUFPN2UsR0FBTXNGLFVBQVUwRCxFQUFXNlYsS0FBVTdWLEVBQVc2VixRQUUzRCxNQUFPRCxHQUFjLFdBQWFBLEVBQWMsVUFHcEQsUUFBU0UsR0FBbUJDLEVBQUtwTixHQUM3QixNQUFPb04sR0FBSXZQLE9BQU9tQyxHQUd0QixNQUFPaEQsUUFDRkMsS0FBS1osR0FDTHVCLElBQUlnUCxHQUNKMVAsT0FBT2lRLE1BQ1B0VSxPQUFPbVUsR0FDUG5VLE9BQU9zVCxFQUFtQjlmLEVBQWtCTSx1QkFHckQsUUFBU3ViLEtBQ0wsR0FBSTdMLEdBQWdCblEsRUFBVWtRLG1CQUMxQjBKLEVBQVc0RyxFQUFpQnhnQixFQUFVMkYsZ0JBRTFDLFFBQVNpVSxTQUFZQSxFQUFVZ0QsU0FBWTZELEVBQWlCN0csRUFBVXpKLElBbkUxRSxHQUFJL0osR0FBTy9GLEtBRVBrZ0IsRUFBaUIsRUFDakJELEVBQVUsV0FtRWRsYSxHQUFLNFYsYUFBZUEsRUFFcEI1VixFQUFLeEYsT0FBU0EsRUFDZHdGLEVBQUt2RixjQUFnQkEsRUFHekJvQixFQUFRRCxTQUNKLGdCQUNBLGdCQUNBLGdCQUNBLHFCQUdKaEQsRUFDS0ksT0FBTyx1QkFDUG9SLFFBQVEsbUJBQW9Cdk8sSUFFbENqRDtDQ3RISCxTQUFXQSxHQUVQLFlBRUEsU0FBU1ksR0FBV0osRUFBT1EsR0FDdkIsR0FBSUksR0FBS0MsSUFFVEQsR0FBRytnQixXQUFZLEVBQ2YvZ0IsRUFBR08sZUFBaUJYLEVBQVVXLGVBQzlCUCxFQUFHd0YsU0FBVzVGLEVBQVU2RixjQUV4QnJHLEVBQU1zRyxJQUFJLGlCQUFrQixXQUN4QjFGLEVBQUcrZ0IsV0FBWSxJQU12QixRQUFTdmYsS0FDTCxPQUNJckMsU0FBWSxJQUNaRCxZQUFlLHNEQUNmRyxXQUFjRyxFQUNka0MsYUFBZ0IsVUFDaEJ0QyxVQVJSSSxFQUFXb0MsU0FBVyxTQUFVLGlCQVloQ2hELEVBQ0tJLE9BQU8sZUFDUE8sVUFBVSxnQkFBaUJpQyxJQUVqQzVDLFFBQVMwVDtDQzdCWixTQUFVMVQsR0FDTixZQUVBQSxHQUFRSSxPQUFPLGVBQ1ZPLFVBQVUsUUFBUyxXQUNwQixPQUNJeWhCLFFBQVMsSUFDVEMsUUFBUyxXQUNUdmEsS0FBTSxTQUFTdEgsRUFBTzZiLEVBQVNpRyxFQUFPQyxHQUM3QixRQUFVRCxJQUFzQyxVQUE3QkEsRUFBTTlmLEtBQUtnZ0IsZUFDL0JELEVBQVFFLFNBQVN4WSxLQUFLeVksaUJBS3ZDMWlCO0NDbEJILFNBQVdBLEdBRVAsWUFFQSxTQUFTWSxHQUFXK0UsRUFBUTNFLEdBU3hCLFFBQVMyaEIsS0FDTDNoQixFQUFVNkUsWUFUZCxHQUFJekUsR0FBS0MsSUFFVEQsR0FBR3dGLFNBQVc1RixFQUFVNkYsY0FDeEJ6RixFQUFHdWhCLHNCQUF3QkEsRUFDM0J2aEIsRUFBR29PLE9BQVN4TyxFQUFVeU8sVUFFdEI5SixFQUFPbUIsSUFBSSwyQkFBNEIsU0FBVUMsRUFBT0MsR0FBUTVGLEVBQUdpRixjQUFnQlcsSUFVdkYsUUFBU3BFLEtBQ0wsT0FDSXJDLFNBQVksSUFDWkQsWUFBZSxrREFDZkcsV0FBY0csRUFDZGtDLGFBQWdCLFFBQ2hCdEMsVUFSUkksRUFBV29DLFNBQVcsU0FBVSxpQkFZaENoRCxFQUNLSSxPQUFPLGVBQ1BPLFVBQVUsY0FBZWlDLElBRS9CNUMsUUFBUzBUIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIG1haW5EZXBlbmRlbmN5TGlzdCA9IFtcbiAgICAgICAgXCJ1aS5ib290c3RyYXBcIixcbiAgICAgICAgXCJsZWFmbGV0LWRpcmVjdGl2ZVwiLFxuICAgICAgICBcIm5nQW5pbWF0ZVwiLFxuICAgICAgICBcInRlbXBsYXRlQ2FjaGVcIixcbiAgICAgICAgXCJjaXZpYy1ncmFwaC51dGlsXCIsXG4gICAgICAgIFwiY2l2aWMtZ3JhcGguYXBpXCIsXG4gICAgICAgIFwiY2l2aWMtZ3JhcGgubmV0d29ya1wiXG4gICAgXTtcblxuICAgIHZhciBhcGlEZXBlbmRlbmN5TGlzdCA9IFtcImNpdmljLWdyYXBoLnV0aWxcIl07XG5cbiAgICB2YXIgbmV0d29ya0RlcGVuZGVuY3lMaXN0ID0gW1xuICAgICAgICBcImNpdmljLWdyYXBoLnV0aWxcIixcbiAgICAgICAgXCJjaXZpYy1ncmFwaC5hcGlcIlxuICAgIF07XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoLnV0aWxcIiwgW10pO1xuICAgIGFuZ3VsYXIubW9kdWxlKFwiY2l2aWMtZ3JhcGguYXBpXCIsIGFwaURlcGVuZGVuY3lMaXN0KTtcbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoLm5ldHdvcmtcIiwgbmV0d29ya0RlcGVuZGVuY3lMaXN0KTtcbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoXCIsIG1haW5EZXBlbmRlbmN5TGlzdCk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA3LzEvMTYuXG4gKi9cblxuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBhbmFseXRpY3NEZXBlbmRlbmNpZXMgPSBbYW5hbHl0aWNzRGlyZWN0aXZlXTtcblxuICAgIGZ1bmN0aW9uIGFuYWx5dGljc0RpcmVjdGl2ZSgpe1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdqcy9hbmFseXRpYy9hbmFseXRpY3MuaHRtbCcsXG4gICAgICAgICAgICByZXN0cmljdCAgIDogJ0UnLFxuICAgICAgICAgICAgc2NvcGUgICAgICA6IHt9LFxuICAgICAgICAgICAgY29udHJvbGxlciAgIDogJ2FuYWx5dGljc0N0cmwnXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnYW5hbHl0aWNzJywgYW5hbHl0aWNzRGVwZW5kZW5jaWVzKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMTAvMTYuXG4gKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIENvbnRyb2xsZXIoJHJvb3RTY29wZSwgJG1vZGFsLCBfLCBjZ1NlcnZpY2UsIG5ldHdvcmtTZXJ2aWNlLCBlbnRpdHlTZXJ2aWNlLCBjb25uZWN0aW9uU2VydmljZSkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIHZtLmVudGl0eVR5cGVzID0gZW50aXR5U2VydmljZS5nZXRFbnRpdHlUeXBlcygpO1xuICAgICAgICB2bS5jb25uZWN0aW9uVHlwZXMgPSBjb25uZWN0aW9uU2VydmljZS5nZXRDb25uZWN0aW9uVHlwZXMoKTtcbiAgICAgICAgdm0uY3VycmVudFZpZXcgPSBjZ1NlcnZpY2UuZ2V0Q3VycmVudFZpZXcoKTtcblxuICAgICAgICB2bS5zaXplQnkgPSBuZXR3b3JrU2VydmljZS5zaXplQnkoKTtcbiAgICAgICAgdm0ubWluQ29ubmVjdGlvbiA9IG5ldHdvcmtTZXJ2aWNlLm1pbkNvbm5lY3Rpb24oKTtcblxuICAgICAgICB2bS5zaXplQnlMaXN0ID0gW1xuICAgICAgICAgICAgeyBcIm5hbWVcIjogXCJFbXBsb3llZXNcIiwgXCJ2YWx1ZVwiOiBcImVtcGxveWVlc1wiIH0sXG4gICAgICAgICAgICB7IFwibmFtZVwiOiBcIlR3aXR0ZXIgRm9sbG93ZXJzXCIsIFwidmFsdWVcIjogXCJmb2xsb3dlcnNcIiB9XG4gICAgICAgIF07XG5cbiAgICAgICAgdm0uY2hhbmdlTWluQ29ubmVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG5ldHdvcmtTZXJ2aWNlLm1pbkNvbm5lY3Rpb24odm0ubWluQ29ubmVjdGlvbik7XG4gICAgICAgIH07XG5cbiAgICAgICAgdm0uY2hhbmdlVmlldyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNnU2VydmljZS5zZXRDdXJyZW50Vmlldyh2bS5jdXJyZW50Vmlldyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdm0uc2hvd0Fib3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJG1vZGFsLm9wZW4oe1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiY29udHJvbC9hYm91dC5odG1sXCIsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogXCJtb2RhbEN0cmxcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdm0udG9nZ2xlTGluayA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoXCJ0b2dnbGVMaW5rXCIsIHtcbiAgICAgICAgICAgICAgICBcIm5hbWVcIjogdHlwZSwgXCJlbmFibGVkXCI6IHZtLmNvbm5lY3Rpb25UeXBlc1t0eXBlXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdm0uY2hhbmdlU2l6ZUJ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbmV0d29ya1NlcnZpY2Uuc2l6ZUJ5KHZtLnNpemVCeSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgQ29udHJvbGxlci4kaW5qZWN0ID0gW1xuICAgICAgICBcIiRyb290U2NvcGVcIixcbiAgICAgICAgXCIkdWliTW9kYWxcIixcbiAgICAgICAgXCJfXCIsXG4gICAgICAgIFwiY2dNYWluU2VydmljZVwiLFxuICAgICAgICBcImNnTmV0d29ya1NlcnZpY2VcIixcbiAgICAgICAgXCJlbnRpdHlTZXJ2aWNlXCIsXG4gICAgICAgIFwiY29ubmVjdGlvblNlcnZpY2VcIlxuICAgIF07XG5cbiAgICBmdW5jdGlvbiBEaXJlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJqcy9jb250cm9sL2NvbnRyb2wudGVtcGxhdGUuaHRtbFwiLFxuICAgICAgICAgICAgcmVzdHJpY3QgICA6IFwiRVwiLFxuICAgICAgICAgICAgc2NvcGUgICAgICA6IHtcbiAgICAgICAgICAgICAgICB0b2dnbGVOZXR3b3JrIDogXCI9XCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb250cm9sbGVyICAgOiBDb250cm9sbGVyLFxuICAgICAgICAgICAgY29udHJvbGxlckFzIDogXCJjb250cm9sXCIsXG4gICAgICAgICAgICBiaW5kVG9Db250cm9sbGVyIDogdHJ1ZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoXCIpXG4gICAgICAgIC5kaXJlY3RpdmUoXCJjb250cm9sXCIsIERpcmVjdGl2ZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI4LzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBTZXJ2aWNlKGFwaUNhbGxlciwgdXRpbHMpIHtcblxuICAgICAgICBmdW5jdGlvbiBDYXRlZ29yeShvYmopIHtcbiAgICAgICAgICAgIHZhciBnZXRQcm9wZXJ0eSA9IHV0aWxzLmdldFByb3BlcnR5RnJvbU9iaihvYmopO1xuXG4gICAgICAgICAgICB0aGlzLmlkID0gZ2V0UHJvcGVydHkoXCJpZFwiKTtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IGdldFByb3BlcnR5KFwibmFtZVwiKTtcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlZCA9IGdldFByb3BlcnR5KFwiZW5hYmxlXCIsIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Q2F0ZWdvcnlNb2RlbChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2F0ZWdvcnkob2JqKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEFsbCgpIHtcbiAgICAgICAgICAgIHJldHVybiBhcGlDYWxsZXIuZ2V0KFwiL2NhdGVnb3JpZXNcIik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJnZXRDYXRlZ29yeU1vZGVsXCI6IGdldENhdGVnb3J5TW9kZWwsXG4gICAgICAgICAgICBcImdldEFsbFwiOiBnZXRBbGxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBTZXJ2aWNlLiRpbmplY3QgPSBbXCJjZ0FwaUNhbGxlclwiLCBcImNnVXRpbFNlcnZpY2VcIl07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIilcbiAgICAgICAgLmZhY3RvcnkoXCJjYXRlZ29yeVNlcnZpY2VcIiwgU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxuICovXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIHVybCA9IFwiL2Nvbm5lY3Rpb25zXCI7XG5cbiAgICB2YXIgY29ubmVjdGlvblR5cGVPYmogPSB7XG4gICAgICAgIFwiRnVuZGluZ1wiOiB0cnVlLFxuICAgICAgICBcIkRhdGFcIjogdHJ1ZSxcbiAgICAgICAgXCJFbXBsb3ltZW50XCI6IHRydWUsXG4gICAgICAgIFwiQ29sbGFib3JhdGlvblwiOiB0cnVlXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGdldENvbm5lY3Rpb25UeXBlcygpIHtcbiAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb25UeXBlT2JqO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFNlcnZpY2UoYXBpQ2FsbGVyLCB1dGlscykge1xuXG4gICAgICAgIGZ1bmN0aW9uIENvbm5lY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICB2YXIgZ2V0UHJvcGVydHkgPSB1dGlscy5nZXRQcm9wZXJ0eUZyb21PYmoob2JqKTtcblxuICAgICAgICAgICAgdGhpcy5pZCA9IGdldFByb3BlcnR5KFwiaWRcIik7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBnZXRQcm9wZXJ0eShcIm5hbWVcIik7XG4gICAgICAgICAgICB0aGlzLmRldGFpbHMgPSBnZXRQcm9wZXJ0eShcImRldGFpbHNcIik7XG4gICAgICAgICAgICB0aGlzLmVudGl0eSA9IGdldFByb3BlcnR5KFwiZW50aXR5XCIpO1xuICAgICAgICAgICAgdGhpcy5lbnRpdHlfaWQgPSBnZXRQcm9wZXJ0eShcImVudGl0eV9pZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldENvbm5lY3Rpb25Nb2RlbChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ29ubmVjdGlvbihvYmopO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0QWxsKCkge1xuICAgICAgICAgICAgcmV0dXJuIGFwaUNhbGxlci5nZXQodXJsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcImdldEFsbFwiOiBnZXRBbGwsXG4gICAgICAgICAgICBcImdldENvbm5lY3Rpb25UeXBlc1wiOiBnZXRDb25uZWN0aW9uVHlwZXMsXG4gICAgICAgICAgICBcImdldENvbm5lY3Rpb25Nb2RlbFwiOiBnZXRDb25uZWN0aW9uTW9kZWxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBTZXJ2aWNlLiRpbmplY3QgPSBbXCJjZ0FwaUNhbGxlclwiLCBcImNnVXRpbFNlcnZpY2VcIl07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIilcbiAgICAgICAgLmZhY3RvcnkoXCJjb25uZWN0aW9uU2VydmljZVwiLCBTZXJ2aWNlKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjcvMTYuXG4gKi9cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBTZXJ2aWNlKHV0aWxzKSB7XG4gICAgICAgIGZ1bmN0aW9uIEZpbmFuY2Uob2JqKSB7XG4gICAgICAgICAgICB2YXIgZ2V0UHJvcGVydHkgPSB1dGlscy5nZXRQcm9wZXJ0eUZyb21PYmoob2JqKTtcblxuICAgICAgICAgICAgdGhpcy5pZCA9IGdldFByb3BlcnR5KFwiaWRcIik7XG4gICAgICAgICAgICB0aGlzLnllYXIgPSBnZXRQcm9wZXJ0eShcInllYXJcIik7XG4gICAgICAgICAgICB0aGlzLmFtb3VudCA9IGdldFByb3BlcnR5KFwiYW1vdW50XCIsIDApO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RmluYW5jZU1vZGVsKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBGaW5hbmNlKG9iaik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJnZXRGaW5hbmNlTW9kZWxcIjogZ2V0RmluYW5jZU1vZGVsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgU2VydmljZS4kaW5qZWN0ID0gW1wiY2dVdGlsU2VydmljZVwiXTtcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKVxuICAgICAgICAuZmFjdG9yeShcImZpbmFuY2VTZXJ2aWNlXCIsIFNlcnZpY2UpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNy8xNi5cbiAqL1xuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIFNlcnZpY2UodXRpbHMpIHtcblxuICAgICAgICBmdW5jdGlvbiBGdW5kaW5nQ29ubmVjdGlvbihvYmopIHtcbiAgICAgICAgICAgIHZhciBnZXRQcm9wZXJ0eSA9IHV0aWxzLmdldFByb3BlcnR5RnJvbU9iaihvYmopO1xuXG4gICAgICAgICAgICB0aGlzLmlkID0gZ2V0UHJvcGVydHkoXCJpZFwiKTtcbiAgICAgICAgICAgIHRoaXMueWVhciA9IGdldFByb3BlcnR5KFwieWVhclwiKTtcbiAgICAgICAgICAgIHRoaXMuYW1vdW50ID0gZ2V0UHJvcGVydHkoXCJhbW91bnRcIik7XG4gICAgICAgICAgICB0aGlzLmVudGl0eSA9IGdldFByb3BlcnR5KFwiZW50aXR5XCIsIFwiXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRnVuZGluZ0Nvbm5lY3Rpb24ob2JqKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcImdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWxcIjogZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIFNlcnZpY2UuJGluamVjdCA9IFtcImNnVXRpbFNlcnZpY2VcIl07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIilcbiAgICAgICAgLmZhY3RvcnkoXCJmdW5kaW5nQ29ubmVjdGlvblNlcnZpY2VcIiwgU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBnZXRJdGVtc1Nob3duRGVmYXVsdCAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAna2V5X3Blb3BsZSc6IDMsXG4gICAgICAgICAgICAnZ3JhbnRzX2dpdmVuJzogMyxcbiAgICAgICAgICAgICdncmFudHNfcmVjZWl2ZWQnOiAzLFxuICAgICAgICAgICAgJ2ludmVzdG1lbnRzX21hZGUnOiAzLFxuICAgICAgICAgICAgJ2ludmVzdG1lbnRzX3JlY2VpdmVkJzogMyxcbiAgICAgICAgICAgICdjb2xsYWJvcmF0aW9ucyc6IDMsXG4gICAgICAgICAgICAnZW1wbG95bWVudHMnOiAzLFxuICAgICAgICAgICAgJ3JlbGF0aW9ucyc6IDMsXG4gICAgICAgICAgICAnZGF0YV9naXZlbic6IDMsXG4gICAgICAgICAgICAnZGF0YV9yZWNlaXZlZCc6IDMsXG4gICAgICAgICAgICAncmV2ZW51ZXMnOiAzLFxuICAgICAgICAgICAgJ2V4cGVuc2VzJzogM1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIENvbnRyb2xsZXIgKCRzY29wZSwgY2dTZXJ2aWNlLCB1dGlscywgXykge1xuICAgICAgICAkc2NvcGUuaXNNb2JpbGUgPSBjZ1NlcnZpY2UubW9iaWxlQ2hlY2soKTtcbiAgICAgICAgJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0ID0gZ2V0SXRlbXNTaG93bkRlZmF1bHQoKTtcbiAgICAgICAgJHNjb3BlLml0ZW1zU2hvd24gPSBnZXRJdGVtc1Nob3duRGVmYXVsdCgpO1xuICAgICAgICAkc2NvcGUuY3VycmVudEVudGl0eSA9IGNnU2VydmljZS5nZXRDdXJyZW50RW50aXR5KCk7XG5cbiAgICAgICAgJHNjb3BlLmVtaXRTdGFydEVkaXRFdmVudCA9IGVtaXRTdGFydEVkaXRFdmVudDtcbiAgICAgICAgJHNjb3BlLnNob3dNb3JlID0gc2hvd01vcmU7XG4gICAgICAgICRzY29wZS5zaG93TGVzcyA9IHNob3dMZXNzO1xuICAgICAgICAkc2NvcGUuc2VsZWN0SXRlbSA9IHNlbGVjdEl0ZW07XG5cbiAgICAgICAgJHNjb3BlLiRvbignY2cuY3VycmVudC1lbnRpdHkudXBkYXRlJywgZnVuY3Rpb24gKGV2ZW50LCBhcmdzKSB7IG9uQ3VycmVudEVudGl0eVVwZGF0ZShhcmdzKTsgfSk7XG5cbiAgICAgICAgZnVuY3Rpb24gZW1pdFN0YXJ0RWRpdEV2ZW50IChlbnRpdHkpIHtcbiAgICAgICAgICAgIGNnU2VydmljZS5zdGFydEVkaXQoZW50aXR5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNob3dNb3JlICh0eXBlKSB7XG4gICAgICAgICAgICAkc2NvcGUuaXRlbXNTaG93blsgdHlwZSBdID0gY2dTZXJ2aWNlLmdldEN1cnJlbnRFbnRpdHkoKVsgdHlwZSBdLmxlbmd0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNob3dMZXNzICh0eXBlKSB7XG4gICAgICAgICAgICAkc2NvcGUuaXRlbXNTaG93blsgdHlwZSBdID0gJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0WyB0eXBlIF07XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvbkN1cnJlbnRFbnRpdHlVcGRhdGUgKGN1cnJlbnRFbnRpdHkpIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50RW50aXR5ID0gY3VycmVudEVudGl0eTtcbiAgICAgICAgICAgIC8vIFJlc2V0IGl0ZW1zIHNob3duIGluIGRldGFpbHMgbGlzdC5cbiAgICAgICAgICAgICRzY29wZS5pdGVtc1Nob3duID0gZ2V0SXRlbXNTaG93bkRlZmF1bHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNlbGVjdEl0ZW0gKGl0ZW0pIHtcbiAgICAgICAgICAgIGNnU2VydmljZS5zZXRDdXJyZW50RW50aXR5KFxuICAgICAgICAgICAgICAgIHV0aWxzLmlzT2JqZWN0KGl0ZW0pXG4gICAgICAgICAgICAgICAgICAgID8gaXRlbVxuICAgICAgICAgICAgICAgICAgICA6IF8uZmluZChjZ1NlcnZpY2UuZ2V0RW50aXR5TGlzdCgpLCB7ICdpZCc6IGl0ZW0gfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIENvbnRyb2xsZXIuJGluamVjdCA9IFsgJyRzY29wZScsICdjZ01haW5TZXJ2aWNlJywgJ2NnVXRpbFNlcnZpY2UnLCAnXycgXTtcblxuICAgIGZ1bmN0aW9uIERpcmVjdGl2ZSAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdqcy9kZXRhaWwvZGV0YWlscy50ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IENvbnRyb2xsZXJcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnY2dEZXRhaWxQYW5lJywgRGlyZWN0aXZlKTtcbiAgICAvLyAuY29udHJvbGxlcihcImRldGFpbHNDdHJsXCIsIENvbnRyb2xsZXIpO1xuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhciwgJCkge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gbGlua0Z1bmN0aW9uKHNjb3BlKSB7XG5cbiAgICAgICAgZnVuY3Rpb24gc2Nyb2xsKCkge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSAkKHRoaXMpO1xuICAgICAgICAgICAgc2VsZi5jc3MoJ2hlaWdodCcsICc1NXZoJyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjbGljaygpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gJCh0aGlzKTtcbiAgICAgICAgICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgLyAzID4gcGFyc2VJbnQoc2VsZi5jc3MoJ2hlaWdodCcpKSkge1xuICAgICAgICAgICAgICAgIHNlbGYuY3NzKCdoZWlnaHQnLCAnNTV2aCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxmLmNzcygnaGVpZ2h0JywgJzMwdmgnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkZXRhaWxzUGFuZWw7XG4gICAgICAgIGlmIChzY29wZS5tb2JpbGUpIHtcbiAgICAgICAgICAgIGRldGFpbHNQYW5lbCA9ICQoXCIjZGV0YWlscy1wYW5lbFwiKTtcbiAgICAgICAgICAgIGRldGFpbHNQYW5lbC5jc3MoXCJoZWlnaHRcIiwgXCIzMHZoXCIpO1xuICAgICAgICAgICAgZGV0YWlsc1BhbmVsLnNjcm9sbFRvcCgwKTtcbiAgICAgICAgICAgIGRldGFpbHNQYW5lbC5zY3JvbGwoc2Nyb2xsKTtcbiAgICAgICAgICAgIGRldGFpbHNQYW5lbC5jbGljayhjbGljayk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRNb2JpbGVFdmVudHMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICAgICAgbGluazogbGlua0Z1bmN0aW9uXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnYWRkTW9iaWxlRXZlbnRzJywgW2FkZE1vYmlsZUV2ZW50c10pO1xufSkoYW5ndWxhciwgJCk7XG4iLCIoZnVuY3Rpb24oYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gbW9kYWxDdHJsKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UpIHtcbiAgICAgICAgJHNjb3BlLmNsb3NlV2luZG93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJG1vZGFsSW5zdGFuY2UuY2xvc2UoKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29udHJvbGxlcignbW9kYWxDdHJsJywgWyckc2NvcGUnLCAnJG1vZGFsSW5zdGFuY2UnLCBtb2RhbEN0cmxdKTtcblxufSkoYW5ndWxhcik7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBDb250cm9sbGVyICgkc2NvcGUsICRodHRwLCAkdGltZW91dCwgXywgY2dTZXJ2aWNlLCBlbnRpdHlTZXJ2aWNlLCBjYXRlZ29yeVNlcnZpY2UsIGxvY2F0aW9uU2VydmljZSwgdXRpbHMpIHtcbiAgICAgICAgdmFyIGNhdGVnb3J5QmFja3VwO1xuXG4gICAgICAgIGFjdGl2YXRlKCk7XG5cbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUgKCkge1xuICAgICAgICAgICAgJHNjb3BlLmlzRWRpdGluZyA9IHV0aWxzLmlzRGVmaW5lZChjZ1NlcnZpY2UuZ2V0Q3VycmVudEVudGl0eSgpKTtcbiAgICAgICAgICAgICRzY29wZS5lbnRpdGllcyA9IGNnU2VydmljZS5nZXRFbnRpdHlMaXN0KCk7XG4gICAgICAgICAgICAkc2NvcGUuZWRpdEVudGl0eSA9IGVudGl0eVNlcnZpY2UuZ2V0RW50aXR5TW9kZWwoY2dTZXJ2aWNlLmdldEN1cnJlbnRFbnRpdHkoKSk7XG4gICAgICAgICAgICAkc2NvcGUuZW50aXR5VHlwZXMgPSBlbnRpdHlTZXJ2aWNlLmdldEVudGl0eVR5cGVzKCk7XG4gICAgICAgICAgICAkc2NvcGUuaW5mbHVlbmNlVHlwZXMgPSBlbnRpdHlTZXJ2aWNlLmdldEluZmx1ZW5jZVR5cGVzKCk7XG4gICAgICAgICAgICAkc2NvcGUuY2F0ZWdvcmllcyA9IFtdO1xuXG4gICAgICAgICAgICAvLyBSZXRyaWV2ZSBDYXRlZ29yaWVzIGZyb20gREJcbiAgICAgICAgICAgIGlmICggIWNhdGVnb3J5QmFja3VwICkge1xuICAgICAgICAgICAgICAgIGNhdGVnb3J5U2VydmljZVxuICAgICAgICAgICAgICAgICAgICAuZ2V0QWxsKClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5QmFja3VwID0gZGF0YS5jYXRlZ29yaWVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlcyBiYWNrdXAgb2YgZGF0YSB1c2luZyBBbmd1bGFyIHRvIHByZXZlbnQgYXBpIGRhdGEgZnJvbSBiZWluZyB0YW1wZXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGlyZWN0bHlcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jYXRlZ29yaWVzID0gYW5ndWxhci5jb3B5KGNhdGVnb3J5QmFja3VwKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdENhdGVnb3J5QXJyYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2F0ZWdvcmllcyA9IGNhdGVnb3J5QmFja3VwO1xuICAgICAgICAgICAgICAgIGluaXRDYXRlZ29yeUFycmF5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuJG9uKCdjZy5jdXJyZW50LWVudGl0eS51cGRhdGUnLCBhY3RpdmF0ZSk7XG5cbiAgICAgICAgJHNjb3BlLmFkZHJlc3NTZWFyY2ggPSBhZGRyZXNzU2VhcmNoO1xuICAgICAgICAkc2NvcGUudG9nZ2xlQ2F0ZWdvcnkgPSB0b2dnbGVDYXRlZ29yeTtcbiAgICAgICAgJHNjb3BlLnNldExvY2F0aW9uID0gc2V0TG9jYXRpb247XG4gICAgICAgICRzY29wZS5hZGRMb2NhdGlvbiA9IGFkZExvY2F0aW9uO1xuICAgICAgICAkc2NvcGUuYWRkS2V5UGVyc29uID0gYWRkS2V5UGVyc29uO1xuICAgICAgICAkc2NvcGUuc2V0RnVuZGluZ0Nvbm5lY3Rpb24gPSBzZXRGdW5kaW5nQ29ubmVjdGlvbjtcbiAgICAgICAgJHNjb3BlLmFkZEZ1bmRpbmdDb25uZWN0aW9uID0gYWRkRnVuZGluZ0Nvbm5lY3Rpb247XG4gICAgICAgICRzY29wZS5zZXRDb25uZWN0aW9uID0gc2V0Q29ubmVjdGlvbjtcbiAgICAgICAgJHNjb3BlLmFkZENvbm5lY3Rpb24gPSBhZGRDb25uZWN0aW9uO1xuICAgICAgICAkc2NvcGUuYWRkRmluYW5jZSA9IGFkZEZpbmFuY2U7XG4gICAgICAgICRzY29wZS5zYXZlID0gc2F2ZTtcbiAgICAgICAgJHNjb3BlLmNhbmNlbEVkaXQgPSBjYW5jZWxFZGl0O1xuXG4gICAgICAgIGZ1bmN0aW9uIGFkZHJlc3NTZWFyY2ggKHNlYXJjaCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmpzb25wKCdodHRwczovL2Rldi52aXJ0dWFsZWFydGgubmV0L1JFU1QvdjEvTG9jYXRpb25zJywge1xuICAgICAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICBxdWVyeTogc2VhcmNoLFxuICAgICAgICAgICAgICAgICAgICBrZXk6ICdBaTU4NTgxeUMtU3I3bWNGYllUdFVrUzNpeEU3ZjZadUpuYkZKQ1ZJNGhBdFcxWG9ERWVaeWlkUXoyZ0xDQ3lEJyxcbiAgICAgICAgICAgICAgICAgICAgJ2pzb25wJzogJ0pTT05fQ0FMTEJBQ0snLFxuICAgICAgICAgICAgICAgICAgICAnaW5jbHVkZSc6ICdjaXNvMidcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB1dGlscy5pc0RlZmluZWQocmVzcG9uc2UuZGF0YS5yZXNvdXJjZVNldHMpICYmIHJlc3BvbnNlLmRhdGEucmVzb3VyY2VTZXRzLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLnJlc291cmNlU2V0c1sgMCBdLnJlc291cmNlcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHRvZ2dsZUNhdGVnb3J5IChjYXRlZ29yeSkge1xuICAgICAgICAgICAgaWYgKCAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzLmxlbmd0aCA9PT0gMCApIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzLnB1c2goY2F0ZWdvcnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgY2F0ZWdvcnlJbmRleCBpbiAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzICkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoICEkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzLmhhc093blByb3BlcnR5KGNhdGVnb3J5SW5kZXgpICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGVudGl0eUNhdGVnb3J5ID0gJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllc1sgY2F0ZWdvcnlJbmRleCBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIGVudGl0eUNhdGVnb3J5LmlkID09PSBjYXRlZ29yeS5pZCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eUNhdGVnb3J5LmVuYWJsZWQgPSBjYXRlZ29yeS5lbmFibGVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCAhZm91bmQgKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMucHVzaChjYXRlZ29yeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0TG9jYXRpb24gKGxvY2F0aW9uLCBpc0xhc3QpIHtcbiAgICAgICAgICAgIGFkZHJlc3NTZWFyY2gobG9jYXRpb24uZm9ybWF0dGVkQWRkcmVzcylcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoYXBpQ2FsbFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoICF1dGlscy5pc0RlZmluZWQoYXBpQ2FsbFJlc3VsdFsgMCBdKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ICA9IGFwaUNhbGxSZXN1bHRbIDAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgPSByZXN1bHQuYWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50ICAgPSByZXN1bHQucG9pbnQ7XG4gICAgICAgICAgICAgICAgICAgIGFkZExvY2F0aW9uKGlzTGFzdCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUGFyc2VzIEFQSSBjYWxsIHJlc3VsdFxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5hZGRyZXNzX2xpbmUgPSB1dGlscy5pc0RlZmluZWQoYWRkcmVzcy5hZGRyZXNzTGluZSkgPyBhZGRyZXNzLmFkZHJlc3NMaW5lIDogJyc7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmxvY2FsaXR5ID0gdXRpbHMuaXNEZWZpbmVkKGFkZHJlc3MubG9jYWxpdHkpID8gYWRkcmVzcy5sb2NhbGl0eSA6ICcnO1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5kaXN0cmljdCA9XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5pc0RlZmluZWQoYWRkcmVzcy5hZG1pbkRpc3RyaWN0KSA/IGFkZHJlc3MuYWRtaW5EaXN0cmljdCA6ICcnO1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5jb3VudHJ5ID1cbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxzLmlzRGVmaW5lZChhZGRyZXNzLmNvdW50cnlSZWdpb24pID8gYWRkcmVzcy5jb3VudHJ5UmVnaW9uIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uY291bnRyeV9jb2RlID1cbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxzLmlzRGVmaW5lZChhZGRyZXNzLmNvdW50cnlSZWdpb25Jc28yKSA/IGFkZHJlc3MuY291bnRyeVJlZ2lvbklzbzIgOiAnJztcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uY29vcmRpbmF0ZXMgPSB1dGlscy5pc0RlZmluZWQocG9pbnQuY29vcmRpbmF0ZXMpID8gcG9pbnQuY29vcmRpbmF0ZXMgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5wb3N0YWxfY29kZSA9IHV0aWxzLmlzRGVmaW5lZChhZGRyZXNzLnBvc3RhbENvZGUpID8gYWRkcmVzcy5wb3N0YWxDb2RlIDogbnVsbDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGFkZExvY2F0aW9uIChpc0xhc3QpIHtcbiAgICAgICAgICAgIGlmICggaXNMYXN0ICkge1xuICAgICAgICAgICAgICAgICRzY29wZS5lZGl0RW50aXR5LmxvY2F0aW9ucy5wdXNoKGxvY2F0aW9uU2VydmljZS5nZXRMb2NhdGlvbk1vZGVsKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYWRkS2V5UGVyc29uICgpIHtcbiAgICAgICAgICAgIC8vIEFkZCBibGFuayBmaWVsZCB0byBlZGl0IGlmIHRoZXJlIGFyZSBub25lLlxuICAgICAgICAgICAgLy8gV0FUQ0ggT1VUISBUT0RPOiBJZiBzb21lb25lIGRlbGV0ZXMgYW4gb2xkIHBlcnNvbiwgZGVsZXRlIHRoZWlyIGlkIHRvby5cbiAgICAgICAgICAgIC8vIGkuZS4gbWFrZSBzdXJlIG9sZC9jbGVhcmVkIGZvcm0gZmllbGRzIGFyZW4ndCBiZWluZyBlZGl0ZWQgaW50byBuZXcgcGVvcGxlLlxuICAgICAgICAgICAgaWYgKCAhKF8uc29tZSgkc2NvcGUuZWRpdEVudGl0eS5rZXlfcGVvcGxlLCB7ICduYW1lJzogJycsICdpZCc6IG51bGwgfSkpICkge1xuICAgICAgICAgICAgICAgICRzY29wZS5lZGl0RW50aXR5LmtleV9wZW9wbGUucHVzaCh7ICduYW1lJzogJycsICdpZCc6IG51bGwgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRGdW5kaW5nQ29ubmVjdGlvbiAoZW50aXR5LCBmdW5kaW5nKSB7XG4gICAgICAgICAgICAvLyBBZGQgb3RoZXIgZW50aXR5J3MgaWQgdG8gdGhpcyBmaW5hbmNlIGNvbm5lY3Rpb24uXG4gICAgICAgICAgICBmdW5kaW5nLmVudGl0eV9pZCA9IGVudGl0eS5pZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGFkZEZ1bmRpbmdDb25uZWN0aW9uIChmdW5kaW5nKSB7XG4gICAgICAgICAgICBpZiAoICFfLnNvbWUoZnVuZGluZywgeyAnZW50aXR5JzogJycgfSkgKSB7XG4gICAgICAgICAgICAgICAgLy8gTWF5YmUgc2V0IGFtb3VudCB0byAwIGluc3RlYWQgb2YgbnVsbD9cbiAgICAgICAgICAgICAgICBmdW5kaW5nLnB1c2goeyAnZW50aXR5JzogJycsICdhbW91bnQnOiBudWxsLCAneWVhcic6IG51bGwsICdpZCc6IG51bGwgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRDb25uZWN0aW9uIChlbnRpdHksIGNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uZW50aXR5X2lkID0gZW50aXR5LmlkO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYWRkQ29ubmVjdGlvbiAoY29ubmVjdGlvbnMpIHtcbiAgICAgICAgICAgIC8vIEFkZCBhbiBlbXB0eSBjb25uZWN0aW9uIHRvIGVkaXQgaWYgbm9uZSBleGlzdC5cbiAgICAgICAgICAgIGlmICggIV8uc29tZShjb25uZWN0aW9ucywgeyAnZW50aXR5JzogJycsICdpZCc6IG51bGwgfSkgKSB7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbnMucHVzaCh7ICdlbnRpdHknOiAnJywgJ2lkJzogbnVsbCwgJ2RldGFpbHMnOiBudWxsIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYWRkRmluYW5jZSAocmVjb3Jkcykge1xuICAgICAgICAgICAgLy8gQWRkIG5ldyBmaW5hbmNlIGZpZWxkIGlmIGFsbCBjdXJyZW50IGZpZWxkcyBhcmUgdmFsaWQuXG4gICAgICAgICAgICBpZiAoIF8uZXZlcnkocmVjb3JkcywgZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIuYW1vdW50ID4gMCAmJiByLnllYXIgPiAxNzUwO1xuICAgICAgICAgICAgICAgIH0pICkge1xuICAgICAgICAgICAgICAgIHJlY29yZHMucHVzaCh7ICdhbW91bnQnOiBudWxsLCAneWVhcic6IG51bGwsICdpZCc6IG51bGwgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzYXZlICgpIHtcbiAgICAgICAgICAgICRzY29wZS5pc1NhdmluZyA9IHRydWU7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3MgKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmlzU2F2aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLiRlbWl0KCdlZGl0RW50aXR5U3VjY2VzcycsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICBjYW5jZWxFZGl0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGVycm9yICgpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXNFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXNFcnJvciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbnRpdHlTZXJ2aWNlXG4gICAgICAgICAgICAgICAgLnNhdmVFbnRpdHkoJHNjb3BlLmVkaXRFbnRpdHkuZ2VuZXJhdGVEQk1vZGVsKCkpXG4gICAgICAgICAgICAgICAgLnRoZW4oc3VjY2VzcywgZXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY2FuY2VsRWRpdCAoKSB7XG4gICAgICAgICAgICBjZ1NlcnZpY2Uuc3RvcEVkaXQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0aWFsaXplcyBjYXRlZ29yeSBmaWVsZHMgd2l0aCBlbnRpdHkgdmFsdWVzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBMb29wcyB0aHJvdWdoIGNhdGVnb3J5IGluIGNhdGVnb3JpZXMgYW5kIGxvb3BzIHRocm91Z2ggY2F0ZWdvcnkgaW4gZW50aXR5LiBJZGVudGlmaWVzXG4gICAgICAgICAqIGNhdGVnb3JpZXMgZW5hYmxlZCBpbiB0aGUgZW50aXR5IGFuZCBzZXRzIGxvY2FsIGRpc3BsYXkgZGF0YS4gVGhpcyBpcyBiZWNhdXNlIHdlIGNyZWF0ZWRcbiAgICAgICAgICogYSBiYWNrdXAgb2YgZW50aXR5IGRhdGEgc28gdGhhdCB0aGUgYXBpIGRhdGEgaXMgbm90IHRhbXBlcmVkIHdpdGggZGlyZWN0bHkuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRPRE86IHJlcGxhY2Ugd2l0aCBiZXR0ZXIgZGF0YSBzdHJ1Y3R1cmUgZm9yIGNhdGVnb3JpZXMuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBpbml0Q2F0ZWdvcnlBcnJheSAoKSB7XG4gICAgICAgICAgICB2YXIgY2F0ZWdvcnksXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnlJbmRleCxcbiAgICAgICAgICAgICAgICBlbnRpdHlDYXRlZ29yeUluZGV4LFxuICAgICAgICAgICAgICAgIGVudGl0eUNhdGVnb3J5O1xuXG4gICAgICAgICAgICBmb3IgKCBjYXRlZ29yeUluZGV4IGluICRzY29wZS5jYXRlZ29yaWVzICkge1xuICAgICAgICAgICAgICAgIGlmICggISRzY29wZS5jYXRlZ29yaWVzLmhhc093blByb3BlcnR5KGNhdGVnb3J5SW5kZXgpICkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0ZWdvcnkgPSAkc2NvcGUuY2F0ZWdvcmllc1sgY2F0ZWdvcnlJbmRleCBdO1xuICAgICAgICAgICAgICAgIGZvciAoIGVudGl0eUNhdGVnb3J5SW5kZXggaW4gJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcyApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcy5oYXNPd25Qcm9wZXJ0eShlbnRpdHlDYXRlZ29yeUluZGV4KSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eUNhdGVnb3J5ID0gJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllc1sgZW50aXR5Q2F0ZWdvcnlJbmRleCBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIGNhdGVnb3J5LmlkID09PSBlbnRpdHlDYXRlZ29yeS5pZCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5LmVuYWJsZWQgPSBlbnRpdHlDYXRlZ29yeS5lbmFibGVkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgQ29udHJvbGxlci4kaW5qZWN0ID0gW1xuICAgICAgICAnJHNjb3BlJyxcbiAgICAgICAgJyRodHRwJyxcbiAgICAgICAgJyR0aW1lb3V0JyxcbiAgICAgICAgJ18nLFxuICAgICAgICAnY2dNYWluU2VydmljZScsXG4gICAgICAgICdlbnRpdHlTZXJ2aWNlJyxcbiAgICAgICAgJ2NhdGVnb3J5U2VydmljZScsXG4gICAgICAgICdsb2NhdGlvblNlcnZpY2UnLFxuICAgICAgICAnY2dVdGlsU2VydmljZSdcbiAgICBdO1xuXG4gICAgZnVuY3Rpb24gRGlyZWN0aXZlICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2pzL2VkaXQtZW50aXR5L2VkaXRFbnRpdHkudGVtcGxhdGUuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBDb250cm9sbGVyLFxuICAgICAgICAgICAgc2NvcGU6IHt9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2VkaXRFbnRpdHknLCBEaXJlY3RpdmUpO1xuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnN0YW50KCdfJywgd2luZG93Ll8pXG4gICAgICAgIC5jb25maWcoWyckbG9jYXRpb25Qcm92aWRlcicsICckY29tcGlsZVByb3ZpZGVyJyxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgkbG9jYXRpb25Qcm92aWRlciwgJGNvbXBpbGVQcm92aWRlcikge1xuICAgICAgICAgICAgICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAkY29tcGlsZVByb3ZpZGVyLmRlYnVnSW5mb0VuYWJsZWQodHJ1ZSk7XG4gICAgICAgICAgICB9XSlcbiAgICAgICAgLmZpbHRlcigndGhvdXNhbmRTdWZmaXgnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGlucHV0LCBkZWNpbWFscykge1xuICAgICAgICAgICAgICAgIHZhciBleHAsXG4gICAgICAgICAgICAgICAgICAgIHN1ZmZpeGVzID0gWydrJywgJ00nLCAnRycsICdUJywgJ1AnLCAnRSddO1xuXG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5pc05hTihpbnB1dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGlucHV0IDwgMTAwMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZXhwID0gTWF0aC5mbG9vcihNYXRoLmxvZyhpbnB1dCkgLyBNYXRoLmxvZygxMDAwKSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gKGlucHV0IC8gTWF0aC5wb3coMTAwMCwgZXhwKSkudG9GaXhlZChkZWNpbWFscykgKyBzdWZmaXhlc1tleHAgLSAxXTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gQ29udHJvbGxlciAoJHNjb3BlLCAkcSwgXywgdXRpbHMsIGNnU2VydmljZSwgZW50aXR5U2VydmljZSwgY29ubmVjdGlvblNlcnZpY2UpIHtcbiAgICAgICAgZnVuY3Rpb24gd2FpdCAobXMpIHtcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSkgeyBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKTsgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIC8vIEZvciB0aGUgc2VhcmNoIGJhclxuICAgICAgICB2bS5jdXJyZW50RW50aXR5ID0gbnVsbDtcblxuICAgICAgICB2bS5pc01vYmlsZSA9IGNnU2VydmljZS5tb2JpbGVDaGVjaygpO1xuXG4gICAgICAgIHZtLmlzRWRpdCA9IGNnU2VydmljZS5nZXRJc0VkaXQ7XG5cbiAgICAgICAgJHNjb3BlLnNlYXJjaEl0ZW1zID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkgPSB7IGVudGl0eTogbnVsbCB9O1xuICAgICAgICAkc2NvcGUuc2hvd3NlYXJjaE1CID0gZmFsc2U7XG4gICAgICAgICRzY29wZS5zdGF0dXMgPSB7XG4gICAgICAgICAgICAnaXNOZXR3b3JrU2hvd24nOiB0cnVlLFxuICAgICAgICAgICAgJ2xpY2Vuc2UnOiB0cnVlLFxuICAgICAgICAgICAgJ25ldHdvcmtMb2FkaW5nJzogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICAkc2NvcGUuc2V0dGluZ3NFbmFibGVkID0gIXZtLmlzTW9iaWxlO1xuXG4gICAgICAgICRzY29wZS5zaG93U2VhcmNoID0gc2hvd1NlYXJjaDtcbiAgICAgICAgJHNjb3BlLnRvZ2dsZVNldHRpbmdzID0gdG9nZ2xlU2V0dGluZ3M7XG4gICAgICAgICRzY29wZS5zdGFydEVkaXQgPSBzdGFydEVkaXQ7XG4gICAgICAgICRzY29wZS5zd2l0Y2hWaWV3ID0gc3dpdGNoVmlldztcblxuICAgICAgICAkc2NvcGUuJG9uKCdjZy5jdXJyZW50LWVudGl0eS51cGRhdGUnLCBmdW5jdGlvbiAoZXZlbnQsIGFyZ3MpIHsgdm0uY3VycmVudEVudGl0eSA9IGFyZ3M7IH0pO1xuICAgICAgICAkc2NvcGUuJG9uKCdlZGl0RW50aXR5U3VjY2VzcycsIG9uRWRpdEVudGl0eVN1Y2Nlc3MpO1xuICAgICAgICAkc2NvcGUuJG9uKCdjZy5zdGFydC1lZGl0Jywgc3RhcnRFZGl0KTtcblxuICAgICAgICAvLyBMZWF2aW5nIGhlcmUgZm9yIHRlc3RpbmcgcmVhc29ucy4gIFRoZSB3YWl0IG1ldGhvZCBpc24ndCBhY3R1YWxseSBuZWNlc3NhcnksIGJ1dCB1c2VmdWxcbiAgICAgICAgLy8gaWYgeW91IGRvbid0IGhhdmUgYSBsb3Qgb2YgZGF0YSBpbiB0aGUgZGF0YWJhc2UgYW5kIG5lZWQgdG8gc2ltdWxhdGUgYSBsYXJnZSByZXF1ZXN0LlxuICAgICAgICAvLyBUaGUgJHEuYWxsKCkgaXMgbmVjZXNzYXJ5IHRob3VnaCwgc28gaWYgeW91IHJlbW92ZSB3YWl0KCksIGxlYXZlIHRoZSAkcS5hbGwoKVxuICAgICAgICB3YWl0KDEwMDApXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRxLmFsbChbIGVudGl0eVNlcnZpY2UuZ2V0QWxsKCksIGNvbm5lY3Rpb25TZXJ2aWNlLmdldEFsbCgpIF0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZUxpc3QpIHtcbiAgICAgICAgICAgICAgICBjZ1NlcnZpY2Uuc2V0RW50aXR5TGlzdChyZXNwb25zZUxpc3RbIDAgXS5ub2Rlcyk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlYXJjaEl0ZW1zID0gcmVzcG9uc2VMaXN0WyAwIF0ubm9kZXM7XG5cbiAgICAgICAgICAgICAgICBjZ1NlcnZpY2Uuc2V0Q29ubmVjdGlvbk9iaihyZXNwb25zZUxpc3RbIDEgXS5jb25uZWN0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnY2cuZGF0YS1sb2FkZWQnKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIGh5ZGVQYXJ0aWFscyAoZXhjZXB0KSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGV4Y2VwdCkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NlYXJjaCc6XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zZXR0aW5nc0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2V0dGluZ3MnOlxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd3NlYXJjaE1CID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2VkaXQnOlxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3NFbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zaG93c2VhcmNoTUIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNldHRpbmdzRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd3NlYXJjaE1CID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNob3dTZWFyY2ggKCkge1xuICAgICAgICAgICAgaHlkZVBhcnRpYWxzKCdzZWFyY2gnKTtcbiAgICAgICAgICAgICRzY29wZS5zaG93c2VhcmNoTUIgPSAhJHNjb3BlLnNob3dzZWFyY2hNQjtcbiAgICAgICAgICAgIC8vICRzY29wZS4kYnJvYWRjYXN0KCdoaWRlTGljZW5zZScpO1xuICAgICAgICAgICAgJHNjb3BlLnN0YXR1cy5saWNlbnNlID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB0b2dnbGVTZXR0aW5ncyAoKSB7XG4gICAgICAgICAgICBoeWRlUGFydGlhbHMoJ3NldHRpbmdzJyk7XG4gICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3NFbmFibGVkID0gISRzY29wZS5zZXR0aW5nc0VuYWJsZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzdGFydEVkaXQgKCkge1xuICAgICAgICAgICAgaWYgKCB2bS5pc01vYmlsZSApIHtcbiAgICAgICAgICAgICAgICBoeWRlUGFydGlhbHMoJ2VkaXQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHN3aXRjaFZpZXcgKCkge1xuICAgICAgICAgICAgJHNjb3BlLnN0YXR1cy5pc05ldHdvcmtTaG93biA9ICEkc2NvcGUuc3RhdHVzLmlzTmV0d29ya1Nob3duO1xuICAgICAgICAgICAgaWYgKCAkc2NvcGUuc3RhdHVzLmlzTmV0d29ya1Nob3duICkge1xuICAgICAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCd0cmlnZ2VyTmV0d29ya0RyYXcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldEVudGl0aWVzIChlbnRpdGllcykge1xuICAgICAgICAgICAgJHNjb3BlLmVudGl0aWVzID0gZW50aXRpZXM7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvbkVkaXRFbnRpdHlTdWNjZXNzIChyZXNwb25zZSkge1xuICAgICAgICAgICAgc2V0RW50aXRpZXMocmVzcG9uc2Uubm9kZXMpO1xuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3RyaWdnZXJOZXR3b3JrRHJhdycpO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBDb250cm9sbGVyLiRpbmplY3QgPSBbXG4gICAgICAgICckc2NvcGUnLFxuICAgICAgICAnJHEnLFxuICAgICAgICAnXycsXG4gICAgICAgICdjZ1V0aWxTZXJ2aWNlJyxcbiAgICAgICAgJ2NnTWFpblNlcnZpY2UnLFxuICAgICAgICAnZW50aXR5U2VydmljZScsXG4gICAgICAgICdjb25uZWN0aW9uU2VydmljZSdcbiAgICBdO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgICAgLmNvbnRyb2xsZXIoJ2hvbWVDdHJsJywgQ29udHJvbGxlcik7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gJHJvb3RTY29wZSAtIE5vdCBwcm91ZCBvZiB0aGlzIGRlcGVuZGVuY3ksIGJ1dCB3aWxsIGhvcGVmdWxseSByZW1vdmUgc29tZSBoYXJkLWhpdHRpbmcgd2F0Y2hlcnNcbiAgICAgKiBAcGFyYW0gJHdpbmRvd1xuICAgICAqIEBwYXJhbSBfLCBsb2Rhc2ggbGlicmFyeSwgcmVhbGx5IG5lZWQgdG8gZ2V0IGFyb3VuZCB0byBpbXBsZW1lbnRpbmcgRVM2IGZvciBpbXBvcnRzIG9mIHRoaXMgc3R1ZmZcbiAgICAgKiBAcGFyYW0gdXRpbHNcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTZXJ2aWNlICgkcm9vdFNjb3BlLCAkd2luZG93LCBfLCB1dGlscykge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgdmFyIF9jdXJyZW50RW50aXR5ID0gbnVsbDtcblxuICAgICAgICB2YXIgaXNFZGl0ID0gZmFsc2U7XG5cbiAgICAgICAgdmFyIGF2YWlsYWJsZVZpZXdzID0gWyAnbmV0d29yaycsICdtYXAnIF07XG4gICAgICAgIHZhciBjdXJyZW50VmlldyA9ICduZXR3b3JrJztcblxuICAgICAgICB2YXIgZW50aXR5TGlzdCA9IFtdO1xuICAgICAgICB2YXIgY29ubmVjdGlvbk9iaiA9IHt9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRFbnRpdHkgKCkgeyByZXR1cm4gX2N1cnJlbnRFbnRpdHk7IH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRDdXJyZW50RW50aXR5IChvKSB7XG4gICAgICAgICAgICBpZiAoICFfLmlzRXF1YWwoX2N1cnJlbnRFbnRpdHksIG8pICkge1xuICAgICAgICAgICAgICAgIF9jdXJyZW50RW50aXR5ID0gbztcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ2NnLmN1cnJlbnQtZW50aXR5LnVwZGF0ZScsIF9jdXJyZW50RW50aXR5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG1vYmlsZUNoZWNrICgpIHtcbiAgICAgICAgICAgIHZhciByZWdleCA9IC8oYW5kcm9pZHxiYlxcZCt8bWVlZ28pLittb2JpbGV8YXZhbnRnb3xiYWRhXFwvfGJsYWNrYmVycnl8YmxhemVyfGNvbXBhbHxlbGFpbmV8ZmVubmVjfGhpcHRvcHxpZW1vYmlsZXxpcChob25lfG9kKXxpcmlzfGtpbmRsZXxsZ2UgfG1hZW1vfG1pZHB8bW1wfG1vYmlsZS4rZmlyZWZveHxuZXRmcm9udHxvcGVyYSBtKG9ifGluKWl8cGFsbSggb3MpP3xwaG9uZXxwKGl4aXxyZSlcXC98cGx1Y2tlcnxwb2NrZXR8cHNwfHNlcmllcyhbNDZdKTB8c3ltYmlhbnx0cmVvfHVwXFwuKGJyb3dzZXJ8bGluayl8dm9kYWZvbmV8d2FwfHdpbmRvd3MgY2V8eGRhfHhpaW5vL2k7XG4gICAgICAgICAgICB2YXIgcmVnZXgyID0gLzEyMDd8NjMxMHw2NTkwfDNnc298NHRocHw1MFsxLTZdaXw3NzBzfDgwMnN8YSB3YXxhYmFjfGFjKGVyfG9vfHMtKXxhaShrb3xybil8YWwoYXZ8Y2F8Y28pfGFtb2l8YW4oZXh8bnl8eXcpfGFwdHV8YXIoY2h8Z28pfGFzKHRlfHVzKXxhdHR3fGF1KGRpfC1tfHIgfHMgKXxhdmFufGJlKGNrfGxsfG5xKXxiaShsYnxyZCl8YmwoYWN8YXopfGJyKFtldl0pd3xidW1ifGJ3LShbbnVdKXxjNTVcXC98Y2FwaXxjY3dhfGNkbS18Y2VsbHxjaHRtfGNsZGN8Y21kLXxjbyhtcHxuZCl8Y3Jhd3xkYShpdHxsbHxuZyl8ZGJ0ZXxkYy1zfGRldml8ZGljYXxkbW9ifGRvKFtjcF0pb3xkcygxMnwtZCl8ZWwoNDl8YWkpfGVtKGwyfHVsKXxlcihpY3xrMCl8ZXNsOHxleihbNC03XTB8b3N8d2F8emUpfGZldGN8Zmx5KFstX10pfGcxIHV8ZzU2MHxnZW5lfGdmLTV8Zy1tb3xnbyhcXC53fG9kKXxncihhZHx1bil8aGFpZXxoY2l0fGhkLShbbXB0XSl8aGVpLXxoaShwdHx0YSl8aHAoIGl8aXApfGhzLWN8aHQoYyhbLSBfYWdwc3RdKXx0cCl8aHUoYXd8dGMpfGktKDIwfGdvfG1hKXxpMjMwfGlhYyhbIC0vXSl8aWJyb3xpZGVhfGlnMDF8aWtvbXxpbTFrfGlubm98aXBhcXxpcmlzfGphKFt0dl0pYXxqYnJvfGplbXV8amlnc3xrZGRpfGtlaml8a2d0KFsgL10pfGtsb258a3B0IHxrd2MtfGt5byhbY2tdKXxsZShub3x4aSl8bGcoIGd8XFwvKFtrbHVdKXw1MHw1NHwtW2Etd10pfGxpYnd8bHlueHxtMS13fG0zZ2F8bTUwXFwvfG1hKHRlfHVpfHhvKXxtYygwMXwyMXxjYSl8bS1jcnxtZShyY3xyaSl8bWkobzh8b2F8dHMpfG1tZWZ8bW8oMDF8MDJ8Yml8ZGV8ZG98dChbLSBvdl0pfHp6KXxtdCg1MHxwMXx2ICl8bXdicHxteXdhfG4xMFswLTJdfG4yMFsyLTNdfG4zMChbMDJdKXxuNTAoWzAyNV0pfG43KDAoWzAxXSl8MTApfG5lKChbY21dKS18b258dGZ8d2Z8d2d8d3QpfG5vayhbNmldKXxuenBofG8yaW18b3AodGl8d3YpfG9yYW58b3dnMXxwODAwfHBhbihbYWR0XSl8cGR4Z3xwZygxM3wtKFsxLThdfGMpKXxwaGlsfHBpcmV8cGwoYXl8dWMpfHBuLTJ8cG8oY2t8cnR8c2UpfHByb3h8cHNpb3xwdC1nfHFhLWF8cWMoMDd8MTJ8MjF8MzJ8NjB8LVsyLTddfGktKXxxdGVrfHIzODB8cjYwMHxyYWtzfHJpbTl8cm8odmV8em8pfHM1NVxcL3xzYShnZXxtYXxtbXxtc3xueXx2YSl8c2MoMDF8aC18b298cC0pfHNka1xcL3xzZShjKFstMDFdKXw0N3xtY3xuZHxyaSl8c2doLXxzaGFyfHNpZShbLW1dKXxzay0wfHNsKDQ1fGlkKXxzbShhbHxhcnxiM3xpdHx0NSl8c28oZnR8bnkpfHNwKDAxfGgtfHYtfHYgKXxzeSgwMXxtYil8dDIoMTh8NTApfHQ2KDAwfDEwfDE4KXx0YShndHxsayl8dGNsLXx0ZGctfHRlbChbaW1dKXx0aW0tfHQtbW98dG8ocGx8c2gpfHRzKDcwfG0tfG0zfG01KXx0eC05fHVwKFxcLmJ8ZzF8c2kpfHV0c3R8djQwMHx2NzUwfHZlcml8dmkocmd8dGUpfHZrKDQwfDVbMC0zXXwtdil8dm00MHx2b2RhfHZ1bGN8dngoNTJ8NTN8NjB8NjF8NzB8ODB8ODF8ODN8ODV8OTgpfHczYyhbLSBdKXx3ZWJjfHdoaXR8d2koZyB8bmN8bncpfHdtbGJ8d29udXx4NzAwfHlhcy18eW91cnx6ZXRvfHp0ZS0vaTtcbiAgICAgICAgICAgIHZhciBhZ2VudENoZWNrID0gJHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50IHx8ICR3aW5kb3cubmF2aWdhdG9yLnZlbmRvciB8fCAkd2luZG93Lm9wZXJhO1xuXG4gICAgICAgICAgICByZXR1cm4gcmVnZXgudGVzdChhZ2VudENoZWNrKSB8fCByZWdleDIudGVzdChhZ2VudENoZWNrLnN1YnN0cigwLCA0KSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRFbnRpdHlMaXN0ICgpIHsgcmV0dXJuIGVudGl0eUxpc3Q7IH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRFbnRpdHlMaXN0IChhKSB7XG4gICAgICAgICAgICBpZiAoIEFycmF5LmlzQXJyYXkoYSkgKSB7XG4gICAgICAgICAgICAgICAgZW50aXR5TGlzdCA9IGE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXQVJOSU5HLCBNVVRBQkxFISAgRXZlcnlvbmUgd2lsbCBzZWUgaWYgeW91IHVwZGF0ZSBwcm9wZXJ0aWVzIG9mIHRoaXNcbiAgICAgICAgZnVuY3Rpb24gZ2V0Q29ubmVjdGlvbk9iaiAoKSB7IHJldHVybiBjb25uZWN0aW9uT2JqOyB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0Q29ubmVjdGlvbk9iaiAobykge1xuICAgICAgICAgICAgaWYgKCB1dGlscy5pc09iamVjdChvKSApIHtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uT2JqID0gbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRWaWV3ICgpIHsgcmV0dXJuIGN1cnJlbnRWaWV3OyB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0Q3VycmVudFZpZXcgKHMpIHtcbiAgICAgICAgICAgIGlmICggdXRpbHMuaXNTdHJpbmcocykgJiYgYXZhaWxhYmxlVmlld3MuaW5jbHVkZXMocykgKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFZpZXcgPSBzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0SXNFZGl0ICgpIHtcbiAgICAgICAgICAgIHJldHVybiBpc0VkaXQ7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzdGFydEVkaXQoZW50aXR5KSB7XG4gICAgICAgICAgICBpZighaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgaXNFZGl0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzZXRDdXJyZW50RW50aXR5KGVudGl0eSk7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KFwiY2cuc3RhcnQtZWRpdFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHN0b3BFZGl0KCkge1xuICAgICAgICAgICAgaWYoaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgaXNFZGl0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KFwiY2cuc3RvcC1lZGl0XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5nZXRDdXJyZW50RW50aXR5ID0gZ2V0Q3VycmVudEVudGl0eTtcbiAgICAgICAgc2VsZi5zZXRDdXJyZW50RW50aXR5ID0gc2V0Q3VycmVudEVudGl0eTtcbiAgICAgICAgc2VsZi5tb2JpbGVDaGVjayA9IG1vYmlsZUNoZWNrO1xuICAgICAgICBzZWxmLmdldEVudGl0eUxpc3QgPSBnZXRFbnRpdHlMaXN0O1xuICAgICAgICBzZWxmLnNldEVudGl0eUxpc3QgPSBzZXRFbnRpdHlMaXN0O1xuICAgICAgICBzZWxmLmdldENvbm5lY3Rpb25PYmogPSBnZXRDb25uZWN0aW9uT2JqO1xuICAgICAgICBzZWxmLnNldENvbm5lY3Rpb25PYmogPSBzZXRDb25uZWN0aW9uT2JqO1xuICAgICAgICBzZWxmLmdldEN1cnJlbnRWaWV3ID0gZ2V0Q3VycmVudFZpZXc7XG4gICAgICAgIHNlbGYuc2V0Q3VycmVudFZpZXcgPSBzZXRDdXJyZW50VmlldztcbiAgICAgICAgc2VsZi5nZXRJc0VkaXQgPSBnZXRJc0VkaXQ7XG4gICAgICAgIHNlbGYuc3RhcnRFZGl0ID0gc3RhcnRFZGl0O1xuICAgICAgICBzZWxmLnN0b3BFZGl0ID0gc3RvcEVkaXQ7XG4gICAgfVxuXG4gICAgU2VydmljZS4kaW5qZWN0ID0gWyAnJHJvb3RTY29wZScsICckd2luZG93JywgJ18nLCAnY2dVdGlsU2VydmljZScgXTtcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuc2VydmljZSgnY2dNYWluU2VydmljZScsIFNlcnZpY2UpO1xuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gZmlsdGVyQnlQcm9wZXJ0eSAoa2V5LCB2YWx1ZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBlWyBrZXkgXSA9PT0gdmFsdWU7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gQ29udHJvbGxlciAoJHNjb3BlLCBlbnRpdHlTZXJ2aWNlLCBjZ1NlcnZpY2UpIHtcbiAgICAgICAgdmFyIGVudGl0eVR5cGVzID0gZW50aXR5U2VydmljZS5nZXRFbnRpdHlUeXBlcygpO1xuXG4gICAgICAgICRzY29wZS5jYXRlZ29yaXplZEVudGl0aWVzID0ge307XG5cbiAgICAgICAgJHNjb3BlLnVwZGF0ZUN1cnJlbnRFbnRpdHkgPSB1cGRhdGVDdXJyZW50RW50aXR5O1xuXG4gICAgICAgICRzY29wZS4kd2F0Y2goY2dTZXJ2aWNlLmdldEVudGl0eUxpc3QsIHdhdGNoRW50aXR5TGlzdCk7XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlQ3VycmVudEVudGl0eSAoZW50aXR5KSB7IGNnU2VydmljZS5zZXRDdXJyZW50RW50aXR5KGVudGl0eSk7IH1cblxuICAgICAgICBmdW5jdGlvbiB3YXRjaEVudGl0eUxpc3QgKCkge1xuICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3JpemVkRW50aXRpZXMgPSBPYmplY3RcbiAgICAgICAgICAgICAgICAua2V5cyhlbnRpdHlUeXBlcylcbiAgICAgICAgICAgICAgICAucmVkdWNlKGZ1bmN0aW9uIChyZXN1bHQsIHR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9iaiA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBvYmpbIHR5cGUgXSA9IGNnU2VydmljZS5nZXRFbnRpdHlMaXN0KCkuZmlsdGVyKGZpbHRlckJ5UHJvcGVydHkoJ3R5cGUnLCB0eXBlKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCByZXN1bHQsIG9iaik7XG4gICAgICAgICAgICAgICAgfSwge30pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQ29udHJvbGxlci4kaW5qZWN0ID0gWyAnJHNjb3BlJywgJ2VudGl0eVNlcnZpY2UnLCAnY2dNYWluU2VydmljZScgXTtcblxuICAgIGZ1bmN0aW9uIERpcmVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2pzL292ZXJ2aWV3L292ZXJ2aWV3LnRlbXBsYXRlLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogQ29udHJvbGxlclxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuZGlyZWN0aXZlKCdjZ092ZXJ2aWV3UGFuZScsIERpcmVjdGl2ZSk7XG4gICAgICAgIC8vIC5jb250cm9sbGVyKFwib3ZlcnZpZXdDdHJsXCIsIENvbnRyb2xsZXIpO1xuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBDZ1V0aWxTZXJ2aWNlXG4gICAgICogQHByb3BlcnR5IHtGdW5jdGlvbn0gaXNEZWZpbmVkXG4gICAgICogQHByb3BlcnR5IHtGdW5jdGlvbn0gaXNPYmplY3RcbiAgICAgKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBpc1N0cmluZ1xuICAgICAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGdldFByb3BlcnR5RnJvbU9ialxuICAgICAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGxvb3BBbmRJbml0XG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWZmIHR5cGVvZiBvIGlzIHVuZGVmaW5lZCBvciBvIGlzIG51bGxcbiAgICAgKiBAcGFyYW0gb1xuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzRGVmaW5lZChvKSB7XG4gICAgICAgIHJldHVybiAhKHR5cGVvZiBvID09PSBcInVuZGVmaW5lZFwiIHx8IG8gPT09IG51bGwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZmYgbyBpcyBkZWZpbmVkIGFuZCB0eXBlb2YgbyBpcyBvYmplY3QgYW5kIG8gaXMgbm90IGFycmF5XG4gICAgICogQHBhcmFtIG9cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc09iamVjdChvKSB7XG4gICAgICAgIHJldHVybiBpc0RlZmluZWQobykgJiYgIUFycmF5LmlzQXJyYXkobykgJiYgKHR5cGVvZiBvID09PSBcIm9iamVjdFwiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWZmIG8gaXMgZGVmaW5lZCBhbmQgdHlwZW9mIG8gaXMgc3RyaW5nXG4gICAgICogQHBhcmFtIG9cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc1N0cmluZyhvKSB7XG4gICAgICAgIHJldHVybiBpc0RlZmluZWQobykgJiYgdHlwZW9mIG8gPT09IFwic3RyaW5nXCI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG1ldGhvZCB0aGF0IHRha2VzIHRoZSBwcm9wZXJ0eSB0byBiZSBmb3VuZCBhbmQgYSBkZWZhdWx0IHZhbHVlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiAtIHRoZSBvYmplY3QgdG8gc2VhcmNoIGluXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldFByb3BlcnR5RnJvbU9iaihvYmopIHtcbiAgICAgICAgdmFyIGRlZk9iaiA9IGlzT2JqZWN0KG9iaikgPyBvYmogOiB7fTtcblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHByb3BlcnR5LCBkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGlzRGVmaW5lZChkZWZhdWx0VmFsdWUpID8gZGVmYXVsdFZhbHVlIDogbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBpc0RlZmluZWQoZGVmT2JqW3Byb3BlcnR5XSlcbiAgICAgICAgICAgICAgICA/IGRlZk9ialtwcm9wZXJ0eV1cbiAgICAgICAgICAgICAgICA6IHZhbHVlO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE5pY2UgdXRpbCBtZXRob2QgZm9yIGFwcGx5aW5nIHRoZSBjb25zdHJ1Y3RvciBtZXRob2QgZm9yIGEgY2xhc3MgdG8gYW4gYXJyYXkgb2Ygb2JqZWN0c1xuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheS48T2JqZWN0Pn0gbW9kZWxBcnJheVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGluaXRNb2RlbEZ1bmN0aW9uXG4gICAgICogQHJldHVybnMge0FycmF5LjwqPn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBsb29wQW5kSW5pdChtb2RlbEFycmF5LCBpbml0TW9kZWxGdW5jdGlvbikge1xuICAgICAgICB2YXIgbmV3QXJyYXkgPSBBcnJheS5pc0FycmF5KG1vZGVsQXJyYXkpXG4gICAgICAgICAgICA/IG1vZGVsQXJyYXkuZmlsdGVyKGlzT2JqZWN0KS5tYXAoaW5pdE1vZGVsRnVuY3Rpb24pXG4gICAgICAgICAgICA6IFtdO1xuXG4gICAgICAgIHJldHVybiBuZXdBcnJheS5jb25jYXQoW2luaXRNb2RlbEZ1bmN0aW9uKCldKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7Q2dVdGlsU2VydmljZX1cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTZXJ2aWNlKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJpc0RlZmluZWRcIjogaXNEZWZpbmVkLFxuICAgICAgICAgICAgXCJpc09iamVjdFwiOiBpc09iamVjdCxcbiAgICAgICAgICAgIFwiaXNTdHJpbmdcIjogaXNTdHJpbmcsXG5cbiAgICAgICAgICAgIFwiZ2V0UHJvcGVydHlGcm9tT2JqXCI6IGdldFByb3BlcnR5RnJvbU9iaixcbiAgICAgICAgICAgIFwibG9vcEFuZEluaXRcIjogbG9vcEFuZEluaXRcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaC51dGlsXCIpXG4gICAgICAgIC5mYWN0b3J5KFwiY2dVdGlsU2VydmljZVwiLCBTZXJ2aWNlKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMS8xNi5cbiAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIGFuYWx5dGljc0N0cmwoJHNjb3BlKSB7XG5cbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29udHJvbGxlcignYW5hbHl0aWNzQ3RybCcsIFsnJHNjb3BlJywgYW5hbHl0aWNzQ3RybF0pO1xufSkoYW5ndWxhcik7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIENvbmZpZygkaHR0cFByb3ZpZGVyKSB7XG4gICAgICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bXCJYLVJlcXVlc3RlZC1XaXRoXCJdID0gXCJYTUxIdHRwUmVxdWVzdFwiO1xuICAgIH1cblxuICAgIENvbmZpZy4kaW5qZWN0ID0gW1wiJGh0dHBQcm92aWRlclwiXTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiY2l2aWMtZ3JhcGguYXBpXCIpLmNvbmZpZyhDb25maWcpO1xuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgYXBpVXJsID0gXCJodHRwczovL2FwaS5jaXZpY2dyYXBoLmlvL2FwaVwiO1xuICAgIC8vdmFyIGFwaVVybCA9IFwiL2FwaVwiO1xuXG4gICAgdmFyIGRlZmF1bHRIZWFkZXIgPSB7XG4gICAgICAgIC8vIFwiRXZlbnQtTmFtZVwiOiBcIlRlc3QtRXZlbnRcIlxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBTZXJ2aWNlKCRodHRwLCAkcSkge1xuICAgICAgICBmdW5jdGlvbiBsb2dBcGlFcnJvcihlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJSZWNpZXZlZCBhbiBlcnJvciBmcm9tIEFQSSB3aXRoIHRoaXMgbWVzc2FnZTogJU9cIiwgZXJyLmRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChlcnIpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdW53cmFwQW5ndWxhckh0dHAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0KHVybCwgcGFyYW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHBcbiAgICAgICAgICAgICAgICAuZ2V0KGFwaVVybCArIHVybCwgeyBcInBhcmFtc1wiOiBwYXJhbXMsIFwiaGVhZGVyc1wiOiBkZWZhdWx0SGVhZGVyIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4odW53cmFwQW5ndWxhckh0dHAsIGxvZ0FwaUVycm9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHBvc3QodXJsLCBkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHBcbiAgICAgICAgICAgICAgICAucG9zdChhcGlVcmwgKyB1cmwsIGRhdGEsIHsgXCJoZWFkZXJzXCI6IGRlZmF1bHRIZWFkZXIgfSlcbiAgICAgICAgICAgICAgICAudGhlbih1bndyYXBBbmd1bGFySHR0cCwgbG9nQXBpRXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiZ2V0XCI6IGdldCxcbiAgICAgICAgICAgIFwicG9zdFwiOiBwb3N0XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgU2VydmljZS4kaW5qZWN0ID0gW1wiJGh0dHBcIiwgXCIkcVwiXTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiY2l2aWMtZ3JhcGguYXBpXCIpLmZhY3RvcnkoXCJjZ0FwaUNhbGxlclwiLCBTZXJ2aWNlKTtcblxufSkoYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIsIGQzLCBMKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBDb250cm9sbGVyKCRzY29wZSwgXywgbGVhZmxldERhdGEsIGNnU2VydmljZSkge1xuXG4gICAgICAgIGFjdGl2YXRlKCk7XG5cbiAgICAgICAgJHNjb3BlLiRvbihcImNnLmRhdGEtbG9hZGVkXCIsIGFjdGl2YXRlKTtcblxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICAgICAgICRzY29wZS5vcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIGNlbnRlciAgOiB7XG4gICAgICAgICAgICAgICAgICAgIGxhdCA6IDIwLjAwLFxuICAgICAgICAgICAgICAgICAgICBsbmcgOiAtNDAuMDAsXG4gICAgICAgICAgICAgICAgICAgIHpvb206IDNcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpbGVMYXllciAgICAgICAgIDogJ2h0dHBzOi8vYXBpLnRpbGVzLm1hcGJveC5jb20vdjQvbWFwYm94LmxpZ2h0L3t6fS97eH0ve3l9LnBuZz9hY2Nlc3NfdG9rZW49cGsuZXlKMUlqb2laR0YyYVdSc2NtNTBJaXdpWVNJNklqQTBNMlJrTnpNelpXSm1OekV6TkdZek1UZGhZVEV4WXpBeVptVTRaVEUxSW4wLlROWWxGdGEyVkl0cmtuNEwwWjlCSlEnLFxuICAgICAgICAgICAgICAgICAgICB0aWxlTGF5ZXJPcHRpb25zICA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGVjdFJldGluYTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldXNlVGlsZXMgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgem9vbUNvbnRyb2wgICAgICAgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRpb25Db250cm9sOiBmYWxzZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGxlYWZsZXREYXRhLmdldE1hcCgpLnRoZW4oaGFuZGxlTGVhZmxldERhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlUGllQ2hhcnQob3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIGRhdGEgICA9IG9wdGlvbnMuZGF0YTtcbiAgICAgICAgICAgIHZhciBwaWUgICAgPSBkMy5sYXlvdXRcbiAgICAgICAgICAgICAgICAucGllKClcbiAgICAgICAgICAgICAgICAuc29ydChudWxsKVxuICAgICAgICAgICAgICAgIC52YWx1ZShmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC52YWx1ZTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIGFyYyAgICA9IGQzLnN2Zy5hcmMoKS5vdXRlclJhZGl1cyhvcHRpb25zLnIpLmlubmVyUmFkaXVzKG9wdGlvbnMuciAtIDEwKTtcbiAgICAgICAgICAgIHZhciBjZW50ZXIgPSBvcHRpb25zLnIgKyBvcHRpb25zLnN0cm9rZVdpZHRoO1xuICAgICAgICAgICAgdmFyIHcgICAgICA9IGNlbnRlciAqIDI7XG4gICAgICAgICAgICB2YXIgaCAgICAgID0gdztcbiAgICAgICAgICAgIHZhciBzdmcgICAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoZDMubnMucHJlZml4LnN2ZywgJ3N2ZycpO1xuICAgICAgICAgICAgdmFyIHZpcyAgICA9IGQzLnNlbGVjdChzdmcpXG4gICAgICAgICAgICAgICAgLmRhdGEoZGF0YSlcbiAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAncGllY2hhcnQnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHcpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGgpO1xuXG4gICAgICAgICAgICB2YXIgYXJjcyA9IHZpcy5zZWxlY3RBbGwoJy5hcmMnKVxuICAgICAgICAgICAgICAgIC5kYXRhKHBpZShkYXRhKSlcbiAgICAgICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdhcmMnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBjZW50ZXIgKyAnLCcgKyBjZW50ZXIgKyAnKScpO1xuXG4gICAgICAgICAgICBhcmNzLmFwcGVuZCgncGF0aCcpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCBhcmMpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuZGF0YS50eXBlICsgJy1hcmMnO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhcmNzLmFwcGVuZChcInN2Zzp0ZXh0XCIpXG4gICAgICAgICAgICAgICAgLnRleHQoZnVuY3Rpb24gKGQsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zLmNvdW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYXR0cihcInhcIiwgLTQgKiBvcHRpb25zLmNvdW50LnRvU3RyaW5nKCkubGVuZ3RoKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwiZHlcIiwgNSlcbiAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiYXJjVGV4dFwiKTtcblxuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5YTUxTZXJpYWxpemVyXG4gICAgICAgICAgICAgICAgPyAobmV3IHdpbmRvdy5YTUxTZXJpYWxpemVyKCkpLnNlcmlhbGl6ZVRvU3RyaW5nKHN2ZylcbiAgICAgICAgICAgICAgICA6ICghIShzdmcueG1sKVxuICAgICAgICAgICAgICAgICAgICA/IHN2Zy54bWxcbiAgICAgICAgICAgICAgICAgICAgOiAnJ1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVMZWFmbGV0RGF0YShtYXApIHtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJlZEVudGl0aWVzID0gY2dTZXJ2aWNlLmdldEVudGl0eUxpc3QoKTtcblxuICAgICAgICAgICAgbWFwLmludmFsaWRhdGVTaXplKCk7XG5cbiAgICAgICAgICAgIG5ldyBMLkNvbnRyb2xcbiAgICAgICAgICAgICAgICAuWm9vbSh7cG9zaXRpb246ICd0b3ByaWdodCd9KVxuICAgICAgICAgICAgICAgIC5hZGRUbyhtYXApO1xuXG4gICAgICAgICAgICBuZXcgTC5Db250cm9sXG4gICAgICAgICAgICAgICAgLkxvY2F0ZSh7cG9zaXRpb246ICd0b3ByaWdodCcsIHNob3dQb3B1cDogZmFsc2UsIGljb246ICdmYSBmYS1sb2NhdGlvbi1hcnJvdyd9KVxuICAgICAgICAgICAgICAgIC5hZGRUbyhtYXApO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBjbHVzdGVySWNvbihjbHVzdGVyKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkcmVuICAgICAgID0gY2x1c3Rlci5nZXRBbGxDaGlsZE1hcmtlcnMoKTtcbiAgICAgICAgICAgICAgICB2YXIgdG90YWwgICAgICAgICAgPSBjaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgICAgICAgICAgdmFyIGNsdXN0ZXJNYXJrZXJzID0gXy5wbHVjayhjaGlsZHJlbiwgJ29wdGlvbnMnKTtcbiAgICAgICAgICAgICAgICB2YXIgY291bnRzICAgICAgICAgPSBfLm1hcChcbiAgICAgICAgICAgICAgICAgICAgXy5jb3VudEJ5KGNsdXN0ZXJNYXJrZXJzLCAndHlwZScpLFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoY291bnQsIHR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7J3R5cGUnOiB0eXBlLCAndmFsdWUnOiBjb3VudH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgdmFyIHIgICAgICAgICAgICAgID0gMjg7XG4gICAgICAgICAgICAgICAgdmFyIHN0cm9rZVdpZHRoICAgID0gMTtcbiAgICAgICAgICAgICAgICB2YXIgaWNvbkRpbSAgICAgICAgPSAociArIHN0cm9rZVdpZHRoKSAqIDI7XG4gICAgICAgICAgICAgICAgdmFyIGh0bWwgICAgICAgICAgID0gY3JlYXRlUGllQ2hhcnQoXG4gICAgICAgICAgICAgICAgICAgIHtkYXRhOiBjb3VudHMsIHI6IHIsIHN0cm9rZVdpZHRoOiBzdHJva2VXaWR0aCwgY291bnQ6IHRvdGFsfVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEwuRGl2SWNvbih7XG4gICAgICAgICAgICAgICAgICAgIGh0bWwgICAgIDogaHRtbCxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnbWFya2VyLWNsdXN0ZXInLFxuICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZSA6IG5ldyBMLnBvaW50KGljb25EaW0sIGljb25EaW0pXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbWFya2VySWNvbiAgPSB7XG4gICAgICAgICAgICAgICAgJ05vbi1Qcm9maXQnOiBMLmljb24oe1xuICAgICAgICAgICAgICAgICAgICBpY29uVXJsIDogJ2ltZy9tYXJrZXItbm9ucHJvZi5zdmcnLFxuICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZTogWzYwLCA2MF1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAnRm9yLVByb2ZpdCc6IEwuaWNvbih7XG4gICAgICAgICAgICAgICAgICAgIGljb25VcmwgOiAnaW1nL21hcmtlci1wcm9mLnN2ZycsXG4gICAgICAgICAgICAgICAgICAgIGljb25TaXplOiBbNjAsIDYwXVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICdJbmRpdmlkdWFsJzogTC5pY29uKHtcbiAgICAgICAgICAgICAgICAgICAgaWNvblVybCA6ICdpbWcvbWFya2VyLWluZC5zdmcnLFxuICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZTogWzYwLCA2MF1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAnR292ZXJubWVudCc6IEwuaWNvbih7XG4gICAgICAgICAgICAgICAgICAgIGljb25VcmwgOiAnaW1nL21hcmtlci1nb3Yuc3ZnJyxcbiAgICAgICAgICAgICAgICAgICAgaWNvblNpemU6IFs2MCwgNjBdXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBtYXJrZXJzID0gTC5tYXJrZXJDbHVzdGVyR3JvdXAoe1xuICAgICAgICAgICAgICAgIHNwaWRlcmZ5T25NYXhab29tOiB0cnVlLFxuICAgICAgICAgICAgICAgIHNob3dDb3ZlcmFnZU9uSG92ZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGljb25DcmVhdGVGdW5jdGlvbjogY2x1c3Rlckljb24sXG4gICAgICAgICAgICAgICAgbWF4Q2x1c3RlclJhZGl1czogMzAsXG4gICAgICAgICAgICAgICAgc3BpZGVyZnlEaXN0YW5jZU11bHRpcGxpZXI6IDEuM1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG91dGVyTG9vcChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBpbm5lckxvb3AobG9jKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghXy5ldmVyeShsb2MuY29vcmRpbmF0ZXMpKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2MuY29vcmRpbmF0ZXNbMF0udG9GaXhlZCg1KSA9PT0gJzQwLjc4MjAwJyAmJiBsb2MuY29vcmRpbmF0ZXNbMV0udG9GaXhlZCg1KSA9PT0gJy03My44MzE3MCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYy5jb29yZGluYXRlc1swXSA9IDQwLjc3MDY1O1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jLmNvb3JkaW5hdGVzWzFdID0gLTczLjk3NDA2O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBtID0gTC5tYXJrZXIobG9jLmNvb3JkaW5hdGVzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBtYXJrZXJJY29uW2VudGl0eS50eXBlXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICd0aXRsZSc6IGVudGl0eS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2VudGl0eV9pZCc6IGVudGl0eS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdtZXNzYWdlJzogZW50aXR5Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6IGVudGl0eS50eXBlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXJzLmFkZExheWVyKG0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChlbnRpdHkubG9jYXRpb25zLCBpbm5lckxvb3ApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBfLmZvckVhY2goZmlsdGVyZWRFbnRpdGllcywgb3V0ZXJMb29wKTtcbiAgICAgICAgICAgIG1hcC5hZGRMYXllcihtYXJrZXJzKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gb25Mb2NhdGlvbkVycm9yKGxlYWZsZXRFcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobGVhZmxldEVycm9yLm1lc3NhZ2UgKyBcIiAgJU9cIiwgbGVhZmxldEVycm9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbWFwLm9uKCdsb2NhdGlvbmVycm9yJywgb25Mb2NhdGlvbkVycm9yKTtcblxuICAgICAgICAgICAgLy8gbWFya2Vycy5vbignY2xpY2snLCBmdW5jdGlvbiAobWFya2VyKSB7XG4gICAgICAgICAgICAvLyAgICAgJHNjb3BlLnNldEVudGl0eUlEKG1hcmtlci5sYXllci5vcHRpb25zLmVudGl0eV9pZCk7XG4gICAgICAgICAgICAvLyAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ID0gJHNjb3BlLmN1cnJlbnRFbnRpdHk7XG4gICAgICAgICAgICAvLyAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCAgID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vICAgICBpZiAoJHNjb3BlLnNldHRpbmdzRW5hYmxlZCAmJiAkc2NvcGUubW9iaWxlKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgICRzY29wZS50b2dnbGVTZXR0aW5ncygpO1xuICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgIC8vICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBtYXAub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9IG51bGw7XG4gICAgICAgICAgICAvLyAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCAgID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICAgIC8vICRzY29wZS4kb24oJ3NlbGVjdEl0ZW0nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyAgICAgdmFyIGNvb3JkaW5hdGVzID0gJHNjb3BlLmN1cnJlbnRFbnRpdHkubG9jYXRpb25zLmxlbmd0aCA+IDAgPyBfLnBsdWNrKFxuICAgICAgICAgICAgLy8gICAgICAgICAkc2NvcGUuY3VycmVudEVudGl0eS5sb2NhdGlvbnMsICdjb29yZGluYXRlcycpIDogbnVsbDtcbiAgICAgICAgICAgIC8vICAgICBpZiAoY29vcmRpbmF0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gICAgICAgICBtYXAuc2V0Vmlldyhjb29yZGluYXRlc1swXSwgMTEpO1xuICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgIC8vICAgICAkc2NvcGUuYWN0aW9ucy5pbnRlcmFjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIENvbnRyb2xsZXIuJGluamVjdCA9IFtcbiAgICAgICAgXCIkc2NvcGVcIixcbiAgICAgICAgXCJfXCIsXG4gICAgICAgIFwibGVhZmxldERhdGFcIixcbiAgICAgICAgXCJjZ01haW5TZXJ2aWNlXCJcbiAgICBdO1xuXG4gICAgZnVuY3Rpb24gRGlyZWN0aXZlKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJyZXN0cmljdFwiOiBcIkVcIixcbiAgICAgICAgICAgIFwidGVtcGxhdGVVcmxcIjogXCJqcy9jb21wb25lbnQvbWFwL21hcC50ZW1wbGF0ZS5odG1sXCIsXG4gICAgICAgICAgICBcImNvbnRyb2xsZXJcIjogQ29udHJvbGxlclxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoXCIpXG4gICAgICAgIC5kaXJlY3RpdmUoXCJjZ01hcFwiLCBEaXJlY3RpdmUpO1xufSkoYW5ndWxhciwgZDMsIEwpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxuICovXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgZnVuY3Rpb24gU2VydmljZSh1dGlscykge1xuICAgICAgICBmdW5jdGlvbiBMb2NhdGlvbihvYmopIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIGdldFByb3BlcnR5ID0gdXRpbHMuZ2V0UHJvcGVydHlGcm9tT2JqKG9iaik7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkRm9ybWF0dGVkQWRkcmVzcygpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVmT2JqID0gdXRpbHMuaXNEZWZpbmVkKG9iaikgPyBvYmogOiB7fTtcbiAgICAgICAgICAgICAgICB2YXIgYWRkcmVzc0xpbmUgPSAodXRpbHMuaXNEZWZpbmVkKGRlZk9iai5hZGRyZXNzX2xpbmUpID8gZGVmT2JqLmFkZHJlc3NfbGluZSArICcgJyA6ICcnKTtcbiAgICAgICAgICAgICAgICB2YXIgbG9jYWxpdHkgPSAodXRpbHMuaXNEZWZpbmVkKGRlZk9iai5sb2NhbGl0eSkgPyBkZWZPYmoubG9jYWxpdHkgKyAnLCAnIDogJycpO1xuICAgICAgICAgICAgICAgIHZhciBjb3VudHJ5Q29kZSA9ICh1dGlscy5pc0RlZmluZWQoZGVmT2JqLmNvdW50cnlfY29kZSkgPyBkZWZPYmouY291bnRyeV9jb2RlICsgJyAnIDogJycpO1xuICAgICAgICAgICAgICAgIHZhciBwb3N0YWxDb2RlID0gKHV0aWxzLmlzRGVmaW5lZChkZWZPYmoucG9zdGFsX2NvZGUpID8gZGVmT2JqLnBvc3RhbF9jb2RlIDogJycpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIChhZGRyZXNzTGluZSArIGxvY2FsaXR5ICsgY291bnRyeUNvZGUgKyBwb3N0YWxDb2RlKS50cmltKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGYuaWQgPSBnZXRQcm9wZXJ0eShcImlkXCIpO1xuICAgICAgICAgICAgc2VsZi5hZGRyZXNzX2xpbmUgPSBnZXRQcm9wZXJ0eShcImFkZHJlc3NfbGluZVwiKTtcbiAgICAgICAgICAgIHNlbGYubG9jYWxpdHkgPSBnZXRQcm9wZXJ0eShcImxvY2FsaXR5XCIpO1xuICAgICAgICAgICAgc2VsZi5kaXN0cmljdCA9IGdldFByb3BlcnR5KFwiZGlzdHJpY3RcIik7XG4gICAgICAgICAgICBzZWxmLnBvc3RhbF9jb2RlID0gZ2V0UHJvcGVydHkoXCJwb3N0YWxfY29kZVwiKTtcbiAgICAgICAgICAgIHNlbGYuY291bnRyeSA9IGdldFByb3BlcnR5KFwiY291bnRyeVwiKTtcbiAgICAgICAgICAgIHNlbGYuY291bnRyeV9jb2RlID0gZ2V0UHJvcGVydHkoXCJjb3VudHJ5X2NvZGVcIik7XG4gICAgICAgICAgICBzZWxmLmNvb3JkaW5hdGVzID0gZ2V0UHJvcGVydHkoXCJjb29yZGluYXRlc1wiKTtcblxuICAgICAgICAgICAgLy8gVE9ETzogQ29udmVydCB0aGlzIHRvIGEgbWV0aG9kIHRoYXQgYnVpbGRzIGJhc2VkIG9mZiBvZiB0aGUgY3VycmVudCBvYmplY3QncyBwcm9wZXJ0aWVzLlxuICAgICAgICAgICAgLy8gVW5sZXNzIHRoaXMgaXMgbmVlZGVkIGZvciB0aGUgQVBJIHNwZWNpZmljYWxseSwgdGhlbiBoYXZlIHRoaXMgYnVpbHQgaW4gYSBzaW1pbGFyIGZ1bmN0aW9uIGFzIHRoZSBvbmUgaW5cbiAgICAgICAgICAgIC8vIEVudGl0eU1vZGVsIGZvciBidWlsZGluZyBBUEkgc3BlY2lmaWMgb2JqZWN0c1xuICAgICAgICAgICAgc2VsZi5mb3JtYXR0ZWRBZGRyZXNzID0gYnVpbGRGb3JtYXR0ZWRBZGRyZXNzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRMb2NhdGlvbk1vZGVsKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBMb2NhdGlvbihvYmopO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiZ2V0TG9jYXRpb25Nb2RlbFwiOiBnZXRMb2NhdGlvbk1vZGVsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgU2VydmljZS4kaW5qZWN0ID0gW1wiY2dVdGlsU2VydmljZVwiXTtcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnY2l2aWMtZ3JhcGguYXBpJylcbiAgICAgICAgLmZhY3RvcnkoJ2xvY2F0aW9uU2VydmljZScsIFNlcnZpY2UpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNy8xNi5cbiAqL1xuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlZGVmIHtPYmplY3R9IENnRW50aXR5U2VydmljZVxuICAgICAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGdldEVudGl0eU1vZGVsXG4gICAgICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZ2V0SW5mbHVlbmNlVHlwZXNcbiAgICAgKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBnZXRBbGxcbiAgICAgKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBzYXZlRW50aXR5XG4gICAgICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZ2V0RW50aXR5VHlwZXNcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEB0eXBlZGVmIHtvYmplY3R9IEVudGl0eVR5cGVPYmpcbiAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IEdvdmVybm1lbnRcbiAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IEZvci1Qcm9maXRcbiAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IE5vbi1Qcm9maXRcbiAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IEluZGl2aWR1YWxcbiAgICAgKi9cblxuICAgIC8qKiBAdHlwZSB7RW50aXR5VHlwZU9ian0gKi9cbiAgICB2YXIgZW50aXR5VHlwZU9iaiA9IHtcbiAgICAgICAgXCJHb3Zlcm5tZW50XCI6IHRydWUsXG4gICAgICAgIFwiRm9yLVByb2ZpdFwiOiB0cnVlLFxuICAgICAgICBcIk5vbi1Qcm9maXRcIjogdHJ1ZSxcbiAgICAgICAgXCJJbmRpdmlkdWFsXCI6IHRydWVcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gZ2V0SW5mbHVlbmNlVHlwZXMoKSB7XG4gICAgICAgIHJldHVybiBbXCJMb2NhbFwiLCBcIk5hdGlvbmFsXCIsIFwiR2xvYmFsXCJdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBhcGlDYWxsZXJcbiAgICAgKiBAcGFyYW0gZnVuQ29ublNlcnZpY2VcbiAgICAgKiBAcGFyYW0gY29ublNlcnZpY2VcbiAgICAgKiBAcGFyYW0gZmluYW5jZVNlcnZpY2VcbiAgICAgKiBAcGFyYW0gbG9jYXRpb25TZXJ2aWNlXG4gICAgICogQHBhcmFtIGNhdGVnb3J5U2VydmljZVxuICAgICAqIEBwYXJhbSB1dGlsc1xuICAgICAqIEByZXR1cm5zIHtDZ0VudGl0eVNlcnZpY2V9XG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgZnVuY3Rpb24gU2VydmljZShhcGlDYWxsZXIsIGZ1bkNvbm5TZXJ2aWNlLCBjb25uU2VydmljZSwgZmluYW5jZVNlcnZpY2UsIGxvY2F0aW9uU2VydmljZSwgY2F0ZWdvcnlTZXJ2aWNlLCB1dGlscykge1xuXG4gICAgICAgIGZ1bmN0aW9uIEVudGl0eShvYmopIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIHZhciBkZWZPYmogPSB1dGlscy5pc0RlZmluZWQob2JqKSA/IG9iaiA6IHt9O1xuICAgICAgICAgICAgdmFyIGdldFByb3BlcnR5ID0gdXRpbHMuZ2V0UHJvcGVydHlGcm9tT2JqKG9iaik7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlREJNb2RlbCgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGJNb2RlbCA9IG5ldyBFbnRpdHkoc2VsZik7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5sb2NhdGlvbnMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5sb2NhdGlvbnMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5ncmFudHNfcmVjZWl2ZWQucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5ncmFudHNfcmVjZWl2ZWQucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5ncmFudHNfZ2l2ZW4ucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5ncmFudHNfZ2l2ZW4ucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5pbnZlc3RtZW50c19yZWNlaXZlZC5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmludmVzdG1lbnRzX3JlY2VpdmVkLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuaW52ZXN0bWVudHNfbWFkZS5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmludmVzdG1lbnRzX21hZGUucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5kYXRhX2dpdmVuLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZGF0YV9naXZlbi5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmRhdGFfcmVjZWl2ZWQucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5kYXRhX3JlY2VpdmVkLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuY29sbGFib3JhdGlvbnMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5jb2xsYWJvcmF0aW9ucy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmtleV9wZW9wbGUucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5rZXlfcGVvcGxlLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZW1wbG95bWVudHMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5lbXBsb3ltZW50cy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLnJldmVudWVzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwucmV2ZW51ZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5leHBlbnNlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmV4cGVuc2VzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuY2F0ZWdvcmllcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmNhdGVnb3JpZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5kZXNjcmlwdGlvbiA9ICcnO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRiTW9kZWw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGYuaWQgPSBnZXRQcm9wZXJ0eShcImlkXCIpO1xuICAgICAgICAgICAgc2VsZi5uYW1lID0gZ2V0UHJvcGVydHkoXCJuYW1lXCIpO1xuICAgICAgICAgICAgc2VsZi5pbmZsdWVuY2UgPSBnZXRQcm9wZXJ0eShcImluZmx1ZW5jZVwiKTtcbiAgICAgICAgICAgIHNlbGYudHlwZSA9IGdldFByb3BlcnR5KFwidHlwZVwiKTtcbiAgICAgICAgICAgIHNlbGYubmlja25hbWUgPSBnZXRQcm9wZXJ0eShcIm5pY2tuYW1lXCIpO1xuICAgICAgICAgICAgc2VsZi51cmwgPSBnZXRQcm9wZXJ0eShcInVybFwiKTtcbiAgICAgICAgICAgIHNlbGYudHdpdHRlcl9oYW5kbGUgPSBnZXRQcm9wZXJ0eShcInR3aXR0ZXJfaGFuZGxlXCIpO1xuICAgICAgICAgICAgc2VsZi5lbXBsb3llZXMgPSBnZXRQcm9wZXJ0eShcImVtcGxveWVlc1wiKTtcblxuICAgICAgICAgICAgc2VsZi5sb2NhdGlvbnMgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmoubG9jYXRpb25zLCBsb2NhdGlvblNlcnZpY2UuZ2V0TG9jYXRpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmdyYW50c19yZWNlaXZlZCA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5ncmFudHNfcmVjZWl2ZWQsIGZ1bkNvbm5TZXJ2aWNlLmdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5pbnZlc3RtZW50c19yZWNlaXZlZCA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5pbnZlc3RtZW50c19yZWNlaXZlZCwgZnVuQ29ublNlcnZpY2UuZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmdyYW50c19naXZlbiA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5ncmFudHNfZ2l2ZW4sIGZ1bkNvbm5TZXJ2aWNlLmdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5pbnZlc3RtZW50c19tYWRlID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmludmVzdG1lbnRzX21hZGUsIGZ1bkNvbm5TZXJ2aWNlLmdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5kYXRhX2dpdmVuID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmRhdGFfZ2l2ZW4sIGNvbm5TZXJ2aWNlLmdldENvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmRhdGFfcmVjZWl2ZWQgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouZGF0YV9yZWNlaXZlZCwgY29ublNlcnZpY2UuZ2V0Q29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuY29sbGFib3JhdGlvbnMgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouY29sbGFib3JhdGlvbnMsIGNvbm5TZXJ2aWNlLmdldENvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmtleV9wZW9wbGUgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmoua2V5X3Blb3BsZSwgY29ublNlcnZpY2UuZ2V0Q29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuZW1wbG95bWVudHMgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouZW1wbG95bWVudHMsIGNvbm5TZXJ2aWNlLmdldENvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLnJldmVudWVzID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLnJldmVudWVzLCBmaW5hbmNlU2VydmljZS5nZXRGaW5hbmNlTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5leHBlbnNlcyA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5leHBlbnNlcywgZmluYW5jZVNlcnZpY2UuZ2V0RmluYW5jZU1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuY2F0ZWdvcmllcyA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5jYXRlZ29yaWVzLCBjYXRlZ29yeVNlcnZpY2UuZ2V0Q2F0ZWdvcnlNb2RlbCk7XG5cbiAgICAgICAgICAgIHNlbGYuZ2VuZXJhdGVEQk1vZGVsID0gZ2VuZXJhdGVEQk1vZGVsO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RW50aXR5TW9kZWwob2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEVudGl0eShvYmopO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0QWxsKCkge1xuICAgICAgICAgICAgcmV0dXJuIGFwaUNhbGxlci5nZXQoJy9lbnRpdGllcycpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2F2ZUVudGl0eShlbnRpdHkpIHtcbiAgICAgICAgICAgIHJldHVybiBhcGlDYWxsZXIucG9zdChcIi9zYXZlXCIsIHsgXCJlbnRpdHlcIjogZW50aXR5IH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiZ2V0RW50aXR5TW9kZWxcIjogZ2V0RW50aXR5TW9kZWwsXG4gICAgICAgICAgICBcImdldEluZmx1ZW5jZVR5cGVzXCI6IGdldEluZmx1ZW5jZVR5cGVzLFxuICAgICAgICAgICAgXCJnZXRBbGxcIjogZ2V0QWxsLFxuICAgICAgICAgICAgXCJzYXZlRW50aXR5XCI6IHNhdmVFbnRpdHksXG4gICAgICAgICAgICAvKiogQHJldHVybnMge0VudGl0eVR5cGVPYmp9ICovXG4gICAgICAgICAgICBcImdldEVudGl0eVR5cGVzXCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZW50aXR5VHlwZU9iajtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBTZXJ2aWNlLiRpbmplY3QgPSBbXG4gICAgICAgIFwiY2dBcGlDYWxsZXJcIixcbiAgICAgICAgXCJmdW5kaW5nQ29ubmVjdGlvblNlcnZpY2VcIixcbiAgICAgICAgXCJjb25uZWN0aW9uU2VydmljZVwiLFxuICAgICAgICBcImZpbmFuY2VTZXJ2aWNlXCIsXG4gICAgICAgIFwibG9jYXRpb25TZXJ2aWNlXCIsXG4gICAgICAgIFwiY2F0ZWdvcnlTZXJ2aWNlXCIsXG4gICAgICAgIFwiY2dVdGlsU2VydmljZVwiXG4gICAgXTtcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKVxuICAgICAgICAuZmFjdG9yeShcImVudGl0eVNlcnZpY2VcIiwgU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyLCBkMykge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGlzRGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIChSZSlCdWlsZHMgdGhlIGBzdmdgIGVsZW1lbnQgb24gdGhlIHNjcmVlbi4gIFRoaXMgaXMgYSBkb3VibGUtZWRnZWQgc3dvcmQuICBPbiBvbmUgaGFuZCwgbXVjaCBlYXNpZXIgdG9cbiAgICAgKiB1cGRhdGUgdGhlIGdyYXBoIG9uIGRhdGEgY2hhbmdlLCBhcyBpdCBqdXN0IGRlbGV0ZXMgdGhlIG9sZCBhbmQgbGV0cyB1cyByZS1kcmF3IGV2ZXJ5dGhpbmcuICBPbiB0aGUgb3RoZXIgaGFuZCxcbiAgICAgKiB3ZSBoYXZlIHRvIHJlZHJhdyBldmVyeXRoaW5nLCB3aGljaCBjYW4gYmUgYSB2ZXJ5IHNsb3cgcHJvY2VzcyBpZiB0aGVyZSBhcmUgdG9vIG1hbnkgbm9kZXMgb24gdGhlIHNjcmVlbi5cbiAgICAgKlxuICAgICAqIFRoZSBzaXplIGlzIHNldCB0byBmdWxsIHZpZXcgaGVpZ2h0IGFuZCBmdWxsIGNvbnRhaW5lciB3aWR0aC4gIFRoaXMgc2hvdWxkIG1ha2UgQ1NTIGVhc2llciwgYXMgaXQgd2lsbCByZXNwZWN0XG4gICAgICogdGhlIHdpZHRoIG9mIHRoZSBkaXJlY3RpdmUsIG1lYW5pbmcgd2UgZG9uJ3QgaGF2ZSB0byB3b3JyeSBhYm91dCBkb2luZyB3ZWlyZCBDU1MgaW4gaGVyZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByb290IC0gVGhlIHJvb3QgZWxlbWVudCwgd2hpY2ggc2hvdWxkIGJlIHByb3ZpZGVkIGJ5IGFuZ3VsYXIgaW4gdGhlIGxpbmsgZnVuY3Rpb25cbiAgICAgKiBAcmV0dXJucyB7Kn0gLSBhIG5ldyBzdmcgZWxlbWVudFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJ1aWxkU3ZnRWxlbWVudCAocm9vdCkge1xuICAgICAgICAvLyBEZWxldGUgdGhlIG9sZCBncmFwaFxuICAgICAgICBpZiAoIGlzRGVmaW5lZChyb290LnNlbGVjdCgnc3ZnJykpICkge1xuICAgICAgICAgICAgcm9vdC5zZWxlY3QoJ3N2ZycpLnJlbW92ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJvb3RcbiAgICAgICAgICAgIC5hcHBlbmQoJ3N2ZycpXG4gICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgJzEwMHZoJylcbiAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsICcxMDAlJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBpcyBzdHJhbmdlIG9uZSB0aGF0IEkgaGF2ZSBjbGVhbmVkIHVwIGEgYml0IGZyb20gdGhlIG9sZCBncmFwaC4gIEluIHRoZSAgb2xkIGdyYXBoLCB0aGVyZSB3YXMgYW4gb2JqZWN0XG4gICAgICogY2FsbGVkIHNjYWxlIHRoYXQgaGFkIGEgZDMgc3FydCBmdW5jdGlvbiBidWlsdCBmb3IgZW1wbG95ZWVzIGFuZCBmb2xsb3dlcnMuICBJbnN0ZWFkIG9mIHVzaW5nIHRoZWlycyxcbiAgICAgKiBJIGJ1aWx0IHRoaXMgZnVuY3Rpb24gdGhhdCBidWlsZHMgdGhlIHNjYWxlIGZ1bmN0aW9uIGJhc2VkIG9uIHRoZSBkYXRhIGFuZCBwYXJhbWV0ZXIgdG8gc2NhbGUgYnkuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIHNvIHRoYXQgZXZlcnkgdGltZSB0aGUgbm9kZSBsaXN0IGNoYW5nZXMsIHRoZSBzY2FsZSBmdW5jdGlvbnMgYXJlIGVhc3kgdG8gcmVnZW5lcmF0ZVxuICAgICAqXG4gICAgICogQHBhcmFtIHNpemVCeSAtIFRoZSBhdHRyaWJ1dGUgdG8gc2NhbGUgdGhlIG5vZGVzIGJ5LiAgVGhpcyB3aWxsIHByb2JhYmx5IGNvbWUgZnJvbSBuZXR3b3JrIHNlcnZpY2VcbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IC0gVGhpcyBhY3R1YWxseSBidWlsZHMgdGhlIGZ1bmN0aW9uIHRoYXQgYnVpbGRzIHRoZSBzY2FsZSBmdW5jdGlvbi4gIFNvIGp1c3QgZ2l2ZSB0aGVcbiAgICAgKiByZXN1bHQgb2YgdGhpcyBmdW5jdGlvbiB0aGUgbm9kZSBsaXN0IGFuZCBpdCB3aWxsIGdpdmUgeW91IHRoZSBzY2FsZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJ1aWxkU2NhbGVGdW5jdGlvbiAoc2l6ZUJ5KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAobm9kZUxpc3QpIHtcbiAgICAgICAgICAgIHZhciBsb3dlckJvdW5kUmFkaXVzID0gMTA7XG4gICAgICAgICAgICB2YXIgdXBwZXJCb3VuZFJhZGl1cyA9IDUwO1xuICAgICAgICAgICAgdmFyIG1heE5vZGVQYXJhbSA9IGQzLm1heChub2RlTGlzdCwgZ2V0R3JhcGhPYmpQYXJhbSk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldEdyYXBoT2JqUGFyYW0gKGQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdiA9IGQudmFsdWVbIHNpemVCeSBdO1xuICAgICAgICAgICAgICAgIHJldHVybiBpc0Zpbml0ZSh2KSAmJiBpc0RlZmluZWQodikgPyB2IDogMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZDMuc2NhbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAuc3FydCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgLmRvbWFpbihbIDUsIG1heE5vZGVQYXJhbSBdKVxuICAgICAgICAgICAgICAgICAgICAgICAgIC5yYW5nZShbIGxvd2VyQm91bmRSYWRpdXMsIHVwcGVyQm91bmRSYWRpdXMgXSkob2JqLnZhbHVlWyBzaXplQnkgXSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZWQgdG8gZGVzY3JpYmUgdGhlIGZvdXIgY29ybmVycyBvZiB0aGUgZ3JhcGguICBCeSBkZWZhdWx0LCBmb3JjZSBsYXlvdXQga2VlcHMgdGhlIG5vZGVzIGZvY3VzZWQgb24gdGhlXG4gICAgICogY2VudGVyIG9mIHRoZSBncmFwaCwgYnV0IGluIG91ciBjYXNlLCB3ZSB3YW50IHRoZSBub2RlcyBzZXBhcmF0ZWQgdG8gZWFjaCBjb3JuZXIuXG4gICAgICpcbiAgICAgKiBUZWNobmljYWxseSwgaWYgeW91IHdhbnRlZCB0byBnZXQgZmFuY3ksIHlvdSBjb3VsZCBtYWtlIHRoZW0gY2x1c3RlciBhbnl3aGVyZSB3aXRoaW4gdGhlIGJvdW5kcywgYnV0IHRoZVxuICAgICAqIG9yaWdpbmFsIGNvZGUgZGlkIGNvcm5lcnMsIHNvIEkgZGlkIGNvcm5lcnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYm91bmRzIC0gUHJvYmFibHkgdGhlIHNpemUgb2YgdGhlIHN2Zy9yb290IGVsZW1lbnQsIGJ1dCBjb3VsZCBiZSBhbnkgYXJiaXRyYXJ5IHdpZHRoL2hlaWdodCBvYmplY3RcbiAgICAgKiBAcmV0dXJucyB7Kn0gLSBUaGUgcmV0dXJuIHZhbHVlIGxvb2tzIGxpa2UgdGhpczpcbiAgICAgKiB7e0luZGl2aWR1YWw6IHt4OiAqLCB5OiAqfSwgJ0Zvci1Qcm9maXQnOiB7eDogKiwgeTogKn0sICdOb24tUHJvZml0Jzoge3g6ICosIHk6ICp9LCBHb3Zlcm5tZW50OiB7eDogKiwgeTogKn19fVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJ1aWxkRm9jaSAoYm91bmRzKSB7XG4gICAgICAgIGZ1bmN0aW9uIHBlcmNlbnRhZ2VPZkJvdW5kYXJ5ICh2KSB7XG4gICAgICAgICAgICByZXR1cm4gdiAvIDM7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZXN0T2ZCb3VuZGFyeSAodikge1xuICAgICAgICAgICAgcmV0dXJuIHYgLSBwZXJjZW50YWdlT2ZCb3VuZGFyeSh2KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAnSW5kaXZpZHVhbCc6IHtcbiAgICAgICAgICAgICAgICAneCc6IHBlcmNlbnRhZ2VPZkJvdW5kYXJ5KGJvdW5kcy53aWR0aCksXG4gICAgICAgICAgICAgICAgJ3knOiBwZXJjZW50YWdlT2ZCb3VuZGFyeShib3VuZHMuaGVpZ2h0KVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdGb3ItUHJvZml0Jzoge1xuICAgICAgICAgICAgICAgICd4JzogcGVyY2VudGFnZU9mQm91bmRhcnkoYm91bmRzLndpZHRoKSxcbiAgICAgICAgICAgICAgICAneSc6IHJlc3RPZkJvdW5kYXJ5KGJvdW5kcy5oZWlnaHQpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ05vbi1Qcm9maXQnOiB7XG4gICAgICAgICAgICAgICAgJ3gnOiByZXN0T2ZCb3VuZGFyeShib3VuZHMud2lkdGgpLFxuICAgICAgICAgICAgICAgICd5JzogcGVyY2VudGFnZU9mQm91bmRhcnkoYm91bmRzLmhlaWdodClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnR292ZXJubWVudCc6IHtcbiAgICAgICAgICAgICAgICAneCc6IHJlc3RPZkJvdW5kYXJ5KGJvdW5kcy53aWR0aCksXG4gICAgICAgICAgICAgICAgJ3knOiByZXN0T2ZCb3VuZGFyeShib3VuZHMuaGVpZ2h0KVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFub3RoZXIgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB0YWtlcyB0aGUgbm9kZSBsaXN0LlxuICAgICAqXG4gICAgICogVGhpcyBvbmUgYnVpbGRzIHRoZSBjaGFyZ2UgZnVuY3Rpb24gZm9yIHRoZSBmb3JjZSBsYXlvdXQuICBUaGF0IGlzIHRoZSBwcm9wZXJ0eSB0aGF0IHByZXZlbnRzIG5vZGVzIGZyb21cbiAgICAgKiBvdmVybGFwcGluZy4gIFRoZSBjbG9zZXIgdG8gMCwgdGhlIG1vcmUgdGhlIG92ZXJsYXAuICBTZXR0aW5ncyBjdXJyZW50bHkgcmVmbGVjdCB3aGF0IHRoZSBvcmlnaW5hbCBjb2RlIGhhZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzaXplQnkgLSBTaW5jZSB3ZSBuZWVkIHRoZSBzaXplIG9mIHRoZSBub2RlLCB3ZSBuZWVkIHRvIGtub3cgd2hhdCB0byBzaXplIGJ5LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBidWlsZENoYXJnZUZ1bmN0aW9uIChzaXplQnkpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChub2RlTGlzdCkge1xuICAgICAgICAgICAgdmFyIHNpemVCeVNjYWxlID0gYnVpbGRTY2FsZUZ1bmN0aW9uKHNpemVCeSkobm9kZUxpc3QpO1xuXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNEZWZpbmVkKGQudmFsdWVbIHNpemVCeSBdKVxuICAgICAgICAgICAgICAgICAgICA/IC0yICogc2l6ZUJ5U2NhbGUoZClcbiAgICAgICAgICAgICAgICAgICAgOiAtMjA7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgaXMgY2xlYW5lciBpbiBFUzYgb3IgaWYgSSBoYWQgY3JlYXRlZCBhY3R1YWwgZ2V0dGVyL3NldHRlcnMgaW5zdGVhZCBvZiBtZXJnaW5nXG4gICAgICogdGhlbSBpbnRvIGEgc2luZ2xlIG1ldGhvZC4gIEJhc2ljYWxseSwgSSBuZWVkIHRvIGNhbGwgYSBmdW5jdGlvbiB3aXRob3V0IGFjY2lkZW50YWxseVxuICAgICAqIHBhc3NpbmcgYW55IHZhbHVlcyB0byBpdC5cbiAgICAgKlxuICAgICAqIEZvciBpbnN0YW5jZSwgYHNjb3BlLndhdGNoYCBjYW4gdGFrZSBhIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCwgYnV0IHBhc3NlcyB2YWx1ZXMgdG8gaXQuXG4gICAgICogSWYgSSBkaWRuJ3Qgd2FudCB0aGF0IHRvIGhhcHBlbiwgSSBjb3VsZCBqdXN0IHdyYXAgdGhlIGFyZ3VtZW50IGluIHRoaXMgYW5kIGl0IHdvdWxkIGJlIHNhZmUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gd3JhcEZuIChmbikgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gZm4oKTsgfTsgfVxuXG4gICAgZnVuY3Rpb24gRGlyZWN0aXZlICgkd2luZG93LCBfLCB1dGlscywgY2dTZXJ2aWNlLCBuZXR3b3JrU2VydmljZSkge1xuICAgICAgICAvLyBXaG8gcmVhbGx5IHdhbnRzIHRvIHR5cGUgYHV0aWxzLmAgZXZlcnkgdGltZT9cbiAgICAgICAgaXNEZWZpbmVkID0gdXRpbHMuaXNEZWZpbmVkO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHRoZSBzZWNyZXQgdG8gbWFraW5nIEFuZ3VsYXIgYW5kIEQzIHBsYXkgbmljZS4gIEZyb20gcGFzdCBleHBlcmllbmNlLCB3cml0aW5nIEQzIGRpcmVjdGx5XG4gICAgICAgICAqIGluIGFuIEFuZ3VsYXIgY29udHJvbGxlciBvciBzZXJ2aWNlIGp1c3QgZG9lc24ndCB3b3JrIG91dCB3ZWxsLiAgVGhlIGlzc3VlIGlzIEFuZ3VsYXIgZG9lc24ndCBsaWtlIGFueW9uZVxuICAgICAgICAgKiBidXQgaXRzZWxmIHRvdWNoaW5nIHRoZSBIVE1MIG9uY2UgaXQgaGFzIGJlZW4gcmVuZGVyZWQuICBUaGlzIGZ1bmN0aW9uIHdpbGwgYWxsb3cgdXMgdG8gZG8gd2hhdCB3ZSBuZWVkXG4gICAgICAgICAqIGJlZm9yZSB0aGUgQW5ndWxhciByZW5kZXJpbmcgaGFwcGVucywgc28gd2UgY2FuIGNyZWF0ZSBhbGwgb2YgdGhlIHN0dWZmIHRoYXQgRDMgd2FudHMgQU5EIGdldCB0aGUgYmVuZWZpdFxuICAgICAgICAgKiBvZiBBbmd1bGFyIGNsZWFuaW5nIHVwIGZvciB1cyBvbmNlIHRoZSBkaXJlY3RpdmUgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIHRoZSBzY3JlZW4uICBXaW4tV2luLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gc2NvcGUgLSBUaGlzIGlzIHRoZSBzYW1lIGFzIGEgc2NvcGUgdmFsdWUgdGhhdCBpcyBwYXNzZWQgdG8gYSBjb250cm9sbGVyXG4gICAgICAgICAqIEBwYXJhbSBlbGVtZW50IC0gVGhpcyBpcyBhbiBhcnJheSBvZiBlbGVtZW50cywgYnV0IHRoZSBmaXJzdCB2YWx1ZSBpcyBhY3R1YWxseSBqdXN0IG91ciByb290IGVsZW1lbnRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIExpbmtGbiAoc2NvcGUsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIC8vIEdldCB0aGUgcm9vdCBlbGVtZW50XG4gICAgICAgICAgICB2YXIgcm9vdCA9IGQzLnNlbGVjdChlbGVtZW50WyAwIF0pO1xuXG4gICAgICAgICAgICAvLyBUaGVzZSB3aWxsIHN0b3JlIG91ciBidWlsZGVyIGZ1bmN0aW9ucyB0aGF0IGFyZSByZXR1cm5lZCBmcm9tIHRoZSBhYm92ZSBmdW5jdGlvbnMuXG4gICAgICAgICAgICB2YXIgX2J1aWxkU2NhbGVGdW5jdGlvbjtcbiAgICAgICAgICAgIHZhciBfYnVpbGRDaGFyZ2VGdW5jdGlvbjtcblxuICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgbGlzdGVuZXIgdGhhdCBnZXRzIHJlZ2lzdGVyIGluIHRoZSByZW5kZXIgbWV0aG9kLiAgV2UgbmVlZCB0byBjYWxsIGl0IGluIG9yZGVyIHRvIHJlbW92ZVxuICAgICAgICAgICAgLy8gdGhlIGxpc3RlbmVyIHdoZW5ldmVyIHdlIHBsYW4gb24gcmVkcmF3aW5nIHRoZSBncmFwaC4gSGVuY2UsIGl0IGlzIGRlY2xhcmVkIGF0IHRoaXMgc2NvcGUgaW5zdGVhZFxuICAgICAgICAgICAgLy8gb2YgaW5zaWRlIHRoZSByZW5kZXIgZnVuY3Rpb25cbiAgICAgICAgICAgIHZhciBjdXJyZW50RW50aXR5TGlzdGVuZXI7XG5cbiAgICAgICAgICAgIC8vIFdoZW5ldmVyIGEgcmVzaXplIGV2ZW50IGhhcHBlbnMsIHJlZHJhdyB0aGUgZ3JhcGgsIGJ1dCBkb24ndCBjb25zdGFudGx5IGRvIGl0LlxuICAgICAgICAgICAgJHdpbmRvdy5vbnJlc2l6ZSA9IF8uZGVib3VuY2Uob25XaW5kb3dSZXNpemUpO1xuXG4gICAgICAgICAgICAvLyBXYXRjaCBmb3IgY2hhbmdlcyB0byB0aGUgc2l6ZUJ5IHNldHRpbmcuICBQcm9iYWJseSB3aWxsIGNoYW5nZSB0aGlzIHRvIGEgbGlzdGVuZXIgbGF0ZXIgc28gdGhhdCBpdFxuICAgICAgICAgICAgLy8gZG9lc24ndCBjb25zdGFudGx5IGNoZWNrIGZvciB0aGUgdmFsdWUuICBMb3cgcHJpb3JpdHkgYXMgdGhlIGZ1bmN0aW9uIGlzIGNoZWFwXG4gICAgICAgICAgICBzY29wZS4kd2F0Y2god3JhcEZuKG5ldHdvcmtTZXJ2aWNlLnNpemVCeSksIHdhdGNoU2l6ZUJ5KTtcblxuICAgICAgICAgICAgLy8gU2FtZSBhcyBhYm92ZSwgb25seSB0aGlzIG9uZSB3aWxsIGFjdHVhbGx5IHJlZHJhdyB0aGUgZ3JhcGguICBTdGlsbCwgdGhlIGFjdHVhbCB3YXRjaGVyJ3MgY2hlY2sgaXMgY2hlYXAsXG4gICAgICAgICAgICAvLyBzbyBjb252ZXJ0aW5nIHRvIGV2ZW50IGxpc3RlbmVyIGlzIHN0aWxsIG5vdCBhIGhpZ2ggcHJpb3JpdHlcbiAgICAgICAgICAgIHNjb3BlLiR3YXRjaEdyb3VwKFsgd3JhcEZuKG5ldHdvcmtTZXJ2aWNlLm1pbkNvbm5lY3Rpb24pLCB3cmFwRm4obmV0d29ya1NlcnZpY2Uuc2l6ZUJ5KSBdLCBydW4pO1xuXG4gICAgICAgICAgICAvLyBTaW1pbGFyIHRvIHRoZSBvbnJlc2l6ZSBsaXN0ZW5lciBhYm92ZS4gIE5vdCBlbnRpcmVseSBzdXJlIHRoZSBkaWZmZXJlbmNlLCBvbmUgb2YgdGhlIHR3byBpcyBwcm9iYWJseVxuICAgICAgICAgICAgLy8gbm90IG5lZWRlZC5cbiAgICAgICAgICAgIHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oXy5kZWJvdW5jZShnZXRXaW5kb3dCb3gpLCBydW4pO1xuXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGtpbmQgb2YgYW4gZXhwZW5zaXZlIG9wZXJhdGlvbi4gIEhpZ2ggcHJpb3JpdHkgdG8gY29udmVydCB0byBhIGxpc3RlbmVyLiAgSXQgaXMgd2FpdGluZyBmb3JcbiAgICAgICAgICAgIC8vIG5ldyBkYXRhIGZyb20gdGhlIEFQSSwgc28gdGhhdCBpcyBhbiBldmVudCB0aGUgZW50aXJlIGFwcCBuZWVkcyB0byByZWxvYWQgb24uXG4gICAgICAgICAgICBzY29wZS4kd2F0Y2gobmV0d29ya1NlcnZpY2UuZ2V0R3JhcGhEYXRhLCBydW4sIHRydWUpO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoaXMgZnVuY3Rpb24gZG9lc24ndCBpbW1lZGlhdGVseSBtYWtlIHNlbnNlLiAgSXQgcmV0dXJucyBhbiBhcnJheSBiZWNhdXNlIGl0IGlzIHVzZWQgZm9yXG4gICAgICAgICAgICAgKiBgc2NvcGUuJHdhdGNoQ29sbGVjdGlvbmAuICBMaWtlIEkgc2FpZCBhYm92ZSwgSSBkb24ndCB0aGluayB0aGlzIGlzIHdvcmtpbmcgcHJvcGVybHksIGFzIEkgYW0gbm90IHN1cmVcbiAgICAgICAgICAgICAqIHRoYXQgdGhlIGB3YXRjaENvbGxlY3Rpb25gIG1ldGhvZCBjYWxsaW5nIGl0IHdpbGwgZ2l2ZSB1cyB0aGUgcHJvcGVyIGRhdGEsIGJ1dCBoYXZlbid0IGNoZWNrZWQgaXQuXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHJldHVybnMgeypbXX1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0V2luZG93Qm94ICgpIHtcbiAgICAgICAgICAgICAgICAvLyBSZXR1cm5zIHRoZSBpbm5lciB3aWR0aCBvZiB0aGUgYnJvd3NlciB3aW5kb3csIGZvciByZWZyZXNoaW5nIGQzIGdyYXBoXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0V2luZG93V2lkdGggKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpWyAwIF0uaW5uZXJXaWR0aDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRXaW5kb3dIZWlnaHQgKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpWyAwIF0uaW5uZXJIZWlnaHQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsgZ2V0V2luZG93SGVpZ2h0KCksIGdldFdpbmRvd1dpZHRoKCkgXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBXaGVuZXZlciB0aGUgd2luZG93IGlzIHJlc2l6ZWQsIHRoZW4gd2UgbmVlZCB0byByZS1ydW4gYW5ndWxhcidzIGNvbXBpbGUgY2hhaW4uXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogVGhpcyBpcyBqdXN0IHRoZSBldmVudCBoYW5kbGVyIGZvciB0aGUgYCR3aW5kb3cub25yZXNpemVgLiAgSWYgd2UgaGFkIEVTNiwgd291bGQgaGF2ZSBqdXN0IGluLWxpbmVkIGl0LlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBvbldpbmRvd1Jlc2l6ZSAoKSB7XG4gICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogR2VuZXJpYyBjaGVja2VyIG1ldGhvZCB0byBzZWUgaWYgdHdvIHRoaW5ncyBhcmUgZXF1YWwgYW5kIGlmIG5vdCwgcmVkcmF3IHRoZSBncmFwaC4gIFRoZXJlIGFyZSBzbyBtYW55XG4gICAgICAgICAgICAgKiB0aGluZ3MgdGhhdCBuZWVkIHRoaXMgY2hlY2sgdGhhdCBpdCB3YXMgZWFzaWVyIHRvIGp1c3Qgd3JpdGUgdGhpcyB3cmFwcGVyIG1ldGhvZC5cbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBUaGUgZXF1YWxzIGNoZWNrIHNob3VsZCBwcm9iYWJseSBiZSByZXBsYWNlZCB3aXRoIGxvZGFzaCdzIGlzRXF1YWwgbWV0aG9kXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJ1biAobiwgbykge1xuICAgICAgICAgICAgICAgIGlmICggbiA9PT0gbyApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICggY3VycmVudEVudGl0eUxpc3RlbmVyICkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50RW50aXR5TGlzdGVuZXIoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZW5kZXIobmV0d29ya1NlcnZpY2UuZ2V0R3JhcGhEYXRhKCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoaXMgaXMgd2hhdCBwb3B1bGF0ZXMgdGhlIGJ1aWxkZXIgZnVuY3Rpb25zIGZyb20gYWJvdmUuICBXZSBkb24ndCBuZWVkIHRvIGNhbGwgYHJlbmRlcmAgYmVjYXVzZVxuICAgICAgICAgICAgICogdGhlcmUgaXMgYW5vdGhlciB3YXRjaGVyIHRoYXQgYWxzbyBzZWVzIGNoYW5nZXMgdG8gYHNpemVCeWAgdGhhdCB3aWxsIHRha2UgY2FyZSBvZiBpdCBmb3IgdXMuXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHBhcmFtIG5ld1NpemVCeSAtIHRoZSBuZXcgc2l6ZUJ5IHZhbHVlIHNlZW4gYnkgYSB3YXRjaGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIHdhdGNoU2l6ZUJ5IChuZXdTaXplQnkpIHtcbiAgICAgICAgICAgICAgICBpZiAoICFpc0RlZmluZWQobmV3U2l6ZUJ5KSApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfYnVpbGRTY2FsZUZ1bmN0aW9uID0gYnVpbGRTY2FsZUZ1bmN0aW9uKG5ld1NpemVCeSk7XG4gICAgICAgICAgICAgICAgX2J1aWxkQ2hhcmdlRnVuY3Rpb24gPSBidWlsZENoYXJnZUZ1bmN0aW9uKG5ld1NpemVCeSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhpcyBpcyB0aGUgbWFpbiBmdW5jdGlvbiBvZiB0aGlzIGZpbGUuICBUYWtlcyBpbiB0aGUgZGF0YSByZXF1aXJlZCBhbmQgZHJhd3MgdGhlIGdyYXBoLlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEBwYXJhbSB7IHsgbm9kZUxpc3QsIGxpbmtMaXN0IH0gfSBncmFwaERhdGFcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gcmVuZGVyIChncmFwaERhdGEpIHtcbiAgICAgICAgICAgICAgICAvLyBHZXQgb3VyIHN2ZyBlbGVtZW50IGZvciB0aGlzIGRyYXdcbiAgICAgICAgICAgICAgICB2YXIgc3ZnID0gYnVpbGRTdmdFbGVtZW50KHJvb3QpO1xuICAgICAgICAgICAgICAgIC8vIEF0dGFjaCBhIGxpc3RlbmVyIHRoYXQgd2lsbCBmaXJlIHdoZW4gY2xpY2tpbmcgYW55dGhpbmcgb3RoZXIgdGhhbiBhIG5vZGVcbiAgICAgICAgICAgICAgICBzdmcub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkgeyBzY29wZS4kYXBwbHkoYmFja2dyb3VuZENsaWNrKTsgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBTYWZldHkgY2hlY2sgdG8ganVzdCBza2lwIGV2ZXJ5dGhpbmcgaWYgd2UgaGF2ZW4ndCBiZWVuIGdpdmVuIGFueSBub2Rlc1xuICAgICAgICAgICAgICAgIGlmICggZ3JhcGhEYXRhLm5vZGVMaXN0Lmxlbmd0aCA9PT0gMCApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnTm9kZSBsaXN0IGlzIGVtcHR5LCBub3QgZHJhd2luZyBhIGdyYXBoJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIHNpemUgb2YgdGhlIGRyYXdpbmcgYXJlYSB0aGF0IHdlIGFyZSBhbGxvd2VkIHRvIHdvcmsgd2l0aFxuICAgICAgICAgICAgICAgIHZhciBib3VuZHMgPSBzdmcubm9kZSgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgICAgICAgICAgLy8gQnVpbGQgb3VyIHNjYWxlIGZ1bmN0aW9ucyBiYXNlZCBvbiB0aGUgbm9kZXMgcHJvdmlkZWRcbiAgICAgICAgICAgICAgICB2YXIgc2l6ZUJ5U2NhbGUgPSBfYnVpbGRTY2FsZUZ1bmN0aW9uKGdyYXBoRGF0YS5ub2RlTGlzdCk7XG4gICAgICAgICAgICAgICAgdmFyIGNhbGN1bGF0ZUNoYXJnZSA9IF9idWlsZENoYXJnZUZ1bmN0aW9uKGdyYXBoRGF0YS5ub2RlTGlzdCk7XG5cbiAgICAgICAgICAgICAgICAvLyBCdWlsZCBvdXIgZm9jdXMgcG9pbnRzIGJhc2VkIG9uIHRoZSBzaXplIG9mIHRoZSBkcmF3aW5nIGFyZWFcbiAgICAgICAgICAgICAgICB2YXIgZm9jaSA9IGJ1aWxkRm9jaShib3VuZHMpO1xuXG4gICAgICAgICAgICAgICAgLy8gQnVpbGQgdGhlIGFjdHVhbCBEMyBncmFwaFxuICAgICAgICAgICAgICAgIHZhciBmb3JjZUxheW91dCA9IGJ1aWxkRm9yY2VMYXlvdXQoZ3JhcGhEYXRhLCBib3VuZHMpO1xuXG4gICAgICAgICAgICAgICAgLy8gVGhlIG9yZGVyIG9mIGNhbGxpbmcgZHJhd0Nvbm5lY3Rpb24gYW5kIGRyYXdOb2RlIEtJTkQgT0YgbWF0dGVyXG4gICAgICAgICAgICAgICAgLy8gVGhleSBjYW4gYmUgY2hhbmdlLCB0aGF0IGRvZXNuJ3QgbWF0dGVyXG4gICAgICAgICAgICAgICAgLy8gQnV0IGlmIGRyYXdOb2RlIGhhcHBlbnMgZmlyc3QsIHRoZW4gdGhlIGxpbmVzIGdldCBkcmF3biBvbiB0b3Agb2YgdGhlIGNpcmNsZXMsIHdoaWNoIGxvb2tzIHdlaXJkXG5cbiAgICAgICAgICAgICAgICB2YXIgY29ubmVjdGlvbiA9IGRyYXdDb25uZWN0aW9uKGdyYXBoRGF0YS5saW5rTGlzdCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IGRyYXdOb2RlKGdyYXBoRGF0YS5ub2RlTGlzdCk7XG5cbiAgICAgICAgICAgICAgICAvLyBgdGlja2AgaXMgYW4gZXZlbnQgdGhhdCBoYXBwZW5zLCB3ZWxsLCBldmVyeSBcInRpY2tcIi4gIFdoYXQgdGhpcyBhbGxvd3MgdXMgdG8gZG8gaXMgYWRqdXN0IHRoZSByYXRlXG4gICAgICAgICAgICAgICAgLy8gYXQgd2hpY2ggdGhlIG5vZGVzIHdpbGwgbWFrZSB0aGVpciB3YXkgdG8gdGhlIGZvY3VzIHBvaW50cy4gIEFsc28sIHdlIGhhdmUgdG8gdGVsbCBBbmd1bGFyIHRoYXRcbiAgICAgICAgICAgICAgICAvLyBzdHVmZiBpcyBoYXBwZW5pbmcgYmVjYXVzZSwgbGlrZSBJIHNhaWQgYmVmb3JlLCBBbmd1bGFyIGRvZXMgbm90IGxpa2Ugc3R1ZmYgbWVzc2luZyBhcm91bmQgaW4gdGhlXG4gICAgICAgICAgICAgICAgLy8gSFRNTCB3aXRob3V0IGl0cyBwZXJtaXNzaW9uXG4gICAgICAgICAgICAgICAgZm9yY2VMYXlvdXQub24oJ3RpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdGljayAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgayA9IDAuMSAqIGV2ZW50LmFscGhhO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gxJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuc291cmNlLng7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneTEnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5zb3VyY2UueTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MicsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnRhcmdldC54O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kyJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQudGFyZ2V0Lnk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGdyYXBoRGF0YS5ub2RlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZC55ICs9IChmb2NpWyBkLnZhbHVlLnR5cGUgXS55IC0gZC55KSAqIGs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZC54ICs9IChmb2NpWyBkLnZhbHVlLnR5cGUgXS54IC0gZC54KSAqIGs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBkLnggKyAnLCcgKyBkLnkgKyAnKSc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseSh0aWNrKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIExpc3RlbiBmb3IgYSBuZXcgY3VycmVudCBlbnRpdHkgYW5kIHNhdmUgdGhlIGxpc3RlbmVyIHRvIGJlIGRlc3Ryb3llZCBvbiBuZXh0IHJlZHJhd1xuICAgICAgICAgICAgICAgIGN1cnJlbnRFbnRpdHlMaXN0ZW5lciA9IHNjb3BlLiRvbihcbiAgICAgICAgICAgICAgICAgICAgJ2NnLmN1cnJlbnQtZW50aXR5LnVwZGF0ZScsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChldmVudCwgYXJncykgeyBmb2N1c0N1cnJlbnRFbnRpdHkoYXJncyk7IH1cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRm9jdXMgdGhlIGN1cnJlbnQgZW50aXR5LCBpZiBpdCBleGlzdHNcbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSBjdXJyZW50RW50aXR5IC0gVGhlIGN1cnJlbnQgZW50aXR5IHNlbGVjdGVkIGluIHRoZSBhcHAuICBDb3VsZCB0ZWNobmljYWxseVxuICAgICAgICAgICAgICAgICAqIGJlIGFueSBhcmJpdHJhcnkgZW50aXR5XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZm9jdXNDdXJyZW50RW50aXR5IChjdXJyZW50RW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGdyYXBoRGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgLm5vZGVMaXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iai52YWx1ZTsgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGVudGl0eSkgeyByZXR1cm4gXy5pc0VxdWFsKGN1cnJlbnRFbnRpdHksIGVudGl0eSk7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaChmb2N1c05laWdoYm9ycyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQnVpbGRzIHRoZSBEMyBmb3JjZSBsYXlvdXQgZ3JhcGhcbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIFRoZSBmb3JjZSBsYXlvdXQgZ3JhcGggZG9lc24ndCBhY3R1YWxseSBkcmF3IGFueXRoaW5nIHRvIHRoZSBzY3JlZW4sIGp1c3QgYWRkcyBwcm9wZXJ0aWVzIHRvIHRoZVxuICAgICAgICAgICAgICAgICAqIGdpdmVuIG5vZGVzIGFuZCBsaW5rcyBvYmplY3RzIHRvIGRlc2NyaWJlIHdoZXJlIHRoZXkgU0hPVUxEIGJlIG9uIHRoZSBzY3JlZW5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSBkYXRhIC0gU2FtZSBhcyB0aGUgcmVuZGVyJ3MgZ3JhcGhEYXRhIGFyZ3VtZW50LiAgU2VwYXJhdGUsIGluIGNhc2Ugd2Ugd2FudCB0byBkbyBmaWx0ZXJpbmdcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gYm91bmRzIC0gVGhlIHNpemUgb2YgdGhlIGRyYXdpbmcgYXJlYVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkRm9yY2VMYXlvdXQgKGRhdGEsIGJvdW5kcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDMubGF5b3V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JjZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zaXplKFsgYm91bmRzLndpZHRoLCBib3VuZHMuaGVpZ2h0IF0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5ub2RlcyhkYXRhLm5vZGVMaXN0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubGlua3MoZGF0YS5saW5rTGlzdClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm9kZSBhdHRyYWN0aW9uIHRvIGVhY2ggb3RoZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmxpbmtTdHJlbmd0aCgwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXhpbXVtIGxlbmd0aCBiZXR3ZWVuIG5vZGVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5saW5rRGlzdGFuY2UoNTApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jaGFyZ2UoY2FsY3VsYXRlQ2hhcmdlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHdoYXQgYWN0dWFsbHkgc3RhcnRzIHRoZSBhbmltYXRpb24uICBSZW1vdmUgdGhpcyBhbmQgY2FsbCBsYXRlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB5b3Ugd2FudCB0aGlzIHRvIGp1c3QgYmUgYSBidWlsZGVyIGZ1bmN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdGFydCgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERyYXdzIHRoZSBjaXJjbGVzIGZvciBlYWNoIG5vZGUgYW5kIGF0dGFjaGVzIGxpc3RlbmVycyB0byB0aGVtLlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIG5vZGVMaXN0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZHJhd05vZGUgKG5vZGVMaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0U2l6ZSA9IDEwO1xuXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldENpcmNsZVJhZGl1cyAobikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzRGVmaW5lZChuKSA/IHNpemVCeVNjYWxlKG4pIDogZGVmYXVsdFNpemU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBPbiBjbGljaywgZm9jdXMgZW50aXR5IGFuZCBtYXJrIGFzIHRoZSBzZWxlY3RlZCBlbnRpdHlcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY2xpY2tFdmVudCAob2JqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBjbGljayAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB1dGlscy5pc0RlZmluZWQoZDMuZXZlbnQpICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkMy5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkMy5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1cyhvYmopO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoY2xpY2spO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBzdmdcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJy5ub2RlJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKG5vZGVMaXN0KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKCdnJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENTUyBpcyBzZXR1cCB0byBzdHlsZSBub2RlcyBkaWZmZXJlbnQgY29sb3JzIGJhc2VkIG9uIHRoZWlyIHR5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uIChkKSB7IHJldHVybiAnbm9kZSAnICsgZC52YWx1ZS50eXBlICsgJy1ub2RlJzsgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbignY2xpY2snLCBjbGlja0V2ZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhbGwoZm9yY2VMYXlvdXQuZHJhZyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQXBwZW5kcyBjaXJjbGVzIHRvIGVhY2ggbm9kZVxuICAgICAgICAgICAgICAgICAgICBub2RlLmFwcGVuZCgnY2lyY2xlJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdyJywgZ2V0Q2lyY2xlUmFkaXVzKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBOb3Qgc3VyZSB3aHksIGJ1dCBzZWVtcyBvbmx5IGFmdGVyIGNsaWNraW5nIG9uIGEgbm9kZSBkb2VzIHRleHQgYXBwZWFyLiAgUHJvYmFibHkgYSBDU1MgdGhpbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNlZCB0byBiZSBhIGB3ZWxsY29ubmVjdGVkYCBwcm9wZXJ0eSBpbiB0aGUgb2xkIGNvZGUsIGJ1dCBJIGRpZG4ndCBnZXQgYXJvdW5kIHRvIGltcGxlbWVudGluZ1xuICAgICAgICAgICAgICAgICAgICAvLyBpdCBpbiB0aGUgcmUtd3JpdGVcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5hcHBlbmQoJ3RleHQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRleHQoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGlzRGVmaW5lZChkLnZhbHVlLm5pY2tuYW1lKSA/IGQudmFsdWUubmlja25hbWUgOiBkLnZhbHVlLm5hbWU7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZHgnLCBmdW5jdGlvbiAoKSB7IHJldHVybiAoLTAuMDY1ICogdGhpcy5nZXRDb21wdXRlZFRleHRMZW5ndGgoKSAvIDIpICsgJ2VtJzsgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkeScsIGZ1bmN0aW9uICgpIHsgcmV0dXJuICgwLjA4ICogdGhpcy5wYXJlbnROb2RlLmdldEJCb3goKS5oZWlnaHQgLyAyICsgMC41KSArICdlbSc7IH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEFjdHVhbGx5IG9uZSBvZiB0aGUgZXhwZW5zaXZlIG1ldGhvZHMgaW4gaGVyZS4gIFRoaXMgd2lsbCBzZWFyY2ggZm9yIGNvbm5lY3RlZCBlbnRpdGllcyBhbmQgYWRkXG4gICAgICAgICAgICAgICAgICogY2VydGFpbiBjbGFzc2VzIHRvIHRoZW0gZm9yIENTUyBzdHlsaW5nLiAgSSdtIG5vdCBzdXJlLCBidXQgRDMgcHJvYmFibHkgaGFzIHNvbWV0aGluZyBmb3IgZG9pbmdcbiAgICAgICAgICAgICAgICAgKiB0aGlzIGZvciB5b3UsIGJ1dCBJIGRpZG4ndCBjaGVjay5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSBlbnRpdHlcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBmb2N1c05laWdoYm9ycyAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNvbXBhcmVBZ2FpbnN0Q29ubmVjdGlvbk9iaiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuc291cmNlID09PSBjLmluZGV4IHx8IGQudGFyZ2V0ID09PSBjLmluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG5laWdoYm9yaW5nIChhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5pbmRleCA9PT0gYi5pbmRleFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCB1dGlscy5pc0RlZmluZWQoZ3JhcGhEYXRhLmxpbmtMaXN0LmZpbmQoY29tcGFyZUFnYWluc3RDb25uZWN0aW9uT2JqKGEpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQXBwbHkgJ3VuZm9jdXNlZCcgY2xhc3MgdG8gYWxsIG5vbi1uZWlnaGJvcnMuXG4gICAgICAgICAgICAgICAgICAgIC8vIEFwcGx5ICdmb2N1c2VkJyBjbGFzcyB0byBhbGwgbmVpZ2hib3JzLlxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBTZWUgaWYgaXQgY2FuIGJlIGRvbmUgd2l0aCBqdXN0IG9uZSBjbGFzcyBhbmQgOm5vdCguZm9jdXNlZCkgQ1NTIHNlbGVjdG9ycy5cbiAgICAgICAgICAgICAgICAgICAgbm9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBuZWlnaGJvcmluZyhlbnRpdHkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIF8ubmVnYXRlKG5laWdoYm9yaW5nKGVudGl0eSkpKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGNvbXBhcmVBZ2FpbnN0Q29ubmVjdGlvbk9iaihlbnRpdHkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIF8ubmVnYXRlKGNvbXBhcmVBZ2FpbnN0Q29ubmVjdGlvbk9iaikpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFNldHMgdGhlIGdpdmVuIGVudGl0eSBhcyB0aGUgY3VycmVudCBlbnRpdHkgc2VsZWN0ZWQgaW4gdGhlIGFwcCBhbmQgdGhlbiBmb2N1c2VzXG4gICAgICAgICAgICAgICAgICogaXQgYW5kIGl0cyBuZWlnaGJvcnNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gZW50aXR5XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZm9jdXMgKGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIHV0aWxzLmlzRGVmaW5lZChjZ1NlcnZpY2UuZ2V0Q3VycmVudEVudGl0eSgpKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXkgYXJlIHRoZSBzYW1lLCB0aGVuIHdlIGRvbid0IG5lZWQgdG8gZG8gYW55dGhpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggXy5pc0VxdWFsKGNnU2VydmljZS5nZXRDdXJyZW50RW50aXR5KCksIGVudGl0eS52YWx1ZSkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgbm90LCB0aGVuIGNhbGwgdW5Gb2N1cyB0byBzZXR1cCBmb3IgbmV3IGZvY3VzZWQgZW50aXR5XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bkZvY3VzKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjZ1NlcnZpY2Uuc2V0Q3VycmVudEVudGl0eShlbnRpdHkudmFsdWUpO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvY3VzTmVpZ2hib3JzKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ2xlYXIgb3V0IGFueSBzZWxlY3Rpb25zIG1hZGUgYW5kIHNldCBjYWxsIHVuRm9jdXNcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBiYWNrZ3JvdW5kQ2xpY2sgKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoICF1dGlscy5pc0RlZmluZWQoY2dTZXJ2aWNlLmdldEN1cnJlbnRFbnRpdHkoKSkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB1bkZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIGNnU2VydmljZS5zZXRDdXJyZW50RW50aXR5KG51bGwpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENsZWFycyBvdXQgdGhlIGNsYXNzZXMgYXR0YWNoZWQgYnkgZm9jdXMuICBUaGUgb3RoZXIgaGFsZiBvZiB0aGUgZnVuY3Rpb24gaXMgbGVmdG92ZXIgZnJvbSB3aGVuXG4gICAgICAgICAgICAgICAgICogdGhlcmUgd2FzIGEgZmVhdHVyZSBmb3IgZG91YmxlIGNsaWNraW5nIGEgbm9kZSB0byBmcmVlemUgaXQgaW4gcGxhY2UsIGJ1dCBhZnRlciBpbXBsZW1lbnRpbmcgaXQgSVxuICAgICAgICAgICAgICAgICAqIGZlbHQgaXQgd2FzIHN0dXBpZCBsb29raW5nIHNvIEkgcmVtb3ZlZCBpdCwgYnV0IGxlZnQgdGhlIHN0dWZmIGhlcmUgYmVjYXVzZSBpdCBkb2Vzbid0IGFjdHVhbGx5IGRvXG4gICAgICAgICAgICAgICAgICogYW55dGhpbmcuXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gZW50aXR5XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gdW5Gb2N1cyAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICggdXRpbHMuaXNEZWZpbmVkKGVudGl0eSkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHkuZml4ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyYXBoRGF0YS5ub2RlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5maXhlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBSZXN0YXJ0IGQzIGFuaW1hdGlvbnMuXG4gICAgICAgICAgICAgICAgICAgIGlmICggdXRpbHMuaXNEZWZpbmVkKGNnU2VydmljZS5nZXRDdXJyZW50RW50aXR5KCkpICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yY2VMYXlvdXQucmVzdW1lKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEcmF3cyB0aGUgbGluZXMgZm9yIGVhY2ggbGluayBiZXR3ZWVuIG5vZGVzXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gY29ubmVjdGlvbkxpc3RcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkcmF3Q29ubmVjdGlvbiAoY29ubmVjdGlvbkxpc3QpIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBOb3Qgc3VyZSBob3cgdXNlZnVsIGV4YWN0bHksIGJ1dCB3aGVuIGxvb2tpbmcgYXQgYWxsIGRhdGEgZnJvbSB0aGUgQVBJLCB0aGVyZSBhcmUgYWJvdXRcbiAgICAgICAgICAgICAgICAgICAgLy8gMzAwIHJlZHVuZGFudCBjb25uZWN0aW9ucywgc28gcHJvYmFibHkgbm90IG5lY2Vzc2FyeSwgYnV0IGNvdWxkIGJlIHVzZWZ1bCBkb3duIHRoZSByb2FkXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBBUEkgaXMgbmV2ZXIgdXBkYXRlZCB0byBmaWx0ZXIgdGhhdCBmb3IgdXMuICBCZXN0IGNhc2Ugd291bGQgYmUgQVBJIGRvaW5nIHRoaXMuXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZVJlZHVuZGFudENvbm5lY3Rpb25Gcm9tTGlzdCAoY29uTGlzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2ltcGxlciB0aGFuIGl0IGxvb2tzLiAgVHJ1c3QgbWUsIGxvb2tzIG5pY2VyIGluIEVTNi4gIEkgbmVlZCB0byBnZXQgYXJvdW5kIHRvIGRvaW5nIHRoYXRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBGaXJzdCwgY29udmVydHMgdG8gYW4gb2JqIG9mIHsgc291cmNlOiBzb3VyY2UuaWQsIHRhcmdldDogdGFyZ2V0LmlkIFRoZW4sIGNyZWF0ZSBhXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBtYXAgb2Ygc291cmNlLmlkID0+IGFycmF5IG9mIHRhcmdldC5pZFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkTWFwID0gY29uTGlzdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHNvdXJjZTogb2JqLnNvdXJjZS5pZCwgdGFyZ2V0OiBvYmoudGFyZ2V0LmlkIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlZHVjZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHJlc3VsdCwgb2JqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHJlc3VsdFsgb2JqLnNvdXJjZSBdICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFsgb2JqLnNvdXJjZSBdLnB1c2gob2JqLnRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRbIG9iai5zb3VyY2UgXSA9IFsgb2JqLnRhcmdldCBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTmV4dCwgdGhpcyBmdW5jdGlvbiB3aWxsIGZpbHRlciBvdXQgYW55IGNvbm5lY3Rpb24gdGhhdCBpcyBhbHJlYWR5IHJlcHJlc2VudGVkIGluIHRoZSBsaXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBidXQgaGFzIHRoZSBzb3VyY2UgYW5kIHRhcmdldCBzd2FwcGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXhhbXBsZTogW3sgc291cmNlOiAxLCB0YXJnZXQ6IDJ9LCB7IHNvdXJjZTogMiwgdGFyZ2V0OiAxIH1dID0+IFt7IHNvdXJjZTogMSwgdGFyZ2V0OiAyIH1dXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBmaW5kSW5JZE1hcCAob2JqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlkTWFwWyBvYmoudGFyZ2V0LmlkIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRNYXBbIG9iai50YXJnZXQuaWQgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgaWRNYXBbIG9iai50YXJnZXQuaWQgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKGZ1bmN0aW9uIChzSWQpIHsgcmV0dXJuIHNJZCA9PT0gb2JqLnNvdXJjZS5pZDsgfSkgIT09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbkxpc3QuZmlsdGVyKGZpbmRJbklkTWFwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJlZCA9IHJlbW92ZVJlZHVuZGFudENvbm5lY3Rpb25Gcm9tTGlzdChjb25uZWN0aW9uTGlzdCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdmdcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJy5saW5rJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKGZpbHRlcmVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKCdsaW5lJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uIChsKSB7IHJldHVybiAnbGluayAnICsgbC50eXBlICsgJy1saW5rICc7IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAncmVzdHJpY3QnOiAnRScsXG4gICAgICAgICAgICAnbGluayc6IExpbmtGblxuICAgICAgICB9O1xuICAgIH1cblxuICAgIERpcmVjdGl2ZS4kaW5qZWN0ID0gW1xuICAgICAgICAnJHdpbmRvdycsXG4gICAgICAgICdfJyxcbiAgICAgICAgJ2NnVXRpbFNlcnZpY2UnLFxuICAgICAgICAnY2dNYWluU2VydmljZScsXG4gICAgICAgICdjZ05ldHdvcmtTZXJ2aWNlJ1xuICAgIF07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2NpdmljLWdyYXBoLm5ldHdvcmsnKVxuICAgICAgICAuZGlyZWN0aXZlKCdjZ05ldHdvcmtHcmFwaCcsIERpcmVjdGl2ZSk7XG5cbn0pKGFuZ3VsYXIsIGQzKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgLy8gU2xvcHB5IGZ1bmN0aW9uLCByZXR1cm5zIGEgZmlsdGVyIGZ1bmN0aW9uIHRoYXQgZmlsdGVycyBiYXNlZCBvbiB0aGUgdmFsdWUgaW4gdGhlXG4gICAgLy8gbWFwLCB3aXRoIHRoZSBrZXkgY2hvc2VuIGJlaW5nIHRoZSB0eXBlIHByb3BlcnR5IGluIHRoZSBvYmplY3RcbiAgICBmdW5jdGlvbiBmaWx0ZXJCeUJvb2xlYW5NYXAobWFwKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICByZXR1cm4gbWFwW3YudHlwZV07XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZmlsdGVyQnlNaW5Db25uZWN0aW9uKG1pbkNvbm5lY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgIHJldHVybiBlbnRpdHkudmFsdWUuY29sbGFib3JhdGlvbnMubGVuZ3RoID49IG1pbkNvbm5lY3Rpb247XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29udmVydEVudGl0eVRvR3JhcGhOb2RlKGVudGl0eSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJpZFwiOiBlbnRpdHkuaWQsXG4gICAgICAgICAgICBcInZhbHVlXCI6IGVudGl0eVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZpbmRCeUlkKGZpbmRUaGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgcmV0dXJuIGQuaWQgPT09IGZpbmRUaGlzO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFNlcnZpY2UodXRpbHMsIGNnU2VydmljZSwgZW50aXR5U2VydmljZSwgY29ubmVjdGlvblNlcnZpY2UpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHZhciBfbWluQ29ubmVjdGlvbiA9IDU7XG4gICAgICAgIHZhciBfc2l6ZUJ5ID0gXCJlbXBsb3llZXNcIjtcblxuICAgICAgICBmdW5jdGlvbiBzaXplQnkobykge1xuICAgICAgICAgICAgaWYodXRpbHMuaXNTdHJpbmcobykpIHtcbiAgICAgICAgICAgICAgICBfc2l6ZUJ5ID0gbztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIF9zaXplQnk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBtaW5Db25uZWN0aW9uKG8pIHtcbiAgICAgICAgICAgIGlmKGlzRmluaXRlKG8pICYmIG8gPj0gMCkge1xuICAgICAgICAgICAgICAgIF9taW5Db25uZWN0aW9uID0gbztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIF9taW5Db25uZWN0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0R3JhcGhOb2RlTGlzdChlbnRpdHlMaXN0KSB7XG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZW50aXR5TGlzdCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBlbnRpdHlMaXN0XG4gICAgICAgICAgICAgICAgLmZpbHRlcihmaWx0ZXJCeUJvb2xlYW5NYXAoZW50aXR5U2VydmljZS5nZXRFbnRpdHlUeXBlcygpKSlcbiAgICAgICAgICAgICAgICAubWFwKGNvbnZlcnRFbnRpdHlUb0dyYXBoTm9kZSlcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGZpbHRlckJ5TWluQ29ubmVjdGlvbihfbWluQ29ubmVjdGlvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0R3JhcGhMaW5rTGlzdChub2RlTGlzdCwgY29ubmVjdGlvbk9iaikge1xuICAgICAgICAgICAgZnVuY3Rpb24gYnVpbGRDb25uZWN0aW9uT2JqZWN0KGtleSkge1xuICAgICAgICAgICAgICAgIHZhciBjb25uZWN0aW9ucyA9IGNvbm5lY3Rpb25PYmpba2V5XTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoY29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZU5vZGUgPSBub2RlTGlzdC5maW5kSW5kZXgoZmluZEJ5SWQoY29ubmVjdGlvbi5zb3VyY2UpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXROb2RlID0gbm9kZUxpc3QuZmluZEluZGV4KGZpbmRCeUlkKGNvbm5lY3Rpb24udGFyZ2V0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBcInNvdXJjZVwiOiBzb3VyY2VOb2RlLCBcInRhcmdldFwiOiB0YXJnZXROb2RlLCB0eXBlOiBrZXkgfTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcih1dGlscy5pc0RlZmluZWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBmaWx0ZXJDb25uZWN0aW9uV2l0aE1pc3NpbmdFbnRpdHkoY29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrUHJvcGVydHkocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXRpbHMuaXNEZWZpbmVkKGNvbm5lY3Rpb25bcHJvcF0pICYmIGNvbm5lY3Rpb25bcHJvcF0gIT09IC0xO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY2hlY2tQcm9wZXJ0eShcInNvdXJjZVwiKSAmJiBjaGVja1Byb3BlcnR5KFwidGFyZ2V0XCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiByZWR1Y2VBcnJheU9mQXJyYXkoYXJyLCBkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFyci5jb25jYXQoZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBPYmplY3RcbiAgICAgICAgICAgICAgICAua2V5cyhjb25uZWN0aW9uT2JqKVxuICAgICAgICAgICAgICAgIC5tYXAoYnVpbGRDb25uZWN0aW9uT2JqZWN0KVxuICAgICAgICAgICAgICAgIC5yZWR1Y2UocmVkdWNlQXJyYXlPZkFycmF5LCBbXSlcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGZpbHRlckNvbm5lY3Rpb25XaXRoTWlzc2luZ0VudGl0eSlcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGZpbHRlckJ5Qm9vbGVhbk1hcChjb25uZWN0aW9uU2VydmljZS5nZXRDb25uZWN0aW9uVHlwZXMoKSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0R3JhcGhEYXRhKCkge1xuICAgICAgICAgICAgdmFyIGNvbm5lY3Rpb25PYmogPSBjZ1NlcnZpY2UuZ2V0Q29ubmVjdGlvbk9iaigpO1xuICAgICAgICAgICAgdmFyIG5vZGVMaXN0ID0gZ2V0R3JhcGhOb2RlTGlzdChjZ1NlcnZpY2UuZ2V0RW50aXR5TGlzdCgpKTtcblxuICAgICAgICAgICAgcmV0dXJuIHsgXCJub2RlTGlzdFwiOiBub2RlTGlzdCwgXCJsaW5rTGlzdFwiOiBnZXRHcmFwaExpbmtMaXN0KG5vZGVMaXN0LCBjb25uZWN0aW9uT2JqKSB9O1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5nZXRHcmFwaERhdGEgPSBnZXRHcmFwaERhdGE7XG5cbiAgICAgICAgc2VsZi5zaXplQnkgPSBzaXplQnk7XG4gICAgICAgIHNlbGYubWluQ29ubmVjdGlvbiA9IG1pbkNvbm5lY3Rpb247XG4gICAgfVxuXG4gICAgU2VydmljZS4kaW5qZWN0ID0gW1xuICAgICAgICBcImNnVXRpbFNlcnZpY2VcIixcbiAgICAgICAgXCJjZ01haW5TZXJ2aWNlXCIsXG4gICAgICAgIFwiZW50aXR5U2VydmljZVwiLFxuICAgICAgICBcImNvbm5lY3Rpb25TZXJ2aWNlXCJcbiAgICBdO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKFwiY2l2aWMtZ3JhcGgubmV0d29ya1wiKVxuICAgICAgICAuc2VydmljZShcImNnTmV0d29ya1NlcnZpY2VcIiwgU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIENvbnRyb2xsZXIoc2NvcGUsIGNnU2VydmljZSkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIHZtLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgIHZtLmdldEN1cnJlbnRWaWV3ID0gY2dTZXJ2aWNlLmdldEN1cnJlbnRWaWV3O1xuICAgICAgICB2bS5pc01vYmlsZSA9IGNnU2VydmljZS5tb2JpbGVDaGVjaygpO1xuXG4gICAgICAgIHNjb3BlLiRvbihcImNnLmRhdGEtbG9hZGVkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZtLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBDb250cm9sbGVyLiRpbmplY3QgPSBbXCIkc2NvcGVcIiwgXCJjZ01haW5TZXJ2aWNlXCJdO1xuXG4gICAgZnVuY3Rpb24gRGlyZWN0aXZlKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJyZXN0cmljdFwiOiBcIkVcIixcbiAgICAgICAgICAgIFwidGVtcGxhdGVVcmxcIjogXCJqcy9sYXlvdXQvY2VudHJhbENvbHVtbi9jZW50cmFsQ29sdW1uLnRlbXBsYXRlLmh0bWxcIixcbiAgICAgICAgICAgIFwiY29udHJvbGxlclwiOiBDb250cm9sbGVyLFxuICAgICAgICAgICAgXCJjb250cm9sbGVyQXNcIjogXCJjZW50cmFsXCIsXG4gICAgICAgICAgICBcInNjb3BlXCI6IHt9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKFwiY2l2aWMtZ3JhcGhcIilcbiAgICAgICAgLmRpcmVjdGl2ZShcImNlbnRyYWxDb2x1bW5cIiwgRGlyZWN0aXZlKTtcblxufSkoYW5ndWxhciwgZDMpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI2LzE2LlxuICovXG4oZnVuY3Rpb24oYW5ndWxhcikge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2lucHV0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdGljdDogJ0UnLFxuICAgICAgICAgICAgcmVxdWlyZTogJz9uZ01vZGVsJyxcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmdNb2RlbCkge1xuICAgICAgICAgICAgICAgIGlmICggJ3R5cGUnIGluIGF0dHJzICYmIGF0dHJzLnR5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ3JhbmdlJyApIHtcbiAgICAgICAgICAgICAgICAgICAgbmdNb2RlbC4kcGFyc2Vycy5wdXNoKHBhcnNlRmxvYXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KTtcbn0pKGFuZ3VsYXIpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBDb250cm9sbGVyKCRzY29wZSwgY2dTZXJ2aWNlKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgdm0uaXNNb2JpbGUgPSBjZ1NlcnZpY2UubW9iaWxlQ2hlY2soKTtcbiAgICAgICAgdm0uZW1pdFN0YXJ0Q3JlYXRlRW50aXR5ID0gZW1pdFN0YXJ0Q3JlYXRlRW50aXR5O1xuICAgICAgICB2bS5pc0VkaXQgPSBjZ1NlcnZpY2UuZ2V0SXNFZGl0O1xuXG4gICAgICAgICRzY29wZS4kb24oJ2NnLmN1cnJlbnQtZW50aXR5LnVwZGF0ZScsIGZ1bmN0aW9uIChldmVudCwgYXJncykgeyB2bS5jdXJyZW50RW50aXR5ID0gYXJnczsgfSk7XG5cbiAgICAgICAgZnVuY3Rpb24gZW1pdFN0YXJ0Q3JlYXRlRW50aXR5ICgpIHtcbiAgICAgICAgICAgIGNnU2VydmljZS5zdGFydEVkaXQoKTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHNjb3BlXCIsIFwiY2dNYWluU2VydmljZVwiXTtcblxuICAgIGZ1bmN0aW9uIERpcmVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwicmVzdHJpY3RcIjogXCJFXCIsXG4gICAgICAgICAgICBcInRlbXBsYXRlVXJsXCI6IFwianMvbGF5b3V0L3JpZ2h0Q29sdW1uL3JpZ2h0Q29sdW1uLnRlbXBsYXRlLmh0bWxcIixcbiAgICAgICAgICAgIFwiY29udHJvbGxlclwiOiBDb250cm9sbGVyLFxuICAgICAgICAgICAgXCJjb250cm9sbGVyQXNcIjogXCJyaWdodFwiLFxuICAgICAgICAgICAgXCJzY29wZVwiOiB7fVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoXCIpXG4gICAgICAgIC5kaXJlY3RpdmUoXCJyaWdodENvbHVtblwiLCBEaXJlY3RpdmUpO1xuXG59KShhbmd1bGFyLCBkMyk7XG4iXX0=
